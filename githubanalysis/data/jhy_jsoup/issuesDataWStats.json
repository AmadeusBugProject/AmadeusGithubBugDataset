{"projectName": "jhy/jsoup", "bugLabels": ["bug", "not-a-bug"], "captureTime": "Sat Jul  4 17:08:43 2020", "issues": [{"title": "regression: IOException: Mark invalid after upgrade to 1.12.2", "body": "Hi,\r\n\r\nwe are using jsoup inside XWiki to perform some page validation as part of our integrations tests and we noticed a regression after the upgrade from jsoup 1.12.1 to 1.12.2. When accessing a particular page, we obtained the following:\r\n```\r\nException in thread \"main\" java.io.IOException: Mark invalid\r\n\tat org.jsoup.parser.CharacterReader.rewindToMark(CharacterReader.java:148)\r\n\tat org.jsoup.parser.Tokeniser.consumeCharacterReference(Tokeniser.java:192)\r\n\tat org.jsoup.parser.TokeniserState$38.read(TokeniserState.java:759)\r\n\tat org.jsoup.parser.Tokeniser.read(Tokeniser.java:59)\r\n\tat org.jsoup.parser.TreeBuilder.runParser(TreeBuilder.java:55)\r\n\tat org.jsoup.parser.TreeBuilder.parse(TreeBuilder.java:47)\r\n\tat org.jsoup.parser.Parser.parseInput(Parser.java:35)\r\n\tat org.jsoup.helper.DataUtil.parseInputStream(DataUtil.java:170)\r\n\tat org.jsoup.helper.DataUtil.load(DataUtil.java:66)\r\n\tat org.jsoup.Jsoup.parse(Jsoup.java:118)\r\n\tat Main.main(Main.java:47)\r\n```\r\n\r\nI've been able to isolate and reproduce in a \"small\" setup, but it still needs an XWiki instance.\r\nHere's the small Java code I'm using for reproduction:\r\n```\r\nGetMethod method = new GetMethod(\"http://127.0.0.1:8080/xwiki/bin/admin/XWiki/XWikiPreferences?editor=globaladmin&section=Groups\");\r\nmethod.setFollowRedirects(true);\r\nmethod.getParams().setSoTimeout(30000);\r\nmethod.setDoAuthentication(true);\r\nmethod.addRequestHeader(\"Authorization\",\"Basic \" + new String(Base64.encodeBase64(\"Admin:admin\".getBytes())));\r\nnew HttpClient().executeMethod(method);\r\nbyte[] response = method.getResponseBody();\r\nmethod.releaseConnection();\r\n\r\nJsoup.parse(new ByteArrayInputStream(response), null, \"\");\r\n```\r\n\r\nBefore running this, you need to download an instance of XWiki 12.0 (http://maven.xwiki.org/releases/org/xwiki/platform/xwiki-platform-distribution-flavor-jetty-hsqldb/12.0/xwiki-platform-distribution-flavor-jetty-hsqldb-12.0.zip), unzip it, start it using the bash script (`./start_xwiki.sh`) and open a browser with `http://localhost:8080` to be sure everything's loaded. \r\n\r\nI checked with 1.12.1 and I confirm I didn't reproduce with it.", "url": "https://github.com/jhy/jsoup/issues/1324", "user": "surli", "labels": ["bug", "fixed"], "created": "2020-02-14 09:21:41", "closed": "2020-02-15 19:35:39", "commits": {"62c0595813b817ec593b0941ca4c3f29d10fac55": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 1.0002777777777778, "commitsDetails": [{"commitHash": "62c0595813b817ec593b0941ca4c3f29d10fac55", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["528ba552b19ab2ae949feecb373ef85a0b126566"], "nameRev": "62c0595813b817ec593b0941ca4c3f29d10fac55 tags/jsoup-1.13.1~26", "commitMessage": "Preserve the mark when buffering\n\nSo that we can rewind if required.\n\nFixes #1324\n", "commitDateTime": "2020-02-15 11:35:34", "authoredDateTime": "2020-02-15 11:35:34", "commitGitStats": [{"filePath": "CHANGES", "insertions": 4, "deletions": 0, "lines": 4}, {"filePath": "src/main/java/org/jsoup/parser/CharacterReader.java", "insertions": 13, "deletions": 6, "lines": 19}, {"filePath": "src/main/java/org/jsoup/parser/Token.java", "insertions": 1, "deletions": 1, "lines": 2}, {"filePath": "src/test/java/org/jsoup/integration/ParseTest.java", "insertions": 13, "deletions": 0, "lines": 13}, {"filePath": "src/test/java/org/jsoup/parser/CharacterReaderTest.java", "insertions": 1, "deletions": 4, "lines": 5}, {"filePath": "src/test/resources/htmltests/README", "insertions": 1, "deletions": 0, "lines": 1}, {"filePath": "src/test/resources/htmltests/xwiki-1324.html", "insertions": 1015, "deletions": 0, "lines": 1015}], "commitSpoonAstDiffStats": [{"spoonFilePath": "CharacterReader.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.CharacterReader.bufferUp()", "TOT": 16, "UPD": 1, "INS": 7, "MOV": 6, "DEL": 2}]}, {"spoonFilePath": "Token.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.Token.EndTag.toString()", "TOT": 2, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 1}]}, {"spoonFilePath": "ParseTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.integration.ParseTest.testXwiki()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "CharacterReaderTest.java", "spoonMethods": []}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["62c0595813b817ec593b0941ca4c3f29d10fac55"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 14, "deletions": 7, "lines": 21, "gitFilesChange": 2}, "spoonStatsSummary": {"TOT": 18, "UPD": 1, "INS": 8, "MOV": 6, "DEL": 3, "spoonFilesChanged": 2, "spoonMethodsChanged": 2}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/parser"], "changesInPackagesSPOON": ["org.jsoup.parser.Token.EndTag.toString()", "org.jsoup.parser.CharacterReader.bufferUp()"]}, {"title": "multiple optgroups without closing tags are incorrectly formatted as html", "body": "Given a select element like:\r\n\r\n    <select>\r\n      <optgroup label=\"a\">\r\n      <option>one\r\n      <option>two\r\n      <option>three\r\n      <optgroup label=\"b\">\r\n      <option>one\r\n      <option>two\r\n      <option>three\r\n    </select>\r\n\r\nThe jsoup parser does not close the 'a' optgroup when it encounters the 'b' optgroup element like is done in web browsers. This results in the 'b' optgroup element being contained within the 'a' optgroup element instead of the select element.\r\n\r\nThe https://html.spec.whatwg.org/multipage/parsing.html#parsing-main-inselect stage should first pop the option node from the stack (as it is current node), then pop the optgroup element (as that then becomes the current node).", "url": "https://github.com/jhy/jsoup/issues/1313", "user": "rhdunn", "labels": ["bug"], "created": "2020-02-04 15:54:15", "closed": "2020-02-09 16:23:22", "commits": {"fbc7e76a2ac966a19b12c73147d3c6c8ab0eb61d": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 5.000277777777778, "commitsDetails": [{"commitHash": "fbc7e76a2ac966a19b12c73147d3c6c8ab0eb61d", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["a82d6b6ae8cb33cc7ccc78c7a805886a06b1dcd2"], "nameRev": "fbc7e76a2ac966a19b12c73147d3c6c8ab0eb61d tags/jsoup-1.13.1~37", "commitMessage": "Auto close optgroup in select\n\nFixes #1313\n", "commitDateTime": "2020-02-09 08:23:18", "authoredDateTime": "2020-02-09 08:23:18", "commitGitStats": [{"filePath": "CHANGES", "insertions": 3, "deletions": 0, "lines": 3}, {"filePath": "src/main/java/org/jsoup/parser/HtmlTreeBuilderState.java", "insertions": 2, "deletions": 2, "lines": 4}, {"filePath": "src/test/java/org/jsoup/parser/HtmlParserTest.java", "insertions": 19, "deletions": 0, "lines": 19}], "commitSpoonAstDiffStats": [{"spoonFilePath": "HtmlTreeBuilderState.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilderState.16.process(org.jsoup.parser.Token,org.jsoup.parser.HtmlTreeBuilder)", "TOT": 2, "UPD": 0, "INS": 0, "MOV": 1, "DEL": 1}]}, {"spoonFilePath": "HtmlParserTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.HtmlParserTest.testStartOptGroup()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["fbc7e76a2ac966a19b12c73147d3c6c8ab0eb61d"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 2, "deletions": 2, "lines": 4, "gitFilesChange": 1}, "spoonStatsSummary": {"TOT": 2, "UPD": 0, "INS": 0, "MOV": 1, "DEL": 1, "spoonFilesChanged": 1, "spoonMethodsChanged": 1}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/parser"], "changesInPackagesSPOON": ["org.jsoup.parser.HtmlTreeBuilderState.16.process(org.jsoup.parser.Token,org.jsoup.parser.HtmlTreeBuilder)"]}, {"title": "TextNode.toString() works different for TextNodes with/without parents", "body": "Hello,\r\nthanks a lot for have done this wonderful library.\r\nThe TextNode.toString() method shows the following (surprising) behaviour:\r\n\r\n    ...\r\n    TextNode tn = new TextNode(\"Two  spaces\"); // there are 2 spaces between the words\r\n    System.out.println(tn.toString()); // prints string with 2 spaces\r\n    tn.setParentNode(...); // set any parent\r\n    System.out.println(tn.toString()); // prints string with 1 space\r\n    ...\r\n\r\nFrom my point of view the expected behaviour is that a single TextNode without parent behaves like a \"typical\" TextNode.\r\nAnd the typical behaviour in jsoup is, that whitespace is normalized (the default value in out.prettyPrint() is true).\r\n\r\nYou may find a running example in the attached source file.\r\n\r\n--\r\nMy recommendation:\r\nIn the method  TextNode.outerHtmlHead(...)\r\njust remove the \"instance of\" check, since preserveWhitespace(..) already checks for instanceof Element and represents the expected standard behaviour in the case that this check fails:\r\n\r\n    ...\r\n    boolean normaliseWhite = out.prettyPrint() && parent() instanceof Element && !Element.preserveWhitespace(parent());\r\n    ...\r\n\r\nshould become\r\n\r\n    ...\r\n    boolean normaliseWhite = out.prettyPrint() && !Element.preserveWhitespace(parent());\r\n    ...\r\n\r\nBest Regards\r\nMr-Mr-X\r\n[JsoupBugExample.zip](https://github.com/jhy/jsoup/files/4128101/JsoupBugExample.zip)\r\n\r\n", "url": "https://github.com/jhy/jsoup/issues/1309", "user": "Mr-Mr-X", "labels": ["bug"], "created": "2020-01-29 13:10:08", "closed": "2020-02-02 17:56:18", "commits": {"128008e29c33cf6b3b20fde8f2bbd13ead98509c": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 4.000277777777778, "commitsDetails": [{"commitHash": "128008e29c33cf6b3b20fde8f2bbd13ead98509c", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["97758e74cbd39552f711480a4d1e4e5fe058efea"], "nameRev": "128008e29c33cf6b3b20fde8f2bbd13ead98509c tags/1.12.2~21", "commitMessage": "Fix TextNode.outerHtml normalization for orhpans\n\nFixes #1309\n", "commitDateTime": "2020-02-02 09:56:10", "authoredDateTime": "2020-02-02 09:56:10", "commitGitStats": [{"filePath": "CHANGES", "insertions": 3, "deletions": 0, "lines": 3}, {"filePath": "src/main/java/org/jsoup/nodes/TextNode.java", "insertions": 1, "deletions": 2, "lines": 3}, {"filePath": "src/test/java/org/jsoup/nodes/TextNodeTest.java", "insertions": 23, "deletions": 0, "lines": 23}], "commitSpoonAstDiffStats": [{"spoonFilePath": "TextNode.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.TextNode.outerHtmlHead(java.lang.Appendable,int,org.jsoup.nodes.Document$OutputSettings)", "TOT": 4, "UPD": 0, "INS": 1, "MOV": 2, "DEL": 1}]}, {"spoonFilePath": "TextNodeTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.TextNodeTest.testSpaceNormalise()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["128008e29c33cf6b3b20fde8f2bbd13ead98509c"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 1, "deletions": 2, "lines": 3, "gitFilesChange": 1}, "spoonStatsSummary": {"TOT": 4, "UPD": 0, "INS": 1, "MOV": 2, "DEL": 1, "spoonFilesChanged": 1, "spoonMethodsChanged": 1}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/nodes"], "changesInPackagesSPOON": ["org.jsoup.nodes.TextNode.outerHtmlHead(java.lang.Appendable,int,org.jsoup.nodes.Document$OutputSettings)"]}, {"title": "prettyPrint and outline surround inline-tags with white space (where they shouldn't)", "body": "Using this code with jsoup 1.11.3:\r\n\r\n```\r\nString html = \"<div><span>1:15</span>&ndash;<span>2:15</span>&nbsp;p.m.</div>\";\r\norg.jsoup.nodes.Document document = Jsoup.parse(html);\r\ndocument.outputSettings().prettyPrint(false).outline(false);\r\nSystem.out.println(\"Example 1:\");\r\nSystem.out.println(document.body().html());\r\ndocument.outputSettings().prettyPrint(true).outline(false);\r\nSystem.out.println(\"Example 2:\");\r\nSystem.out.println(document.body().html());\r\ndocument.outputSettings().prettyPrint(true).outline(true);\r\nSystem.out.println(\"Example 3:\");\r\nSystem.out.println(document.body().html());\r\n```\r\n\r\nResults in\r\n\r\n```\r\nExample 1:\r\n<div><span>1:15</span>\u2013<span>2:15</span>&nbsp;p.m.</div>\r\nExample 2:\r\n<div>\r\n <span>1:15</span>\u2013\r\n <span>2:15</span>&nbsp;p.m.\r\n</div>\r\nExample 3:\r\n<div>\r\n <span>1:15</span>\r\n \u2013\r\n <span>2:15</span>\r\n &nbsp;p.m.\r\n</div>\r\n```\r\n\r\nExample 1: Please watch that there are no white spaces around the en-dash. That's correct.\r\nExample 2: Additional white space after the en-dash.\r\nExample 3: Additional white space before and after the en-dash.\r\n\r\nExamples 2 and 3 result in incorrect typography and I hereby consider that as a bug.\r\n\r\nIt is likely that this problem is similar to issue #851", "url": "https://github.com/jhy/jsoup/issues/1305", "user": "EdyHinzen", "labels": ["bug"], "created": "2020-01-22 09:42:27", "closed": "2020-02-02 17:17:00", "commits": {"3a9bf46eeb36196d841c3fa05597e40a13f51f43": {"commitGHEventType": "referenced", "commitUser": "jhy"}}, "ttf": 11.000277777777777, "commitsDetails": [{"commitHash": "3a9bf46eeb36196d841c3fa05597e40a13f51f43", "commitGHEventType": "referenced", "commitUser": "jhy", "commitParents": ["b891b6f54f7c53b0ca4510093251f0c1a81b02e6"], "nameRev": "3a9bf46eeb36196d841c3fa05597e40a13f51f43 tags/1.12.2~24", "commitMessage": "Not add line break when pretty printing inline tags\n\nThis is a fix for issue #1305.\n", "commitDateTime": "2020-02-02 07:46:50", "authoredDateTime": "2020-01-26 18:20:00", "commitGitStats": [{"filePath": "src/main/java/org/jsoup/nodes/Element.java", "insertions": 14, "deletions": 2, "lines": 16}, {"filePath": "src/main/java/org/jsoup/parser/Tag.java", "insertions": 7, "deletions": 3, "lines": 10}, {"filePath": "src/test/java/org/jsoup/nodes/ElementTest.java", "insertions": 24, "deletions": 2, "lines": 26}, {"filePath": "src/test/java/org/jsoup/parser/HtmlParserTest.java", "insertions": 2, "deletions": 3, "lines": 5}, {"filePath": "src/test/java/org/jsoup/parser/TagTest.java", "insertions": 1, "deletions": 1, "lines": 2}, {"filePath": "src/test/java/org/jsoup/safety/CleanerTest.java", "insertions": 1, "deletions": 1, "lines": 2}], "commitSpoonAstDiffStats": [{"spoonFilePath": "Element.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.Element.outerHtmlHead(java.lang.Appendable,int,org.jsoup.nodes.Document$OutputSettings)", "TOT": 4, "UPD": 0, "INS": 1, "MOV": 2, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.Element.isFormatAsBlock(org.jsoup.nodes.Document$OutputSettings)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Element.isInlineable(org.jsoup.nodes.Document$OutputSettings)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "Tag.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.Tag.equals(java.lang.Object)", "TOT": 5, "UPD": 1, "INS": 2, "MOV": 1, "DEL": 1}, {"spoonMethodName": "org.jsoup.parser.Tag.isInline()", "TOT": 3, "UPD": 0, "INS": 1, "MOV": 1, "DEL": 1}, {"spoonMethodName": "org.jsoup.parser.Tag", "TOT": 2, "UPD": 0, "INS": 2, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.Tag.hashCode()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "ElementTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.ElementTest.testShadowElementsAreUpdated()", "TOT": 3, "UPD": 1, "INS": 0, "MOV": 1, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.ElementTest.testNotPrettyWithEnDashBody()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.ElementTest.testPrettyWithEnDashBody()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.ElementTest.testPrettyAndOutlineWithEnDashBody()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "HtmlParserTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.HtmlParserTest.testNormalisesIsIndex()", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.HtmlParserTest.reconstructFormattingElementsInTable()", "TOT": 3, "UPD": 1, "INS": 0, "MOV": 1, "DEL": 1}]}, {"spoonFilePath": "TagTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.TagTest.defaultSemantics()", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "CleanerTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.safety.CleanerTest.handlesNoHrefAttribute()", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["3a9bf46eeb36196d841c3fa05597e40a13f51f43"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 21, "deletions": 5, "lines": 26, "gitFilesChange": 2}, "spoonStatsSummary": {"TOT": 17, "UPD": 1, "INS": 9, "MOV": 4, "DEL": 3, "spoonFilesChanged": 2, "spoonMethodsChanged": 7}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/nodes", "src/main/java/org/jsoup/parser"], "changesInPackagesSPOON": ["org.jsoup.parser.Tag", "org.jsoup.parser.Tag.hashCode()", "org.jsoup.nodes.Element.isFormatAsBlock(org.jsoup.nodes.Document$OutputSettings)", "org.jsoup.nodes.Element.isInlineable(org.jsoup.nodes.Document$OutputSettings)", "org.jsoup.nodes.Element.outerHtmlHead(java.lang.Appendable,int,org.jsoup.nodes.Document$OutputSettings)", "org.jsoup.parser.Tag.equals(java.lang.Object)", "org.jsoup.parser.Tag.isInline()"]}, {"title": "Starts with selector not working", "body": "I am using JSoup 1.11.3 and everything works flawlessly except for the **starts with** selector.\r\n\r\nThe following selector `a[href ^= ' mailto']` does not yield any results and throws exception:\r\n> Exception in thread \"main\" java.lang.IndexOutOfBoundsException: Index: 0, Size: 0\r\n\r\nThis is my code:\r\n`String str = d.select(\"a[href ^= ' mailto']\").get(0).html();`\r\n\r\nRunning the selector on Opera (Webkit), yields the correct result (by typing `$(\"a[href ^= ' mailto']\")` in the console)\r\n\r\nThis is the page I am parsing: https://pastebin.com/si1Zy2cz", "url": "https://github.com/jhy/jsoup/issues/1279", "user": "andrfgs", "labels": ["bug"], "created": "2019-11-19 02:29:38", "closed": "2020-01-27 00:53:48", "commits": {"8371a171fcc3314a343223d83bcab7fa2c40c0c7": {"commitGHEventType": "referenced", "commitUser": "jhy"}, "a4210b7a958aa2eaff2b78881f5a1e16f8265dc8": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 68.00027777777778, "commitsDetails": [{"commitHash": "8371a171fcc3314a343223d83bcab7fa2c40c0c7", "commitGHEventType": "referenced", "commitUser": "jhy", "commitParents": ["9b674f82b984c65a17b2e127d5d0beac130fe1ce"], "nameRev": "8371a171fcc3314a343223d83bcab7fa2c40c0c7 tags/1.12.2~37", "commitMessage": "fix for bug #1279\n", "commitDateTime": "2020-01-26 16:45:16", "authoredDateTime": "2019-11-22 16:55:59", "commitGitStats": [{"filePath": "src/main/java/org/jsoup/internal/Normalizer.java", "insertions": 4, "deletions": 0, "lines": 4}, {"filePath": "src/main/java/org/jsoup/select/Evaluator.java", "insertions": 10, "deletions": 4, "lines": 14}, {"filePath": "src/test/java/org/jsoup/select/SelectorTest.java", "insertions": 7, "deletions": 0, "lines": 7}], "commitSpoonAstDiffStats": [{"spoonFilePath": "Normalizer.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.internal.Normalizer.normalize(java.lang.String,boolean)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "Evaluator.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.select.Evaluator.AttributeKeyPair", "TOT": 7, "UPD": 0, "INS": 5, "MOV": 2, "DEL": 0}, {"spoonMethodName": "org.jsoup.select.Evaluator.AttributeWithValueStarting", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "SelectorTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.select.SelectorTest.startswithBeginsWithSpace()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}, {"commitHash": "a4210b7a958aa2eaff2b78881f5a1e16f8265dc8", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["8371a171fcc3314a343223d83bcab7fa2c40c0c7"], "nameRev": "a4210b7a958aa2eaff2b78881f5a1e16f8265dc8 tags/1.12.2~36", "commitMessage": "Also add fix for ends with spaces\n\nFixes #1279\n", "commitDateTime": "2020-01-26 16:53:41", "authoredDateTime": "2020-01-26 16:53:41", "commitGitStats": [{"filePath": "CHANGES", "insertions": 3, "deletions": 0, "lines": 3}, {"filePath": "src/main/java/org/jsoup/select/Evaluator.java", "insertions": 1, "deletions": 1, "lines": 2}, {"filePath": "src/test/java/org/jsoup/select/SelectorTest.java", "insertions": 9, "deletions": 2, "lines": 11}], "commitSpoonAstDiffStats": [{"spoonFilePath": "Evaluator.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.select.Evaluator.AttributeWithValueEnding", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "SelectorTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.select.SelectorTest.startswithBeginsWithSpace()", "TOT": 2, "UPD": 2, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.select.SelectorTest.endsWithEndsWithSpaces()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["8371a171fcc3314a343223d83bcab7fa2c40c0c7", "a4210b7a958aa2eaff2b78881f5a1e16f8265dc8"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 2, "gitStatsSummary": {"insertions": 15, "deletions": 5, "lines": 20, "gitFilesChange": 2}, "spoonStatsSummary": {"TOT": 10, "UPD": 0, "INS": 8, "MOV": 2, "DEL": 0, "spoonFilesChanged": 2, "spoonMethodsChanged": 4}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/select", "src/main/java/org/jsoup/internal"], "changesInPackagesSPOON": ["org.jsoup.select.Evaluator.AttributeWithValueStarting", "org.jsoup.select.Evaluator.AttributeWithValueEnding", "org.jsoup.select.Evaluator.AttributeKeyPair", "org.jsoup.internal.Normalizer.normalize(java.lang.String,boolean)"]}, {"title": "Updating from 1.9.2 to 1.12.1 breaks due to the change of QueryParser", "body": "When I try to upgrade Jsoup from 1.9.2 to the version after 1.11.1. The following code breaks due to the change of QueryParser.\r\n\r\n```\r\npublic class TestJsoup {\r\n\t\r\n    private String content = \"<p>==== content =====\u017diva bi\u0107a su izgra\u0111ena od organskih spojeva koji sadr\u017ee ugljik. Nazivamo ih <strong>organske</strong> ili <strong>biolo\u0161ke molekule</strong>. Naziv organske molekule potje\u010de od toga \u0161to se u pro\u0161losti smatralo da ti spojevi mogu nastati samo u \u017eivom organizmu. Organske molekule su gra\u0111ene od razli\u010ditoga broja istih ili sli\u010dnih podjedinica pa tako razlikujemo molekule s jednom podjedinicom &ndash; <strong>monomere</strong>, dvije do deset podjedinica &ndash; <strong>oligomere</strong> i s vi\u0161e od deset podjedinica &ndash; <strong>polimere</strong>. Ova sposobnost polimerizacije vrlo je va\u017ena za \u017eive organizme. Najprije ona olak\u0161ava izgradnju velikih molekula. Naime, stanica ima informaciju kako sintetizirati osnovne jedinice i kako ih udru\u017eiti u ve\u0107e molekule. Ako je potreban neki drugi tip molekule samo treba promijeniti informaciju o udru\u017eivanju dok se osnovne jedinice sintetiziraju na isti na\u010din. Npr. u stanicama za sintezu celuloze koristi se jedan na\u010din vezivanja molekula glukoze dok se za sintezu \u0161kroba koristi drugi. Pri tome je mehanizam nastajanja glukoze isti. <br /><br />Polimerizacija biolo\u0161kih molekula tako\u0111er omogu\u0107uje stanici odr\u017eavanje relativno jednostavnog metabolizma koji proizvodi nekoliko tipova osnovnih jedinica i koji se u osnovi ne mijenja bez obzira na potrebe stanice. Npr. dok biljka raste aminokiseline se ugra\u0111uju u proteine neophodne za rast stabljike i listova. Nakon odre\u0111enoga vremena iste aminokiseline koriste se za sintezu proteina koji su potrebni za cvijetanje. Opisani na\u010din sinteze biolo\u0161kih molekula omogu\u0107uje recikliranje, pa kada neki polimer vi\u0161e nije potreban razgra\u0111uje se do sastavnih dijelova koji se mogu upotrijebiti za sintezu drugih polimera. Tako stanice \u010duvaju energiju koja je ve\u0107 utro\u0161ena pri sintezi monomera. Sinteza polimera, tako\u0111er omogu\u0107uje da razli\u010dite stanice, odnosno razli\u010diti dijelovi organizma uspje\u0161nije rade zajedno. Npr. pri razvoju mladoga embrija u sjemenci okolna tkiva ga opskrbljuju jednostavnim \u0161e\u0107erima, aminokiselinama i lipidima. Stoga embrio mo\u017ee vrlo brzo sintetizirati slo\u017eene molekule koje su mu potrebne. Kada bi do embria dolazile samo hranjive tvari (kisik, ugljik, du\u0161ik, fosfor i dr.) njegov razvoj bi tekao mnogo sporije. <br /><br />U prirodi se nalazi veliki broj organskih molekula zahvaljuju\u0107i gra\u0111i atoma ugljika koji ostvaruje \u010dvrste kovalentne veze s drugim atomima. Organske molekule dijelimo u \u010detiri velike skupine: </p>\\n\" +\r\n            \"<p>1. <strong>ugljikohidrati</strong> <br />2. <strong>proteini</strong> <br />3. <strong>lipidi</strong> <br />4. <strong>nukleinske</strong> <strong>kiseline</strong>. <br /><br />Te molekule \u010desto grade razli\u010dite trodimenzionalne strukture (lanci, spirale, prsteni) o \u010demu ovise njihove zna\u010dajke. Organske molekule imaju razli\u010dite funkcionalne skupine vezane za ugljikove atome (metilnu, karboksilnu, aldehidnu, ketonsku, fosfatnu, amino i dr.). One odre\u0111uju mnoga svojstva tih molekula. Velike molekule mogu imati vi\u0161e razli\u010ditih skupina \u0161to im omogu\u0107uje da npr. istovremeno imaju svojstva kiselina i alkohola, kiselina i baza, topljivosti u lipidima u jednom podru\u010dju molekule i topljivosti u vodi u drugom.</p>\";\r\n\r\n    private String additionalContent = \" <p>=== additionalContent ====Biljna stanica je u trenutku nastajanja i neposredno iza toga potpuno ispunjena protoplastom. Nedugo iza toga po\u010dinju se u njoj javljati tvorevine poput malenih mjehuri\u0107a koji se tijekom rasta stanice me\u0111usobno spajaju i pove\u0107avaju, da bi napokon, kada stanica naraste do svoje normalne veli\u010dine, zauzele najve\u0107i dio lumena. To su vakuole. Dakle kad je stanica mlada ima vi\u0161e malih vakuola, a kad odraste, ima nekoliko manjih ili jednu veliku centralnu vakuolu. U tom je stadiju citoplazma potisnuta uz rub stani\u010dne stijenke i tvori citoplazmatski ovoj.</p>\\n\" +\r\n            \"<p>U prvo se vrijeme smatralo da su vakuole prazni prostori. Danas je poznato da vakuole nisu prazne, ve\u0107 ispunjene stani\u010dnim sokom. <strong>Stani\u010dni sok</strong> je vodena otopina razli\u010ditih kemijskih tvari koje mogu biti korisne (npr. \u0161e\u0107eri), \u0161tetne (npr. razli\u010dite kiseline) ili indiferentne za samu stanicu. Osim teku\u0107e faze vakuole ponekad mogu sadr\u017eavati \u0161krobna zrnca, kristale, proteinska tjele\u0161ca i dr. Sastav stani\u010dnoga soka nije isti kod svih stanica. On ovisi o biljnoj vrsti, tipu (funkciji) stanice, te dobi i fiziolo\u0161kom stanju. Vakuole su od ostatka stanice odijeljene membranom koja se naziva tonoplast.</p>\\n\" +\r\n            \"<p>Vakuole mogu rasti vrlo brzo jer mogu pove\u0107avati svoj volumen akumuliranjem vode s otopljenim solima. Zbog toga i biljna stanica mo\u017ee brzo rasti i znatno pove\u0107ati svoj volumen. Nakon toga mo\u017ee ona kroz dulje vremensko razdoblje sintetizirati dodatne proteine, membrane i organele ili mo\u017ee ostati ispunjena vodom ovisno o potrebama biljke. Za razliku od toga \u017eivotinjske stanice za vrijeme rasta moraju sintetizirati \u010ditav protoplast.</p>\\n\" +\r\n            \"<p>Vakuole imaju va\u017enu ulogu u reguliranju pH i koncentracije razli\u010ditih iona u stanici koji se stalno izmjenjuju preko tonoplasta. One slu\u017ee kao rezervoar za kra\u0107u ili du\u017eu pohranu razli\u010ditih tvari. Na kra\u0107e vrijeme pohranjuju se tvari koje stalno sudjeluju u stani\u010dnom metabolizmu kao \u0161to su aminokiseline, nitrati, fosfati i dr. Oni se vra\u0107aju u citoplazmu u ovisnosti o potrebama stanice. U vakuolama spremi\u0161nih tkiva mnoge tvari odla\u017eu se na du\u017ee vrijeme. Kod sjemenki mnogih vrsta u vakuolama se nalaze \u0161krobna zrnca ili proteinska tjele\u0161ca koja imaju va\u017enu ulogu pri klijanju sjemena. Osim toga mnogi topivi saharidi (glukoza, fruktoza, sukroza) nalaze se u velikim koncentracijama u tim tkivima (npr. \u0161e\u0107erna repa, \u0161e\u0107erna trska i sl.).</p>\\n\" +\r\n            \"<p>U vakuolama se tako\u0111er pohranjuju mnoge tvari koje nastaju kao sporedni produkt u procesu izmjene tvari (sekundarni metaboliti) kao \u0161to su alkaloidi, flavonoidi, tanini i dr. Neke od tih tvari su otpadni proizvodi koji su potencijalno \u0161tetni za ostatak stanice, osobito u visokim koncentracijama pa njihovo skladi\u0161tenje u vakuolama predstavlja detoksifikaciju stanica. Druge su vrlo va\u017ene za biljku jer su uklju\u010dene u njenu interakciju s drugim organizmima (\u017eivotinjama, bakterijama ili drugim biljnim vrstama). Tako mogu slu\u017eiti kao repelent za biljojede koji zbog lo\u0161ega okusa ili otrovnosti ne\u0107e jesti takvo li\u0161\u0107e (npr. tisa) ili mogu imati antibakterijsko dijelovanje (npr. tanini).</p>\\n\" +\r\n            \"<p>Neki od tih sekundarnih metabolita razli\u010dito su obojani i poma\u017eu biljkama privu\u0107i \u017eivotinje radi rasprostiranja polena i sjemenki. Svi ti pigmenti u vakuolama topivi su u vodi i uglavnom pripadaju flavonoidima. Najrasprostranjenija skupina obojanih flavonoida su <strong>antocijani</strong> koji uzrokuju sve mogu\u0107e nijanse obojenosti cvijetova od plave do crvene (npr. kod ru\u017ea /Rosa sp./, bo\u017eura /Paeonia sp./, poto\u010dnica /Myosotis sp./ i dr.). Sli\u010dno je i kod nekih plodova (npr. <em>bazge /Sambucus sp./, kaline /Ligustrum sp./ i dr.</em>). Crvenosme\u0111a do crna boja listova crvene bukve, crvene lijeske i sl. nastaje zajedni\u010dkim dijelovanjem klorofila u mezofilu lista i antocijana u vakuolama epiderme. Postoji mnogo razli\u010ditih vrsta antocijana koji se razlikuju po obojenosti. Razli\u010diti antocijani obi\u010dno dolaze zajedno i kona\u010dna boja ovisi o vrsti antocijana, njihovom omjeru smjese i ukupnoj koli\u010dini. Obojenost tako\u0111er ovisi i o pH stani\u010dnoga soka i prisutnosti nekih iona (npr. \u017eeljezo, aluminij i sl.). Osim antocijana dolaze i blijedo\u017euti antoksantini. Kod biljaka kod koji se unutar istoga roda pojavljuju blijedo\u017euti, plavi i crveni cvijetovi obi\u010dno se radi o kombinaciji razli\u010ditih antocijana i antoksantina (npr. kod <em>jaglaca /Primula sp./, jedi\u0107a /Aconitum sp./ i naprstaka /Digitalis sp./</em>). Promjena boje nekih cvijetova uzrokovana je promijenom pH stani\u010dnoga soka (npr. kod <em>poto\u010dnica /Myosotis sp./ i dr.</em>).</p>\\n\" +\r\n            \"<p>U vakuolama su prisutni i neki neobojani flavonoidi. Neki od njih imaju istu ulogu kao i obojani jer su vidljivi nekim kukcima. Me\u0111utim najva\u017enija uloga tih flavonoida je za\u0161tita od \u0161tetnoga UV zra\u010denja koje absorbiraju. Osim u obojenim cvijetnim dijelovima oni su prisutni i kod zelenih dijelova biljke gdje isto tako \u0161tite stani\u010dne strukture uklju\u010dene u fotosintezu.</p>\\n\" +\r\n            \"<p>Vakuole sadr\u017ee i hidroliti\u010dke enzime pa se u njima odvija razgradnja o\u0161te\u0107enih i/ili nepotrebnih makromolekula. U njima se odvija i razgradnja stani\u010dnih organela kada je to potrebno (npr. pri odbacivanju listova).</p>\\n\" +\r\n            \"<p>Biljka nema sposobnost izlu\u010divanja \u0161tetnih tvari izvan svoga tijela, ve\u0107 ih sakuplja i talo\u017ei u vakuolama, a zatim, ukoliko se radi o listovima od vremena do vremena odbacuju, kad joj li\u0161\u0107e otpada. Kad su takve tvari skupljene u drvu, gube ti dijelovi svoju fiziolo\u0161ku funkciju, pa slu\u017ee samo kao mehani\u010dki potporanj (npr. sr\u010dika drva). Ista je situacija i u korijenu. Na temelju toga proizlazi da biljka \u0161tetne tvari pakti\u010dki mo\u017ee izbaciti iz svoga tijela jedino posredstvom listova. Ta pojava izaziva, s druge strane, znatni utjecaj na tlo, na koje takvi listovi padaju. Ukoliko jedna biljka u svojim listovima istalo\u017ei odre\u0111ene koli\u010dine kalcijeva karbonata, va\u017ene komponente u regulaciji plodnosti tla, tada \u0107e se odbacivanjem listova gornji slojevi tla obogatiti kalcijem, koji se naj\u010de\u0161\u0107e putem oborinskih voda ispire iz povr\u0161inskih slojeva i odlazi u dublje slojeve tla, gdje je mnogim biljkama nepristupa\u010dan. Tako mnoge drvenaste biljke (npr. obi\u010dni grab, <em>Carpinus betulus</em>) imaju va\u017enu ulogu u kru\u017eenju mineralnih tvari u tlu, u prvom redu kalcija.</p>\";\r\n\r\n    private String summary = \"<p>====== sa\u017eetak =====<strong>Sa\u017eetak</strong>:</p>\\n\" +\r\n            \"<ul>\\n\" +\r\n            \"<li><strong>Botanika</strong> je dio biologije tj. znanost koja prou\u010dava sve pojave \u017eivota u biljaka. Rije\u010d &ldquo;botanika&rdquo; dolazi od gr\u010dke rije\u010di botane \u0161to ozna\u010dava grmlje, travu, bilje koje raste na livadama. Za ovu znanost upotrebljava se i naziv fitologija (gr\u010d. fiton = biljka).</li>\\n\" +\r\n            \"</ul>\\n\" +\r\n            \"<p><strong>Ciljevi:</strong></p>\\n\" +\r\n            \"<p>&nbsp;</p>\";\r\n\t\r\n    \r\n    \r\n    @Test\r\n\tpublic void demo(){\r\n\t\t\r\n        StringBuilder bodyHtml = new StringBuilder();\r\n        bodyHtml.append(summary)\r\n                .append(content)\r\n                .append(additionalContent);\r\n        Document document = Jsoup.parse(bodyHtml.toString());\r\n        StringBuilder nav = new StringBuilder();\r\n        Elements bodyElements = document.select(\"body > * \");\r\n\t\t\r\n\t}\r\n\r\n}\r\n```\r\n\r\nIt throws an error:\r\n```\r\norg.jsoup.select.Selector$SelectorParseException: Could not parse query '': unexpected token at ''\r\n\tat org.jsoup.select.QueryParser.findElements(QueryParser.java:206)\r\n\tat org.jsoup.select.QueryParser.parse(QueryParser.java:59)\r\n\tat org.jsoup.select.QueryParser.parse(QueryParser.java:42)\r\n\tat org.jsoup.select.QueryParser.combinator(QueryParser.java:87)\r\n\tat org.jsoup.select.QueryParser.parse(QueryParser.java:69)\r\n\tat org.jsoup.select.QueryParser.parse(QueryParser.java:42)\r\n\tat org.jsoup.select.Selector.select(Selector.java:91)\r\n\tat org.jsoup.nodes.Element.select(Element.java:363)\r\n\tat UTD.SeLab.BBI.BugDetection.TestJsoup.demo(TestJsoup.java:41)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\r\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\r\n\tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n\tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n\tat org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:86)\r\n\tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:678)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)\r\n```", "url": "https://github.com/jhy/jsoup/issues/1274", "user": "SElab2019", "labels": ["bug"], "created": "2019-11-04 15:41:34", "closed": "2020-01-31 06:13:32", "commits": {"f5fc1bb04c224865f8eee5ed718f4ffee0e18712": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 87.00027777777778, "commitsDetails": [{"commitHash": "f5fc1bb04c224865f8eee5ed718f4ffee0e18712", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["de1ced99d4dae991a546534454d5f7d9dc26f0b1"], "nameRev": "f5fc1bb04c224865f8eee5ed718f4ffee0e18712 tags/1.12.2~31", "commitMessage": "Don't throw an exception if a selector ends in a space, just trim it.\n\nFixes #1274\n", "commitDateTime": "2020-01-30 22:13:19", "authoredDateTime": "2020-01-30 22:13:19", "commitGitStats": [{"filePath": "CHANGES", "insertions": 3, "deletions": 0, "lines": 3}, {"filePath": "src/main/java/org/jsoup/select/QueryParser.java", "insertions": 2, "deletions": 0, "lines": 2}, {"filePath": "src/test/java/org/jsoup/select/QueryParserTest.java", "insertions": 16, "deletions": 0, "lines": 16}, {"filePath": "src/test/java/org/jsoup/select/SelectorTest.java", "insertions": 9, "deletions": 0, "lines": 9}], "commitSpoonAstDiffStats": [{"spoonFilePath": "QueryParser.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.select.QueryParser", "TOT": 2, "UPD": 0, "INS": 2, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "QueryParserTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.select.QueryParserTest.exceptOnEmptySelector()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.select.QueryParserTest.exceptOnNullSelector()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.select.QueryParserTest.okOnSpacesForeAndAft()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "SelectorTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.select.SelectorTest.trimSelector()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["f5fc1bb04c224865f8eee5ed718f4ffee0e18712"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 2, "deletions": 0, "lines": 2, "gitFilesChange": 1}, "spoonStatsSummary": {"TOT": 2, "UPD": 0, "INS": 2, "MOV": 0, "DEL": 0, "spoonFilesChanged": 1, "spoonMethodsChanged": 1}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/select"], "changesInPackagesSPOON": ["org.jsoup.select.QueryParser"]}, {"title": "Why does emoji length change after Jsoup.parse().text()?", "body": "Hello.\r\nI using Java.\r\nI want extract text only from Html.\r\nIf input emoji, length change after executed `Jsoup.parse().text()`.\r\nWhy is this?\r\n\r\n* gradle\r\n```\r\nimplementation(\"org.apache.tika:tika-parsers:1.22\")\r\n```\r\n* sample\r\n```java\r\n    @Test\r\n    public void stripHtmlTag() {\r\n        String sampleHtmlTag = \"\\uD83C\\uDFC3\\u200D\u2640\ufe0f\\uD83C\\uDFC3\\u200D\u2642\ufe0f\\uD83D\\uDEB4\\u200D\u2640\ufe0f\\uD83D\\uDEB4\\u200D\u2642\ufe0f\";\r\n\r\n        System.out.println(\"origin string length : \" + sampleHtmlTag.length());\r\n        System.out.println(\"after parse length : \" + Jsoup.parse(sampleHtmlTag).text().length());\r\n    }\r\n```\r\n* result\r\n```\r\norigin string length : 20\r\nafter parse length : 16\r\n```", "url": "https://github.com/jhy/jsoup/issues/1269", "user": "Pyohwan", "labels": ["bug"], "created": "2019-10-18 14:58:36", "closed": "2020-01-31 04:51:26", "commits": {"91ca25b341bc5ad1c364b8e7389287c45ca9df2c": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 104.00027777777778, "commitsDetails": [{"commitHash": "91ca25b341bc5ad1c364b8e7389287c45ca9df2c", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["a4210b7a958aa2eaff2b78881f5a1e16f8265dc8"], "nameRev": "91ca25b341bc5ad1c364b8e7389287c45ca9df2c tags/1.12.2~35", "commitMessage": "Don't normalize away zwj or zwnj\n\nFixes #1269, combined emojis broken\n", "commitDateTime": "2020-01-30 20:51:19", "authoredDateTime": "2020-01-30 20:51:19", "commitGitStats": [{"filePath": "CHANGES", "insertions": 4, "deletions": 0, "lines": 4}, {"filePath": "src/main/java/org/jsoup/internal/StringUtil.java", "insertions": 2, "deletions": 2, "lines": 4}, {"filePath": "src/test/java/org/jsoup/nodes/ElementTest.java", "insertions": 18, "deletions": 3, "lines": 21}], "commitSpoonAstDiffStats": [{"spoonFilePath": "StringUtil.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.internal.StringUtil.isInvisibleChar(int)", "TOT": 4, "UPD": 0, "INS": 1, "MOV": 2, "DEL": 1}]}, {"spoonFilePath": "ElementTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.ElementTest.testNormalizesInvisiblesInText()", "TOT": 2, "UPD": 2, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.ElementTest.doesntDeleteZWJWhenNormalizingText()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["91ca25b341bc5ad1c364b8e7389287c45ca9df2c"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 2, "deletions": 2, "lines": 4, "gitFilesChange": 1}, "spoonStatsSummary": {"TOT": 4, "UPD": 0, "INS": 1, "MOV": 2, "DEL": 1, "spoonFilesChanged": 1, "spoonMethodsChanged": 1}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/internal"], "changesInPackagesSPOON": ["org.jsoup.internal.StringUtil.isInvisibleChar(int)"]}, {"title": "Elements of type E in any namespace ns...", "body": "The wildcard namespace matcher seems to miss some elements.\r\n\r\n    String xml = \"<S:Body>foo</S:Body>\";\r\n    Document doc = Jsoup.parse( xml , \"\",  Parser.xmlParser());\r\n\r\n    Element wildcardBody = doc.selectFirst(\"*|Body\"); // wildcardBody == null (incorrect)\r\n    \r\n    Element sBody = doc.selectFirst(\"S|Body\"); // sBody != null (correct)\r\n\r\nSee it in action here :\r\nhttp://try.jsoup.org/~WuRM4FW7nY7gso0c_rEIcbc_8aE\r\n\r\n**See also :** #1257 (Evaluator.TagEndsWith and Tag disagree in case-sensitivity)\r\n**Jsoup version :** 1.11.2", "url": "https://github.com/jhy/jsoup/issues/1268", "user": "Stephan972", "labels": ["bug", "duplicate"], "created": "2019-10-17 06:39:37", "closed": "2020-01-31 05:37:58", "commits": {}, "ttf": 105.00027777777778, "commitsDetails": []}, {"title": "Evaluator.TagEndsWith and Tag disagree in case-sensitivity", "body": "In jsoup 1.12.1, when a document is parsed using the XML parser, `Document.select` behaves differently when selecting elements with mixed case and namespace. Using the selector `*|mixedCase`, it is not possible to select the elements.\r\n\r\nIn `QueryParser.byTag`, the tag names in the selector are normalized.\r\nIn `Evaluator.TagEndsWith.matches`, the comparison is case-sensitive.\r\nIn `Evaluator.Tag.matches`, the comparison is case-insensitive.\r\n\r\n~~~java\r\nimport org.jsoup.Jsoup;\r\nimport org.jsoup.nodes.Document;\r\nimport org.jsoup.parser.Parser;\r\nimport org.junit.Test;\r\n\r\nimport static org.junit.Assert.assertEquals;\r\n\r\npublic class JsoupCaseSensitivityTest {\r\n\r\n\tprivate final String mixedCase =\r\n\t\t\"<html xmlns:n=\\\"urn:ns\\\"><n:mixedCase>text</n:mixedCase></html>\";\r\n\tprivate final String lowercase =\r\n\t\t\"<html xmlns:n=\\\"urn:ns\\\"><n:lowercase>text</n:lowercase></html>\";\r\n\r\n\t@Test\r\n\tpublic void html_mixed_case_simple_name() {\r\n\t\tDocument doc = Jsoup.parse(mixedCase, \"\", Parser.htmlParser());\r\n\r\n\t\tassertEquals(0, doc.select(\"mixedCase\").size());\r\n\t}\r\n\r\n\t@Test\r\n\tpublic void html_mixed_case_wildcard_name() {\r\n\t\tDocument doc = Jsoup.parse(mixedCase, \"\", Parser.htmlParser());\r\n\r\n\t\tassertEquals(1, doc.select(\"*|mixedCase\").size());\r\n\t}\r\n\r\n\t@Test\r\n\tpublic void html_lowercase_simple_name() {\r\n\t\tDocument doc = Jsoup.parse(lowercase, \"\", Parser.htmlParser());\r\n\r\n\t\tassertEquals(0, doc.select(\"lowercase\").size());\r\n\t}\r\n\r\n\t@Test\r\n\tpublic void html_lowercase_wildcard_name() {\r\n\t\tDocument doc = Jsoup.parse(lowercase, \"\", Parser.htmlParser());\r\n\r\n\t\tassertEquals(1, doc.select(\"*|lowercase\").size());\r\n\t}\r\n\r\n\t@Test\r\n\tpublic void xml_mixed_case_simple_name() {\r\n\t\tDocument doc = Jsoup.parse(mixedCase, \"\", Parser.xmlParser());\r\n\r\n\t\tassertEquals(0, doc.select(\"mixedCase\").size());\r\n\t}\r\n\r\n\t@Test\r\n\tpublic void xml_mixed_case_wildcard_name() {\r\n\t\tDocument doc = Jsoup.parse(mixedCase, \"\", Parser.xmlParser());\r\n\r\n\t\t// FIXME: should be 1, to behave in the same way as lowercase_wildcard_name.\r\n\t\tassertEquals(0, doc.select(\"*|mixedCase\").size());\r\n\t}\r\n\r\n\t@Test\r\n\tpublic void xml_lowercase_simple_name() {\r\n\t\tDocument doc = Jsoup.parse(lowercase, \"\", Parser.xmlParser());\r\n\r\n\t\tassertEquals(0, doc.select(\"lowercase\").size());\r\n\t}\r\n\r\n\t@Test\r\n\tpublic void xml_lowercase_wildcard_name() {\r\n\t\tDocument doc = Jsoup.parse(lowercase, \"\", Parser.xmlParser());\r\n\r\n\t\tassertEquals(1, doc.select(\"*|lowercase\").size());\r\n\t}\r\n}\r\n~~~\r\n", "url": "https://github.com/jhy/jsoup/issues/1257", "user": "rillig-tk", "labels": ["bug"], "created": "2019-09-23 16:11:18", "closed": "2020-01-31 05:39:41", "commits": {"f2ff26b63c74c379c52da1f9c58bf328598fd2ba": {"commitGHEventType": "referenced", "commitUser": "jhy"}}, "ttf": 129.00027777777777, "commitsDetails": [{"commitHash": "f2ff26b63c74c379c52da1f9c58bf328598fd2ba", "commitGHEventType": "referenced", "commitUser": "jhy", "commitParents": ["eb7b0d785d3229a87e11a18e171d011cfe664f1e"], "nameRev": "f2ff26b63c74c379c52da1f9c58bf328598fd2ba tags/1.12.2~33", "commitMessage": "Fix case in-sensitivity for Tag.Endswith (namespaced elements)\n\nFixes #1257\n", "commitDateTime": "2020-01-30 21:42:08", "authoredDateTime": "2020-01-30 21:42:08", "commitGitStats": [{"filePath": "CHANGES", "insertions": 4, "deletions": 0, "lines": 4}, {"filePath": "src/main/java/org/jsoup/select/Evaluator.java", "insertions": 2, "deletions": 2, "lines": 4}, {"filePath": "src/main/java/org/jsoup/select/QueryParser.java", "insertions": 6, "deletions": 4, "lines": 10}, {"filePath": "src/test/java/org/jsoup/select/SelectorTest.java", "insertions": 97, "deletions": 1, "lines": 98}], "commitSpoonAstDiffStats": [{"spoonFilePath": "Evaluator.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.select.Evaluator.Tag.matches(org.jsoup.nodes.Element,org.jsoup.nodes.Element)", "TOT": 2, "UPD": 2, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.select.Evaluator.TagEndsWith.matches(org.jsoup.nodes.Element,org.jsoup.nodes.Element)", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "QueryParser.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.select.QueryParser.byTag()", "TOT": 8, "UPD": 3, "INS": 2, "MOV": 2, "DEL": 1}]}, {"spoonFilePath": "SelectorTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.select.SelectorTest.testWildcardNamespacedXmlTag()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.select.SelectorTest.testWildCardNamespacedCaseVariations()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.select.SelectorTest", "TOT": 2, "UPD": 0, "INS": 2, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.select.SelectorTest.html_mixed_case_simple_name()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.select.SelectorTest.html_mixed_case_wildcard_name()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.select.SelectorTest.html_lowercase_simple_name()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.select.SelectorTest.html_lowercase_wildcard_name()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.select.SelectorTest.xml_mixed_case_simple_name()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.select.SelectorTest.xml_mixed_case_wildcard_name()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.select.SelectorTest.xml_lowercase_simple_name()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.select.SelectorTest.xml_lowercase_wildcard_name()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["f2ff26b63c74c379c52da1f9c58bf328598fd2ba"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 8, "deletions": 6, "lines": 14, "gitFilesChange": 2}, "spoonStatsSummary": {"TOT": 11, "UPD": 6, "INS": 2, "MOV": 2, "DEL": 1, "spoonFilesChanged": 2, "spoonMethodsChanged": 3}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/select"], "changesInPackagesSPOON": ["org.jsoup.select.QueryParser.byTag()", "org.jsoup.select.Evaluator.Tag.matches(org.jsoup.nodes.Element,org.jsoup.nodes.Element)", "org.jsoup.select.Evaluator.TagEndsWith.matches(org.jsoup.nodes.Element,org.jsoup.nodes.Element)"]}, {"title": "Bad html causes ArrayIndexOutOfBoundsException (v1.11.3), UncheckedIOException (v1.12.1)", "body": "```java\r\npublic void test() {\r\n    byte[] data = new URL(\"https://github.com/apache/any23/files/3551705/weirdjsoupmin.txt\").openStream().readAllBytes();\r\n    Parser.parseFragment(new String(data, StandardCharsets.ISO_8859_1), null, \"\", ParseErrorList.tracking(1));\r\n}\r\n```\r\n\r\nOutput (jsoup v1.11.3):\r\n> Exception in thread \"main\" java.lang.ArrayIndexOutOfBoundsException: -1\r\n\tat org.jsoup.parser.CharacterReader.consume(CharacterReader.java:99)\r\n\tat org.jsoup.parser.TokeniserState$34.read(TokeniserState.java:552)\r\n\tat org.jsoup.parser.Tokeniser.read(Tokeniser.java:57)\r\n\tat org.jsoup.parser.TreeBuilder.runParser(TreeBuilder.java:51)\r\n\tat org.jsoup.parser.HtmlTreeBuilder.parseFragment(HtmlTreeBuilder.java:126)\r\n\tat org.jsoup.parser.Parser.parseFragment(Parser.java:138)\r\n\r\nOutput (jsoup v1.12.1):\r\n> Exception in thread \"main\" org.jsoup.UncheckedIOException: java.io.IOException: No buffer left to unconsume\r\n\tat org.jsoup.parser.CharacterReader.unconsume(CharacterReader.java:111)\r\n\tat org.jsoup.parser.TokeniserState$41.read(TokeniserState.java:877)\r\n\tat org.jsoup.parser.Tokeniser.read(Tokeniser.java:57)\r\n\tat org.jsoup.parser.TreeBuilder.runParser(TreeBuilder.java:55)\r\n\tat org.jsoup.parser.HtmlTreeBuilder.parseFragment(HtmlTreeBuilder.java:126)\r\n\tat org.jsoup.parser.Parser.parseFragment(Parser.java:140)\r\nCaused by: java.io.IOException: No buffer left to unconsume\r\n\t... 7 more\r\n\r\nThis exception originally occurred when parsing the webpage https://www.streetpadel.com/overgrip-head-pro-grip-dz-negro-p-17233.html but I whittled the html down to a minimal example that reproduces the issue, here: https://github.com/apache/any23/files/3551705/weirdjsoupmin.txt. \r\n\r\nCf. [ANY23-441](https://github.com/apache/any23/pull/139)", "url": "https://github.com/jhy/jsoup/issues/1251", "user": "HansBrende", "labels": ["bug"], "created": "2019-08-28 23:51:21", "closed": "2020-01-27 00:32:05", "commits": {"c2b1fe73129e9c23d93e5393ce8007995c1630dc": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 151.00027777777777, "commitsDetails": [{"commitHash": "c2b1fe73129e9c23d93e5393ce8007995c1630dc", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["de97030ff54ee0bd306cbc58bd8093645cc8a5dc"], "nameRev": "c2b1fe73129e9c23d93e5393ce8007995c1630dc tags/1.12.2~39", "commitMessage": "Report the correct error position in some malformed constructs\n\nMerges #1253\n\nFixes #1251\n\nAuthored bt @csaboka, but I rewrote the test file to fix the diff up.\n", "commitDateTime": "2020-01-26 16:30:41", "authoredDateTime": "2020-01-26 16:30:41", "commitGitStats": [{"filePath": "src/main/java/org/jsoup/parser/CharacterReader.java", "insertions": 1, "deletions": 1, "lines": 2}, {"filePath": "src/main/java/org/jsoup/parser/TokeniserState.java", "insertions": 5, "deletions": 5, "lines": 10}, {"filePath": "src/test/java/org/jsoup/parser/ParserIT.java", "insertions": 23, "deletions": 0, "lines": 23}, {"filePath": "src/test/java/org/jsoup/parser/TokeniserStateTest.java", "insertions": 43, "deletions": 0, "lines": 43}], "commitSpoonAstDiffStats": [{"spoonFilePath": "CharacterReader.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.CharacterReader", "TOT": 1, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 1}]}, {"spoonFilePath": "TokeniserState.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.TokeniserState.10.read(org.jsoup.parser.Tokeniser,org.jsoup.parser.CharacterReader)", "TOT": 1, "UPD": 0, "INS": 0, "MOV": 1, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.TokeniserState.34.read(org.jsoup.parser.Tokeniser,org.jsoup.parser.CharacterReader)", "TOT": 2, "UPD": 0, "INS": 0, "MOV": 2, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.TokeniserState.41.read(org.jsoup.parser.Tokeniser,org.jsoup.parser.CharacterReader)", "TOT": 1, "UPD": 0, "INS": 0, "MOV": 1, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.TokeniserState.42.read(org.jsoup.parser.Tokeniser,org.jsoup.parser.CharacterReader)", "TOT": 1, "UPD": 0, "INS": 0, "MOV": 1, "DEL": 0}]}, {"spoonFilePath": "ParserIT.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.ParserIT", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "TokeniserStateTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.TokeniserStateTest.testUnconsumeAtBufferBoundary()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.TokeniserStateTest.testOpeningAngleBracketInsteadOfAttribute()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.TokeniserStateTest.testMalformedSelfClosingTag()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.TokeniserStateTest.testOpeningAngleBracketInTagName()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": [], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 1, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 0, "gitStatsSummary": {"insertions": 0, "deletions": 0, "lines": 0, "gitFilesChange": 0}, "spoonStatsSummary": {"TOT": 0, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 0, "spoonFilesChanged": 0, "spoonMethodsChanged": 0}, "statsSkippedReason": "", "changesInPackagesGIT": [], "changesInPackagesSPOON": []}, {"title": "`isBinary` detect proper HTML page as binary", "body": "Failing test case:\r\n```java\r\n    @Test\r\n    public void testBinaryFail() throws IOException {\r\n        Jsoup.parse(new URL(\"https://www.searspartsdirect.com/repair-parts-for-kenmore-106w14f/0582/0160000.html\"), 50000);\r\n    }\r\n```\r\n\r\nDetecting a binary file is complicated :/\r\n\r\n\r\nAt one point in my own project I was using something like:\r\n\r\n```java\r\npublic abstract class NonPrintableDetector {\r\n\r\n    private final static Pattern NON_PRINTABLE_PATTERN = Pattern.compile(\"\\\\p{C}\", Pattern.UNICODE_CHARACTER_CLASS);\r\n\r\n    /**\r\n     * @param value Sequence of chars to test against non printable characters\r\n     * @param maxRatio Maximum accepted ratio of non printable characters (between 0.0 and 1.0)\r\n     * @return True if ratio of non printable characters is above maxRatio\r\n     */\r\n    public static boolean isAboveThreshold(final CharSequence value, final float maxRatio) {\r\n        if (value == null || value.length() == 0) {\r\n            return false;\r\n        }\r\n\r\n        // check for high ratio of non printable characters\r\n        final Matcher matcher = NON_PRINTABLE_PATTERN.matcher(value);\r\n\r\n        int nonPrintableChars = 0;\r\n        while (matcher.find()) {\r\n            nonPrintableChars++;\r\n        }\r\n\r\n        return nonPrintableChars > Math.ceil(value.length() * maxRatio);\r\n    }\r\n\r\n}\r\n```\r\n\r\nBut even so I had PDF accepted because it had a bunch of textual metadata near the beginning of the file...\r\n\r\nI finally resorted to use the Tika library because of its knowledge of magic bytes, etc.\r\n\r\nIMO JSoup should not even attempt to do this or at least give a way to be disabled because I for-see a lot of false positive or negative.\r\n", "url": "https://github.com/jhy/jsoup/issues/1250", "user": "panthony", "labels": ["bug"], "created": "2019-08-28 07:29:00", "closed": "2020-02-02 18:11:51", "commits": {"5359490c56501b231d0d1d19e7eed4ffb37425d7": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 158.00027777777777, "commitsDetails": [{"commitHash": "5359490c56501b231d0d1d19e7eed4ffb37425d7", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["128008e29c33cf6b3b20fde8f2bbd13ead98509c"], "nameRev": "5359490c56501b231d0d1d19e7eed4ffb37425d7 tags/1.12.2~20", "commitMessage": "Removed binary input detection attempt\n\nFixes #1250\n", "commitDateTime": "2020-02-02 10:11:46", "authoredDateTime": "2020-02-02 10:11:46", "commitGitStats": [{"filePath": "CHANGES", "insertions": 3, "deletions": 0, "lines": 3}, {"filePath": "src/main/java/org/jsoup/parser/CharacterReader.java", "insertions": 0, "deletions": 21, "lines": 21}, {"filePath": "src/test/java/org/jsoup/integration/ConnectTest.java", "insertions": 0, "deletions": 33, "lines": 33}, {"filePath": "src/test/java/org/jsoup/integration/ParseTest.java", "insertions": 0, "deletions": 14, "lines": 14}], "commitSpoonAstDiffStats": [{"spoonFilePath": "CharacterReader.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.CharacterReader", "TOT": 2, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 2}, {"spoonMethodName": "org.jsoup.parser.CharacterReader.isBinary()", "TOT": 1, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 1}]}, {"spoonFilePath": "ConnectTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.integration.ConnectTest.testBinaryThrowsExceptionWhenTypeIgnored()", "TOT": 1, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.integration.ConnectTest.testBinaryResultThrows()", "TOT": 1, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 1}]}, {"spoonFilePath": "ParseTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.integration.ParseTest.testBinaryThrowsException()", "TOT": 1, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 1}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["5359490c56501b231d0d1d19e7eed4ffb37425d7"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 0, "deletions": 21, "lines": 21, "gitFilesChange": 1}, "spoonStatsSummary": {"TOT": 3, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 3, "spoonFilesChanged": 1, "spoonMethodsChanged": 2}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/parser"], "changesInPackagesSPOON": ["org.jsoup.parser.CharacterReader.isBinary()", "org.jsoup.parser.CharacterReader"]}, {"title": "<input type=\"image\"> is not special cased in formData method", "body": "The following code:\r\n\r\n```java\r\nimport org.jsoup.Jsoup;\r\nimport org.jsoup.nodes.FormElement;\r\n\r\nclass Scratch {\r\n    public static void main(String[] args) {\r\n        System.out.println(((FormElement) Jsoup.parse(\"<form id=f><input type=image name=x></form>\").getElementById(\"f\")).formData());\r\n    }\r\n}\r\n```\r\n\r\nReturns the following output:\r\n\r\n```\r\n[x=]\r\n```\r\n\r\nWhen either `[]` or `[x.x=0, x.y=0]` is expected (not sure which, but `[x=]` is definitely wrong).", "url": "https://github.com/jhy/jsoup/issues/1231", "user": "xfix", "labels": ["bug"], "created": "2019-06-11 10:52:42", "closed": "2019-07-04 22:54:27", "commits": {"a9439f0c503ac8e0f009a0ec39f8bff1a6271d51": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 23.00027777777778, "commitsDetails": [{"commitHash": "a9439f0c503ac8e0f009a0ec39f8bff1a6271d51", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["e9e613706443fd1cd3458d1e5116c0498afd8b09"], "nameRev": "a9439f0c503ac8e0f009a0ec39f8bff1a6271d51 tags/1.12.2~47", "commitMessage": "Don't submit button values\n\nFixes #1231\n", "commitDateTime": "2019-07-04 15:54:14", "authoredDateTime": "2019-07-04 15:54:14", "commitGitStats": [{"filePath": "CHANGES", "insertions": 3, "deletions": 0, "lines": 3}, {"filePath": "src/main/java/org/jsoup/nodes/FormElement.java", "insertions": 3, "deletions": 1, "lines": 4}, {"filePath": "src/test/java/org/jsoup/nodes/FormElementTest.java", "insertions": 2, "deletions": 0, "lines": 2}], "commitSpoonAstDiffStats": [{"spoonFilePath": "FormElement.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.FormElement.formData()", "TOT": 2, "UPD": 1, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "FormElementTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.FormElementTest.createsFormData()", "TOT": 4, "UPD": 2, "INS": 1, "MOV": 1, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["a9439f0c503ac8e0f009a0ec39f8bff1a6271d51"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 3, "deletions": 1, "lines": 4, "gitFilesChange": 1}, "spoonStatsSummary": {"TOT": 2, "UPD": 1, "INS": 1, "MOV": 0, "DEL": 0, "spoonFilesChanged": 1, "spoonMethodsChanged": 1}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/nodes"], "changesInPackagesSPOON": ["org.jsoup.nodes.FormElement.formData()"]}, {"title": "Incorrect Farsi parsing to plain text", "body": "Both are expected to produce the same output, although the first one incorrectly strips the 'half-space' `(\\u200C)`:\r\n\r\n    System.out.println(\"Incorrect: \" + Jsoup.parse(\"\u0646\u06cc\u0645\u0647\\u200C\u0634\u0628\").text());\r\n    System.out.println(\"Correct: \" + \"\u0646\u06cc\u0645\u0647\\u200C\u0634\u0628\");\r\n\r\nOutput:\r\n\r\n![Sample Output](https://i.imgur.com/7hfkrIe.png)\r\n\r\nIn Farsi this is quite a considerable change of meaning.", "url": "https://github.com/jhy/jsoup/issues/1227", "user": "MarcFletcher", "labels": ["bug"], "created": "2019-06-03 15:33:19", "closed": "2020-02-02 18:22:21", "commits": {"2d431412fc5a2fea8d7d4490c487e2012474011e": {"commitGHEventType": "referenced", "commitUser": "jhy"}}, "ttf": 244.00027777777777, "commitsDetails": [{"commitHash": "2d431412fc5a2fea8d7d4490c487e2012474011e", "commitGHEventType": "referenced", "commitUser": "jhy", "commitParents": ["5359490c56501b231d0d1d19e7eed4ffb37425d7"], "nameRev": "2d431412fc5a2fea8d7d4490c487e2012474011e tags/1.12.2~19", "commitMessage": "Test to verify zwnj fix for Farsi\n\n#1227\n", "commitDateTime": "2020-02-02 10:20:56", "authoredDateTime": "2020-02-02 10:20:56", "commitGitStats": [{"filePath": "src/test/java/org/jsoup/parser/HtmlParserTest.java", "insertions": 7, "deletions": 0, "lines": 7}], "commitSpoonAstDiffStats": [{"spoonFilePath": "HtmlParserTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.HtmlParserTest.testFarsi()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["2d431412fc5a2fea8d7d4490c487e2012474011e"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 0, "gitStatsSummary": {"insertions": 0, "deletions": 0, "lines": 0, "gitFilesChange": 0}, "spoonStatsSummary": {"TOT": 0, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 0, "spoonFilesChanged": 0, "spoonMethodsChanged": 0}, "statsSkippedReason": "", "changesInPackagesGIT": [], "changesInPackagesSPOON": []}, {"title": "Duplicated attribute parsing problem ", "body": "In case there is duplicated tag attribute Jsoup parses the last one, but Chrome browser takes the first one.\r\n\r\n", "url": "https://github.com/jhy/jsoup/issues/1219", "user": "sinichkin", "labels": ["bug"], "created": "2019-05-22 13:13:06", "closed": "2019-07-04 22:26:26", "commits": {"0fc3d6728ae270fb38f9778ad7fa2663060b50c7": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 43.000277777777775, "commitsDetails": [{"commitHash": "0fc3d6728ae270fb38f9778ad7fa2663060b50c7", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["27a445b029b02bced263a0686f40a4f373827953"], "nameRev": "0fc3d6728ae270fb38f9778ad7fa2663060b50c7 tags/1.12.2~49", "commitMessage": "On duplicate attributes, retain first not last instance\n\nFixes #1219\n", "commitDateTime": "2019-07-04 15:26:11", "authoredDateTime": "2019-07-04 15:26:11", "commitGitStats": [{"filePath": "CHANGES", "insertions": 4, "deletions": 0, "lines": 4}, {"filePath": "src/main/java/org/jsoup/nodes/Attributes.java", "insertions": 39, "deletions": 3, "lines": 42}, {"filePath": "src/main/java/org/jsoup/parser/HtmlTreeBuilder.java", "insertions": 10, "deletions": 2, "lines": 12}, {"filePath": "src/main/java/org/jsoup/parser/ParseSettings.java", "insertions": 14, "deletions": 0, "lines": 14}, {"filePath": "src/main/java/org/jsoup/parser/Token.java", "insertions": 2, "deletions": 2, "lines": 4}, {"filePath": "src/main/java/org/jsoup/parser/TreeBuilder.java", "insertions": 11, "deletions": 0, "lines": 11}, {"filePath": "src/main/java/org/jsoup/parser/XmlTreeBuilder.java", "insertions": 2, "deletions": 0, "lines": 2}, {"filePath": "src/test/java/org/jsoup/parser/HtmlParserTest.java", "insertions": 19, "deletions": 0, "lines": 19}, {"filePath": "src/test/java/org/jsoup/parser/XmlTreeBuilderTest.java", "insertions": 10, "deletions": 0, "lines": 10}], "commitSpoonAstDiffStats": [{"spoonFilePath": "Attributes.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.Attributes.add(java.lang.String,java.lang.String)", "TOT": 3, "UPD": 2, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Attributes.isEmpty()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Attributes.deduplicate(org.jsoup.parser.ParseSettings)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "HtmlTreeBuilder.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilder.insert(org.jsoup.parser.Token$StartTag)", "TOT": 2, "UPD": 0, "INS": 2, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "ParseSettings.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.ParseSettings.preserveTagCase()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.ParseSettings.preserveAttributeCase()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "Token.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.Token.Tag.newAttribute()", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "TreeBuilder.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.TreeBuilder.error(java.lang.String)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "XmlTreeBuilder.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.XmlTreeBuilder.insert(org.jsoup.parser.Token$StartTag)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "HtmlParserTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.HtmlParserTest.dropsDuplicateAttributes()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.HtmlParserTest.retainsAttributesOfDifferentCaseIfSensitive()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "XmlTreeBuilderTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.XmlTreeBuilderTest.dropsDuplicateAttributes()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["0fc3d6728ae270fb38f9778ad7fa2663060b50c7"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 78, "deletions": 7, "lines": 85, "gitFilesChange": 6}, "spoonStatsSummary": {"TOT": 12, "UPD": 3, "INS": 9, "MOV": 0, "DEL": 0, "spoonFilesChanged": 6, "spoonMethodsChanged": 9}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/parser", "src/main/java/org/jsoup/nodes"], "changesInPackagesSPOON": ["org.jsoup.parser.Token.Tag.newAttribute()", "org.jsoup.parser.HtmlTreeBuilder.insert(org.jsoup.parser.Token$StartTag)", "org.jsoup.nodes.Attributes.isEmpty()", "org.jsoup.parser.ParseSettings.preserveTagCase()", "org.jsoup.parser.ParseSettings.preserveAttributeCase()", "org.jsoup.parser.TreeBuilder.error(java.lang.String)", "org.jsoup.parser.XmlTreeBuilder.insert(org.jsoup.parser.Token$StartTag)", "org.jsoup.nodes.Attributes.deduplicate(org.jsoup.parser.ParseSettings)", "org.jsoup.nodes.Attributes.add(java.lang.String,java.lang.String)"]}, {"title": "Websites with large amounts of data fail to parse.", "body": "Currently using Jsoup on some large websites, and it throws the Mark Invalid Exception which means the bufref is negative?\r\n\r\nI tried using both Jsoup.connect(url).get()\r\nand Jsoup.connect(url).execute().parse()\r\nBoth cause the same exception.\r\n```Exception in thread \"main\" java.io.IOException: Mark invalid\r\n\tat org.jsoup.parser.CharacterReader.rewindToMark(CharacterReader.java:132)\r\n\tat org.jsoup.parser.Tokeniser.consumeCharacterReference(Tokeniser.java:182)\r\n\tat org.jsoup.parser.TokeniserState.readCharRef(TokeniserState.java:1698)\r\n\tat org.jsoup.parser.TokeniserState.access$100(TokeniserState.java:8)\r\n\tat org.jsoup.parser.TokeniserState$2.read(TokeniserState.java:36)\r\n\tat org.jsoup.parser.Tokeniser.read(Tokeniser.java:57)\r\n\tat org.jsoup.parser.TreeBuilder.runParser(TreeBuilder.java:55)\r\n\tat org.jsoup.parser.TreeBuilder.parse(TreeBuilder.java:47)\r\n\tat org.jsoup.parser.Parser.parseInput(Parser.java:35)\r\n\tat org.jsoup.helper.DataUtil.parseInputStream(DataUtil.java:169)\r\n\tat org.jsoup.helper.HttpConnection$Response.parse(HttpConnection.java:835)\r\n\tat org.jsoup.helper.HttpConnection.get(HttpConnection.java:285)```\r\n\r\nif anybody would like to reproduce, here are some urls which it fails to parse:\r\nhttps://www.spec.org/cpu2006/results/res2014q4/\r\nhttps://www.spec.org/cpu2006/results/res2012q3/\r\nhttps://www.spec.org/cpu2006/results/res2014q1/\r\nhttps://www.spec.org/cpu2006/results/res2014q3/\r\nhttps://www.spec.org/cpu2006/results/res2011q2/\r\nhttps://www.spec.org/cpu2006/results/res2010q3/\r\nhttps://www.spec.org/cpu2006/results/res2017q2/\r\nhttps://www.spec.org/cpu2006/results/res2016q3/\r\nhttps://www.spec.org/cpu2006/results/res2015q4/\r\nhttps://www.spec.org/cpu2006/results/res2007q4/\r\nhttps://www.spec.org/cpu2006/results/res2009q4/\r\nhttps://www.spec.org/cpu2006/results/res2012q2/\r\nhttps://www.spec.org/cpu2006/results/res2014q2/\r\nhttps://www.spec.org/cpu2006/results/res2012q4/\r\nhttps://www.spec.org/cpu2006/results/res2011q1/\r\n\r\n\r\nThanks", "url": "https://github.com/jhy/jsoup/issues/1218", "user": "Derek-Baum", "labels": ["bug"], "created": "2019-05-21 19:43:01", "closed": "2020-01-21 02:11:33", "commits": {"a0b87bf10a9a520b49748c619c868caed8d7a109": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 244.00027777777777, "commitsDetails": [{"commitHash": "a0b87bf10a9a520b49748c619c868caed8d7a109", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["8d1d503913a68e549b5c4a94717c62cf3f64507a"], "nameRev": "a0b87bf10a9a520b49748c619c868caed8d7a109 tags/1.12.2~43", "commitMessage": "Ensure enough data is buffered to survive a Mark reset\n\nFixes #1218\n", "commitDateTime": "2020-01-20 18:10:05", "authoredDateTime": "2020-01-20 18:10:05", "commitGitStats": [{"filePath": "CHANGES", "insertions": 6, "deletions": 1, "lines": 7}, {"filePath": "src/main/java/org/jsoup/helper/Validate.java", "insertions": 8, "deletions": 0, "lines": 8}, {"filePath": "src/main/java/org/jsoup/parser/CharacterReader.java", "insertions": 24, "deletions": 4, "lines": 28}, {"filePath": "src/main/java/org/jsoup/parser/Tokeniser.java", "insertions": 14, "deletions": 2, "lines": 16}, {"filePath": "src/main/java/org/jsoup/parser/TokeniserState.java", "insertions": 5, "deletions": 0, "lines": 5}, {"filePath": "src/test/java/org/jsoup/integration/ConnectTest.java", "insertions": 17, "deletions": 0, "lines": 17}, {"filePath": "src/test/java/org/jsoup/parser/CharacterReaderTest.java", "insertions": 24, "deletions": 1, "lines": 25}, {"filePath": "src/test/resources/htmltests/escapes-across-buffer.html", "insertions": 5, "deletions": 0, "lines": 5}], "commitSpoonAstDiffStats": [{"spoonFilePath": "Validate.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.helper.Validate.wtf(java.lang.String)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "CharacterReader.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.CharacterReader.bufferUp()", "TOT": 10, "UPD": 1, "INS": 5, "MOV": 3, "DEL": 1}, {"spoonMethodName": "org.jsoup.parser.CharacterReader", "TOT": 2, "UPD": 0, "INS": 2, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.CharacterReader.unmark()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.CharacterReader.mark()", "TOT": 2, "UPD": 0, "INS": 1, "MOV": 1, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.CharacterReader.rewindToMark()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "Tokeniser.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.Tokeniser.read()", "TOT": 4, "UPD": 0, "INS": 4, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.Tokeniser.consumeCharacterReference(java.lang.Character,boolean)", "TOT": 2, "UPD": 0, "INS": 2, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "TokeniserState.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.TokeniserState.17.read(org.jsoup.parser.Tokeniser,org.jsoup.parser.CharacterReader)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "ConnectTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.integration.ConnectTest.handlesUnknownEscapesAcrossBuffer()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "CharacterReaderTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.CharacterReaderTest.unconsume()", "TOT": 6, "UPD": 1, "INS": 5, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.CharacterReaderTest.mark()", "TOT": 4, "UPD": 0, "INS": 4, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.CharacterReaderTest.notEmptyAtBufferSplitPoint()", "TOT": 12, "UPD": 0, "INS": 12, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["a0b87bf10a9a520b49748c619c868caed8d7a109"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 51, "deletions": 6, "lines": 57, "gitFilesChange": 4}, "spoonStatsSummary": {"TOT": 24, "UPD": 1, "INS": 18, "MOV": 4, "DEL": 1, "spoonFilesChanged": 4, "spoonMethodsChanged": 9}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/helper", "src/main/java/org/jsoup/parser"], "changesInPackagesSPOON": ["org.jsoup.parser.Tokeniser.read()", "org.jsoup.parser.Tokeniser.consumeCharacterReference(java.lang.Character,boolean)", "org.jsoup.parser.CharacterReader.mark()", "org.jsoup.helper.Validate.wtf(java.lang.String)", "org.jsoup.parser.CharacterReader.bufferUp()", "org.jsoup.parser.CharacterReader.unmark()", "org.jsoup.parser.TokeniserState.17.read(org.jsoup.parser.Tokeniser,org.jsoup.parser.CharacterReader)", "org.jsoup.parser.CharacterReader.rewindToMark()", "org.jsoup.parser.CharacterReader"]}, {"title": "W3CDom.fromJsoup is loosing the original DocType", "body": "For my own case I did the following within W3CDom:\r\n\r\n```java\r\n            Document out;\r\n            if (in.childNodeSize() > 1 && in.childNode(0) instanceof org.jsoup.nodes.DocumentType) {\r\n                final org.jsoup.nodes.DocumentType docType = (org.jsoup.nodes.DocumentType) in.childNode(0);\r\n\r\n                final DOMImplementation impl = builder.getDOMImplementation();\r\n\r\n                out = impl.createDocument(\r\n                    null,\r\n                    null,\r\n                    impl.createDocumentType(\r\n                        docType.attr(\"name\"),\r\n                        docType.attr(\"publicId\"),\r\n                        docType.attr(\"systemId\")\r\n                    ));\r\n\r\n            } else {\r\n                out = builder.newDocument();\r\n            }\r\n```\r\n\r\n\r\n", "url": "https://github.com/jhy/jsoup/issues/1183", "user": "panthony", "labels": ["bug"], "created": "2019-02-15 15:16:01", "closed": "2020-02-09 00:54:39", "commits": {"e02085409f0bdd7e71441fc62448192720305444": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 358.0002777777778, "commitsDetails": [{"commitHash": "e02085409f0bdd7e71441fc62448192720305444", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["fb50d9635874185fc050735057b8a7363cd53f3f"], "nameRev": "e02085409f0bdd7e71441fc62448192720305444 tags/1.12.2~6", "commitMessage": "In W3CDom, handle doctypes, and don't force XML output\n\nFixes #1183\nUpdates #1098\n", "commitDateTime": "2020-02-08 16:54:29", "authoredDateTime": "2020-02-08 16:54:29", "commitGitStats": [{"filePath": "CHANGES", "insertions": 10, "deletions": 4, "lines": 14}, {"filePath": "src/main/java/org/jsoup/helper/W3CDom.java", "insertions": 119, "deletions": 38, "lines": 157}, {"filePath": "src/main/java/org/jsoup/nodes/Document.java", "insertions": 15, "deletions": 0, "lines": 15}, {"filePath": "src/main/java/org/jsoup/nodes/DocumentType.java", "insertions": 34, "deletions": 9, "lines": 43}, {"filePath": "src/test/java/org/jsoup/helper/W3CDomTest.java", "insertions": 64, "deletions": 10, "lines": 74}, {"filePath": "src/test/java/org/jsoup/nodes/DocumentTest.java", "insertions": 11, "deletions": 3, "lines": 14}, {"filePath": "src/test/java/org/jsoup/nodes/DocumentTypeTest.java", "insertions": 4, "deletions": 1, "lines": 5}], "commitSpoonAstDiffStats": [{"spoonFilePath": "W3CDom.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.helper.W3CDom.asString(org.w3c.dom.Document)", "TOT": 7, "UPD": 2, "INS": 1, "MOV": 3, "DEL": 1}, {"spoonMethodName": "org.jsoup.helper.W3CDom.asString(org.w3c.dom.Document,java.util.Properties)", "TOT": 11, "UPD": 3, "INS": 0, "MOV": 6, "DEL": 2}, {"spoonMethodName": "org.jsoup.helper.W3CDom.fromJsoup(org.jsoup.nodes.Document)", "TOT": 14, "UPD": 0, "INS": 1, "MOV": 12, "DEL": 1}, {"spoonMethodName": "org.jsoup.helper.W3CDom", "TOT": 2, "UPD": 0, "INS": 1, "MOV": 1, "DEL": 0}, {"spoonMethodName": "org.jsoup.helper.W3CDom.convert(org.jsoup.nodes.Document)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.helper.W3CDom.propertiesFromMap(java.util.Map)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.helper.W3CDom.OutputHtml()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.helper.W3CDom.OutputXml()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.helper.W3CDom.methodMap(java.lang.String)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.helper.W3CDom.asString(org.w3c.dom.Document,java.util.Map)", "TOT": 3, "UPD": 0, "INS": 3, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "Document.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.Document.documentType()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "DocumentType.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.DocumentType", "TOT": 10, "UPD": 0, "INS": 3, "MOV": 4, "DEL": 3}, {"spoonMethodName": "org.jsoup.nodes.DocumentType.updatePubSyskey()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.DocumentType.name()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.DocumentType.publicId()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.DocumentType.systemId()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "W3CDomTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.helper.W3CDomTest.convertsGoogle()", "TOT": 9, "UPD": 1, "INS": 6, "MOV": 1, "DEL": 1}, {"spoonMethodName": "org.jsoup.helper.W3CDomTest.parseXml(java.lang.String,boolean)", "TOT": 3, "UPD": 2, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.helper.W3CDomTest.simpleConversion()", "TOT": 10, "UPD": 2, "INS": 4, "MOV": 0, "DEL": 4}, {"spoonMethodName": "org.jsoup.helper.W3CDomTest.testRoundTripDoctype()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.helper.W3CDomTest.output(java.lang.String,boolean)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "DocumentTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.DocumentTest.DocumentsWithSameContentAreVerifialbe()", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.DocumentTest.testLocation()", "TOT": 4, "UPD": 0, "INS": 2, "MOV": 0, "DEL": 2}, {"spoonMethodName": "org.jsoup.nodes.DocumentTest.testDocumentTypeGet()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "DocumentTypeTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.DocumentTypeTest.outerHtmlGeneration()", "TOT": 4, "UPD": 1, "INS": 3, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": [], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 1, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 0, "gitStatsSummary": {"insertions": 0, "deletions": 0, "lines": 0, "gitFilesChange": 0}, "spoonStatsSummary": {"TOT": 0, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 0, "spoonFilesChanged": 0, "spoonMethodsChanged": 0}, "statsSkippedReason": "", "changesInPackagesGIT": [], "changesInPackagesSPOON": []}, {"title": "LeafNode.value is not cloned in LeafNode.clone()", "body": "Affected version: At least `1.11.3`, but most likely `1.11.1` and above\r\n\r\nConsider the following example:\r\n```java\r\n/* 1 */ TextNode x = new TextNode(\"zzz\");\r\n/* 2 */ x.attributes(); // this calls LeafNode.ensureAttributes() and creates attributes map\r\n/* 3 */ TextNode y = (TextNode) x.clone();\r\n/* 4 */ y.text(\"xxx\"); // now x.text() is also \"xxx\"\r\n```\r\n- Here, on step `1` we create a new `TextNode` with a `value` of `zzz`.\r\n- On step `2` `ensureAttributes()` is called indirectly, which replaces `String` `value` with `Attributes` containing `#text = zzz` entry.\r\n- On step `3` we clone the node.\r\n- If we inspect properties after step `3` we'll notice that `x.attributes()` and `y.attributes()` are returning the same instance\r\n- On step `4` we update content of `y`, which is \"magically\" mirrored to `x` as well.\r\n\r\nIn `1.10.3` attributes were explicitly cloned in `Node.doClone()` method, but starting with `1.11.1` `attributes` were moved to `TextNode` and then to `LeafNode` without any clone implementation.", "url": "https://github.com/jhy/jsoup/issues/1176", "user": "fluorumlabs", "labels": ["bug"], "created": "2019-01-28 14:52:53", "closed": "2020-02-06 21:23:24", "commits": {"fb50d9635874185fc050735057b8a7363cd53f3f": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 374.0002777777778, "commitsDetails": [{"commitHash": "fb50d9635874185fc050735057b8a7363cd53f3f", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["3bd77f862826a9b3b1bd4c33a66af51cb467eea8"], "nameRev": "fb50d9635874185fc050735057b8a7363cd53f3f tags/1.12.2~7", "commitMessage": "Deepclone attributes in LeafNodes if set\n\nFixes #1176\n", "commitDateTime": "2020-02-06 13:23:08", "authoredDateTime": "2020-02-06 13:23:08", "commitGitStats": [{"filePath": "CHANGES", "insertions": 4, "deletions": 0, "lines": 4}, {"filePath": "src/main/java/org/jsoup/nodes/CDataNode.java", "insertions": 5, "deletions": 0, "lines": 5}, {"filePath": "src/main/java/org/jsoup/nodes/Comment.java", "insertions": 5, "deletions": 0, "lines": 5}, {"filePath": "src/main/java/org/jsoup/nodes/DataNode.java", "insertions": 5, "deletions": 0, "lines": 5}, {"filePath": "src/main/java/org/jsoup/nodes/FormElement.java", "insertions": 5, "deletions": 0, "lines": 5}, {"filePath": "src/main/java/org/jsoup/nodes/LeafNode.java", "insertions": 11, "deletions": 0, "lines": 11}, {"filePath": "src/main/java/org/jsoup/nodes/TextNode.java", "insertions": 5, "deletions": 0, "lines": 5}, {"filePath": "src/main/java/org/jsoup/nodes/XmlDeclaration.java", "insertions": 5, "deletions": 0, "lines": 5}, {"filePath": "src/test/java/org/jsoup/nodes/TextNodeTest.java", "insertions": 30, "deletions": 0, "lines": 30}], "commitSpoonAstDiffStats": [{"spoonFilePath": "CDataNode.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.CDataNode.clone()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "Comment.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.Comment.clone()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "DataNode.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.DataNode.clone()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "FormElement.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.FormElement.clone()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "LeafNode.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.LeafNode.doClone(org.jsoup.nodes.Node)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "TextNode.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.TextNode.clone()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "XmlDeclaration.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.XmlDeclaration.clone()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "TextNodeTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.TextNodeTest.testClone()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.TextNodeTest.testCloneAfterAttributesHit()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["fb50d9635874185fc050735057b8a7363cd53f3f"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 41, "deletions": 0, "lines": 41, "gitFilesChange": 7}, "spoonStatsSummary": {"TOT": 7, "UPD": 0, "INS": 7, "MOV": 0, "DEL": 0, "spoonFilesChanged": 7, "spoonMethodsChanged": 7}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/nodes"], "changesInPackagesSPOON": ["org.jsoup.nodes.CDataNode.clone()", "org.jsoup.nodes.XmlDeclaration.clone()", "org.jsoup.nodes.Comment.clone()", "org.jsoup.nodes.FormElement.clone()", "org.jsoup.nodes.LeafNode.doClone(org.jsoup.nodes.Node)", "org.jsoup.nodes.TextNode.clone()", "org.jsoup.nodes.DataNode.clone()"]}, {"title": "wrong parsing with ParseSettings.preserveCase", "body": "jsoup version:1.11.3\r\nwhen using case sensitive settings,  parse wrong \r\n```java \r\npublic class TestJsoupParser {\r\n\r\n    public static void main(String[] args) {\r\n        Parser parser = Parser.htmlParser();\r\n        parser.settings(ParseSettings.preserveCase); // this line\r\n        String html = \"<div class=\\\"bdsharebuttonbox\\\">\"\r\n                + \"<A class=bds_more href=\\\"http://share.baidu.com/code#\\\" data-cmd=\\\"more\\\">\u5206\u4eab\u5230\uff1a</A>\"\r\n                + \"<A title=\u5206\u4eab\u5230QQ\u7a7a\u95f4 class=bds_qzone href=\\\"http://share.baidu.com/code#\\\" data-cmd=\\\"qzone\\\">\"\r\n                + \"</A><A title=\u5206\u4eab\u5230\u65b0\u6d6a\u5fae\u535a class=bds_tsina href=\\\"http://share.baidu.com/code#\\\" data-cmd=\\\"tsina\\\"></A>\"\r\n                + \"<A title=\u5206\u4eab\u5230\u817e\u8baf\u5fae\u535a class=bds_tqq href=\\\"http://share.baidu.com/code#\\\" data-cmd=\\\"tqq\\\"></A>\"\r\n                + \"<A title=\u5206\u4eab\u5230\u4eba\u4eba\u7f51 class=bds_renren href=\\\"http://share.baidu.com/code#\\\" data-cmd=\\\"renren\\\"></A>\"\r\n                + \"<A title=\u5206\u4eab\u5230\u5fae\u4fe1 class=bds_weixin href=\\\"http://share.baidu.com/code#\\\" data-cmd=\\\"weixin\\\"></A>\"\r\n                + \"</div>\\r\\n\";\r\n        Document doc = Jsoup.parse(html, \"\", parser);\r\n        System.out.println(doc.html());\r\n    }\r\n    \r\n\r\n}\r\n```\r\n\r\nthe result is:\r\n\r\n```\r\n<html>\r\n <head></head>\r\n <body>\r\n  <div class=\"bdsharebuttonbox\">\r\n   <A class=\"bds_more\" href=\"http://share.baidu.com/code#\" data-cmd=\"more\">\r\n    \u5206\u4eab\u5230\uff1a\r\n   </A>\r\n   <A class=\"bds_more\" href=\"http://share.baidu.com/code#\" data-cmd=\"more\">\r\n    <A title=\"\u5206\u4eab\u5230QQ\u7a7a\u95f4\" class=\"bds_qzone\" href=\"http://share.baidu.com/code#\" data-cmd=\"qzone\"></A>\r\n    <A title=\"\u5206\u4eab\u5230QQ\u7a7a\u95f4\" class=\"bds_qzone\" href=\"http://share.baidu.com/code#\" data-cmd=\"qzone\">\r\n     <A title=\"\u5206\u4eab\u5230\u65b0\u6d6a\u5fae\u535a\" class=\"bds_tsina\" href=\"http://share.baidu.com/code#\" data-cmd=\"tsina\"></A>\r\n     <A title=\"\u5206\u4eab\u5230\u65b0\u6d6a\u5fae\u535a\" class=\"bds_tsina\" href=\"http://share.baidu.com/code#\" data-cmd=\"tsina\">\r\n      <A title=\"\u5206\u4eab\u5230\u817e\u8baf\u5fae\u535a\" class=\"bds_tqq\" href=\"http://share.baidu.com/code#\" data-cmd=\"tqq\"></A>\r\n      <A title=\"\u5206\u4eab\u5230\u817e\u8baf\u5fae\u535a\" class=\"bds_tqq\" href=\"http://share.baidu.com/code#\" data-cmd=\"tqq\">\r\n       <A title=\"\u5206\u4eab\u5230\u4eba\u4eba\u7f51\" class=\"bds_renren\" href=\"http://share.baidu.com/code#\" data-cmd=\"renren\"></A>\r\n       <A title=\"\u5206\u4eab\u5230\u4eba\u4eba\u7f51\" class=\"bds_renren\" href=\"http://share.baidu.com/code#\" data-cmd=\"renren\">\r\n        <A title=\"\u5206\u4eab\u5230\u5fae\u4fe1\" class=\"bds_weixin\" href=\"http://share.baidu.com/code#\" data-cmd=\"weixin\"></A>\r\n       </A>\r\n      </A>\r\n     </A>\r\n    </A>\r\n   </A>\r\n  </div>\r\n  <A class=\"bds_more\" href=\"http://share.baidu.com/code#\" data-cmd=\"more\">\r\n   <A title=\"\u5206\u4eab\u5230QQ\u7a7a\u95f4\" class=\"bds_qzone\" href=\"http://share.baidu.com/code#\" data-cmd=\"qzone\">\r\n    <A title=\"\u5206\u4eab\u5230\u65b0\u6d6a\u5fae\u535a\" class=\"bds_tsina\" href=\"http://share.baidu.com/code#\" data-cmd=\"tsina\">\r\n     <A title=\"\u5206\u4eab\u5230\u817e\u8baf\u5fae\u535a\" class=\"bds_tqq\" href=\"http://share.baidu.com/code#\" data-cmd=\"tqq\">\r\n      <A title=\"\u5206\u4eab\u5230\u4eba\u4eba\u7f51\" class=\"bds_renren\" href=\"http://share.baidu.com/code#\" data-cmd=\"renren\">\r\n       <A title=\"\u5206\u4eab\u5230\u5fae\u4fe1\" class=\"bds_weixin\" href=\"http://share.baidu.com/code#\" data-cmd=\"weixin\"> \r\n       </A>\r\n      </A>\r\n     </A>\r\n    </A>\r\n   </A>\r\n  </A>\r\n </body>\r\n</html>\r\n```\r\n\r\nhowever, when not use preserveCase , result is right\r\n```\r\n<html>\r\n <head></head>\r\n <body>\r\n  <div class=\"bdsharebuttonbox\">\r\n   <a class=\"bds_more\" href=\"http://share.baidu.com/code#\" data-cmd=\"more\">\u5206\u4eab\u5230\uff1a</a>\r\n   <a title=\"\u5206\u4eab\u5230QQ\u7a7a\u95f4\" class=\"bds_qzone\" href=\"http://share.baidu.com/code#\" data-cmd=\"qzone\"></a>\r\n   <a title=\"\u5206\u4eab\u5230\u65b0\u6d6a\u5fae\u535a\" class=\"bds_tsina\" href=\"http://share.baidu.com/code#\" data-cmd=\"tsina\"></a>\r\n   <a title=\"\u5206\u4eab\u5230\u817e\u8baf\u5fae\u535a\" class=\"bds_tqq\" href=\"http://share.baidu.com/code#\" data-cmd=\"tqq\"></a>\r\n   <a title=\"\u5206\u4eab\u5230\u4eba\u4eba\u7f51\" class=\"bds_renren\" href=\"http://share.baidu.com/code#\" data-cmd=\"renren\"></a>\r\n   <a title=\"\u5206\u4eab\u5230\u5fae\u4fe1\" class=\"bds_weixin\" href=\"http://share.baidu.com/code#\" data-cmd=\"weixin\"></a>\r\n  </div> \r\n </body>\r\n</html>\r\n```", "url": "https://github.com/jhy/jsoup/issues/1149", "user": "anexplore", "labels": ["bug", "fixed"], "created": "2018-11-23 09:59:52", "closed": "2018-12-23 03:57:01", "commits": {"7ff7c43e9fbf4bbaf2b4517b3d4f8a429d87d3bb": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 29.00027777777778, "commitsDetails": [{"commitHash": "7ff7c43e9fbf4bbaf2b4517b3d4f8a429d87d3bb", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["38c13b5ae97c294afb859c49ded903beb7b9b100"], "nameRev": "7ff7c43e9fbf4bbaf2b4517b3d4f8a429d87d3bb tags/jsoup-1.12.1~18^2~2", "commitMessage": "Use normalized element names for tree searching\n\nFixes #1149\n", "commitDateTime": "2018-12-22 19:56:49", "authoredDateTime": "2018-12-22 19:56:49", "commitGitStats": [{"filePath": "CHANGES", "insertions": 4, "deletions": 0, "lines": 4}, {"filePath": "src/main/java/org/jsoup/nodes/Element.java", "insertions": 12, "deletions": 2, "lines": 14}, {"filePath": "src/main/java/org/jsoup/parser/HtmlTreeBuilder.java", "insertions": 14, "deletions": 14, "lines": 28}, {"filePath": "src/main/java/org/jsoup/parser/HtmlTreeBuilderState.java", "insertions": 41, "deletions": 41, "lines": 82}, {"filePath": "src/main/java/org/jsoup/parser/ParseSettings.java", "insertions": 6, "deletions": 0, "lines": 6}, {"filePath": "src/main/java/org/jsoup/parser/Tag.java", "insertions": 11, "deletions": 0, "lines": 11}, {"filePath": "src/main/java/org/jsoup/parser/Token.java", "insertions": 3, "deletions": 1, "lines": 4}, {"filePath": "src/test/java/org/jsoup/parser/HtmlParserTest.java", "insertions": 8, "deletions": 0, "lines": 8}], "commitSpoonAstDiffStats": [{"spoonFilePath": "Element.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.Element.normalName()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "HtmlTreeBuilder.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilder.isSpecial(org.jsoup.nodes.Element)", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilder.resetInsertionMode()", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilder.inSpecificScope(java.lang.String[],java.lang.String[],java.lang.String[])", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilder.inSelectScope(java.lang.String)", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilder.getFromStack(java.lang.String)", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilder.popStackToClose(java.lang.String)", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilder.popStackToClose(java.lang.String[])", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilder.popStackToBefore(java.lang.String)", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilder.generateImpliedEndTags(java.lang.String)", "TOT": 2, "UPD": 2, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilder.isSameFormattingElement(org.jsoup.nodes.Element,org.jsoup.nodes.Element)", "TOT": 2, "UPD": 2, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilder.reconstructFormattingElements()", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilder.clearStackToContext(java.lang.String[])", "TOT": 2, "UPD": 2, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilder.getActiveFormattingElement(java.lang.String)", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "HtmlTreeBuilderState.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilderState.13.exitTableBody(org.jsoup.parser.Token,org.jsoup.parser.HtmlTreeBuilder)", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilderState.9.anythingElse(org.jsoup.parser.Token,org.jsoup.parser.HtmlTreeBuilder)", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilderState.7.anyOtherEndTag(org.jsoup.parser.Token,org.jsoup.parser.HtmlTreeBuilder)", "TOT": 5, "UPD": 2, "INS": 1, "MOV": 1, "DEL": 1}, {"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilderState.12.process(org.jsoup.parser.Token,org.jsoup.parser.HtmlTreeBuilder)", "TOT": 2, "UPD": 2, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilderState.16.process(org.jsoup.parser.Token,org.jsoup.parser.HtmlTreeBuilder)", "TOT": 8, "UPD": 8, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilderState.7.process(org.jsoup.parser.Token,org.jsoup.parser.HtmlTreeBuilder)", "TOT": 20, "UPD": 20, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilderState.11.process(org.jsoup.parser.Token,org.jsoup.parser.HtmlTreeBuilder)", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilderState.15.process(org.jsoup.parser.Token,org.jsoup.parser.HtmlTreeBuilder)", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilderState.10.process(org.jsoup.parser.Token,org.jsoup.parser.HtmlTreeBuilder)", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilderState.19.process(org.jsoup.parser.Token,org.jsoup.parser.HtmlTreeBuilder)", "TOT": 3, "UPD": 3, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilderState.9.process(org.jsoup.parser.Token,org.jsoup.parser.HtmlTreeBuilder)", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "ParseSettings.java", "spoonMethods": []}, {"spoonFilePath": "Tag.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.Tag", "TOT": 2, "UPD": 0, "INS": 2, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.Tag.normalName()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "Token.java", "spoonMethods": []}, {"spoonFilePath": "HtmlParserTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.HtmlParserTest.preservedCaseLinksCantNest()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["7ff7c43e9fbf4bbaf2b4517b3d4f8a429d87d3bb"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 87, "deletions": 58, "lines": 145, "gitFilesChange": 6}, "spoonStatsSummary": {"TOT": 64, "UPD": 57, "INS": 5, "MOV": 1, "DEL": 1, "spoonFilesChanged": 4, "spoonMethodsChanged": 27}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/nodes", "src/main/java/org/jsoup/parser"], "changesInPackagesSPOON": ["org.jsoup.parser.HtmlTreeBuilderState.19.process(org.jsoup.parser.Token,org.jsoup.parser.HtmlTreeBuilder)", "org.jsoup.parser.HtmlTreeBuilder.popStackToBefore(java.lang.String)", "org.jsoup.parser.HtmlTreeBuilder.resetInsertionMode()", "org.jsoup.parser.HtmlTreeBuilder.isSpecial(org.jsoup.nodes.Element)", "org.jsoup.parser.HtmlTreeBuilder.getActiveFormattingElement(java.lang.String)", "org.jsoup.parser.HtmlTreeBuilder.popStackToClose(java.lang.String)", "org.jsoup.parser.HtmlTreeBuilder.inSpecificScope(java.lang.String[],java.lang.String[],java.lang.String[])", "org.jsoup.parser.HtmlTreeBuilder.generateImpliedEndTags(java.lang.String)", "org.jsoup.parser.HtmlTreeBuilder.inSelectScope(java.lang.String)", "org.jsoup.parser.HtmlTreeBuilder.clearStackToContext(java.lang.String[])", "org.jsoup.parser.HtmlTreeBuilderState.7.anyOtherEndTag(org.jsoup.parser.Token,org.jsoup.parser.HtmlTreeBuilder)", "org.jsoup.parser.HtmlTreeBuilderState.13.exitTableBody(org.jsoup.parser.Token,org.jsoup.parser.HtmlTreeBuilder)", "org.jsoup.parser.HtmlTreeBuilderState.9.process(org.jsoup.parser.Token,org.jsoup.parser.HtmlTreeBuilder)", "org.jsoup.parser.HtmlTreeBuilderState.11.process(org.jsoup.parser.Token,org.jsoup.parser.HtmlTreeBuilder)", "org.jsoup.parser.HtmlTreeBuilder.popStackToClose(java.lang.String[])", "org.jsoup.parser.Tag", "org.jsoup.nodes.Element.normalName()", "org.jsoup.parser.Tag.normalName()", "org.jsoup.parser.HtmlTreeBuilder.isSameFormattingElement(org.jsoup.nodes.Element,org.jsoup.nodes.Element)", "org.jsoup.parser.HtmlTreeBuilderState.9.anythingElse(org.jsoup.parser.Token,org.jsoup.parser.HtmlTreeBuilder)", "org.jsoup.parser.HtmlTreeBuilder.reconstructFormattingElements()", "org.jsoup.parser.HtmlTreeBuilder.getFromStack(java.lang.String)", "org.jsoup.parser.HtmlTreeBuilderState.10.process(org.jsoup.parser.Token,org.jsoup.parser.HtmlTreeBuilder)", "org.jsoup.parser.HtmlTreeBuilderState.12.process(org.jsoup.parser.Token,org.jsoup.parser.HtmlTreeBuilder)", "org.jsoup.parser.HtmlTreeBuilderState.7.process(org.jsoup.parser.Token,org.jsoup.parser.HtmlTreeBuilder)", "org.jsoup.parser.HtmlTreeBuilderState.15.process(org.jsoup.parser.Token,org.jsoup.parser.HtmlTreeBuilder)", "org.jsoup.parser.HtmlTreeBuilderState.16.process(org.jsoup.parser.Token,org.jsoup.parser.HtmlTreeBuilder)"]}, {"title": "NPE in Attribute.setValue() for attribute without parent", "body": "```\r\n    public String setValue(String val) {\r\n        String oldVal = parent.get(this.key);\r\n        if (parent != null) {\r\n            int i = parent.indexOfKey(this.key);\r\n            if (i != Attributes.NotFound)\r\n                parent.vals[i] = val;\r\n        }\r\n        this.val = val;\r\n        return oldVal;\r\n    }\r\n```\r\nIts useless to check `parent` for `null` after it has been dereferenced. I guess this is a copy-paste-bug:\r\n```\r\n    public void setKey(String key) {\r\n        Validate.notNull(key);\r\n        key = key.trim();\r\n        Validate.notEmpty(key); // trimming could potentially make empty, so validate here\r\n        if (parent != null) {\r\n            int i = parent.indexOfKey(this.key);\r\n            if (i != Attributes.NotFound)\r\n                parent.keys[i] = key;\r\n        }\r\n        this.key = key;\r\n    }\r\n```", "url": "https://github.com/jhy/jsoup/issues/1107", "user": "ewirch", "labels": ["bug", "fixed"], "created": "2018-08-08 07:45:38", "closed": "2018-12-24 06:27:40", "commits": {"1d663eeb1c0d1c08bcfe5d30f05170768bb0438e": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 137.00027777777777, "commitsDetails": [{"commitHash": "1d663eeb1c0d1c08bcfe5d30f05170768bb0438e", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["8b837a43cbe2c12624ab2088dc4ff9a725af5f4d"], "nameRev": "1d663eeb1c0d1c08bcfe5d30f05170768bb0438e tags/jsoup-1.12.1~13", "commitMessage": "Don't NPE in setValue for an orphan Attribute\n\nFixes #1107\n", "commitDateTime": "2018-12-23 22:27:31", "authoredDateTime": "2018-12-23 22:27:31", "commitGitStats": [{"filePath": "CHANGES", "insertions": 4, "deletions": 0, "lines": 4}, {"filePath": "src/main/java/org/jsoup/nodes/Attribute.java", "insertions": 3, "deletions": 2, "lines": 5}, {"filePath": "src/test/java/org/jsoup/nodes/AttributeTest.java", "insertions": 10, "deletions": 0, "lines": 10}], "commitSpoonAstDiffStats": [{"spoonFilePath": "Attribute.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.Attribute.setValue(java.lang.String)", "TOT": 5, "UPD": 0, "INS": 3, "MOV": 1, "DEL": 1}]}, {"spoonFilePath": "AttributeTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.AttributeTest.settersOnOrphanAttribute()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["1d663eeb1c0d1c08bcfe5d30f05170768bb0438e"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 3, "deletions": 2, "lines": 5, "gitFilesChange": 1}, "spoonStatsSummary": {"TOT": 5, "UPD": 0, "INS": 3, "MOV": 1, "DEL": 1, "spoonFilesChanged": 1, "spoonMethodsChanged": 1}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/nodes"], "changesInPackagesSPOON": ["org.jsoup.nodes.Attribute.setValue(java.lang.String)"]}, {"title": "invalid XML file produced after org.jsoup.nodes.Document to org.w3c.dom.Document conversion", "body": "I have an XML `org.w3c.dom.Document`, coming from an HTML `org.jsoup.nodes.Document`.\r\n\r\nWhen I serialize the `org.w3c.dom.Document`, it produces an invalid XML file: it does not close the `META` tag.\r\n\r\nWhy? Is this a bug? from `jsoup`? from java `org.w3c.dom`?\r\n\r\n\r\nRelated bugs:\r\n\r\n- `W3CDom.fromJsoup fails when xmlns is defined`  https://github.com/jhy/jsoup/issues/1096\r\n- Should `org.jsoup.nodes.Document.toString()` produce a valid XML file?  https://github.com/jhy/jsoup/issues/1097\r\n\r\n\r\nExample code:\r\n\r\n    import org.jsoup.Jsoup;\r\n    import org.jsoup.helper.W3CDom;\r\n    import org.w3c.dom.Document;\r\n    \r\n    import javax.xml.parsers.DocumentBuilder;\r\n    import javax.xml.parsers.DocumentBuilderFactory;\r\n    import javax.xml.transform.OutputKeys;\r\n    import javax.xml.transform.Transformer;\r\n    import javax.xml.transform.TransformerException;\r\n    import javax.xml.transform.TransformerFactory;\r\n    import javax.xml.transform.dom.DOMSource;\r\n    import javax.xml.transform.stream.StreamResult;\r\n    import java.io.ByteArrayInputStream;\r\n    import java.io.StringWriter;\r\n    import java.nio.charset.StandardCharsets;\r\n    \r\n    public class Test130e {\r\n        public static void main(String[] args) throws Exception {\r\n            String html = \"<html><head><script async src=\\\"http://example.com/script.js\\\"></script></head></html>\";\r\n    \r\n            org.jsoup.nodes.Document jsoupDoc = Jsoup.parse(html); \r\n            System.out.println(\"+++ jsoupDoc.toString()\");\r\n            System.out.println(jsoupDoc.toString());\r\n    \r\n    \r\n            Document w3cDoc = new W3CDom().fromJsoup(jsoupDoc);\r\n            String xml = w3cDocToString(w3cDoc);\r\n\r\n            System.out.println(\"+++ xml\");\r\n            System.out.println(xml);\r\n    \r\n            // this previous xml file is invalid, and so it fails to parse it\r\n            // The element type \"META\" must be terminated by the matching end-tag \"</META>\".\r\n            Document w3cDoc2 = parseXml(xml);\r\n        }\r\n    \r\n        static Document parseXml(String content) throws Exception {\r\n            DocumentBuilder documentBuilder = DocumentBuilderFactory.newInstance().newDocumentBuilder();\r\n            return documentBuilder.parse(new ByteArrayInputStream(content.getBytes(StandardCharsets.UTF_8)));\r\n        }\r\n\r\n    private static String w3cDocToString(Document w3cDoc) throws TransformerException {\r\n        Transformer transformer = TransformerFactory.newInstance().newTransformer();\r\n        transformer.setOutputProperty(OutputKeys.INDENT, \"yes\");\r\n        transformer.setOutputProperty(\"{http://xml.apache.org/xslt}indent-amount\", \"2\");\r\n        StreamResult result = new StreamResult(new StringWriter());\r\n        DOMSource source = new DOMSource(w3cDoc);\r\n        transformer.transform(source, result);\r\n        return result.getWriter().toString();\r\n    }\r\n\r\n    }\r\n\r\nOutput:\r\n\r\n    +++ jsoupDoc.toString()\r\n    <html>\r\n     <head>\r\n      <script async src=\"http://example.com/script.js\"></script>\r\n     </head>\r\n     <body></body>\r\n    </html>\r\n\r\n    +++ xml\r\n    <html>\r\n    <head>\r\n    <META http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\r\n    <script async=\"\" src=\"http://example.com/script.js\"></script>\r\n    </head>\r\n    <body></body>\r\n    </html>\r\n    \r\n    [Fatal Error] :5:3: The element type \"META\" must be terminated by the matching end-tag \"</META>\".\r\n    Exception in thread \"main\" org.xml.sax.SAXParseException; lineNumber: 5; columnNumber: 3; The element type \"META\" must be terminated by the matching end-tag \"</META>\".\r\n    \tat org.apache.xerces.parsers.DOMParser.parse(Unknown Source)\r\n    \tat org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source)\r\n    \tat javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:121)\r\n    \tat playground.Test130e.parseXml(Test130.java:116)\r\n    \tat playground.Test130e.main(Test130.java:110)\r\n\r\n\r\nWhy does `w3cDocToString` build an invalid XML file (it does not close the `META` tag)?\r\n\r\nIs this a bug? from `jsoup`? from java `org.w3c.dom`?\r\n", "url": "https://github.com/jhy/jsoup/issues/1098", "user": "dportabella", "labels": ["bug"], "created": "2018-07-17 18:13:51", "closed": "2020-02-02 23:49:11", "commits": {"fe92494c7716eeb04d5d4040cc43d67b8f2f4aaf": {"commitGHEventType": "closed", "commitUser": "jhy"}, "e02085409f0bdd7e71441fc62448192720305444": {"commitGHEventType": "referenced", "commitUser": "jhy"}}, "ttf": 565.0002777777778, "commitsDetails": [{"commitHash": "fe92494c7716eeb04d5d4040cc43d67b8f2f4aaf", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["d36f91a47fc5e4ae8a8b172d6822e5019abf356c"], "nameRev": "fe92494c7716eeb04d5d4040cc43d67b8f2f4aaf tags/1.12.2~14", "commitMessage": "W3CDom#asString should emit XML\n\nFixes #1098\n", "commitDateTime": "2020-02-02 15:49:04", "authoredDateTime": "2020-02-02 15:49:04", "commitGitStats": [{"filePath": "CHANGES", "insertions": 4, "deletions": 0, "lines": 4}, {"filePath": "src/main/java/org/jsoup/helper/W3CDom.java", "insertions": 17, "deletions": 0, "lines": 17}, {"filePath": "src/test/java/org/jsoup/TextUtil.java", "insertions": 5, "deletions": 0, "lines": 5}, {"filePath": "src/test/java/org/jsoup/helper/W3CDomTest.java", "insertions": 51, "deletions": 10, "lines": 61}], "commitSpoonAstDiffStats": [{"spoonFilePath": "W3CDom.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.helper.W3CDom.asString(org.w3c.dom.Document)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.helper.W3CDom.asString(org.w3c.dom.Document,java.util.Properties)", "TOT": 3, "UPD": 0, "INS": 3, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "TextUtil.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.TextUtil", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.TextUtil.stripCRs(java.lang.String)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "W3CDomTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.helper.W3CDomTest.simpleConversion()", "TOT": 22, "UPD": 4, "INS": 11, "MOV": 6, "DEL": 1}, {"spoonMethodName": "org.jsoup.helper.W3CDomTest.convertsGoogle()", "TOT": 6, "UPD": 1, "INS": 3, "MOV": 2, "DEL": 0}, {"spoonMethodName": "org.jsoup.helper.W3CDomTest.parseXml(java.lang.String)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}, {"commitHash": "e02085409f0bdd7e71441fc62448192720305444", "commitGHEventType": "referenced", "commitUser": "jhy", "commitParents": ["fb50d9635874185fc050735057b8a7363cd53f3f"], "nameRev": "e02085409f0bdd7e71441fc62448192720305444 tags/1.12.2~6", "commitMessage": "In W3CDom, handle doctypes, and don't force XML output\n\nFixes #1183\nUpdates #1098\n", "commitDateTime": "2020-02-08 16:54:29", "authoredDateTime": "2020-02-08 16:54:29", "commitGitStats": [{"filePath": "CHANGES", "insertions": 10, "deletions": 4, "lines": 14}, {"filePath": "src/main/java/org/jsoup/helper/W3CDom.java", "insertions": 119, "deletions": 38, "lines": 157}, {"filePath": "src/main/java/org/jsoup/nodes/Document.java", "insertions": 15, "deletions": 0, "lines": 15}, {"filePath": "src/main/java/org/jsoup/nodes/DocumentType.java", "insertions": 34, "deletions": 9, "lines": 43}, {"filePath": "src/test/java/org/jsoup/helper/W3CDomTest.java", "insertions": 64, "deletions": 10, "lines": 74}, {"filePath": "src/test/java/org/jsoup/nodes/DocumentTest.java", "insertions": 11, "deletions": 3, "lines": 14}, {"filePath": "src/test/java/org/jsoup/nodes/DocumentTypeTest.java", "insertions": 4, "deletions": 1, "lines": 5}], "commitSpoonAstDiffStats": [{"spoonFilePath": "W3CDom.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.helper.W3CDom.asString(org.w3c.dom.Document)", "TOT": 7, "UPD": 2, "INS": 1, "MOV": 3, "DEL": 1}, {"spoonMethodName": "org.jsoup.helper.W3CDom.asString(org.w3c.dom.Document,java.util.Properties)", "TOT": 11, "UPD": 3, "INS": 0, "MOV": 6, "DEL": 2}, {"spoonMethodName": "org.jsoup.helper.W3CDom.fromJsoup(org.jsoup.nodes.Document)", "TOT": 14, "UPD": 0, "INS": 1, "MOV": 12, "DEL": 1}, {"spoonMethodName": "org.jsoup.helper.W3CDom", "TOT": 2, "UPD": 0, "INS": 1, "MOV": 1, "DEL": 0}, {"spoonMethodName": "org.jsoup.helper.W3CDom.convert(org.jsoup.nodes.Document)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.helper.W3CDom.propertiesFromMap(java.util.Map)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.helper.W3CDom.OutputHtml()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.helper.W3CDom.OutputXml()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.helper.W3CDom.methodMap(java.lang.String)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.helper.W3CDom.asString(org.w3c.dom.Document,java.util.Map)", "TOT": 3, "UPD": 0, "INS": 3, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "Document.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.Document.documentType()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "DocumentType.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.DocumentType", "TOT": 10, "UPD": 0, "INS": 3, "MOV": 4, "DEL": 3}, {"spoonMethodName": "org.jsoup.nodes.DocumentType.updatePubSyskey()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.DocumentType.name()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.DocumentType.publicId()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.DocumentType.systemId()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "W3CDomTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.helper.W3CDomTest.convertsGoogle()", "TOT": 9, "UPD": 1, "INS": 6, "MOV": 1, "DEL": 1}, {"spoonMethodName": "org.jsoup.helper.W3CDomTest.parseXml(java.lang.String,boolean)", "TOT": 3, "UPD": 2, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.helper.W3CDomTest.simpleConversion()", "TOT": 10, "UPD": 2, "INS": 4, "MOV": 0, "DEL": 4}, {"spoonMethodName": "org.jsoup.helper.W3CDomTest.testRoundTripDoctype()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.helper.W3CDomTest.output(java.lang.String,boolean)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "DocumentTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.DocumentTest.DocumentsWithSameContentAreVerifialbe()", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.DocumentTest.testLocation()", "TOT": 4, "UPD": 0, "INS": 2, "MOV": 0, "DEL": 2}, {"spoonMethodName": "org.jsoup.nodes.DocumentTest.testDocumentTypeGet()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "DocumentTypeTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.DocumentTypeTest.outerHtmlGeneration()", "TOT": 4, "UPD": 1, "INS": 3, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["fe92494c7716eeb04d5d4040cc43d67b8f2f4aaf"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 1, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 17, "deletions": 0, "lines": 17, "gitFilesChange": 1}, "spoonStatsSummary": {"TOT": 6, "UPD": 0, "INS": 6, "MOV": 0, "DEL": 0, "spoonFilesChanged": 2, "spoonMethodsChanged": 4}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/helper"], "changesInPackagesSPOON": ["org.jsoup.helper.W3CDom.asString(org.w3c.dom.Document)", "org.jsoup.TextUtil", "org.jsoup.TextUtil.stripCRs(java.lang.String)", "org.jsoup.helper.W3CDom.asString(org.w3c.dom.Document,java.util.Properties)"]}, {"title": "Preserve case results in broken HTML with additional emtpy lines", "body": "With preserve case enabled for tags, the `.html()` returns additional empty lines in some cases and does some weird stuff with the `<P>`-tags.\r\n\r\n## Example\r\n\r\n### Input HTML\r\n```\r\n<P>Test Line 1</P>\r\n<P>Test Line 2</P>\r\n<P>Test Line 3</P>\r\n```\r\n\r\n### Code\r\n\r\n```\r\nString input = \"<P>Test Line 1</P>\\n<P>Test Line 2</P>\\n<P>Test Line 3</P>\";\r\nParser customParser = Parser.htmlParser();\r\ncustomParser.settings(new ParseSettings(true, true));\r\nDocument doc = Jsoup.parse(input, \"\", customParser);\r\n\r\nString output = doc.body().html();\r\n```\r\n\r\n### Output HTML\r\n\r\n```\r\n<P>\r\n Test Line 1\r\n <p></p> \r\n <P>\r\n  Test Line 2\r\n  <p></p> \r\n  <P>\r\n   Test Line 3\r\n   <p></p>\r\n  </P>\r\n </P>\r\n</P>\r\n```\r\n\r\n\r\nWhen preserve case is disabled for tags, it works as expected.\r\n```\r\ncustomParser.settings(new ParseSettings(false, true));\r\n```\r\n\r\nUnfortunately, I need to preserve the case of tags.\r\n\r\nThe same happens when I use the XML-parser to parse the HTML, since it preserves the tag's case by default.", "url": "https://github.com/jhy/jsoup/issues/1083", "user": "FelixSFD", "labels": ["bug", "fixed"], "created": "2018-06-25 08:07:11", "closed": "2018-12-24 05:46:54", "commits": {}, "ttf": 181.00027777777777, "commitsDetails": []}, {"title": "Attribute.getValue() broken for empty attributes since 1.11.1", "body": "```\r\n        Document doc = Jsoup.parse(\"<div hidden>\");\r\n        Attributes attributes = doc.body().child(0).attributes();\r\n        System.out.println(String.format(\"Attr: '%s', value: '%s'\", \"hidden\",\r\n                attributes.get(\"hidden\")));\r\n\r\n        Attribute first = attributes.iterator().next();\r\n        System.out.println(String.format(\"Attr: '%s', value: '%s'\",\r\n                first.getKey(), first.getValue()));\r\n```\r\n\r\nExpected output, as in 1.10.x\r\n```\r\nAttr: 'hidden', value: ''\r\nAttr: 'hidden', value: ''\r\n```\r\n\r\nOutput in 1.11.1-1.11.3:\r\n```\r\nAttr: 'hidden', value: ''\r\nAttr: 'hidden', value: 'null'\r\n```\r\n", "url": "https://github.com/jhy/jsoup/issues/1065", "user": "Artur-", "labels": ["bug", "fixed"], "created": "2018-05-22 10:35:22", "closed": "2018-12-24 06:03:10", "commits": {"8b837a43cbe2c12624ab2088dc4ff9a725af5f4d": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 215.00027777777777, "commitsDetails": [{"commitHash": "8b837a43cbe2c12624ab2088dc4ff9a725af5f4d", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["8adcd55d8abe4c84ae2dcffb9a882abc4143bb93"], "nameRev": "8b837a43cbe2c12624ab2088dc4ff9a725af5f4d tags/jsoup-1.12.1~14", "commitMessage": "Return null attribute values as empty string\n\nPrevious / defined behaviour.\n\nFixes #1065\n", "commitDateTime": "2018-12-23 22:02:59", "authoredDateTime": "2018-12-23 22:02:59", "commitGitStats": [{"filePath": "CHANGES", "insertions": 4, "deletions": 0, "lines": 4}, {"filePath": "src/main/java/org/jsoup/nodes/Attribute.java", "insertions": 1, "deletions": 1, "lines": 2}, {"filePath": "src/test/java/org/jsoup/nodes/AttributeTest.java", "insertions": 11, "deletions": 0, "lines": 11}], "commitSpoonAstDiffStats": [{"spoonFilePath": "Attribute.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.Attribute.getValue()", "TOT": 2, "UPD": 0, "INS": 1, "MOV": 1, "DEL": 0}]}, {"spoonFilePath": "AttributeTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.AttributeTest.booleanAttributesAreEmptyStringValues()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["8b837a43cbe2c12624ab2088dc4ff9a725af5f4d"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 1, "deletions": 1, "lines": 2, "gitFilesChange": 1}, "spoonStatsSummary": {"TOT": 2, "UPD": 0, "INS": 1, "MOV": 1, "DEL": 0, "spoonFilesChanged": 1, "spoonMethodsChanged": 1}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/nodes"], "changesInPackagesSPOON": ["org.jsoup.nodes.Attribute.getValue()"]}, {"title": "LeafNode.childNodes() throws UnsupportedOperationException.", "body": "`LeafNode.childNodes()` throws `UnsupportedOperationException` since this commit:\r\nhttps://github.com/jhy/jsoup/commit/f71712ba5d28df09c9a5b6e3c8a37f05f5e3372d#diff-605d28890f72a0f43298f842d0a3414f\r\n\r\nThe javadoc of `Node.childNodes()` says this:\r\n  `@return list of children. If no children, returns an empty list.`\r\n\r\nBut in the case of a LeafNode, which has no children, it throws `UnsupportedOperationException`. This is because `childNodes()` calls `ensureChildNodes()`, which throws an exception when called on a `LeafNode`.\r\n\r\nThe result is that the calling application needs to guard against this case. But the application should not need to know if the `Node` it has is a `LeafNode` or not.\r\n\r\n`LeafNode.childNodes()` should simply return an empty list as it used to do, and as per the javadoc.\r\n\r\n", "url": "https://github.com/jhy/jsoup/issues/1032", "user": "mattp1", "labels": ["bug"], "created": "2018-03-11 23:29:50", "closed": "2018-04-14 20:43:17", "commits": {"f71712ba5d28df09c9a5b6e3c8a37f05f5e3372d": {"commitGHEventType": "referenced", "commitUser": "mattp1"}, "1028b37a1dfbc5dda7b18cbe692ab168c54fb505": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 33.000277777777775, "commitsDetails": [{"commitHash": "f71712ba5d28df09c9a5b6e3c8a37f05f5e3372d", "commitGHEventType": "referenced", "commitUser": "mattp1", "commitParents": ["5e386d51f396deec5743ca9cc4e3f0e7559d3956"], "nameRev": "f71712ba5d28df09c9a5b6e3c8a37f05f5e3372d tags/jsoup-1.11.1~63", "commitMessage": "Project :: Slimfast\n\nRefactored node hierarchy so that leaf nodes (text, comments, scripts,\netc) use 24 bytes vs 40 bytes each.\n", "commitDateTime": "2017-07-01 23:59:26", "authoredDateTime": "2017-07-01 23:59:26", "commitGitStats": [{"filePath": "CHANGES", "insertions": 4, "deletions": 0, "lines": 4}, {"filePath": "src/main/java/org/jsoup/nodes/Attributes.java", "insertions": 16, "deletions": 10, "lines": 26}, {"filePath": "src/main/java/org/jsoup/nodes/Comment.java", "insertions": 13, "deletions": 5, "lines": 18}, {"filePath": "src/main/java/org/jsoup/nodes/DataNode.java", "insertions": 14, "deletions": 7, "lines": 21}, {"filePath": "src/main/java/org/jsoup/nodes/Document.java", "insertions": 7, "deletions": 6, "lines": 13}, {"filePath": "src/main/java/org/jsoup/nodes/DocumentType.java", "insertions": 28, "deletions": 10, "lines": 38}, {"filePath": "src/main/java/org/jsoup/nodes/Element.java", "insertions": 78, "deletions": 15, "lines": 93}, {"filePath": "src/main/java/org/jsoup/nodes/LeafNode.java", "insertions": 95, "deletions": 0, "lines": 95}, {"filePath": "src/main/java/org/jsoup/nodes/Node.java", "insertions": 74, "deletions": 99, "lines": 173}, {"filePath": "src/main/java/org/jsoup/nodes/TextNode.java", "insertions": 34, "deletions": 63, "lines": 97}, {"filePath": "src/main/java/org/jsoup/nodes/XmlDeclaration.java", "insertions": 46, "deletions": 21, "lines": 67}, {"filePath": "src/main/java/org/jsoup/parser/HtmlTreeBuilder.java", "insertions": 3, "deletions": 3, "lines": 6}, {"filePath": "src/main/java/org/jsoup/parser/HtmlTreeBuilderState.java", "insertions": 2, "deletions": 1, "lines": 3}, {"filePath": "src/main/java/org/jsoup/parser/XmlTreeBuilder.java", "insertions": 5, "deletions": 4, "lines": 9}, {"filePath": "src/main/java/org/jsoup/safety/Cleaner.java", "insertions": 2, "deletions": 2, "lines": 4}, {"filePath": "src/test/java/org/jsoup/nodes/DocumentTest.java", "insertions": 1, "deletions": 1, "lines": 2}, {"filePath": "src/test/java/org/jsoup/nodes/DocumentTypeTest.java", "insertions": 7, "deletions": 7, "lines": 14}, {"filePath": "src/test/java/org/jsoup/nodes/ElementTest.java", "insertions": 1, "deletions": 1, "lines": 2}, {"filePath": "src/test/java/org/jsoup/nodes/TextNodeTest.java", "insertions": 6, "deletions": 6, "lines": 12}], "commitSpoonAstDiffStats": [{"spoonFilePath": "Attributes.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.Attributes.put(java.lang.String,java.lang.String)", "TOT": 2, "UPD": 1, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Attributes.put(java.lang.String,boolean)", "TOT": 2, "UPD": 1, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Attributes.put(org.jsoup.nodes.Attribute)", "TOT": 2, "UPD": 1, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "Comment.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.Comment", "TOT": 4, "UPD": 2, "INS": 1, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.Comment.getData()", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "DataNode.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.DataNode", "TOT": 5, "UPD": 2, "INS": 1, "MOV": 0, "DEL": 2}, {"spoonMethodName": "org.jsoup.nodes.DataNode.setWholeData(java.lang.String)", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.DataNode.getWholeData()", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "Document.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.Document.normaliseTextNodes(org.jsoup.nodes.Element)", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Document.findFirstElementByTagName(java.lang.String,org.jsoup.nodes.Node)", "TOT": 11, "UPD": 2, "INS": 3, "MOV": 5, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.Document.ensureMetaCharsetElement()", "TOT": 2, "UPD": 2, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Document.normaliseStructure(java.lang.String,org.jsoup.nodes.Element)", "TOT": 2, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 1}]}, {"spoonFilePath": "DocumentType.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.DocumentType", "TOT": 13, "UPD": 3, "INS": 4, "MOV": 5, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.DocumentType.outerHtmlHead(java.lang.Appendable,int,org.jsoup.nodes.Document$OutputSettings)", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.DocumentType.setPubSysKey(java.lang.String)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "Element.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.Element.appendText(java.lang.String)", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Element.prependText(java.lang.String)", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Element.text(java.lang.String)", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Element.outerHtmlTail(java.lang.Appendable,int,org.jsoup.nodes.Document$OutputSettings)", "TOT": 7, "UPD": 2, "INS": 4, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.Element", "TOT": 13, "UPD": 0, "INS": 9, "MOV": 2, "DEL": 2}, {"spoonMethodName": "org.jsoup.nodes.Element.id()", "TOT": 4, "UPD": 0, "INS": 2, "MOV": 1, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.Element.attr(java.lang.String,boolean)", "TOT": 2, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.Element.dataset()", "TOT": 4, "UPD": 0, "INS": 2, "MOV": 1, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.Element.classNames(java.util.Set)", "TOT": 2, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.Element.hasClass(java.lang.String)", "TOT": 2, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.Element.outerHtmlHead(java.lang.Appendable,int,org.jsoup.nodes.Document$OutputSettings)", "TOT": 9, "UPD": 0, "INS": 4, "MOV": 4, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.Element.ensureChildNodes()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Element.hasAttributes()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Element.attributes()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Element.baseUri()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Element.doSetBaseUri(java.lang.String)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Element.childNodeSize()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Element.doClone(org.jsoup.nodes.Node)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Element.NodeList", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Element.textNodes()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Element.dataNodes()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Element.appendChild(org.jsoup.nodes.Node)", "TOT": 2, "UPD": 0, "INS": 2, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Element.empty()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Element.ownText(java.lang.StringBuilder)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Element.hasText()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Element.data()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Element.html(java.lang.StringBuilder)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Element.html(java.lang.Appendable)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Element.childElementsList()", "TOT": 4, "UPD": 0, "INS": 2, "MOV": 2, "DEL": 0}]}, {"spoonFilePath": "LeafNode.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.LeafNode", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "Node.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.Node", "TOT": 15, "UPD": 2, "INS": 0, "MOV": 1, "DEL": 12}, {"spoonMethodName": "org.jsoup.nodes.Node.childNodesCopy()", "TOT": 7, "UPD": 1, "INS": 4, "MOV": 0, "DEL": 2}, {"spoonMethodName": "org.jsoup.nodes.Node.childNodeSize()", "TOT": 2, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.Node.attr(java.lang.String)", "TOT": 3, "UPD": 0, "INS": 2, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.Node.attributes()", "TOT": 3, "UPD": 0, "INS": 1, "MOV": 1, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.Node.attr(java.lang.String,java.lang.String)", "TOT": 2, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.Node.hasAttr(java.lang.String)", "TOT": 4, "UPD": 0, "INS": 2, "MOV": 0, "DEL": 2}, {"spoonMethodName": "org.jsoup.nodes.Node.removeAttr(java.lang.String)", "TOT": 3, "UPD": 0, "INS": 1, "MOV": 1, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.Node.clearAttributes()", "TOT": 2, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.Node.baseUri()", "TOT": 2, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.Node.setBaseUri(java.lang.String).1.head(org.jsoup.nodes.Node,int)", "TOT": 2, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.Node.absUrl(java.lang.String)", "TOT": 2, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.Node.childNode(int)", "TOT": 3, "UPD": 0, "INS": 1, "MOV": 1, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.Node.childNodes()", "TOT": 3, "UPD": 0, "INS": 1, "MOV": 1, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.Node.childNodesAsArray()", "TOT": 2, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.Node.unwrap()", "TOT": 5, "UPD": 0, "INS": 3, "MOV": 0, "DEL": 2}, {"spoonMethodName": "org.jsoup.nodes.Node.replaceChild(org.jsoup.nodes.Node,org.jsoup.nodes.Node)", "TOT": 2, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.Node.removeChild(org.jsoup.nodes.Node)", "TOT": 2, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.Node.addChildren(org.jsoup.nodes.Node[])", "TOT": 6, "UPD": 0, "INS": 3, "MOV": 1, "DEL": 2}, {"spoonMethodName": "org.jsoup.nodes.Node.addChildren(int,org.jsoup.nodes.Node[])", "TOT": 4, "UPD": 0, "INS": 2, "MOV": 1, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.Node.ensureChildNodes()", "TOT": 3, "UPD": 0, "INS": 1, "MOV": 1, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.Node.reindexChildren(int)", "TOT": 9, "UPD": 0, "INS": 3, "MOV": 3, "DEL": 3}, {"spoonMethodName": "org.jsoup.nodes.Node.siblingNodes()", "TOT": 3, "UPD": 0, "INS": 1, "MOV": 1, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.Node.nextSibling()", "TOT": 3, "UPD": 0, "INS": 1, "MOV": 1, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.Node.previousSibling()", "TOT": 3, "UPD": 0, "INS": 1, "MOV": 1, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.Node.clone()", "TOT": 10, "UPD": 0, "INS": 6, "MOV": 1, "DEL": 3}, {"spoonMethodName": "org.jsoup.nodes.Node.doClone(org.jsoup.nodes.Node)", "TOT": 4, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 4}, {"spoonMethodName": "org.jsoup.nodes.Node.NodeList", "TOT": 1, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.Node.hasAttributes()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Node.hasParent()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Node.doSetBaseUri(java.lang.String)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "TextNode.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.TextNode.attr(java.lang.String,java.lang.String)", "TOT": 5, "UPD": 3, "INS": 0, "MOV": 1, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.TextNode.removeAttr(java.lang.String)", "TOT": 6, "UPD": 3, "INS": 0, "MOV": 2, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.TextNode", "TOT": 12, "UPD": 3, "INS": 2, "MOV": 4, "DEL": 3}, {"spoonMethodName": "org.jsoup.nodes.TextNode.outerHtmlHead(java.lang.Appendable,int,org.jsoup.nodes.Document$OutputSettings)", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.TextNode.isBlank()", "TOT": 2, "UPD": 1, "INS": 0, "MOV": 1, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.TextNode.text(java.lang.String)", "TOT": 3, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 2}, {"spoonMethodName": "org.jsoup.nodes.TextNode.getWholeText()", "TOT": 3, "UPD": 0, "INS": 1, "MOV": 1, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.TextNode.splitText(int)", "TOT": 7, "UPD": 0, "INS": 4, "MOV": 0, "DEL": 3}, {"spoonMethodName": "org.jsoup.nodes.TextNode.createFromEncoded(java.lang.String,java.lang.String)", "TOT": 3, "UPD": 0, "INS": 2, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.TextNode.ensureAttributes()", "TOT": 1, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.TextNode.attr(java.lang.String)", "TOT": 1, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.TextNode.attributes()", "TOT": 1, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.TextNode.hasAttr(java.lang.String)", "TOT": 1, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.TextNode.absUrl(java.lang.String)", "TOT": 1, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.TextNode.createFromEncoded(java.lang.String)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "XmlDeclaration.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.XmlDeclaration", "TOT": 6, "UPD": 2, "INS": 1, "MOV": 1, "DEL": 2}, {"spoonMethodName": "org.jsoup.nodes.XmlDeclaration.outerHtmlHead(java.lang.Appendable,int,org.jsoup.nodes.Document$OutputSettings)", "TOT": 3, "UPD": 1, "INS": 1, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.XmlDeclaration.getWholeDeclaration()", "TOT": 3, "UPD": 1, "INS": 2, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.XmlDeclaration.name()", "TOT": 2, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.XmlDeclaration.getWholeDeclaration(java.lang.Appendable,org.jsoup.nodes.Document$OutputSettings)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "HtmlTreeBuilder.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilder.insert(org.jsoup.parser.Token$Comment)", "TOT": 1, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilder.insert(org.jsoup.parser.Token$Character)", "TOT": 2, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 2}]}, {"spoonFilePath": "HtmlTreeBuilderState.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilderState.1.process(org.jsoup.parser.Token,org.jsoup.parser.HtmlTreeBuilder)", "TOT": 3, "UPD": 0, "INS": 1, "MOV": 1, "DEL": 1}]}, {"spoonFilePath": "XmlTreeBuilder.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.XmlTreeBuilder.insert(org.jsoup.parser.Token$Comment)", "TOT": 2, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 2}, {"spoonMethodName": "org.jsoup.parser.XmlTreeBuilder.insert(org.jsoup.parser.Token$Character)", "TOT": 1, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.parser.XmlTreeBuilder.insert(org.jsoup.parser.Token$Doctype)", "TOT": 3, "UPD": 0, "INS": 1, "MOV": 1, "DEL": 1}]}, {"spoonFilePath": "Cleaner.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.safety.Cleaner.CleaningVisitor.head(org.jsoup.nodes.Node,int)", "TOT": 2, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 2}]}, {"spoonFilePath": "DocumentTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.DocumentTest.createXmlDocument(java.lang.String,java.lang.String,boolean)", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "DocumentTypeTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.DocumentTypeTest.constructorValidationOkWithBlankName()", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.DocumentTypeTest.constructorValidationThrowsExceptionOnNulls()", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.DocumentTypeTest.constructorValidationOkWithBlankPublicAndSystemIds()", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.DocumentTypeTest.outerHtmlGeneration()", "TOT": 4, "UPD": 4, "INS": 0, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "ElementTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.ElementTest.insertChildrenAtPosition()", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "TextNodeTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.TextNodeTest.testBlank()", "TOT": 5, "UPD": 5, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.TextNodeTest.testTextBean()", "TOT": 2, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 1}]}], "spoonStatsSkippedReason": ""}, {"commitHash": "1028b37a1dfbc5dda7b18cbe692ab168c54fb505", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["2c4e79b104c0ff32566ce247617d47c0b39cc2c7"], "nameRev": "1028b37a1dfbc5dda7b18cbe692ab168c54fb505 tags/jsoup-1.11.3~8", "commitMessage": "Leaf nodes should return an empty list on .childNodes(), not except\n\nFixes #1032\n", "commitDateTime": "2018-04-14 13:43:05", "authoredDateTime": "2018-04-14 13:43:05", "commitGitStats": [{"filePath": "CHANGES", "insertions": 6, "deletions": 2, "lines": 8}, {"filePath": "src/main/java/org/jsoup/nodes/LeafNode.java", "insertions": 4, "deletions": 1, "lines": 5}, {"filePath": "src/test/java/org/jsoup/nodes/TextNodeTest.java", "insertions": 10, "deletions": 0, "lines": 10}], "commitSpoonAstDiffStats": [{"spoonFilePath": "LeafNode.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.LeafNode.ensureChildNodes()", "TOT": 2, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.LeafNode", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "TextNodeTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.TextNodeTest.testLeadNodesHaveNoChildren()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["f71712ba5d28df09c9a5b6e3c8a37f05f5e3372d", "1028b37a1dfbc5dda7b18cbe692ab168c54fb505"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 2, "gitStatsSummary": {"insertions": 421, "deletions": 247, "lines": 668, "gitFilesChange": 14}, "spoonStatsSummary": {"TOT": 311, "UPD": 43, "INS": 124, "MOV": 47, "DEL": 97, "spoonFilesChanged": 14, "spoonMethodsChanged": 104}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/nodes", "src/main/java/org/jsoup/parser", "src/main/java/org/jsoup/safety"], "changesInPackagesSPOON": ["org.jsoup.nodes.LeafNode", "org.jsoup.nodes.TextNode", "org.jsoup.nodes.DataNode.getWholeData()", "org.jsoup.nodes.Node.hasAttr(java.lang.String)", "org.jsoup.nodes.Element.prependText(java.lang.String)", "org.jsoup.nodes.Element.empty()", "org.jsoup.nodes.Attributes.put(java.lang.String,boolean)", "org.jsoup.nodes.Element.id()", "org.jsoup.nodes.TextNode.removeAttr(java.lang.String)", "org.jsoup.nodes.Comment.getData()", "org.jsoup.nodes.Node.previousSibling()", "org.jsoup.nodes.TextNode.splitText(int)", "org.jsoup.nodes.XmlDeclaration.getWholeDeclaration()", "org.jsoup.nodes.Element.attributes()", "org.jsoup.nodes.TextNode.attr(java.lang.String,java.lang.String)", "org.jsoup.nodes.TextNode.createFromEncoded(java.lang.String,java.lang.String)", "org.jsoup.parser.XmlTreeBuilder.insert(org.jsoup.parser.Token$Character)", "org.jsoup.nodes.TextNode.absUrl(java.lang.String)", "org.jsoup.nodes.Element.hasClass(java.lang.String)", "org.jsoup.nodes.Node.clone()", "org.jsoup.nodes.Node.clearAttributes()", "org.jsoup.nodes.TextNode.text(java.lang.String)", "org.jsoup.nodes.Node.addChildren(org.jsoup.nodes.Node[])", "org.jsoup.nodes.Element.classNames(java.util.Set)", "org.jsoup.nodes.Element.textNodes()", "org.jsoup.nodes.TextNode.isBlank()", "org.jsoup.nodes.TextNode.hasAttr(java.lang.String)", "org.jsoup.nodes.Document.normaliseStructure(java.lang.String,org.jsoup.nodes.Element)", "org.jsoup.nodes.Element.hasAttributes()", "org.jsoup.nodes.Node.attr(java.lang.String)", "org.jsoup.nodes.Document.ensureMetaCharsetElement()", "org.jsoup.nodes.Element.outerHtmlHead(java.lang.Appendable,int,org.jsoup.nodes.Document$OutputSettings)", "org.jsoup.nodes.Node.nextSibling()", "org.jsoup.nodes.TextNode.attributes()", "org.jsoup.nodes.Element.attr(java.lang.String,boolean)", "org.jsoup.nodes.Document.normaliseTextNodes(org.jsoup.nodes.Element)", "org.jsoup.parser.XmlTreeBuilder.insert(org.jsoup.parser.Token$Doctype)", "org.jsoup.nodes.Element.data()", "org.jsoup.nodes.LeafNode.ensureChildNodes()", "org.jsoup.nodes.Node.doSetBaseUri(java.lang.String)", "org.jsoup.nodes.Document.findFirstElementByTagName(java.lang.String,org.jsoup.nodes.Node)", "org.jsoup.nodes.Comment", "org.jsoup.parser.HtmlTreeBuilder.insert(org.jsoup.parser.Token$Comment)", "org.jsoup.nodes.Node.replaceChild(org.jsoup.nodes.Node,org.jsoup.nodes.Node)", "org.jsoup.nodes.DocumentType", "org.jsoup.nodes.Element.NodeList", "org.jsoup.nodes.Element.outerHtmlTail(java.lang.Appendable,int,org.jsoup.nodes.Document$OutputSettings)", "org.jsoup.nodes.Node.attributes()", "org.jsoup.parser.HtmlTreeBuilderState.1.process(org.jsoup.parser.Token,org.jsoup.parser.HtmlTreeBuilder)", "org.jsoup.nodes.XmlDeclaration.getWholeDeclaration(java.lang.Appendable,org.jsoup.nodes.Document$OutputSettings)", "org.jsoup.nodes.Node", "org.jsoup.nodes.Attributes.put(java.lang.String,java.lang.String)", "org.jsoup.nodes.Node.hasParent()", "org.jsoup.nodes.Node.NodeList", "org.jsoup.nodes.DocumentType.setPubSysKey(java.lang.String)", "org.jsoup.nodes.Node.removeChild(org.jsoup.nodes.Node)", "org.jsoup.nodes.XmlDeclaration.name()", "org.jsoup.nodes.Element.appendText(java.lang.String)", "org.jsoup.nodes.Node.childNode(int)", "org.jsoup.nodes.Node.baseUri()", "org.jsoup.nodes.Element.doSetBaseUri(java.lang.String)", "org.jsoup.nodes.Element.dataNodes()", "org.jsoup.nodes.XmlDeclaration", "org.jsoup.nodes.Element.html(java.lang.Appendable)", "org.jsoup.nodes.Element.hasText()", "org.jsoup.nodes.Node.childNodeSize()", "org.jsoup.nodes.Node.childNodesCopy()", "org.jsoup.nodes.DataNode", "org.jsoup.nodes.Element.dataset()", "org.jsoup.nodes.Node.addChildren(int,org.jsoup.nodes.Node[])", "org.jsoup.nodes.Node.siblingNodes()", "org.jsoup.nodes.Element.childElementsList()", "org.jsoup.nodes.Element.ensureChildNodes()", "org.jsoup.nodes.Element.childNodeSize()", "org.jsoup.nodes.Node.hasAttributes()", "org.jsoup.nodes.Element.html(java.lang.StringBuilder)", "org.jsoup.nodes.Element.text(java.lang.String)", "org.jsoup.nodes.Element.ownText(java.lang.StringBuilder)", "org.jsoup.nodes.Node.childNodesAsArray()", "org.jsoup.nodes.Attributes.put(org.jsoup.nodes.Attribute)", "org.jsoup.nodes.Node.ensureChildNodes()", "org.jsoup.nodes.Node.attr(java.lang.String,java.lang.String)", "org.jsoup.nodes.DataNode.setWholeData(java.lang.String)", "org.jsoup.nodes.TextNode.ensureAttributes()", "org.jsoup.nodes.Node.setBaseUri(java.lang.String).1.head(org.jsoup.nodes.Node,int)", "org.jsoup.nodes.Element.baseUri()", "org.jsoup.nodes.Node.reindexChildren(int)", "org.jsoup.nodes.Element.doClone(org.jsoup.nodes.Node)", "org.jsoup.safety.Cleaner.CleaningVisitor.head(org.jsoup.nodes.Node,int)", "org.jsoup.nodes.Node.childNodes()", "org.jsoup.nodes.Element.appendChild(org.jsoup.nodes.Node)", "org.jsoup.nodes.TextNode.createFromEncoded(java.lang.String)", "org.jsoup.parser.HtmlTreeBuilder.insert(org.jsoup.parser.Token$Character)", "org.jsoup.nodes.TextNode.outerHtmlHead(java.lang.Appendable,int,org.jsoup.nodes.Document$OutputSettings)", "org.jsoup.nodes.DocumentType.outerHtmlHead(java.lang.Appendable,int,org.jsoup.nodes.Document$OutputSettings)", "org.jsoup.nodes.TextNode.attr(java.lang.String)", "org.jsoup.nodes.XmlDeclaration.outerHtmlHead(java.lang.Appendable,int,org.jsoup.nodes.Document$OutputSettings)", "org.jsoup.nodes.TextNode.getWholeText()", "org.jsoup.nodes.Node.unwrap()", "org.jsoup.nodes.Node.removeAttr(java.lang.String)", "org.jsoup.nodes.Node.absUrl(java.lang.String)", "org.jsoup.nodes.Node.doClone(org.jsoup.nodes.Node)", "org.jsoup.parser.XmlTreeBuilder.insert(org.jsoup.parser.Token$Comment)", "org.jsoup.nodes.Element"]}, {"title": "Jsoup incorrectly parsing head tags", "body": "With JSoup 1.11.2, when I try to parse the below HTML I get zero elements.\r\n\r\nKotlin Code:\r\n```\r\nval contents = .....\r\nval doc = Jsoup.Parse(fileContents)\r\n\r\n// the count incorrectly returns zero elements \r\ndoc.head().children().count()\r\n```\r\n\r\nsample doc \r\n```\r\n\ufeff<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\r\n<html xml:lang=\"en\" lang=\"en\" xmlns=\"http://www.w3.org/1999/xhtml\">\r\n\t<head>\r\n\t\t<meta http-equiv=\"Content-type\" content=\"text/html; charset=utf-8\"/>\r\n\t\t<title>Brave New Brain</title>\r\n\t\t<meta name=\"dc:title\" content=\"Brave New Brain\"/>\r\n\t\t<meta name=\"dc:creator\" content=\"Nancy C Andreasen MD, PhD\"/>\r\n\t\t<meta name=\"dc:date\" content=\"2011-06-08\" scheme=\"yyyy-mm-dd\"/>\r\n\t\t<meta name=\"dc:identifier\" content=\"UK-RNIB-42EB0C78-6AF3-4573-A92C-E28CD6446127\"/>\r\n\t\t<meta name=\"dc:language\" content=\"en-GB\" scheme=\"ISO 639\"/>\r\n\t\t<meta name=\"dc:publisher\" content=\"RNIB TCSW\"/>\r\n\t\t<meta name=\"dc:source\" content=\"978 0 19 5167283\" scheme=\"ISBN\"/>\r\n\t\t<meta name=\"dc:subject\" content=\"Biology\" scheme=\"keyword\"/>\r\n\t\t<meta name=\"ncc:narrator\" content=\"volunteer\"/>\r\n\t\t<meta name=\"ncc:sourceDate\" content=\"2001\" scheme=\"yyyy\"/>\r\n\t\t<meta name=\"ncc:sourceEdition\" content=\"first\"/>\r\n\t\t<meta name=\"ncc:sourcePublisher\" content=\"OUP\"/>\r\n\t\t<meta name=\"prod:prevGenerator\" content=\"LpStudioGen 1.6\"/>\r\n\t\t<meta name=\"ncc:revision\" content=\"1\"/>\r\n\t\t<meta name=\"ncc:revisionDate\" content=\"2013-02-14\"/>\r\n\t\t<meta name=\"dc:format\" content=\"Daisy 2.02\"/>\r\n\t\t<meta name=\"ncc:generator\" content=\"Regenerator 1.0.28\"/>\r\n\t\t<meta name=\"ncc:tocItems\" content=\"537\"/>\r\n\t\t<meta name=\"ncc:pageNormal\" content=\"344\"/>\r\n\t\t<meta name=\"ncc:pageFront\" content=\"0\"/>\r\n\t\t<meta name=\"ncc:pageSpecial\" content=\"0\"/>\r\n\t\t<meta name=\"ncc:sidebars\" content=\"0\"/>\r\n\t\t<meta name=\"ncc:prodnotes\" content=\"0\"/>\r\n\t\t<meta name=\"ncc:footnotes\" content=\"0\"/>\r\n\t\t<meta name=\"ncc:depth\" content=\"3\"/>\r\n\t\t<meta name=\"ncc:maxPageNormal\" content=\"344\"/>\r\n\t\t<meta name=\"ncc:charset\" content=\"utf-8\"/>\r\n\t\t<meta name=\"ncc:multimediaType\" content=\"audioNcc\"/>\r\n\t\t<meta name=\"ncc:setInfo\" content=\"1 of 1\"/>\r\n\t\t<meta name=\"ncc:totalTime\" content=\"21:18:07\"/>\r\n\t\t<meta name=\"ncc:files\" content=\"389\"/>\r\n\t\t<meta name=\"ncc:kByteSize\" content=\"525038\"/>\r\n\t\t<meta name=\"prod:RNIBtbNumber\" content=\"404864\"/>\r\n\t</head>\r\n\t<body>\r\n\t\t<h1 class=\"title\" id=\"rgn_ncc_0001\"><a href=\"dtb_0001.smil#rgn_txt_0001_0001\">Brave New Brain by Nancy C. Andreasen, M.D., Ph.D.</a></h1>\r\n\t\t<h1 id=\"rgn_ncc_0002\"><a href=\"dtb_0002.smil#rgn_txt_0002_0001\">Navigational Information</a></h1>\r\n\t\t<h1 id=\"rgn_ncc_0003\"><a href=\"dtb_0003.smil#rgn_txt_0003_0001\">Copyright announcement</a></h1>\r\n\t\t<h1 id=\"rgn_ncc_0004\"><a href=\"dtb_0004.smil#rgn_txt_0004_0001\">Full title page</a></h1>\r\n\t\t<h1 id=\"rgn_ncc_0005\"><a href=\"dtb_0005.smil#rgn_txt_0005_0001\">Contents</a></h1>\r\n\t\t<h1 id=\"rgn_ncc_0006\"><a href=\"dtb_0006.smil#rgn_txt_0006_0001\">Extraneous material</a></h1>\r\n\t\t<h2 id=\"rgn_ncc_0007\"><a href=\"dtb_0007.smil#rgn_txt_0007_0001\">Publishers blurb</a></h2>\r\n\t\t<h2 id=\"rgn_ncc_0008\"><a href=\"dtb_0008.smil#rgn_txt_0008_0001\">About the author</a></h2>\r\n\t\t<h2 id=\"rgn_ncc_0009\"><a href=\"dtb_0009.smil#rgn_txt_0009_0001\">Dedication</a></h2>\r\n\t\t<h2 id=\"rgn_ncc_0010\"><a href=\"dtb_0010.smil#rgn_txt_0010_0001\">Preface</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0011\"><a href=\"dtb_0010.smil#rgn_txt_0010_0002\">1</a></span>\r\n\t\t<h1 id=\"rgn_ncc_0012\"><a href=\"dtb_0011.smil#rgn_txt_0011_0001\">Part 1. Broken Brains and Troubled Minds</a></h1>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0013\"><a href=\"dtb_0011.smil#rgn_txt_0011_0002\">2</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0014\"><a href=\"dtb_0011.smil#rgn_txt_0011_0003\">3</a></span>\r\n\t\t<h1 id=\"rgn_ncc_0015\"><a href=\"dtb_0012.smil#rgn_txt_0012_0001\">Chapter 1. Brave New Brain: Confronting the Burden of Mental Illness</a></h1>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0016\"><a href=\"dtb_0012.smil#rgn_txt_0012_0002\">4</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0017\"><a href=\"dtb_0012.smil#rgn_txt_0012_0003\">5</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0018\"><a href=\"dtb_0012.smil#rgn_txt_0012_0004\">6</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0019\"><a href=\"dtb_0012.smil#rgn_txt_0012_0005\">7</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0020\"><a href=\"dtb_0012.smil#rgn_txt_0012_0006\">8</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0021\"><a href=\"dtb_0012.smil#rgn_txt_0012_0007\">9</a></span>\r\n\t\t<h1 id=\"rgn_ncc_0022\"><a href=\"dtb_0013.smil#rgn_txt_0013_0001\">Chapter 2. A Waking Nightmare: Mental Illness and Ordinary People</a></h1>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0023\"><a href=\"dtb_0013.smil#rgn_txt_0013_0002\">10</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0024\"><a href=\"dtb_0013.smil#rgn_txt_0013_0003\">11</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0025\"><a href=\"dtb_0013.smil#rgn_txt_0013_0004\">12</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0026\"><a href=\"dtb_0013.smil#rgn_txt_0013_0005\">13</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0027\"><a href=\"dtb_0013.smil#rgn_txt_0013_0006\">14</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0028\"><a href=\"dtb_0013.smil#rgn_txt_0013_0007\">15</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0029\"><a href=\"dtb_0013.smil#rgn_txt_0013_0008\">16</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0030\"><a href=\"dtb_0013.smil#rgn_txt_0013_0009\">17</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0031\"><a href=\"dtb_0013.smil#rgn_txt_0013_0010\">18</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0032\"><a href=\"dtb_0013.smil#rgn_txt_0013_0011\">19</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0033\"><a href=\"dtb_0013.smil#rgn_txt_0013_0012\">20</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0034\"><a href=\"dtb_0013.smil#rgn_txt_0013_0013\">21</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0035\"><a href=\"dtb_0013.smil#rgn_txt_0013_0014\">22</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0036\"><a href=\"dtb_0013.smil#rgn_txt_0013_0015\">23</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0037\"><a href=\"dtb_0013.smil#rgn_txt_0013_0016\">24</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0038\"><a href=\"dtb_0013.smil#rgn_txt_0013_0017\">25</a></span>\r\n\t\t<h1 id=\"rgn_ncc_0039\"><a href=\"dtb_0014.smil#rgn_txt_0014_0001\">Chapter 3. Broken Brains, Troubled Minds: Being Blinded by False Dichotomies</a></h1>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0040\"><a href=\"dtb_0014.smil#rgn_txt_0014_0002\">26</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0041\"><a href=\"dtb_0015.smil#rgn_txt_0015_0001\">Mind versus Brain</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0042\"><a href=\"dtb_0015.smil#rgn_txt_0015_0002\">27</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0043\"><a href=\"dtb_0015.smil#rgn_txt_0015_0003\">28</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0044\"><a href=\"dtb_0015.smil#rgn_txt_0015_0004\">29</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0045\"><a href=\"dtb_0016.smil#rgn_txt_0016_0001\">Drugs versus Psychotherapy</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0046\"><a href=\"dtb_0016.smil#rgn_txt_0016_0002\">30</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0047\"><a href=\"dtb_0016.smil#rgn_txt_0016_0003\">31</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0048\"><a href=\"dtb_0016.smil#rgn_txt_0016_0004\">32</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0049\"><a href=\"dtb_0017.smil#rgn_txt_0017_0001\">Genes versus Environment</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0050\"><a href=\"dtb_0017.smil#rgn_txt_0017_0002\">33</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0051\"><a href=\"dtb_0017.smil#rgn_txt_0017_0003\">34</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0052\"><a href=\"dtb_0017.smil#rgn_txt_0017_0004\">35</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0053\"><a href=\"dtb_0018.smil#rgn_txt_0018_0001\">Understanding Mental Illness Using a Synthetic Model</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0054\"><a href=\"dtb_0018.smil#rgn_txt_0018_0002\">36</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0055\"><a href=\"dtb_0018.smil#rgn_txt_0018_0003\">37</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0056\"><a href=\"dtb_0018.smil#rgn_txt_0018_0004\">38</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0057\"><a href=\"dtb_0018.smil#rgn_txt_0018_0005\">39</a></span>\r\n\t\t<h1 id=\"rgn_ncc_0058\"><a href=\"dtb_0019.smil#rgn_txt_0019_0001\">Part II. Mind Meets Molecule</a></h1>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0059\"><a href=\"dtb_0019.smil#rgn_txt_0019_0002\">40</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0060\"><a href=\"dtb_0019.smil#rgn_txt_0019_0003\">41</a></span>\r\n\t\t<h1 id=\"rgn_ncc_0061\"><a href=\"dtb_0020.smil#rgn_txt_0020_0001\">Chapter 4. The Brain: The Mind's Dynamic Orchestra</a></h1>\r\n\t\t<h2 id=\"rgn_ncc_0062\"><a href=\"dtb_0021.smil#rgn_txt_0021_0001\">Basics about the Brain</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0063\"><a href=\"dtb_0021.smil#rgn_txt_0021_0002\">42</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0064\"><a href=\"dtb_0021.smil#rgn_txt_0021_0003\">43</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0065\"><a href=\"dtb_0021.smil#rgn_txt_0021_0004\">44</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0066\"><a href=\"dtb_0021.smil#rgn_txt_0021_0005\">45</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0067\"><a href=\"dtb_0022.smil#rgn_txt_0022_0001\">How the Brain Grows: A Miraculous Process</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0068\"><a href=\"dtb_0022.smil#rgn_txt_0022_0002\">46</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0069\"><a href=\"dtb_0022.smil#rgn_txt_0022_0003\">47</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0070\"><a href=\"dtb_0023.smil#rgn_txt_0023_0001\">How the Brain Teaches Itself to Learn: \"Brain Plasticity\"</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0071\"><a href=\"dtb_0023.smil#rgn_txt_0023_0002\">48</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0072\"><a href=\"dtb_0023.smil#rgn_txt_0023_0003\">49</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0073\"><a href=\"dtb_0023.smil#rgn_txt_0023_0004\">50</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0074\"><a href=\"dtb_0023.smil#rgn_txt_0023_0005\">51</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0075\"><a href=\"dtb_0024.smil#rgn_txt_0024_0001\">Neuroatonomy for Literati: Cortical and Subcortical Regions</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0076\"><a href=\"dtb_0024.smil#rgn_txt_0024_0002\">52</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0077\"><a href=\"dtb_0024.smil#rgn_txt_0024_0003\">53</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0078\"><a href=\"dtb_0024.smil#rgn_txt_0024_0004\">54</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0079\"><a href=\"dtb_0024.smil#rgn_txt_0024_0005\">55</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0080\"><a href=\"dtb_0024.smil#rgn_txt_0024_0006\">56</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0081\"><a href=\"dtb_0025.smil#rgn_txt_0025_0001\">The Map of the Mind: The Unity of Form and Function</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0082\"><a href=\"dtb_0025.smil#rgn_txt_0025_0002\">57</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0083\"><a href=\"dtb_0026.smil#rgn_txt_0026_0001\">The Language System: Our Link to One-Another</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0084\"><a href=\"dtb_0026.smil#rgn_txt_0026_0002\">58</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0085\"><a href=\"dtb_0026.smil#rgn_txt_0026_0003\">59</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0086\"><a href=\"dtb_0026.smil#rgn_txt_0026_0004\">60</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0087\"><a href=\"dtb_0027.smil#rgn_txt_0027_0001\">The Memory System: Remembering the Future</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0088\"><a href=\"dtb_0027.smil#rgn_txt_0027_0002\">61</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0089\"><a href=\"dtb_0027.smil#rgn_txt_0027_0003\">62</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0090\"><a href=\"dtb_0027.smil#rgn_txt_0027_0004\">63</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0091\"><a href=\"dtb_0027.smil#rgn_txt_0027_0005\">64</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0092\"><a href=\"dtb_0027.smil#rgn_txt_0027_0006\">65</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0093\"><a href=\"dtb_0028.smil#rgn_txt_0028_0001\">The Attention System: The Spotlight in the Brain</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0094\"><a href=\"dtb_0028.smil#rgn_txt_0028_0002\">66</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0095\"><a href=\"dtb_0028.smil#rgn_txt_0028_0003\">67</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0096\"><a href=\"dtb_0029.smil#rgn_txt_0029_0001\">The Thalamic Filter: How the \"Marriage Bed\" Helps Us Set Priorities</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0097\"><a href=\"dtb_0029.smil#rgn_txt_0029_0002\">68</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0098\"><a href=\"dtb_0030.smil#rgn_txt_0030_0001\">The Prefrontal System and \"Executive Functions:\" Or Moral Monitor</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0099\"><a href=\"dtb_0030.smil#rgn_txt_0030_0002\">69</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0100\"><a href=\"dtb_0030.smil#rgn_txt_0030_0003\">70</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0101\"><a href=\"dtb_0031.smil#rgn_txt_0031_0001\">The Limbic System: Where the Wild Things Are</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0102\"><a href=\"dtb_0031.smil#rgn_txt_0031_0002\">71</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0103\"><a href=\"dtb_0032.smil#rgn_txt_0032_0001\">The cerebellum and mental coordination: walking and chewing gum at the same time</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0104\"><a href=\"dtb_0032.smil#rgn_txt_0032_0002\">72</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0105\"><a href=\"dtb_0032.smil#rgn_txt_0032_0003\">73</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0106\"><a href=\"dtb_0033.smil#rgn_txt_0033_0001\">The basal ganglia: getting tied up by \"lower nerve knots\"</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0107\"><a href=\"dtb_0033.smil#rgn_txt_0033_0002\">74</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0108\"><a href=\"dtb_0034.smil#rgn_txt_0034_0001\">Consciousness: The Last Frontier</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0109\"><a href=\"dtb_0034.smil#rgn_txt_0034_0002\">75</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0110\"><a href=\"dtb_0035.smil#rgn_txt_0035_0001\">How Nerve Cells Talk to Each Other: The Chemical Messengers of the Brain</a></h2>\r\n\t\t<h3 id=\"rgn_ncc_0111\"><a href=\"dtb_0036.smil#rgn_txt_0036_0001\">Neurons, Synapses, Receptors, and Second Messengers</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0112\"><a href=\"dtb_0036.smil#rgn_txt_0036_0002\">76</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0113\"><a href=\"dtb_0036.smil#rgn_txt_0036_0003\">77</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0114\"><a href=\"dtb_0036.smil#rgn_txt_0036_0004\">78</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0115\"><a href=\"dtb_0036.smil#rgn_txt_0036_0005\">79</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0116\"><a href=\"dtb_0037.smil#rgn_txt_0037_0001\">The Dopamine System</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0117\"><a href=\"dtb_0037.smil#rgn_txt_0037_0002\">80</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0118\"><a href=\"dtb_0037.smil#rgn_txt_0037_0003\">81</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0119\"><a href=\"dtb_0038.smil#rgn_txt_0038_0001\">The Norepinephrine System</a></h3>\r\n\t\t<h3 id=\"rgn_ncc_0120\"><a href=\"dtb_0039.smil#rgn_txt_0039_0001\">The Seratonin System</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0121\"><a href=\"dtb_0039.smil#rgn_txt_0039_0002\">82</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0122\"><a href=\"dtb_0040.smil#rgn_txt_0040_0001\">The Cholinergic System</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0123\"><a href=\"dtb_0040.smil#rgn_txt_0040_0002\">83</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0124\"><a href=\"dtb_0041.smil#rgn_txt_0041_0001\">The GABA System</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0125\"><a href=\"dtb_0041.smil#rgn_txt_0041_0002\">84</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0126\"><a href=\"dtb_0042.smil#rgn_txt_0042_0001\">The Glutamate System</a></h3>\r\n\t\t<h2 id=\"rgn_ncc_0127\"><a href=\"dtb_0043.smil#rgn_txt_0043_0001\">The Distributed Circuits of the Brain: The Whole is Greater Than the Sum of Its Parts</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0128\"><a href=\"dtb_0043.smil#rgn_txt_0043_0002\">85</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0129\"><a href=\"dtb_0043.smil#rgn_txt_0043_0003\">86</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0130\"><a href=\"dtb_0043.smil#rgn_txt_0043_0004\">87</a></span>\r\n\t\t<h1 id=\"rgn_ncc_0131\"><a href=\"dtb_0044.smil#rgn_txt_0044_0001\">Chapter 5. Mapping the Genome: The Blueprint of Life \u2026 and Death</a></h1>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0132\"><a href=\"dtb_0044.smil#rgn_txt_0044_0002\">88</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0133\"><a href=\"dtb_0044.smil#rgn_txt_0044_0003\">89</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0134\"><a href=\"dtb_0045.smil#rgn_txt_0045_0001\">Beginning with the Basics: Birds, Bees, and Peas</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0135\"><a href=\"dtb_0045.smil#rgn_txt_0045_0002\">90</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0136\"><a href=\"dtb_0045.smil#rgn_txt_0045_0003\">91</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0137\"><a href=\"dtb_0045.smil#rgn_txt_0045_0004\">92</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0138\"><a href=\"dtb_0046.smil#rgn_txt_0046_0001\">Applying Mendel's Observations to Understand Human Traits and Diseases</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0139\"><a href=\"dtb_0046.smil#rgn_txt_0046_0002\">93</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0140\"><a href=\"dtb_0046.smil#rgn_txt_0046_0003\">94</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0141\"><a href=\"dtb_0047.smil#rgn_txt_0047_0001\">Recessive Diseases</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0142\"><a href=\"dtb_0047.smil#rgn_txt_0047_0002\">95</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0143\"><a href=\"dtb_0047.smil#rgn_txt_0047_0003\">96</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0144\"><a href=\"dtb_0047.smil#rgn_txt_0047_0004\">97</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0145\"><a href=\"dtb_0047.smil#rgn_txt_0047_0005\">98</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0146\"><a href=\"dtb_0048.smil#rgn_txt_0048_0001\">Dominant Diseases</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0147\"><a href=\"dtb_0048.smil#rgn_txt_0048_0002\">99</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0148\"><a href=\"dtb_0048.smil#rgn_txt_0048_0003\">100</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0149\"><a href=\"dtb_0049.smil#rgn_txt_0049_0001\">One Hundred Years After Mendel: The Double Helix and Central Dogma</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0150\"><a href=\"dtb_0049.smil#rgn_txt_0049_0002\">101</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0151\"><a href=\"dtb_0050.smil#rgn_txt_0050_0001\">What Exactly is a Gene?</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0152\"><a href=\"dtb_0050.smil#rgn_txt_0050_0002\">102</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0153\"><a href=\"dtb_0050.smil#rgn_txt_0050_0003\">103</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0154\"><a href=\"dtb_0051.smil#rgn_txt_0051_0001\">How Do Genes Work?</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0155\"><a href=\"dtb_0051.smil#rgn_txt_0051_0002\">104</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0156\"><a href=\"dtb_0051.smil#rgn_txt_0051_0003\">105</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0157\"><a href=\"dtb_0052.smil#rgn_txt_0052_0001\">The Heart of the Mystery: Regulation of Gene Expression</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0158\"><a href=\"dtb_0052.smil#rgn_txt_0052_0002\">106</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0159\"><a href=\"dtb_0052.smil#rgn_txt_0052_0003\">107</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0160\"><a href=\"dtb_0053.smil#rgn_txt_0053_0001\">\"Wild Types\" and Mutations</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0161\"><a href=\"dtb_0053.smil#rgn_txt_0053_0002\">108</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0162\"><a href=\"dtb_0054.smil#rgn_txt_0054_0001\">\"Wild types\" Are Pretty Dull</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0163\"><a href=\"dtb_0054.smil#rgn_txt_0054_0002\">109</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0164\"><a href=\"dtb_0055.smil#rgn_txt_0055_0001\">What Are Mutations?</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0165\"><a href=\"dtb_0055.smil#rgn_txt_0055_0002\">110</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0166\"><a href=\"dtb_0055.smil#rgn_txt_0055_0003\">111</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0167\"><a href=\"dtb_0055.smil#rgn_txt_0055_0004\">112</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0168\"><a href=\"dtb_0056.smil#rgn_txt_0056_0001\">Searching for Disease Genes</a></h2>\r\n\t\t<h3 id=\"rgn_ncc_0169\"><a href=\"dtb_0057.smil#rgn_txt_0057_0001\">The Genetics of Complex Illnesses</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0170\"><a href=\"dtb_0057.smil#rgn_txt_0057_0002\">113</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0171\"><a href=\"dtb_0057.smil#rgn_txt_0057_0003\">114</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0172\"><a href=\"dtb_0058.smil#rgn_txt_0058_0001\">Two More Complications: Penetrance and Expressivity</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0173\"><a href=\"dtb_0058.smil#rgn_txt_0058_0002\">115</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0174\"><a href=\"dtb_0059.smil#rgn_txt_0059_0001\">The Fivefold Path to Understanding Genes</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0175\"><a href=\"dtb_0059.smil#rgn_txt_0059_0002\">116</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0176\"><a href=\"dtb_0059.smil#rgn_txt_0059_0003\">117</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0177\"><a href=\"dtb_0060.smil#rgn_txt_0060_0001\">Methods for Locating and Understanding Genes</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0178\"><a href=\"dtb_0060.smil#rgn_txt_0060_0002\">118</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0179\"><a href=\"dtb_0061.smil#rgn_txt_0061_0001\">Linkage Studies</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0180\"><a href=\"dtb_0061.smil#rgn_txt_0061_0002\">119</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0181\"><a href=\"dtb_0062.smil#rgn_txt_0062_0001\">Candidate Genes and Association Studies</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0182\"><a href=\"dtb_0062.smil#rgn_txt_0062_0002\">120</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0183\"><a href=\"dtb_0062.smil#rgn_txt_0062_0003\">121</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0184\"><a href=\"dtb_0063.smil#rgn_txt_0063_0001\">Genome Scans</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0185\"><a href=\"dtb_0063.smil#rgn_txt_0063_0002\">122</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0186\"><a href=\"dtb_0064.smil#rgn_txt_0064_0001\">\"Snips\" and \"Chips\"</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0187\"><a href=\"dtb_0064.smil#rgn_txt_0064_0002\">123</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0188\"><a href=\"dtb_0065.smil#rgn_txt_0065_0001\">Of Mice and Men</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0189\"><a href=\"dtb_0065.smil#rgn_txt_0065_0002\">124</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0190\"><a href=\"dtb_0066.smil#rgn_txt_0066_0001\">The Problem of Phenotypes</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0191\"><a href=\"dtb_0066.smil#rgn_txt_0066_0002\">125</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0192\"><a href=\"dtb_0066.smil#rgn_txt_0066_0003\">126</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0193\"><a href=\"dtb_0066.smil#rgn_txt_0066_0004\">127</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0194\"><a href=\"dtb_0066.smil#rgn_txt_0066_0005\">128</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0195\"><a href=\"dtb_0066.smil#rgn_txt_0066_0006\">129</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0196\"><a href=\"dtb_0067.smil#rgn_txt_0067_0001\">Learning to Use the Blueprint of Life \u2026 and Death</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0197\"><a href=\"dtb_0067.smil#rgn_txt_0067_0002\">130</a></span>\r\n\t\t<h1 id=\"rgn_ncc_0198\"><a href=\"dtb_0068.smil#rgn_txt_0068_0001\">Chapter 6. Mapping The Mind: Using Neuroimaging to Observe How the Brain Thinks</a></h1>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0199\"><a href=\"dtb_0068.smil#rgn_txt_0068_0002\">131</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0200\"><a href=\"dtb_0068.smil#rgn_txt_0068_0003\">132</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0201\"><a href=\"dtb_0068.smil#rgn_txt_0068_0004\">133</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0202\"><a href=\"dtb_0069.smil#rgn_txt_0069_0001\">Tools to See The living Brain</a></h2>\r\n\t\t<h3 id=\"rgn_ncc_0203\"><a href=\"dtb_0070.smil#rgn_txt_0070_0001\">Mapping and Measuring Brain Anatomy: Structural Techniques</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0204\"><a href=\"dtb_0070.smil#rgn_txt_0070_0002\">134</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0205\"><a href=\"dtb_0070.smil#rgn_txt_0070_0003\">135</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0206\"><a href=\"dtb_0071.smil#rgn_txt_0071_0001\">Mapping and Measuring the Mind: Functional Techniques</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0207\"><a href=\"dtb_0071.smil#rgn_txt_0071_0002\">136</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0208\"><a href=\"dtb_0071.smil#rgn_txt_0071_0003\">137</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0209\"><a href=\"dtb_0072.smil#rgn_txt_0072_0001\">Using MR Technology: What are We Learning?</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0210\"><a href=\"dtb_0072.smil#rgn_txt_0072_0002\">138</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0211\"><a href=\"dtb_0072.smil#rgn_txt_0072_0003\">139</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0212\"><a href=\"dtb_0072.smil#rgn_txt_0072_0004\">140</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0213\"><a href=\"dtb_0072.smil#rgn_txt_0072_0005\">141</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0214\"><a href=\"dtb_0072.smil#rgn_txt_0072_0006\">142</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0215\"><a href=\"dtb_0072.smil#rgn_txt_0072_0007\">143</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0216\"><a href=\"dtb_0072.smil#rgn_txt_0072_0008\">144</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0217\"><a href=\"dtb_0072.smil#rgn_txt_0072_0009\">145</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0218\"><a href=\"dtb_0073.smil#rgn_txt_0073_0001\">Using Magnetic Resonance to Measure Brain Function and Chemistry</a></h2>\r\n\t\t<h3 id=\"rgn_ncc_0219\"><a href=\"dtb_0074.smil#rgn_txt_0074_0001\">Functional magnetic resonance</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0220\"><a href=\"dtb_0074.smil#rgn_txt_0074_0002\">146</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0221\"><a href=\"dtb_0074.smil#rgn_txt_0074_0003\">147</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0222\"><a href=\"dtb_0074.smil#rgn_txt_0074_0004\">148</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0223\"><a href=\"dtb_0075.smil#rgn_txt_0075_0001\">Magnetic Resonance Spectroscopy (MRS)</a></h3>\r\n\t\t<h2 id=\"rgn_ncc_0224\"><a href=\"dtb_0076.smil#rgn_txt_0076_0001\">Using Functional Imaging to Visualize and Measure Thoughts and Emotions</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0225\"><a href=\"dtb_0076.smil#rgn_txt_0076_0002\">149</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0226\"><a href=\"dtb_0076.smil#rgn_txt_0076_0003\">150</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0227\"><a href=\"dtb_0076.smil#rgn_txt_0076_0004\">151</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0228\"><a href=\"dtb_0076.smil#rgn_txt_0076_0005\">152</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0229\"><a href=\"dtb_0076.smil#rgn_txt_0076_0006\">153</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0230\"><a href=\"dtb_0076.smil#rgn_txt_0076_0007\">154</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0231\"><a href=\"dtb_0076.smil#rgn_txt_0076_0008\">155</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0232\"><a href=\"dtb_0077.smil#rgn_txt_0077_0001\">Using PET and SPECT to Monitor Treatment</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0233\"><a href=\"dtb_0077.smil#rgn_txt_0077_0002\">156</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0234\"><a href=\"dtb_0077.smil#rgn_txt_0077_0003\">157</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0235\"><a href=\"dtb_0077.smil#rgn_txt_0077_0004\">158</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0236\"><a href=\"dtb_0078.smil#rgn_txt_0078_0001\">Tools for Research or Diagnosis?</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0237\"><a href=\"dtb_0078.smil#rgn_txt_0078_0002\">159</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0238\"><a href=\"dtb_0078.smil#rgn_txt_0078_0003\">160</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0239\"><a href=\"dtb_0078.smil#rgn_txt_0078_0004\">161</a></span>\r\n\t\t<h1 id=\"rgn_ncc_0240\"><a href=\"dtb_0079.smil#rgn_txt_0079_0001\">Part III. The Burden of Mental Illness</a></h1>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0241\"><a href=\"dtb_0079.smil#rgn_txt_0079_0002\">162</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0242\"><a href=\"dtb_0079.smil#rgn_txt_0079_0003\">163</a></span>\r\n\t\t<h1 id=\"rgn_ncc_0243\"><a href=\"dtb_0080.smil#rgn_txt_0080_0001\">Chapter 7. Understanding What Mental Illnesses Are: The Past Is Prologue to Progress</a></h1>\r\n\t\t<h2 id=\"rgn_ncc_0244\"><a href=\"dtb_0081.smil#rgn_txt_0081_0001\">How Did Misunderstanding and Stigmatization of Mental Illness Arise?</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0245\"><a href=\"dtb_0081.smil#rgn_txt_0081_0002\">164</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0246\"><a href=\"dtb_0081.smil#rgn_txt_0081_0003\">165</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0247\"><a href=\"dtb_0081.smil#rgn_txt_0081_0004\">166</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0248\"><a href=\"dtb_0082.smil#rgn_txt_0082_0001\">How Did We Discover Specific Types of Mental Illnesses?</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0249\"><a href=\"dtb_0082.smil#rgn_txt_0082_0002\">167</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0250\"><a href=\"dtb_0082.smil#rgn_txt_0082_0003\">168</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0251\"><a href=\"dtb_0082.smil#rgn_txt_0082_0004\">169</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0252\"><a href=\"dtb_0082.smil#rgn_txt_0082_0005\">170</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0253\"><a href=\"dtb_0082.smil#rgn_txt_0082_0006\">171</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0254\"><a href=\"dtb_0082.smil#rgn_txt_0082_0007\">172</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0255\"><a href=\"dtb_0083.smil#rgn_txt_0083_0001\">Four Stages in the Progress of Understanding Mental Illness</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0256\"><a href=\"dtb_0083.smil#rgn_txt_0083_0002\">173</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0257\"><a href=\"dtb_0083.smil#rgn_txt_0083_0003\">174</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0258\"><a href=\"dtb_0084.smil#rgn_txt_0084_0001\">Mental Illness as Syndromes: Does This Make Them Myths?</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0259\"><a href=\"dtb_0084.smil#rgn_txt_0084_0002\">175</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0260\"><a href=\"dtb_0084.smil#rgn_txt_0084_0003\">176</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0261\"><a href=\"dtb_0085.smil#rgn_txt_0085_0001\">The Diagnostic and Statistical Manual (DSM): How Syndromal Definitions Are Created</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0262\"><a href=\"dtb_0085.smil#rgn_txt_0085_0002\">177</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0263\"><a href=\"dtb_0086.smil#rgn_txt_0086_0001\">DSM I \u2013 Schizophrenic Reactions</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0264\"><a href=\"dtb_0086.smil#rgn_txt_0086_0002\">178</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0265\"><a href=\"dtb_0087.smil#rgn_txt_0087_0001\">DSM II \u2013 Schizophrenia</a></h3>\r\n\t\t<h3 id=\"rgn_ncc_0266\"><a href=\"dtb_0088.smil#rgn_txt_0088_0001\">DSM III \u2013 Diagnostic Criteria for a Schizophrenic Disorder</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0267\"><a href=\"dtb_0088.smil#rgn_txt_0088_0002\">179</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0268\"><a href=\"dtb_0089.smil#rgn_txt_0089_0001\">DSM IV \u2013 Diagnostic Criteria for Schizophrenia</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0269\"><a href=\"dtb_0089.smil#rgn_txt_0089_0002\">180</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0270\"><a href=\"dtb_0089.smil#rgn_txt_0089_0003\">181</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0271\"><a href=\"dtb_0089.smil#rgn_txt_0089_0004\">182</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0272\"><a href=\"dtb_0090.smil#rgn_txt_0090_0001\">The \"Downside\" of Diagnostic Criteria</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0273\"><a href=\"dtb_0090.smil#rgn_txt_0090_0002\">183</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0274\"><a href=\"dtb_0090.smil#rgn_txt_0090_0003\">184</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0275\"><a href=\"dtb_0091.smil#rgn_txt_0091_0001\">A Prologue to Progress</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0276\"><a href=\"dtb_0091.smil#rgn_txt_0091_0002\">185</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0277\"><a href=\"dtb_0091.smil#rgn_txt_0091_0003\">186</a></span>\r\n\t\t<h1 id=\"rgn_ncc_0278\"><a href=\"dtb_0092.smil#rgn_txt_0092_0001\">Chapter 8. Schizophrenia: A Mind Divided</a></h1>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0279\"><a href=\"dtb_0092.smil#rgn_txt_0092_0002\">187</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0280\"><a href=\"dtb_0092.smil#rgn_txt_0092_0003\">188</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0281\"><a href=\"dtb_0092.smil#rgn_txt_0092_0004\">189</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0282\"><a href=\"dtb_0092.smil#rgn_txt_0092_0005\">190</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0283\"><a href=\"dtb_0092.smil#rgn_txt_0092_0006\">191</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0284\"><a href=\"dtb_0092.smil#rgn_txt_0092_0007\">192</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0285\"><a href=\"dtb_0092.smil#rgn_txt_0092_0008\">193</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0286\"><a href=\"dtb_0092.smil#rgn_txt_0092_0009\">194</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0287\"><a href=\"dtb_0093.smil#rgn_txt_0093_0001\">What is Schizophrenia?</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0288\"><a href=\"dtb_0093.smil#rgn_txt_0093_0002\">195</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0289\"><a href=\"dtb_0093.smil#rgn_txt_0093_0003\">196</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0290\"><a href=\"dtb_0093.smil#rgn_txt_0093_0004\">197</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0291\"><a href=\"dtb_0094.smil#rgn_txt_0094_0001\">What Causes Schizophrenia?</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0292\"><a href=\"dtb_0094.smil#rgn_txt_0094_0002\">198</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0293\"><a href=\"dtb_0095.smil#rgn_txt_0095_0001\">Genetic Influences</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0294\"><a href=\"dtb_0095.smil#rgn_txt_0095_0002\">199</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0295\"><a href=\"dtb_0095.smil#rgn_txt_0095_0003\">200</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0296\"><a href=\"dtb_0095.smil#rgn_txt_0095_0004\">201</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0297\"><a href=\"dtb_0096.smil#rgn_txt_0096_0001\">Neurodevelopmental Factors: Are People with Schizophrenia Doomed From The Womb?</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0298\"><a href=\"dtb_0096.smil#rgn_txt_0096_0002\">202</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0299\"><a href=\"dtb_0096.smil#rgn_txt_0096_0003\">203</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0300\"><a href=\"dtb_0096.smil#rgn_txt_0096_0004\">204</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0301\"><a href=\"dtb_0096.smil#rgn_txt_0096_0005\">205</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0302\"><a href=\"dtb_0096.smil#rgn_txt_0096_0006\">206</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0303\"><a href=\"dtb_0097.smil#rgn_txt_0097_0001\">Schizophrenia as a Disorder of Misconnections in the Brain</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0304\"><a href=\"dtb_0097.smil#rgn_txt_0097_0002\">207</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0305\"><a href=\"dtb_0097.smil#rgn_txt_0097_0003\">208</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0306\"><a href=\"dtb_0097.smil#rgn_txt_0097_0004\">209</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0307\"><a href=\"dtb_0098.smil#rgn_txt_0098_0001\">The Neurochemistry of Schizophrenia</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0308\"><a href=\"dtb_0098.smil#rgn_txt_0098_0002\">210</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0309\"><a href=\"dtb_0099.smil#rgn_txt_0099_0001\">What Treatments Are Available?</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0310\"><a href=\"dtb_0099.smil#rgn_txt_0099_0002\">211</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0311\"><a href=\"dtb_0100.smil#rgn_txt_0100_0001\">New Medications and False Hopes</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0312\"><a href=\"dtb_0100.smil#rgn_txt_0100_0002\">212</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0313\"><a href=\"dtb_0101.smil#rgn_txt_0101_0001\">The New Generation of Medications</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0314\"><a href=\"dtb_0101.smil#rgn_txt_0101_0002\">213</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0315\"><a href=\"dtb_0101.smil#rgn_txt_0101_0003\">214</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0316\"><a href=\"dtb_0102.smil#rgn_txt_0102_0001\">Cognitive and Psychosocial Rehabilitative Treatment</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0317\"><a href=\"dtb_0102.smil#rgn_txt_0102_0002\">215</a></span>\r\n\t\t<h1 id=\"rgn_ncc_0318\"><a href=\"dtb_0103.smil#rgn_txt_0103_0001\">Chapter 9 Mood disorders: Riding the emotional roller coaster</a></h1>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0319\"><a href=\"dtb_0103.smil#rgn_txt_0103_0002\">216</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0320\"><a href=\"dtb_0103.smil#rgn_txt_0103_0003\">217</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0321\"><a href=\"dtb_0103.smil#rgn_txt_0103_0004\">218</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0322\"><a href=\"dtb_0103.smil#rgn_txt_0103_0005\">219</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0323\"><a href=\"dtb_0103.smil#rgn_txt_0103_0006\">220</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0324\"><a href=\"dtb_0103.smil#rgn_txt_0103_0007\">221</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0325\"><a href=\"dtb_0103.smil#rgn_txt_0103_0008\">222</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0326\"><a href=\"dtb_0104.smil#rgn_txt_0104_0001\">What are the mood disorders?</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0327\"><a href=\"dtb_0104.smil#rgn_txt_0104_0002\">223</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0328\"><a href=\"dtb_0104.smil#rgn_txt_0104_0003\">224</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0329\"><a href=\"dtb_0104.smil#rgn_txt_0104_0004\">225</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0330\"><a href=\"dtb_0105.smil#rgn_txt_0105_0001\">The depressive episode</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0331\"><a href=\"dtb_0105.smil#rgn_txt_0105_0002\">226</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0332\"><a href=\"dtb_0105.smil#rgn_txt_0105_0003\">227</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0333\"><a href=\"dtb_0105.smil#rgn_txt_0105_0004\">228</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0334\"><a href=\"dtb_0105.smil#rgn_txt_0105_0005\">229</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0335\"><a href=\"dtb_0105.smil#rgn_txt_0105_0006\">230</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0336\"><a href=\"dtb_0106.smil#rgn_txt_0106_0001\">The manic episode</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0337\"><a href=\"dtb_0106.smil#rgn_txt_0106_0002\">231</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0338\"><a href=\"dtb_0106.smil#rgn_txt_0106_0003\">232</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0339\"><a href=\"dtb_0106.smil#rgn_txt_0106_0004\">233</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0340\"><a href=\"dtb_0106.smil#rgn_txt_0106_0005\">234</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0341\"><a href=\"dtb_0107.smil#rgn_txt_0107_0001\">What causes mood disorders?</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0342\"><a href=\"dtb_0107.smil#rgn_txt_0107_0002\">235</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0343\"><a href=\"dtb_0108.smil#rgn_txt_0108_0001\">The role of stress and personal loss</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0344\"><a href=\"dtb_0108.smil#rgn_txt_0108_0002\">236</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0345\"><a href=\"dtb_0108.smil#rgn_txt_0108_0003\">237</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0346\"><a href=\"dtb_0108.smil#rgn_txt_0108_0004\">238</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0347\"><a href=\"dtb_0108.smil#rgn_txt_0108_0005\">239</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0348\"><a href=\"dtb_0109.smil#rgn_txt_0109_0001\">Genetic factors</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0349\"><a href=\"dtb_0109.smil#rgn_txt_0109_0002\">240</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0350\"><a href=\"dtb_0109.smil#rgn_txt_0109_0003\">241</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0351\"><a href=\"dtb_0109.smil#rgn_txt_0109_0004\">242</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0352\"><a href=\"dtb_0110.smil#rgn_txt_0110_0001\">The neurochemistry of mood disorders</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0353\"><a href=\"dtb_0110.smil#rgn_txt_0110_0002\">243</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0354\"><a href=\"dtb_0110.smil#rgn_txt_0110_0003\">244</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0355\"><a href=\"dtb_0111.smil#rgn_txt_0111_0001\">Neural circuitry and mood disorders</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0356\"><a href=\"dtb_0111.smil#rgn_txt_0111_0002\">245</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0357\"><a href=\"dtb_0111.smil#rgn_txt_0111_0003\">246</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0358\"><a href=\"dtb_0112.smil#rgn_txt_0112_0001\">How are mood disorders treated?</a></h2>\r\n\t\t<h3 id=\"rgn_ncc_0359\"><a href=\"dtb_0113.smil#rgn_txt_0113_0001\">Mood stabilisers</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0360\"><a href=\"dtb_0113.smil#rgn_txt_0113_0002\">247</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0361\"><a href=\"dtb_0114.smil#rgn_txt_0114_0001\">Antidepressant medications</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0362\"><a href=\"dtb_0114.smil#rgn_txt_0114_0002\">248</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0363\"><a href=\"dtb_0114.smil#rgn_txt_0114_0003\">249</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0364\"><a href=\"dtb_0114.smil#rgn_txt_0114_0004\">250</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0365\"><a href=\"dtb_0115.smil#rgn_txt_0115_0001\">Electroconvulsive therapy (ECT)</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0366\"><a href=\"dtb_0115.smil#rgn_txt_0115_0002\">251</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0367\"><a href=\"dtb_0116.smil#rgn_txt_0116_0001\">Psychotherapy</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0368\"><a href=\"dtb_0116.smil#rgn_txt_0116_0002\">252</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0369\"><a href=\"dtb_0116.smil#rgn_txt_0116_0003\">253</a></span>\r\n\t\t<h1 id=\"rgn_ncc_0370\"><a href=\"dtb_0117.smil#rgn_txt_0117_0001\">Chapter 10 Dementias: Death in life</a></h1>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0371\"><a href=\"dtb_0117.smil#rgn_txt_0117_0002\">254</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0372\"><a href=\"dtb_0117.smil#rgn_txt_0117_0003\">255</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0373\"><a href=\"dtb_0117.smil#rgn_txt_0117_0004\">256</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0374\"><a href=\"dtb_0118.smil#rgn_txt_0118_0001\">What are the dementias?</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0375\"><a href=\"dtb_0118.smil#rgn_txt_0118_0002\">257</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0376\"><a href=\"dtb_0118.smil#rgn_txt_0118_0003\">258</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0377\"><a href=\"dtb_0118.smil#rgn_txt_0118_0004\">259</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0378\"><a href=\"dtb_0118.smil#rgn_txt_0118_0005\">260</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0379\"><a href=\"dtb_0118.smil#rgn_txt_0118_0006\">261</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0380\"><a href=\"dtb_0118.smil#rgn_txt_0118_0007\">262</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0381\"><a href=\"dtb_0118.smil#rgn_txt_0118_0008\">263</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0382\"><a href=\"dtb_0119.smil#rgn_txt_0119_0001\">The many faces of dementia</a></h2>\r\n\t\t<h3 id=\"rgn_ncc_0383\"><a href=\"dtb_0120.smil#rgn_txt_0120_0001\">Alzheimer's Disease (AD)</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0384\"><a href=\"dtb_0120.smil#rgn_txt_0120_0002\">264</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0385\"><a href=\"dtb_0120.smil#rgn_txt_0120_0003\">265</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0386\"><a href=\"dtb_0120.smil#rgn_txt_0120_0004\">266</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0387\"><a href=\"dtb_0121.smil#rgn_txt_0121_0001\">Vascular dementia (multi-infarct dementia)</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0388\"><a href=\"dtb_0121.smil#rgn_txt_0121_0002\">267</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0389\"><a href=\"dtb_0121.smil#rgn_txt_0121_0003\">268</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0390\"><a href=\"dtb_0122.smil#rgn_txt_0122_0001\">Huntington's Disease</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0391\"><a href=\"dtb_0122.smil#rgn_txt_0122_0002\">269</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0392\"><a href=\"dtb_0122.smil#rgn_txt_0122_0003\">270</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0393\"><a href=\"dtb_0123.smil#rgn_txt_0123_0001\">Other kinds of dementia</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0394\"><a href=\"dtb_0123.smil#rgn_txt_0123_0002\">271</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0395\"><a href=\"dtb_0123.smil#rgn_txt_0123_0003\">272</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0396\"><a href=\"dtb_0123.smil#rgn_txt_0123_0004\">273</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0397\"><a href=\"dtb_0124.smil#rgn_txt_0124_0001\">How can dementias be prevented or treated?</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0398\"><a href=\"dtb_0124.smil#rgn_txt_0124_0002\">274</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0399\"><a href=\"dtb_0124.smil#rgn_txt_0124_0003\">275</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0400\"><a href=\"dtb_0124.smil#rgn_txt_0124_0004\">276</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0401\"><a href=\"dtb_0124.smil#rgn_txt_0124_0005\">277</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0402\"><a href=\"dtb_0124.smil#rgn_txt_0124_0006\">278</a></span>\r\n\t\t<h1 id=\"rgn_ncc_0403\"><a href=\"dtb_0125.smil#rgn_txt_0125_0001\">Chapter 11 Anxiety disorders: the stress regulator goes wild</a></h1>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0404\"><a href=\"dtb_0125.smil#rgn_txt_0125_0002\">279</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0405\"><a href=\"dtb_0125.smil#rgn_txt_0125_0003\">280</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0406\"><a href=\"dtb_0125.smil#rgn_txt_0125_0004\">281</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0407\"><a href=\"dtb_0125.smil#rgn_txt_0125_0005\">282</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0408\"><a href=\"dtb_0125.smil#rgn_txt_0125_0006\">283</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0409\"><a href=\"dtb_0125.smil#rgn_txt_0125_0007\">284</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0410\"><a href=\"dtb_0125.smil#rgn_txt_0125_0008\">285</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0411\"><a href=\"dtb_0126.smil#rgn_txt_0126_0001\">What are anxiety disorders?</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0412\"><a href=\"dtb_0126.smil#rgn_txt_0126_0002\">286</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0413\"><a href=\"dtb_0126.smil#rgn_txt_0126_0003\">287</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0414\"><a href=\"dtb_0126.smil#rgn_txt_0126_0004\">288</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0415\"><a href=\"dtb_0126.smil#rgn_txt_0126_0005\">289</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0416\"><a href=\"dtb_0126.smil#rgn_txt_0126_0006\">290</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0417\"><a href=\"dtb_0126.smil#rgn_txt_0126_0007\">291</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0418\"><a href=\"dtb_0126.smil#rgn_txt_0126_0008\">292</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0419\"><a href=\"dtb_0126.smil#rgn_txt_0126_0009\">293</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0420\"><a href=\"dtb_0126.smil#rgn_txt_0126_0010\">294</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0421\"><a href=\"dtb_0126.smil#rgn_txt_0126_0011\">295</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0422\"><a href=\"dtb_0126.smil#rgn_txt_0126_0012\">296</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0423\"><a href=\"dtb_0126.smil#rgn_txt_0126_0013\">297</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0424\"><a href=\"dtb_0126.smil#rgn_txt_0126_0014\">298</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0425\"><a href=\"dtb_0127.smil#rgn_txt_0127_0001\">Kinds of anxiety disorders</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0426\"><a href=\"dtb_0127.smil#rgn_txt_0127_0002\">299</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0427\"><a href=\"dtb_0128.smil#rgn_txt_0128_0001\">Panic disorder</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0428\"><a href=\"dtb_0128.smil#rgn_txt_0128_0002\">300</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0429\"><a href=\"dtb_0128.smil#rgn_txt_0128_0003\">301</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0430\"><a href=\"dtb_0129.smil#rgn_txt_0129_0001\">Phobic disorder</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0431\"><a href=\"dtb_0129.smil#rgn_txt_0129_0002\">302</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0432\"><a href=\"dtb_0129.smil#rgn_txt_0129_0003\">303</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0433\"><a href=\"dtb_0130.smil#rgn_txt_0130_0001\">Posttraumatic stress disorder</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0434\"><a href=\"dtb_0130.smil#rgn_txt_0130_0002\">304</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0435\"><a href=\"dtb_0130.smil#rgn_txt_0130_0003\">305</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0436\"><a href=\"dtb_0130.smil#rgn_txt_0130_0004\">306</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0437\"><a href=\"dtb_0130.smil#rgn_txt_0130_0005\">307</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0438\"><a href=\"dtb_0130.smil#rgn_txt_0130_0006\">308</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0439\"><a href=\"dtb_0131.smil#rgn_txt_0131_0001\">Generalised anxiety disorder (OCD)</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0440\"><a href=\"dtb_0131.smil#rgn_txt_0131_0002\">309</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0441\"><a href=\"dtb_0132.smil#rgn_txt_0132_0001\">Obsessive-compulsive disorder</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0442\"><a href=\"dtb_0132.smil#rgn_txt_0132_0002\">310</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0443\"><a href=\"dtb_0132.smil#rgn_txt_0132_0003\">311</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0444\"><a href=\"dtb_0133.smil#rgn_txt_0133_0001\">Treatment of anxiety disorders</a></h2>\r\n\t\t<h3 id=\"rgn_ncc_0445\"><a href=\"dtb_0134.smil#rgn_txt_0134_0001\">Pharmacotherapy</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0446\"><a href=\"dtb_0134.smil#rgn_txt_0134_0002\">312</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0447\"><a href=\"dtb_0135.smil#rgn_txt_0135_0001\">Behavioural therapies</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0448\"><a href=\"dtb_0135.smil#rgn_txt_0135_0002\">313</a></span>\r\n\t\t<h3 id=\"rgn_ncc_0449\"><a href=\"dtb_0136.smil#rgn_txt_0136_0001\">Psychotherapies</a></h3>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0450\"><a href=\"dtb_0136.smil#rgn_txt_0136_0002\">314</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0451\"><a href=\"dtb_0136.smil#rgn_txt_0136_0003\">315</a></span>\r\n\t\t<h1 id=\"rgn_ncc_0452\"><a href=\"dtb_0137.smil#rgn_txt_0137_0001\">Part IV Brave New Brain</a></h1>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0453\"><a href=\"dtb_0137.smil#rgn_txt_0137_0002\">316</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0454\"><a href=\"dtb_0137.smil#rgn_txt_0137_0003\">317</a></span>\r\n\t\t<h1 id=\"rgn_ncc_0455\"><a href=\"dtb_0138.smil#rgn_txt_0138_0001\">Chapter 12 O Brave New World: conquering mental illness in the era of the genome</a></h1>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0456\"><a href=\"dtb_0138.smil#rgn_txt_0138_0002\">318</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0457\"><a href=\"dtb_0139.smil#rgn_txt_0139_0001\">Waging war on mental illness: what does the future hold?</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0458\"><a href=\"dtb_0139.smil#rgn_txt_0139_0002\">319</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0459\"><a href=\"dtb_0140.smil#rgn_txt_0140_0001\">Defining the target: using guidance from maps of brain terrain</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0460\"><a href=\"dtb_0140.smil#rgn_txt_0140_0002\">320</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0461\"><a href=\"dtb_0140.smil#rgn_txt_0140_0003\">321</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0462\"><a href=\"dtb_0140.smil#rgn_txt_0140_0004\">322</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0463\"><a href=\"dtb_0141.smil#rgn_txt_0141_0001\">Finding the genes: the long march to finding their functions</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0464\"><a href=\"dtb_0141.smil#rgn_txt_0141_0002\">323</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0465\"><a href=\"dtb_0141.smil#rgn_txt_0141_0003\">324</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0466\"><a href=\"dtb_0142.smil#rgn_txt_0142_0001\">Genetic fingerprinting: the ultimate identity card</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0467\"><a href=\"dtb_0142.smil#rgn_txt_0142_0002\">325</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0468\"><a href=\"dtb_0142.smil#rgn_txt_0142_0003\">326</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0469\"><a href=\"dtb_0143.smil#rgn_txt_0143_0001\">The race to create newer and better drugs</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0470\"><a href=\"dtb_0143.smil#rgn_txt_0143_0002\">327</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0471\"><a href=\"dtb_0143.smil#rgn_txt_0143_0003\">328</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0472\"><a href=\"dtb_0143.smil#rgn_txt_0143_0004\">329</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0473\"><a href=\"dtb_0144.smil#rgn_txt_0144_0001\">Replacing damage control with preemptive strikes: early intervention and prevention</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0474\"><a href=\"dtb_0144.smil#rgn_txt_0144_0002\">330</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0475\"><a href=\"dtb_0144.smil#rgn_txt_0144_0003\">331</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0476\"><a href=\"dtb_0145.smil#rgn_txt_0145_0001\">Changing minds: basing therapeutic strategies on brain plasticity</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0477\"><a href=\"dtb_0145.smil#rgn_txt_0145_0002\">332</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0478\"><a href=\"dtb_0146.smil#rgn_txt_0146_0001\">A blessing and not a curse to mankind</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0479\"><a href=\"dtb_0146.smil#rgn_txt_0146_0002\">333</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0480\"><a href=\"dtb_0147.smil#rgn_txt_0147_0001\">Genetic testing: will we know too much?</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0481\"><a href=\"dtb_0147.smil#rgn_txt_0147_0002\">334</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0482\"><a href=\"dtb_0147.smil#rgn_txt_0147_0003\">335</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0483\"><a href=\"dtb_0148.smil#rgn_txt_0148_0001\">Genetic engineering: will we change too much?</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0484\"><a href=\"dtb_0148.smil#rgn_txt_0148_0002\">336</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0485\"><a href=\"dtb_0149.smil#rgn_txt_0149_0001\">Genetic determination: will we lose our sense of autonomy?</a></h2>\r\n\t\t<h2 id=\"rgn_ncc_0486\"><a href=\"dtb_0150.smil#rgn_txt_0150_0001\">Medicating the mind: humane treatment, cosmetic surgery, or self-indulgence?</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0487\"><a href=\"dtb_0150.smil#rgn_txt_0150_0002\">337</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0488\"><a href=\"dtb_0150.smil#rgn_txt_0150_0003\">338</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0489\"><a href=\"dtb_0151.smil#rgn_txt_0151_0001\">Will the growth of biomedical technology dehumanise psychiatry?</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0490\"><a href=\"dtb_0151.smil#rgn_txt_0151_0002\">339</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0491\"><a href=\"dtb_0151.smil#rgn_txt_0151_0003\">340</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0492\"><a href=\"dtb_0151.smil#rgn_txt_0151_0004\">341</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0493\"><a href=\"dtb_0152.smil#rgn_txt_0152_0001\">If the mind is the brain, where is the soul or sense of self?</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0494\"><a href=\"dtb_0152.smil#rgn_txt_0152_0002\">342</a></span>\r\n\t\t<h2 id=\"rgn_ncc_0495\"><a href=\"dtb_0153.smil#rgn_txt_0153_0001\">The role of psychiatry: curing people or curing society?</a></h2>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0496\"><a href=\"dtb_0153.smil#rgn_txt_0153_0002\">343</a></span>\r\n\t\t<span class=\"page-normal\" id=\"rgn_ncc_0497\"><a href=\"dtb_0153.smil#rgn_txt_0153_0003\">344</a></span>\r\n\t\t<h1 id=\"rgn_ncc_0498\"><a href=\"dtb_0154.smil#rgn_txt_0154_0001\">References and suggested readings</a></h1>\r\n\t\t<h2 id=\"rgn_ncc_0499\"><a href=\"dtb_0155.smil#rgn_txt_0155_0001\">Chapter 1</a></h2>\r\n\t\t<h2 id=\"rgn_ncc_0500\"><a href=\"dtb_0156.smil#rgn_txt_0156_0001\">Chapter 3</a></h2>\r\n\t\t<h2 id=\"rgn_ncc_0501\"><a href=\"dtb_0157.smil#rgn_txt_0157_0001\">Chapter 4</a></h2>\r\n\t\t<h2 id=\"rgn_ncc_0502\"><a href=\"dtb_0158.smil#rgn_txt_0158_0001\">Chapter 5</a></h2>\r\n\t\t<h2 id=\"rgn_ncc_0503\"><a href=\"dtb_0159.smil#rgn_txt_0159_0001\">Chapter 6</a></h2>\r\n\t\t<h2 id=\"rgn_ncc_0504\"><a href=\"dtb_0160.smil#rgn_txt_0160_0001\">Chapter 7</a></h2>\r\n\t\t<h2 id=\"rgn_ncc_0505\"><a href=\"dtb_0161.smil#rgn_txt_0161_0001\">Chapter 8</a></h2>\r\n\t\t<h2 id=\"rgn_ncc_0506\"><a href=\"dtb_0162.smil#rgn_txt_0162_0001\">Chapter 9</a></h2>\r\n\t\t<h2 id=\"rgn_ncc_0507\"><a href=\"dtb_0163.smil#rgn_txt_0163_0001\">Chapter 10</a></h2>\r\n\t\t<h2 id=\"rgn_ncc_0508\"><a href=\"dtb_0164.smil#rgn_txt_0164_0001\">Chapter 11</a></h2>\r\n\t\t<h2 id=\"rgn_ncc_0509\"><a href=\"dtb_0165.smil#rgn_txt_0165_0001\">Chapter 12</a></h2>\r\n\t\t<h1 id=\"rgn_ncc_0510\"><a href=\"dtb_0166.smil#rgn_txt_0166_0001\">Index</a></h1>\r\n\t\t<h2 id=\"rgn_ncc_0511\"><a href=\"dtb_0167.smil#rgn_txt_0167_0001\">A</a></h2>\r\n\t\t<h2 id=\"rgn_ncc_0512\"><a href=\"dtb_0168.smil#rgn_txt_0168_0001\">B</a></h2>\r\n\t\t<h2 id=\"rgn_ncc_0513\"><a href=\"dtb_0169.smil#rgn_txt_0169_0001\">C</a></h2>\r\n\t\t<h2 id=\"rgn_ncc_0514\"><a href=\"dtb_0170.smil#rgn_txt_0170_0001\">D</a></h2>\r\n\t\t<h2 id=\"rgn_ncc_0515\"><a href=\"dtb_0171.smil#rgn_txt_0171_0001\">E</a></h2>\r\n\t\t<h2 id=\"rgn_ncc_0516\"><a href=\"dtb_0172.smil#rgn_txt_0172_0001\">F</a></h2>\r\n\t\t<h2 id=\"rgn_ncc_0517\"><a href=\"dtb_0173.smil#rgn_txt_0173_0001\">G</a></h2>\r\n\t\t<h2 id=\"rgn_ncc_0518\"><a href=\"dtb_0174.smil#rgn_txt_0174_0001\">H</a></h2>\r\n\t\t<h2 id=\"rgn_ncc_0519\"><a href=\"dtb_0175.smil#rgn_txt_0175_0001\">I</a></h2>\r\n\t\t<h2 id=\"rgn_ncc_0520\"><a href=\"dtb_0176.smil#rgn_txt_0176_0001\">J</a></h2>\r\n\t\t<h2 id=\"rgn_ncc_0521\"><a href=\"dtb_0177.smil#rgn_txt_0177_0001\">K</a></h2>\r\n\t\t<h2 id=\"rgn_ncc_0522\"><a href=\"dtb_0178.smil#rgn_txt_0178_0001\">L</a></h2>\r\n\t\t<h2 id=\"rgn_ncc_0523\"><a href=\"dtb_0179.smil#rgn_txt_0179_0001\">M</a></h2>\r\n\t\t<h2 id=\"rgn_ncc_0524\"><a href=\"dtb_0180.smil#rgn_txt_0180_0001\">N</a></h2>\r\n\t\t<h2 id=\"rgn_ncc_0525\"><a href=\"dtb_0181.smil#rgn_txt_0181_0001\">O</a></h2>\r\n\t\t<h2 id=\"rgn_ncc_0526\"><a href=\"dtb_0182.smil#rgn_txt_0182_0001\">P</a></h2>\r\n\t\t<h2 id=\"rgn_ncc_0527\"><a href=\"dtb_0183.smil#rgn_txt_0183_0001\">Q</a></h2>\r\n\t\t<h2 id=\"rgn_ncc_0528\"><a href=\"dtb_0184.smil#rgn_txt_0184_0001\">R</a></h2>\r\n\t\t<h2 id=\"rgn_ncc_0529\"><a href=\"dtb_0185.smil#rgn_txt_0185_0001\">S</a></h2>\r\n\t\t<h2 id=\"rgn_ncc_0530\"><a href=\"dtb_0186.smil#rgn_txt_0186_0001\">T</a></h2>\r\n\t\t<h2 id=\"rgn_ncc_0531\"><a href=\"dtb_0187.smil#rgn_txt_0187_0001\">U</a></h2>\r\n\t\t<h2 id=\"rgn_ncc_0532\"><a href=\"dtb_0188.smil#rgn_txt_0188_0001\">V</a></h2>\r\n\t\t<h2 id=\"rgn_ncc_0533\"><a href=\"dtb_0189.smil#rgn_txt_0189_0001\">W</a></h2>\r\n\t\t<h2 id=\"rgn_ncc_0534\"><a href=\"dtb_0190.smil#rgn_txt_0190_0001\">X</a></h2>\r\n\t\t<h2 id=\"rgn_ncc_0535\"><a href=\"dtb_0191.smil#rgn_txt_0191_0001\">Y</a></h2>\r\n\t\t<h2 id=\"rgn_ncc_0536\"><a href=\"dtb_0192.smil#rgn_txt_0192_0001\">Z</a></h2>\r\n\t\t<h1 id=\"rgn_ncc_0537\"><a href=\"dtb_0193.smil#rgn_txt_0193_0001\">Closing Announcement</a></h1>\r\n\t</body>\r\n</html>\r\n```\r\n  ", "url": "https://github.com/jhy/jsoup/issues/1003", "user": "chinwobble", "labels": ["bug"], "created": "2018-01-07 03:59:10", "closed": "2018-04-15 03:08:38", "commits": {"0f7e0cc373aced32629f5321c9521f81d8248647": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 97.00027777777778, "commitsDetails": [{"commitHash": "0f7e0cc373aced32629f5321c9521f81d8248647", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["e0f9c5fbb3961ab3a5baacabbde85a2569abed65"], "nameRev": "0f7e0cc373aced32629f5321c9521f81d8248647 tags/jsoup-1.11.3~5", "commitMessage": "Make sure to consume a UTF-8 BOM at the start of a doc\n\nFixes #1003\n", "commitDateTime": "2018-04-14 20:08:25", "authoredDateTime": "2018-04-14 20:08:25", "commitGitStats": [{"filePath": "CHANGES", "insertions": 4, "deletions": 0, "lines": 4}, {"filePath": "src/main/java/org/jsoup/helper/DataUtil.java", "insertions": 8, "deletions": 8, "lines": 16}, {"filePath": "src/main/java/org/jsoup/parser/HtmlTreeBuilderState.java", "insertions": 1, "deletions": 7, "lines": 8}, {"filePath": "src/test/java/org/jsoup/helper/DataUtilTest.java", "insertions": 7, "deletions": 0, "lines": 7}, {"filePath": "src/test/java/org/jsoup/parser/HtmlParserTest.java", "insertions": 10, "deletions": 0, "lines": 10}, {"filePath": "src/test/resources/bomtests/bom_utf8.html", "insertions": 10, "deletions": 0, "lines": 10}, {"filePath": "src/test/resources/htmltests/comments.html", "insertions": 16, "deletions": 0, "lines": 16}], "commitSpoonAstDiffStats": [{"spoonFilePath": "DataUtil.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.helper.DataUtil.BomCharset", "TOT": 2, "UPD": 2, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.helper.DataUtil.detectCharsetFromBom(java.nio.ByteBuffer)", "TOT": 6, "UPD": 6, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.helper.DataUtil.parseInputStream(java.io.InputStream,java.lang.String,java.lang.String,org.jsoup.parser.Parser)", "TOT": 3, "UPD": 0, "INS": 1, "MOV": 1, "DEL": 1}]}, {"spoonFilePath": "HtmlTreeBuilderState.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilderState.isWhitespace(java.lang.String)", "TOT": 6, "UPD": 1, "INS": 1, "MOV": 2, "DEL": 2}]}, {"spoonFilePath": "DataUtilTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.helper.DataUtilTest.supportsUTF8BOM()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "HtmlParserTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.HtmlParserTest.handlesXmlDeclAndCommentsBeforeDoctype()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["0f7e0cc373aced32629f5321c9521f81d8248647"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 9, "deletions": 15, "lines": 24, "gitFilesChange": 2}, "spoonStatsSummary": {"TOT": 17, "UPD": 9, "INS": 2, "MOV": 3, "DEL": 3, "spoonFilesChanged": 2, "spoonMethodsChanged": 4}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/helper", "src/main/java/org/jsoup/parser"], "changesInPackagesSPOON": ["org.jsoup.helper.DataUtil.BomCharset", "org.jsoup.helper.DataUtil.detectCharsetFromBom(java.nio.ByteBuffer)", "org.jsoup.helper.DataUtil.parseInputStream(java.io.InputStream,java.lang.String,java.lang.String,org.jsoup.parser.Parser)", "org.jsoup.parser.HtmlTreeBuilderState.isWhitespace(java.lang.String)"]}, {"title": "xmlParser() with ParseSettings.htmlDefault does not put end tag to lower case", "body": "```java\r\n@Test public void test() {\r\n    Parser parser = Parser.xmlParser().settings(ParseSettings.htmlDefault);\r\n    Document document = Jsoup.parse(\"<div>test</DIV><p></p>\", \"\", parser);\r\n    assertEquals(\"<div>\\n test\\n</div>\\n<p></p>\", document.toString()); // fail -> toString() = \"<div>\\n test\\n <p></p>\\n</div>\"\r\n}\r\n\r\n@Test public void test1() {\r\n    Parser parser = Parser.xmlParser().settings(ParseSettings.htmlDefault);\r\n    Document document = Jsoup.parse(\"<DIV>test</div><p></p>\", \"\", parser);\r\n    assertEquals(\"<div>\\n test\\n</div>\\n<p></p>\", document.toString()); // pass\r\n}\r\n```", "url": "https://github.com/jhy/jsoup/issues/998", "user": "julienlevac", "labels": ["bug"], "created": "2017-12-22 14:18:08", "closed": "2017-12-22 18:25:19", "commits": {"df272b77c2cf89e9cbe2512bbddf8a3bc28a704b": {"commitGHEventType": "closed", "commitUser": "jhy"}, "e5210d1f9ef4f1d41ff0a8c4a2ab8e9192d5e087": {"commitGHEventType": "referenced", "commitUser": "jhy"}}, "ttf": 0.0002777777777777778, "commitsDetails": [{"commitHash": "df272b77c2cf89e9cbe2512bbddf8a3bc28a704b", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["bf4f99c72ba3d59486e0decb59a2b87edee4f1ff"], "nameRev": "df272b77c2cf89e9cbe2512bbddf8a3bc28a704b tags/jsoup-1.11.3~15", "commitMessage": "In XML parse mode set to lowercase, normalize closing tags\n\nFixes #998\n", "commitDateTime": "2017-12-22 10:25:08", "authoredDateTime": "2017-12-22 10:25:05", "commitGitStats": [{"filePath": "CHANGES", "insertions": 4, "deletions": 0, "lines": 4}, {"filePath": "src/main/java/org/jsoup/parser/XmlTreeBuilder.java", "insertions": 1, "deletions": 1, "lines": 2}, {"filePath": "src/test/java/org/jsoup/parser/HtmlParserTest.java", "insertions": 5, "deletions": 0, "lines": 5}, {"filePath": "src/test/java/org/jsoup/parser/XmlTreeBuilderTest.java", "insertions": 7, "deletions": 0, "lines": 7}], "commitSpoonAstDiffStats": [{"spoonFilePath": "XmlTreeBuilder.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.XmlTreeBuilder.popStackToClose(org.jsoup.parser.Token$EndTag)", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "HtmlParserTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.HtmlParserTest.normalizesDiscordantTags()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "XmlTreeBuilderTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.XmlTreeBuilderTest.normalizesDiscordantTags()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}, {"commitHash": "e5210d1f9ef4f1d41ff0a8c4a2ab8e9192d5e087", "commitGHEventType": "referenced", "commitUser": "jhy", "commitParents": ["11e018fe623758986910069a6285b614dd98cc98"], "nameRev": "e5210d1f9ef4f1d41ff0a8c4a2ab8e9192d5e087 tags/jsoup-1.11.3~13", "commitMessage": "Corrected fix for #998\n", "commitDateTime": "2017-12-22 13:49:47", "authoredDateTime": "2017-12-22 13:49:47", "commitGitStats": [{"filePath": "src/main/java/org/jsoup/parser/XmlTreeBuilder.java", "insertions": 1, "deletions": 1, "lines": 2}, {"filePath": "src/test/java/org/jsoup/parser/XmlTreeBuilderTest.java", "insertions": 2, "deletions": 2, "lines": 4}], "commitSpoonAstDiffStats": [{"spoonFilePath": "XmlTreeBuilder.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.XmlTreeBuilder.popStackToClose(org.jsoup.parser.Token$EndTag)", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "XmlTreeBuilderTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.XmlTreeBuilderTest.preservesCaseByDefault()", "TOT": 2, "UPD": 2, "INS": 0, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["df272b77c2cf89e9cbe2512bbddf8a3bc28a704b", "e5210d1f9ef4f1d41ff0a8c4a2ab8e9192d5e087"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 2, "gitStatsSummary": {"insertions": 2, "deletions": 2, "lines": 4, "gitFilesChange": 1}, "spoonStatsSummary": {"TOT": 2, "UPD": 2, "INS": 0, "MOV": 0, "DEL": 0, "spoonFilesChanged": 1, "spoonMethodsChanged": 1}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/parser"], "changesInPackagesSPOON": ["org.jsoup.parser.XmlTreeBuilder.popStackToClose(org.jsoup.parser.Token$EndTag)"]}, {"title": "Parsing bug in HttpConnection::get and HttpConnection.Response::parse", "body": "While working on an application that downloads and parses RSS files from [packetstormsecurity.com](https://packetstormsecurity.com/) I've found a strange behaviour: Sometimes when selecting a `pubDate` entity from an `item` entity, Jsoup would continue parsing past the closing `pubDate` tag and into the next entity.\r\n\r\nThis seems to be caused by the above mentioned methods introducing the html character codes for `<` and `>` (`&lt;` and `&gt;` respectively) while parsing the string `</pubDate>`, resulting in a pubDate entity looking like this `<pubDate>Tue, 06 Jun 2017 14:06:27 GMT&lt;/pubDate&gt;`, causing the parser to overshoot.\r\n\r\nThe bug only happens on very rare occasion for the above mentioned website, I'd guess about one to five in one thousand pages.\r\n\r\nSince the above mentioned website is posting new items multiple times per day and thus the affected pages change, the code contains a method to find bad pages. When a bad page is found, the code will download and parse it thrice, once for each of the affected methods and once with a workaround, which uses `Jsoup::parse` and passes the body of the `HttpConnection.Response` object obtained from `Connection::execute`.\r\n\r\n[I've created a repo](https://github.com/marvk/JsoupParseBug) that contains a [MCVE](https://stackoverflow.com/help/mcve) to reproduce the probable bug. Here is some example output from the program:\r\n\r\n    Malformed output via Jsoup.connect(url).get():\r\n    Wed, 07 Jun 2017 14:22:24 GMT\r\n    Wed, 07 Jun 2017 14:21:31 GMT\r\n    Wed, 07 Jun 2017 14:19:11 GMT\r\n    Wed, 07 Jun 2017 14:19:03 GMT\r\n    Wed, 07 Jun 2017 14:18:54 GMT\r\n    Wed, 07 Jun 2017 14:18:49 GMT\r\n    Wed, 07 Jun 2017 14:18:44 GMT\r\n    Wed, 07 Jun 2017 14:18:38 GMT\r\n    Wed, 07 Jun 2017 14:18:30 GMT\r\n    Wed, 07 Jun 2017 14:18:23 GMT\r\n    Wed, 07 Jun 2017 14:18:17 GMT\r\n    Wed, 07 Jun 2017 14:18:12 GMT\r\n    Wed, 07 Jun 2017 14:15:55 GMT\r\n    Wed, 07 Jun 2017 13:47:58 GMT\r\n    Wed, 07 Jun 2017 10:11:11 GMT\r\n    Tue, 06 Jun 2017 23:26:00 GMT\r\n    Tue, 06 Jun 2017 23:25:00 GMT\r\n    Tue, 06 Jun 2017 23:24:00 GMT\r\n    Tue, 06 Jun 2017 23:23:00 GMT\r\n    Tue, 06 Jun 2017 14:06:27 GMT</pubDate> Gentoo Linux Security Advisory 201706-5 - Multiple vulnerabilities in D-Bus might allow an attacker to overwrite files with a fixed filename in arbitrary directories or conduct a symlink attack. Versions less than 1.10.18 are affected.\r\n    Tue, 06 Jun 2017 14:06:16 GMT\r\n    Tue, 06 Jun 2017 14:06:02 GMT\r\n    Tue, 06 Jun 2017 14:05:53 GMT\r\n    Tue, 06 Jun 2017 14:05:45 GMT\r\n    Tue, 06 Jun 2017 14:05:34 GMT\r\n\r\n\r\n    Malformed output via Jsoup.connect(url).execute().parse():\r\n    Wed, 07 Jun 2017 14:22:24 GMT\r\n    Wed, 07 Jun 2017 14:21:31 GMT\r\n    Wed, 07 Jun 2017 14:19:11 GMT\r\n    Wed, 07 Jun 2017 14:19:03 GMT\r\n    Wed, 07 Jun 2017 14:18:54 GMT\r\n    Wed, 07 Jun 2017 14:18:49 GMT\r\n    Wed, 07 Jun 2017 14:18:44 GMT\r\n    Wed, 07 Jun 2017 14:18:38 GMT\r\n    Wed, 07 Jun 2017 14:18:30 GMT\r\n    Wed, 07 Jun 2017 14:18:23 GMT\r\n    Wed, 07 Jun 2017 14:18:17 GMT\r\n    Wed, 07 Jun 2017 14:18:12 GMT\r\n    Wed, 07 Jun 2017 14:15:55 GMT\r\n    Wed, 07 Jun 2017 13:47:58 GMT\r\n    Wed, 07 Jun 2017 10:11:11 GMT\r\n    Tue, 06 Jun 2017 23:26:00 GMT\r\n    Tue, 06 Jun 2017 23:25:00 GMT\r\n    Tue, 06 Jun 2017 23:24:00 GMT\r\n    Tue, 06 Jun 2017 23:23:00 GMT\r\n    Tue, 06 Jun 2017 14:06:27 GMT</pubDate> Gentoo Linux Security Advisory 201706-5 - Multiple vulnerabilities in D-Bus might allow an attacker to overwrite files with a fixed filename in arbitrary directories or conduct a symlink attack. Versions less than 1.10.18 are affected.\r\n    Tue, 06 Jun 2017 14:06:16 GMT\r\n    Tue, 06 Jun 2017 14:06:02 GMT\r\n    Tue, 06 Jun 2017 14:05:53 GMT\r\n    Tue, 06 Jun 2017 14:05:45 GMT\r\n    Tue, 06 Jun 2017 14:05:34 GMT\r\n\r\n\r\n    Well-formed output via Jsoup.parse(Jsoup.connect(url).execute().body()):\r\n    Wed, 07 Jun 2017 14:22:24 GMT\r\n    Wed, 07 Jun 2017 14:21:31 GMT\r\n    Wed, 07 Jun 2017 14:19:11 GMT\r\n    Wed, 07 Jun 2017 14:19:03 GMT\r\n    Wed, 07 Jun 2017 14:18:54 GMT\r\n    Wed, 07 Jun 2017 14:18:49 GMT\r\n    Wed, 07 Jun 2017 14:18:44 GMT\r\n    Wed, 07 Jun 2017 14:18:38 GMT\r\n    Wed, 07 Jun 2017 14:18:30 GMT\r\n    Wed, 07 Jun 2017 14:18:23 GMT\r\n    Wed, 07 Jun 2017 14:18:17 GMT\r\n    Wed, 07 Jun 2017 14:18:12 GMT\r\n    Wed, 07 Jun 2017 14:15:55 GMT\r\n    Wed, 07 Jun 2017 13:47:58 GMT\r\n    Wed, 07 Jun 2017 10:11:11 GMT\r\n    Tue, 06 Jun 2017 23:26:00 GMT\r\n    Tue, 06 Jun 2017 23:25:00 GMT\r\n    Tue, 06 Jun 2017 23:24:00 GMT\r\n    Tue, 06 Jun 2017 23:23:00 GMT\r\n    Tue, 06 Jun 2017 14:06:27 GMT\r\n    Tue, 06 Jun 2017 14:06:16 GMT\r\n    Tue, 06 Jun 2017 14:06:02 GMT\r\n    Tue, 06 Jun 2017 14:05:53 GMT\r\n    Tue, 06 Jun 2017 14:05:45 GMT\r\n    Tue, 06 Jun 2017 14:05:34 GMT\r\n    \r\nTested on Jsoup 1.11.2", "url": "https://github.com/jhy/jsoup/issues/995", "user": "marvk", "labels": ["bug"], "created": "2017-12-20 21:07:29", "closed": "2017-12-24 01:40:33", "commits": {"b92b4f6b9b3256e97bfb6a0732bf113b6da53a4c": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 3.000277777777778, "commitsDetails": [{"commitHash": "b92b4f6b9b3256e97bfb6a0732bf113b6da53a4c", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["e5210d1f9ef4f1d41ff0a8c4a2ab8e9192d5e087"], "nameRev": "b92b4f6b9b3256e97bfb6a0732bf113b6da53a4c tags/jsoup-1.11.3~12", "commitMessage": "isEmpty() should bufferUp\n\nisEmpty wasn't checking to see if more content was able to be read, so when called directly without a consume() could give misleading results.\n\nFixes #995\n", "commitDateTime": "2017-12-23 17:40:13", "authoredDateTime": "2017-12-23 17:40:13", "commitGitStats": [{"filePath": "CHANGES", "insertions": 3, "deletions": 0, "lines": 3}, {"filePath": "src/main/java/org/jsoup/parser/CharacterReader.java", "insertions": 16, "deletions": 8, "lines": 24}, {"filePath": "src/test/java/org/jsoup/parser/CharacterReaderTest.java", "insertions": 16, "deletions": 0, "lines": 16}], "commitSpoonAstDiffStats": [{"spoonFilePath": "CharacterReader.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.CharacterReader.current()", "TOT": 5, "UPD": 1, "INS": 1, "MOV": 3, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.CharacterReader.consume()", "TOT": 2, "UPD": 1, "INS": 0, "MOV": 1, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.CharacterReader.consumeLetterThenDigitSequence()", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.CharacterReader.bufferUp()", "TOT": 9, "UPD": 0, "INS": 2, "MOV": 6, "DEL": 1}, {"spoonMethodName": "org.jsoup.parser.CharacterReader.isEmptyNoBufferUp()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.CharacterReader.isEmpty()", "TOT": 3, "UPD": 0, "INS": 1, "MOV": 2, "DEL": 0}]}, {"spoonFilePath": "CharacterReaderTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.CharacterReaderTest.notEmptyAtBufferSplitPoint()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["b92b4f6b9b3256e97bfb6a0732bf113b6da53a4c"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 16, "deletions": 8, "lines": 24, "gitFilesChange": 1}, "spoonStatsSummary": {"TOT": 21, "UPD": 3, "INS": 5, "MOV": 12, "DEL": 1, "spoonFilesChanged": 1, "spoonMethodsChanged": 6}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/parser"], "changesInPackagesSPOON": ["org.jsoup.parser.CharacterReader.consume()", "org.jsoup.parser.CharacterReader.isEmpty()", "org.jsoup.parser.CharacterReader.bufferUp()", "org.jsoup.parser.CharacterReader.consumeLetterThenDigitSequence()", "org.jsoup.parser.CharacterReader.current()", "org.jsoup.parser.CharacterReader.isEmptyNoBufferUp()"]}, {"title": "IOException: Mark has been invalidated (Android 6)", "body": "Hi, I have issue with this library on Android ~<=23. \r\n\r\nI'm trying to parse the page using:\r\n`Document d = Jsoup.connect(\"\").get();`\r\n\r\nUnfortunately, this causes an error: \r\n```\r\n java.io.IOException: Mark has been invalidated.\r\n   at java.io.BufferedInputStream.reset(BufferedInputStream.java:336)\r\n   at org.jsoup.internal.ConstrainableInputStream.reset(ConstrainableInputStream.java:103)\r\n   at org.jsoup.helper.DataUtil.parseInputStream(DataUtil.java:105)\r\n   at org.jsoup.helper.HttpConnection$Response.parse(HttpConnection.java:832)\r\n   at org.jsoup.helper.HttpConnection.get(HttpConnection.java:289)\r\n```\r\n\r\nSimilar problem: https://stackoverflow.com/questions/47733379/java-io-ioexception-mark-has-been-invalidated-when-parsing-website-with-jsoup\r\n\r\nI hope you can fix it in the next release.", "url": "https://github.com/jhy/jsoup/issues/990", "user": "pkk0", "labels": ["bug"], "created": "2017-12-12 19:08:44", "closed": "2017-12-22 02:08:45", "commits": {"45c54996c4e8d74cf84304e767934ff584c24702": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 9.000277777777777, "commitsDetails": [{"commitHash": "45c54996c4e8d74cf84304e767934ff584c24702", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["02668f757c59f0c1a7ad8f3169faf061b4b787c1"], "nameRev": "45c54996c4e8d74cf84304e767934ff584c24702 tags/jsoup-1.11.3~17^2", "commitMessage": "Make sure the mark limit is same as buffer size to prevent mark being invalidated\n\nWas bumping into two different buffer sizes when on Android <= 6, where the created buffer was larger than the underling OKio buffer that Android was using.\n\nFixes #990\n", "commitDateTime": "2017-12-21 18:08:30", "authoredDateTime": "2017-12-21 18:08:30", "commitGitStats": [{"filePath": "CHANGES", "insertions": 3, "deletions": 0, "lines": 3}, {"filePath": "src/main/java/org/jsoup/helper/DataUtil.java", "insertions": 2, "deletions": 2, "lines": 4}], "commitSpoonAstDiffStats": [{"spoonFilePath": "DataUtil.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.helper.DataUtil.parseInputStream(java.io.InputStream,java.lang.String,java.lang.String,org.jsoup.parser.Parser)", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["45c54996c4e8d74cf84304e767934ff584c24702"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 2, "deletions": 2, "lines": 4, "gitFilesChange": 1}, "spoonStatsSummary": {"TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0, "spoonFilesChanged": 1, "spoonMethodsChanged": 1}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/helper"], "changesInPackagesSPOON": ["org.jsoup.helper.DataUtil.parseInputStream(java.io.InputStream,java.lang.String,java.lang.String,org.jsoup.parser.Parser)"]}, {"title": "Underlying input stream returned zero bytes", "body": "```\r\nCaused by org.jsoup.c: java.io.IOException: Underlying input stream returned zero bytes\r\n       at org.jsoup.parser.CharacterReader.bufferUp(CharacterReader.java:60)\r\n       at org.jsoup.parser.CharacterReader.(CharacterReader.java)\r\n       at org.jsoup.parser.CharacterReader.(CharacterReader.java)\r\n       at org.jsoup.parser.TreeBuilder.defaultSettings(TreeBuilder.java:35)\r\n       at org.jsoup.parser.HtmlTreeBuilder.initialiseParse(HtmlTreeBuilder.java:66)\r\n       at org.jsoup.parser.TreeBuilder.parse(TreeBuilder.java:44)\r\n       at org.jsoup.parser.Parser.parseInput(Parser.java:39)\r\n       at org.jsoup.helper.DataUtil.parseInputStream(DataUtil.java:151)\r\n       at org.jsoup.helper.HttpConnection$Response.parse(HttpConnection.java:832)\r\n       at org.jsoup.helper.HttpConnection.get(HttpConnection.java:289)\r\n```\r\n\r\nThere isn't much information I can offer here.\r\nThis is with JSoup 1.11.1, with an attempt of parsing for a user's name.\r\n\r\nMy assumption is that the call is executing the following:\r\n\r\n```kotlin\r\nvar result = \"\"\r\ntry {\r\n\tresult = frostJsoup(cookie, FbItem.PROFILE.url).title()\r\n\tL.d(\"Fetch username found\", result)\r\n} catch (e: Exception) {\r\n\tif (e !is UnknownHostException)\r\n\t\te.logFrostAnswers(\"Fetch username failed\")\r\n} finally {\r\n\tif (result.isBlank() && (name?.isNotBlank() == true)) {\r\n\t\tcallback(name!!)\r\n\t\treturn@subscribe\r\n\t}\r\n\tif (name != result) {\r\n\t\tname = result\r\n\t\tsaveFbCookie(this@fetchUsername)\r\n\t}\r\n\tcallback(result)\r\n}\r\n```\r\n\r\nwhere cookie is the user's cooke, and the url is touch.facebook.com/me\r\n\r\nI'm not sure why this is a seemlingly fatal error though.\r\n\r\nAs usual, the full log and thread info can be found [here](http://crashes.to/s/92e0e5d0b69)", "url": "https://github.com/jhy/jsoup/issues/980", "user": "AllanWang", "labels": ["bug"], "created": "2017-11-24 06:00:25", "closed": "2018-04-14 20:27:55", "commits": {"2c4e79b104c0ff32566ce247617d47c0b39cc2c7": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 141.00027777777777, "commitsDetails": [{"commitHash": "2c4e79b104c0ff32566ce247617d47c0b39cc2c7", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["71561e09e0f29ec5fd1bb918206f3d8e42876518"], "nameRev": "2c4e79b104c0ff32566ce247617d47c0b39cc2c7 tags/jsoup-1.11.3~9", "commitMessage": "DataUtil should throw IOException on failed reads during parse\n\nFixes #980\n", "commitDateTime": "2018-04-14 13:27:36", "authoredDateTime": "2018-04-14 13:27:36", "commitGitStats": [{"filePath": "CHANGES", "insertions": 5, "deletions": 0, "lines": 5}, {"filePath": "src/main/java/org/jsoup/Connection.java", "insertions": 1, "deletions": 0, "lines": 1}, {"filePath": "src/main/java/org/jsoup/UncheckedIOException.java", "insertions": 1, "deletions": 1, "lines": 2}, {"filePath": "src/main/java/org/jsoup/helper/DataUtil.java", "insertions": 7, "deletions": 1, "lines": 8}, {"filePath": "src/test/java/org/jsoup/integration/ConnectTest.java", "insertions": 36, "deletions": 0, "lines": 36}, {"filePath": "src/test/java/org/jsoup/integration/servlets/InterruptedServlet.java", "insertions": 31, "deletions": 0, "lines": 31}, {"filePath": "src/test/java/org/jsoup/parser/CharacterReaderTest.java", "insertions": 1, "deletions": 0, "lines": 1}], "commitSpoonAstDiffStats": [{"spoonFilePath": "Connection.java", "spoonMethods": []}, {"spoonFilePath": "UncheckedIOException.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.UncheckedIOException", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "DataUtil.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.helper.DataUtil.parseInputStream(java.io.InputStream,java.lang.String,java.lang.String,org.jsoup.parser.Parser)", "TOT": 2, "UPD": 0, "INS": 1, "MOV": 1, "DEL": 0}]}, {"spoonFilePath": "ConnectTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.integration.ConnectTest.handlesEmptyStreamDuringParseRead()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.integration.ConnectTest.handlesEmtpyStreamDuringBufferdRead()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "InterruptedServlet.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.integration.servlets.InterruptedServlet", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "CharacterReaderTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.CharacterReaderTest", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["2c4e79b104c0ff32566ce247617d47c0b39cc2c7"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 9, "deletions": 2, "lines": 11, "gitFilesChange": 3}, "spoonStatsSummary": {"TOT": 4, "UPD": 1, "INS": 2, "MOV": 1, "DEL": 0, "spoonFilesChanged": 3, "spoonMethodsChanged": 3}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup", "src/main/java/org/jsoup/helper"], "changesInPackagesSPOON": ["org.jsoup.integration.servlets.InterruptedServlet", "org.jsoup.helper.DataUtil.parseInputStream(java.io.InputStream,java.lang.String,java.lang.String,org.jsoup.parser.Parser)", "org.jsoup.UncheckedIOException"]}, {"title": "In w3c dom, siblings are incorrectly inheriting namespaces", "body": "I am not sure if this is a bug or I am missing something that is defined in specification.\r\n\r\nWhen I am parsing (W3C DOM)  html file without namespace that have some element(s) with defined namespace, elements that are following will inherit that namespace.\r\n\r\nSmall test case and test html are included.\r\n\r\n[test.zip](https://github.com/jhy/jsoup/files/1478508/test.zip)\r\n\r\n", "url": "https://github.com/jhy/jsoup/issues/977", "user": "cigaly", "labels": ["bug"], "created": "2017-11-16 12:30:20", "closed": "2017-11-18 20:53:49", "commits": {"3475dc846d78e56422b3e6fdf36dfd4416f359f5": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 2.000277777777778, "commitsDetails": [{"commitHash": "3475dc846d78e56422b3e6fdf36dfd4416f359f5", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["8c7414da71bc7c156f44638f44718c5f70b70460"], "nameRev": "3475dc846d78e56422b3e6fdf36dfd4416f359f5 tags/jsoup-1.11.2~9", "commitMessage": "Maintain stack for namespaces\n\nFixes #977\n", "commitDateTime": "2017-11-18 12:52:52", "authoredDateTime": "2017-11-18 12:52:52", "commitGitStats": [{"filePath": "CHANGES", "insertions": 3, "deletions": 0, "lines": 3}, {"filePath": "src/main/java/org/jsoup/helper/W3CDom.java", "insertions": 7, "deletions": 3, "lines": 10}, {"filePath": "src/test/java/org/jsoup/helper/W3CDomTest.java", "insertions": 36, "deletions": 0, "lines": 36}, {"filePath": "src/test/resources/htmltests/namespaces.xhtml", "insertions": 8, "deletions": 1, "lines": 9}], "commitSpoonAstDiffStats": [{"spoonFilePath": "W3CDom.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.helper.W3CDom.W3CBuilder", "TOT": 4, "UPD": 3, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.helper.W3CDom.W3CBuilder.updateNamespaces(org.jsoup.nodes.Element)", "TOT": 3, "UPD": 1, "INS": 1, "MOV": 1, "DEL": 0}, {"spoonMethodName": "org.jsoup.helper.W3CDom.W3CBuilder.head(org.jsoup.nodes.Node,int)", "TOT": 4, "UPD": 1, "INS": 2, "MOV": 1, "DEL": 0}, {"spoonMethodName": "org.jsoup.helper.W3CDom.W3CBuilder.tail(org.jsoup.nodes.Node,int)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "W3CDomTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.helper.W3CDomTest.namespacePreservation()", "TOT": 26, "UPD": 0, "INS": 26, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["3475dc846d78e56422b3e6fdf36dfd4416f359f5"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 7, "deletions": 3, "lines": 10, "gitFilesChange": 1}, "spoonStatsSummary": {"TOT": 12, "UPD": 5, "INS": 5, "MOV": 2, "DEL": 0, "spoonFilesChanged": 1, "spoonMethodsChanged": 4}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/helper"], "changesInPackagesSPOON": ["org.jsoup.helper.W3CDom.W3CBuilder.updateNamespaces(org.jsoup.nodes.Element)", "org.jsoup.helper.W3CDom.W3CBuilder.tail(org.jsoup.nodes.Node,int)", "org.jsoup.helper.W3CDom.W3CBuilder", "org.jsoup.helper.W3CDom.W3CBuilder.head(org.jsoup.nodes.Node,int)"]}, {"title": "Missing character when extracting 'href'", "body": "Hi,\r\nI am not quite sure if this is an issue with jsoup or something wrong with my code. But I would appreciate so much if you have time to take a look at this.\r\n**What I want to do:**\r\nBasically I want to make a crawler that fetch the course registration information from my university's website. (https://courses.students.ubc.ca/cs/main?newSession=true).\r\n**What I did:**\r\n1. Extract the link behind the 'Subject Code'.\r\n2. Open the link.\r\n3. Extract the link in the new page. (Behind the 'Course')\r\n4. Continue repeat steps above until reaches a find page that has seating information.\r\n5. Repeat the proves above for all the course links within the website.\r\n\r\n**Issue:**\r\nI experienced some weird HTTP 404 errors at very beginning and realized the extracted 'href' value can miss ONE character sometimes. I was doing this with JDK 9 and tried in both Linux and Windows.\r\nFor example, the correct link should looks like:\r\nhttps://courses.students.ubc.ca/cs/main?pname=subjarea&tname=subjareas&req=3&dept=xxxx&course=xxx\r\nWhat I got was something like:\r\nhttps://courses.students.ubc.ca/cs/main?pname=subjarea&tname=subjreas&req=3&dept=xxxx&course=xxx\r\nThere is a missing 'a' at tname.\r\nThe missed character can be completely random. This happens around 10% in the entire job.\r\nI also have the code that can be ran to reproduce this. Please feel free to let me know if you'd like to take a look. Thanks in advance.", "url": "https://github.com/jhy/jsoup/issues/974", "user": "shenzj1994", "labels": ["bug", "duplicate"], "created": "2017-11-15 00:03:18", "closed": "2017-11-17 03:07:07", "commits": {}, "ttf": 2.000277777777778, "commitsDetails": []}, {"title": "NPE: NULL href in <a> causes protocol analysis in Cleaner to crash.", "body": "Tiny reproduction from trying to clean some older HTML files.\r\nEDIT: I am on latest (1.11.1 via Maven)\r\n\r\n    Jsoup.clean(\"<a href>clean-NPE</a>\", Whitelist.basic())\r\n\r\nThis throws a NPE when the Cleaner tries to validate it has a reasonable protocol. I think this is because HREF is actually present in the tag, but its value is ``null``.\r\n\r\nStack trace:\r\n\r\n    Exception in thread \"main\" java.lang.NullPointerException\r\n\tat org.jsoup.internal.Normalizer.lowerCase(Normalizer.java:11)\r\n\tat org.jsoup.safety.Whitelist.testValidProtocol(Whitelist.java:547)\r\n\tat org.jsoup.safety.Whitelist.isSafeAttribute(Whitelist.java:507)\r\n\tat org.jsoup.safety.Cleaner.createSafeElement(Cleaner.java:154)\r\n\tat org.jsoup.safety.Cleaner.access$100(Cleaner.java:35)\r\n\tat org.jsoup.safety.Cleaner$CleaningVisitor.head(Cleaner.java:111)\r\n\tat org.jsoup.select.NodeTraversor.traverse(NodeTraversor.java:45)\r\n\tat org.jsoup.safety.Cleaner.copySafeNodes(Cleaner.java:142)\r\n\tat org.jsoup.safety.Cleaner.clean(Cleaner.java:58)\r\n\tat org.jsoup.Jsoup.clean(Jsoup.java:200)\r\n\tat org.jsoup.Jsoup.clean(Jsoup.java:215)\r\n\r\nWorkaround: remove HREF attr (since I only care about the text in my application)\r\n\r\n    Whitelist.basic().removeAttributes(\"a\", \"href\")", "url": "https://github.com/jhy/jsoup/issues/973", "user": "jjfiv", "labels": ["bug"], "created": "2017-11-14 17:52:20", "closed": "2017-11-14 20:40:36", "commits": {"8808e3fbc5a8f25970c151d076636ad05798ff9d": {"commitGHEventType": "referenced", "commitUser": "jhy"}}, "ttf": 0.0002777777777777778, "commitsDetails": [{"commitHash": "8808e3fbc5a8f25970c151d076636ad05798ff9d", "commitGHEventType": "referenced", "commitUser": "jhy", "commitParents": ["b8411990753314ed3b746d3402dec5a65ff6d603"], "nameRev": "8808e3fbc5a8f25970c151d076636ad05798ff9d tags/jsoup-1.11.2~16", "commitMessage": "NPE fix\n", "commitDateTime": "2017-11-14 12:39:20", "authoredDateTime": "2017-11-14 12:39:20", "commitGitStats": [{"filePath": "CHANGES", "insertions": 3, "deletions": 0, "lines": 3}, {"filePath": "src/main/java/org/jsoup/internal/Normalizer.java", "insertions": 1, "deletions": 1, "lines": 2}, {"filePath": "src/test/java/org/jsoup/safety/CleanerTest.java", "insertions": 7, "deletions": 0, "lines": 7}], "commitSpoonAstDiffStats": [{"spoonFilePath": "Normalizer.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.internal.Normalizer.lowerCase(java.lang.String)", "TOT": 2, "UPD": 0, "INS": 1, "MOV": 1, "DEL": 0}]}, {"spoonFilePath": "CleanerTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.safety.CleanerTest.handlesAttributesWithNoValue()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["8808e3fbc5a8f25970c151d076636ad05798ff9d"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 1, "deletions": 1, "lines": 2, "gitFilesChange": 1}, "spoonStatsSummary": {"TOT": 2, "UPD": 0, "INS": 1, "MOV": 1, "DEL": 0, "spoonFilesChanged": 1, "spoonMethodsChanged": 1}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/internal"], "changesInPackagesSPOON": ["org.jsoup.internal.Normalizer.lowerCase(java.lang.String)"]}, {"title": "StringIndexOutOfBoundsException as of jsoup 1.11.1", "body": "Example:\r\n\r\n    Jsoup.parse(new URL(\"https://gist.githubusercontent.com/valodzka/91ed27043628e9023009e503d41f1aad/raw/a15f68671e6f0517e48fdac812983b85fea27c16/test.html\"), 10_000);\r\n", "url": "https://github.com/jhy/jsoup/issues/972", "user": "valodzka", "labels": ["bug"], "created": "2017-11-14 11:54:34", "closed": "2017-11-14 19:34:34", "commits": {"b8411990753314ed3b746d3402dec5a65ff6d603": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 0.0002777777777777778, "commitsDetails": [{"commitHash": "b8411990753314ed3b746d3402dec5a65ff6d603", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["5f0714329e2763d330460efee8ccd7f69acc8e7c"], "nameRev": "b8411990753314ed3b746d3402dec5a65ff6d603 tags/jsoup-1.11.2~17", "commitMessage": "Don't OBE at  EOF\n\nFixes #972\n", "commitDateTime": "2017-11-14 11:34:20", "authoredDateTime": "2017-11-14 11:34:20", "commitGitStats": [{"filePath": "CHANGES", "insertions": 4, "deletions": 0, "lines": 4}, {"filePath": "src/main/java/org/jsoup/parser/CharacterReader.java", "insertions": 2, "deletions": 0, "lines": 2}, {"filePath": "src/test/java/org/jsoup/parser/CharacterReaderTest.java", "insertions": 12, "deletions": 0, "lines": 12}, {"filePath": "src/test/java/org/jsoup/parser/HtmlParserTest.java", "insertions": 5, "deletions": 0, "lines": 5}], "commitSpoonAstDiffStats": [{"spoonFilePath": "CharacterReader.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.CharacterReader.cacheString(char[],java.lang.String[],int,int)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "CharacterReaderTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.CharacterReaderTest.consumeToNonexistentEndWhenAtAnd()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "HtmlParserTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.HtmlParserTest.commentAtEnd()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["b8411990753314ed3b746d3402dec5a65ff6d603"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 2, "deletions": 0, "lines": 2, "gitFilesChange": 1}, "spoonStatsSummary": {"TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0, "spoonFilesChanged": 1, "spoonMethodsChanged": 1}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/parser"], "changesInPackagesSPOON": ["org.jsoup.parser.CharacterReader.cacheString(char[],java.lang.String[],int,int)"]}, {"title": "Entities.canEncode() with non-fast-path encoding is not thread safe on Android (jsoup 1.11.1)", "body": "(This crash doesn't occur on 1.10.3 or 1.10.2)\r\n\r\nI'm pulling a list of elements from a document and using several threads to parse them, but when I call ``Element.html()`` I get this exception\r\n\r\n``\r\nSystem.err: Caused by: java.lang.IllegalStateException: Current state = CODING_END, new state = CODING\r\nSystem.err:     at java.nio.charset.CharsetEncoder.throwIllegalStateException(CharsetEncoder.java:1014)\r\nSystem.err:     at java.nio.charset.CharsetEncoder.canEncode(CharsetEncoder.java:923)\r\nSystem.err:     at java.nio.charset.CharsetEncoder.canEncode(CharsetEncoder.java:973)\r\nSystem.err:     at org.jsoup.nodes.Entities.canEncode(Entities.java:298)\r\nSystem.err:     at org.jsoup.nodes.Entities.escape(Entities.java:233)\r\nSystem.err:     at org.jsoup.nodes.Attributes.html(Attributes.java:323)\r\nSystem.err:     at org.jsoup.nodes.Element.outerHtmlHead(Element.java:1328)\r\nSystem.err:     at org.jsoup.nodes.Node$OuterHtmlVisitor.head(Node.java:709)\r\nSystem.err:     at org.jsoup.select.NodeTraversor.traverse(NodeTraversor.java:45)\r\nSystem.err:     at org.jsoup.nodes.Node.outerHtml(Node.java:573)\r\nSystem.err:     at org.jsoup.nodes.Element.html(Element.java:1366)\r\nSystem.err:     at org.jsoup.nodes.Element.html(Element.java:1360)\r\nSystem.err:     at com.testapp.JsoupMultithreadedTest$ParseTask.call(JsoupMultithreadedTest.java:49)\r\nSystem.err:     at com.testapp.thread.JsoupMultithreadedTest$ParseTask.call(JsoupMultithreadedTest.java:39)\r\nSystem.err:     at java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\nSystem.err:     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1162)\r\nSystem.err:     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636)\r\nSystem.err:     at java.lang.Thread.run(Thread.java:764)\r\n``\r\n\r\nThe state can vary, I've also seen ``END_OF_INPUT`` and ``RESET``.\r\n\r\nHere's an example that displays the behaviour on Android - it seems to work fine on my Windows 10 machine, but crashes every time on an Android device (Android 6.0.1) and emulator (Android 8.0). The site's encoding [is apparently](https://validator.w3.org/nu/?doc=https%3A%2F%2Fforums.somethingawful.com%2F) ``Windows 1252`` even though the content type is set as ``iso-8859-1``. Works fine with a single thread, and you can run it multithreaded on ``1.10.3`` with no problems.\r\n\r\n```java\r\npublic class JsoupMultithreadedTest {\r\n\r\n    private static final String pageUrl = \"https://forums.somethingawful.com\";\r\n    private static final ExecutorService executor = Executors.newFixedThreadPool(2);\r\n\r\n    public static void run() throws IOException, InterruptedException, ExecutionException {\r\n        Document document = Jsoup.connect(pageUrl).get();\r\n        Elements headlines = document.select(\".forum\");\r\n\r\n        List<Callable<String>> tasks = new ArrayList<>();\r\n        for (Element headline : headlines) {\r\n            tasks.add(new ParseTask(headline));\r\n        }\r\n\r\n        for (Future<String> result : executor.invokeAll(tasks)) {\r\n            System.out.println(result.get());\r\n        }\r\n    }\r\n\r\n    private static class ParseTask implements Callable<String> {\r\n\r\n        private final Element rootElement;\r\n\r\n        private ParseTask(Element rootElement) {\r\n            this.rootElement = rootElement;\r\n        }\r\n\r\n        @Override\r\n        public String call() throws Exception {\r\n            return rootElement.html();\r\n        }\r\n    }\r\n}\r\n```", "url": "https://github.com/jhy/jsoup/issues/970", "user": "baka-kaba", "labels": ["bug"], "created": "2017-11-13 17:43:00", "closed": "2017-11-15 05:38:52", "commits": {"e38af6a351cef738885cb61fed828d9c9f6ec5a1": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 1.0002777777777778, "commitsDetails": [{"commitHash": "e38af6a351cef738885cb61fed828d9c9f6ec5a1", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["3264eee7edb8eacb4da97155a7224712dceda9e0"], "nameRev": "e38af6a351cef738885cb61fed828d9c9f6ec5a1 tags/jsoup-1.11.2~14", "commitMessage": "Threadlocal encoder\n\nFixes #970\n", "commitDateTime": "2017-11-14 21:38:38", "authoredDateTime": "2017-11-14 21:38:38", "commitGitStats": [{"filePath": "CHANGES", "insertions": 4, "deletions": 0, "lines": 4}, {"filePath": "src/main/java/org/jsoup/nodes/Document.java", "insertions": 10, "deletions": 2, "lines": 12}, {"filePath": "src/main/java/org/jsoup/nodes/Entities.java", "insertions": 1, "deletions": 1, "lines": 2}], "commitSpoonAstDiffStats": [{"spoonFilePath": "Document.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.Document.OutputSettings", "TOT": 2, "UPD": 2, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Document.OutputSettings.prepareEncoder()", "TOT": 9, "UPD": 0, "INS": 2, "MOV": 4, "DEL": 3}, {"spoonMethodName": "org.jsoup.nodes.Document.OutputSettings.encoder()", "TOT": 2, "UPD": 0, "INS": 2, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "Entities.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.Entities.escape(java.lang.Appendable,java.lang.String,org.jsoup.nodes.Document$OutputSettings,boolean,boolean,boolean)", "TOT": 3, "UPD": 0, "INS": 1, "MOV": 1, "DEL": 1}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["e38af6a351cef738885cb61fed828d9c9f6ec5a1"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 11, "deletions": 3, "lines": 14, "gitFilesChange": 2}, "spoonStatsSummary": {"TOT": 16, "UPD": 2, "INS": 5, "MOV": 5, "DEL": 4, "spoonFilesChanged": 2, "spoonMethodsChanged": 4}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/nodes"], "changesInPackagesSPOON": ["org.jsoup.nodes.Document.OutputSettings.prepareEncoder()", "org.jsoup.nodes.Entities.escape(java.lang.Appendable,java.lang.String,org.jsoup.nodes.Document$OutputSettings,boolean,boolean,boolean)", "org.jsoup.nodes.Document.OutputSettings", "org.jsoup.nodes.Document.OutputSettings.encoder()"]}, {"title": "Infinite timeout not working anymore", "body": "Hi,\r\n\r\n### Description\r\nAfter upgrading to the latest version (previously had 1.11.1) my program started to immediately time out on every request:\r\n```\r\njava.net.SocketTimeoutException: Read timeout\r\n    at org.jsoup.internal.ConstrainableInputStream.read(ConstrainableInputStream.java:58)\r\n    at java.io.FilterInputStream.read(FilterInputStream.java:107)\r\n    at org.jsoup.internal.ConstrainableInputStream.readToByteBuffer(ConstrainableInputStream.java:87)\r\n    at org.jsoup.helper.DataUtil.readToByteBuffer(DataUtil.java:169)\r\n    at org.jsoup.helper.DataUtil.parseInputStream(DataUtil.java:103)\r\n    at org.jsoup.helper.HttpConnection$Response.parse(HttpConnection.java:832)\r\n```\r\n\r\n\r\n### Source of Error\r\nI did some investigation and noticed that I was setting the timeout to 0 to disable it completely. I had a look at the code and came across this section in ConstrainableInputStream:\r\n```\r\n    public int read(byte[] b, int off, int len) throws IOException {\r\n        if (expired())\r\n            throw new SocketTimeoutException(\"Read timeout\");\r\n    ...\r\n\r\n    private boolean expired() {\r\n        if (timeout == -1)\r\n            return false;\r\n    ...\r\n```\r\nThis code effectively treats a timeout of -1 as infinite timeout and was introduced by https://github.com/jhy/jsoup/commit/a63fcab33707b7b466fbbf4ce4e7e63d787ba23e and contains the bug.\r\nHowever, the documentation for timeout states:\r\n`A timeout of zero is treated as an infinite timeout.`\r\nWhen trying to set the timeout to -1, jsoup throws an IllegalArgumentException:\r\n```\r\nException in thread \"main\" java.lang.IllegalArgumentException: Timeout milliseconds must be 0 (infinite) or greater\r\n    at org.jsoup.helper.Validate.isTrue(Validate.java:45)\r\n    at org.jsoup.helper.HttpConnection$Request.timeout(HttpConnection.java:581)\r\n    at org.jsoup.helper.HttpConnection$Request.timeout(HttpConnection.java:537)\r\n    at org.jsoup.helper.HttpConnection.timeout(HttpConnection.java:156)\r\n```\r\n\r\n\r\n### Solution\r\nChange ContrainableInputStream#expired to check for 0 instead of -1.\r\nWhile -1 is very commonly used for infinite timeouts, allowing a timeout of 0 would not have much use as it could never succeed.\r\n\r\nGreetings", "url": "https://github.com/jhy/jsoup/issues/968", "user": "lukasschlueter", "labels": ["bug"], "created": "2017-11-12 20:35:57", "closed": "2017-11-12 21:32:19", "commits": {"c19acbb96c1c02deb310488677201683f6309708": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 0.0002777777777777778, "commitsDetails": [{"commitHash": "c19acbb96c1c02deb310488677201683f6309708", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["d32321351ced83c7c2edff2abe4a8b2fa17a6bd7"], "nameRev": "c19acbb96c1c02deb310488677201683f6309708 tags/jsoup-1.11.2~23", "commitMessage": "Support infinite timeouts\n\nFixes #968\n", "commitDateTime": "2017-11-12 13:32:10", "authoredDateTime": "2017-11-12 13:32:10", "commitGitStats": [{"filePath": "CHANGES", "insertions": 3, "deletions": 0, "lines": 3}, {"filePath": "src/main/java/org/jsoup/internal/ConstrainableInputStream.java", "insertions": 2, "deletions": 2, "lines": 4}, {"filePath": "src/test/java/org/jsoup/integration/ConnectTest.java", "insertions": 11, "deletions": 0, "lines": 11}], "commitSpoonAstDiffStats": [{"spoonFilePath": "ConstrainableInputStream.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.internal.ConstrainableInputStream", "TOT": 2, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.internal.ConstrainableInputStream.expired()", "TOT": 2, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 1}]}, {"spoonFilePath": "ConnectTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.integration.ConnectTest.infiniteReadSupported()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["c19acbb96c1c02deb310488677201683f6309708"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 2, "deletions": 2, "lines": 4, "gitFilesChange": 1}, "spoonStatsSummary": {"TOT": 4, "UPD": 0, "INS": 2, "MOV": 0, "DEL": 2, "spoonFilesChanged": 1, "spoonMethodsChanged": 2}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/internal"], "changesInPackagesSPOON": ["org.jsoup.internal.ConstrainableInputStream", "org.jsoup.internal.ConstrainableInputStream.expired()"]}, {"title": "Attribute parsing drops a character on buffer boundary", "body": "Version 1.11.1 does not handle attribute value parsing correctly when attribute value extends through the end of the character buffer (32768 characters). Jsoup will drop the next character to be read after a buffer refill.\r\n\r\nHere's a simple code snippet reproducing the bug. The character X is dropped by jsoup.\r\n\r\n```\r\nimport org.jsoup.Jsoup;\r\nimport org.jsoup.nodes.Document;\r\n\r\npublic class JsoupRepro {\r\n\r\n    public static void main(String[] args) {\r\n\r\n        final String preamble = \"<img src=\\\"data:image/png;base64,\";\r\n        final StringBuilder builder = new StringBuilder(preamble);\r\n\r\n        final int charsToFillBuffer = 1024 * 32 - preamble.length();\r\n        for (int i = 0; i < charsToFillBuffer; i++) {\r\n            builder.append('a');\r\n        }\r\n\r\n        builder.append('X'); // First character to cross character buffer boundary\r\n        builder.append(\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\\\" />\\n\");\r\n\r\n        final String inputHtml = builder.toString();\r\n        final Document parsedOutput = Jsoup.parse(inputHtml);\r\n\r\n        final String imgSource = parsedOutput.select(\"img\").attr(\"src\");\r\n\r\n        System.out.println(\"Parsed imgSrc contains character X: \" + imgSource.contains(\"X\"));\r\n        System.out.println(parsedOutput);\r\n    }\r\n}\r\n```", "url": "https://github.com/jhy/jsoup/issues/967", "user": "jpsrn", "labels": ["bug"], "created": "2017-11-08 18:51:13", "closed": "2017-11-10 17:22:36", "commits": {"1ece207d4d14336c405e9e3c2edee3f1cf88d14d": {"commitGHEventType": "closed", "commitUser": "jhy"}, "e76922661ce7d97c1730052f60062d1e2eb328c4": {"commitGHEventType": "referenced", "commitUser": "jhy"}}, "ttf": 1.0002777777777778, "commitsDetails": [{"commitHash": "1ece207d4d14336c405e9e3c2edee3f1cf88d14d", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["adb7a15a1e2dd6742a25592602a6e8ee77b518b6"], "nameRev": "1ece207d4d14336c405e9e3c2edee3f1cf88d14d tags/jsoup-1.11.2~26", "commitMessage": "Handle empty buffer in attribute value read\n\nFixes #967\n", "commitDateTime": "2017-11-10 09:22:20", "authoredDateTime": "2017-11-10 09:22:20", "commitGitStats": [{"filePath": "CHANGES", "insertions": 4, "deletions": 0, "lines": 4}, {"filePath": "src/main/java/org/jsoup/parser/CharacterReader.java", "insertions": 1, "deletions": 1, "lines": 2}, {"filePath": "src/main/java/org/jsoup/parser/TokeniserState.java", "insertions": 6, "deletions": 3, "lines": 9}, {"filePath": "src/test/java/org/jsoup/parser/TokeniserTest.java", "insertions": 37, "deletions": 0, "lines": 37}], "commitSpoonAstDiffStats": [{"spoonFilePath": "CharacterReader.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.CharacterReader", "TOT": 1, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 1}]}, {"spoonFilePath": "TokeniserState.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.TokeniserState.38.read(org.jsoup.parser.Tokeniser,org.jsoup.parser.CharacterReader)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.TokeniserState.39.read(org.jsoup.parser.Tokeniser,org.jsoup.parser.CharacterReader)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.TokeniserState.40.read(org.jsoup.parser.Tokeniser,org.jsoup.parser.CharacterReader)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "TokeniserTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.TokeniserTest", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}, {"commitHash": "e76922661ce7d97c1730052f60062d1e2eb328c4", "commitGHEventType": "referenced", "commitUser": "jhy", "commitParents": ["1ece207d4d14336c405e9e3c2edee3f1cf88d14d"], "nameRev": "e76922661ce7d97c1730052f60062d1e2eb328c4 tags/jsoup-1.11.2~25", "commitMessage": "Correct other buffer underrun chances\n\nRelated to #967\n", "commitDateTime": "2017-11-10 13:56:15", "authoredDateTime": "2017-11-10 13:56:15", "commitGitStats": [{"filePath": "src/main/java/org/jsoup/parser/TokeniserState.java", "insertions": 8, "deletions": 3, "lines": 11}, {"filePath": "src/test/java/org/jsoup/parser/TokeniserTest.java", "insertions": 45, "deletions": 1, "lines": 46}], "commitSpoonAstDiffStats": [{"spoonFilePath": "TokeniserState.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.TokeniserState.10.read(org.jsoup.parser.Tokeniser,org.jsoup.parser.CharacterReader)", "TOT": 5, "UPD": 0, "INS": 4, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.parser.TokeniserState.35.read(org.jsoup.parser.Tokeniser,org.jsoup.parser.CharacterReader)", "TOT": 2, "UPD": 0, "INS": 2, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "TokeniserTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.TokeniserTest.bufferUpInAttributeVal()", "TOT": 1, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.parser.TokeniserTest.handleSuperLargeTagNames()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.TokeniserTest.handleSuperLargeAttributeName()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["1ece207d4d14336c405e9e3c2edee3f1cf88d14d", "e76922661ce7d97c1730052f60062d1e2eb328c4"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 2, "gitStatsSummary": {"insertions": 15, "deletions": 7, "lines": 22, "gitFilesChange": 2}, "spoonStatsSummary": {"TOT": 11, "UPD": 0, "INS": 9, "MOV": 0, "DEL": 2, "spoonFilesChanged": 2, "spoonMethodsChanged": 6}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/parser"], "changesInPackagesSPOON": ["org.jsoup.parser.TokeniserState.35.read(org.jsoup.parser.Tokeniser,org.jsoup.parser.CharacterReader)", "org.jsoup.parser.TokeniserState.40.read(org.jsoup.parser.Tokeniser,org.jsoup.parser.CharacterReader)", "org.jsoup.parser.TokeniserState.38.read(org.jsoup.parser.Tokeniser,org.jsoup.parser.CharacterReader)", "org.jsoup.parser.TokeniserState.10.read(org.jsoup.parser.Tokeniser,org.jsoup.parser.CharacterReader)", "org.jsoup.parser.TokeniserState.39.read(org.jsoup.parser.Tokeniser,org.jsoup.parser.CharacterReader)", "org.jsoup.parser.CharacterReader"]}, {"title": "version 1.11.1 java.lang.StackOverflowError", "body": "version 1.10.3 no problem\r\nversion 1.11.1 java.lang.StackOverflowError\r\nExample URL\uff1a\r\nhttp://szshb.nxszs.gov.cn/\r\nhttp://www.lnfsfda.gov.cn/\r\nhttp://www.beihai.gov.cn/\r\nhttp://www.fsepb.gov.cn/\r\nhttp://www.bhem.gov.cn\r\n", "url": "https://github.com/jhy/jsoup/issues/966", "user": "hipai", "labels": ["bug"], "created": "2017-11-07 03:29:58", "closed": "2017-11-07 06:30:04", "commits": {"adb7a15a1e2dd6742a25592602a6e8ee77b518b6": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 0.0002777777777777778, "commitsDetails": [{"commitHash": "adb7a15a1e2dd6742a25592602a6e8ee77b518b6", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["1b38f80d623310e84c87b2d708ed0ab648dfafc5"], "nameRev": "adb7a15a1e2dd6742a25592602a6e8ee77b518b6 tags/jsoup-1.11.2~27", "commitMessage": "Start stack search at right spot\n\nFixes a bug in the in-scope search, which was starting in the middle instead of the bottom when trying to limit the stack depth search. That meant that when generating implied end-tags, the stack wasn't getting shorter, so it tried to generate end tags for days, and ultimately threw a StackOverflowDetect.\n\n(Which is somewhat ironic, because the max depth was set to prevent a different STE... Le Sigh.)\n\nFixes #966\n", "commitDateTime": "2017-11-06 22:28:56", "authoredDateTime": "2017-11-06 22:28:56", "commitGitStats": [{"filePath": "CHANGES", "insertions": 5, "deletions": 1, "lines": 6}, {"filePath": "src/main/java/org/jsoup/parser/HtmlTreeBuilder.java", "insertions": 8, "deletions": 8, "lines": 16}, {"filePath": "src/test/java/org/jsoup/integration/UrlConnectTest.java", "insertions": 9, "deletions": 0, "lines": 9}, {"filePath": "src/test/java/org/jsoup/parser/HtmlParserTest.java", "insertions": 13, "deletions": 0, "lines": 13}], "commitSpoonAstDiffStats": [{"spoonFilePath": "HtmlTreeBuilder.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilder.inSpecificScope(java.lang.String[],java.lang.String[],java.lang.String[])", "TOT": 14, "UPD": 3, "INS": 3, "MOV": 3, "DEL": 5}]}, {"spoonFilePath": "UrlConnectTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.integration.UrlConnectTest.handles966()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "HtmlParserTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.HtmlParserTest.testHandlesDeepSpans()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["adb7a15a1e2dd6742a25592602a6e8ee77b518b6"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 8, "deletions": 8, "lines": 16, "gitFilesChange": 1}, "spoonStatsSummary": {"TOT": 14, "UPD": 3, "INS": 3, "MOV": 3, "DEL": 5, "spoonFilesChanged": 1, "spoonMethodsChanged": 1}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/parser"], "changesInPackagesSPOON": ["org.jsoup.parser.HtmlTreeBuilder.inSpecificScope(java.lang.String[],java.lang.String[],java.lang.String[])"]}, {"title": "Method nextElementSibling() returns null after adding an element to a document that was cloned", "body": "If I clone a document, and add an element by the method `after()`, and try to get the new element by the method `nextElementSibling()` I get null. In the same time the method `nextSibling()` successfully returns this element.\r\nIf I do the same with the original document everything is fine.\r\n\r\nCode:\r\n\r\n    String html = \"<!DOCTYPE html><html lang=\\\"en\\\"><head></head><body><div>Initial element</div></body></html>\";\r\n    Document original = Jsoup.parse(html);\r\n    Document clone = original.clone();\r\n\r\n    Element originalElement = original.body().child(0);\r\n    originalElement.after(\"<div>New element</div>\");\r\n    Element originalNextElementSibling = originalElement.nextElementSibling();\r\n    Element originalNextSibling = (Element) originalElement.nextSibling();\r\n    System.out.println(\"originalNextElementSibling:\\n\" + originalNextElementSibling);\r\n    System.out.println(\"originalNextSibling:\\n\" + originalNextSibling);\r\n    System.out.println();\r\n\r\n    Element cloneElement = clone.body().child(0);\r\n    cloneElement.after(\"<div>New element</div>\");\r\n    Element cloneNextElementSibling = cloneElement.nextElementSibling();\r\n    Element cloneNextSibling = (Element) cloneElement.nextSibling();\r\n    System.out.println(\"cloneNextElementSibling:\\n\" + cloneNextElementSibling);\r\n    System.out.println(\"cloneNextSibling:\\n\" + cloneNextSibling);\r\n\r\nOutput:\r\n\r\n    originalNextElementSibling:\r\n    <div>\r\n     New element\r\n    </div>\r\n    originalNextSibling:\r\n    <div>\r\n     New element\r\n    </div>\r\n\r\n    cloneNextElementSibling:\r\n    null\r\n    cloneNextSibling:\r\n    <div>\r\n    New element\r\n    </div>\r\n", "url": "https://github.com/jhy/jsoup/issues/951", "user": "khdimon", "labels": ["bug"], "created": "2017-10-09 08:02:46", "closed": "2017-10-09 21:55:39", "commits": {"c324fabe86c0a59eb635610dc85d8d7a7be25c74": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 0.0002777777777777778, "commitsDetails": [{"commitHash": "c324fabe86c0a59eb635610dc85d8d7a7be25c74", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["22a17d24279450e7e214b57beb4c0bda5f3698e5"], "nameRev": "c324fabe86c0a59eb635610dc85d8d7a7be25c74 tags/jsoup-1.11.1~22", "commitMessage": "Notifications to cloned elements were incorrectly delivered to the original element.\n\nFixes #951\n", "commitDateTime": "2017-10-09 14:55:26", "authoredDateTime": "2017-10-09 14:55:26", "commitGitStats": [{"filePath": "CHANGES", "insertions": 3, "deletions": 0, "lines": 3}, {"filePath": "src/main/java/org/jsoup/nodes/Element.java", "insertions": 8, "deletions": 6, "lines": 14}, {"filePath": "src/test/java/org/jsoup/nodes/ElementTest.java", "insertions": 25, "deletions": 1, "lines": 26}], "commitSpoonAstDiffStats": [{"spoonFilePath": "Element.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.Element.doClone(org.jsoup.nodes.Node)", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Element.ensureChildNodes()", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Element.NodeList.onContentsChanged()", "TOT": 2, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.Element.NodeList", "TOT": 4, "UPD": 0, "INS": 4, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "ElementTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.ElementTest.testNextElementSiblingAfterClone()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["c324fabe86c0a59eb635610dc85d8d7a7be25c74"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 8, "deletions": 6, "lines": 14, "gitFilesChange": 1}, "spoonStatsSummary": {"TOT": 8, "UPD": 2, "INS": 5, "MOV": 0, "DEL": 1, "spoonFilesChanged": 1, "spoonMethodsChanged": 4}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/nodes"], "changesInPackagesSPOON": ["org.jsoup.nodes.Element.doClone(org.jsoup.nodes.Node)", "org.jsoup.nodes.Element.NodeList", "org.jsoup.nodes.Element.NodeList.onContentsChanged()", "org.jsoup.nodes.Element.ensureChildNodes()"]}, {"title": "Incorrect handling of self-closing tags noframes, style and title cause remainder of document to be html-escaped", "body": "Given the input:\r\n\r\n```html\r\n<html>\r\n<head>\r\n\t<style />   <!-- < - - this is the culprit -->\r\n</head>\r\n<body>\r\n\t<p>Whatever</p>\r\n</body>\r\n</html>\r\n```\r\n\r\nJSoup 1.8.2 and also http://try.jsoup.org/~lJwWpjXYUSTBeBZhdEnS3Mt56g4 will produce:\r\n```html\r\n    <html>\r\n     <head> \r\n      <style></style>\r\n     </head>\r\n     <body>\r\n       &lt;/head&gt; &lt;body&gt; &lt;p&gt;Whatever&lt;/p&gt; &lt;/body&gt; &lt;/html&gt;\r\n     </body>\r\n    </html>\r\n```\r\n\r\nWith `<title/>` instead of `<style/>`, the result is different but still wrong (http://try.jsoup.org/~BZ3uoMki-r904fZxUOWJgLJO7r8 ):\r\n```html\r\n<html>\r\n <head> \r\n  <title></title>\r\n </head>\r\n <body>\r\n   &lt;/head&gt;  \r\n  <p>Whatever</p>  \r\n </body>\r\n</html>\r\n```\r\n\r\nThat weirdness was fixed for `<script>` with Issue #305: http://try.jsoup.org/~3Ms6TQCrrdaA_uPgxgURYYvwFAg\r\n```html\r\n<html>\r\n <head> \r\n  <script></script> \r\n </head> \r\n <body> \r\n  <p>Whatever</p>  \r\n </body>\r\n</html>\r\n```\r\n\r\nLooking [at the source](https://github.com/jhy/jsoup/blob/master/src/main/java/org/jsoup/parser/HtmlTreeBuilderState.java#L106), it seems only the HtmlTreeBuilderState handling for `<noframes>`, `<style>` and `<title>` in the methods `handleRawText` and `handleRcData` doesn't get along with the self-closing tags.\r\nAny other tagname I've checked (and I tried to cover all branches of that `case StartTag` switch) results in a good parse similar to the `<script>` case, which is what I'd expect.\r\n\r\nThanks for looking into this!\r\n", "url": "https://github.com/jhy/jsoup/issues/906", "user": "hannibal218bc", "labels": ["bug"], "created": "2017-06-27 02:59:41", "closed": "2017-06-29 22:24:19", "commits": {"195566fa6d4092c6983fbf497c37ae53a188fa90": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 2.000277777777778, "commitsDetails": [{"commitHash": "195566fa6d4092c6983fbf497c37ae53a188fa90", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["c4f6a622ef63687c23a21e795d7a3e32de222d2f"], "nameRev": "195566fa6d4092c6983fbf497c37ae53a188fa90 tags/jsoup-1.11.1~70", "commitMessage": "Allow rctext / rcdata tags to self -close\n\nFixes #906\n", "commitDateTime": "2017-06-29 15:24:05", "authoredDateTime": "2017-06-29 15:24:05", "commitGitStats": [{"filePath": "CHANGES", "insertions": 4, "deletions": 0, "lines": 4}, {"filePath": "src/main/java/org/jsoup/parser/HtmlTreeBuilderState.java", "insertions": 2, "deletions": 2, "lines": 4}, {"filePath": "src/test/java/org/jsoup/parser/HtmlParserTest.java", "insertions": 18, "deletions": 0, "lines": 18}], "commitSpoonAstDiffStats": [{"spoonFilePath": "HtmlTreeBuilderState.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilderState.handleRcData(org.jsoup.parser.Token$StartTag,org.jsoup.parser.HtmlTreeBuilder)", "TOT": 1, "UPD": 0, "INS": 0, "MOV": 1, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilderState.handleRawtext(org.jsoup.parser.Token$StartTag,org.jsoup.parser.HtmlTreeBuilder)", "TOT": 1, "UPD": 0, "INS": 0, "MOV": 1, "DEL": 0}]}, {"spoonFilePath": "HtmlParserTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.HtmlParserTest.handlesKnownEmptyNoFrames()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.HtmlParserTest.handlesKnownEmptyStyle()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.HtmlParserTest.handlesKnownEmptyTitle()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["195566fa6d4092c6983fbf497c37ae53a188fa90"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 2, "deletions": 2, "lines": 4, "gitFilesChange": 1}, "spoonStatsSummary": {"TOT": 2, "UPD": 0, "INS": 0, "MOV": 2, "DEL": 0, "spoonFilesChanged": 1, "spoonMethodsChanged": 2}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/parser"], "changesInPackagesSPOON": ["org.jsoup.parser.HtmlTreeBuilderState.handleRcData(org.jsoup.parser.Token$StartTag,org.jsoup.parser.HtmlTreeBuilder)", "org.jsoup.parser.HtmlTreeBuilderState.handleRawtext(org.jsoup.parser.Token$StartTag,org.jsoup.parser.HtmlTreeBuilder)"]}, {"title": "Form element is discarded due to LOWERCASE content encoding", "body": "The following HTML parses incorrectly ONLY when using a Jsoup.parse method that routes through the DataUtil class (where character set is determined from META comparisons). Parsing it from a string works just fine.\r\n\r\n[file.html.txt](https://github.com/jhy/jsoup/files/971788/file.html.txt)\r\n```\r\n<!doctype html>\r\n<html lang=en>\r\n<meta charset=utf-8>\r\n<title>FormData: has</title>\r\n<script src=\"../../resources/testharness.js\"></script>\r\n<script src=\"../../resources/testharnessreport.js\"></script>\r\n    <link rel=\"help\" href=\"https://xhr.spec.whatwg.org/#dom-formdata-get\" />\r\n    <link rel=\"help\" href=\"https://xhr.spec.whatwg.org/#dom-formdata-getall\" />\r\n<div id=\"log\"></div>\r\n<form id=\"form\">\r\n    <input type=\"hidden\" name=\"key\" value=\"value1\">\r\n    <input type=\"hidden\" name=\"key\" value=\"value2\">\r\n</form>\r\n<form id=\"empty-form\" />\r\n```\r\n\r\nThe form with id=\"form\" gets discarded, the result of processing is the following:\r\n\r\n```\r\n<!doctype html>\r\n<html lang=\"en\">\r\n <head>\r\n  <meta charset=\"utf-8\">\r\n  <title>FormData: has</title>\r\n  <script src=\"../../resources/testharness.js\"></script>\r\n  <script src=\"../../resources/testharnessreport.js\"></script>\r\n  <link rel=\"help\" href=\"https://xhr.spec.whatwg.org/#dom-formdata-get\">\r\n  <link rel=\"help\" href=\"https://xhr.spec.whatwg.org/#dom-formdata-getall\">\r\n </head>\r\n <body>\r\n  <div id=\"log\"></div>\r\n  <input type=\"hidden\" name=\"key\" value=\"value1\">\r\n  <input type=\"hidden\" name=\"key\" value=\"value2\">\r\n  <form id=\"empty-form\">\r\n  </form>\r\n </body>\r\n</html>\r\n```\r\n\r\nIf the charset is changed from utf-8 to UTF-8 then it works out as intended.  So, definitely something to be done there about case insensitive comparisons, but that certainly isn't the end of the issue.\r\n\r\nAs far as I can tell, the Document is already incorrect BEFORE setting the doc.outputSettings().charset(..) in DataUtil.parseByteData(..). Wondering if there is perhaps some state that exists on the TreeBuilder or Parser instance overall.\r\n\r\n\r\n\r\n", "url": "https://github.com/jhy/jsoup/issues/877", "user": "peskybp", "labels": ["bug", "fixed"], "created": "2017-05-02 19:41:56", "closed": "2017-06-13 02:48:18", "commits": {}, "ttf": 41.000277777777775, "commitsDetails": []}, {"title": "Error: \"Self closing flag not acknowledged\" for self closing break", "body": "This code snippet returns invalid html with the message: \"Self closing flag not acknowledged\"\r\n```java\r\nJsoup.isValid(\"<p>test<br/>test</p>\")\r\n```\r\nWhy breaks could not be self closing?\r\n", "url": "https://github.com/jhy/jsoup/issues/868", "user": "buett", "labels": ["bug"], "created": "2017-04-15 15:01:32", "closed": "2017-06-25 17:45:10", "commits": {"35bceca331e07938a9c4cd62d68e08740cd39575": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 71.00027777777778, "commitsDetails": [{"commitHash": "35bceca331e07938a9c4cd62d68e08740cd39575", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["d51f6539c6245847f4296230077faade0e5d6973"], "nameRev": "35bceca331e07938a9c4cd62d68e08740cd39575 tags/jsoup-1.11.1~73", "commitMessage": "Cleaned up self-closing ack and error track\n\nFixes #868\n", "commitDateTime": "2017-06-25 10:44:55", "authoredDateTime": "2017-06-25 10:44:55", "commitGitStats": [{"filePath": "CHANGES", "insertions": 3, "deletions": 0, "lines": 3}, {"filePath": "src/main/java/org/jsoup/parser/HtmlTreeBuilder.java", "insertions": 4, "deletions": 5, "lines": 9}, {"filePath": "src/main/java/org/jsoup/parser/HtmlTreeBuilderState.java", "insertions": 0, "deletions": 3, "lines": 3}, {"filePath": "src/main/java/org/jsoup/parser/Tokeniser.java", "insertions": 1, "deletions": 13, "lines": 14}, {"filePath": "src/main/java/org/jsoup/parser/XmlTreeBuilder.java", "insertions": 0, "deletions": 1, "lines": 1}, {"filePath": "src/test/java/org/jsoup/parser/HtmlParserTest.java", "insertions": 25, "deletions": 1, "lines": 26}], "commitSpoonAstDiffStats": [{"spoonFilePath": "HtmlTreeBuilder.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilder.insertEmpty(org.jsoup.parser.Token$StartTag)", "TOT": 5, "UPD": 1, "INS": 1, "MOV": 1, "DEL": 2}]}, {"spoonFilePath": "HtmlTreeBuilderState.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilderState.7.process(org.jsoup.parser.Token,org.jsoup.parser.HtmlTreeBuilder)", "TOT": 3, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 3}]}, {"spoonFilePath": "Tokeniser.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.Tokeniser", "TOT": 1, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.parser.Tokeniser.read()", "TOT": 1, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.parser.Tokeniser.emit(org.jsoup.parser.Token)", "TOT": 3, "UPD": 0, "INS": 0, "MOV": 1, "DEL": 2}, {"spoonMethodName": "org.jsoup.parser.Tokeniser.acknowledgeSelfClosingFlag()", "TOT": 1, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.parser.Tokeniser.error(java.lang.String)", "TOT": 1, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 1}]}, {"spoonFilePath": "XmlTreeBuilder.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.XmlTreeBuilder.insert(org.jsoup.parser.Token$StartTag)", "TOT": 1, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 1}]}, {"spoonFilePath": "HtmlParserTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.HtmlParserTest.tracksErrorsWhenRequested()", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.HtmlParserTest.selfClosingVoidIsNotAnError()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.HtmlParserTest.selfClosingOnNonvoidIsError()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["35bceca331e07938a9c4cd62d68e08740cd39575"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 5, "deletions": 22, "lines": 27, "gitFilesChange": 4}, "spoonStatsSummary": {"TOT": 16, "UPD": 1, "INS": 1, "MOV": 2, "DEL": 12, "spoonFilesChanged": 4, "spoonMethodsChanged": 8}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/parser"], "changesInPackagesSPOON": ["org.jsoup.parser.Tokeniser.read()", "org.jsoup.parser.HtmlTreeBuilderState.7.process(org.jsoup.parser.Token,org.jsoup.parser.HtmlTreeBuilder)", "org.jsoup.parser.HtmlTreeBuilder.insertEmpty(org.jsoup.parser.Token$StartTag)", "org.jsoup.parser.Tokeniser", "org.jsoup.parser.Tokeniser.error(java.lang.String)", "org.jsoup.parser.XmlTreeBuilder.insert(org.jsoup.parser.Token$StartTag)", "org.jsoup.parser.Tokeniser.acknowledgeSelfClosingFlag()", "org.jsoup.parser.Tokeniser.emit(org.jsoup.parser.Token)"]}, {"title": "Adds a line break on cleaning the text for the u tag", "body": "```\r\nString msg = \"t<u>es</u>t <b>on</b> <i>f</i><u>ir</u>e\";\r\nmsg = Jsoup.clean(msg, Whitelist.simpleText());\r\nSystem.out.println(msg);\r\n```\r\nOutput: \r\n```\r\nt\r\n<u>es</u>t \r\n<b>on</b> \r\n<i>f</i>\r\n<u>ir</u>e\r\n\r\n```\r\n", "url": "https://github.com/jhy/jsoup/issues/851", "user": "coded9", "labels": ["bug"], "created": "2017-03-24 05:18:44", "closed": "2020-02-02 17:22:15", "commits": {"97758e74cbd39552f711480a4d1e4e5fe058efea": {"commitGHEventType": "referenced", "commitUser": "jhy"}}, "ttf": 1045.0002777777777, "commitsDetails": [{"commitHash": "97758e74cbd39552f711480a4d1e4e5fe058efea", "commitGHEventType": "referenced", "commitUser": "jhy", "commitParents": ["279fbe120c5bd4221478481b78d31ddf41475360"], "nameRev": "97758e74cbd39552f711480a4d1e4e5fe058efea tags/1.12.2~22", "commitMessage": "Test for #851\n", "commitDateTime": "2020-02-02 09:29:32", "authoredDateTime": "2020-02-02 09:29:32", "commitGitStats": [{"filePath": "src/test/java/org/jsoup/parser/HtmlParserTest.java", "insertions": 11, "deletions": 0, "lines": 11}], "commitSpoonAstDiffStats": [{"spoonFilePath": "HtmlParserTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.HtmlParserTest.testUNewlines()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["97758e74cbd39552f711480a4d1e4e5fe058efea"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 0, "gitStatsSummary": {"insertions": 0, "deletions": 0, "lines": 0, "gitFilesChange": 0}, "spoonStatsSummary": {"TOT": 0, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 0, "spoonFilesChanged": 0, "spoonMethodsChanged": 0}, "statsSkippedReason": "", "changesInPackagesGIT": [], "changesInPackagesSPOON": []}, {"title": "W3CDom Helper fails to convert whenever some namespace declarations are missing", "body": "Hello\r\n\r\nI've been running into an issue where if I convert my Jsoup parsed document into a org.w3c.dom.Document with the W3CDom helper and that document happens to be missing namespace declarations we get the following exception:\r\n\r\n```\r\nNAMESPACE_ERR: An attempt is made to create or change an object in a way which is incorrect with regard to namespaces.\r\n```\r\n\r\nI've looked into this a bit and first thing I tried was using a locally forked version of the W3CDom helper that simply turned this flag off:\r\n\r\n```\r\nfactory.setNamespaceAware(false);\r\n```\r\n\r\nHowever the issue continued, so instead I simply hacked the code to completely ignore namespaces\r\n\r\n```\r\n// (csueiras): We purposely remove any namespace because we get malformed HTML that might not be\r\n// declaring all of it's namespaces!\r\nElement el = doc.createElementNS(\"\", sourceEl.tagName());\r\n```\r\n\r\nI am not completely sure if this will have any side effects, but it resolved the issues with the document I'm interacting with. I would be glad to provide a pull request if I have some guidance regarding how to properly handle this issue if it can be handled by Jsoup.\r\n\r\nThe document I'm having issues is simply making use of the Facebook like buttons using tags like this:\r\n\r\n```\r\n<fb:like ...\r\n```\r\n\r\nBut there's no namespace declaration for \"fb\".", "url": "https://github.com/jhy/jsoup/issues/848", "user": "csueiras", "labels": ["bug"], "created": "2017-03-21 01:24:28", "closed": "2018-04-29 23:16:22", "commits": {"a810d2e3615da9a37ad74a7db2ca8bc6945ab9a8": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 404.0002777777778, "commitsDetails": [{"commitHash": "a810d2e3615da9a37ad74a7db2ca8bc6945ab9a8", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["bdf1df7eb3ca76cdcdaca38f7df5d941bbb1c664"], "nameRev": "a810d2e3615da9a37ad74a7db2ca8bc6945ab9a8 tags/jsoup-1.12.1~33", "commitMessage": "Don't blow up if a namespace is undefined\n\nFixes #848\n", "commitDateTime": "2018-04-29 16:16:12", "authoredDateTime": "2018-04-29 16:16:12", "commitGitStats": [{"filePath": "CHANGES", "insertions": 4, "deletions": 0, "lines": 4}, {"filePath": "src/main/java/org/jsoup/helper/W3CDom.java", "insertions": 4, "deletions": 1, "lines": 5}, {"filePath": "src/test/java/org/jsoup/helper/W3CDomTest.java", "insertions": 19, "deletions": 0, "lines": 19}], "commitSpoonAstDiffStats": [{"spoonFilePath": "W3CDom.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.helper.W3CDom.W3CBuilder.head(org.jsoup.nodes.Node,int)", "TOT": 6, "UPD": 0, "INS": 2, "MOV": 3, "DEL": 1}]}, {"spoonFilePath": "W3CDomTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.helper.W3CDomTest.treatsUndeclaredNamespaceAsLocalName()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["a810d2e3615da9a37ad74a7db2ca8bc6945ab9a8"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 4, "deletions": 1, "lines": 5, "gitFilesChange": 1}, "spoonStatsSummary": {"TOT": 6, "UPD": 0, "INS": 2, "MOV": 3, "DEL": 1, "spoonFilesChanged": 1, "spoonMethodsChanged": 1}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/helper"], "changesInPackagesSPOON": ["org.jsoup.helper.W3CDom.W3CBuilder.head(org.jsoup.nodes.Node,int)"]}, {"title": "Wrong parsing of case sensitive HTML ", "body": "Executing : \r\n\r\n            String xml=\"<r><X>A</X><y>B</y></r>\";\r\n\t\tParser parser = Parser.htmlParser();\r\n\t\tparser.settings(ParseSettings.preserveCase);\r\n\t\torg.jsoup.nodes.Document _doc = parser.parseInput(xml, \"/\");\r\n\r\n\r\nResults in : \r\n&lt;html&gt;\r\n &lt;head&gt;&lt;/head&gt;\r\n &lt;body&gt;\r\n  &lt;r&gt;\r\n   &lt;X&gt;\r\n    A\r\n    &lt;y&gt;\r\n     B\r\n    &lt;/y&gt;\r\n   &lt;/X&gt;\r\n  &lt;/r&gt;\r\n &lt;/body&gt;\r\n&lt;/html&gt;\r\n\r\nManual hacking : remove all .toLowerCase() invocations from Token.java (normalName=...)\r\n\r\n\r\n", "url": "https://github.com/jhy/jsoup/issues/819", "user": "tran4o", "labels": ["bug"], "created": "2017-01-27 12:09:17", "closed": "2017-06-10 22:52:00", "commits": {"b934c5d3e30917de86796c89fcb7cd000f642a80": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 134.00027777777777, "commitsDetails": [{"commitHash": "b934c5d3e30917de86796c89fcb7cd000f642a80", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["2f6eabc9f0999421acf032c79f3106215c013580"], "nameRev": "b934c5d3e30917de86796c89fcb7cd000f642a80 tags/jsoup-1.10.3~7", "commitMessage": "Make sure unkown tags close correctly when in insensitive case mode\n\nFixes #819\n", "commitDateTime": "2017-06-10 15:51:45", "authoredDateTime": "2017-06-10 15:51:45", "commitGitStats": [{"filePath": "CHANGES", "insertions": 3, "deletions": 0, "lines": 3}, {"filePath": "src/main/java/org/jsoup/parser/HtmlTreeBuilderState.java", "insertions": 1, "deletions": 1, "lines": 2}, {"filePath": "src/test/java/org/jsoup/parser/HtmlParserTest.java", "insertions": 9, "deletions": 0, "lines": 9}], "commitSpoonAstDiffStats": [{"spoonFilePath": "HtmlTreeBuilderState.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilderState.7.anyOtherEndTag(org.jsoup.parser.Token,org.jsoup.parser.HtmlTreeBuilder)", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "HtmlParserTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.HtmlParserTest.caseSensitiveParseTree()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["b934c5d3e30917de86796c89fcb7cd000f642a80"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 1, "deletions": 1, "lines": 2, "gitFilesChange": 1}, "spoonStatsSummary": {"TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0, "spoonFilesChanged": 1, "spoonMethodsChanged": 1}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/parser"], "changesInPackagesSPOON": ["org.jsoup.parser.HtmlTreeBuilderState.7.anyOtherEndTag(org.jsoup.parser.Token,org.jsoup.parser.HtmlTreeBuilder)"]}, {"title": "Unexpected case sensitivity for CSS class selector", "body": "Hi,\r\ni use JSoup version 1.10.2 and noticed an unexpected case sensitivity for a CSS class selector. I tried to parse the following HTML document with capitalized class attributes:\r\n\r\n```html\r\n<!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01 Transitional//EN' 'http://www.w3.org/TR/html4/loose.dtd'>\r\n<HTML>\r\n  <HEAD>\r\n    <FORM Method='POST' name='Form' Action='Action'>\r\n      <TABLE Class='Lst'>\r\n        <TR Class='Lst'>\r\n          <TH Class='Lst'>Header 1</TH>\r\n          <TH Class='Lst'>Header 2</TH>\r\n          <TH Class='Lst'>Header 3</TH>\r\n        </TR>\r\n        <TR Class='Lst1'>\r\n          <TD Class='Lst'>Cell 1</TD>\r\n          <TD Class='Lst'>Cell 2</TD>\r\n          <TD Class='Lst'>Cell 3</TD>\r\n        </TR>\r\n      </TABLE>\r\n    </FORM>\r\n  </BODY>\r\n</HTML>\r\n```\r\n\r\nI wanted to select the table using the selector _\"html > body > form table.Lst\"_ because I expected it to choose the table with the class attribute \"Lst\", but that did not work. The selector _\"html > body > form table[class=Lst]\"_ works. Is this a bug?\r\n\r\nHere is the parser code:\r\n\r\n```java\r\ntry {\r\n  final String htmlStr = \"<!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01 Transitional//EN' 'http://www.w3.org/TR/html4/loose.dtd'>\\n\"\r\n      + \"<HTML>\\n\"\r\n      + \"  <HEAD>\\n\"\r\n      + \"    <FORM Method='POST' name='Form' Action='Action'>\\n\"\r\n      + \"      <TABLE Class='Lst'>\\n\"\r\n      + \"        <TR Class='Lst'>\\n\"\r\n      + \"          <TH Class='Lst'>Header 1</TH>\\n\"\r\n      + \"          <TH Class='Lst'>Header 2</TH>\\n\"\r\n      + \"          <TH Class='Lst'>Header 3</TH>\\n\"\r\n      + \"        </TR>\\n\"\r\n      + \"        <TR Class='Lst1'>\\n\"\r\n      + \"          <TD Class='Lst'>Cell 1</TD>\\n\"\r\n      + \"          <TD Class='Lst'>Cell 2</TD>\\n\"\r\n      + \"          <TD Class='Lst'>Cell 3</TD>\\n\"\r\n      + \"        </TR>\\n\"\r\n      + \"      </TABLE>\\n\"\r\n      + \"    </FORM>\\n\"\r\n      + \"  </BODY>\\n\"\r\n      + \"</HTML>\";\r\n  final Document htmlDoc = Jsoup.parse(htmlStr,\r\n      \"\");\r\n\r\n  final Element tableNotOk = htmlDoc.select(\"html > body > form table.Lst\")\r\n      .first();\r\n  final Element tableOk = htmlDoc.select(\"html > body > form table[class=Lst]\")\r\n      .first();\r\n\r\n  Logger.getLogger(this.getClass().getName())\r\n      .log(Level.INFO,\r\n          \"tableNotOk found: ''{0}'', tableOk found: ''{1}''\",\r\n          new Object[]{(tableNotOk != null), (tableOk != null)});\r\n\r\n} catch (UnsupportedCharsetException | ParseException | Selector.SelectorParseException ex) {\r\n  Logger.getLogger(this.getClass().getName())\r\n      .log(Level.SEVERE,\r\n          null,\r\n          ex);\r\n}\r\n```\r\n", "url": "https://github.com/jhy/jsoup/issues/814", "user": "ltlBeBoy", "labels": ["bug"], "created": "2017-01-20 21:17:02", "closed": "2017-01-21 23:27:10", "commits": {"83f01fd864e59fa69c894da06f4a15489222d401": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 1.0002777777777778, "commitsDetails": [{"commitHash": "83f01fd864e59fa69c894da06f4a15489222d401", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["b6dda00bc19f6d3bc4009a6b9a4a932de9640bd4"], "nameRev": "83f01fd864e59fa69c894da06f4a15489222d401 tags/jsoup-1.10.3~19", "commitMessage": "Access the class attribute case-insensitiviely\n\nFixes #814\n", "commitDateTime": "2017-01-21 15:26:56", "authoredDateTime": "2017-01-21 15:26:56", "commitGitStats": [{"filePath": "CHANGES", "insertions": 3, "deletions": 0, "lines": 3}, {"filePath": "src/main/java/org/jsoup/nodes/Attributes.java", "insertions": 4, "deletions": 0, "lines": 4}, {"filePath": "src/main/java/org/jsoup/nodes/Element.java", "insertions": 1, "deletions": 1, "lines": 2}, {"filePath": "src/test/java/org/jsoup/select/ElementsTest.java", "insertions": 17, "deletions": 0, "lines": 17}, {"filePath": "src/test/java/org/jsoup/select/SelectorTest.java", "insertions": 10, "deletions": 0, "lines": 10}], "commitSpoonAstDiffStats": [{"spoonFilePath": "Attributes.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.Attributes.getIgnoreCase(java.lang.String)", "TOT": 2, "UPD": 0, "INS": 2, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "Element.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.Element.hasClass(java.lang.String)", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "ElementsTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.select.ElementsTest.hasClassCaseInsensitive()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "SelectorTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.select.SelectorTest.testByClassCaseInsensitive()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["83f01fd864e59fa69c894da06f4a15489222d401"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 5, "deletions": 1, "lines": 6, "gitFilesChange": 2}, "spoonStatsSummary": {"TOT": 3, "UPD": 1, "INS": 2, "MOV": 0, "DEL": 0, "spoonFilesChanged": 2, "spoonMethodsChanged": 2}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/nodes"], "changesInPackagesSPOON": ["org.jsoup.nodes.Attributes.getIgnoreCase(java.lang.String)", "org.jsoup.nodes.Element.hasClass(java.lang.String)"]}, {"title": "osgi is broken on latest release (1.10.1)", "body": "OSGI is broken on the latest release. Seems the export package versioning is wrong (1.9.2.SNAPSHOT) in the manifest:\r\n\r\nManifest-Version: 1.0\r\nBundle-Description: jsoup HTML parser\r\nBundle-License: https://jsoup.org/license\r\nBundle-SymbolicName: org.jsoup\r\nBuilt-By: jhy\r\nBnd-LastModified: 1477250620812\r\nBundle-ManifestVersion: 2\r\nBundle-DocURL: https://jsoup.org/\r\nBundle-Vendor: Jonathan Hedley\r\nImport-Package: javax.net.ssl,javax.xml.parsers,javax.xml.transform,ja\r\n vax.xml.transform.dom,javax.xml.transform.stream,org.jsoup;version=\"[\r\n 1.9,2)\",org.jsoup.helper;version=\"[1.9,2)\",org.jsoup.nodes;version=\"[\r\n 1.9,2)\",org.jsoup.parser;version=\"[1.9,2)\",org.jsoup.safety;version=\"\r\n [1.9,2)\",org.jsoup.select;version=\"[1.9,2)\",org.w3c.dom\r\nRequire-Capability: osgi.ee;filter:=\"(&(osgi.ee=JavaSE)(version=1.5))\"\r\nTool: Bnd-3.2.0.201605172007\r\nOriginally-Created-By: 1.8.0_65 (Oracle Corporation)\r\nExport-Package: org.jsoup;version=\"1.9.2.SNAPSHOT\";uses:=\"org.jsoup.no\r\n des,org.jsoup.parser,org.jsoup.safety\",org.jsoup.examples;version=\"1.\r\n 9.2.SNAPSHOT\";uses:=\"org.jsoup.nodes\",org.jsoup.helper;version=\"1.9.2\r\n .SNAPSHOT\";uses:=\"javax.xml.parsers,org.jsoup,org.jsoup.nodes,org.jso\r\n up.parser,org.jsoup.select,org.w3c.dom\",org.jsoup.nodes;version=\"1.9.\r\n 2.SNAPSHOT\";uses:=\"org.jsoup,org.jsoup.parser,org.jsoup.select\",org.j\r\n soup.parser;version=\"1.9.2.SNAPSHOT\";uses:=\"org.jsoup.nodes\",org.jsou\r\n p.safety;version=\"1.9.2.SNAPSHOT\";uses:=\"org.jsoup.nodes\",org.jsoup.s\r\n elect;version=\"1.9.2.SNAPSHOT\";uses:=\"org.jsoup.nodes\"\r\nBundle-Name: jsoup\r\nBundle-Version: 1.10.1\r\nCreated-By: Apache Maven Bundle Plugin\r\nBuild-Jdk: 1.8.0_91", "url": "https://github.com/jhy/jsoup/issues/782", "user": "deadcyclo", "labels": ["bug"], "created": "2016-11-02 13:02:50", "closed": "2017-01-05 21:25:24", "commits": {}, "ttf": 64.00027777777778, "commitsDetails": []}, {"title": "Method getElementsByIndexLessThan(index) delivers the root element, too", "body": "Hi,\nI think this method _getElementsByIndexLessThan(index)_ delivers more than the siblings only.\nIt delivers the parent of a siblings and the siblings of the parent. so there's confusion with the index-\nevaluation.\nf.e: [JSoupSiblingTest.zip](https://github.com/jhy/jsoup/files/553360/JSoupSiblingTest.zip)\n\n```\npublic static void main(String[] args) {\n    Document doc = Jsoup.parse(\n            \"<html><body><div><p>before1</p><p>before2</p><p>XXX</p><p>after1</p><p>after2</p></div></body></html>\",\n            \"\");\n    Element body = doc.select(\"body\").first();\n    Elements elems = body.select(\"p:matchesOwn(XXX)\");\n    Element xElem = elems.first();\n    Elements beforeX = xElem.parent().getElementsByIndexLessThan(xElem.elementSiblingIndex());\n\n    int i = 0;\n    for(Element p : beforeX) {\n        p.remove();\n    }\n\n    System.out.println(body);\n\n\n    Document doc2 = Jsoup.parse(\n            \"<html><body><div><p>before1</p><p>before2</p><p>XXX</p><p>after1</p><p>after2</p></div></body></html>\",\n            \"\");\n    body = doc2.select(\"body\").first();\n    elems = body.select(\"p:matchesOwn(XXX)\");\n    xElem = elems.first();\n    Elements afterX = xElem.parent().getElementsByIndexGreaterThan(xElem.elementSiblingIndex());\n\n    for(Element p : afterX) {\n        p.remove();\n    }\n\n    System.out.println(body);\n}\n```\n\n**Output:**\n`LesserThan: <body></body>`\n`GreaterThan: <body><div><p>before1</p><p>before2</p><p>XXX</p></div></body>`\n\n**Expected:**\n`LesserThan: <body><div><p>XXX</p><p>after1</p><p>after2</p></div></body>`\n`GreaterThan: <body><div><p>before1</p><p>before2</p><p>XXX</p></div></body>`\n", "url": "https://github.com/jhy/jsoup/issues/778", "user": "JurMarky", "labels": ["bug"], "created": "2016-10-26 13:40:24", "closed": "2017-10-07 22:39:08", "commits": {}, "ttf": 346.0002777777778, "commitsDetails": []}, {"title": ".append , the node turn in lowcase ", "body": "**Code**\n\n```\nFile file = new File( \"/tomcat/conf/server.xml\" );\nString content = load( file ); \nDocument document = Jsoup.parse (content , \"\" , Parser.xmlParser());\ndocument.append( \"<Connector />\" );\nSystem.out.println( document );\n```\n\n**Result**\n\n```\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n....\n<connector />\n```\n\n**Question**\nhow can append the node in my input , not the lowcase , i am using branch \"parsesettings\"\n", "url": "https://github.com/jhy/jsoup/issues/769", "user": "enzozhong", "labels": ["bug"], "created": "2016-10-11 00:30:10", "closed": "2018-04-29 01:51:55", "commits": {"850a9cc02fb72cc450d1a9dc41912fa80fee9020": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 565.0002777777778, "commitsDetails": [{"commitHash": "850a9cc02fb72cc450d1a9dc41912fa80fee9020", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["bf6667c439a1fa29ea50d531b65633ffe150d16b"], "nameRev": "850a9cc02fb72cc450d1a9dc41912fa80fee9020 tags/jsoup-1.12.1~41", "commitMessage": "Maintain the Parser used when parsing a Document\n\nAllows appropriate fragment parsing as XML or HTML, and remembers case sensitivity choice.\n\nFixes #769\n", "commitDateTime": "2018-04-28 18:51:43", "authoredDateTime": "2018-04-28 18:51:43", "commitGitStats": [{"filePath": "CHANGES", "insertions": 4, "deletions": 0, "lines": 4}, {"filePath": "src/main/java/org/jsoup/nodes/Document.java", "insertions": 22, "deletions": 0, "lines": 22}, {"filePath": "src/main/java/org/jsoup/nodes/Element.java", "insertions": 5, "deletions": 8, "lines": 13}, {"filePath": "src/main/java/org/jsoup/nodes/Node.java", "insertions": 10, "deletions": 3, "lines": 13}, {"filePath": "src/main/java/org/jsoup/parser/HtmlTreeBuilder.java", "insertions": 6, "deletions": 6, "lines": 12}, {"filePath": "src/main/java/org/jsoup/parser/ParseSettings.java", "insertions": 2, "deletions": 2, "lines": 4}, {"filePath": "src/main/java/org/jsoup/parser/Parser.java", "insertions": 16, "deletions": 12, "lines": 28}, {"filePath": "src/main/java/org/jsoup/parser/TreeBuilder.java", "insertions": 12, "deletions": 8, "lines": 20}, {"filePath": "src/main/java/org/jsoup/parser/XmlTreeBuilder.java", "insertions": 24, "deletions": 12, "lines": 36}, {"filePath": "src/test/java/org/jsoup/nodes/ElementTest.java", "insertions": 2, "deletions": 2, "lines": 4}, {"filePath": "src/test/java/org/jsoup/parser/HtmlParserTest.java", "insertions": 16, "deletions": 0, "lines": 16}, {"filePath": "src/test/java/org/jsoup/parser/XmlTreeBuilderTest.java", "insertions": 10, "deletions": 0, "lines": 10}], "commitSpoonAstDiffStats": [{"spoonFilePath": "Document.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.Document", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Document.parser()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Document.parser(org.jsoup.parser.Parser)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Document.createShell(java.lang.String)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "Element.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.Element.append(java.lang.String)", "TOT": 3, "UPD": 2, "INS": 0, "MOV": 1, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Element.prepend(java.lang.String)", "TOT": 3, "UPD": 2, "INS": 0, "MOV": 1, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Element.tagName(java.lang.String)", "TOT": 3, "UPD": 1, "INS": 1, "MOV": 1, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Element.appendElement(java.lang.String)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Element.prependElement(java.lang.String)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "Node.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.Node.addSiblingHtml(int,java.lang.String)", "TOT": 3, "UPD": 2, "INS": 0, "MOV": 1, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Node.wrap(java.lang.String)", "TOT": 3, "UPD": 2, "INS": 0, "MOV": 1, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Node.getParser()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Node.attr(java.lang.String,java.lang.String)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "HtmlTreeBuilder.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilder.initialiseParse(java.io.Reader,java.lang.String,org.jsoup.parser.ParseErrorList,org.jsoup.parser.ParseSettings)", "TOT": 5, "UPD": 3, "INS": 0, "MOV": 0, "DEL": 2}, {"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilder.parseFragment(java.lang.String,org.jsoup.nodes.Element,java.lang.String,org.jsoup.parser.ParseErrorList,org.jsoup.parser.ParseSettings)", "TOT": 6, "UPD": 3, "INS": 0, "MOV": 0, "DEL": 3}, {"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilder.error(org.jsoup.parser.HtmlTreeBuilderState)", "TOT": 6, "UPD": 2, "INS": 2, "MOV": 2, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.HtmlTreeBuilder.parseFragment(java.lang.String,org.jsoup.nodes.Element,java.lang.String,org.jsoup.parser.Parser)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "ParseSettings.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.ParseSettings.normalizeTag(java.lang.String)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.ParseSettings.normalizeAttribute(java.lang.String)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "Parser.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.Parser.getErrors()", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.Parser.parseInput(java.lang.String,java.lang.String)", "TOT": 10, "UPD": 1, "INS": 2, "MOV": 4, "DEL": 3}, {"spoonMethodName": "org.jsoup.parser.Parser.parseFragment(java.lang.String,org.jsoup.nodes.Element,java.lang.String,org.jsoup.parser.ParseErrorList)", "TOT": 6, "UPD": 1, "INS": 2, "MOV": 1, "DEL": 2}, {"spoonMethodName": "org.jsoup.parser.Parser", "TOT": 2, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.parser.Parser.parseInput(java.io.Reader,java.lang.String)", "TOT": 7, "UPD": 0, "INS": 1, "MOV": 4, "DEL": 2}, {"spoonMethodName": "org.jsoup.parser.Parser.isTrackErrors()", "TOT": 2, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.parser.Parser.setTrackErrors(int)", "TOT": 4, "UPD": 0, "INS": 1, "MOV": 1, "DEL": 2}, {"spoonMethodName": "org.jsoup.parser.Parser.parse(java.lang.String,java.lang.String)", "TOT": 3, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 2}, {"spoonMethodName": "org.jsoup.parser.Parser.parseFragment(java.lang.String,org.jsoup.nodes.Element,java.lang.String)", "TOT": 3, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 2}, {"spoonMethodName": "org.jsoup.parser.Parser.parseXmlFragment(java.lang.String,java.lang.String)", "TOT": 3, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 2}, {"spoonMethodName": "org.jsoup.parser.Parser.parseFragmentInput(java.lang.String,org.jsoup.nodes.Element,java.lang.String)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.Parser.setTreeBuilder(org.jsoup.parser.TreeBuilder)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "TreeBuilder.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.TreeBuilder", "TOT": 3, "UPD": 2, "INS": 0, "MOV": 1, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.TreeBuilder.initialiseParse(java.io.Reader,java.lang.String,org.jsoup.parser.ParseErrorList,org.jsoup.parser.ParseSettings)", "TOT": 9, "UPD": 5, "INS": 0, "MOV": 1, "DEL": 3}, {"spoonMethodName": "org.jsoup.parser.TreeBuilder.parse(java.io.Reader,java.lang.String,org.jsoup.parser.ParseErrorList,org.jsoup.parser.ParseSettings)", "TOT": 5, "UPD": 3, "INS": 0, "MOV": 0, "DEL": 2}, {"spoonMethodName": "org.jsoup.parser.TreeBuilder.parseFragment(java.lang.String,org.jsoup.nodes.Element,java.lang.String,org.jsoup.parser.Parser)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.TreeBuilder.initialiseParse(java.io.Reader,java.lang.String,org.jsoup.parser.Parser)", "TOT": 3, "UPD": 0, "INS": 3, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "XmlTreeBuilder.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.XmlTreeBuilder.parse(java.io.Reader,java.lang.String)", "TOT": 4, "UPD": 1, "INS": 1, "MOV": 0, "DEL": 2}, {"spoonMethodName": "org.jsoup.parser.XmlTreeBuilder.parse(java.lang.String,java.lang.String)", "TOT": 4, "UPD": 1, "INS": 1, "MOV": 0, "DEL": 2}, {"spoonMethodName": "org.jsoup.parser.XmlTreeBuilder.insert(org.jsoup.parser.Token$StartTag)", "TOT": 2, "UPD": 2, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.XmlTreeBuilder.parseFragment(java.lang.String,java.lang.String,org.jsoup.parser.ParseErrorList,org.jsoup.parser.ParseSettings)", "TOT": 14, "UPD": 5, "INS": 0, "MOV": 8, "DEL": 1}, {"spoonMethodName": "org.jsoup.parser.XmlTreeBuilder.insertNode(org.jsoup.parser.Node)", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.XmlTreeBuilder.insert(org.jsoup.parser.Token$Comment)", "TOT": 4, "UPD": 4, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.XmlTreeBuilder.insert(org.jsoup.parser.Token$Doctype)", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.XmlTreeBuilder.popStackToClose(org.jsoup.parser.Token$EndTag)", "TOT": 3, "UPD": 3, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.XmlTreeBuilder.insert(org.jsoup.parser.Token$Character)", "TOT": 2, "UPD": 2, "INS": 0, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.XmlTreeBuilder.initialiseParse(java.io.Reader,java.lang.String,org.jsoup.parser.ParseErrorList,org.jsoup.parser.ParseSettings)", "TOT": 6, "UPD": 0, "INS": 0, "MOV": 5, "DEL": 1}, {"spoonMethodName": "org.jsoup.parser.XmlTreeBuilder.initialiseParse(java.io.Reader,java.lang.String,org.jsoup.parser.Parser)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.XmlTreeBuilder.parseFragment(java.lang.String,java.lang.String,org.jsoup.parser.Parser)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.XmlTreeBuilder.parseFragment(java.lang.String,org.jsoup.nodes.Element,java.lang.String,org.jsoup.parser.Parser)", "TOT": 3, "UPD": 0, "INS": 3, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "ElementTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.ElementTest.testAddNewElement()", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "HtmlParserTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.HtmlParserTest.testHtmlLowerCase()", "TOT": 3, "UPD": 0, "INS": 3, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.HtmlParserTest.canPreserveTagCase()", "TOT": 3, "UPD": 0, "INS": 3, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.HtmlParserTest.canPreserveAttributeCase()", "TOT": 3, "UPD": 0, "INS": 3, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.HtmlParserTest.canPreserveBothCase()", "TOT": 3, "UPD": 0, "INS": 3, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "XmlTreeBuilderTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.XmlTreeBuilderTest.appendPreservesCaseByDefault()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["850a9cc02fb72cc450d1a9dc41912fa80fee9020"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 97, "deletions": 51, "lines": 148, "gitFilesChange": 8}, "spoonStatsSummary": {"TOT": 153, "UPD": 50, "INS": 38, "MOV": 32, "DEL": 33, "spoonFilesChanged": 8, "spoonMethodsChanged": 49}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/parser", "src/main/java/org/jsoup/nodes"], "changesInPackagesSPOON": ["org.jsoup.parser.XmlTreeBuilder.insert(org.jsoup.parser.Token$Character)", "org.jsoup.nodes.Element.prependElement(java.lang.String)", "org.jsoup.parser.Parser", "org.jsoup.parser.HtmlTreeBuilder.initialiseParse(java.io.Reader,java.lang.String,org.jsoup.parser.ParseErrorList,org.jsoup.parser.ParseSettings)", "org.jsoup.parser.Parser.parseFragmentInput(java.lang.String,org.jsoup.nodes.Element,java.lang.String)", "org.jsoup.parser.Parser.getErrors()", "org.jsoup.parser.Parser.parseInput(java.io.Reader,java.lang.String)", "org.jsoup.parser.ParseSettings.normalizeAttribute(java.lang.String)", "org.jsoup.parser.XmlTreeBuilder.parseFragment(java.lang.String,java.lang.String,org.jsoup.parser.Parser)", "org.jsoup.parser.HtmlTreeBuilder.error(org.jsoup.parser.HtmlTreeBuilderState)", "org.jsoup.nodes.Element.append(java.lang.String)", "org.jsoup.parser.XmlTreeBuilder.parseFragment(java.lang.String,org.jsoup.nodes.Element,java.lang.String,org.jsoup.parser.Parser)", "org.jsoup.parser.XmlTreeBuilder.initialiseParse(java.io.Reader,java.lang.String,org.jsoup.parser.Parser)", "org.jsoup.parser.TreeBuilder.initialiseParse(java.io.Reader,java.lang.String,org.jsoup.parser.ParseErrorList,org.jsoup.parser.ParseSettings)", "org.jsoup.parser.TreeBuilder.parse(java.io.Reader,java.lang.String,org.jsoup.parser.ParseErrorList,org.jsoup.parser.ParseSettings)", "org.jsoup.parser.XmlTreeBuilder.initialiseParse(java.io.Reader,java.lang.String,org.jsoup.parser.ParseErrorList,org.jsoup.parser.ParseSettings)", "org.jsoup.nodes.Node.attr(java.lang.String,java.lang.String)", "org.jsoup.parser.Parser.parse(java.lang.String,java.lang.String)", "org.jsoup.nodes.Element.appendElement(java.lang.String)", "org.jsoup.parser.XmlTreeBuilder.parse(java.lang.String,java.lang.String)", "org.jsoup.parser.HtmlTreeBuilder.parseFragment(java.lang.String,org.jsoup.nodes.Element,java.lang.String,org.jsoup.parser.ParseErrorList,org.jsoup.parser.ParseSettings)", "org.jsoup.parser.Parser.parseFragment(java.lang.String,org.jsoup.nodes.Element,java.lang.String,org.jsoup.parser.ParseErrorList)", "org.jsoup.parser.XmlTreeBuilder.popStackToClose(org.jsoup.parser.Token$EndTag)", "org.jsoup.parser.Parser.isTrackErrors()", "org.jsoup.nodes.Document", "org.jsoup.parser.TreeBuilder.initialiseParse(java.io.Reader,java.lang.String,org.jsoup.parser.Parser)", "org.jsoup.parser.XmlTreeBuilder.insert(org.jsoup.parser.Token$Doctype)", "org.jsoup.parser.ParseSettings.normalizeTag(java.lang.String)", "org.jsoup.parser.Parser.parseXmlFragment(java.lang.String,java.lang.String)", "org.jsoup.parser.XmlTreeBuilder.parse(java.io.Reader,java.lang.String)", "org.jsoup.parser.HtmlTreeBuilder.parseFragment(java.lang.String,org.jsoup.nodes.Element,java.lang.String,org.jsoup.parser.Parser)", "org.jsoup.nodes.Node.addSiblingHtml(int,java.lang.String)", "org.jsoup.parser.TreeBuilder", "org.jsoup.parser.Parser.parseFragment(java.lang.String,org.jsoup.nodes.Element,java.lang.String)", "org.jsoup.nodes.Element.tagName(java.lang.String)", "org.jsoup.parser.XmlTreeBuilder.insert(org.jsoup.parser.Token$StartTag)", "org.jsoup.nodes.Node.wrap(java.lang.String)", "org.jsoup.nodes.Node.getParser()", "org.jsoup.parser.XmlTreeBuilder.insert(org.jsoup.parser.Token$Comment)", "org.jsoup.nodes.Document.parser()", "org.jsoup.parser.TreeBuilder.parseFragment(java.lang.String,org.jsoup.nodes.Element,java.lang.String,org.jsoup.parser.Parser)", "org.jsoup.parser.Parser.setTrackErrors(int)", "org.jsoup.parser.XmlTreeBuilder.parseFragment(java.lang.String,java.lang.String,org.jsoup.parser.ParseErrorList,org.jsoup.parser.ParseSettings)", "org.jsoup.nodes.Element.prepend(java.lang.String)", "org.jsoup.nodes.Document.parser(org.jsoup.parser.Parser)", "org.jsoup.parser.Parser.setTreeBuilder(org.jsoup.parser.TreeBuilder)", "org.jsoup.parser.Parser.parseInput(java.lang.String,java.lang.String)", "org.jsoup.parser.XmlTreeBuilder.insertNode(org.jsoup.parser.Node)", "org.jsoup.nodes.Document.createShell(java.lang.String)"]}, {"title": "Requests with requestBody only support changing content-type if there is request data", "body": "Report from jsoup email list: Carl Ludewig\n\nI\u2019ve recently begun to use the .requestBody() method on Connection. The API docs give a nice example of posting JSON:\n\n```\nJsoup.connect(url)\n .requestBody(json)\n .header(\"Content-Type\", \"application/json\")\n .post();\n```\n\nHowever, this doesn\u2019t actually work, because inside of post() it performs an execute() and inside of there it calls setOutputContentType() which resets the Content-Type to the standard form encoding.\n\nThe workaround I discovered is to make sure there is at least one dummy parameter on the call due to the req.data().size() > 0 check on line 555 of HttpConnection.java (jsoup 1.9.2). I did this by adding .data(\u201cdummy\u201d, \u201c\u201d) to the example above and got things working.\n\nI thought I\u2019d point this out so perhaps it can be improved in a future version, if I\u2019ve got this right.\n\nThanks!\n", "url": "https://github.com/jhy/jsoup/issues/756", "user": "jhy", "labels": ["bug"], "created": "2016-08-25 19:36:34", "closed": "2016-08-25 21:37:56", "commits": {"84ffc4b73ca48ebe2423eac7a5f7b0aaa6c93aad": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 0.0002777777777777778, "commitsDetails": [{"commitHash": "84ffc4b73ca48ebe2423eac7a5f7b0aaa6c93aad", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["4f5a56459a98e21780d813919da66de9eee91b74"], "nameRev": "84ffc4b73ca48ebe2423eac7a5f7b0aaa6c93aad tags/jsoup-1.10.1~5", "commitMessage": "Don't override request content-type if set\n\nFixes #756\n", "commitDateTime": "2016-08-25 14:37:41", "authoredDateTime": "2016-08-25 14:37:41", "commitGitStats": [{"filePath": "CHANGES", "insertions": 3, "deletions": 0, "lines": 3}, {"filePath": "src/main/java/org/jsoup/helper/HttpConnection.java", "insertions": 5, "deletions": 1, "lines": 6}, {"filePath": "src/test/java/org/jsoup/integration/UrlConnectTest.java", "insertions": 30, "deletions": 1, "lines": 31}], "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpConnection.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.helper.HttpConnection.Response.setOutputContentType(org.jsoup.helper.Connection$Request)", "TOT": 2, "UPD": 0, "INS": 1, "MOV": 1, "DEL": 0}]}, {"spoonFilePath": "UrlConnectTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.integration.UrlConnectTest.sendsRequestBody()", "TOT": 4, "UPD": 1, "INS": 2, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.integration.UrlConnectTest.sendsRequestBodyJsonWithData()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.integration.UrlConnectTest.sendsRequestBodyJsonWithoutData()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["84ffc4b73ca48ebe2423eac7a5f7b0aaa6c93aad"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 5, "deletions": 1, "lines": 6, "gitFilesChange": 1}, "spoonStatsSummary": {"TOT": 2, "UPD": 0, "INS": 1, "MOV": 1, "DEL": 0, "spoonFilesChanged": 1, "spoonMethodsChanged": 1}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/helper"], "changesInPackagesSPOON": ["org.jsoup.helper.HttpConnection.Response.setOutputContentType(org.jsoup.helper.Connection$Request)"]}, {"title": "Parse slash in attibutes", "body": "Hello,\nI don't know if it is a bug or not, but when I'm parsing:\n`<img /onerror=\"a()\"/>`\n\nThe result of the parsers is: \n`<img nerror=\"a()\"/>`\nIs it OK? can I change the parser behavior for those types of tags? \n", "url": "https://github.com/jhy/jsoup/issues/746", "user": "ahielg", "labels": ["bug"], "created": "2016-08-15 07:42:00", "closed": "2016-08-19 19:55:02", "commits": {"f0f0e41e6c581de43dfaa98f5c2af52e43e42e62": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 4.000277777777778, "commitsDetails": [{"commitHash": "f0f0e41e6c581de43dfaa98f5c2af52e43e42e62", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["aa81e10c34f48a3c4ac7160aa90ee18af4f5c0c2"], "nameRev": "f0f0e41e6c581de43dfaa98f5c2af52e43e42e62 tags/jsoup-1.10.1~10", "commitMessage": "Merge ahielg:master for attribute fix\n\nFixes #746\n", "commitDateTime": "2016-08-19 12:54:51", "authoredDateTime": "2016-08-19 12:54:51", "commitGitStats": [{"filePath": "CHANGES", "insertions": 3, "deletions": 0, "lines": 3}, {"filePath": "src/main/java/org/jsoup/parser/TokeniserState.java", "insertions": 1, "deletions": 0, "lines": 1}, {"filePath": "src/test/java/org/jsoup/parser/AttributeParseTest.java", "insertions": 10, "deletions": 0, "lines": 10}], "commitSpoonAstDiffStats": [{"spoonFilePath": "TokeniserState.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.TokeniserState.42.read(org.jsoup.parser.Tokeniser,org.jsoup.parser.CharacterReader)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "AttributeParseTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.AttributeParseTest.dropsSlashFromAttributeName()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["f0f0e41e6c581de43dfaa98f5c2af52e43e42e62"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 1, "deletions": 0, "lines": 1, "gitFilesChange": 1}, "spoonStatsSummary": {"TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0, "spoonFilesChanged": 1, "spoonMethodsChanged": 1}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/parser"], "changesInPackagesSPOON": ["org.jsoup.parser.TokeniserState.42.read(org.jsoup.parser.Tokeniser,org.jsoup.parser.CharacterReader)"]}, {"title": "OutputSettings is not threadsafe, throws ISE in canEncode when shared", "body": "I stumbled on this problem:\n\n```\njava.lang.IllegalStateException: Current state = CODING_END, new state = CODING\n    at java.nio.charset.CharsetEncoder.throwIllegalStateException(CharsetEncoder.java:992)\n    at java.nio.charset.CharsetEncoder.canEncode(CharsetEncoder.java:904)\n    at java.nio.charset.CharsetEncoder.canEncode(CharsetEncoder.java:985)\n    at org.jsoup.nodes.Entities.escape(Entities.java:154)\n    at org.jsoup.nodes.TextNode.outerHtmlHead(TextNode.java:100)\n    at org.jsoup.nodes.Node$OuterHtmlVisitor.head(Node.java:678)\n    at org.jsoup.select.NodeTraversor.traverse(NodeTraversor.java:31)\n    at org.jsoup.nodes.Node.outerHtml(Node.java:551)\n    at org.jsoup.nodes.Element.html(Element.java:1203)\n    at org.jsoup.nodes.Element.html(Element.java:1197)\n    at org.jsoup.Jsoup.clean(Jsoup.java:235)\n```\n\nIssue is most likely appearing under high load (?), this doesn't happen every time I run the cleaning for the same string\n\n```\nJsoup.clean(input, domainName, myWhiteList, new OutputSettings().indentAmount(0).prettyPrint(false))\n```\n", "url": "https://github.com/jhy/jsoup/issues/740", "user": "wlk", "labels": ["bug"], "created": "2016-08-01 12:23:33", "closed": "2016-08-19 22:58:31", "commits": {"3b2440a257df45fc49884a5c67bb0c9ce631781d": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 18.00027777777778, "commitsDetails": [{"commitHash": "3b2440a257df45fc49884a5c67bb0c9ce631781d", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["222feb1791388d1e94e2c99bb5858cf160904d16"], "nameRev": "3b2440a257df45fc49884a5c67bb0c9ce631781d tags/jsoup-1.10.1~8", "commitMessage": "Don't reuse encoders, to make threadsafe\n\nFixes #740 (well, I hope. I wasn't able to replicate it.)\n", "commitDateTime": "2016-08-19 15:58:18", "authoredDateTime": "2016-08-19 15:58:18", "commitGitStats": [{"filePath": "CHANGES", "insertions": 3, "deletions": 0, "lines": 3}, {"filePath": "src/main/java/org/jsoup/nodes/Document.java", "insertions": 1, "deletions": 3, "lines": 4}], "commitSpoonAstDiffStats": [{"spoonFilePath": "Document.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.Document.OutputSettings", "TOT": 2, "UPD": 0, "INS": 0, "MOV": 1, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.Document.OutputSettings.charset(java.nio.charset.Charset)", "TOT": 1, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.Document.OutputSettings.encoder()", "TOT": 1, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 1}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["3b2440a257df45fc49884a5c67bb0c9ce631781d"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 1, "deletions": 3, "lines": 4, "gitFilesChange": 1}, "spoonStatsSummary": {"TOT": 4, "UPD": 0, "INS": 0, "MOV": 1, "DEL": 3, "spoonFilesChanged": 1, "spoonMethodsChanged": 3}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/nodes"], "changesInPackagesSPOON": ["org.jsoup.nodes.Document.OutputSettings", "org.jsoup.nodes.Document.OutputSettings.charset(java.nio.charset.Charset)", "org.jsoup.nodes.Document.OutputSettings.encoder()"]}, {"title": "Infinite loop with Jsoup 1.9.1", "body": "We recently upgraded from 1.8.3 to 1.9.1 and noticed many instances of threads looping inside TokeniserState.handleDataEndTag(). I believe this occurs because CharacterReader.matchesLetter() checks non-ascii letters via Character.isLetter(c), but consumeLetterSequence() does not. \n\nHere's a snippet that reproduces the problem. The HTML is obviously not quite valid, but it represents the sort of content we encounter in the wild.\n\n``` java\nString html = \"<html><body><style>bogus</style\u00e1><p>just a small test page</p></body></html>\";\nJsoup.parseBodyFragment(html);\n```\n", "url": "https://github.com/jhy/jsoup/issues/704", "user": "jbflanigan", "labels": ["bug"], "created": "2016-04-28 17:37:44", "closed": "2016-05-06 03:45:09", "commits": {"49db84f8f2beb846fb8271fa20a28271afe37d90": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 7.000277777777778, "commitsDetails": [{"commitHash": "49db84f8f2beb846fb8271fa20a28271afe37d90", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["4c4192d33ff0ee27b9f293658c5a93fbd54e92ac"], "nameRev": "49db84f8f2beb846fb8271fa20a28271afe37d90 tags/jsoup-1.9.2~7", "commitMessage": "Fix getting stuck on non-ascii tags\n\nFixed #704\n", "commitDateTime": "2016-05-05 20:44:57", "authoredDateTime": "2016-05-05 20:44:57", "commitGitStats": [{"filePath": "CHANGES", "insertions": 4, "deletions": 0, "lines": 4}, {"filePath": "src/main/java/org/jsoup/parser/CharacterReader.java", "insertions": 2, "deletions": 2, "lines": 4}, {"filePath": "src/test/java/org/jsoup/parser/HtmlParserTest.java", "insertions": 7, "deletions": 0, "lines": 7}], "commitSpoonAstDiffStats": [{"spoonFilePath": "CharacterReader.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.CharacterReader.consumeLetterSequence()", "TOT": 2, "UPD": 0, "INS": 1, "MOV": 1, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.CharacterReader.consumeLetterThenDigitSequence()", "TOT": 2, "UPD": 0, "INS": 1, "MOV": 1, "DEL": 0}]}, {"spoonFilePath": "HtmlParserTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.HtmlParserTest.testSupportsPartiallyNonAsciiTags()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["49db84f8f2beb846fb8271fa20a28271afe37d90"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 2, "deletions": 2, "lines": 4, "gitFilesChange": 1}, "spoonStatsSummary": {"TOT": 4, "UPD": 0, "INS": 2, "MOV": 2, "DEL": 0, "spoonFilesChanged": 1, "spoonMethodsChanged": 2}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/parser"], "changesInPackagesSPOON": ["org.jsoup.parser.CharacterReader.consumeLetterThenDigitSequence()", "org.jsoup.parser.CharacterReader.consumeLetterSequence()"]}, {"title": "UTF16 streams with BOM are processed as UTF-8", "body": "The handling of the character encoding in org.jsoup.helper.DataUtil.parseByteData(...) is bugged when the input is an UTF16 stream with unicode BOM. This method does a check for presence of a BOM and, if it finds one, incorrectly assumes that this was a UTF-8 BOM. To fix this, the code would have to check the raw BOM bytes as the distinction between the various BOMs is lost after conversion to characters. See also: http://unicode.org/faq/utf_bom.html#bom4\n", "url": "https://github.com/jhy/jsoup/issues/695", "user": "ArjohnKampman", "labels": ["bug"], "created": "2016-03-29 14:29:44", "closed": "2016-04-05 21:39:24", "commits": {"c3cbe1b64e7f66ff9f9b53f1388eb135e6693187": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 7.000277777777778, "commitsDetails": [{"commitHash": "c3cbe1b64e7f66ff9f9b53f1388eb135e6693187", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["cc19d3029ab0db137da0e95cc55c20b131241cf1"], "nameRev": "c3cbe1b64e7f66ff9f9b53f1388eb135e6693187 tags/jsoup-1.9.1~9", "commitMessage": "Support UTF-16 and -32 BOMs\n\nFixes #695\n", "commitDateTime": "2016-04-05 14:03:04", "authoredDateTime": "2016-04-05 14:03:04", "commitGitStats": [{"filePath": "CHANGES", "insertions": 3, "deletions": 0, "lines": 3}, {"filePath": "src/main/java/org/jsoup/helper/DataUtil.java", "insertions": 18, "deletions": 9, "lines": 27}, {"filePath": "src/test/java/org/jsoup/helper/DataUtilTest.java", "insertions": 29, "deletions": 0, "lines": 29}, {"filePath": "src/test/resources/bomtests/bom_utf16be.html", "insertions": 0, "deletions": 0, "lines": 0}, {"filePath": "src/test/resources/bomtests/bom_utf16le.html", "insertions": 0, "deletions": 0, "lines": 0}, {"filePath": "src/test/resources/bomtests/bom_utf32be.html", "insertions": 0, "deletions": 0, "lines": 0}, {"filePath": "src/test/resources/bomtests/bom_utf32le.html", "insertions": 0, "deletions": 0, "lines": 0}], "commitSpoonAstDiffStats": [{"spoonFilePath": "DataUtil.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.helper.DataUtil.parseByteData(java.nio.ByteBuffer,java.lang.String,java.lang.String,org.jsoup.parser.Parser)", "TOT": 27, "UPD": 4, "INS": 10, "MOV": 7, "DEL": 6}]}, {"spoonFilePath": "DataUtilTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.helper.DataUtilTest.supportsBOMinFiles()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["c3cbe1b64e7f66ff9f9b53f1388eb135e6693187"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 18, "deletions": 9, "lines": 27, "gitFilesChange": 1}, "spoonStatsSummary": {"TOT": 27, "UPD": 4, "INS": 10, "MOV": 7, "DEL": 6, "spoonFilesChanged": 1, "spoonMethodsChanged": 1}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/helper"], "changesInPackagesSPOON": ["org.jsoup.helper.DataUtil.parseByteData(java.nio.ByteBuffer,java.lang.String,java.lang.String,org.jsoup.parser.Parser)"]}, {"title": "Doesn't handle self closing <title/> appropriately", "body": "Having the following simple html page:\n`<html>\n  <head>\n    <title/>\n  </head>\n  <body>\n    <p>Paragraph</p>\n  </body>\n</html>`\n**Jsoup**._parse_(_InputStream_ **in**, _String_ **charsetName**, _String_ **baseUri**) will produce the following output:\n`<html>\n <head> \n  <title></title>\n </head>\n <body>\n   &lt;/head&gt;  \n  <p>Paragraph</p>   \n </body>\n</html>`\nThe **TITLE** element from the given example might be invalid (`<title />`) but this is not the expected behavior.\n", "url": "https://github.com/jhy/jsoup/issues/691", "user": "tdumitriu", "labels": ["bug"], "created": "2016-03-23 19:52:11", "closed": "2017-11-15 00:35:05", "commits": {}, "ttf": 601.0002777777778, "commitsDetails": []}, {"title": "Bug in Element.insertChildren()", "body": "When using org.jsoup.nodes.Element.insertChildren(int, Collection<? extends Node>) to move (more than one!) child-elements from one parent-element to the same parent, but different index then it produces wrong results.\n\nThe problem is that the first Element's 'move' leaves the siblingIndex unchanged and then the second 'move' removes a wrong element and produces some crap. Maybe calling reindexChildren() inside the loop in addChildren() fixes this.\nVersion 1.8.3.\nWorkaround: call remove() on the elements before passing them to insertChildren()\n\nEasy Test Case:\n\n```\n    @Test\n    public void mustCorrectlyMoveChildrenInsideOneParentElement() {\n\n        Document doc = new Document( \"\" );\n        Element body = doc.appendElement( \"body\" );\n        body.appendElement( \"div1\" );\n        body.appendElement( \"div2\" );\n        Element div3 = body.appendElement( \"div3\" );\n        Element div4 = body.appendElement( \"div4\" );\n\n        ArrayList<Element> toMove = new ArrayList<Element>() {\n            {\n                add( div3 );\n                add( div4 );\n            }\n        };\n\n        body.insertChildren( 0, toMove );\n\n        String result = doc.toString().replaceAll( \"\\\\s+\", \"\" );\n        assertEquals( \"<body><div3></div3><div4></div4><div1></div1><div2></div2></body>\", result );\n\n    }\n```\n", "url": "https://github.com/jhy/jsoup/issues/689", "user": "zakrhol", "labels": ["bug"], "created": "2016-03-16 14:43:45", "closed": "2016-04-04 03:20:04", "commits": {"b2e37fca64877104cfdad3f56cdc2c8b98cb6be1": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 18.00027777777778, "commitsDetails": [{"commitHash": "b2e37fca64877104cfdad3f56cdc2c8b98cb6be1", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["941f69bfe96753ef30dbb3bb1bdffb72ee8944e0"], "nameRev": "b2e37fca64877104cfdad3f56cdc2c8b98cb6be1 tags/jsoup-1.9.1~13", "commitMessage": "Fixed an issue when moving moving nodes using Element.insert(index, children)\n\nFixes #689\n", "commitDateTime": "2016-04-03 20:19:13", "authoredDateTime": "2016-04-03 20:19:13", "commitGitStats": [{"filePath": "CHANGES", "insertions": 4, "deletions": 0, "lines": 4}, {"filePath": "src/main/java/org/jsoup/nodes/Node.java", "insertions": 2, "deletions": 2, "lines": 4}, {"filePath": "src/test/java/org/jsoup/nodes/ElementTest.java", "insertions": 23, "deletions": 7, "lines": 30}], "commitSpoonAstDiffStats": [{"spoonFilePath": "Node.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.Node.addChildren(int,org.jsoup.nodes.Node[])", "TOT": 2, "UPD": 0, "INS": 0, "MOV": 2, "DEL": 0}]}, {"spoonFilePath": "ElementTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.ElementTest.appendMustCorrectlyMoveChildrenInsideOneParentElement()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["b2e37fca64877104cfdad3f56cdc2c8b98cb6be1"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 2, "deletions": 2, "lines": 4, "gitFilesChange": 1}, "spoonStatsSummary": {"TOT": 2, "UPD": 0, "INS": 0, "MOV": 2, "DEL": 0, "spoonFilesChanged": 1, "spoonMethodsChanged": 1}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/nodes"], "changesInPackagesSPOON": ["org.jsoup.nodes.Node.addChildren(int,org.jsoup.nodes.Node[])"]}, {"title": "hashCode assumes immutable data, breaks hash tables when modified", "body": "The hashCode implementation of jsoup fails the following unit test:\n\n```\n    Element root = new Element(Tag.valueOf(\"root\"), \"\");\n\n    HashSet<Element> set = new HashSet<>();\n    // Add root node:\n    set.add(root);\n\n    root.appendChild(new Element(Tag.valueOf(\"a\"), \"\"));\n    assertTrue(set.contains(root));\n```\n\nHaving a content-dependant `hashCode` for _mutable_ objects is flawed.\n\nEither the API needs to be designed immutable, or the hashCode/equals must only check for identity.\n\nApart from that, these functions are also rather expensive. They can be made available under a different name, and of course a `compareTo` could be added to check for content identity.\n", "url": "https://github.com/jhy/jsoup/issues/688", "user": "kno10", "labels": ["bug"], "created": "2016-03-14 15:27:51", "closed": "2016-04-05 19:54:50", "commits": {"cc19d3029ab0db137da0e95cc55c20b131241cf1": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 22.00027777777778, "commitsDetails": [{"commitHash": "cc19d3029ab0db137da0e95cc55c20b131241cf1", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["07d990fe2aa7f2991d5b74f96ea2de690514338b"], "nameRev": "cc19d3029ab0db137da0e95cc55c20b131241cf1 tags/jsoup-1.9.1~10", "commitMessage": "Reverted Node.equals() and Node.hashCode()\n\nBack to identity (object) comparisons, as deep content inspection had\nnegative performance impacts and hashkey stability problems.\nFunctionality replaced with Node.hasSameContent().\n\nFixes #688\n", "commitDateTime": "2016-04-05 12:54:42", "authoredDateTime": "2016-04-05 12:54:42", "commitGitStats": [{"filePath": "CHANGES", "insertions": 4, "deletions": 0, "lines": 4}, {"filePath": "src/main/java/org/jsoup/nodes/Element.java", "insertions": 0, "deletions": 18, "lines": 18}, {"filePath": "src/main/java/org/jsoup/nodes/Node.java", "insertions": 15, "deletions": 19, "lines": 34}, {"filePath": "src/main/java/org/jsoup/nodes/TextNode.java", "insertions": 0, "deletions": 18, "lines": 18}, {"filePath": "src/test/java/org/jsoup/nodes/DocumentTest.java", "insertions": 12, "deletions": 3, "lines": 15}, {"filePath": "src/test/java/org/jsoup/nodes/ElementTest.java", "insertions": 23, "deletions": 10, "lines": 33}], "commitSpoonAstDiffStats": [{"spoonFilePath": "Element.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.Element.equals(java.lang.Object)", "TOT": 1, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.Element.hashCode()", "TOT": 1, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 1}]}, {"spoonFilePath": "Node.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.Node.hashCode()", "TOT": 3, "UPD": 2, "INS": 0, "MOV": 1, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.Node.equals(java.lang.Object)", "TOT": 9, "UPD": 0, "INS": 2, "MOV": 5, "DEL": 2}]}, {"spoonFilePath": "TextNode.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.TextNode.equals(java.lang.Object)", "TOT": 1, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.TextNode.hashCode()", "TOT": 1, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 1}]}, {"spoonFilePath": "DocumentTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.DocumentTest.DocumentsWithSameContentAreEqual()", "TOT": 6, "UPD": 4, "INS": 0, "MOV": 2, "DEL": 0}, {"spoonMethodName": "org.jsoup.nodes.DocumentTest.DocumentsWithSameContentAreVerifialbe()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "ElementTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.ElementTest.testHashAndEquals()", "TOT": 25, "UPD": 18, "INS": 0, "MOV": 6, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.ElementTest.testHashcodeIsStableWithContentChanges()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["cc19d3029ab0db137da0e95cc55c20b131241cf1"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 15, "deletions": 55, "lines": 70, "gitFilesChange": 3}, "spoonStatsSummary": {"TOT": 16, "UPD": 2, "INS": 2, "MOV": 6, "DEL": 6, "spoonFilesChanged": 3, "spoonMethodsChanged": 6}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/nodes"], "changesInPackagesSPOON": ["org.jsoup.nodes.Element.hashCode()", "org.jsoup.nodes.Element.equals(java.lang.Object)", "org.jsoup.nodes.TextNode.equals(java.lang.Object)", "org.jsoup.nodes.Node.hashCode()", "org.jsoup.nodes.Node.equals(java.lang.Object)", "org.jsoup.nodes.TextNode.hashCode()"]}, {"title": "Problem in reading XML file containing Japanese tag names", "body": "Hello,\nI have XML file containing Japanese tag names and values.\nJSOUP is not parsing this Japanese tags.\nI am using JSOUP library (version: 1.8.3).\nPlease help me to solve this issue.\n\n---\n\ne.g. ( XML File to reproduce problem )\n<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\n<\u9032\u6357\u63a8\u79fb\u30b0\u30e9\u30d5>\n    <\u958b\u59cb\u4e88\u5b9a\u51e1\u4f8b\u540d \u8868\u793a\u72b6\u614b=\"0\" \u7dda\u8272=\"00CED1\">&amp;#9312;&amp;#35373;&amp;#35336; &amp;#38283;&amp;#22987;&amp;#20104;&amp;#23450;</\u958b\u59cb\u4e88\u5b9a\u51e1\u4f8b\u540d>\n## </\u9032\u6357\u63a8\u79fb\u30b0\u30e9\u30d5>\n\n//// ***\\*  Source Code  ******\nDocument doc = Jsoup.parse(XMLString.toString(),\"UTF-8\",Parser.xmlParser());\nElements objElementCollection = doc.getAllElements();\n\nint iElementsSize=objElementCollection.size();\n\nfor(Element objCurrent : objElementCollection)\n{\n        String szTag=objCurrent.tagName();\n\n```\n    for (TextNode tnTextNode : objCurrent.textNodes()) \n    {\n        String szVal=tnTextNode.text();\n    }\n```\n\n}\n", "url": "https://github.com/jhy/jsoup/issues/667", "user": "viralkk", "labels": ["bug"], "created": "2015-12-28 09:22:52", "closed": "2016-04-06 00:05:30", "commits": {"25e0e1e9ffca9a350d060db7d2179c5c9e459055": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 99.00027777777778, "commitsDetails": [{"commitHash": "25e0e1e9ffca9a350d060db7d2179c5c9e459055", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["8b38cd812802397dfcbaddb34cde9ac27f0fde22"], "nameRev": "25e0e1e9ffca9a350d060db7d2179c5c9e459055 tags/jsoup-1.9.1~6", "commitMessage": "Added support for unicode letters in tags\n\nFixes #667\n", "commitDateTime": "2016-04-05 17:05:20", "authoredDateTime": "2016-04-05 17:05:20", "commitGitStats": [{"filePath": "CHANGES", "insertions": 3, "deletions": 0, "lines": 3}, {"filePath": "src/main/java/org/jsoup/parser/CharacterReader.java", "insertions": 1, "deletions": 1, "lines": 2}, {"filePath": "src/test/java/org/jsoup/parser/HtmlParserTest.java", "insertions": 7, "deletions": 0, "lines": 7}], "commitSpoonAstDiffStats": [{"spoonFilePath": "CharacterReader.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.CharacterReader.matchesLetter()", "TOT": 2, "UPD": 0, "INS": 1, "MOV": 1, "DEL": 0}]}, {"spoonFilePath": "HtmlParserTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.HtmlParserTest.testSupportsNonAsciiTags()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["25e0e1e9ffca9a350d060db7d2179c5c9e459055"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 1, "deletions": 1, "lines": 2, "gitFilesChange": 1}, "spoonStatsSummary": {"TOT": 2, "UPD": 0, "INS": 1, "MOV": 1, "DEL": 0, "spoonFilesChanged": 1, "spoonMethodsChanged": 1}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/parser"], "changesInPackagesSPOON": ["org.jsoup.parser.CharacterReader.matchesLetter()"]}, {"title": "JSoup Created XML Document Contains Invalid XML Declaration String", "body": "When creating an XML document using JSoup, the XML declaration that is output is missing the closing question mark\n\nExample code:\n\n```\nDocument document = Document.createShell(\"\");\ndocument.outputSettings().syntax(Syntax.xml);\ndocument.charset(Charset.forName(\"utf-8\"));\nSystem.out.println(document.html());\n```\n\nwhich outputs:\n\n```\n<?xml version=\"1.0\" encoding=\"UTF-8\">\n<html>\n <head></head>\n <body></body>\n</html>\n```\n\nExpected output:\n\n```\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<html>\n <head></head>\n <body></body>\n</html>\n```\n", "url": "https://github.com/jhy/jsoup/issues/652", "user": "lyleholt", "labels": ["bug"], "created": "2015-11-09 19:14:44", "closed": "2016-05-07 23:18:32", "commits": {"c090381c55b6d275eebe60053d36f198ffe793ca": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 180.00027777777777, "commitsDetails": [{"commitHash": "c090381c55b6d275eebe60053d36f198ffe793ca", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["4eb4f2b2e88a2f9e6c5c1e8d0477060954f24218"], "nameRev": "c090381c55b6d275eebe60053d36f198ffe793ca tags/jsoup-1.9.2~4", "commitMessage": "Test for prolog\n\nFixes #652\n", "commitDateTime": "2016-05-07 16:18:24", "authoredDateTime": "2016-05-07 16:18:24", "commitGitStats": [{"filePath": "CHANGES", "insertions": 3, "deletions": 0, "lines": 3}, {"filePath": "src/test/java/org/jsoup/parser/XmlTreeBuilderTest.java", "insertions": 13, "deletions": 0, "lines": 13}], "commitSpoonAstDiffStats": [{"spoonFilePath": "XmlTreeBuilderTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.XmlTreeBuilderTest.testCreatesValidProlog()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["c090381c55b6d275eebe60053d36f198ffe793ca"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 0, "gitStatsSummary": {"insertions": 0, "deletions": 0, "lines": 0, "gitFilesChange": 0}, "spoonStatsSummary": {"TOT": 0, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 0, "spoonFilesChanged": 0, "spoonMethodsChanged": 0}, "statsSkippedReason": "", "changesInPackagesGIT": [], "changesInPackagesSPOON": []}, {"title": "Parse failed with org.jsoup.select.Selector$SelectorParseException when selector has unbalanced '(' or '[' or ')' or ']' ", "body": "Selector I am having as following div.card-content2:has(a.subtitle[title= MySubTitle:)]) OR a.title[title=MyTitle :] ]\n", "url": "https://github.com/jhy/jsoup/issues/611", "user": "singingprophet", "labels": ["bug"], "created": "2015-08-14 11:24:13", "closed": "2016-05-08 00:19:13", "commits": {"a229d7354da5210a728ce5d43158d5cd780772db": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 267.0002777777778, "commitsDetails": [{"commitHash": "a229d7354da5210a728ce5d43158d5cd780772db", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["c090381c55b6d275eebe60053d36f198ffe793ca"], "nameRev": "a229d7354da5210a728ce5d43158d5cd780772db tags/jsoup-1.9.2~3", "commitMessage": "Allow selectors to contain unbalanced braces\n\nFixes #611\n", "commitDateTime": "2016-05-07 17:18:58", "authoredDateTime": "2016-05-07 17:18:58", "commitGitStats": [{"filePath": "CHANGES", "insertions": 4, "deletions": 0, "lines": 4}, {"filePath": "src/main/java/org/jsoup/parser/TokenQueue.java", "insertions": 6, "deletions": 1, "lines": 7}, {"filePath": "src/test/java/org/jsoup/select/SelectorTest.java", "insertions": 7, "deletions": 0, "lines": 7}], "commitSpoonAstDiffStats": [{"spoonFilePath": "TokenQueue.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.TokenQueue.chompBalanced(char,char)", "TOT": 7, "UPD": 0, "INS": 3, "MOV": 3, "DEL": 1}]}, {"spoonFilePath": "SelectorTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.select.SelectorTest.attributeWithBrackets()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["a229d7354da5210a728ce5d43158d5cd780772db"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 6, "deletions": 1, "lines": 7, "gitFilesChange": 1}, "spoonStatsSummary": {"TOT": 7, "UPD": 0, "INS": 3, "MOV": 3, "DEL": 1, "spoonFilesChanged": 1, "spoonMethodsChanged": 1}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/parser"], "changesInPackagesSPOON": ["org.jsoup.parser.TokenQueue.chompBalanced(char,char)"]}, {"title": "Element.clone() causes StackOverflowError when the element has excessively stacked children", "body": "This is similar to the issue I previously opened and was subsequently fixed in 1.7.2.\n\nExcessively stacked elements contained in a parent element, such as a couple hundred `<i>` tags wrapped around some text, cause `Element.clone()` to throw a `StackOverflowError` in `Node.doClone()` \n\nConsider this page: http://m.gamefaqs.com/boards/577800-one-man-and-his-droid/64768563\n\nIn that page's source, you can see this:\n\n```\n<blockquote><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i><i>censor f***ing bypass</i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></i></blockquote>\n```\n\nNow clearly, something like this isn't normal. And it isn't going to happen often. But, while this page is a recreation of the issue, it did occur naturally on a different board (I don't have access to this separate board, hence why it was recreated)\n\nThis is on an Android device, where per-app stack allocation might be smaller than on a desktop or laptop.\n", "url": "https://github.com/jhy/jsoup/issues/290", "user": "InsanityOnABun", "labels": ["bug"], "created": "2013-01-29 03:28:24", "closed": "2013-10-07 06:03:08", "commits": {"4d94c5d0f0e60e50d555178ff0ca5b8d4da5f054": {"commitGHEventType": "closed", "commitUser": "jhy"}, "1198b258b507b5f3288e67f1fb95f40d78d672e0": {"commitGHEventType": "referenced", "commitUser": "jhy"}}, "ttf": 251.00027777777777, "commitsDetails": [{"commitHash": "4d94c5d0f0e60e50d555178ff0ca5b8d4da5f054", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["76903813da44b8971c9cd2beff41773376c6396c"], "nameRev": "4d94c5d0f0e60e50d555178ff0ca5b8d4da5f054 tags/jsoup-1.7.3~11^2~2", "commitMessage": "Modified Node.clone() to use iterative approach.\n\nUses BFS to clone nodes. Fixes #290.\n", "commitDateTime": "2013-02-08 20:00:12", "authoredDateTime": "2013-02-08 20:00:12", "commitGitStats": [{"filePath": "src/main/java/org/jsoup/nodes/Node.java", "insertions": 25, "deletions": 2, "lines": 27}], "commitSpoonAstDiffStats": [{"spoonFilePath": "Node.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.Node.doClone(org.jsoup.nodes.Node)", "TOT": 2, "UPD": 0, "INS": 0, "MOV": 1, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.Node.clone()", "TOT": 6, "UPD": 0, "INS": 5, "MOV": 1, "DEL": 0}]}], "spoonStatsSkippedReason": ""}, {"commitHash": "1198b258b507b5f3288e67f1fb95f40d78d672e0", "commitGHEventType": "referenced", "commitUser": "jhy", "commitParents": ["11185c4fc1a0bcfa15d59b23fe039bf5908a2a77"], "nameRev": "1198b258b507b5f3288e67f1fb95f40d78d672e0 tags/jsoup-1.7.3~10", "commitMessage": "Changelog for #290\n", "commitDateTime": "2013-10-06 23:05:51", "authoredDateTime": "2013-10-06 23:05:51", "commitGitStats": [{"filePath": "CHANGES", "insertions": 3, "deletions": 0, "lines": 3}], "commitSpoonAstDiffStats": [], "spoonStatsSkippedReason": ""}], "filteredCommits": ["4d94c5d0f0e60e50d555178ff0ca5b8d4da5f054", "1198b258b507b5f3288e67f1fb95f40d78d672e0"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 25, "deletions": 2, "lines": 27, "gitFilesChange": 1}, "spoonStatsSummary": {"TOT": 8.0, "UPD": 0.0, "INS": 5.0, "MOV": 2.0, "DEL": 1.0, "spoonFilesChanged": 1, "spoonMethodsChanged": 2}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/nodes"], "changesInPackagesSPOON": ["org.jsoup.nodes.Node.doClone(org.jsoup.nodes.Node)", "org.jsoup.nodes.Node.clone()"]}, {"title": "Element.child throws IndexOutOfBoundsException instead of return null when child element absent", "body": "Hi,\n\ntest code:\n\n``` java\nimport org.jsoup.Jsoup;\nimport org.jsoup.nodes.Document;\nimport org.jsoup.nodes.Element;\nimport org.junit.Assert;\n\npublic class Test {\n\n    public static void main(String[] args) {\n        Document document = Jsoup.parse(\"<div id=\\\"test\\\"></div>\");\n        Element div = document.getElementById(\"test\");\n        Element firstChildElement = div.child(0); // throws IndexOutOfBoundsException\n        Assert.assertNull(firstChildElement);\n    }\n}\n```\n\nBut the javadoc of `Element.child` says `@return the child element, if it exists, or {@code null} if absent.`\n\nSolution: correct the code or the javadoc.\n\nRegards\n", "url": "https://github.com/jhy/jsoup/issues/277", "user": "henix", "labels": ["bug"], "created": "2012-12-21 08:45:36", "closed": "2012-12-22 20:10:19", "commits": {"7ff15ee20c961e370837d8f96ae77886ecd910d8": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 1.0002777777777778, "commitsDetails": [{"commitHash": "7ff15ee20c961e370837d8f96ae77886ecd910d8", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["f9f37e19876202a1db257a9e59452b0f10035fbf"], "nameRev": "7ff15ee20c961e370837d8f96ae77886ecd910d8 tags/jsoup-1.7.2~23", "commitMessage": "Corrected the javadoc for Element#child() to note that it throws IndexOutOfBounds.\n\nFixes #277\n", "commitDateTime": "2012-12-22 12:10:16", "authoredDateTime": "2012-12-22 12:10:16", "commitGitStats": [{"filePath": "CHANGES", "insertions": 3, "deletions": 0, "lines": 3}, {"filePath": "src/main/java/org/jsoup/nodes/Element.java", "insertions": 1, "deletions": 1, "lines": 2}, {"filePath": "src/main/java/org/jsoup/nodes/Node.java", "insertions": 2, "deletions": 2, "lines": 4}, {"filePath": "src/main/java/org/jsoup/select/Elements.java", "insertions": 1, "deletions": 1, "lines": 2}, {"filePath": "src/test/java/org/jsoup/nodes/ElementTest.java", "insertions": 13, "deletions": 0, "lines": 13}], "commitSpoonAstDiffStats": [{"spoonFilePath": "Element.java", "spoonMethods": []}, {"spoonFilePath": "Node.java", "spoonMethods": []}, {"spoonFilePath": "Elements.java", "spoonMethods": []}, {"spoonFilePath": "ElementTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.ElementTest.testChildThrowsIndexOutOfBoundsOnMissing()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["7ff15ee20c961e370837d8f96ae77886ecd910d8"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 4, "deletions": 4, "lines": 8, "gitFilesChange": 3}, "spoonStatsSummary": {"TOT": 0, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 0, "spoonFilesChanged": 0, "spoonMethodsChanged": 0}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/nodes", "src/main/java/org/jsoup/select"], "changesInPackagesSPOON": []}, {"title": "outerHtml method returns extra attribute when element definition has new line", "body": "I think this is a bug.\n\nVersion: jsoup-1.6.0.jar\n\nSource:\n---------BEGIN\n&lt;img alt=\"\"\n\n```\n         src=\"/imagelibraries/homepagebanners/british_10k_2010.jpg\" />\n```\n\n---------END\nSteps to reproduce: element.outerHtml() ->\n\nExpected result: two attributes alt and src\nObserved result output\n----------BEGIN\n&lt;img alt=\"\" =\"\" src=\"/imagelibraries/homepagebanners/british_10k_2010.jpg\" />\n----------END\n", "url": "https://github.com/jhy/jsoup/issues/110", "user": "dakkad", "labels": ["bug"], "created": "2011-06-23 10:26:41", "closed": "2011-06-23 11:48:57", "commits": {"a74e16f335a8854f8c2ba421e06daacf7e0b211b": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 0.0002777777777777778, "commitsDetails": [{"commitHash": "a74e16f335a8854f8c2ba421e06daacf7e0b211b", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["0c9ccf770b8cd61d67480a010348aeab5016a942"], "nameRev": "a74e16f335a8854f8c2ba421e06daacf7e0b211b tags/jsoup-1.6.1~5", "commitMessage": "Fixed normalisation of carriage returns to newlines on input HTML\n\nFixes #110\n", "commitDateTime": "2011-06-23 21:48:42", "authoredDateTime": "2011-06-23 21:48:42", "commitGitStats": [{"filePath": "CHANGES", "insertions": 3, "deletions": 0, "lines": 3}, {"filePath": "src/main/java/org/jsoup/parser/CharacterReader.java", "insertions": 6, "deletions": 1, "lines": 7}, {"filePath": "src/test/java/org/jsoup/parser/CharacterReaderTest.java", "insertions": 17, "deletions": 0, "lines": 17}, {"filePath": "src/test/java/org/jsoup/parser/ParserTest.java", "insertions": 5, "deletions": 0, "lines": 5}], "commitSpoonAstDiffStats": [{"spoonFilePath": "CharacterReader.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.CharacterReader.consumeToEnd()", "TOT": 2, "UPD": 0, "INS": 0, "MOV": 1, "DEL": 1}, {"spoonMethodName": "org.jsoup.parser.CharacterReader", "TOT": 2, "UPD": 0, "INS": 2, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "CharacterReaderTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.CharacterReaderTest.handleCarriageReturnAsLineFeed()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.CharacterReaderTest.consumeToEnd()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "ParserTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.ParserTest.handlesNewlinesAndWhitespaceInTag()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["a74e16f335a8854f8c2ba421e06daacf7e0b211b"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 6, "deletions": 1, "lines": 7, "gitFilesChange": 1}, "spoonStatsSummary": {"TOT": 4, "UPD": 0, "INS": 2, "MOV": 1, "DEL": 1, "spoonFilesChanged": 1, "spoonMethodsChanged": 2}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/parser"], "changesInPackagesSPOON": ["org.jsoup.parser.CharacterReader", "org.jsoup.parser.CharacterReader.consumeToEnd()"]}, {"title": "DocumentType.outerHtmlHead missing quote", "body": "There's just a doublequote missing from the append sequence right before the systemId.\n\nFor example:\n<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n", "url": "https://github.com/jhy/jsoup/issues/109", "user": "rbrigham", "labels": ["bug"], "created": "2011-06-22 23:10:47", "closed": "2011-06-23 11:02:32", "commits": {"06f6a4546d702fe32b633fa731954717e6292247": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 0.0002777777777777778, "commitsDetails": [{"commitHash": "06f6a4546d702fe32b633fa731954717e6292247", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["211fe98b6dde97f9dd3443fcf8806fb1d461dff4"], "nameRev": "06f6a4546d702fe32b633fa731954717e6292247 tags/jsoup-1.6.1~7", "commitMessage": "Fixed an issue with a missing quote when serialising DocumentType nodes.\n\nFixes #109\n", "commitDateTime": "2011-06-23 21:02:15", "authoredDateTime": "2011-06-23 21:02:15", "commitGitStats": [{"filePath": "CHANGES", "insertions": 3, "deletions": 0, "lines": 3}, {"filePath": "src/main/java/org/jsoup/nodes/DocumentType.java", "insertions": 4, "deletions": 2, "lines": 6}, {"filePath": "src/test/java/org/jsoup/nodes/DocumentTypeTest.java", "insertions": 41, "deletions": 0, "lines": 41}], "commitSpoonAstDiffStats": [{"spoonFilePath": "DocumentType.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.DocumentType.outerHtmlHead(java.lang.StringBuilder,int,org.jsoup.nodes.Document$OutputSettings)", "TOT": 6, "UPD": 2, "INS": 1, "MOV": 2, "DEL": 1}, {"spoonMethodName": "org.jsoup.nodes.DocumentType", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "DocumentTypeTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.nodes.DocumentTypeTest", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["06f6a4546d702fe32b633fa731954717e6292247"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 4, "deletions": 2, "lines": 6, "gitFilesChange": 1}, "spoonStatsSummary": {"TOT": 7, "UPD": 2, "INS": 2, "MOV": 2, "DEL": 1, "spoonFilesChanged": 1, "spoonMethodsChanged": 2}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/nodes"], "changesInPackagesSPOON": ["org.jsoup.nodes.DocumentType", "org.jsoup.nodes.DocumentType.outerHtmlHead(java.lang.StringBuilder,int,org.jsoup.nodes.Document$OutputSettings)"]}, {"title": "Cleaning a fragment with just \"0\" returns an empty string (1.6.0)", "body": "When using JSoup to sanitize some fragments that are inserted into another document, I noticed if a text node contains just the \"0\", it ends up cleaning it as just 0.\n\nThe root of this seems to come from TreeBuilderState's methods, in such places like InBody and InSelect; when it checks for type Character, it seems to cause the \"0\" token to equal the nullstring; this shouldn't be the case, as character 0 is not the same as a \"null\" character.\n", "url": "https://github.com/jhy/jsoup/issues/107", "user": "sigmazero13", "labels": ["bug"], "created": "2011-06-21 22:22:46", "closed": "2011-06-23 11:20:11", "commits": {"0c9ccf770b8cd61d67480a010348aeab5016a942": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 1.0002777777777778, "commitsDetails": [{"commitHash": "0c9ccf770b8cd61d67480a010348aeab5016a942", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["06f6a4546d702fe32b633fa731954717e6292247"], "nameRev": "0c9ccf770b8cd61d67480a010348aeab5016a942 tags/jsoup-1.6.1~6", "commitMessage": "Fixed issue where a single 0 character was lexed incorrectly as a null character.\n\nFixes #107\n", "commitDateTime": "2011-06-23 21:19:38", "authoredDateTime": "2011-06-23 21:19:38", "commitGitStats": [{"filePath": "CHANGES", "insertions": 3, "deletions": 0, "lines": 3}, {"filePath": "src/main/java/org/jsoup/parser/TreeBuilderState.java", "insertions": 1, "deletions": 1, "lines": 2}, {"filePath": "src/test/java/org/jsoup/parser/ParserTest.java", "insertions": 10, "deletions": 0, "lines": 10}], "commitSpoonAstDiffStats": [{"spoonFilePath": "TreeBuilderState.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.TreeBuilderState", "TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "ParserTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.ParserTest.handles0CharacterAsText()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.ParserTest.handlesNullInData()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["0c9ccf770b8cd61d67480a010348aeab5016a942"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 1, "deletions": 1, "lines": 2, "gitFilesChange": 1}, "spoonStatsSummary": {"TOT": 1, "UPD": 1, "INS": 0, "MOV": 0, "DEL": 0, "spoonFilesChanged": 1, "spoonMethodsChanged": 1}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/parser"], "changesInPackagesSPOON": ["org.jsoup.parser.TreeBuilderState"]}, {"title": "<script> containing tags causes issues", "body": "Thanks for the release, using 1.6.0 now, and getting issues with http://techcrunch.com.  html has a script tag containing tags inside of javascript strings.  Seems to be treating those as real tag openers, creating tag elements and causing the close script tag to be ignored and therefore include a ton of other stuff.  I think this was working in 1.5.2.  \n\nSimplified example:\n\n<pre>\n&lt;HTML>\n&lt;body>\n &lt;div class=vsc sig=Uga>\n  &lt;div class=before>&lt;/div>\n  &lt;script type=\"text/javascript\">\n   header = jQuery('#header_features');\n   if(header.length){\n    header\n     .prepend('&lt;a class=\"prevPage browse left \" />')\n     .append('&lt;a class=\"nextPage browse right\" />');\n\n    items\n     .wrapAll('&lt;div class=\"scrollable\"/>')\n     .wrapAll('&lt;ul class=\"items\"/>')\n     .wrap('&lt;li/>');\n   }\n   &lt;/script>\n   &lt;div class=after>&lt;/div>\n &lt;/div>\n&lt;/body>\n&lt;/HTML>\n</pre>\n\n\nResult, notice the script strings become tags and the script tag now subsumes the following div:\n\n<pre>\n&lt;html>\n &lt;body> \n  &lt;div class=\"vsc\" sig=\"Uga\"> \n   &lt;div class=\"before\">&lt;/div> \n   &lt;script type=\"text/javascript\">\n   header = jQuery('#header_features');\n   if(header.length){\n    header\n     .prepend('\n    &lt;a class=\"prevPage browse left \">') .append('&lt;/a>\n    &lt;a class=\"nextPage browse right\">'); items .wrapAll('\n     &lt;div class=\"scrollable\">\n      ') .wrapAll('\n      &lt;ul class=\"items\">\n       ') .wrap('\n       &lt;li>'); }  \n        &lt;div class=\"after\">&lt;/div> &lt;/li>\n      &lt;/ul>\n     &lt;/div>  &lt;/a>\n   &lt;/script>\n  &lt;/div>\n &lt;/body>\n&lt;/html>\n</pre>\n", "url": "https://github.com/jhy/jsoup/issues/104", "user": "kozura", "labels": ["bug"], "created": "2011-06-14 06:58:10", "closed": "2011-06-14 11:19:50", "commits": {"97ecc73c2eca5fa378620d144d258647ca2a8992": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 0.0002777777777777778, "commitsDetails": [{"commitHash": "97ecc73c2eca5fa378620d144d258647ca2a8992", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["d6a743edbe57b099def91d5c19dbdaf0d4f41dba"], "nameRev": "97ecc73c2eca5fa378620d144d258647ca2a8992 tags/jsoup-1.6.1~10", "commitMessage": "Fixed an issue when parsing <script> tags.\n\nWhen in body where the tokeniser wouldn't switch to the InScript state, which meant that data in a <script> wouldn't parse correctly.\n\nFixes #104\n", "commitDateTime": "2011-06-14 21:18:42", "authoredDateTime": "2011-06-14 21:18:42", "commitGitStats": [{"filePath": "CHANGES", "insertions": 4, "deletions": 0, "lines": 4}, {"filePath": "src/main/java/org/jsoup/parser/TreeBuilder.java", "insertions": 1, "deletions": 1, "lines": 2}, {"filePath": "src/main/java/org/jsoup/parser/TreeBuilderState.java", "insertions": 1, "deletions": 1, "lines": 2}, {"filePath": "src/test/java/org/jsoup/parser/ParserTest.java", "insertions": 2, "deletions": 2, "lines": 4}], "commitSpoonAstDiffStats": [{"spoonFilePath": "TreeBuilder.java", "spoonMethods": []}, {"spoonFilePath": "TreeBuilderState.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.TreeBuilderState.7.process(org.jsoup.parser.Token,org.jsoup.parser.TreeBuilder)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "ParserTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.ParserTest.handlesDataOnlyTags()", "TOT": 2, "UPD": 2, "INS": 0, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["97ecc73c2eca5fa378620d144d258647ca2a8992"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 2, "deletions": 2, "lines": 4, "gitFilesChange": 2}, "spoonStatsSummary": {"TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0, "spoonFilesChanged": 1, "spoonMethodsChanged": 1}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/parser"], "changesInPackagesSPOON": ["org.jsoup.parser.TreeBuilderState.7.process(org.jsoup.parser.Token,org.jsoup.parser.TreeBuilder)"]}, {"title": "Fix Java 1.5 compatibility", "body": "Multiple classes use java 1.6 only functionality\n\nDescription Resource    Path    Location    Type\nThe method isEmpty() is undefined for the type String   Token.java  /Jsoup/src/org/jsoup/parser line 71 Java Problem\nSwitch case may be entered by falling through previous case. If intended, add a new comment //$FALL-THROUGH$ on the line above  TokeniserState.java /Jsoup/src/org/jsoup/parser line 702    Java Problem\nPotential null pointer access: The variable entry may be null at this location  TreeBuilder.java    /Jsoup/src/org/jsoup/parser line 609    Java Problem\nPotential null pointer access: The variable lastTable may be null at this location  TreeBuilder.java    /Jsoup/src/org/jsoup/parser line 682    Java Problem\nThe method descendingIterator() is undefined for the type LinkedList<Element>   TreeBuilder.java    /Jsoup/src/org/jsoup/parser line 255    Java Problem\nThe method descendingIterator() is undefined for the type LinkedList<Element>   TreeBuilder.java    /Jsoup/src/org/jsoup/parser line 266    Java Problem\nThe method descendingIterator() is undefined for the type LinkedList<Element>   TreeBuilder.java    /Jsoup/src/org/jsoup/parser line 277    Java Problem\nThe method descendingIterator() is undefined for the type LinkedList<Element>   TreeBuilder.java    /Jsoup/src/org/jsoup/parser line 289    Java Problem\nThe method descendingIterator() is undefined for the type LinkedList<Element>   TreeBuilder.java    /Jsoup/src/org/jsoup/parser line 302    Java Problem\nThe method descendingIterator() is undefined for the type LinkedList<Element>   TreeBuilder.java    /Jsoup/src/org/jsoup/parser line 315    Java Problem\nThe method descendingIterator() is undefined for the type LinkedList<Element>   TreeBuilder.java    /Jsoup/src/org/jsoup/parser line 339    Java Problem\nThe method descendingIterator() is undefined for the type LinkedList<Element>   TreeBuilder.java    /Jsoup/src/org/jsoup/parser line 351    Java Problem\nThe method descendingIterator() is undefined for the type LinkedList<Element>   TreeBuilder.java    /Jsoup/src/org/jsoup/parser line 380    Java Problem\nThe method descendingIterator() is undefined for the type LinkedList<Element>   TreeBuilder.java    /Jsoup/src/org/jsoup/parser line 434    Java Problem\nThe method descendingIterator() is undefined for the type LinkedList<Element>   TreeBuilder.java    /Jsoup/src/org/jsoup/parser line 476    Java Problem\nThe method descendingIterator() is undefined for the type LinkedList<Element>   TreeBuilder.java    /Jsoup/src/org/jsoup/parser line 561    Java Problem\nThe method descendingIterator() is undefined for the type LinkedList<Element>   TreeBuilder.java    /Jsoup/src/org/jsoup/parser line 633    Java Problem\nThe method descendingIterator() is undefined for the type LinkedList<Element>   TreeBuilder.java    /Jsoup/src/org/jsoup/parser line 648    Java Problem\nThe method peekLast() is undefined for the type LinkedList<Element> TreeBuilder.java    /Jsoup/src/org/jsoup/parser line 235    Java Problem\nThe method peekLast() is undefined for the type LinkedList<Element> TreeBuilder.java    /Jsoup/src/org/jsoup/parser line 237    Java Problem\nThe method peekLast() is undefined for the type LinkedList<Element> TreeBuilder.java    /Jsoup/src/org/jsoup/parser line 625    Java Problem\nThe method pollLast() is undefined for the type LinkedList<Element> TreeBuilder.java    /Jsoup/src/org/jsoup/parser line 239    Java Problem\nThe method push(Element) is undefined for the type LinkedList<Element>  TreeBuilder.java    /Jsoup/src/org/jsoup/parser line 84 Java Problem\nThe method descendingIterator() is undefined for the type LinkedList<Element>   TreeBuilderState.java   /Jsoup/src/org/jsoup/parser line 765    Java Problem\n", "url": "https://github.com/jhy/jsoup/issues/103", "user": "mikebell90", "labels": ["bug"], "created": "2011-06-13 22:18:03", "closed": "2011-06-14 01:27:48", "commits": {"69605b20f1f89535e3cd514991c020f0b0eda53b": {"commitGHEventType": "closed", "commitUser": "jhy"}, "0b967b711db31dd8f3186885b7bdb3da56a749ee": {"commitGHEventType": "referenced", "commitUser": "jhy"}, "56ae96b11b83c436c4ae1f31f2c6101f110df2a5": {"commitGHEventType": "referenced", "commitUser": "jhy"}, "a95b503de541bb3388376752ad520df31cca4823": {"commitGHEventType": "referenced", "commitUser": "jhy"}, "42f145dcab6994c65991ef58581e04c882032e5d": {"commitGHEventType": "referenced", "commitUser": "jhy"}, "ab4890183496beea6d4908c4adb672e15c1136a5": {"commitGHEventType": "referenced", "commitUser": "jhy"}}, "ttf": 0.0002777777777777778, "commitsDetails": [{"commitHash": "69605b20f1f89535e3cd514991c020f0b0eda53b", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["e1a98c06eb6f1fe59268cde2d4c1af8fa5bd03be"], "nameRev": "69605b20f1f89535e3cd514991c020f0b0eda53b tags/jsoup-1.6.1~14", "commitMessage": "Javadoc update for DescendableLinkedList\n\nFixes #103\n", "commitDateTime": "2011-06-14 11:26:10", "authoredDateTime": "2011-06-14 11:26:10", "commitGitStats": [{"filePath": "src/main/java/org/jsoup/helper/DescendableLinkedList.java", "insertions": 11, "deletions": 1, "lines": 12}], "commitSpoonAstDiffStats": [{"spoonFilePath": "DescendableLinkedList.java", "spoonMethods": []}], "spoonStatsSkippedReason": ""}, {"commitHash": "0b967b711db31dd8f3186885b7bdb3da56a749ee", "commitGHEventType": "referenced", "commitUser": "jhy", "commitParents": ["69605b20f1f89535e3cd514991c020f0b0eda53b"], "nameRev": "0b967b711db31dd8f3186885b7bdb3da56a749ee tags/jsoup-1.6.1~13", "commitMessage": "Fix an incorrect case fall-through, and add some not-null validations to prevent warnings.\n\nFor #103\n", "commitDateTime": "2011-06-14 12:07:25", "authoredDateTime": "2011-06-14 12:07:25", "commitGitStats": [{"filePath": "src/main/java/org/jsoup/parser/TokeniserState.java", "insertions": 1, "deletions": 0, "lines": 1}, {"filePath": "src/main/java/org/jsoup/parser/TreeBuilder.java", "insertions": 4, "deletions": 1, "lines": 5}], "commitSpoonAstDiffStats": [{"spoonFilePath": "TokeniserState.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.TokeniserState.31.read(org.jsoup.parser.Tokeniser,org.jsoup.parser.CharacterReader)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "TreeBuilder.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.TreeBuilder.reconstructFormattingElements()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.TreeBuilder.insertInFosterParent(org.jsoup.parser.Node)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}, {"commitHash": "56ae96b11b83c436c4ae1f31f2c6101f110df2a5", "commitGHEventType": "referenced", "commitUser": "jhy", "commitParents": [], "nameRev": "", "commitMessage": "", "commitDateTime": "", "authoredDateTime": "", "commitGitStats": [], "commitSpoonAstDiffStats": [], "spoonStatsSkippedReason": ""}, {"commitHash": "a95b503de541bb3388376752ad520df31cca4823", "commitGHEventType": "referenced", "commitUser": "jhy", "commitParents": [], "nameRev": "", "commitMessage": "", "commitDateTime": "", "authoredDateTime": "", "commitGitStats": [], "commitSpoonAstDiffStats": [], "spoonStatsSkippedReason": ""}, {"commitHash": "42f145dcab6994c65991ef58581e04c882032e5d", "commitGHEventType": "referenced", "commitUser": "jhy", "commitParents": [], "nameRev": "", "commitMessage": "", "commitDateTime": "", "authoredDateTime": "", "commitGitStats": [], "commitSpoonAstDiffStats": [], "spoonStatsSkippedReason": ""}, {"commitHash": "ab4890183496beea6d4908c4adb672e15c1136a5", "commitGHEventType": "referenced", "commitUser": "jhy", "commitParents": ["49eb02fe329f0bf1bbc847f613c8aa147e6c5330"], "nameRev": "ab4890183496beea6d4908c4adb672e15c1136a5 tags/jsoup-1.6.2~53", "commitMessage": "Fix an incorrect case fall-through, and add some not-null validations to prevent warnings.\n\nFor #103\n", "commitDateTime": "2011-07-02 21:12:10", "authoredDateTime": "2011-06-14 12:07:25", "commitGitStats": [{"filePath": "src/main/java/org/jsoup/parser/TokeniserState.java", "insertions": 1, "deletions": 0, "lines": 1}, {"filePath": "src/main/java/org/jsoup/parser/TreeBuilder.java", "insertions": 4, "deletions": 1, "lines": 5}], "commitSpoonAstDiffStats": [{"spoonFilePath": "TokeniserState.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.TokeniserState.31.read(org.jsoup.parser.Tokeniser,org.jsoup.parser.CharacterReader)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}, {"spoonFilePath": "TreeBuilder.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.parser.TreeBuilder.reconstructFormattingElements()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.parser.TreeBuilder.insertInFosterParent(org.jsoup.parser.Node)", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["69605b20f1f89535e3cd514991c020f0b0eda53b", "0b967b711db31dd8f3186885b7bdb3da56a749ee"], "filteredCommitsReason": {"duplicated": 4, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 2, "gitStatsSummary": {"insertions": 16.0, "deletions": 2.0, "lines": 18.0, "gitFilesChange": 3}, "spoonStatsSummary": {"TOT": 3.0, "UPD": 0.0, "INS": 3.0, "MOV": 0.0, "DEL": 0.0, "spoonFilesChanged": 2, "spoonMethodsChanged": 3}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/parser", "src/main/java/org/jsoup/helper"], "changesInPackagesSPOON": ["org.jsoup.parser.TokeniserState.31.read(org.jsoup.parser.Tokeniser,org.jsoup.parser.CharacterReader)", "org.jsoup.parser.TreeBuilder.reconstructFormattingElements()", "org.jsoup.parser.TreeBuilder.insertInFosterParent(org.jsoup.parser.Node)"]}, {"title": "cookie() method errors out if empty cookie is sent from server.", "body": "The code below calls the cookie(cookieName, cookieVal); which throws and exception.\nCheck before calling...\n\n```\n            if (name.equalsIgnoreCase(\"Set-Cookie\")) {\n                for (String value : values) {\n                    TokenQueue cd = new TokenQueue(value);\n                    String cookieName = cd.chompTo(\"=\").trim();\n                    String cookieVal = cd.consumeTo(\";\").trim();\n                    // ignores path, date, domain, secure et al. req'd?\n                    cookie(cookieName, cookieVal);\n                }\n            } else { // only take the first instance of each header\n                if (!values.isEmpty())\n                    header(name, values.get(0));\n            }\n        }\n```\n", "url": "https://github.com/jhy/jsoup/issues/87", "user": "thedug", "labels": ["bug"], "created": "2011-04-21 03:41:03", "closed": "2011-06-03 00:23:35", "commits": {"b204f6aa3000dc768caf487a6c783f5bde8de311": {"commitGHEventType": "closed", "commitUser": "jhy"}}, "ttf": 42.000277777777775, "commitsDetails": [{"commitHash": "b204f6aa3000dc768caf487a6c783f5bde8de311", "commitGHEventType": "closed", "commitUser": "jhy", "commitParents": ["5b085fb825f6c38a1a4adf8015bd2166e10e99a8"], "nameRev": "b204f6aa3000dc768caf487a6c783f5bde8de311 tags/jsoup-1.6.0~12", "commitMessage": "Fixed cookie handling issue in jsoup.Connect where empty cookies would cause a validation exception.\n\nFixes #87\n", "commitDateTime": "2011-06-03 10:22:50", "authoredDateTime": "2011-06-03 10:22:50", "commitGitStats": [{"filePath": "CHANGES", "insertions": 3, "deletions": 0, "lines": 3}, {"filePath": "src/main/java/org/jsoup/helper/HttpConnection.java", "insertions": 20, "deletions": 12, "lines": 32}, {"filePath": "src/test/java/org/jsoup/helper/HttpConnectionTest.java", "insertions": 31, "deletions": 2, "lines": 33}], "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpConnection.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.helper.HttpConnection.Response.processResponseHeaders(java.util.Map)", "TOT": 4, "UPD": 0, "INS": 4, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.helper.HttpConnection.Response.setupFromConnection(java.net.HttpURLConnection,org.jsoup.Connection$Response)", "TOT": 3, "UPD": 0, "INS": 1, "MOV": 2, "DEL": 0}]}, {"spoonFilePath": "HttpConnectionTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.helper.HttpConnectionTest.ignoresEmptySetCookies()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}, {"spoonMethodName": "org.jsoup.helper.HttpConnectionTest.ignoresEmptyCookieNameAndVals()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["b204f6aa3000dc768caf487a6c783f5bde8de311"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 1, "gitStatsSummary": {"insertions": 20, "deletions": 12, "lines": 32, "gitFilesChange": 1}, "spoonStatsSummary": {"TOT": 7, "UPD": 0, "INS": 5, "MOV": 2, "DEL": 0, "spoonFilesChanged": 1, "spoonMethodsChanged": 2}, "statsSkippedReason": "", "changesInPackagesGIT": ["src/main/java/org/jsoup/helper"], "changesInPackagesSPOON": ["org.jsoup.helper.HttpConnection.Response.setupFromConnection(java.net.HttpURLConnection,org.jsoup.Connection$Response)", "org.jsoup.helper.HttpConnection.Response.processResponseHeaders(java.util.Map)"]}, {"title": "StringIndexOutOfBoundsException when parsing link http://news.yahoo.com/s/nm/20100831/bs_nm/us_gm_china", "body": "java.lang.StringIndexOutOfBoundsException: String index out of range: 1\n    at java.lang.String.charAt(String.java:686)\n    at java.util.regex.Matcher.appendReplacement(Matcher.java:711)\n    at org.jsoup.nodes.Entities.unescape(Entities.java:69)\n    at org.jsoup.nodes.TextNode.createFromEncoded(TextNode.java:95)\n    at org.jsoup.parser.Parser.parseTextNode(Parser.java:222)\n    at org.jsoup.parser.Parser.parse(Parser.java:94)\n    at org.jsoup.parser.Parser.parse(Parser.java:54)\n    at org.jsoup.Jsoup.parse(Jsoup.java:30)\n", "url": "https://github.com/jhy/jsoup/issues/34", "user": "TwistedLogic", "labels": ["bug"], "created": "2010-08-31 13:07:30", "closed": "2010-09-01 07:08:23", "commits": {}, "ttf": 0.0002777777777777778, "commitsDetails": []}, {"title": "StringIndexOutOfBoundsException when testing whether String content is valid HTML ", "body": "If I try to parse a tag with an equals sign (an empty attribute) but without any single or double quotes around an attribute value, then I get a StringIndexOutOfBoundsException.  The stack trace is pasted below.\n\nAn example String would be \"<a =a\"\n\nThe following JUnit test case should not throw a StringIndexOutOfBoundsException:\n\nimport static org.junit.Assert.assertTrue;\nimport org.jsoup.Jsoup;\nimport org.jsoup.safety.Whitelist;\nimport org.junit.Test;\npublic class BadAttributeTest {\n    @Test\n    public void aTagWithABadAttributeIsValid() throws Exception {\n        assertTrue(Jsoup.isValid(\"<a =a\", Whitelist.relaxed()));\n    }\n}\n\njava.lang.StringIndexOutOfBoundsException: String index out of range: 13\n    at java.lang.String.charAt(String.java:686)\n    at org.jsoup.parser.TokenQueue.consume(TokenQueue.java:130)\n    at org.jsoup.parser.Parser.parseAttribute(Parser.java:207)\n    at org.jsoup.parser.Parser.parseStartTag(Parser.java:142)\n    at org.jsoup.parser.Parser.parse(Parser.java:91)\n    at org.jsoup.parser.Parser.parseBodyFragment(Parser.java:64)\n    at org.jsoup.Jsoup.parseBodyFragment(Jsoup.java:99)\n    at org.jsoup.Jsoup.isValid(Jsoup.java:155)\n", "url": "https://github.com/jhy/jsoup/issues/32", "user": "timezra", "labels": ["bug"], "created": "2010-08-11 17:11:01", "closed": "2010-08-13 00:51:39", "commits": {}, "ttf": 1.0002777777777778, "commitsDetails": []}, {"title": "uppercase umlauts get replaced by lowercase umlaut entities", "body": "The line\n\n```\nSystem.out.println(Jsoup.clean(\"<h1>\u00dcberschrift</h1>\", Whitelist.none()));\n```\n\nshould print\n\n```\n&Uuml;berschrift\n```\n\nbut prints\n\n```\n&uuml;berschrift\n```\n\nThis used to work correctly in v0.3.1, but fails in v1.2.3.\n\nWhile _baseArray_ in _Entities.java_ distinguishes between lowercase and uppercase umlauts, the above call yields the wrong result.\n", "url": "https://github.com/jhy/jsoup/issues/31", "user": "homeworkprod", "labels": ["bug"], "created": "2010-08-11 13:55:08", "closed": "2010-08-13 00:10:54", "commits": {}, "ttf": 1.0002777777777778, "commitsDetails": []}, {"title": "Parsing tags in a custom tag library with a colon", "body": "A problem with parsing tags such as <abc:door />.  Currently, JSoup parses this and splits the tag into-  &lt;abc :door=\"\">&lt;/abc> which is invalid and makes the code useless.\n", "url": "https://github.com/jhy/jsoup/issues/27", "user": "aseychell", "labels": ["bug"], "created": "2010-07-21 11:34:20", "closed": "2010-07-23 08:27:40", "commits": {}, "ttf": 1.0002777777777778, "commitsDetails": []}, {"title": "Issue with <tr>", "body": "When calling append to add a table row the resulting tr gets wrapped in a table even though I appended to an existing table.\n", "url": "https://github.com/jhy/jsoup/issues/21", "user": "piascikj", "labels": ["bug"], "created": "2010-03-30 16:55:03", "closed": "2010-06-13 08:21:10", "commits": {}, "ttf": 74.00027777777778, "commitsDetails": []}, {"title": "When cleaning HTML, relative links should be resolved to absolute for protocol test", "body": "When cleaning HTML with relative links, the href attributes should be resolved to absolute links against the base URI, to confirm the protocol is allowed. At the moment relative links are dropped.\n", "url": "https://github.com/jhy/jsoup/issues/12", "user": "jhy", "labels": ["bug"], "created": "2010-02-21 23:55:40", "closed": "2010-02-24 03:46:10", "commits": {}, "ttf": 2.000277777777778, "commitsDetails": []}, {"title": "JSoup cannot parse IDs with underscores", "body": "Example:\nElements id = doc.select( \"#An_ID_name\" );\n\nError output:\nCould not parse query #An_ID_name\n\nUnderscores are valid characters for IDs, but JSoup seems to choke on them. Regular IDs are working fine. There are other valid characters that I haven't tested, like dashes - these should all be accepted.\n", "url": "https://github.com/jhy/jsoup/issues/10", "user": "svivian", "labels": ["bug"], "created": "2010-02-21 16:32:02", "closed": "2010-02-21 22:35:42", "commits": {}, "ttf": 0.0002777777777777778, "commitsDetails": []}, {"title": "Incorrect normalisation on headless body", "body": "Parsing `<html><body><span class=\"foo\">bar</span>` creates `<html><body><span class=\"foo\">bar</span><head></head></html>`: in the normalisation process, the `head` element is appended to the `html` element, instead of prepended.\n\nThanks to Patrick Smith @ ucsc.edu for reporting the issue.\n", "url": "https://github.com/jhy/jsoup/issues/9", "user": "jhy", "labels": ["bug"], "created": "2010-02-17 11:14:51", "closed": "2010-02-17 11:20:49", "commits": {}, "ttf": 0.0002777777777777778, "commitsDetails": []}, {"title": "Assertion error while cleaning with empty attribute", "body": "If you try to clean `<img alt=\"\" />`, an IllegalArgumentException is thrown; there's an assertion in the Whitelist TypedValue that the value is not empty. Should be testing not null instead.\n\nThanks to Fran\u00e7ois Goldgewicht (http://francois.goldgewicht.com) for reporting the issue.\n", "url": "https://github.com/jhy/jsoup/issues/7", "user": "jhy", "labels": ["bug"], "created": "2010-02-15 00:34:19", "closed": "2010-02-15 00:36:03", "commits": {}, "ttf": 0.0002777777777777778, "commitsDetails": []}, {"title": "Should treat unknown tags as inline, not block", "body": "See: http://groups.google.com/group/jsoup/browse_thread/thread/711fb6d0c4818ead?hl=en_US#\n\nWe should probably treat unknown tags as inline, rather than block tags. Otherwise an unknown tag within a `<p>` causes the auto-closer to close the P, so `<p><custom>Test</custom></p>` parses to `<p></p><custom>Test</custom>`.\n\nNeed to think about what impact that would have on unknown tags that _should_ be blocks.\n\nThanks to Fran\u00e7ois Goldgewicht (http://francois.goldgewicht.com) for reporting the issue.\n", "url": "https://github.com/jhy/jsoup/issues/1", "user": "jhy", "labels": ["bug"], "created": "2010-01-31 22:15:17", "closed": "2010-02-01 11:18:32", "commits": {}, "ttf": 0.0002777777777777778, "commitsDetails": []}, {"title": "Attributes don't accept valid URLs", "body": "When I add correct URL to href attribute, Jsoup escapes URL and it becomes incorrect URL. However it should accept valid URLs as href attributes.\r\n\r\nCode:\r\n```\r\nDocument d = Jsoup.parse(\"<a href=\\\"?page=1&search=test\\\"></a>\");\t\t\r\nSystem.out.println(d.html());\r\n```\r\n\r\nResult:\r\n```\r\n<html>\r\n <head></head>\r\n <body>\r\n  <a href=\"?page=1&amp;search=test\"></a>\r\n </body>\r\n</html>\r\n```\r\n", "url": "https://github.com/jhy/jsoup/issues/1320", "user": "aleksi1", "labels": ["not-a-bug"], "created": "2020-02-09 12:13:03", "closed": "2020-02-09 13:14:06", "commits": {}, "ttf": 0.0002777777777777778, "commitsDetails": []}, {"title": "Current element can't select a child element if they have the same tags.", "body": "<span class='currentEl'>\r\n    <span class='child'></span>\r\n</span>", "url": "https://github.com/jhy/jsoup/issues/1292", "user": "tjcoder", "labels": ["not-a-bug"], "created": "2020-01-03 11:59:52", "closed": "2020-03-01 19:13:20", "commits": {"5136929fea4c786ddccc040da84905a3546e92ba": {"commitGHEventType": "referenced", "commitUser": "jhy"}}, "ttf": 58.000277777777775, "commitsDetails": [{"commitHash": "5136929fea4c786ddccc040da84905a3546e92ba", "commitGHEventType": "referenced", "commitUser": "jhy", "commitParents": ["e807847d7c56c2014df8a3945d94585cccc13ddd"], "nameRev": "5136929fea4c786ddccc040da84905a3546e92ba master~9", "commitMessage": "Testcase to show #1292 works as-is.\n", "commitDateTime": "2020-03-01 11:09:27", "authoredDateTime": "2020-03-01 11:09:27", "commitGitStats": [{"filePath": "src/test/java/org/jsoup/select/SelectorTest.java", "insertions": 17, "deletions": 0, "lines": 17}], "commitSpoonAstDiffStats": [{"spoonFilePath": "SelectorTest.java", "spoonMethods": [{"spoonMethodName": "org.jsoup.select.SelectorTest.childElements()", "TOT": 1, "UPD": 0, "INS": 1, "MOV": 0, "DEL": 0}]}], "spoonStatsSkippedReason": ""}], "filteredCommits": ["5136929fea4c786ddccc040da84905a3546e92ba"], "filteredCommitsReason": {"duplicated": 0, "alsoFixesPhrase": 0, "moreThanOneParent": 0, "multipleIssueFixes": 0, "unavailable": 0, "mergeCommitUsed": 0}, "numCommits": 0, "gitStatsSummary": {"insertions": 0, "deletions": 0, "lines": 0, "gitFilesChange": 0}, "spoonStatsSummary": {"TOT": 0, "UPD": 0, "INS": 0, "MOV": 0, "DEL": 0, "spoonFilesChanged": 0, "spoonMethodsChanged": 0}, "statsSkippedReason": "", "changesInPackagesGIT": [], "changesInPackagesSPOON": []}, {"title": "How to get rid of node structures with unwrap?", "body": "When an element is unwrapped, it is removed from the element list, however, its node remains in the node list (childNodes). I will use the following codes to explain it.\r\n```Java\r\n        String html = \"<p>This is a <span>sample</span> paragraph.</p>\";\r\n        Document doc = Jsoup.parse(html);\r\n        // doc.select(\"span\").unwrap(); \r\n        Elements elements = doc.selectFirst(\"p\").getAllElements();\r\n        for (Element element: elements) {\r\n            System.out.println(element);\r\n            List<Node> nodes = element.childNodes();\r\n            for (Node node: nodes) {\r\n                System.out.println(node.nodeName() + \": \" + node);\r\n            }\r\n            System.out.println(\"\");\r\n        }\r\n```\r\nThe output is \r\n```\r\n<p>This is a <span>sample</span> paragraph.</p>\r\n#text: This is a \r\nspan: <span>sample</span>\r\n#text:  paragraph.\r\n\r\n<span>sample</span>\r\n#text: sample\r\n```\r\nWhen `doc.select(\"span\").unwrap()` is uncommented, the output is\r\n```\r\n<p>This is a sample paragraph.</p>\r\n#text: This is a \r\n#text: sample\r\n#text:  paragraph.\r\n```\r\n\r\nAs you can see from the outputs, `span` element is gone from `elements` but the node is still present in `nodes`. Is it possible to unwrap the node as well? The expected output is\r\n```\r\n<p>This is a sample paragraph.</p>\r\n#text: This is a sample paragraph.\r\n```", "url": "https://github.com/jhy/jsoup/issues/1188", "user": "atbest", "labels": ["not-a-bug"], "created": "2019-03-17 08:19:43", "closed": "2020-02-19 04:49:20", "commits": {}, "ttf": 338.0002777777778, "commitsDetails": []}, {"title": "element.children().select returns elements that are not the immediate children of element", "body": "Element element;\r\nelement.children() returns only the direct children of the element as expected.\r\n\r\nBut element.children().select(\"div[class*=someClass]\") returns matching children() + grand children of the element.", "url": "https://github.com/jhy/jsoup/issues/1141", "user": "sangvann", "labels": ["not-a-bug"], "created": "2018-11-01 15:29:29", "closed": "2020-02-19 04:52:17", "commits": {}, "ttf": 474.0002777777778, "commitsDetails": []}]}