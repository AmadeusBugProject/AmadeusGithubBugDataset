{"issues": [{"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 5, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug", "High Priority"], "user": "nathankooij", "filteredCommits": [], "commits": {"33153b9a752b96cac6a29efdbd7151989af9691e": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "c9e3e0dc14ea2cd41220704f082be4166d00fecc": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "11c4ca50d38a80e894132baae8fde0b81e44b8e9": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "ff8ae56fa939c3477a0cdd1ff56ce3d902f08fba": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "f420828fcf3fb46537ac14787074b96795a4c505": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "9a5dd78004ed0151dc1c4277007d065b6b3e6f55": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2020-06-03 14:33:35", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "33153b9a752b96cac6a29efdbd7151989af9691e", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "c9e3e0dc14ea2cd41220704f082be4166d00fecc", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "11c4ca50d38a80e894132baae8fde0b81e44b8e9", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4936 response buffer corruption (#4937)\n\n* Issue #4936 - Adding LargeHeaderTest to replicate issue\r\n\r\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\r\n\r\n* Issue #4936 - Updating LargeHeaderTest to use ServerConnector\r\n\r\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\r\n\r\n* Issue #4936 - Fail LargeHeaderTest if client detects issues.\r\n\r\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\r\n\r\n* Issue #4936 large response header buffer corruption\r\n\r\nIf the response buffer is too large, the header buffer was released\r\nbut not nulled, then an exception thrown, which again released the\r\nnot nulled buffer.  The buffer thus ends up in the buffer pool twice!\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n\r\n* Issue #4936 large response header buffer corruption\r\n\r\nremoved old comment\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n\r\nCo-authored-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>", "commitParents": ["2834f934479028caac9d7295c00026d0298719b3"], "commitHash": "ff8ae56fa939c3477a0cdd1ff56ce3d902f08fba", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpConnection.SendCallback.releaseHeader()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpConnection.SendCallback.releaseChunk()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpConnection.SendCallback.release()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 2, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.server.HttpConnection.onCompleted()", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.HttpConnection.SendCallback.process()", "DEL": 15, "INS": 11, "UPD": 2, "MOV": 15, "TOT": 43}, {"spoonMethodName": "org.eclipse.jetty.server.HttpConnection.SendCallback", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpConnection", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "LargeHeaderTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.LargeHeaderTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "ff8ae56fa939c3477a0cdd1ff56ce3d902f08fba tags/jetty-9.4.30.v20200611~12", "commitUser": "gregw", "authoredDateTime": "2020-06-03 22:54:12", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 142, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/LargeHeaderTest.java", "insertions": 142, "deletions": 0}, {"lines": 51, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpConnection.java", "insertions": 28, "deletions": 23}], "commitDateTime": "2020-06-03 22:54:12", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "f420828fcf3fb46537ac14787074b96795a4c505", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "9a5dd78004ed0151dc1c4277007d065b6b3e6f55", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "Response header overflow leads to buffer corruptions", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2020-06-03 21:16:00", "statsSkippedReason": "", "body": "**Jetty version**\r\n`9.4.29` (but traced it back to `9.4.27`)\r\n\r\n**Java version**\r\n```\r\nopenjdk 11.0.7 2020-04-14\r\nOpenJDK Runtime Environment 18.9 (build 11.0.7+10)\r\nOpenJDK 64-Bit Server VM 18.9 (build 11.0.7+10, mixed mode)\r\n```\r\n\r\n**OS type/version**\r\n`Debian GNU/Linux 10 (buster)`\r\n\r\n**Description**\r\nWe run several Spring Boot 2 applications, originally deployed as WAR files on a standalone Jetty server (`9.4.15`). Recently we changed these to use an embedded Jetty server, which included an upgrade to Jetty `9.4.28`. Subsequently, we intermittently observed errors in one of our applications, serving an admin page using webjars. The logs indicated errors such as:\r\n\r\n- `org.eclipse.jetty.server.HttpChannel     () : /path-to-a-webjar org.springframework.security.web.firewall.RequestRejectedException: The request was rejected because the HTTP method \"HTGET\" was not included within the whitelist [HEAD, DELETE, POST, GET, OPTIONS, PATCH, PUT]`\r\nThis was a valid request from the client side, but somehow the HTTP method got corrupted.\r\n\r\n- `o.e.j.u.thread.strategy.EatWhatYouKill   (): java.lang.IllegalArgumentException: newPosition > limit: (212 > 0)`\r\nTruncated this one, see below for an example of a stacktrace.\r\n\r\n- `org.eclipse.jetty.http.BadMessageException: 500: Response header too large`\r\n\r\n- `o.e.j.u.thread.strategy.EatWhatYouKill   () : java.nio.BufferOverflowException: null`\r\n\r\nThe admin page itself would also become highly unresponsive, and some files would fail to be served. A restart of the application would fix the errors, but it would also resolve itself \"eventually\". Moreover, the errors' frequency grew with load, but we couldn't reproduce it consistently. This application in particular was affected the most, but we also observed the errors in other applications.\r\n\r\nWe managed to reproduce the issue by creating an endpoint in which we would explicitly send a response header larger than the configured maximum size (`8KB`), after which an application would immediately become unresponsive and all aforementioned errors would start appearing. We confirmed this behavior wasn't present in our previous Jetty version `9.4.15`, and found it was first introduced in `9.4.27`. (Perhaps related to https://github.com/eclipse/jetty.project/issues/4541?)\r\n\r\nThis might also be the same issue as observed in https://github.com/eclipse/jetty.project/issues/4828, but `9.4.29` which included the potential fix didn't resolve the issue for us.\r\n\r\nWe have for now resolved this internally by allowing bigger response headers, as we do have a use case for these internally.\r\n\r\nI have provided below a test that can be used to trigger the behavior. It consists of sending a (too) large response header, after which we concurrently trigger many requests in order to reproduce the behavior. From my testing concurrency is necessary, which could explain why the error was more frequently observed in our webpage (it serves many webjars separately rather than bundling).\r\n\r\nLastly, from my brief foray into exploring this issue, in one of the cases I noticed that when the header overflow was triggered, which released the `HttpConnection#_header` buffer (but before any error handling was done), this same buffer was used by `HttpParser#quickStart`, but its limit was set to 0. These are two different requests, and could explain the HTTP method corruption for instance. So it seems that somehow the buffer cleanup in case of a header overflow is perhaps not correctly handled.\r\n\r\nIf you need any more information, please do let me know.\r\n\r\n**Example test**\r\nPlease look at the logs to observe the triggered errors. Further below I have also provided some sample stacktraces that can be reproduced by this test.\r\n```\r\n    @Test\r\n    public void testBufferCorruption() throws Exception\r\n    {\r\n        Server server = new Server();\r\n\r\n        HttpConfiguration config = new HttpConfiguration();\r\n        HttpConnectionFactory http = new HttpConnectionFactory(config);\r\n\r\n        LocalConnector connector = new LocalConnector(server, http, null);\r\n        connector.setIdleTimeout(5000);\r\n        server.addConnector(connector);\r\n        ErrorHandler eh = new ErrorHandler();\r\n        eh.setServer(server);\r\n        server.addBean(eh);\r\n\r\n        byte[] bytes = new byte[8 * 1024];\r\n        Arrays.fill(bytes, (byte)'X');\r\n        final String longstr = \"thisisastringthatshouldreachover8kbytes-\" + new String(bytes, StandardCharsets.ISO_8859_1) + \"_Z_\";\r\n        server.setHandler(new AbstractHandler()\r\n        {\r\n            @SuppressWarnings(\"unused\")\r\n            @Override\r\n            public void handle(String target, Request baseRequest, HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException\r\n            {\r\n                baseRequest.setHandled(true);\r\n                response.setHeader(HttpHeader.CONTENT_TYPE.toString(), MimeTypes.Type.TEXT_HTML.toString());\r\n                response.setHeader(\"LongStr\", longstr);\r\n                PrintWriter writer = response.getWriter();\r\n                writer.write(\"<html><h1>FOO</h1></html>\");\r\n                writer.flush();\r\n                response.flushBuffer();\r\n            }\r\n        });\r\n        server.start();\r\n\r\n        ExecutorService executorService = Executors.newFixedThreadPool(8);\r\n\r\n        for (int i = 0; i < 500; ++i) {\r\n            executorService.submit(() ->\r\n                    connector.getResponse(\"GET / HTTP/1.1\\r\\n\" +\r\n                            \"Host: localhost\\r\\n\" +\r\n                            \"\\r\\n\"));\r\n        }\r\n\r\n        executorService.awaitTermination(5, TimeUnit.SECONDS);\r\n    }\r\n```\r\n\r\n**Example stacktraces**\r\n```\r\n2020-06-03 15:48:13.693:WARN:oejut.QueuedThreadPool:qtp954702563-33: \r\njava.nio.BufferOverflowException\r\n\tat java.base/java.nio.HeapByteBuffer.put(HeapByteBuffer.java:216)\r\n\tat org.eclipse.jetty.util.BufferUtil.put(BufferUtil.java:399)\r\n\tat org.eclipse.jetty.util.BufferUtil.append(BufferUtil.java:484)\r\n\tat org.eclipse.jetty.io.ByteArrayEndPoint.fill(ByteArrayEndPoint.java:398)\r\n\tat org.eclipse.jetty.server.HttpConnection.fillRequestBuffer(HttpConnection.java:336)\r\n\tat org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:254)\r\n\tat org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:311)\r\n\tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:103)\r\n\tat org.eclipse.jetty.io.ByteArrayEndPoint$1.run(ByteArrayEndPoint.java:76)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:806)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:938)\r\n\tat java.base/java.lang.Thread.run(Thread.java:834)\r\n```\r\n\r\n```\r\n\tjava.lang.ArrayIndexOutOfBoundsException: arraycopy: last destination index 8194 out of bounds for byte[8192]\r\n\tat java.base/java.lang.System.arraycopy(Native Method)\r\n\tat java.base/java.nio.HeapByteBuffer.put(HeapByteBuffer.java:234)\r\n\tat org.eclipse.jetty.util.BufferUtil.put(BufferUtil.java:392)\r\n\tat org.eclipse.jetty.util.BufferUtil.append(BufferUtil.java:484)\r\n\tat org.eclipse.jetty.io.ByteArrayEndPoint.fill(ByteArrayEndPoint.java:398)\r\n\tat org.eclipse.jetty.server.HttpConnection.fillRequestBuffer(HttpConnection.java:336)\r\n\tat org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:254)\r\n\tat org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:311)\r\n\tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:103)\r\n\tat org.eclipse.jetty.io.ByteArrayEndPoint$1.run(ByteArrayEndPoint.java:76)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:806)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:938)\r\n\tat java.base/java.lang.Thread.run(Thread.java:834)\r\n```\r\n\r\n```\r\n\tjava.lang.IllegalArgumentException: newPosition > limit: (5 > 0)\r\n\tat java.base/java.nio.Buffer.createPositionException(Buffer.java:318)\r\n\tat java.base/java.nio.Buffer.position(Buffer.java:293)\r\n\tat java.base/java.nio.ByteBuffer.position(ByteBuffer.java:1086)\r\n\tat java.base/java.nio.ByteBuffer.position(ByteBuffer.java:262)\r\n\tat org.eclipse.jetty.util.BufferUtil.flipToFlush(BufferUtil.java:219)\r\n\tat org.eclipse.jetty.http.HttpGenerator.generateResponse(HttpGenerator.java:459)\r\n\tat org.eclipse.jetty.server.HttpConnection$SendCallback.process(HttpConnection.java:743)\r\n\tat org.eclipse.jetty.util.IteratingCallback.processing(IteratingCallback.java:241)\r\n\tat org.eclipse.jetty.util.IteratingCallback.iterate(IteratingCallback.java:223)\r\n\tat org.eclipse.jetty.server.HttpConnection.send(HttpConnection.java:549)\r\n\tat org.eclipse.jetty.server.HttpChannel.sendResponse(HttpChannel.java:833)\r\n\tat org.eclipse.jetty.server.HttpChannel.sendResponse(HttpChannel.java:851)\r\n\tat org.eclipse.jetty.server.HttpChannel.onBadMessage(HttpChannel.java:784)\r\n\tat org.eclipse.jetty.server.HttpChannelOverHttp.badMessage(HttpChannelOverHttp.java:283)\r\n\tat org.eclipse.jetty.http.HttpParser.badMessage(HttpParser.java:1628)\r\n\tat org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:1610)\r\n\tat org.eclipse.jetty.server.HttpConnection.parseRequestBuffer(HttpConnection.java:364)\r\n\tat org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:261)\r\n\tat org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:311)\r\n\tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:103)\r\n\tat org.eclipse.jetty.io.ByteArrayEndPoint$1.run(ByteArrayEndPoint.java:76)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:806)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:938)\r\n\tat java.base/java.lang.Thread.run(Thread.java:834)\r\n```", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 0.0002777777777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/4936"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 2, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug", "Performance", "Sponsored"], "user": "joakime", "filteredCommits": ["6a953e3a0e0c6a8db40f2a0cc1f56078fcf37457", "c1c2c07a5138d8ed8020d17ac07040f0666e5b89"], "commits": {"6a953e3a0e0c6a8db40f2a0cc1f56078fcf37457": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "44d601aa604838462000d828a836d303c455fe9f": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "c1c2c07a5138d8ed8020d17ac07040f0666e5b89": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "f9b75ff1a30ba7ac88db529203f7b6520aa2692c": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "b6d24c2396f71ce9420ac51f038fc4191cf4f487": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2020-05-29 16:06:51", "commitsDetails": [{"commitMessage": "Issue #4923 - Applying changes requested in PR\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["c1c2c07a5138d8ed8020d17ac07040f0666e5b89"], "commitHash": "6a953e3a0e0c6a8db40f2a0cc1f56078fcf37457", "commitSpoonAstDiffStats": [{"spoonFilePath": "SecureRequestCustomizer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.SecureRequestCustomizer.SslAttributes.getSslSessionInfo()", "DEL": 0, "INS": 0, "UPD": 11, "MOV": 0, "TOT": 11}, {"spoonMethodName": "org.eclipse.jetty.server.SecureRequestCustomizer.CachedSslSessionInfo.getCerts()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.SecureRequestCustomizer.SslSessionData.getIdStr()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.SecureRequestCustomizer.SslSessionData.getKeySize()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.SecureRequestCustomizer.SslSessionData", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.SecureRequestCustomizer.CachedSslSessionInfo", "DEL": 0, "INS": 0, "UPD": 7, "MOV": 1, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.server.SecureRequestCustomizer.CachedSslSessionInfo.getKeySize()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.SecureRequestCustomizer.CachedSslSessionInfo.getIdStr()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.SecureRequestCustomizer.SslSessionData.getCerts()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.SecureRequestCustomizer.SslAttributes.getAttribute(java.lang.String)", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 0, "TOT": 3}]}], "nameRev": "6a953e3a0e0c6a8db40f2a0cc1f56078fcf37457 tags/jetty-9.4.30.v20200611~19^2~2", "commitUser": "joakime", "authoredDateTime": "2020-05-29 16:30:08", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 44, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/SecureRequestCustomizer.java", "insertions": 23, "deletions": 21}], "commitDateTime": "2020-05-29 16:30:08", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #4924 from eclipse/jetty-9.4.x-4923-sslattributes-cache\n\nIssue #4923 - restore caching of SSLSession information for SSL Attributes", "commitParents": ["0ae2fff361cfe3b38c237abc698c95543692898b", "f9b75ff1a30ba7ac88db529203f7b6520aa2692c"], "commitHash": "44d601aa604838462000d828a836d303c455fe9f", "commitSpoonAstDiffStats": [{"spoonFilePath": "SecureRequestCustomizer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.SecureRequestCustomizer.getCertChain(org.eclipse.jetty.server.Request,javax.net.ssl.SSLSession)", "DEL": 1, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.SecureRequestCustomizer.SslSessionData", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.SecureRequestCustomizer.SslAttributes.getSslSessionData()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.SecureRequestCustomizer.SslAttributes.getAttribute(java.lang.String)", "DEL": 0, "INS": 0, "UPD": 5, "MOV": 6, "TOT": 11}]}], "nameRev": "44d601aa604838462000d828a836d303c455fe9f tags/jetty-9.4.30.v20200611~19", "commitUser": "joakime", "authoredDateTime": "2020-06-01 09:40:08", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 66, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/SecureRequestCustomizer.java", "insertions": 61, "deletions": 5}], "commitDateTime": "2020-06-01 09:40:08", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4923 - restore caching of SSLSession information for SSL Attributes\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["84cb97e6bda1ae300a43a6138a096d9e4e979266"], "commitHash": "c1c2c07a5138d8ed8020d17ac07040f0666e5b89", "commitSpoonAstDiffStats": [{"spoonFilePath": "SecureRequestCustomizer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.SecureRequestCustomizer.CachedSslSessionInfo", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.SecureRequestCustomizer.getCertChain(org.eclipse.jetty.server.Request,javax.net.ssl.SSLSession)", "DEL": 1, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.SecureRequestCustomizer.SslAttributes.getSslSessionInfo()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.SecureRequestCustomizer.SslAttributes.getAttribute(java.lang.String)", "DEL": 0, "INS": 0, "UPD": 5, "MOV": 6, "TOT": 11}]}], "nameRev": "c1c2c07a5138d8ed8020d17ac07040f0666e5b89 tags/jetty-9.4.30.v20200611~19^2~3", "commitUser": "joakime", "authoredDateTime": "2020-05-29 13:30:59", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 67, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/SecureRequestCustomizer.java", "insertions": 62, "deletions": 5}], "commitDateTime": "2020-05-29 13:30:59", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4923 - Applying changes requested in PR\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["b6d24c2396f71ce9420ac51f038fc4191cf4f487"], "commitHash": "f9b75ff1a30ba7ac88db529203f7b6520aa2692c", "commitSpoonAstDiffStats": [{"spoonFilePath": "SecureRequestCustomizer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.SecureRequestCustomizer.SslAttributes.getSslSessionData()", "DEL": 1, "INS": 3, "UPD": 0, "MOV": 1, "TOT": 5}]}], "nameRev": "f9b75ff1a30ba7ac88db529203f7b6520aa2692c tags/jetty-9.4.30.v20200611~19^2", "commitUser": "joakime", "authoredDateTime": "2020-06-01 07:15:07", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 5, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/SecureRequestCustomizer.java", "insertions": 3, "deletions": 2}], "commitDateTime": "2020-06-01 07:15:07", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4923 - Applying changes requested in PR\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["6a953e3a0e0c6a8db40f2a0cc1f56078fcf37457"], "commitHash": "b6d24c2396f71ce9420ac51f038fc4191cf4f487", "commitSpoonAstDiffStats": [{"spoonFilePath": "SecureRequestCustomizer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.SecureRequestCustomizer.SslSessionData.getCerts()", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.SecureRequestCustomizer.SslSessionData", "DEL": 1, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.SecureRequestCustomizer.SslAttributes.getSslSessionData()", "DEL": 0, "INS": 1, "UPD": 2, "MOV": 2, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.server.SecureRequestCustomizer.SslSessionData.getKeySize()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "b6d24c2396f71ce9420ac51f038fc4191cf4f487 tags/jetty-9.4.30.v20200611~19^2~1", "commitUser": "joakime", "authoredDateTime": "2020-06-01 07:13:28", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 20, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/SecureRequestCustomizer.java", "insertions": 8, "deletions": 12}], "commitDateTime": "2020-06-01 07:13:28", "spoonStatsSkippedReason": ""}], "title": "SecureRequestCustomizer.SslAttributes does not cache cert chain like before", "spoonStatsSummary": {"spoonMethodsChanged": 11, "DEL": 1, "INS": 6, "UPD": 32, "MOV": 7, "TOT": 46, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 111, "insertions": 85, "gitFilesChange": 1, "deletions": 26}, "closed": "2020-06-04 15:15:39", "statsSkippedReason": "", "body": "**Jetty version**\r\n9.4.29\r\n\r\n**Description**\r\nWhen a long lived connection has multiple requests and something accesses the `HttpServletRequest.getAttributes(\"javax.servlet.request.X509Certificate\")` then the entire Certificate Chain is resolved with each access of the Attributes.\r\n\r\nThe change in PR #4816 apparently got rid of the SslSession `CachedInfo` object that made this lookup efficient.\r\n\r\nOld code in 9.4.28 looks like this...\r\n\r\nhttps://github.com/eclipse/jetty.project/blob/jetty-9.4.28.v20200408/jetty-server/src/main/java/org/eclipse/jetty/server/SecureRequestCustomizer.java#L299\r\n\r\nhttps://github.com/eclipse/jetty.project/blob/ab228fde9e55e9164c738d7fa121f8ac5acd51c9/jetty-server/src/main/java/org/eclipse/jetty/server/SecureRequestCustomizer.java#L289-L307\r\n\r\n\r\n\r\n", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.SecureRequestCustomizer.getCertChain(org.eclipse.jetty.server.Request,javax.net.ssl.SSLSession)", "org.eclipse.jetty.server.SecureRequestCustomizer.CachedSslSessionInfo.getCerts()", "org.eclipse.jetty.server.SecureRequestCustomizer.SslAttributes.getSslSessionInfo()", "org.eclipse.jetty.server.SecureRequestCustomizer.SslSessionData.getIdStr()", "org.eclipse.jetty.server.SecureRequestCustomizer.SslSessionData.getKeySize()", "org.eclipse.jetty.server.SecureRequestCustomizer.SslSessionData", "org.eclipse.jetty.server.SecureRequestCustomizer.CachedSslSessionInfo", "org.eclipse.jetty.server.SecureRequestCustomizer.CachedSslSessionInfo.getKeySize()", "org.eclipse.jetty.server.SecureRequestCustomizer.CachedSslSessionInfo.getIdStr()", "org.eclipse.jetty.server.SecureRequestCustomizer.SslSessionData.getCerts()", "org.eclipse.jetty.server.SecureRequestCustomizer.SslAttributes.getAttribute(java.lang.String)"], "ttf": 5.000277777777778, "numCommits": 2, "url": "https://github.com/eclipse/jetty.project/issues/4923"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "janbartel", "filteredCommits": [], "commits": {"262bb50ca921c58890069743b178204057acec57": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "d0ecfbfd5677b49f5a25fa92cceb5eb396118b90": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2020-05-29 13:14:39", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "262bb50ca921c58890069743b178204057acec57", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4921 (#4922)\n\nSigned-off-by: Jan Bartel <janb@webtide.com>", "commitParents": ["84cb97e6bda1ae300a43a6138a096d9e4e979266"], "commitHash": "d0ecfbfd5677b49f5a25fa92cceb5eb396118b90", "commitSpoonAstDiffStats": [{"spoonFilePath": "QuickStartWebApp.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.quickstart.QuickStartWebApp.contextInitialized()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.quickstart.QuickStartWebApp.contextDestroyed()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "TestQuickStart.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.quickstart.TestQuickStart.testProgrammaticOverrideOfDefaultServletMapping()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.quickstart.TestQuickStart.testListenersNotCalledInPreConfigure()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.quickstart.TestQuickStart.testListenersCalledIfGenerateWithStart()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "FooContextListener.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.quickstart.FooContextListener.contextDestroyed(javax.servlet.ServletContextEvent)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.quickstart.FooContextListener", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.quickstart.FooContextListener.contextInitialized(javax.servlet.ServletContextEvent)", "DEL": 3, "INS": 4, "UPD": 1, "MOV": 7, "TOT": 15}]}], "nameRev": "d0ecfbfd5677b49f5a25fa92cceb5eb396118b90 tags/jetty-9.4.30.v20200611~23", "commitUser": "gregw", "authoredDateTime": "2020-05-30 12:46:21", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 18, "filePath": "jetty-quickstart/src/test/java/org/eclipse/jetty/quickstart/FooContextListener.java", "insertions": 14, "deletions": 4}, {"lines": 24, "filePath": "jetty-quickstart/src/main/java/org/eclipse/jetty/quickstart/QuickStartWebApp.java", "insertions": 23, "deletions": 1}, {"lines": 49, "filePath": "jetty-quickstart/src/test/java/org/eclipse/jetty/quickstart/TestQuickStart.java", "insertions": 48, "deletions": 1}], "commitDateTime": "2020-05-30 12:46:21", "spoonStatsSkippedReason": ""}], "title": "Quickstart run improperly runs dynamically added context initializers", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2020-05-30 10:47:12", "statsSkippedReason": "", "body": "**9.4**\r\n\r\nSince #4662,  when pregenerating the quickstart.xml file, jetty will also call the context initializers.\r\n\r\n\r\n", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 0.0002777777777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/4921"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "janbartel", "filteredCommits": [], "commits": {"cb09abe8737e17bd2afa4d68b3b5f2f163d53552": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "c1ce94a34c63692d741807aff9bace4fccc5c362": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2020-05-28 11:56:13", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "c1ce94a34c63692d741807aff9bace4fccc5c362", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4920 Restore ability to invalidate sessions on shutdown (#4933)\n\nSigned-off-by: Jan Bartel <janb@webtide.com>", "commitParents": ["cbda92ab8c56b13bcf171877a16e5d2d6dc813c3"], "commitHash": "cb09abe8737e17bd2afa4d68b3b5f2f163d53552", "commitSpoonAstDiffStats": [{"spoonFilePath": "DefaultSessionCacheTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.session.DefaultSessionCacheTest.checkSessionBeforeShutdown(java.lang.String,org.eclipse.jetty.server.session.SessionDataStore,org.eclipse.jetty.server.session.SessionCache,org.eclipse.jetty.server.session.TestSessionActivationListener,org.eclipse.jetty.server.session.TestHttpSessionListener)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.session.DefaultSessionCacheTest.checkSessionAfterShutdown(java.lang.String,org.eclipse.jetty.server.session.SessionDataStore,org.eclipse.jetty.server.session.SessionCache,org.eclipse.jetty.server.session.TestSessionActivationListener,org.eclipse.jetty.server.session.TestHttpSessionListener)", "DEL": 0, "INS": 5, "UPD": 0, "MOV": 0, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.server.session.DefaultSessionCacheTest.testShutdownWithSessionStore()", "DEL": 5, "INS": 0, "UPD": 14, "MOV": 30, "TOT": 49}]}, {"spoonFilePath": "AbstractSessionCache.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.session.AbstractSessionCache.isInvalidateOnShutdown()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.session.AbstractSessionCache", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.session.AbstractSessionCache.setInvalidateOnShutdown(boolean)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AbstractSessionCacheTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.session.AbstractSessionCacheTest.checkSessionAfterShutdown(java.lang.String,org.eclipse.jetty.server.session.SessionDataStore,org.eclipse.jetty.server.session.SessionCache,org.eclipse.jetty.server.session.AbstractSessionCacheTest$TestSessionActivationListener,org.eclipse.jetty.server.session.TestHttpSessionListener)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.session.AbstractSessionCacheTest.testNoInvalidateOnShutdown()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.session.AbstractSessionCacheTest.checkSessionBeforeShutdown(java.lang.String,org.eclipse.jetty.server.session.SessionDataStore,org.eclipse.jetty.server.session.SessionCache,org.eclipse.jetty.server.session.AbstractSessionCacheTest$TestSessionActivationListener,org.eclipse.jetty.server.session.TestHttpSessionListener)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.session.AbstractSessionCacheTest.testInvalidateOnShutdown()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "DefaultSessionCache.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.session.DefaultSessionCache.shutdown()", "DEL": 2, "INS": 4, "UPD": 0, "MOV": 5, "TOT": 11}]}, {"spoonFilePath": "DefaultSessionCacheFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.session.DefaultSessionCacheFactory.getSessionCache(org.eclipse.jetty.server.session.SessionHandler)", "DEL": 1, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 3}]}, {"spoonFilePath": "SessionCache.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.session.setInvalidateOnShutdown(boolean)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.session.isInvalidateOnShutdown()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "NullSessionCacheTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.session.NullSessionCacheTest.checkSessionBeforeShutdown(java.lang.String,org.eclipse.jetty.server.session.SessionDataStore,org.eclipse.jetty.server.session.SessionCache,org.eclipse.jetty.server.session.TestSessionActivationListener,org.eclipse.jetty.server.session.TestHttpSessionListener)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.session.NullSessionCacheTest.testShutdownWithSessionStore()", "DEL": 6, "INS": 0, "UPD": 11, "MOV": 16, "TOT": 33}, {"spoonMethodName": "org.eclipse.jetty.server.session.NullSessionCacheTest.checkSessionAfterShutdown(java.lang.String,org.eclipse.jetty.server.session.SessionDataStore,org.eclipse.jetty.server.session.SessionCache,org.eclipse.jetty.server.session.TestSessionActivationListener,org.eclipse.jetty.server.session.TestHttpSessionListener)", "DEL": 0, "INS": 5, "UPD": 0, "MOV": 0, "TOT": 5}]}, {"spoonFilePath": "AbstractSessionCacheFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.session.AbstractSessionCacheFactory", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.session.AbstractSessionCacheFactory.setInvalidateOnShutdown(boolean)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.session.AbstractSessionCacheFactory.isInvalidateOnShutdown()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.session.AbstractSessionCacheFactory.getSessionCache(org.eclipse.jetty.server.session.SessionHandler)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.session.AbstractSessionCacheFactory.newSessionCache(org.eclipse.jetty.server.session.SessionHandler)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "DefaultSessionIdManager.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.session.DefaultSessionIdManager.getSessionHandlers()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}]}, {"spoonFilePath": "NullSessionCacheFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.session.NullSessionCacheFactory.setInvalidateOnShutdown(boolean)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.session.NullSessionCacheFactory.isInvalidateOnShutdown()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.session.NullSessionCacheFactory.getSessionCache(org.eclipse.jetty.server.session.SessionHandler)", "DEL": 2, "INS": 0, "UPD": 1, "MOV": 5, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.server.session.NullSessionCacheFactory.newSessionCache(org.eclipse.jetty.server.session.SessionHandler)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "cb09abe8737e17bd2afa4d68b3b5f2f163d53552 tags/jetty-9.4.30.v20200611~3", "commitUser": "gregw", "authoredDateTime": "2020-06-10 18:40:19", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-server/src/main/config/modules/session-cache-null.mod", "insertions": 1, "deletions": 1}, {"lines": 63, "filePath": "tests/test-sessions/test-sessions-common/src/test/java/org/eclipse/jetty/server/session/DefaultSessionCacheTest.java", "insertions": 50, "deletions": 13}, {"lines": 9, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/session/SessionCache.java", "insertions": 9, "deletions": 0}, {"lines": 126, "filePath": "tests/test-sessions/test-sessions-common/src/test/java/org/eclipse/jetty/server/session/AbstractSessionCacheTest.java", "insertions": 115, "deletions": 11}, {"lines": 18, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/session/AbstractSessionCache.java", "insertions": 18, "deletions": 0}, {"lines": 21, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/session/NullSessionCacheFactory.java", "insertions": 15, "deletions": 6}, {"lines": 4, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/session/DefaultSessionIdManager.java", "insertions": 3, "deletions": 1}, {"lines": 26, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/session/AbstractSessionCacheFactory.java", "insertions": 26, "deletions": 0}, {"lines": 71, "filePath": "tests/test-sessions/test-sessions-common/src/test/java/org/eclipse/jetty/server/session/NullSessionCacheTest.java", "insertions": 25, "deletions": 46}, {"lines": 1, "filePath": "jetty-server/src/main/config/etc/sessions/session-cache-hash.xml", "insertions": 1, "deletions": 0}, {"lines": 1, "filePath": "jetty-server/src/main/config/modules/session-cache-hash.mod", "insertions": 1, "deletions": 0}, {"lines": 10, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/session/DefaultSessionCacheFactory.java", "insertions": 2, "deletions": 8}, {"lines": 25, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/session/DefaultSessionCache.java", "insertions": 15, "deletions": 10}], "commitDateTime": "2020-06-10 18:40:19", "spoonStatsSkippedReason": ""}], "title": "Restore ability to delete sessions on stop", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2020-06-11 11:35:34", "statsSkippedReason": "", "body": "Pre jetty 9.4 there was the ability to have all sessions invalidated when the server stopped, we should restore this behaviour.\n\nAlso evaluate the consistency of treatment of the session data store by the session cache wrt expectation that the session data store can/cannot be null.", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 13.000277777777777, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/4920"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "janbartel", "filteredCommits": [], "commits": {"0e0159e18f0486df4599e91f477af3bc76041bd6": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "52e7dd487344283cd44922c61b702b38c3237fa6": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2020-05-20 11:55:38", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "0e0159e18f0486df4599e91f477af3bc76041bd6", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4895 SessionCache flushOnResponseCommit with invalid session (#4896)\n\nSigned-off-by: Jan Bartel <janb@webtide.com>", "commitParents": ["3845790c5d24ea69b1724acd45fdf27a76321c0c"], "commitHash": "52e7dd487344283cd44922c61b702b38c3237fa6", "commitSpoonAstDiffStats": [{"spoonFilePath": "AbstractSessionCache.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.session.AbstractSessionCache.commit(org.eclipse.jetty.server.session.Session)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "RemoveSessionTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.session.RemoveSessionTest.TestServlet.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.session.RemoveSessionTest.testRemoveSession()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}]}], "nameRev": "52e7dd487344283cd44922c61b702b38c3237fa6 tags/jetty-9.4.29.v20200521~3", "commitUser": "janbartel", "authoredDateTime": "2020-05-20 23:05:53", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/session/AbstractSessionCache.java", "insertions": 1, "deletions": 1}, {"lines": 7, "filePath": "tests/test-sessions/test-sessions-common/src/test/java/org/eclipse/jetty/server/session/RemoveSessionTest.java", "insertions": 6, "deletions": 1}], "commitDateTime": "2020-05-20 23:05:53", "spoonStatsSkippedReason": ""}], "title": "AbstractSessionCache.setFlushOnResponseCommit(true) can write an invalid session to the backing store", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2020-05-21 08:50:55", "statsSkippedReason": "", "body": "**9.4**\r\n\r\nIf AbstractSessionCache.setFlushOnResponseCommit is `true`, then a session with dirty attributes will be written through the cache to the backing store before the response is committed.\r\n\r\nWhen a session is invalidated, each and every attribute must be individually removed from the session, which sets the dirty flag on the session.\r\n\r\nThus, if a session is invalidated prior to the response being committed, the session is fully invalidated, but it's dirty flag will be set to true.\r\n\r\nWhen the commit occurs, we only check the dirty flag to write the session to the backing store, not whether or not the session is still valid. The upshot being that a session that had been deleted in the backing store can be recreated in it, albeit with a state == invalid. The session cache is unaffected by this bug, no invalidated sessions are resurrected or remain in the session cache. There is also no danger of an invalid session being in the backing store (other than taking up space), as the session code always checks the validity of sessions in the backing store before using them.\r\n\r\n", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 0.0002777777777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/4895"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 2, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug", "High Priority"], "user": "SpComb", "filteredCommits": ["c497b61917a4e4fd09bb098bd264bf06e62db317", "59a66158ed0c12dd10cec842b0ccf595cbe2e4eb", "90da10dac57c9a4cf5bea85176077e5862c9589b", "6ae75be9bcb7e2059804f1bffcfd18dad44c68d6", "4dc024b2b1b4d84493675403df77e2724bed831f"], "commits": {"6ae75be9bcb7e2059804f1bffcfd18dad44c68d6": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "4dc024b2b1b4d84493675403df77e2724bed831f": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "c497b61917a4e4fd09bb098bd264bf06e62db317": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "90da10dac57c9a4cf5bea85176077e5862c9589b": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "86a40a07d6f23ef797a1d1ad96977f5a8c91258e": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "59a66158ed0c12dd10cec842b0ccf595cbe2e4eb": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "6af6af6419b43fce0c7c291579677681f901b676": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "1ac7fe4f9c0726c70102e83fe4e3a93901d9872c": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2020-05-08 16:12:07", "commitsDetails": [{"commitMessage": "Issue #4860 - Consistency to HttpFields API\n\nIf a null name (or HttpHeader or HttpField) is used\nit should throw an ISE\n\n+ .add() should remain consistent\n+ .put() should remain consistent\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["90da10dac57c9a4cf5bea85176077e5862c9589b"], "commitHash": "6ae75be9bcb7e2059804f1bffcfd18dad44c68d6", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpFieldTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.HttpFieldTest.testFieldNameNull()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpFields.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.HttpFields.add(org.eclipse.jetty.http.HttpHeader,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.HttpFields.put(java.lang.String,java.util.List)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.http.HttpFields.put(org.eclipse.jetty.http.HttpHeader,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpFieldsTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.HttpFieldsTest.testPutNullValueList()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.HttpFieldsTest.testAddNullName()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.HttpFieldsTest.testPutNullName()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpField.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.HttpField", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "6ae75be9bcb7e2059804f1bffcfd18dad44c68d6 tags/jetty-9.4.29.v20200521~19^2~2", "commitUser": "joakime", "authoredDateTime": "2020-05-11 10:34:52", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 10, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/HttpFields.java", "insertions": 10, "deletions": 0}, {"lines": 45, "filePath": "jetty-http/src/test/java/org/eclipse/jetty/http/HttpFieldsTest.java", "insertions": 42, "deletions": 3}, {"lines": 2, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/HttpField.java", "insertions": 1, "deletions": 1}, {"lines": 7, "filePath": "jetty-http/src/test/java/org/eclipse/jetty/http/HttpFieldTest.java", "insertions": 7, "deletions": 0}], "commitDateTime": "2020-05-11 10:34:52", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4860 - Fixing test comment\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["6ae75be9bcb7e2059804f1bffcfd18dad44c68d6"], "commitHash": "4dc024b2b1b4d84493675403df77e2724bed831f", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpFieldsTest.java", "spoonMethods": []}], "nameRev": "4dc024b2b1b4d84493675403df77e2724bed831f tags/jetty-9.4.29.v20200521~19^2~1", "commitUser": "joakime", "authoredDateTime": "2020-05-11 17:25:49", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-http/src/test/java/org/eclipse/jetty/http/HttpFieldsTest.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2020-05-11 17:25:49", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4860 NPE from HttpFields\n\nParanoid catch if sending and exception page throws an exception.\n\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\n", "commitParents": ["933ab641ee3f042200e73855a419f1aa33a21f92"], "commitHash": "c497b61917a4e4fd09bb098bd264bf06e62db317", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpChannel.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannel.handle()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 3}]}], "nameRev": "c497b61917a4e4fd09bb098bd264bf06e62db317 tags/jetty-9.4.29.v20200521~19^2~7", "commitUser": "gregw", "authoredDateTime": "2020-05-11 13:57:17", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 13, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannel.java", "insertions": 11, "deletions": 2}], "commitDateTime": "2020-05-11 13:57:17", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4860 - Improving testPreventNullField testcase\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["2c7c98f4690d2db399005b48dd42e9d2f5131edd"], "commitHash": "90da10dac57c9a4cf5bea85176077e5862c9589b", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpFieldsTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.HttpFieldsTest.testPreventNullField()", "DEL": 0, "INS": 8, "UPD": 0, "MOV": 4, "TOT": 12}]}], "nameRev": "90da10dac57c9a4cf5bea85176077e5862c9589b tags/jetty-9.4.29.v20200521~19^2~3", "commitUser": "joakime", "authoredDateTime": "2020-05-11 10:05:56", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 14, "filePath": "jetty-http/src/test/java/org/eclipse/jetty/http/HttpFieldsTest.java", "insertions": 11, "deletions": 3}], "commitDateTime": "2020-05-11 10:05:56", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #4863 from eclipse/jetty-9.4.x-4860-NullHttpFields\n\nIssue #4860 - NPE from HttpFields", "commitParents": ["e86977394e78691807cbd8858b9f9d0632194b44", "d127db5186be4950d92199b5cda43b4f6a94a126"], "commitHash": "86a40a07d6f23ef797a1d1ad96977f5a8c91258e", "commitSpoonAstDiffStats": [], "nameRev": "86a40a07d6f23ef797a1d1ad96977f5a8c91258e tags/jetty-9.4.29.v20200521~19", "commitUser": "joakime", "authoredDateTime": "2020-05-11 21:04:50", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 52, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/HttpFields.java", "insertions": 40, "deletions": 12}, {"lines": 13, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannel.java", "insertions": 11, "deletions": 2}, {"lines": 412, "filePath": "jetty-http/src/test/java/org/eclipse/jetty/http/HttpFieldsTest.java", "insertions": 257, "deletions": 155}, {"lines": 2, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/HttpField.java", "insertions": 1, "deletions": 1}, {"lines": 7, "filePath": "jetty-http/src/test/java/org/eclipse/jetty/http/HttpFieldTest.java", "insertions": 7, "deletions": 0}], "commitDateTime": "2020-05-11 21:04:50", "spoonStatsSkippedReason": "tooManyChanges"}, {"commitMessage": "Issue #4860 NPE HttpFields\n\nFixes from review.\nFixed iterator overflow bug\nclearer updates of size\nbetter nonNull messages\n\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\n", "commitParents": ["6ae75be9bcb7e2059804f1bffcfd18dad44c68d6"], "commitHash": "59a66158ed0c12dd10cec842b0ccf595cbe2e4eb", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpFields.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.HttpFields.remove(org.eclipse.jetty.http.HttpHeader)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.http.HttpFields.put(org.eclipse.jetty.http.HttpHeader,java.lang.String)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.HttpFields.add(org.eclipse.jetty.http.HttpHeader,java.lang.String)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.HttpFields.remove(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.http.HttpFields.put(java.lang.String,java.util.List)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.HttpFields.put(org.eclipse.jetty.http.HttpField)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.http.HttpFields.ListItr.add(org.eclipse.jetty.http.HttpField)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "HttpFieldsTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.HttpFieldsTest.testIteration()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "59a66158ed0c12dd10cec842b0ccf595cbe2e4eb tags/jetty-9.4.29.v20200521~19^2^2", "commitUser": "gregw", "authoredDateTime": "2020-05-11 22:09:19", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 18, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/HttpFields.java", "insertions": 11, "deletions": 7}, {"lines": 2, "filePath": "jetty-http/src/test/java/org/eclipse/jetty/http/HttpFieldsTest.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2020-05-11 22:09:19", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4860 NPE from HttpFields\n\nImproved test coverage\n\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\n", "commitParents": ["c497b61917a4e4fd09bb098bd264bf06e62db317"], "commitHash": "6af6af6419b43fce0c7c291579677681f901b676", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpFieldsTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.HttpFieldsTest.testAddAll()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.HttpFieldsTest.testStream()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.HttpFieldsTest.testGetValuesList()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.HttpFieldsTest.testContains()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.http.HttpFieldsTest.testGetCSV()", "DEL": 1, "INS": 1, "UPD": 70, "MOV": 64, "TOT": 136}, {"spoonMethodName": "org.eclipse.jetty.http.HttpFieldsTest.testAddCSV()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.HttpFieldsTest.testIteration()", "DEL": 0, "INS": 21, "UPD": 0, "MOV": 11, "TOT": 32}, {"spoonMethodName": "org.eclipse.jetty.http.HttpFieldsTest.testPut()", "DEL": 1, "INS": 1, "UPD": 25, "MOV": 29, "TOT": 56}, {"spoonMethodName": "org.eclipse.jetty.http.HttpFieldsTest.testPreventNullField()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.http.HttpFieldsTest.testAdd()", "DEL": 1, "INS": 1, "UPD": 26, "MOV": 33, "TOT": 61}]}], "nameRev": "6af6af6419b43fce0c7c291579677681f901b676 tags/jetty-9.4.29.v20200521~19^2~6", "commitUser": "gregw", "authoredDateTime": "2020-05-11 13:58:27", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 235, "filePath": "jetty-http/src/test/java/org/eclipse/jetty/http/HttpFieldsTest.java", "insertions": 163, "deletions": 72}], "commitDateTime": "2020-05-11 13:58:27", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4860 NPE from HttpFields\n\n + Fix bug with list iterator nextIndex\n + List iterator cannot inject null fields\n + minor cleanups\n\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\n", "commitParents": ["6af6af6419b43fce0c7c291579677681f901b676"], "commitHash": "1ac7fe4f9c0726c70102e83fe4e3a93901d9872c", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpFields.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.HttpFields.add(org.eclipse.jetty.http.HttpFields)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.HttpFields.ListItr.nextIndex()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.http.HttpFields.add(org.eclipse.jetty.http.HttpHeader,org.eclipse.jetty.http.HttpHeaderValue)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.http.HttpFields.getValuesList(java.lang.String)", "DEL": 4, "INS": 4, "UPD": 0, "MOV": 3, "TOT": 11}, {"spoonMethodName": "org.eclipse.jetty.http.HttpFields.ListItr.set(org.eclipse.jetty.http.HttpField)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.http.HttpFields.ListItr.add(org.eclipse.jetty.http.HttpField)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 4, "TOT": 5}]}], "nameRev": "1ac7fe4f9c0726c70102e83fe4e3a93901d9872c tags/jetty-9.4.29.v20200521~19^2~5", "commitUser": "gregw", "authoredDateTime": "2020-05-11 14:00:04", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 32, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/HttpFields.java", "insertions": 23, "deletions": 9}], "commitDateTime": "2020-05-11 14:00:04", "spoonStatsSkippedReason": ""}], "title": "org.eclipse.jetty.server.HttpChannel busyloop on HttpFields NullPointerException", "spoonStatsSummary": {"spoonMethodsChanged": 9, "DEL": 0.0, "INS": 10.0, "UPD": 6.0, "MOV": 6.0, "TOT": 22.0, "spoonFilesChanged": 3}, "gitStatsSummary": {"lines": 43, "insertions": 33, "gitFilesChange": 3, "deletions": 10}, "closed": "2020-05-12 02:17:44", "statsSkippedReason": "", "body": "**Jetty version**\r\n\r\n9.4.27\r\n\r\n**Java version**\r\n\r\nopenjdk version \"11.0.7\" 2020-04-14 LTS\r\nOpenJDK Runtime Environment 18.9 (build 11.0.7+10-LTS)\r\nOpenJDK 64-Bit Server VM 18.9 (build 11.0.7+10-LTS, mixed mode, sharing)\r\n\r\n**OS type/version**\r\n\r\nDocker `centos:7` image\r\n\r\n**Description**\r\n\r\nWe are suffering from an unknown issue with a corrupted response `org.eclipse.jetty.http.HttpFields`,  where the `_fields` array appears to contain a `null` value. Previously with jetty 9.4.20 this would result in an error being logged, and the connection was aborted, making it relatively harmless as the request would be retried.\r\n\r\nWith jetty 9.4.27, the same situation leads to a busyloop in jetty, because the `org.eclipse.jetty.server.HttpChannel` `handle`  -> `Response.resetContent` now fails on the same corrupted `HttpFields`, and keeps failing at a high rate until eventually aborting with an `java.lang.OutOfMemoryError`.\r\n\r\nThis issue is meant to be about the `org.eclipse.jetty.server.HttpChannel` behavior in 9.4.27 vs 9.4.20, not the actual `HttpFields` corruption itself. I suspect that might be explained by some threading issue (with spring webflux?), but we don't know yet.\r\n\r\nDesired behavior would be for jetty to survive the corrupted `HttpFields`, like in older versions.\r\n\r\nInitial error:\r\n\r\n```\r\n2020-05-08 13:29:29.259|WARN|1|qtp2016038911-26|||org.eclipse.jetty.server.HttpChannel|MAIN||||/api/...\r\njava.lang.NullPointerException: null\r\n\tat org.eclipse.jetty.http.HttpFields.put(HttpFields.java:630) ~[jetty-http-9.4.27.v20200227.jar!/:9.4.27.v20200227]\r\n\tat org.eclipse.jetty.http.HttpFields.put(HttpFields.java:658) ~[jetty-http-9.4.27.v20200227.jar!/:9.4.27.v20200227]\r\n\tat org.eclipse.jetty.server.Response.setHeader(Response.java:592) ~[jetty-server-9.4.27.v20200227.jar!/:9.4.27.v20200227]\r\n```\r\n\r\nBusylooping error:\r\n\r\n```\r\n2020-05-08 13:29:29.277|WARN|1|qtp2016038911-26|||org.eclipse.jetty.server.HttpChannel|MAIN||||/api/...\r\njava.lang.NullPointerException: null\r\n\tat org.eclipse.jetty.server.Response.resetContent(Response.java:1128) ~[jetty-server-9.4.27.v20200227.jar!/:9.4.27.v20200227]\r\n\tat org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:435) ~[jetty-server-9.4.27.v20200227.jar!/:9.4.27.v20200227]\r\n\tat org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:273) ~[jetty-server-9.4.27.v20200227.jar!/:9.4.27.v20200227]\r\n\tat org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:311) ~[jetty-io-9.4.27.v20200227.jar!/:9.4.27.v20200227]\r\n\tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:103) ~[jetty-io-9.4.27.v20200227.jar!/:9.4.27.v20200227]\r\n\tat org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:117) ~[jetty-io-9.4.27.v20200227.jar!/:9.4.27.v20200227]\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.java:336) ~[jetty-util-9.4.27.v20200227.jar!/:9.4.27.v20200227]\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:313) ~[jetty-util-9.4.27.v20200227.jar!/:9.4.27.v20200227]\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:171) ~[jetty-util-9.4.27.v20200227.jar!/:9.4.27.v20200227]\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:129) ~[jetty-util-9.4.27.v20200227.jar!/:9.4.27.v20200227]\r\n\tat org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:375) ~[jetty-util-9.4.27.v20200227.jar!/:9.4.27.v20200227]\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:806) ~[jetty-util-9.4.27.v20200227.jar!/:9.4.27.v20200227]\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:938) ~[jetty-util-9.4.27.v20200227.jar!/:9.4.27.v20200227]\r\n\tat java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]\r\n```\r\n\r\nFirst 1k of logs attached, the rest is just the same repeating. There's a custom springboot exception handler and spring SSE handler involved.\r\n\r\n[20200508-jetty-httpfields-npe-busyloop.txt](https://github.com/eclipse/jetty.project/files/4600175/20200508-jetty-httpfields-npe-busyloop.txt)", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server", "jetty-http/src/main/java/org/eclipse/jetty/http"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.HttpChannel.handle()", "org.eclipse.jetty.http.HttpFields.remove(org.eclipse.jetty.http.HttpHeader)", "org.eclipse.jetty.http.HttpField", "org.eclipse.jetty.http.HttpFields.put(org.eclipse.jetty.http.HttpHeader,java.lang.String)", "org.eclipse.jetty.http.HttpFields.add(org.eclipse.jetty.http.HttpHeader,java.lang.String)", "org.eclipse.jetty.http.HttpFields.remove(java.lang.String)", "org.eclipse.jetty.http.HttpFields.put(java.lang.String,java.util.List)", "org.eclipse.jetty.http.HttpFields.put(org.eclipse.jetty.http.HttpField)", "org.eclipse.jetty.http.HttpFields.ListItr.add(org.eclipse.jetty.http.HttpField)"], "ttf": 3.000277777777778, "numCommits": 3, "url": "https://github.com/eclipse/jetty.project/issues/4860"}, {"labels": ["Bug", "Sponsored"], "closed": "2020-05-07 15:34:48", "body": "**Jetty version**\r\n9.4.27\r\n\r\n**Java version**\r\n11.0.7\r\n\r\n**OS type/version**\r\nLinux\r\n\r\n**Description**\r\nJetty does not correctly process a proxy-protocol v2 header when the command is LOCAL and the header's address length field is non-zero. ", "commits": {}, "title": "Proxy protocol v2 mistakenly ignores address length when LOCAL command is specified", "created": "2020-05-04 15:39:15", "user": "lorban", "url": "https://github.com/eclipse/jetty.project/issues/4843", "commitsDetails": [], "ttf": 2.000277777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "geeknotnerd", "filteredCommits": ["c645d0f7c4abf31a8ca1e56f7982de33efef8e88"], "commits": {"c645d0f7c4abf31a8ca1e56f7982de33efef8e88": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "e4fd49dc36eb08ff28b19f1efde92dc9cb08fdfd": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2020-05-01 18:06:51", "commitsDetails": [{"commitMessage": "Issue #4835 - Addressing flush/commit with GzipHttpOutputInterceptor\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["abb26d0781804f0ac36272aad019d1bd4863ce21"], "commitHash": "c645d0f7c4abf31a8ca1e56f7982de33efef8e88", "commitSpoonAstDiffStats": [{"spoonFilePath": "GzipHttpOutputInterceptor.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.gzip.GzipHttpOutputInterceptor.commit(java.nio.ByteBuffer,boolean,org.eclipse.jetty.util.Callback)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.handler.gzip.GzipHttpOutputInterceptor.GzipBufferCB.toString()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "GzipHandlerCommitTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.GzipHandlerCommitTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "c645d0f7c4abf31a8ca1e56f7982de33efef8e88 tags/jetty-9.4.29.v20200521~30^2~1", "commitUser": "joakime", "authoredDateTime": "2020-05-01 14:40:29", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 157, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/GzipHandlerCommitTest.java", "insertions": 157, "deletions": 0}, {"lines": 12, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/gzip/GzipHttpOutputInterceptor.java", "insertions": 10, "deletions": 2}], "commitDateTime": "2020-05-01 14:42:08", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #4838 from eclipse/jetty-9.4.x-4835-gziphandler-flush\n\nIssue #4835 - Addressing flush/commit with GzipHttpOutputInterceptor", "commitParents": ["0ab2b42055546b8063f83214d5eaf084efdf0aaf", "d58da0f7d2e30c732f52a38feaba2974e299bf70"], "commitHash": "e4fd49dc36eb08ff28b19f1efde92dc9cb08fdfd", "commitSpoonAstDiffStats": [{"spoonFilePath": "GzipHttpOutputInterceptor.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.gzip.GzipHttpOutputInterceptor.commit(java.nio.ByteBuffer,boolean,org.eclipse.jetty.util.Callback)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.handler.gzip.GzipHttpOutputInterceptor.GzipBufferCB.toString()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "GzipHandlerCommitTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.GzipHandlerCommitTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "e4fd49dc36eb08ff28b19f1efde92dc9cb08fdfd tags/jetty-9.4.29.v20200521~30", "commitUser": "joakime", "authoredDateTime": "2020-05-05 09:54:41", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 130, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/GzipHandlerCommitTest.java", "insertions": 130, "deletions": 0}, {"lines": 12, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/gzip/GzipHttpOutputInterceptor.java", "insertions": 10, "deletions": 2}], "commitDateTime": "2020-05-05 09:54:41", "spoonStatsSkippedReason": ""}], "title": "GzipHandler and GzipHttpOutputInterceptor do not flush response when body is empty", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 0, "INS": 1, "UPD": 1, "MOV": 1, "TOT": 3, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 12, "insertions": 10, "gitFilesChange": 1, "deletions": 2}, "closed": "2020-05-05 14:55:12", "statsSkippedReason": "", "body": "**Jetty version**\r\n9.4.15.v20190215\r\n**Java version**\r\nJava 11 \r\n**OS type/version**\r\nMost Os (Mac and Unix)\r\n**Description**\r\n\r\nRecently we switched to Jetty 9.4 from Jetty 9.0. Jetty 9.4 comes with GzipHandler so we used that. At the request processing time we flush out response to send back (link) headers to browser early by doing response.flushBuffer(), this is done on purpose. In jetty 9.0's GzipFilter response used to be flushed right away but in GzipHandler it isn't flushed (because we are flushing only headers and body is empty). This is causing an increase in wait time in the browser as headers are received a little late on the browser side. I was wondering how can we make this response flush immediately in GzipHanlder in Jetty9.4? apparently GZIP output interceptor doesn't flush response headers when the response.flushBuffer() is called and when the body is empty! \r\n\r\n\r\n", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server/handler/gzip"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.handler.gzip.GzipHttpOutputInterceptor.commit(java.nio.ByteBuffer,boolean,org.eclipse.jetty.util.Callback)", "org.eclipse.jetty.server.handler.gzip.GzipHttpOutputInterceptor.GzipBufferCB.toString()"], "ttf": 3.000277777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/4835"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 3, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "janbartel", "filteredCommits": ["d94a1bfdacc13cd95e6acf2416fc42673efadd99"], "commits": {"bfc84d823fb8367e1e9e1a542ac52f3bbb59cf6f": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "5bdbdaab3d2fff5cdc4f9782b000675156f9e816": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "d94a1bfdacc13cd95e6acf2416fc42673efadd99": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "8eb4bb98a4c204ac3e8db038759257eb5668e21a": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "b737ee46bbfffcc15edc10f61627ea701fcc91eb": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2020-04-01 15:25:55", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "bfc84d823fb8367e1e9e1a542ac52f3bbb59cf6f", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "5bdbdaab3d2fff5cdc4f9782b000675156f9e816", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fix test after merge for #4739\n", "commitParents": ["4265b1f4676dd875789eb477a7420c4c48f76ae2"], "commitHash": "d94a1bfdacc13cd95e6acf2416fc42673efadd99", "commitSpoonAstDiffStats": [{"spoonFilePath": "TestRunAsAnnotation.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.annotations.TestRunAsAnnotation.testRunAsAnnotation()", "DEL": 1, "INS": 3, "UPD": 2, "MOV": 0, "TOT": 6}]}], "nameRev": "d94a1bfdacc13cd95e6acf2416fc42673efadd99 tags/jetty-10.0.0.beta0~67^2~11", "commitUser": "janbartel", "authoredDateTime": "2020-04-06 12:30:34", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 37, "filePath": "jetty-annotations/src/test/java/org/eclipse/jetty/annotations/TestRunAsAnnotation.java", "insertions": 20, "deletions": 17}], "commitDateTime": "2020-04-06 12:30:34", "spoonStatsSkippedReason": ""}, {"commitMessage": "@RunAs not honoured (#4743)\n\n* Issue #4739 Fix @RunAs\r\n\r\nSigned-off-by: Jan Bartel <janb@webtide.com>", "commitParents": ["4b2842265ac80641f88447de9f23666925cf2b7b"], "commitHash": "8eb4bb98a4c204ac3e8db038759257eb5668e21a", "commitSpoonAstDiffStats": [{"spoonFilePath": "TestRunAsAnnotation.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.annotations.TestRunAsAnnotation", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ServletHolder.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.ServletHolder.initServlet()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletHolder.doStart()", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}]}, {"spoonFilePath": "RunAsAnnotationHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.annotations.RunAsAnnotationHandler.doHandle(java.lang.Class)", "DEL": 3, "INS": 0, "UPD": 3, "MOV": 0, "TOT": 6}]}, {"spoonFilePath": "PlusDescriptorProcessor.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.plus.webapp.PlusDescriptorProcessor.start(org.eclipse.jetty.webapp.WebAppContext,org.eclipse.jetty.webapp.Descriptor)", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "RunAs.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.plus.annotation.RunAs", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "PlusDecorator.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.plus.webapp.PlusDecorator.decorate(java.lang.Object)", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "RunAsCollection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.plus.annotation.RunAsCollection", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "8eb4bb98a4c204ac3e8db038759257eb5668e21a tags/jetty-9.4.28.v20200408~4", "commitUser": "janbartel", "authoredDateTime": "2020-04-06 11:33:09", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 9, "filePath": "jetty-plus/src/main/java/org/eclipse/jetty/plus/webapp/PlusDescriptorProcessor.java", "insertions": 0, "deletions": 9}, {"lines": 2, "filePath": "jetty-plus/src/main/java/org/eclipse/jetty/plus/annotation/RunAs.java", "insertions": 2, "deletions": 0}, {"lines": 10, "filePath": "jetty-annotations/src/main/java/org/eclipse/jetty/annotations/RunAsAnnotationHandler.java", "insertions": 1, "deletions": 9}, {"lines": 6, "filePath": "jetty-plus/src/main/java/org/eclipse/jetty/plus/webapp/PlusDecorator.java", "insertions": 0, "deletions": 6}, {"lines": 2, "filePath": "jetty-plus/src/main/java/org/eclipse/jetty/plus/annotation/RunAsCollection.java", "insertions": 2, "deletions": 0}, {"lines": 60, "filePath": "jetty-annotations/src/test/java/org/eclipse/jetty/annotations/TestRunAsAnnotation.java", "insertions": 60, "deletions": 0}, {"lines": 31, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletHolder.java", "insertions": 16, "deletions": 15}], "commitDateTime": "2020-04-06 11:33:09", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "b737ee46bbfffcc15edc10f61627ea701fcc91eb", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "@RunAs not honoured on servlets", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2020-04-06 09:37:21", "statsSkippedReason": "", "body": "**9.4 and beyond**\r\n\r\nFor handling @RunAs annotations on servlets, the RunAsCollection is used. The RunAsCollection.runAs(Object) implementation is expecting that the object passed in is a ServletHolder, but it is in fact the servlet instance. Thus, the @RunAs annotation is not being honoured on servlets.\r\n\r\nThere is also a second problem: even if the RunAsCollection handled setting the run-as on the ServletHolder correctly, the point in time at which it is called is too late: in ServletHolder.doStart() the conversion of the _runAsRole to a _runAsToken is done, but the _runAsRole is not set by the RunAsCollection until ServletHolder.initialize() is called, which is after doStart().\r\n\r\n\r\n", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 4.000277777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/4739"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 2, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "janbartel", "filteredCommits": ["f57a170e999e48f2b964a5e62cde703435e2a5a4"], "commits": {"f57a170e999e48f2b964a5e62cde703435e2a5a4": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "19ea09645b209653f600060fdbe661e8d300fe4b": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "4b2842265ac80641f88447de9f23666925cf2b7b": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "0a0f4f0e70a51124d37e1362b294235ea0b0456e": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2020-04-01 13:14:12", "commitsDetails": [{"commitMessage": "Fix merge from 9.4 for #4737\n", "commitParents": ["d94a1bfdacc13cd95e6acf2416fc42673efadd99"], "commitHash": "f57a170e999e48f2b964a5e62cde703435e2a5a4", "commitSpoonAstDiffStats": [{"spoonFilePath": "LifeCycleCallbackCollectionTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.plus.annotation.LifeCycleCallbackCollectionTest.testServletPostConstructPreDestroy()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "f57a170e999e48f2b964a5e62cde703435e2a5a4 tags/jetty-10.0.0.beta0~67^2~10", "commitUser": "janbartel", "authoredDateTime": "2020-04-06 14:30:38", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 3, "filePath": "jetty-plus/src/test/java/org/eclipse/jetty/plus/annotation/LifeCycleCallbackCollectionTest.java", "insertions": 0, "deletions": 3}], "commitDateTime": "2020-04-06 14:30:38", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "19ea09645b209653f600060fdbe661e8d300fe4b", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4737 Ensure lifecycle callbacks happen for run-as and non async servlets (#4744)\n\n* Issue #4737 Ensure lifecycle callbacks happen for run-as and non async servlets\r\n\r\nSigned-off-by: Jan Bartel <janb@webtide.com>", "commitParents": ["cf0e3c530f4ab878c8e0d83449fd9225ed8446f4"], "commitHash": "4b2842265ac80641f88447de9f23666925cf2b7b", "commitSpoonAstDiffStats": [{"spoonFilePath": "ServletHolder.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.ServletHolder.WrapperServlet.getWrappedServlet()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletHolder.destroyInstance(java.lang.Object)", "DEL": 0, "INS": 2, "UPD": 1, "MOV": 0, "TOT": 3}]}, {"spoonFilePath": "LifeCycleCallbackCollectionTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.plus.annotation.LifeCycleCallbackCollectionTest.testServletPostConstructPreDestroy()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.plus.annotation.LifeCycleCallbackCollectionTest.TestServlet", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "4b2842265ac80641f88447de9f23666925cf2b7b tags/jetty-9.4.28.v20200408~5", "commitUser": "janbartel", "authoredDateTime": "2020-04-06 11:30:33", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 100, "filePath": "jetty-plus/src/test/java/org/eclipse/jetty/plus/annotation/LifeCycleCallbackCollectionTest.java", "insertions": 100, "deletions": 0}, {"lines": 17, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletHolder.java", "insertions": 16, "deletions": 1}], "commitDateTime": "2020-04-06 11:30:33", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "0a0f4f0e70a51124d37e1362b294235ea0b0456e", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "PreDestroy not called for non-async and run-as servlets", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2020-04-06 09:37:41", "statsSkippedReason": "", "body": "** jetty 9.4.21 and above **\r\n\r\nProblem occurs since commit https://github.com/eclipse/jetty.project/commit/39c230f294a3cfd43cedd988f5261d20203bd015.\r\n\r\nServlets that do _not_ support async, or for which \\<run-as\\> _has_ been set, will not have methods annotated with @PreDestroy called.\r\n\r\n\r\n", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 4.000277777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/4737"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 2, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug", "Specification", "TCK"], "user": "janbartel", "filteredCommits": [], "commits": {"0a4879e52192b130f33517735767332c57048f00": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "73a21079f808a6fbe6398cc991676b152209fea9": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "01972b837bb71a9f9b358226c9bb57cc8c06f46d": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2020-03-24 15:14:31", "commitsDetails": [{"commitMessage": "Issue #4707 wrong value for ServletContext.setSessionTimeout (#4708)\n\n* Issue #4707 wrong value for ServletContext.setSessionTimeout\r\n\r\nSigned-off-by: Jan Bartel <janb@webtide.com>", "commitParents": ["528d6088605d49e56af2c7287b055b6c732a611e"], "commitHash": "0a4879e52192b130f33517735767332c57048f00", "commitSpoonAstDiffStats": [{"spoonFilePath": "TestListener.java", "spoonMethods": []}, {"spoonFilePath": "StandardDescriptorProcessorTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.StandardDescriptorProcessorTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "StandardDescriptorProcessor.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.StandardDescriptorProcessor.visitSessionConfig(org.eclipse.jetty.webapp.WebAppContext,org.eclipse.jetty.webapp.Descriptor,org.eclipse.jetty.xml.XmlParser$Node)", "DEL": 2, "INS": 1, "UPD": 2, "MOV": 1, "TOT": 6}]}, {"spoonFilePath": "ServletContextHandlerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.ServletContextHandlerTest.testGetSetSessionTimeout()", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletContextHandlerTest.MySCI.onStartup(java.util.Set,javax.servlet.ServletContext)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "0a4879e52192b130f33517735767332c57048f00 tags/jetty-10.0.0.beta0~7^2~11^2~16", "commitUser": "janbartel", "authoredDateTime": "2020-03-26 11:13:42", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 12, "filePath": "jetty-webapp/src/test/resources/web-session-config.xml", "insertions": 12, "deletions": 0}, {"lines": 46, "filePath": "jetty-webapp/src/test/java/org/eclipse/jetty/webapp/StandardDescriptorProcessorTest.java", "insertions": 46, "deletions": 0}, {"lines": 6, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/ServletContextHandlerTest.java", "insertions": 6, "deletions": 0}, {"lines": 2, "filePath": "tests/test-webapps/test-jetty-webapp/src/main/webapp/WEB-INF/web.xml", "insertions": 1, "deletions": 1}, {"lines": 7, "filePath": "jetty-webapp/src/main/java/org/eclipse/jetty/webapp/StandardDescriptorProcessor.java", "insertions": 3, "deletions": 4}, {"lines": 1, "filePath": "tests/test-webapps/test-jetty-webapp/src/main/java/com/acme/TestListener.java", "insertions": 1, "deletions": 0}], "commitDateTime": "2020-03-26 11:13:42", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "73a21079f808a6fbe6398cc991676b152209fea9", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "01972b837bb71a9f9b358226c9bb57cc8c06f46d", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "Value for ServletContext.setSessionTimeout is wrong in StandardDescriptorProcessor", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2020-03-26 10:13:43", "statsSkippedReason": "", "body": "**jetty-10.0.x**\r\n\r\no.e.j.webapp.StandardDescriptorProcessor.visitSessionConfig() method is incorrectly multiplying the value of the session-timeout from web.xml by 60 to convert to seconds before calling ServletContext.setSessionTimeout(), which is in fact expecting minutes.\r\n\r\n\r\n\r\n", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 1.0002777777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/4707"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "olamy", "filteredCommits": [], "commits": {"a1cbea462a0f4b00053911612419249a3c846500": {"commitUser": "olamy", "commitGHEventType": "referenced"}, "e913ed233ae12cbe370088078f33790142759f7b": {"commitUser": "olamy", "commitGHEventType": "referenced"}}, "created": "2020-03-10 02:49:51", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "a1cbea462a0f4b00053911612419249a3c846500", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "olamy", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4654 Hazelcast configurationLocation is not configurable via mod files (#4655)\n\nSigned-off-by: olivier lamy <oliver.lamy@gmail.com>", "commitParents": ["48cc21ca6da387f3d6572b123c01c53e2d1284de"], "commitHash": "e913ed233ae12cbe370088078f33790142759f7b", "commitSpoonAstDiffStats": [{"spoonFilePath": "HazelcastSessionDataStoreFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.hazelcast.session.HazelcastSessionDataStoreFactory.getSessionDataStore(org.eclipse.jetty.server.session.SessionHandler)", "DEL": 2, "INS": 2, "UPD": 0, "MOV": 2, "TOT": 6}]}], "nameRev": "e913ed233ae12cbe370088078f33790142759f7b tags/jetty-9.4.28.v20200408~17", "commitUser": "olamy", "authoredDateTime": "2020-03-24 11:51:01", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 5, "filePath": "jetty-hazelcast/src/main/java/org/eclipse/jetty/hazelcast/session/HazelcastSessionDataStoreFactory.java", "insertions": 3, "deletions": 2}, {"lines": 1, "filePath": "jetty-hazelcast/src/main/config/etc/sessions/hazelcast/remote.xml", "insertions": 1, "deletions": 0}, {"lines": 1, "filePath": "jetty-hazelcast/src/main/config/modules/session-store-hazelcast-remote.mod", "insertions": 1, "deletions": 0}, {"lines": 1, "filePath": "jetty-hazelcast/src/main/config/modules/session-store-hazelcast-embedded.mod", "insertions": 1, "deletions": 0}, {"lines": 1, "filePath": "jetty-hazelcast/src/main/config/etc/sessions/hazelcast/default.xml", "insertions": 1, "deletions": 0}], "commitDateTime": "2020-03-24 11:51:01", "spoonStatsSkippedReason": ""}], "title": "Hazelcast configurationLocation is not configurable via mod files", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2020-03-24 01:51:33", "statsSkippedReason": "", "body": "\r\n\r\n\r\n", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 13.000277777777777, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/4654"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 7, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "joakime", "filteredCommits": [], "commits": {"cfdffd17d9765071e91eaf9c7d81f14c71bb0494": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "69fa180e8890615809aea4e91db97edc06a85e96": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "da7e8ed1b7097afd96e8761bd1f02e2193c4bcd2": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "b839ce6366da347596dae4bccc1f49592d2d7195": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "89f2cad2c064655012481421910387f65c2f2430": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "965483e4d9b4eac40478b28871f6d1e26d333034": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "cc80ebed6c2d0cefadc8e307fded491841e63308": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "3ee3246674f4f163736d4f63b066e54dd1348a73": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2020-03-02 21:06:50", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "cfdffd17d9765071e91eaf9c7d81f14c71bb0494", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "69fa180e8890615809aea4e91db97edc06a85e96", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "da7e8ed1b7097afd96e8761bd1f02e2193c4bcd2", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "b839ce6366da347596dae4bccc1f49592d2d7195", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "3ee3246674f4f163736d4f63b066e54dd1348a73", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4631 - Warning about skipping of <Arg> nodes is in wrong place for <Configure> (#4632)\n\n* Issue #4631 - Fixing XML comment that was accidentally reformatted\r\n\r\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\r\n\r\n* Issue #4631 - Warning about skipping of <Arg> nodes is in wrong place for <Configure>\r\n\r\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\r\n\r\n* Issue #4631 - Improving testcase\r\n\r\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\r\n\r\n* Issue #4631 - Removing test classes\r\n\r\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\r\n\r\n* Issue #4631 - Cleaning up configure with index per PR review\r\n\r\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\r\n\r\n* Issue #4631 - More named arg test cases\r\n\r\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\r\n\r\n* Issue #4631 - Add testConfiguredWithNamedArgNotFirst\r\n\r\n+ new testcase where <Arg> is needed, but is not the first node\r\n\r\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\r\n\r\n* Cleanup configuration index usage\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n\r\nCo-authored-by: Greg Wilkins <gregw@webtide.com>", "commitParents": ["82247f257d0bab95b0760e0f4888c01c46511945"], "commitHash": "965483e4d9b4eac40478b28871f6d1e26d333034", "commitSpoonAstDiffStats": [{"spoonFilePath": "XmlConfigurationTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.xml.XmlConfigurationTest.asXmlConfiguration(java.lang.String)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.xml.XmlConfigurationTest.testDeprecatedMany()", "DEL": 0, "INS": 2, "UPD": 1, "MOV": 2, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.xml.XmlConfigurationTest.testConfiguredWithArgNotUsingName()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.xml.XmlConfigurationTest.testConfiguredSameWithNamedArgTwice()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.xml.XmlConfigurationTest.testConfiguredWithTooManyNamedArgs()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.xml.XmlConfigurationTest.asXmlConfiguration(java.lang.String,java.lang.String)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.xml.XmlConfigurationTest.testConfiguredWithBadNamedArg()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.xml.XmlConfigurationTest.testConfiguredWithNamedArg()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.xml.XmlConfigurationTest.BarNamed", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.xml.XmlConfigurationTest.mimicXmlConfigurationMain(org.eclipse.jetty.xml.XmlConfiguration[])", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "XmlConfiguration.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.xml.XmlConfiguration.JettyXmlConfiguration.configure(java.lang.Object,org.eclipse.jetty.xml.XmlParser$Node,int)", "DEL": 1, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.xml.XmlConfiguration.JettyXmlConfiguration.configure()", "DEL": 1, "INS": 4, "UPD": 3, "MOV": 2, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.xml.XmlConfiguration.JettyXmlConfiguration.configure(java.lang.Object)", "DEL": 1, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.xml.XmlConfiguration.configure()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.xml.XmlConfiguration.main(java.lang.String[])", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}]}], "nameRev": "965483e4d9b4eac40478b28871f6d1e26d333034 tags/jetty-10.0.0.alpha2~2^2~14", "commitUser": "gregw", "authoredDateTime": "2020-03-10 09:11:22", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 190, "filePath": "jetty-xml/src/test/java/org/eclipse/jetty/xml/XmlConfigurationTest.java", "insertions": 189, "deletions": 1}, {"lines": 45, "filePath": "jetty-xml/src/main/java/org/eclipse/jetty/xml/XmlConfiguration.java", "insertions": 25, "deletions": 20}, {"lines": 23, "filePath": "jetty-server/src/main/config/etc/jetty.xml", "insertions": 21, "deletions": 2}], "commitDateTime": "2020-03-10 15:11:22", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "cc80ebed6c2d0cefadc8e307fded491841e63308", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "89f2cad2c064655012481421910387f65c2f2430", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "Startup XmlConfiguration WARN on Arg threadpool", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2020-03-31 09:15:34", "statsSkippedReason": "", "body": "_Originally posted by @TezzerFX in https://github.com/eclipse/jetty.project/issues/4620#issuecomment-593572876_\r\n\r\nThere's a WARN message on startup about the threadpool ...\r\n\r\n```\r\n$ java -jar ../start.jar\r\n2020-03-02 15:05:36.442:INFO::main: Logging initialized @381ms to org.eclipse.jetty.util.log.StdErrLog\r\n2020-03-02 15:05:36.558:WARN:oejx.XmlConfiguration:main: Ignored arg: <Arg name=\"threadpool\"><Ref refid=\"threadPool\"/></Arg>\r\n2020-03-02 15:05:36.696:WARN::main: demo test-realm is deployed. DO NOT USE IN PRODUCTION!\r\n2020-03-02 15:05:36.698:INFO:oejs.Server:main: jetty-9.4.28-SNAPSHOT; built: 2020-03-02T18:07:43.942Z; git: f2a4c6b6150938c03022f29f3fa25bed5b7451f3; jvm 11.0.6+10\r\n```", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 28.00027777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/4631"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "jbonofre", "filteredCommits": ["929e38373cfc191102a77bfffb7f656601604723"], "commits": {"fb909057a46d33e71601a720a419b23b44d3881e": {"commitUser": "lachlan-roberts", "commitGHEventType": "referenced"}, "929e38373cfc191102a77bfffb7f656601604723": {"commitUser": "lachlan-roberts", "commitGHEventType": "referenced"}, "5bc3b18e4708c034e3a39d8ea61bfe2f411da64c": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2020-03-01 09:23:10", "commitsDetails": [{"commitMessage": "Merge pull request #4710 from eclipse/jetty-9.4.x-4621-SecurityHandler-ServiceLoader\n\nIssue #4621 - warn instead of throwing for errors while discovering Authenticator.Factory implementations with ServiceLoader", "commitParents": ["6ab4cd306dede74247915364498e80aa666bd477", "929e38373cfc191102a77bfffb7f656601604723"], "commitHash": "fb909057a46d33e71601a720a419b23b44d3881e", "commitSpoonAstDiffStats": [{"spoonFilePath": "SecurityHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.security.SecurityHandler", "DEL": 1, "INS": 2, "UPD": 2, "MOV": 4, "TOT": 9}]}], "nameRev": "fb909057a46d33e71601a720a419b23b44d3881e tags/jetty-9.4.28.v20200408~14", "commitUser": "lachlan-roberts", "authoredDateTime": "2020-03-27 09:39:32", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 16, "filePath": "jetty-security/src/main/java/org/eclipse/jetty/security/SecurityHandler.java", "insertions": 14, "deletions": 2}], "commitDateTime": "2020-03-27 09:39:32", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4621 only warn on ServiceLoader failure of Authenticator.Factory\n\nSigned-off-by: Lachlan Roberts <lachlan@webtide.com>\n", "commitParents": ["e913ed233ae12cbe370088078f33790142759f7b"], "commitHash": "929e38373cfc191102a77bfffb7f656601604723", "commitSpoonAstDiffStats": [{"spoonFilePath": "SecurityHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.security.SecurityHandler", "DEL": 1, "INS": 2, "UPD": 2, "MOV": 4, "TOT": 9}]}], "nameRev": "929e38373cfc191102a77bfffb7f656601604723 tags/jetty-9.4.28.v20200408~14^2", "commitUser": "lachlan-roberts", "authoredDateTime": "2020-03-25 19:06:11", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 16, "filePath": "jetty-security/src/main/java/org/eclipse/jetty/security/SecurityHandler.java", "insertions": 14, "deletions": 2}], "commitDateTime": "2020-03-25 19:06:11", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "5bc3b18e4708c034e3a39d8ea61bfe2f411da64c", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "jetty-jaspi in jetty-all uber aggregate artifact requires javax.security.auth.message.AuthException which cannot be included", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 1.0, "INS": 2.0, "UPD": 2.0, "MOV": 4.0, "TOT": 9.0, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 16.0, "insertions": 14.0, "gitFilesChange": 1, "deletions": 2.0}, "closed": "2020-03-26 22:39:59", "statsSkippedReason": "", "body": "**Jetty version**\r\n\r\nAny version equal or greater than Jetty 9.4.23.\r\n\r\n**Java version**\r\n\r\nAny\r\n\r\n**OS type/version**\r\n\r\nAny\r\n\r\n**Description**\r\n\r\nSeveral projects (for instance Apache ActiveMQ) use jetty-all uber artifact (`org.eclipse.jetty.aggregate:jetty-all:uber`) doesn't include `org.eclipse.jetty.orbit:javax.security.auth.message`.\r\nThis missing artifact cause issue when using the `ConstraintSecurityHandler`:\r\n\r\n```\r\nCaused by: java.util.ServiceConfigurationError: org.eclipse.jetty.security.Authenticator$Factory: Provider org.eclipse.jetty.security.jaspi.JaspiAuthenticatorFactory could not be instantiated\r\n  at java.util.ServiceLoader.fail(ServiceLoader.java:232)\r\n  at java.util.ServiceLoader.access$100(ServiceLoader.java:185)\r\n  at java.util.ServiceLoader$LazyIterator.nextService(ServiceLoader.java:384)\r\n  at java.util.ServiceLoader$LazyIterator.next(ServiceLoader.java:404)\r\n  at java.util.ServiceLoader$1.next(ServiceLoader.java:480)\r\n  at org.eclipse.jetty.security.SecurityHandler.<clinit>(SecurityHandler.java:79)\r\n  at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n  at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n  at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n  at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n  at org.eclipse.jetty.servlet.ServletContextHandler.newSecurityHandler(ServletContextHandler.java:318)\r\n  at org.eclipse.jetty.servlet.ServletContextHandler.getSecurityHandler(ServletContextHandler.java:377)\r\n  at org.eclipse.jetty.servlet.ServletContextHandler.relinkHandlers(ServletContextHandler.java:227)\r\n  at org.eclipse.jetty.servlet.ServletContextHandler.<init>(ServletContextHandler.java:160)\r\n  at org.eclipse.jetty.servlet.ServletContextHandler.<init>(ServletContextHandler.java:129)\r\n  at org.apache.activemq.transport.ws.WSTransportServer.doStart(WSTransportServer.java:69)\r\n  at org.apache.activemq.util.ServiceSupport.start(ServiceSupport.java:55)\r\n  at org.apache.activemq.broker.TransportConnector.start(TransportConnector.java:250)\r\n  at org.apache.activemq.broker.BrokerService.startTransportConnector(BrokerService.java:2761)\r\n  at org.apache.activemq.broker.BrokerService.startAllConnectors(BrokerService.java:2654)\r\n  at org.apache.activemq.broker.BrokerService.doStartBroker(BrokerService.java:777)\r\n  at org.apache.activemq.broker.BrokerService.startBroker(BrokerService.java:739)\r\n  at org.apache.activemq.broker.BrokerService.start(BrokerService.java:642)\r\n  at org.apache.activemq.xbean.XBeanBrokerService.afterPropertiesSet(XBeanBrokerService.java:73)\r\n  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n  at java.lang.reflect.Method.invoke(Method.java:498)\r\n  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1748)\r\n  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1685)\r\n  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1615)\r\n  ... 27 more\r\nCaused by: java.lang.NoClassDefFoundError: javax/security/auth/message/AuthException\r\n  at java.lang.Class.getDeclaredConstructors0(Native Method)\r\n  at java.lang.Class.privateGetDeclaredConstructors(Class.java:2671)\r\n  at java.lang.Class.getConstructor0(Class.java:3075)\r\n  at java.lang.Class.newInstance(Class.java:412)\r\n  at java.util.ServiceLoader$LazyIterator.nextService(ServiceLoader.java:380)\r\n  ... 55 more\r\nCaused by: java.lang.ClassNotFoundException: javax.security.auth.message.AuthException\r\n  at java.net.URLClassLoader.findClass(URLClassLoader.java:382)\r\n  at java.lang.ClassLoader.loadClass(ClassLoader.java:418)\r\n  at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\r\n  ... 60 more\r\n```\r\n\r\nI see this exclude: https://github.com/eclipse/jetty.project/blob/f4fc78ac66a5811a68e264055114d879d74ae477/aggregates/jetty-all/pom.xml#L85\r\n\r\nBut it doesn't make sense to me, `jetty-all` should include `javax.security.auth.message.AuthException`. I'm creating a PR.\r\n\r\n\r\n", "changesInPackagesGIT": ["jetty-security/src/main/java/org/eclipse/jetty/security"], "changesInPackagesSPOON": ["org.eclipse.jetty.security.SecurityHandler"], "ttf": 25.00027777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/4621"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["d082e54301a7024908c91a838e233ebe66d75189"], "commits": {"18f8752ad063f2d7f0adb35c9b7add4c3c768429": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "d082e54301a7024908c91a838e233ebe66d75189": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2020-02-26 12:58:15", "commitsDetails": [{"commitMessage": "Merge pull request #4607 from eclipse/jetty-9.4.x-4606-DateCache-formatNow\n\nIssue #4606 - fixing formatTick use of `now`", "commitParents": ["353dc9bf08864c8cfd4fbf9623b0ddc88de3aaef", "d082e54301a7024908c91a838e233ebe66d75189"], "commitHash": "18f8752ad063f2d7f0adb35c9b7add4c3c768429", "commitSpoonAstDiffStats": [{"spoonFilePath": "DateCache.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.DateCache.formatTick(long)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "18f8752ad063f2d7f0adb35c9b7add4c3c768429 tags/jetty-9.4.27.v20200227~5", "commitUser": "joakime", "authoredDateTime": "2020-02-26 07:23:34", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/DateCache.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2020-02-26 07:23:34", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4606 - fixing formatTick use of `now`\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["353dc9bf08864c8cfd4fbf9623b0ddc88de3aaef"], "commitHash": "d082e54301a7024908c91a838e233ebe66d75189", "commitSpoonAstDiffStats": [{"spoonFilePath": "DateCache.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.DateCache.formatTick(long)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "d082e54301a7024908c91a838e233ebe66d75189 tags/jetty-9.4.27.v20200227~5^2", "commitUser": "joakime", "authoredDateTime": "2020-02-26 07:01:53", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/DateCache.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2020-02-26 07:01:53", "spoonStatsSkippedReason": ""}], "title": "DateCache.formatNow(long now) does not honor the passed in long", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 2, "insertions": 1, "gitFilesChange": 1, "deletions": 1}, "closed": "2020-02-27 17:02:20", "statsSkippedReason": "", "body": "**Jetty version**\r\nAll versions\r\n\r\n**Java version**\r\nAll versions\r\n\r\n**OS type/version**\r\nAll versions\r\n\r\n**Description**\r\n\r\nIf using `DateCache.formatNow(long now)` ...\r\n\r\nhttps://github.com/eclipse/jetty.project/blob/7ce14a419fd1c7cec42d808ac3e6fd862ce517b4/jetty-util/src/main/java/org/eclipse/jetty/util/DateCache.java#L212-L222\r\n\r\nAnd the passed in `long now` is a cache miss, the `Tick formatTick(long now)` is used to generate a new `Tick` for caching reasons.\r\n\r\nBut it doesn't honor the passed in `long now` when regenerating the `Tick`.\r\n\r\nhttps://github.com/eclipse/jetty.project/blob/7ce14a419fd1c7cec42d808ac3e6fd862ce517b4/jetty-util/src/main/java/org/eclipse/jetty/util/DateCache.java#L234-L247\r\n\r\nLine 242 just blindly goes `Instant.now()`, when it probably should use `Instant.ofEpochMilli(now)`\r\n\r\n\r\n\r\n", "changesInPackagesGIT": ["jetty-util/src/main/java/org/eclipse/jetty/util"], "changesInPackagesSPOON": ["org.eclipse.jetty.util.DateCache.formatTick(long)"], "ttf": 1.0002777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/4606"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "gonphsn", "filteredCommits": [], "commits": {"03359ec0893f63b8589c95eebb28a8e719889785": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "f0b48ec4abde26533f6a571252203cc50db564b0": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2020-02-20 13:11:12", "commitsDetails": [{"commitMessage": "Tests #4594 ContextListener removed (#4595)\n\nRemove ContextListeners from the destroy list when removed.\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>", "commitParents": ["9325a5bc16524598c9bcf32d5bb08ea6ca64d534"], "commitHash": "03359ec0893f63b8589c95eebb28a8e719889785", "commitSpoonAstDiffStats": [{"spoonFilePath": "ContextHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.stopContext()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.startContext()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.removeEventListener(java.util.EventListener)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "03359ec0893f63b8589c95eebb28a8e719889785 tags/jetty-9.4.27.v20200227~8", "commitUser": "gregw", "authoredDateTime": "2020-02-22 10:43:36", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 13, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/ContextHandler.java", "insertions": 8, "deletions": 5}], "commitDateTime": "2020-02-22 10:43:36", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "f0b48ec4abde26533f6a571252203cc50db564b0", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "ServletContextListeners added to _destroyServletContextListeners in ContextHandler::startContext() are not removed by ContextHandler::removeEventListener()", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2020-02-22 15:14:42", "statsSkippedReason": "", "body": "Jetty Version is:\r\n9.4.26\r\n\r\nJava Version is:\r\njava version \"1.8.0_241\"\r\nJava(TM) SE Runtime Environment (build 1.8.0_241-b07)\r\nJava HotSpot(TM) 64-Bit Server VM (build 25.241-b07, mixed mode)\r\n\r\nWindows, Linux, Qnx\r\n\r\nSee Jetty ContextHandler.java Looks like a bug in jetty, see where on startup the content of the _servletContextListeners is copied to _destroyContextListeners:\r\n\r\nhttps://github.com/eclipse/jetty.project/blob/7b38981d25d14afb4a12ff1f2596756144edf695/jetty-server/src/main/java/org/eclipse/jetty/server/handler/ContextHandler.java#L874-L893\r\n\r\nAfterwards, when removeEventListener is invoked:\r\n\r\nhttps://github.com/eclipse/jetty.project/blob/7b38981d25d14afb4a12ff1f2596756144edf695/jetty-server/src/main/java/org/eclipse/jetty/server/handler/ContextHandler.java#L691-L709\r\n\r\nWe see that while the \"_servletContextListeners\" is cleared, the copy already made to the \"_destroySerletContextListeners\" is not removed. This means that the listener is still invoked on shutdown after the client has specified that it should not be.\r\n\r\nThe _destroyServletContextListeners is private final:\r\n\r\nhttps://github.com/eclipse/jetty.project/blob/7b38981d25d14afb4a12ff1f2596756144edf695/jetty-server/src/main/java/org/eclipse/jetty/server/handler/ContextHandler.java#L209\r\n\r\nSo we can't remove this listener on shutdown without Jetty intervention.\r\n\r\n\r\n\r\n", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 2.000277777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/4594"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 3, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug", "High Priority", "Sponsored"], "user": "gregw", "filteredCommits": [], "commits": {"72b6d4705ba824b2eb0cbade7c789575f9a3fcdb": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "befc9fd66dd14268843d190f86d959249bf8b61b": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "f88eb73a91acd4ed472e5f95e543b0feebee0ff1": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "2428f7c7059dceb132456c00676c78cec269643f": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2020-01-30 17:05:08", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "72b6d4705ba824b2eb0cbade7c789575f9a3fcdb", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "befc9fd66dd14268843d190f86d959249bf8b61b", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4533 Hard close from Dispatcher (#4534)\n\n* Issue #4533 Hard close from Dispatcher\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n\r\n#4533 Do hard close from Dispatcher so response wrappers may intercept close.\r\n\r\n* Issue #4533 Hard close from Dispatcher\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n\r\n#4533 improve test after review\r\n\r\n* Issue #4533 Hard close from Dispatcher\r\n\r\nSome renaming of methods to make it clear that softClose should only be used as part of sendError handling.  If softClose is used by other components, then sendError can be prevented from setting the error status.\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n", "commitParents": ["1ee26ba736c10de72e69ed875478a068668fd3d2"], "commitHash": "f88eb73a91acd4ed472e5f95e543b0feebee0ff1", "commitSpoonAstDiffStats": [{"spoonFilePath": "Response.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Response.softClose()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "DispatcherTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherTest.testForward()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherTest.WrappingFilter", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherTest.testForwardThenInclude()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherTest.ResponseWrapper", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherTest.AssertIncludeForwardServlet.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherTest.testForwardNonUTF8()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherTest.AssertNonUTF8ForwardServlet.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherTest.AssertForwardIncludeServlet.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherTest.testIncludeThenForward()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherTest.AssertForwardServlet.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherTest.AssertIncludeServlet.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherTest.testWrappedForwardCloseIntercepted()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherTest.testInclude()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "HttpChannelState.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.sendError(int,java.lang.String)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "Dispatcher.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Dispatcher.forward(javax.servlet.ServletRequest,javax.servlet.ServletResponse,javax.servlet.DispatcherType)", "DEL": 1, "INS": 2, "UPD": 2, "MOV": 2, "TOT": 7}]}], "nameRev": "f88eb73a91acd4ed472e5f95e543b0feebee0ff1 tags/jetty-9.4.27.v20200227~25", "commitUser": "gregw", "authoredDateTime": "2020-01-31 11:55:14", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 14, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Dispatcher.java", "insertions": 12, "deletions": 2}, {"lines": 2, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannelState.java", "insertions": 1, "deletions": 1}, {"lines": 4, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Response.java", "insertions": 3, "deletions": 1}, {"lines": 113, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/DispatcherTest.java", "insertions": 106, "deletions": 7}], "commitDateTime": "2020-01-31 11:55:14", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "2428f7c7059dceb132456c00676c78cec269643f", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "Reinstate hard close in dispatcher", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2020-01-31 12:59:14", "statsSkippedReason": "", "body": "**Jetty version**\r\n9.4.26\r\n\r\n**Description**\r\n\r\nThe recent introduction of a `softClose` during `RequestDispatcher.forward` has introduced a problem for filters that wrap the output stream and intercept the close method.  I'm not sure if it is exactly legal to do so, but it appears common enough that we should revert to the previous behaviour.\r\n\r\n\r\n", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 0.0002777777777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/4533"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 3, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "Amarendraar23", "filteredCommits": ["65c0a76feb30928a9a5368131e05cd3df3cefde9"], "commits": {"692d9011290d6ea30a3b225c5c8de8d90b67dc6a": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "65c0a76feb30928a9a5368131e05cd3df3cefde9": {"commitUser": "sbordet", "commitGHEventType": "closed"}, "5794584aeab5feb0e05df71ca465ffe3d8148e4b": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "71716d71c41f14f1248a892b4144dd03814e8aa1": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "d5e962e7d02fe6f724d18b1bf00420a1530d087f": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2019-12-24 12:47:32", "commitsDetails": [{"commitMessage": "Merge pull request #4446 from eclipse/jetty-9.4.x-4444-tls_idle_timeout\n\nFixes #4444 -  Connection timeout intermittently when using jetty 9.4\u2026", "commitParents": ["19e91a6a4047f5a1a3f371f539c170052601eb32", "fd52ff697ef072cf4fb1387a5b739ab3a1ad313f"], "commitHash": "692d9011290d6ea30a3b225c5c8de8d90b67dc6a", "commitSpoonAstDiffStats": [{"spoonFilePath": "SslConnectionTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.SslConnectionTest.testBlockedClose()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "SslConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.IncompleteWriteCallback.failed(java.lang.Throwable)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.needsFillInterest()", "DEL": 1, "INS": 3, "UPD": 0, "MOV": 4, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.IncompleteWriteCallback.succeeded()", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 1, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.doShutdownOutput()", "DEL": 2, "INS": 4, "UPD": 0, "MOV": 3, "TOT": 9}]}], "nameRev": "692d9011290d6ea30a3b225c5c8de8d90b67dc6a tags/jetty-9.4.26.v20200117~1", "commitUser": "sbordet", "authoredDateTime": "2020-01-17 10:10:34", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 39, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ssl/SslConnection.java", "insertions": 33, "deletions": 6}, {"lines": 5, "filePath": "jetty-io/src/test/java/org/eclipse/jetty/io/SslConnectionTest.java", "insertions": 1, "deletions": 4}], "commitDateTime": "2020-01-17 10:10:34", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #4444 -  Connection timeout intermittently when using jetty 9.4.25.\n\nFixed handling of encrypted bytes to write in\nneedsFillInterest() when the TLS handshake status\nis NOT_HANDSHAKING.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["2551ee758d4e8a74e93d07de596a876efad9d4dc"], "commitHash": "65c0a76feb30928a9a5368131e05cd3df3cefde9", "commitSpoonAstDiffStats": [{"spoonFilePath": "SslConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.needsFillInterest()", "DEL": 1, "INS": 3, "UPD": 0, "MOV": 4, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.IncompleteWriteCallback.succeeded()", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 1, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.IncompleteWriteCallback.failed(java.lang.Throwable)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}], "nameRev": "65c0a76feb30928a9a5368131e05cd3df3cefde9 tags/jetty-10.0.0.alpha2~102", "commitUser": "sbordet", "authoredDateTime": "2019-12-26 18:57:00", "commitGHEventType": "closed", "commitGitStats": [{"lines": 16, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ssl/SslConnection.java", "insertions": 13, "deletions": 3}], "commitDateTime": "2020-01-17 10:14:02", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #4444 -  Connection timeout intermittently when using jetty 9.4.25.\n\nFixed handling of encrypted bytes to write in\nneedsFillInterest() when the TLS handshake status\nis NOT_HANDSHAKING.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["ccf04a47cdcd24f67345190ea00e444265009117"], "commitHash": "5794584aeab5feb0e05df71ca465ffe3d8148e4b", "commitSpoonAstDiffStats": [{"spoonFilePath": "SslConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.needsFillInterest()", "DEL": 1, "INS": 3, "UPD": 0, "MOV": 4, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.IncompleteWriteCallback.succeeded()", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 1, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.IncompleteWriteCallback.failed(java.lang.Throwable)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}], "nameRev": "5794584aeab5feb0e05df71ca465ffe3d8148e4b tags/jetty-9.4.26.v20200117~1^2~2", "commitUser": "sbordet", "authoredDateTime": "2019-12-26 18:57:00", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 16, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ssl/SslConnection.java", "insertions": 13, "deletions": 3}], "commitDateTime": "2019-12-26 18:57:00", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #4444 -  Connection timeout intermittently when using jetty 9.4.25.\n\nFixed write in doShutdownOutput() by updating the state before the write,\nso that needsFillInterest() can check whether to also do a write or not.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["65c0a76feb30928a9a5368131e05cd3df3cefde9"], "commitHash": "71716d71c41f14f1248a892b4144dd03814e8aa1", "commitSpoonAstDiffStats": [{"spoonFilePath": "SslConnectionTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.SslConnectionTest.testBlockedClose()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "SslConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.doShutdownOutput()", "DEL": 2, "INS": 4, "UPD": 0, "MOV": 3, "TOT": 9}]}], "nameRev": "71716d71c41f14f1248a892b4144dd03814e8aa1 tags/jetty-10.0.0.alpha2~101", "commitUser": "sbordet", "authoredDateTime": "2019-12-30 17:18:49", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 23, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ssl/SslConnection.java", "insertions": 20, "deletions": 3}, {"lines": 5, "filePath": "jetty-io/src/test/java/org/eclipse/jetty/io/SslConnectionTest.java", "insertions": 1, "deletions": 4}], "commitDateTime": "2020-01-17 10:14:02", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #4444 -  Connection timeout intermittently when using jetty 9.4.25.\n\nFixed write in doShutdownOutput() by updating the state before the write,\nso that needsFillInterest() can check whether to also do a write or not.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["5794584aeab5feb0e05df71ca465ffe3d8148e4b"], "commitHash": "d5e962e7d02fe6f724d18b1bf00420a1530d087f", "commitSpoonAstDiffStats": [{"spoonFilePath": "SslConnectionTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.SslConnectionTest.testBlockedClose()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "SslConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.doShutdownOutput()", "DEL": 2, "INS": 4, "UPD": 0, "MOV": 3, "TOT": 9}]}], "nameRev": "d5e962e7d02fe6f724d18b1bf00420a1530d087f tags/jetty-9.4.26.v20200117~1^2~1", "commitUser": "sbordet", "authoredDateTime": "2019-12-30 17:18:49", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 23, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ssl/SslConnection.java", "insertions": 20, "deletions": 3}, {"lines": 5, "filePath": "jetty-io/src/test/java/org/eclipse/jetty/io/SslConnectionTest.java", "insertions": 1, "deletions": 4}], "commitDateTime": "2019-12-30 17:18:49", "spoonStatsSkippedReason": ""}], "title": "TLS Connection Timeout Intermittently", "spoonStatsSummary": {"spoonMethodsChanged": 3, "DEL": 1, "INS": 7, "UPD": 0, "MOV": 6, "TOT": 14, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 16, "insertions": 13, "gitFilesChange": 1, "deletions": 3}, "closed": "2020-01-17 09:14:31", "statsSkippedReason": "", "body": "Jetty \r\n\r\nIBM JDK 1.8.5.40\r\n\r\nRed Hat Enterprise Linux Server release 7.7\r\n\r\nI upgraded from 9.4.11 to 9.4.25 in product. I am noticing connection getting stuck & timing out without loading the webpage. I deployed a helloworld war on the jetty server. The curl command seems stuck during/after TLS handshake. Once the timeout is hit the connection is closed down.\r\n\r\n![image](https://user-images.githubusercontent.com/5837718/71413534-9f5fad00-2678-11ea-8e88-ed9eeaaee197.png)\r\n\r\nAttaching the Jetty & SSL logs\r\n\r\n[Connection-TimeOutSSl.zip](https://github.com/eclipse/jetty.project/files/3998282/Connection-TimeOutSSl.zip)\r\n\r\nI have tried to use 9.4.12,9.4.20 and 9.4.24 versions, but without success.\r\n\r\nThis seems to happen intermittently but with larger number of request failing.\r\n\r\n\r\n", "changesInPackagesGIT": ["jetty-io/src/main/java/org/eclipse/jetty/io/ssl"], "changesInPackagesSPOON": ["org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.needsFillInterest()", "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.IncompleteWriteCallback.succeeded()", "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.IncompleteWriteCallback.failed(java.lang.Throwable)"], "ttf": 23.00027777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/4444"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug", "Sponsored"], "user": "sbordet", "filteredCommits": ["91239b01e3fdac2f183fa6c77c766d7134a4be54"], "commits": {"af7cb94528104621cacc22e0400b777fa8da52c2": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "91239b01e3fdac2f183fa6c77c766d7134a4be54": {"commitUser": "sbordet", "commitGHEventType": "closed"}}, "created": "2019-12-17 19:13:15", "commitsDetails": [{"commitMessage": "Merge pull request #4428 from eclipse/jetty-9.4.x-4427-httpclient_retried_request_duplicates_cookies\n\nFixes #4427 - Retried request duplicates cookies.", "commitParents": ["d1d8f9a779ed784b6deb3838b275f73c76158be6", "91239b01e3fdac2f183fa6c77c766d7134a4be54"], "commitHash": "af7cb94528104621cacc22e0400b777fa8da52c2", "commitSpoonAstDiffStats": [{"spoonFilePath": "SendFailure.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.SendFailure.toString()", "DEL": 0, "INS": 2, "UPD": 2, "MOV": 1, "TOT": 5}]}, {"spoonFilePath": "HttpDestination.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpDestination.process(org.eclipse.jetty.client.api.Connection)", "DEL": 4, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 6}]}, {"spoonFilePath": "HttpConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpConnection.normalizeRequest(org.eclipse.jetty.client.api.Request)", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}]}, {"spoonFilePath": "HttpConnectionOverHTTP.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.http.HttpConnectionOverHTTP.onIdleExpired()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.client.http.HttpConnectionOverHTTP.onIdleTimeout(long)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpClientIdleTimeoutTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpClientIdleTimeoutTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpRequest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpRequest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.HttpRequest.normalized()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "af7cb94528104621cacc22e0400b777fa8da52c2 tags/jetty-9.4.25.v20191220~3", "commitUser": "sbordet", "authoredDateTime": "2019-12-19 22:00:15", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 7, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/http/HttpConnectionOverHTTP.java", "insertions": 6, "deletions": 1}, {"lines": 18, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpRequest.java", "insertions": 18, "deletions": 0}, {"lines": 14, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpDestination.java", "insertions": 9, "deletions": 5}, {"lines": 6, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpConnection.java", "insertions": 6, "deletions": 0}, {"lines": 6, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/SendFailure.java", "insertions": 5, "deletions": 1}, {"lines": 174, "filePath": "jetty-client/src/test/java/org/eclipse/jetty/client/HttpClientIdleTimeoutTest.java", "insertions": 174, "deletions": 0}], "commitDateTime": "2019-12-19 22:00:15", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #4427 - Retried request duplicates cookies.\n\nIntroduced HttpRequest.normalized() to test and set whether\nthe request has already been normalized.\nAdded test case and few cleanups.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["129a51c7a2d4da1de4b4a4787072f62130fa76b9"], "commitHash": "91239b01e3fdac2f183fa6c77c766d7134a4be54", "commitSpoonAstDiffStats": [{"spoonFilePath": "SendFailure.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.SendFailure.toString()", "DEL": 0, "INS": 2, "UPD": 2, "MOV": 1, "TOT": 5}]}, {"spoonFilePath": "HttpDestination.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpDestination.process(org.eclipse.jetty.client.api.Connection)", "DEL": 4, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 6}]}, {"spoonFilePath": "HttpConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpConnection.normalizeRequest(org.eclipse.jetty.client.api.Request)", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}]}, {"spoonFilePath": "HttpConnectionOverHTTP.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.http.HttpConnectionOverHTTP.onIdleExpired()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.client.http.HttpConnectionOverHTTP.onIdleTimeout(long)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpClientIdleTimeoutTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpClientIdleTimeoutTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpRequest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpRequest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.HttpRequest.normalized()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "91239b01e3fdac2f183fa6c77c766d7134a4be54 tags/jetty-9.4.25.v20191220~3^2", "commitUser": "sbordet", "authoredDateTime": "2019-12-17 20:16:46", "commitGHEventType": "closed", "commitGitStats": [{"lines": 7, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/http/HttpConnectionOverHTTP.java", "insertions": 6, "deletions": 1}, {"lines": 18, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpRequest.java", "insertions": 18, "deletions": 0}, {"lines": 14, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpDestination.java", "insertions": 9, "deletions": 5}, {"lines": 6, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpConnection.java", "insertions": 6, "deletions": 0}, {"lines": 6, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/SendFailure.java", "insertions": 5, "deletions": 1}, {"lines": 174, "filePath": "jetty-client/src/test/java/org/eclipse/jetty/client/HttpClientIdleTimeoutTest.java", "insertions": 174, "deletions": 0}], "commitDateTime": "2019-12-17 20:16:46", "spoonStatsSkippedReason": ""}], "title": "Retried HttpClient Requests can result in duplicates cookies", "spoonStatsSummary": {"spoonMethodsChanged": 7, "DEL": 4, "INS": 10, "UPD": 2, "MOV": 3, "TOT": 19, "spoonFilesChanged": 5}, "gitStatsSummary": {"lines": 51, "insertions": 44, "gitFilesChange": 5, "deletions": 7}, "closed": "2019-12-19 21:00:17", "statsSkippedReason": "", "body": "**Jetty version**\r\n9.4.x\r\n\r\n**Description**\r\n`HttpClient` retries request only in one case: when the idle timeout is just expired on a connection while the request is about to be sent.\r\nThe implementation detects that the connection will be closed, and retries the request on another connection.\r\n\r\nHowever, the retry runs `HttpConnection.normalizeRequest()` again, causing the cookies (and possibly other headers) to be duplicated.\r\n\r\n\r\n", "changesInPackagesGIT": ["jetty-client/src/main/java/org/eclipse/jetty/client/http", "jetty-client/src/main/java/org/eclipse/jetty/client"], "changesInPackagesSPOON": ["org.eclipse.jetty.client.HttpRequest", "org.eclipse.jetty.client.HttpRequest.normalized()", "org.eclipse.jetty.client.http.HttpConnectionOverHTTP.onIdleExpired()", "org.eclipse.jetty.client.SendFailure.toString()", "org.eclipse.jetty.client.HttpDestination.process(org.eclipse.jetty.client.api.Connection)", "org.eclipse.jetty.client.http.HttpConnectionOverHTTP.onIdleTimeout(long)", "org.eclipse.jetty.client.HttpConnection.normalizeRequest(org.eclipse.jetty.client.api.Request)"], "ttf": 2.000277777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/4427"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 2, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "Auo", "filteredCommits": ["1e810d370f0e2a2c7751d1cf7bcf4081d8a45ce7"], "commits": {"1e810d370f0e2a2c7751d1cf7bcf4081d8a45ce7": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "cf7f6a52f56d550cfd833b633e1365b719457c6b": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "2b58379f88899867484bdb94d82e7ace47edf8dc": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "36d06d016d966169122ea4858fc4a6c98db60bea": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2019-12-11 08:52:13", "commitsDetails": [{"commitMessage": "Issue #4415 - Addressing Gzip Decoding of large files\n\n+ Addressing PR review\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["2b58379f88899867484bdb94d82e7ace47edf8dc"], "commitHash": "1e810d370f0e2a2c7751d1cf7bcf4081d8a45ce7", "commitSpoonAstDiffStats": [{"spoonFilePath": "GZIPContentDecoder.java", "spoonMethods": []}, {"spoonFilePath": "GZIPContentDecoderTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.GZIPContentDecoderTest.GZIPDecoderOutputStream.write(byte[])", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 2, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.http.GZIPContentDecoderTest.GZIPDecoderOutputStream.write(int)", "DEL": 4, "INS": 1, "UPD": 2, "MOV": 3, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.http.GZIPContentDecoderTest.GZIPDecoderOutputStream.write(byte[],int,int)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 9, "TOT": 11}, {"spoonMethodName": "org.eclipse.jetty.http.GZIPContentDecoderTest.testLargeGzipStream(long)", "DEL": 2, "INS": 2, "UPD": 0, "MOV": 7, "TOT": 11}, {"spoonMethodName": "org.eclipse.jetty.http.GZIPContentDecoderTest.GZIPDecoderOutputStream.decode(java.nio.ByteBuffer)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 3, "TOT": 4}]}], "nameRev": "1e810d370f0e2a2c7751d1cf7bcf4081d8a45ce7 tags/jetty-9.4.25.v20191220~13^2~1", "commitUser": "joakime", "authoredDateTime": "2019-12-12 11:58:44", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/GZIPContentDecoder.java", "insertions": 1, "deletions": 1}, {"lines": 66, "filePath": "jetty-http/src/test/java/org/eclipse/jetty/http/GZIPContentDecoderTest.java", "insertions": 25, "deletions": 41}], "commitDateTime": "2019-12-12 11:58:44", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #4417 from eclipse/jetty-9.4.x-4415-gziphandler-large-stream-support\n\nIssue #4415 - Addressing Gzip Decoding of large files", "commitParents": ["fe1a3c67a1f67d59b7e768d351c95cce52d6fb36", "36d06d016d966169122ea4858fc4a6c98db60bea"], "commitHash": "cf7f6a52f56d550cfd833b633e1365b719457c6b", "commitSpoonAstDiffStats": [{"spoonFilePath": "GZIPContentDecoder.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.GZIPContentDecoder.decodeChunks(java.nio.ByteBuffer)", "DEL": 1, "INS": 2, "UPD": 1, "MOV": 4, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.http.GZIPContentDecoder", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "GZIPContentDecoderTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.GZIPContentDecoderTest", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.http.GZIPContentDecoderTest.testLargeGzipStream(long)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.GZIPContentDecoderTest.GZIPDecoderOutputStream", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "cf7f6a52f56d550cfd833b633e1365b719457c6b tags/jetty-9.4.25.v20191220~13", "commitUser": "joakime", "authoredDateTime": "2019-12-12 14:11:31", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 10, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/GZIPContentDecoder.java", "insertions": 7, "deletions": 3}, {"lines": 83, "filePath": "jetty-http/src/test/java/org/eclipse/jetty/http/GZIPContentDecoderTest.java", "insertions": 83, "deletions": 0}], "commitDateTime": "2019-12-12 14:11:31", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4415 - Addressing Gzip Decoding of large files\n\n+ Now applying proper RFC 1952 ISIZE check.\n+ Bit shifting is done with Longs against Long value.\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["fe1a3c67a1f67d59b7e768d351c95cce52d6fb36"], "commitHash": "2b58379f88899867484bdb94d82e7ace47edf8dc", "commitSpoonAstDiffStats": [{"spoonFilePath": "GZIPContentDecoder.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.GZIPContentDecoder.decodeChunks(java.nio.ByteBuffer)", "DEL": 1, "INS": 2, "UPD": 1, "MOV": 4, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.http.GZIPContentDecoder", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "GZIPContentDecoderTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.GZIPContentDecoderTest", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.http.GZIPContentDecoderTest.testLargeGzipStream(long)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.GZIPContentDecoderTest.GZIPDecoderOutputStream", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "2b58379f88899867484bdb94d82e7ace47edf8dc tags/jetty-9.4.25.v20191220~13^2~2", "commitUser": "joakime", "authoredDateTime": "2019-12-11 14:38:42", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 10, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/GZIPContentDecoder.java", "insertions": 7, "deletions": 3}, {"lines": 100, "filePath": "jetty-http/src/test/java/org/eclipse/jetty/http/GZIPContentDecoderTest.java", "insertions": 100, "deletions": 0}], "commitDateTime": "2019-12-11 14:38:42", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4415 - Addressing Gzip Decoding of large files\n\n+ Addressing PR review\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["1e810d370f0e2a2c7751d1cf7bcf4081d8a45ce7"], "commitHash": "36d06d016d966169122ea4858fc4a6c98db60bea", "commitSpoonAstDiffStats": [{"spoonFilePath": "GZIPContentDecoderTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.GZIPContentDecoderTest.GZIPDecoderOutputStream.write(int)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.http.GZIPContentDecoderTest.testLargeGzipStream(long)", "DEL": 3, "INS": 0, "UPD": 0, "MOV": 2, "TOT": 5}]}], "nameRev": "36d06d016d966169122ea4858fc4a6c98db60bea tags/jetty-9.4.25.v20191220~13^2", "commitUser": "joakime", "authoredDateTime": "2019-12-12 13:23:44", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 9, "filePath": "jetty-http/src/test/java/org/eclipse/jetty/http/GZIPContentDecoderTest.java", "insertions": 4, "deletions": 5}], "commitDateTime": "2019-12-12 13:23:44", "spoonStatsSkippedReason": ""}], "title": "GzipHandler invalid input zip size on large (over 2,147,483,647 bytes) request body content", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 2, "insertions": 1, "gitFilesChange": 1, "deletions": 1}, "closed": "2019-12-12 20:11:32", "statsSkippedReason": "", "body": "**Jetty version**\r\n9.4.24.v20191120\r\n\r\n**Java version**\r\nopenjdk 11.0.3 2019-04-16\r\nOpenJDK Runtime Environment AdoptOpenJDK (build 11.0.3+7)\r\n\r\n**OS type/version**\r\nmacOS Catalina\r\nversion 10.15.1\r\n\r\n**Description**\r\n`GZipHandler` will fail to inflate streams that are over `4GB`, the error originate in `GZipContentDecoder`\r\n\r\n```java\r\n...\r\n                    case ISIZE:\r\n                    {\r\n                        _value += (currByte & 0xFF) << 8 * _size;\r\n                        ++_size;\r\n                        if (_size == 4)\r\n                        {\r\n                            if (_value != _inflater.getBytesWritten())\r\n                                throw new ZipException(\"Invalid input size\");\r\n...\r\n```\r\n\r\n**How to replicate** \r\nSetup Jetty with `GZipHandler` and specify `setInflateBufferSize` so Jetty will try and inflate your request.\r\n\r\nCreate dummy data: \r\n```bash\r\ndd if=/dev/urandom of=too_big.xml bs=1048576 count=4097\r\n```\r\n\r\n```bash\r\ncurl -X POST -H \"Content-Encoding: gzip\" -T too_big.xml.gz \"http://localhost:port/\"\r\n```\r\nWill throw: `java.util.zip.ZipException: Invalid input size`\r\n\r\n**Possible solutions**\r\nDon't validate the size if a certain amount of bytes have been written OR cast `_inflater.getBytesWritten()` to int", "changesInPackagesGIT": ["jetty-http/src/main/java/org/eclipse/jetty/http"], "changesInPackagesSPOON": [], "ttf": 1.0002777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/4415"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "Marco85Li", "filteredCommits": ["6bbec7f3b04278a384d3b55e05ab71cadad0d86e"], "commits": {"6bbec7f3b04278a384d3b55e05ab71cadad0d86e": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "8e875ab7a4fbee318e1e7fe3fe59cbeda0b53e9e": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "fe1a3c67a1f67d59b7e768d351c95cce52d6fb36": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2019-12-10 14:53:49", "commitsDetails": [{"commitMessage": "Issue #4411 - Jetty server spins on incomplete request.\n\nFixed HttpInput to be in READY state if an error is detected\nbefore the call to setWriteListener().\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["0e6a1ce76b1b8427bd05a210a10ed15796c150b4"], "commitHash": "6bbec7f3b04278a384d3b55e05ab71cadad0d86e", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpInput.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpInput.setReadListener(javax.servlet.ReadListener)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 3}]}, {"spoonFilePath": "HttpConfiguration.java", "spoonMethods": []}, {"spoonFilePath": "HttpClientStreamTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.client.HttpClientStreamTest.testClientDefersContentServerIdleTimeout(org.eclipse.jetty.http.client.Transport)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "6bbec7f3b04278a384d3b55e05ab71cadad0d86e tags/jetty-9.4.25.v20191220~14^2~1", "commitUser": "sbordet", "authoredDateTime": "2019-12-11 00:11:29", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpConfiguration.java", "insertions": 1, "deletions": 1}, {"lines": 80, "filePath": "tests/test-http-client-transport/src/test/java/org/eclipse/jetty/http/client/HttpClientStreamTest.java", "insertions": 80, "deletions": 0}, {"lines": 29, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpInput.java", "insertions": 18, "deletions": 11}], "commitDateTime": "2019-12-11 00:11:29", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4411 - Jetty server spins on incomplete request.\n\nUpdated FastCGI code to pass the test.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["6bbec7f3b04278a384d3b55e05ab71cadad0d86e"], "commitHash": "8e875ab7a4fbee318e1e7fe3fe59cbeda0b53e9e", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpChannelOverFCGI.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.fcgi.server.HttpChannelOverFCGI.onIdleTimeout(java.lang.Throwable)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ServerFCGIConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.fcgi.server.ServerFCGIConnection.onReadTimeout(java.lang.Throwable)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpClientStreamTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.client.HttpClientStreamTest.testClientDefersContentServerIdleTimeout(org.eclipse.jetty.http.client.Transport)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "8e875ab7a4fbee318e1e7fe3fe59cbeda0b53e9e tags/jetty-9.4.25.v20191220~14^2", "commitUser": "sbordet", "authoredDateTime": "2019-12-11 13:02:23", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 8, "filePath": "jetty-fcgi/fcgi-server/src/main/java/org/eclipse/jetty/fcgi/server/HttpChannelOverFCGI.java", "insertions": 8, "deletions": 0}, {"lines": 8, "filePath": "jetty-fcgi/fcgi-server/src/main/java/org/eclipse/jetty/fcgi/server/ServerFCGIConnection.java", "insertions": 8, "deletions": 0}, {"lines": 4, "filePath": "tests/test-http-client-transport/src/test/java/org/eclipse/jetty/http/client/HttpClientStreamTest.java", "insertions": 0, "deletions": 4}], "commitDateTime": "2019-12-11 13:02:23", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #4412 from eclipse/jetty-9.4.x-4411-server_spin_incomplete_request\n\nIssue #4411 - Jetty server spins on incomplete request.", "commitParents": ["0e6a1ce76b1b8427bd05a210a10ed15796c150b4", "8e875ab7a4fbee318e1e7fe3fe59cbeda0b53e9e"], "commitHash": "fe1a3c67a1f67d59b7e768d351c95cce52d6fb36", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpChannelOverFCGI.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.fcgi.server.HttpChannelOverFCGI.onIdleTimeout(java.lang.Throwable)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ServerFCGIConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.fcgi.server.ServerFCGIConnection.onReadTimeout(java.lang.Throwable)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpInput.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpInput.setReadListener(javax.servlet.ReadListener)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 3}]}, {"spoonFilePath": "HttpConfiguration.java", "spoonMethods": []}, {"spoonFilePath": "HttpClientStreamTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.client.HttpClientStreamTest.testClientDefersContentServerIdleTimeout(org.eclipse.jetty.http.client.Transport)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "fe1a3c67a1f67d59b7e768d351c95cce52d6fb36 tags/jetty-9.4.25.v20191220~14", "commitUser": "sbordet", "authoredDateTime": "2019-12-11 13:47:37", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpConfiguration.java", "insertions": 1, "deletions": 1}, {"lines": 8, "filePath": "jetty-fcgi/fcgi-server/src/main/java/org/eclipse/jetty/fcgi/server/HttpChannelOverFCGI.java", "insertions": 8, "deletions": 0}, {"lines": 8, "filePath": "jetty-fcgi/fcgi-server/src/main/java/org/eclipse/jetty/fcgi/server/ServerFCGIConnection.java", "insertions": 8, "deletions": 0}, {"lines": 76, "filePath": "tests/test-http-client-transport/src/test/java/org/eclipse/jetty/http/client/HttpClientStreamTest.java", "insertions": 76, "deletions": 0}, {"lines": 29, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpInput.java", "insertions": 18, "deletions": 11}], "commitDateTime": "2019-12-11 13:47:37", "spoonStatsSkippedReason": ""}], "title": "Jetty server spins on incomplete request due to delayed dispatch until content", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 3, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 31, "insertions": 19, "gitFilesChange": 2, "deletions": 12}, "closed": "2019-12-11 12:47:37", "statsSkippedReason": "", "body": "**Jetty version**\r\n9.4.24.v20191120\r\n\r\nThe issue is also reproducible with 9.4.18 and 9.4.20\r\n\r\n**Java version**\r\njdk1.8.0_172 Oracle\r\n\r\n**OS type/version**\r\nWindows 7\r\n\r\nThe issue is also reproducible with RedHat\r\n\r\n**Description**\r\n\r\nThe Jetty server starts to consume high CPU until server restart.\r\n\r\n1. A client sends a POST request with all headers including content length but no actual body to a valid target URL. The target URL is handled by a servlet in async mode using a javax.servlet.ReadListener\r\n2. The jetty.http.idleTimeout expires before any bytes of the request body are received.\r\n3. The client starts to send the body before another Idle timeout expires.\r\n4. The server starts spinning selecting the connection socket for reading without actually reading anything.\r\n\r\nThe issue is reproducible with the distributed Jetty server (version 9.4.24) by installing the attached webapp and running the following client sample.\r\n\r\nNOTE:\r\nIf the client starts sending data after the idle timeout expires again (after 2 * idleTimeout), the problem does not occure. When the idle timeout expirse the second time, the ReadListener is notified with an onError event.\r\n\r\nQuestions:\r\n1. Why isn't doPost called immediately after the header have been received?\r\n2. Why isn't on error called after the first idle timeout expires?\r\n3. Why does it take two idle timeouts to expire for the HttpConnection to be cleared?\r\n\r\nWe noticed this problem occurring with a CometD application in long-poll mode and misbehaving clients taking a long time to send the body of the meta/connect request.\r\n\r\nMisbehaving client code follows\r\n[JettyServerIssueAnalysis.log](https://github.com/eclipse/jetty.project/files/3945415/JettyServerIssueAnalysis.log)\r\n[hello-world-war.zip](https://github.com/eclipse/jetty.project/files/3945448/hello-world-war.zip)\r\n\r\n``` java\r\npackage com.test;\r\n\r\nimport java.io.IOException;\r\n\r\nimport javax.servlet.AsyncContext;\r\nimport javax.servlet.ReadListener;\r\nimport javax.servlet.ServletException;\r\nimport javax.servlet.annotation.WebServlet;\r\nimport javax.servlet.http.HttpServlet;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpServletResponse;\r\n\r\n@WebServlet\r\npublic class TestServlet extends HttpServlet {\r\n\r\n    private static final long serialVersionUID = -8683120971968625920L;\r\n\r\n    @Override\r\n    protected void doPost(HttpServletRequest req, final HttpServletResponse resp) throws ServletException, IOException {\r\n        System.err.println(\"------------- POST ARRIVED -------------\");\r\n        Thread.dumpStack();\r\n        \r\n        final AsyncContext asyncContext = req.startAsync(req, resp);\r\n        asyncContext.setTimeout(0);\r\n        req.getInputStream().setReadListener(new ReadListener() {\r\n            \r\n            public void onError(Throwable t) {\r\n                int responseCode = HttpServletResponse.SC_INTERNAL_SERVER_ERROR;\r\n                System.err.println(\"------------- POST ERROR -------------\");\r\n                Thread.dumpStack();\r\n                System.err.println(\"------------- POST EXCEPTION -------------\");\r\n                t.printStackTrace();\r\n                System.err.println(\"------------- POST ERROR HANDLING -------------\");\r\n                \r\n                try {\r\n                    resp.setStatus(responseCode);\r\n                } catch (Exception x) {\r\n                    System.err.println(\"------------- Could not send \" + responseCode + \" response\");\r\n                    x.printStackTrace();\r\n                } finally {\r\n                    try {\r\n                        if (asyncContext != null) {\r\n                            asyncContext.complete();\r\n                        }\r\n                    } catch (Exception x) {\r\n                        System.err.println(\"------------- Could not complete \" + responseCode + \" response\");\r\n                        x.printStackTrace();\r\n                    }\r\n                }\r\n                \r\n                System.err.println(\"------------- POST ERROR COMPLETED -------------\");\r\n                \r\n            }\r\n            \r\n            public void onDataAvailable() throws IOException {\r\n                System.err.println(\"------------- POST DATA AVAILABLE -------------\");\r\n                \r\n            }\r\n            \r\n            public void onAllDataRead() throws IOException {\r\n                System.err.println(\"------------- POST DATA READ -------------\");\r\n                \r\n            }\r\n        });\r\n    }\r\n}\r\n```\r\n\r\n``` java\r\npackage test;\r\n\r\nimport java.nio.charset.StandardCharsets;\r\n\r\nimport org.eclipse.jetty.client.HttpClient;\r\nimport org.eclipse.jetty.client.api.Request;\r\nimport org.eclipse.jetty.client.api.Response.CompleteListener;\r\nimport org.eclipse.jetty.client.api.Result;\r\nimport org.eclipse.jetty.client.util.OutputStreamContentProvider;\r\nimport org.eclipse.jetty.http.HttpMethod;\r\nimport org.eclipse.jetty.http.HttpVersion;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\n\r\n\r\npublic class JettyHighCpuBug {\r\n\r\n    private static final Logger log = LoggerFactory.getLogger(JettyHighCpuBug.class);\r\n    \r\n    private static final long SERVER_IDLE_TIMEOUT_MS = 30000;\r\n    private static final String CONTENT = \"[{\\\"key\\\":\\\"value\\\"}]\";\r\n    \r\n    public static void main(String[] args) throws Exception {\r\n        log.info(\"START\");\r\n        \r\n        HttpClient httpClient = new HttpClient();\r\n\r\n        httpClient.start();\r\n        \r\n        Request request = httpClient.newRequest(\"http://localhost:9999/hello/mytest\");\r\n        request.method(HttpMethod.POST);\r\n        request.version(HttpVersion.HTTP_1_1);\r\n        request.accept(\"*/*\");\r\n        request.agent(\"Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko\");\r\n        \r\n        OutputStreamContentProvider content = new OutputStreamContentProvider() {\r\n            @Override\r\n            public long getLength() {\r\n                return CONTENT.length();\r\n            }\r\n        };\r\n        \r\n        request.content(content, \"application/json;charset=UTF-8\");\r\n        \r\n        log.info(\"SEND REQUEST HEADERS\");\r\n        request.send(new CompleteListener() {\r\n            \r\n            @Override\r\n            public void onComplete(Result result) {\r\n                log.info(\"RESPONSE BODY\");\r\n            }\r\n        });\r\n        \r\n        log.info(\"WAIT TIMEOUT\");\r\n        // Reproduce misbehaving client behavior\r\n        Thread.sleep(SERVER_IDLE_TIMEOUT_MS + 10000);\r\n        log.info(\"RESUME FROM TIMEOUT\");\r\n        \r\n        log.info(\"SEND REQUEST BODY\");\r\n        content.getOutputStream().write(CONTENT.getBytes(StandardCharsets.UTF_8));\r\n        \r\n        httpClient.stop();\r\n    }\r\n}\r\n```\r\n\r\n", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.HttpInput.setReadListener(javax.servlet.ReadListener)"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/4411"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "apprme", "filteredCommits": [], "commits": {"0e6a1ce76b1b8427bd05a210a10ed15796c150b4": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "6d8ccf4fd3984461d64dabbee44668c4ac0efe4d": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2019-12-05 13:30:44", "commitsDetails": [{"commitMessage": "Issue #4402 Fix NPE in JettyRunWarExplodedMojo (#4406)\n\nSigned-off-by: Jan Bartel <janb@webtide.com>", "commitParents": ["2052b6e390d78aad5c2bc52e9e066b410b9d3c41"], "commitHash": "0e6a1ce76b1b8427bd05a210a10ed15796c150b4", "commitSpoonAstDiffStats": [{"spoonFilePath": "JettyRunWarExplodedMojo.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.maven.plugin.JettyRunWarExplodedMojo.configureScanner()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}]}], "nameRev": "0e6a1ce76b1b8427bd05a210a10ed15796c150b4 tags/jetty-9.4.25.v20191220~15", "commitUser": "janbartel", "authoredDateTime": "2019-12-10 12:29:40", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-maven-plugin/src/main/java/org/eclipse/jetty/maven/plugin/JettyRunWarExplodedMojo.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2019-12-10 12:29:40", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "6d8ccf4fd3984461d64dabbee44668c4ac0efe4d", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "NPE in JettyRunWarExplodedMojo", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2019-12-10 01:30:02", "statsSkippedReason": "", "body": "We have an NPE when running `mvn jetty:run-exploded` after upgrading to 9.4.24.v20191120 (worked fine on 9.4.22.v20191022): `webApp.getClasses()` returns `null` [here](https://github.com/eclipse/jetty.project/blob/aefbdfca587277bc3d27a7e0b8faff3eb0ba4d05/jetty-maven-plugin/src/main/java/org/eclipse/jetty/maven/plugin/JettyRunWarExplodedMojo.java#L91).\r\n\r\n```\r\n# java -version\r\nopenjdk version \"11.0.4\" 2019-07-16\r\nOpenJDK Runtime Environment AdoptOpenJDK (build 11.0.4+11)\r\nOpenJDK 64-Bit Server VM AdoptOpenJDK (build 11.0.4+11, mixed mode)\r\n\r\n# sw_vers\r\nProductName:\tMac OS X\r\nProductVersion:\t10.15.1\r\nBuildVersion:\t19B88\r\n```\r\n\r\n```\r\norg.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.eclipse.jetty:jetty-maven-plugin:9.4.24.v20191120:run-exploded (default-cli) on project cospaces-server: Failure\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:956)\r\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:288)\r\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:192)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke (Method.java:566)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\nCaused by: org.apache.maven.plugin.MojoExecutionException: Failure\r\n    at org.eclipse.jetty.maven.plugin.AbstractJettyMojo.startJetty (AbstractJettyMojo.java:496)\r\n    at org.eclipse.jetty.maven.plugin.AbstractJettyMojo.execute (AbstractJettyMojo.java:311)\r\n    at org.eclipse.jetty.maven.plugin.JettyRunWarExplodedMojo.execute (JettyRunWarExplodedMojo.java:59)\r\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:956)\r\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:288)\r\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:192)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke (Method.java:566)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\nCaused by: java.lang.NullPointerException\r\n    at org.eclipse.jetty.maven.plugin.JettyRunWarExplodedMojo.configureScanner (JettyRunWarExplodedMojo.java:91)\r\n    at org.eclipse.jetty.maven.plugin.AbstractJettyMojo.startJetty (AbstractJettyMojo.java:481)\r\n    at org.eclipse.jetty.maven.plugin.AbstractJettyMojo.execute (AbstractJettyMojo.java:311)\r\n    at org.eclipse.jetty.maven.plugin.JettyRunWarExplodedMojo.execute (JettyRunWarExplodedMojo.java:59)\r\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:956)\r\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:288)\r\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:192)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke (Method.java:566)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\n```\r\n\r\nHere is jetty-maven-plugin related part of our pom.xml:\r\n\r\n```\r\n  <plugins>\r\n    <plugin>\r\n      <groupId>org.eclipse.jetty</groupId>\r\n      <artifactId>jetty-maven-plugin</artifactId>\r\n      <configuration>\r\n        <stopPort>9966</stopPort>\r\n        <stopKey>delightex</stopKey>\r\n        <scanIntervalSeconds>5</scanIntervalSeconds>\r\n        <webApp>\r\n          <descriptor>${project.basedir}/src/main/webapp/WEB-INF/web.xml</descriptor>\r\n          <jettyEnvXml>${project.basedir}/src/main/webapp/WEB-INF/jetty-env.xml</jettyEnvXml>\r\n        </webApp>\r\n      </configuration>\r\n    </plugin>\r\n  </plugins>\r\n  <pluginManagement>\r\n    <plugins>\r\n      <plugin>\r\n        <groupId>org.eclipse.jetty</groupId>\r\n        <artifactId>jetty-maven-plugin</artifactId>\r\n        <configuration>\r\n          <skip>false</skip>\r\n        </configuration>\r\n        <dependencies>\r\n          <dependency>\r\n            <groupId>org.eclipse.jetty</groupId>\r\n            <artifactId>jetty-servlets</artifactId>\r\n            <version>${jetty.version}</version>\r\n          </dependency>\r\n        </dependencies>\r\n      </plugin>\r\n    </plugins>\r\n  </pluginManagement>\r\n```\r\n", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 4.000277777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/4402"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 2}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["d1376c71ebb4d5fcd4d56b65b8851ede9b8ac7e9", "816e34bddf137464ea0e6433315f49121d9d10d2", "e1d64af578a7270ac30dbd6eade1ca57aa79a1b5", "53073ca25704ebd49c7133226053418a5124900f", "5b1f9d5f159b385f3ca60f0ab47df165114f6d78", "666ee4ef600da97706a0b8cc6097951389e48391", "65738e770fefc7a0bf2214a6c2a59dc01456c0ff"], "commits": {"d1376c71ebb4d5fcd4d56b65b8851ede9b8ac7e9": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "2052b6e390d78aad5c2bc52e9e066b410b9d3c41": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "a5e31dce20898bb1249ade9f446c8d076b4e3282": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "666ee4ef600da97706a0b8cc6097951389e48391": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "e1d64af578a7270ac30dbd6eade1ca57aa79a1b5": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "816e34bddf137464ea0e6433315f49121d9d10d2": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "5b1f9d5f159b385f3ca60f0ab47df165114f6d78": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "53073ca25704ebd49c7133226053418a5124900f": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "65738e770fefc7a0bf2214a6c2a59dc01456c0ff": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2019-12-02 16:40:03", "commitsDetails": [{"commitMessage": "Issue #4385 - Correcting exception variable name.\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["65738e770fefc7a0bf2214a6c2a59dc01456c0ff"], "commitHash": "d1376c71ebb4d5fcd4d56b65b8851ede9b8ac7e9", "commitSpoonAstDiffStats": [{"spoonFilePath": "X509Test.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.ssl.X509Test.testSniX509ExtendedKeyManager_BaseClass()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.X509Test.testSniX509ExtendedKeyManager_ClientClass()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}], "nameRev": "d1376c71ebb4d5fcd4d56b65b8851ede9b8ac7e9 tags/jetty-9.4.25.v20191220~20^2", "commitUser": "joakime", "authoredDateTime": "2019-12-02 16:02:18", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 8, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/ssl/X509Test.java", "insertions": 4, "deletions": 4}], "commitDateTime": "2019-12-02 16:02:18", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #4404 from eclipse/jetty-9.4.x-4385-restore-unsupported-exception-base-sni\n\nIssue #4385 - Reverting WARN log in favor of IllegalStateException", "commitParents": ["364ded9f73b86ca5477a26388a173447b854ed02", "53073ca25704ebd49c7133226053418a5124900f"], "commitHash": "2052b6e390d78aad5c2bc52e9e066b410b9d3c41", "commitSpoonAstDiffStats": [{"spoonFilePath": "X509Test.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.ssl.X509Test.testBaseClass_WithSni()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.X509Test.testServerClass_WithSni()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.X509Test.testSniX509ExtendedKeyManager_BaseClass()", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 4, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.X509Test.testClientClass_WithSni()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.X509Test.testSniX509ExtendedKeyManager_ServerClass()", "DEL": 0, "INS": 0, "UPD": 8, "MOV": 1, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.X509Test.testSniX509ExtendedKeyManager_BaseClass_Start()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 7, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.X509Test.testSniX509ExtendedKeyManager_ClientClass()", "DEL": 0, "INS": 0, "UPD": 9, "MOV": 5, "TOT": 14}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.X509Test.getX509ExtendedKeyManager(org.eclipse.jetty.util.ssl.SslContextFactory)", "DEL": 2, "INS": 0, "UPD": 19, "MOV": 12, "TOT": 33}]}, {"spoonFilePath": "SslContextFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.newSniX509ExtendedKeyManager(javax.net.ssl.X509ExtendedKeyManager)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.getKeyManagers(java.security.KeyStore)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 2, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.Client.newSniX509ExtendedKeyManager(javax.net.ssl.X509ExtendedKeyManager)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "2052b6e390d78aad5c2bc52e9e066b410b9d3c41 tags/jetty-9.4.25.v20191220~16", "commitUser": "sbordet", "authoredDateTime": "2019-12-07 12:44:05", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 24, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/ssl/SslContextFactory.java", "insertions": 15, "deletions": 9}, {"lines": 91, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/ssl/X509Test.java", "insertions": 46, "deletions": 45}], "commitDateTime": "2019-12-07 12:44:05", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4385 - Base Class usage now is a WARN logging event in SNI usage\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["e1d64af578a7270ac30dbd6eade1ca57aa79a1b5"], "commitHash": "816e34bddf137464ea0e6433315f49121d9d10d2", "commitSpoonAstDiffStats": [{"spoonFilePath": "X509Test.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.ssl.X509Test.testSniX509ExtendedKeyManager_BaseClass()", "DEL": 0, "INS": 1, "UPD": 5, "MOV": 2, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.X509Test.testSniX509ExtendedKeyManager_BaseClass_Start()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.X509Test.testSniX509ExtendedKeyManager_ClientClass()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "SslContextFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.newSniX509ExtendedKeyManager(javax.net.ssl.X509ExtendedKeyManager)", "DEL": 2, "INS": 1, "UPD": 1, "MOV": 1, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.getKeyManagers(java.security.KeyStore)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}], "nameRev": "816e34bddf137464ea0e6433315f49121d9d10d2 tags/jetty-9.4.25.v20191220~20^2~3", "commitUser": "joakime", "authoredDateTime": "2019-12-02 12:13:13", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 16, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/ssl/SslContextFactory.java", "insertions": 11, "deletions": 5}, {"lines": 23, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/ssl/X509Test.java", "insertions": 19, "deletions": 4}, {"lines": 0, "filePath": "jetty-util/src/test/resources/keystore_sni.p12", "insertions": 0, "deletions": 0}], "commitDateTime": "2019-12-02 12:13:13", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4385 - Remove UnsupportedOperationException in SslContextFactory\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["d7cf3729a5076331297bc6295e55f568bf132671"], "commitHash": "666ee4ef600da97706a0b8cc6097951389e48391", "commitSpoonAstDiffStats": [{"spoonFilePath": "X509Test.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.ssl.X509Test.testSniX509ExtendedKeyManager_BaseClass()", "DEL": 1, "INS": 0, "UPD": 5, "MOV": 2, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.X509Test.testSniX509ExtendedKeyManager_ClientClass()", "DEL": 1, "INS": 0, "UPD": 5, "MOV": 2, "TOT": 8}]}, {"spoonFilePath": "SslContextFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.newSniX509ExtendedKeyManager(javax.net.ssl.X509ExtendedKeyManager)", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.Client.newSniX509ExtendedKeyManager(javax.net.ssl.X509ExtendedKeyManager)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "666ee4ef600da97706a0b8cc6097951389e48391 tags/jetty-9.4.25.v20191220~20^2~5", "commitUser": "joakime", "authoredDateTime": "2019-12-02 10:57:15", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 10, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/ssl/SslContextFactory.java", "insertions": 9, "deletions": 1}, {"lines": 11, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/ssl/X509Test.java", "insertions": 5, "deletions": 6}], "commitDateTime": "2019-12-02 10:57:15", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4385 - Minimize impact of deprecated SNI mode on base class\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["666ee4ef600da97706a0b8cc6097951389e48391"], "commitHash": "e1d64af578a7270ac30dbd6eade1ca57aa79a1b5", "commitSpoonAstDiffStats": [{"spoonFilePath": "SslContextFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.newSniX509ExtendedKeyManager(javax.net.ssl.X509ExtendedKeyManager)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.Client.newSniX509ExtendedKeyManager(javax.net.ssl.X509ExtendedKeyManager)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}]}], "nameRev": "e1d64af578a7270ac30dbd6eade1ca57aa79a1b5 tags/jetty-9.4.25.v20191220~20^2~4", "commitUser": "joakime", "authoredDateTime": "2019-12-02 12:00:21", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 4, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/ssl/SslContextFactory.java", "insertions": 2, "deletions": 2}], "commitDateTime": "2019-12-02 12:00:21", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #4386 from eclipse/jetty-9.4.x-4385-sslcontextfactory-sni-noexception\n\nIssue #4385 - Limit new UnsupportedOperationException to direct SslContextFactory usage", "commitParents": ["db9ad2fcecd6158ac9535eebd9fc952809d5e1ff", "d1376c71ebb4d5fcd4d56b65b8851ede9b8ac7e9"], "commitHash": "a5e31dce20898bb1249ade9f446c8d076b4e3282", "commitSpoonAstDiffStats": [{"spoonFilePath": "X509Test.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.ssl.X509Test.testSniX509ExtendedKeyManager_BaseClass()", "DEL": 1, "INS": 1, "UPD": 2, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.X509Test.testSniX509ExtendedKeyManager_BaseClass_Start()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.X509Test.testSniX509ExtendedKeyManager_ClientClass()", "DEL": 1, "INS": 1, "UPD": 3, "MOV": 0, "TOT": 5}]}, {"spoonFilePath": "SslContextFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.newSniX509ExtendedKeyManager(javax.net.ssl.X509ExtendedKeyManager)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.getKeyManagers(java.security.KeyStore)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}], "nameRev": "a5e31dce20898bb1249ade9f446c8d076b4e3282 tags/jetty-9.4.25.v20191220~20", "commitUser": "joakime", "authoredDateTime": "2019-12-03 10:05:56", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 15, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/ssl/SslContextFactory.java", "insertions": 11, "deletions": 4}, {"lines": 22, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/ssl/X509Test.java", "insertions": 18, "deletions": 4}, {"lines": 0, "filePath": "jetty-util/src/test/resources/keystore_sni.p12", "insertions": 0, "deletions": 0}], "commitDateTime": "2019-12-03 10:05:56", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4385 - Client no longer needs override.\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["816e34bddf137464ea0e6433315f49121d9d10d2"], "commitHash": "5b1f9d5f159b385f3ca60f0ab47df165114f6d78", "commitSpoonAstDiffStats": [{"spoonFilePath": "SslContextFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.Client.newSniX509ExtendedKeyManager(javax.net.ssl.X509ExtendedKeyManager)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "5b1f9d5f159b385f3ca60f0ab47df165114f6d78 tags/jetty-9.4.25.v20191220~20^2~2", "commitUser": "joakime", "authoredDateTime": "2019-12-02 12:15:02", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 7, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/ssl/SslContextFactory.java", "insertions": 0, "deletions": 7}], "commitDateTime": "2019-12-02 12:15:02", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4385 - Reverting WARN log in favor of IllegalStateException\n\n+ Plus fleshing out the testcases more for Base / Client / Server\n  with and without certificates that will trigger SNI requirement\n  and ISE.\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["a5e31dce20898bb1249ade9f446c8d076b4e3282"], "commitHash": "53073ca25704ebd49c7133226053418a5124900f", "commitSpoonAstDiffStats": [{"spoonFilePath": "X509Test.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.ssl.X509Test.testBaseClass_WithSni()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.X509Test.testServerClass_WithSni()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.X509Test.testSniX509ExtendedKeyManager_BaseClass()", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 4, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.X509Test.testClientClass_WithSni()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.X509Test.testSniX509ExtendedKeyManager_ServerClass()", "DEL": 0, "INS": 0, "UPD": 8, "MOV": 1, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.X509Test.testSniX509ExtendedKeyManager_BaseClass_Start()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 7, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.X509Test.testSniX509ExtendedKeyManager_ClientClass()", "DEL": 0, "INS": 0, "UPD": 9, "MOV": 5, "TOT": 14}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.X509Test.getX509ExtendedKeyManager(org.eclipse.jetty.util.ssl.SslContextFactory)", "DEL": 2, "INS": 0, "UPD": 19, "MOV": 12, "TOT": 33}]}, {"spoonFilePath": "SslContextFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.newSniX509ExtendedKeyManager(javax.net.ssl.X509ExtendedKeyManager)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.getKeyManagers(java.security.KeyStore)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 2, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.Client.newSniX509ExtendedKeyManager(javax.net.ssl.X509ExtendedKeyManager)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "53073ca25704ebd49c7133226053418a5124900f tags/jetty-9.4.25.v20191220~16^2", "commitUser": "joakime", "authoredDateTime": "2019-12-06 13:20:24", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 24, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/ssl/SslContextFactory.java", "insertions": 15, "deletions": 9}, {"lines": 91, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/ssl/X509Test.java", "insertions": 46, "deletions": 45}], "commitDateTime": "2019-12-06 13:20:24", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4385 - Fixing client testcase assertion\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["5b1f9d5f159b385f3ca60f0ab47df165114f6d78"], "commitHash": "65738e770fefc7a0bf2214a6c2a59dc01456c0ff", "commitSpoonAstDiffStats": [{"spoonFilePath": "X509Test.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.ssl.X509Test.testSniX509ExtendedKeyManager_ClientClass()", "DEL": 0, "INS": 1, "UPD": 5, "MOV": 2, "TOT": 8}]}], "nameRev": "65738e770fefc7a0bf2214a6c2a59dc01456c0ff tags/jetty-9.4.25.v20191220~20^2~1", "commitUser": "joakime", "authoredDateTime": "2019-12-02 16:00:37", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 4, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/ssl/X509Test.java", "insertions": 2, "deletions": 2}], "commitDateTime": "2019-12-02 16:00:37", "spoonStatsSkippedReason": ""}], "title": "Limit new UnsupportedOperationException to direct base class SslContextFactory usage", "spoonStatsSummary": {"spoonMethodsChanged": 3, "DEL": 7, "INS": 8, "UPD": 3, "MOV": 5, "TOT": 23, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 61, "insertions": 37, "gitFilesChange": 1, "deletions": 24}, "closed": "2019-12-07 11:44:06", "statsSkippedReason": "", "body": "This change seems to have broken creation of a HTTPS connector for those using `SslContextFactory` directly instead of its `Server` subclass, like https://github.com/dropwizard/dropwizard/blob/release/1.3.x/dropwizard-jetty/src/main/java/io/dropwizard/jetty/HttpsConnectorFactory.java#L599\r\n\r\nFor a codepath that is merely \"deprecated\", this seems unexpected.\r\n\r\n_Originally posted by @bentmann in https://github.com/eclipse/jetty.project/pull/4326_", "changesInPackagesGIT": ["jetty-util/src/main/java/org/eclipse/jetty/util/ssl"], "changesInPackagesSPOON": ["org.eclipse.jetty.util.ssl.SslContextFactory.newSniX509ExtendedKeyManager(javax.net.ssl.X509ExtendedKeyManager)", "org.eclipse.jetty.util.ssl.SslContextFactory.getKeyManagers(java.security.KeyStore)", "org.eclipse.jetty.util.ssl.SslContextFactory.Client.newSniX509ExtendedKeyManager(javax.net.ssl.X509ExtendedKeyManager)"], "ttf": 4.000277777777778, "numCommits": 5, "url": "https://github.com/eclipse/jetty.project/issues/4385"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "hareve", "filteredCommits": [], "commits": {"c440a3f9727c2129a4412e82ad3fffd43a872b1f": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "00d4c7c93ac63f53ac41d93c17033f6c20588463": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2019-11-26 09:53:59", "commitsDetails": [{"commitMessage": "Issue #4363 Restore contextXml config for jetty maven plugin (#4367)\n\nSigned-off-by: Jan Bartel <janb@webtide.com>", "commitParents": ["cfd21864cf2c4bb5a3c0a3c3ec8dce76ac8da263"], "commitHash": "c440a3f9727c2129a4412e82ad3fffd43a872b1f", "commitSpoonAstDiffStats": [{"spoonFilePath": "TestGetContent.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.maven.plugin.it.TestGetContent.get_content_response()", "DEL": 4, "INS": 11, "UPD": 0, "MOV": 6, "TOT": 21}, {"spoonMethodName": "org.eclipse.jetty.maven.plugin.it.TestGetContent.getContextPath()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AbstractJettyMojo.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.maven.plugin.AbstractJettyMojo.configureWebApplication()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}], "nameRev": "c440a3f9727c2129a4412e82ad3fffd43a872b1f tags/jetty-9.4.25.v20191220~28", "commitUser": "janbartel", "authoredDateTime": "2019-11-27 14:56:59", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 22, "filePath": "jetty-maven-plugin/src/test/java/org/eclipse/jetty/maven/plugin/it/TestGetContent.java", "insertions": 15, "deletions": 7}, {"lines": 5, "filePath": "jetty-maven-plugin/src/main/java/org/eclipse/jetty/maven/plugin/AbstractJettyMojo.java", "insertions": 3, "deletions": 2}, {"lines": 2, "filePath": "jetty-maven-plugin/src/it/jetty-run-mojo-it/jetty-simple-webapp/pom.xml", "insertions": 2, "deletions": 0}, {"lines": 7, "filePath": "jetty-maven-plugin/src/it/jetty-run-mojo-it/jetty-simple-webapp/src/config/context.xml", "insertions": 7, "deletions": 0}], "commitDateTime": "2019-11-27 14:56:59", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "00d4c7c93ac63f53ac41d93c17033f6c20588463", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "jetty-maven-plugin no longer processes supplied context.xml-file.", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2019-11-27 04:38:43", "statsSkippedReason": "", "body": "**Jetty version**\r\n9.4.23.v20191118\r\n\r\n**Java version**\r\n1.8.0_232\r\n\r\n**OS type/version**\r\nLinux Fedora 31\r\n\r\n**Description**\r\n #4239 removed line 526 in jetty-maven-plugin/src/main/java/org/eclipse/jetty/maven/plugin/AbstractJettyMojo.java: xmlConfiguration.configure(webApp);. This causes custom context.xml-files to stop working when using jetty-maven-plugin.\r\n\r\n\r\n\r\n", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 0.0002777777777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/4363"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "sebneter", "filteredCommits": ["ec2ad2099e8cbf6d9a1874346bab6a5b017161b0", "07efbb728d47b8030481cce317e299187a137333", "f0a3d465ec0d8311e4bfc16164a7f83cb712b77a", "a6cdec548ceae6924c24882c0001c44cf2547aac", "dc0fac5806040d5ac63d4db5ca623c2a859720c5", "5bc6593337893a6e78f56361ac029964e43a9b8c"], "commits": {"d7cf3729a5076331297bc6295e55f568bf132671": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "dc0fac5806040d5ac63d4db5ca623c2a859720c5": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "f0a3d465ec0d8311e4bfc16164a7f83cb712b77a": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "ec2ad2099e8cbf6d9a1874346bab6a5b017161b0": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "a6cdec548ceae6924c24882c0001c44cf2547aac": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "5bc6593337893a6e78f56361ac029964e43a9b8c": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "07efbb728d47b8030481cce317e299187a137333": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2019-11-22 13:32:42", "commitsDetails": [{"commitMessage": "Merge pull request #4354 from eclipse/jetty-9.4.x-4351-lazy-servlet-init-not-atomic\n\nIssue #4351 Lazy servlet init is not atomic", "commitParents": ["380cebc3bb5f0bb2ead54e5de816fe9a809e25d4", "dc0fac5806040d5ac63d4db5ca623c2a859720c5"], "commitHash": "d7cf3729a5076331297bc6295e55f568bf132671", "commitSpoonAstDiffStats": [{"spoonFilePath": "ServletHolder.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.ServletHolder.getServlet()", "DEL": 5, "INS": 1, "UPD": 0, "MOV": 4, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletHolder.initJspServlet()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "InitServletTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.InitServletTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "d7cf3729a5076331297bc6295e55f568bf132671 tags/jetty-9.4.25.v20191220~25", "commitUser": "sbordet", "authoredDateTime": "2019-11-28 11:44:38", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 19, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletHolder.java", "insertions": 7, "deletions": 12}, {"lines": 132, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/InitServletTest.java", "insertions": 132, "deletions": 0}], "commitDateTime": "2019-11-28 11:44:38", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4351 - Lazy servlet init is not atomic.\n\nCode cleanup.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["07efbb728d47b8030481cce317e299187a137333"], "commitHash": "dc0fac5806040d5ac63d4db5ca623c2a859720c5", "commitSpoonAstDiffStats": [{"spoonFilePath": "InitServletTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.InitServletTest.DemoServlet.init()", "DEL": 1, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.servlet.InitServletTest.testServletInitialization()", "DEL": 4, "INS": 3, "UPD": 3, "MOV": 16, "TOT": 26}, {"spoonMethodName": "org.eclipse.jetty.servlet.InitServletTest.DemoServlet.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.InitServletTest.AsyncResponseListener", "DEL": 0, "INS": 3, "UPD": 7, "MOV": 0, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.servlet.InitServletTest.AsyncResponseListener.awaitCompletion()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.InitServletTest.AsyncResponseListener.onComplete(org.eclipse.jetty.client.api.Result)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.InitServletTest.DemoServlet", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}]}], "nameRev": "dc0fac5806040d5ac63d4db5ca623c2a859720c5 tags/jetty-9.4.25.v20191220~25^2", "commitUser": "sbordet", "authoredDateTime": "2019-11-28 11:07:24", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 92, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/InitServletTest.java", "insertions": 37, "deletions": 55}], "commitDateTime": "2019-11-28 11:07:24", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4351 Changes post review.\n\nSigned-off-by: Jan Bartel <janb@webtide.com>\n", "commitParents": ["ec2ad2099e8cbf6d9a1874346bab6a5b017161b0"], "commitHash": "f0a3d465ec0d8311e4bfc16164a7f83cb712b77a", "commitSpoonAstDiffStats": [{"spoonFilePath": "ServletHolder.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.ServletHolder.initJspServlet()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "InitServletTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.InitServletTest.AsyncResponseListener.getResults()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.InitServletTest.AsyncResponseListener", "DEL": 4, "INS": 5, "UPD": 2, "MOV": 0, "TOT": 11}, {"spoonMethodName": "org.eclipse.jetty.servlet.InitServletTest.DemoServlet.init()", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.servlet.InitServletTest.testServletInitialization()", "DEL": 3, "INS": 2, "UPD": 2, "MOV": 1, "TOT": 8}]}], "nameRev": "f0a3d465ec0d8311e4bfc16164a7f83cb712b77a tags/jetty-9.4.25.v20191220~25^2~4", "commitUser": "janbartel", "authoredDateTime": "2019-11-26 08:43:11", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletHolder.java", "insertions": 1, "deletions": 1}, {"lines": 31, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/InitServletTest.java", "insertions": 14, "deletions": 17}], "commitDateTime": "2019-11-26 08:43:11", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4351 Lazy servlet init is not atomic\n\nSigned-off-by: Jan Bartel <janb@webtide.com>\n", "commitParents": ["fed9479ffde22aa04c87e8e803f190f5aff95a8e"], "commitHash": "ec2ad2099e8cbf6d9a1874346bab6a5b017161b0", "commitSpoonAstDiffStats": [{"spoonFilePath": "ServletHolder.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.ServletHolder.getServlet()", "DEL": 5, "INS": 1, "UPD": 0, "MOV": 4, "TOT": 10}]}, {"spoonFilePath": "InitServletTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.InitServletTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "ec2ad2099e8cbf6d9a1874346bab6a5b017161b0 tags/jetty-9.4.25.v20191220~25^2~5", "commitUser": "janbartel", "authoredDateTime": "2019-11-25 11:57:19", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 17, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletHolder.java", "insertions": 6, "deletions": 11}, {"lines": 152, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/InitServletTest.java", "insertions": 152, "deletions": 0}], "commitDateTime": "2019-11-25 11:57:19", "spoonStatsSkippedReason": ""}, {"commitMessage": "Revert \"Issue #4351 Found simpler test\"\n\nThis reverts commit 5bc6593337893a6e78f56361ac029964e43a9b8c.\n", "commitParents": ["5bc6593337893a6e78f56361ac029964e43a9b8c"], "commitHash": "a6cdec548ceae6924c24882c0001c44cf2547aac", "commitSpoonAstDiffStats": [{"spoonFilePath": "ServletHolderTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.ServletHolderTest.FakeServlet.init()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletHolderTest.FakeServlet", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletHolderTest.testServletInitAtomic()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "InitServletTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.InitServletTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "a6cdec548ceae6924c24882c0001c44cf2547aac tags/jetty-9.4.25.v20191220~25^2~2", "commitUser": "janbartel", "authoredDateTime": "2019-11-28 09:16:14", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 89, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/ServletHolderTest.java", "insertions": 0, "deletions": 89}, {"lines": 149, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/InitServletTest.java", "insertions": 149, "deletions": 0}], "commitDateTime": "2019-11-28 09:16:14", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4351 Found simpler test\n\nSigned-off-by: Jan Bartel <janb@webtide.com>\n", "commitParents": ["f0a3d465ec0d8311e4bfc16164a7f83cb712b77a"], "commitHash": "5bc6593337893a6e78f56361ac029964e43a9b8c", "commitSpoonAstDiffStats": [{"spoonFilePath": "ServletHolderTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.ServletHolderTest.FakeServlet.init()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletHolderTest.testServletInitAtomic()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletHolderTest.FakeServlet", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "InitServletTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.InitServletTest", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "5bc6593337893a6e78f56361ac029964e43a9b8c tags/jetty-9.4.25.v20191220~25^2~3", "commitUser": "janbartel", "authoredDateTime": "2019-11-26 11:03:41", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 89, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/ServletHolderTest.java", "insertions": 89, "deletions": 0}, {"lines": 149, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/InitServletTest.java", "insertions": 0, "deletions": 149}], "commitDateTime": "2019-11-26 11:03:41", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4351 Lessen wait times.\n\nSigned-off-by: Jan Bartel <janb@webtide.com>\n", "commitParents": ["a6cdec548ceae6924c24882c0001c44cf2547aac"], "commitHash": "07efbb728d47b8030481cce317e299187a137333", "commitSpoonAstDiffStats": [{"spoonFilePath": "InitServletTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.InitServletTest.DemoServlet.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.InitServletTest.DemoServlet.init()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.InitServletTest.testServletInitialization()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "07efbb728d47b8030481cce317e299187a137333 tags/jetty-9.4.25.v20191220~25^2~1", "commitUser": "janbartel", "authoredDateTime": "2019-11-28 09:34:39", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 5, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/InitServletTest.java", "insertions": 3, "deletions": 2}], "commitDateTime": "2019-11-28 09:34:39", "spoonStatsSkippedReason": ""}], "title": "Servlet.service called before Servlet.init is finished when servlet is lazily initialized", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 5, "INS": 1, "UPD": 1, "MOV": 4, "TOT": 11, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 19, "insertions": 7, "gitFilesChange": 1, "deletions": 12}, "closed": "2019-12-03 01:52:08", "statsSkippedReason": "", "body": "**Jetty version**\r\n9.4.24\r\n**Java version**\r\njava version \"1.8.0_231\"\r\nJava(TM) SE Runtime Environment (build 1.8.0_231-b11)\r\nJava HotSpot(TM) 64-Bit Server VM (build 25.231-b11, mixed mode)\r\n**OS type/version**\r\nWindows Server 2016\r\n**Description**\r\nWhen a servlet is initialized, there is a small time window during which servlet.init is not yet complete, but servlet.service is already called. I don't know if this is a bug, or if this behavior is desirable. But in earlier versions this never happened. I have tried it with version 9.4.18. There Servlet.service is only called when Servlet.init is completed.\r\n\r\nHere is an example code to reproduce the issue. With the first request the servlet is initialized. If this takes some time, then the second request calls Servlet.doGet before Servlet.init is terminated. The output is then:\r\ndoGet, uri=/req2\r\ninit done\r\ndoGet, uri=/req1\r\n\r\n```\r\nimport java.io.IOException;\r\nimport javax.servlet.ServletException;\r\nimport javax.servlet.http.HttpServlet;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpServletResponse;\r\nimport javax.ws.rs.HttpMethod;\r\n\r\nimport org.eclipse.jetty.client.HttpClient;\r\nimport org.eclipse.jetty.server.Server;\r\nimport org.eclipse.jetty.server.ServerConnector;\r\nimport org.eclipse.jetty.server.handler.HandlerCollection;\r\nimport org.eclipse.jetty.servlet.ServletContextHandler;\r\nimport org.eclipse.jetty.servlet.ServletHolder;\r\n\r\npublic class JettyDemo {\r\n\r\n  public static class DemoServlet extends HttpServlet {\r\n    @Override\r\n    public void init() throws ServletException {\r\n      super.init();\r\n      sleep(10000);\r\n      System.out.println(\"init done\");\r\n    }\r\n\r\n    @Override\r\n    public void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\r\n      System.out.println(\"doGet, uri=\" + req.getRequestURI());\r\n    }\r\n  }\r\n\r\n  private static class Client extends Thread {\r\n    private final String mURI;\r\n\r\n    public Client(String uri) {\r\n      mURI = uri;\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n      try {\r\n        HttpClient client = new HttpClient();\r\n        client.start();\r\n        try {\r\n          client.newRequest(\"http://127.0.0.1/\" + mURI).method(HttpMethod.GET).send();\r\n        } finally {\r\n          client.stop();\r\n        }\r\n      } catch(Exception e) {\r\n        e.printStackTrace();\r\n      }\r\n    }\r\n  }\r\n\r\n  private static void sleep(long millis) {\r\n    try {\r\n      Thread.sleep(millis);\r\n    } catch(InterruptedException e) {\r\n      Thread.currentThread().interrupt();\r\n    }\r\n  }\r\n\r\n  public static void main(String[] args) throws Exception {\r\n    Server server = new Server();\r\n    HandlerCollection handlers = new HandlerCollection();\r\n    server.setHandler(handlers);\r\n    ServletContextHandler context = new ServletContextHandler(handlers, \"/\");\r\n    context.addServlet(new ServletHolder(DemoServlet.class), \"/*\");\r\n    ServerConnector serverConnector = new ServerConnector(server);\r\n    serverConnector.setHost(\"127.0.0.1\");\r\n    serverConnector.setPort(80);\r\n    server.addConnector(serverConnector);\r\n    server.start();\r\n    try {\r\n    new Client(\"req1\").start();\r\n    sleep(5000);\r\n    new Client(\"req2\").start();\r\n    sleep(6000);\r\n    } finally {\r\n      server.stop();\r\n    }\r\n  }\r\n\r\n}\r\n```\r\n\r\n\r\nLike I said, I don't know if that's a bug. But as a user I would find it very helpful if I could assume that all my resources initialized in Servlet.init are safely ready when Servlet.service is called and I don't have to synchronize them myself.", "changesInPackagesGIT": ["jetty-servlet/src/main/java/org/eclipse/jetty/servlet"], "changesInPackagesSPOON": ["org.eclipse.jetty.servlet.ServletHolder.getServlet()", "org.eclipse.jetty.servlet.ServletHolder.initJspServlet()"], "ttf": 10.000277777777777, "numCommits": 2, "url": "https://github.com/eclipse/jetty.project/issues/4351"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "gregw", "filteredCommits": ["15c9f0bfc2c5ff03ec84c16b90df028a09520c82", "09641c9581d82c43b8db94904c6a45fd1c2c4134", "4d1031899e34157d6f247c72700648f6430e7272"], "commits": {"15c9f0bfc2c5ff03ec84c16b90df028a09520c82": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "4d1031899e34157d6f247c72700648f6430e7272": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "09641c9581d82c43b8db94904c6a45fd1c2c4134": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "380cebc3bb5f0bb2ead54e5de816fe9a809e25d4": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2019-11-19 01:32:17", "commitsDetails": [{"commitMessage": "Issue #4329 - Cleaning up SessionDump\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["09641c9581d82c43b8db94904c6a45fd1c2c4134"], "commitHash": "15c9f0bfc2c5ff03ec84c16b90df028a09520c82", "commitSpoonAstDiffStats": [{"spoonFilePath": "SessionDump.java", "spoonMethods": [{"spoonMethodName": "com.acme.SessionDump.doPost(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "com.acme.SessionDump", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "com.acme.SessionDump.ObjectAttributeValue", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "com.acme.SessionDump.handleForm(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "com.acme.SessionDump.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 2, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 3}]}], "nameRev": "15c9f0bfc2c5ff03ec84c16b90df028a09520c82 tags/jetty-9.4.25.v20191220~26^2", "commitUser": "joakime", "authoredDateTime": "2019-11-27 05:51:39", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 17, "filePath": "tests/test-webapps/test-jetty-webapp/src/main/java/com/acme/SessionDump.java", "insertions": 7, "deletions": 10}], "commitDateTime": "2019-11-27 05:51:39", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4329 - New testcase for demo-base /test/session/\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["9ab6a073fa79125370ef29bd3aec95e05f9de26c"], "commitHash": "4d1031899e34157d6f247c72700648f6430e7272", "commitSpoonAstDiffStats": [{"spoonFilePath": "DemoBaseTests.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.tests.distribution.DemoBaseTests.testSessionDump()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "SessionDump.java", "spoonMethods": [{"spoonMethodName": "com.acme.SessionDump.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "4d1031899e34157d6f247c72700648f6430e7272 tags/jetty-9.4.25.v20191220~26^2~2", "commitUser": "joakime", "authoredDateTime": "2019-11-19 14:17:56", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 1, "filePath": "tests/test-webapps/test-jetty-webapp/src/main/java/com/acme/SessionDump.java", "insertions": 1, "deletions": 0}, {"lines": 40, "filePath": "tests/test-distribution/src/test/java/org/eclipse/jetty/tests/distribution/DemoBaseTests.java", "insertions": 40, "deletions": 0}], "commitDateTime": "2019-11-19 14:17:56", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4329 - Fixing RuleContainer to handle path parameters\n\n+ Introducing HttpURI.setParam(String)\n+ Updating DemoBaseTest.testSessionDump() to follow expected behavior\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["4d1031899e34157d6f247c72700648f6430e7272"], "commitHash": "09641c9581d82c43b8db94904c6a45fd1c2c4134", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpURI.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.HttpURI.setParam(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "RuleContainer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.rewrite.handler.RuleContainer.apply(java.lang.String,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 3, "UPD": 1, "MOV": 0, "TOT": 4}]}, {"spoonFilePath": "DemoBaseTests.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.tests.distribution.DemoBaseTests.testSessionDump()", "DEL": 0, "INS": 11, "UPD": 9, "MOV": 0, "TOT": 20}]}, {"spoonFilePath": "CookiePatternRuleTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.rewrite.handler.CookiePatternRuleTest.testUrlParameter()", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 2}]}], "nameRev": "09641c9581d82c43b8db94904c6a45fd1c2c4134 tags/jetty-9.4.25.v20191220~26^2~1", "commitUser": "joakime", "authoredDateTime": "2019-11-20 14:09:44", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 33, "filePath": "tests/test-distribution/src/test/java/org/eclipse/jetty/tests/distribution/DemoBaseTests.java", "insertions": 25, "deletions": 8}, {"lines": 4, "filePath": "jetty-rewrite/src/test/java/org/eclipse/jetty/rewrite/handler/CookiePatternRuleTest.java", "insertions": 0, "deletions": 4}, {"lines": 9, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/HttpURI.java", "insertions": 9, "deletions": 0}, {"lines": 15, "filePath": "jetty-rewrite/src/main/java/org/eclipse/jetty/rewrite/handler/RuleContainer.java", "insertions": 14, "deletions": 1}], "commitDateTime": "2019-11-20 14:09:44", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #4337 from eclipse/jetty-9.4.x-4329-rewrite-rules-demobase\n\nIssue #4329 - Fixing RuleContainer to handle path parameters", "commitParents": ["de3ff4726e5db7e64ffe538e48815623165d5b13", "15c9f0bfc2c5ff03ec84c16b90df028a09520c82"], "commitHash": "380cebc3bb5f0bb2ead54e5de816fe9a809e25d4", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpURI.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.HttpURI.setParam(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "RuleContainer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.rewrite.handler.RuleContainer.apply(java.lang.String,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 3, "UPD": 1, "MOV": 0, "TOT": 4}]}, {"spoonFilePath": "DemoBaseTests.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.tests.distribution.DemoBaseTests.testSessionDump()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "SessionDump.java", "spoonMethods": [{"spoonMethodName": "com.acme.SessionDump.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 2, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "com.acme.SessionDump", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "com.acme.SessionDump.ObjectAttributeValue", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "com.acme.SessionDump.handleForm(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "com.acme.SessionDump.doPost(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "CookiePatternRuleTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.rewrite.handler.CookiePatternRuleTest.testUrlParameter()", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 2}]}], "nameRev": "380cebc3bb5f0bb2ead54e5de816fe9a809e25d4 tags/jetty-9.4.25.v20191220~26", "commitUser": "joakime", "authoredDateTime": "2019-11-27 05:52:15", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 57, "filePath": "tests/test-distribution/src/test/java/org/eclipse/jetty/tests/distribution/DemoBaseTests.java", "insertions": 57, "deletions": 0}, {"lines": 16, "filePath": "tests/test-webapps/test-jetty-webapp/src/main/java/com/acme/SessionDump.java", "insertions": 7, "deletions": 9}, {"lines": 4, "filePath": "jetty-rewrite/src/test/java/org/eclipse/jetty/rewrite/handler/CookiePatternRuleTest.java", "insertions": 0, "deletions": 4}, {"lines": 9, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/HttpURI.java", "insertions": 9, "deletions": 0}, {"lines": 15, "filePath": "jetty-rewrite/src/main/java/org/eclipse/jetty/rewrite/handler/RuleContainer.java", "insertions": 14, "deletions": 1}], "commitDateTime": "2019-11-27 05:52:15", "spoonStatsSkippedReason": ""}], "title": "rewrite prevents URL session tracking.", "spoonStatsSummary": {"spoonMethodsChanged": 7, "DEL": 6, "INS": 6, "UPD": 2, "MOV": 0, "TOT": 14, "spoonFilesChanged": 3}, "gitStatsSummary": {"lines": 42, "insertions": 31, "gitFilesChange": 3, "deletions": 11}, "closed": "2019-11-27 11:52:16", "statsSkippedReason": "", "body": "**Jetty version**\r\n9.4.23\r\n**Java version**\r\nany\r\n**OS type/version**\r\nany\r\n**Description**\r\n\r\nThe rewrite rules as configured for the demo webapp in a jetty distribution remove URI parameters so that session tracking by URI does not work.\r\nIdeally rewrite should be able to be used without preventing URL session tracking.... even if it has to be a special rule to extract and remember the jsessionid somehow.\r\n\r\n", "changesInPackagesGIT": ["tests/test-webapps/test-jetty-webapp/src/main/java/com/acme", "jetty-http/src/main/java/org/eclipse/jetty/http", "jetty-rewrite/src/main/java/org/eclipse/jetty/rewrite/handler"], "changesInPackagesSPOON": ["com.acme.SessionDump.ObjectAttributeValue", "com.acme.SessionDump.handleForm(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "com.acme.SessionDump", "com.acme.SessionDump.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "org.eclipse.jetty.rewrite.handler.RuleContainer.apply(java.lang.String,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "com.acme.SessionDump.doPost(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "org.eclipse.jetty.http.HttpURI.setParam(java.lang.String)"], "ttf": 8.000277777777777, "numCommits": 3, "url": "https://github.com/eclipse/jetty.project/issues/4329"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug", "Specification"], "user": "johnshajiang", "filteredCommits": ["e7e7a30e11736bec148cd185ea6ec4f1796b1dd7"], "commits": {"e7e7a30e11736bec148cd185ea6ec4f1796b1dd7": {"commitUser": "sbordet", "commitGHEventType": "closed"}, "9e18e9e0ab1522a9a51dae5f6db887ed5b3af104": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2019-11-13 03:24:22", "commitsDetails": [{"commitMessage": "Fixes #4305 - Jetty server shall alert fatal no_application_protocol if no client application protocol is supported.\n\nNow catching any exception and returning null so JSSE returns the\nno_application_protocol to the client.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["4f6585562f436feec52cdd36ad1db6b57bc72a0f"], "commitHash": "e7e7a30e11736bec148cd185ea6ec4f1796b1dd7", "commitSpoonAstDiffStats": [{"spoonFilePath": "JDK9ALPNTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.alpn.java.server.JDK9ALPNTest.testClientSupportingALPNCannotNegotiateProtocol()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.alpn.java.server.JDK9ALPNTest.testClientSupportingALPNServerSpeaksNegotiatedProtocol().2.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 2, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.alpn.java.server.JDK9ALPNTest.dispose()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.alpn.java.server.JDK9ALPNTest.testClientNotSupportingALPNServerSpeaksDefaultProtocol().1.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 2, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 4}]}, {"spoonFilePath": "JDK9ServerALPNProcessor.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.alpn.java.server.JDK9ServerALPNProcessor.ALPNCallback.apply(javax.net.ssl.SSLEngine,java.util.List)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 3, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.alpn.java.server.JDK9ServerALPNProcessor.ALPNCallback", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "JDK9ClientALPNProcessor.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.alpn.java.client.JDK9ClientALPNProcessor.configure(javax.net.ssl.SSLEngine,org.eclipse.jetty.io.Connection)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.alpn.java.client.JDK9ClientALPNProcessor.ALPNListener", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "e7e7a30e11736bec148cd185ea6ec4f1796b1dd7 tags/jetty-9.4.23.v20191118~24^2", "commitUser": "sbordet", "authoredDateTime": "2019-11-13 10:28:51", "commitGHEventType": "closed", "commitGitStats": [{"lines": 4, "filePath": "jetty-alpn/jetty-alpn-java-client/src/main/java/org/eclipse/jetty/alpn/java/client/JDK9ClientALPNProcessor.java", "insertions": 2, "deletions": 2}, {"lines": 19, "filePath": "jetty-alpn/jetty-alpn-java-server/src/main/java/org/eclipse/jetty/alpn/java/server/JDK9ServerALPNProcessor.java", "insertions": 14, "deletions": 5}, {"lines": 76, "filePath": "jetty-alpn/jetty-alpn-java-server/src/test/java/org/eclipse/jetty/alpn/java/server/JDK9ALPNTest.java", "insertions": 72, "deletions": 4}], "commitDateTime": "2019-11-13 10:28:51", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #4309 from eclipse/jetty-9.4.x-4305-no_application_protocol\n\nFixes #4305 - Jetty server shall alert fatal no_application_protocol \u2026", "commitParents": ["e3f31a86a2f91f93f3ef1ea6eb19aea3e6f1730f", "e7e7a30e11736bec148cd185ea6ec4f1796b1dd7"], "commitHash": "9e18e9e0ab1522a9a51dae5f6db887ed5b3af104", "commitSpoonAstDiffStats": [{"spoonFilePath": "JDK9ALPNTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.alpn.java.server.JDK9ALPNTest.testClientSupportingALPNCannotNegotiateProtocol()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.alpn.java.server.JDK9ALPNTest.testClientSupportingALPNServerSpeaksNegotiatedProtocol().2.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 2, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.alpn.java.server.JDK9ALPNTest.dispose()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.alpn.java.server.JDK9ALPNTest.testClientNotSupportingALPNServerSpeaksDefaultProtocol().1.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 2, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 4}]}, {"spoonFilePath": "JDK9ServerALPNProcessor.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.alpn.java.server.JDK9ServerALPNProcessor.ALPNCallback.apply(javax.net.ssl.SSLEngine,java.util.List)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 3, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.alpn.java.server.JDK9ServerALPNProcessor.ALPNCallback", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "JDK9ClientALPNProcessor.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.alpn.java.client.JDK9ClientALPNProcessor.configure(javax.net.ssl.SSLEngine,org.eclipse.jetty.io.Connection)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.alpn.java.client.JDK9ClientALPNProcessor.ALPNListener", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "9e18e9e0ab1522a9a51dae5f6db887ed5b3af104 tags/jetty-9.4.23.v20191118~24", "commitUser": "sbordet", "authoredDateTime": "2019-11-13 18:58:49", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 4, "filePath": "jetty-alpn/jetty-alpn-java-client/src/main/java/org/eclipse/jetty/alpn/java/client/JDK9ClientALPNProcessor.java", "insertions": 2, "deletions": 2}, {"lines": 19, "filePath": "jetty-alpn/jetty-alpn-java-server/src/main/java/org/eclipse/jetty/alpn/java/server/JDK9ServerALPNProcessor.java", "insertions": 14, "deletions": 5}, {"lines": 76, "filePath": "jetty-alpn/jetty-alpn-java-server/src/test/java/org/eclipse/jetty/alpn/java/server/JDK9ALPNTest.java", "insertions": 72, "deletions": 4}], "commitDateTime": "2019-11-13 18:58:49", "spoonStatsSkippedReason": ""}], "title": "Jetty server ALPN shall alert fatal no_application_protocol if no client application protocol is supported", "spoonStatsSummary": {"spoonMethodsChanged": 4, "DEL": 1, "INS": 4, "UPD": 0, "MOV": 3, "TOT": 8, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 23, "insertions": 16, "gitFilesChange": 2, "deletions": 7}, "closed": "2019-11-13 15:58:51", "statsSkippedReason": "", "body": "Using Jetty 9.4.22.\r\n\r\nJetty server supports application protocols h2 and http/1.1 only.\r\nopenssl s_client -CAfile ca -alpn h3 -connect host:port\r\n\r\nIn this case, Jetty server alerts warning user_canceled.\r\nBut according to RFC 7301 section 3.2, the server shall alert fatal no_application_protocol.", "changesInPackagesGIT": ["jetty-alpn/jetty-alpn-java-client/src/main/java/org/eclipse/jetty/alpn/java", "jetty-alpn/jetty-alpn-java-server/src/main/java/org/eclipse/jetty/alpn/java"], "changesInPackagesSPOON": ["org.eclipse.jetty.alpn.java.server.JDK9ServerALPNProcessor.ALPNCallback.apply(javax.net.ssl.SSLEngine,java.util.List)", "org.eclipse.jetty.alpn.java.server.JDK9ServerALPNProcessor.ALPNCallback", "org.eclipse.jetty.alpn.java.client.JDK9ClientALPNProcessor.configure(javax.net.ssl.SSLEngine,org.eclipse.jetty.io.Connection)", "org.eclipse.jetty.alpn.java.client.JDK9ClientALPNProcessor.ALPNListener"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/4305"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "gluxhappy", "filteredCommits": ["2d50c9297908730a7f5a7db3c226bf357e921108"], "commits": {"9c9e842cd7ec5922c6c9e7c2cec2b575d39ccea1": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "2d50c9297908730a7f5a7db3c226bf357e921108": {"commitUser": "joakime", "commitGHEventType": "closed"}}, "created": "2019-11-12 09:35:53", "commitsDetails": [{"commitMessage": "Merge pull request #4300 from eclipse/jetty-9.4.x-4296-websocketclient-double-decode\n\nFixes #4296 - WebSocketClient cannot connect with \"%25\" in query", "commitParents": ["9e18e9e0ab1522a9a51dae5f6db887ed5b3af104", "2d50c9297908730a7f5a7db3c226bf357e921108"], "commitHash": "9c9e842cd7ec5922c6c9e7c2cec2b575d39ccea1", "commitSpoonAstDiffStats": [{"spoonFilePath": "ClientConnectTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.tests.client.ClientConnectTest.testUpgradeRequest_PercentEncodedQuery()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ClientUpgradeRequest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.client.ClientUpgradeRequest.setRequestURI(java.net.URI)", "DEL": 1, "INS": 0, "UPD": 3, "MOV": 1, "TOT": 5}]}], "nameRev": "9c9e842cd7ec5922c6c9e7c2cec2b575d39ccea1 tags/jetty-9.4.23.v20191118~23", "commitUser": "joakime", "authoredDateTime": "2019-11-13 10:54:07", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 23, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/ClientConnectTest.java", "insertions": 23, "deletions": 0}, {"lines": 8, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/ClientUpgradeRequest.java", "insertions": 4, "deletions": 4}], "commitDateTime": "2019-11-13 10:54:07", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #4296 - WebSocketClient cannot connect with \"%25\" in query\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["4825832a539efdb848e479d1ace4f234da7460e0"], "commitHash": "2d50c9297908730a7f5a7db3c226bf357e921108", "commitSpoonAstDiffStats": [{"spoonFilePath": "ClientConnectTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.tests.client.ClientConnectTest.testUpgradeRequest_PercentEncodedQuery()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ClientUpgradeRequest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.client.ClientUpgradeRequest.setRequestURI(java.net.URI)", "DEL": 1, "INS": 0, "UPD": 3, "MOV": 1, "TOT": 5}]}], "nameRev": "2d50c9297908730a7f5a7db3c226bf357e921108 tags/jetty-9.4.23.v20191118~23^2", "commitUser": "joakime", "authoredDateTime": "2019-11-12 10:22:19", "commitGHEventType": "closed", "commitGitStats": [{"lines": 23, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/ClientConnectTest.java", "insertions": 23, "deletions": 0}, {"lines": 8, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/ClientUpgradeRequest.java", "insertions": 4, "deletions": 4}], "commitDateTime": "2019-11-12 10:22:19", "spoonStatsSkippedReason": ""}], "title": "Unable to create WebSocket connect if the query string of the URL has % symbol.", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 1, "INS": 0, "UPD": 3, "MOV": 1, "TOT": 5, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 8, "insertions": 4, "gitFilesChange": 1, "deletions": 4}, "closed": "2019-11-13 16:54:11", "statsSkippedReason": "", "body": "Unable to create WebSocket connect if the query string of the URL has % symbol.\r\n\r\nhttps://github.com/eclipse/jetty.project/blob/4f98bf0f2e79c0f28afce52291aa059ca4f660cd/jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/ClientUpgradeRequest.java#L160\r\n\r\nResult of ```uri.getQuery()```  is a string decoded already. Invocation of ```UrlEncoded.decodeTo()``` causes it decoded twice.  When there is a % symbol (escape char for URL encoding), you will get the wrong result or an exception. \r\n\r\nDoc of ```URI.getQuery()```, already decoded.\r\nhttps://docs.oracle.com/javase/7/docs/api/java/net/URI.html#getQuery() \r\n```java\r\npublic String getQuery() {\r\n    if ((decodedQuery == null) && (query != null))\r\n        decodedQuery = decode(query);\r\n    return decodedQuery;\r\n}\r\n```", "changesInPackagesGIT": ["jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client"], "changesInPackagesSPOON": ["org.eclipse.jetty.websocket.client.ClientUpgradeRequest.setRequestURI(java.net.URI)"], "ttf": 1.0002777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/4296"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "jspechts", "filteredCommits": [], "commits": {"5d1901d76cb2f790b160dcb87086e5b6d7b99643": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "24df8c59a3fb24a235b8bd015e7f9b3414f89136": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2019-11-07 00:44:20", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "5d1901d76cb2f790b160dcb87086e5b6d7b99643", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4279 Writer close deadlock (#4288)\n\nDo not close the actual writer from closed.\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>", "commitParents": ["fe4b9cf366194e8b34ab54df8c31974bc9a582c2"], "commitHash": "24df8c59a3fb24a235b8bd015e7f9b3414f89136", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpOutput.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpOutput.closed()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}]}], "nameRev": "24df8c59a3fb24a235b8bd015e7f9b3414f89136 tags/jetty-9.4.23.v20191118~27", "commitUser": "gregw", "authoredDateTime": "2019-11-13 11:03:17", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 17, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpOutput.java", "insertions": 1, "deletions": 16}], "commitDateTime": "2019-11-13 11:03:17", "spoonStatsSkippedReason": ""}], "title": "Regression: ResponseWriter#close blocks indefinitely", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2019-11-13 00:12:13", "statsSkippedReason": "", "body": "We recently tried upgrading from 9.4.8.v20180619 to 9.4.22.v20191022 but we started noticing that our jetty server slowed to a crawl when running an internal automation test suite.\r\n\r\nWe started downgrading jetty server versions and determined that the issue happens on version 9.4.21.v20190926 and greater.\r\n\r\nAttached below is a thread dump and jetty server dump captured after replicating the issue. Any guidance as to how we can further troubleshoot this issue would be appreciated.\r\n\r\n[thread-dump-11-6-19.txt](https://github.com/eclipse/jetty.project/files/3817350/thread-dump-11-6-19.txt)\r\n[jetty-server-dump-11-6-19.txt](https://github.com/eclipse/jetty.project/files/3817351/jetty-server-dump-11-6-19.txt)\r\n\r\n", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 5.000277777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/4279"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "ralf-g", "filteredCommits": ["ff7adab55a51ed44e24186e01e9c1835060c00fd", "c0866ebeae11360312f80049ea9af85c4b5242d7"], "commits": {"d99ae19201f2be73b4082e2edf13dc2d8142533d": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "c0866ebeae11360312f80049ea9af85c4b5242d7": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "ff7adab55a51ed44e24186e01e9c1835060c00fd": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2019-11-05 14:03:41", "commitsDetails": [{"commitMessage": "Merge pull request #4290 from eclipse/jetty-9.4.x-4269-restore-PrintWriter-contract\n\nIssue #4269 - Restoring PrintWriter contract on errors", "commitParents": ["c9a65c4676dfac7f4eedf61d93ed3925e73b0bf9", "ff7adab55a51ed44e24186e01e9c1835060c00fd"], "commitHash": "d99ae19201f2be73b4082e2edf13dc2d8142533d", "commitSpoonAstDiffStats": [{"spoonFilePath": "ResponseTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ResponseTest.testWriteRuntimeIOException()", "DEL": 0, "INS": 0, "UPD": 4, "MOV": 1, "TOT": 5}]}, {"spoonFilePath": "ResponseWriter.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ResponseWriter.isOpen()", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 2, "TOT": 5}]}], "nameRev": "d99ae19201f2be73b4082e2edf13dc2d8142533d tags/jetty-9.4.25.v20191220~23", "commitUser": "joakime", "authoredDateTime": "2019-12-02 15:22:22", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 7, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ResponseTest.java", "insertions": 3, "deletions": 4}, {"lines": 7, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/ResponseWriter.java", "insertions": 5, "deletions": 2}], "commitDateTime": "2019-12-02 15:22:22", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4269 - Restoring PrintWriter contract on errors\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["b119a8f59f064877cb54cc11efe8e9320431994b"], "commitHash": "c0866ebeae11360312f80049ea9af85c4b5242d7", "commitSpoonAstDiffStats": [{"spoonFilePath": "ResponseWriter.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ResponseWriter.isOpen()", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 2, "TOT": 5}]}], "nameRev": "c0866ebeae11360312f80049ea9af85c4b5242d7 tags/jetty-9.4.25.v20191220~23^2~1", "commitUser": "joakime", "authoredDateTime": "2019-11-07 15:59:13", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 7, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/ResponseWriter.java", "insertions": 5, "deletions": 2}], "commitDateTime": "2019-11-07 15:59:13", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4269 - Correcting PrintWriter test\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["c0866ebeae11360312f80049ea9af85c4b5242d7"], "commitHash": "ff7adab55a51ed44e24186e01e9c1835060c00fd", "commitSpoonAstDiffStats": [{"spoonFilePath": "ResponseTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ResponseTest.testWriteRuntimeIOException()", "DEL": 0, "INS": 0, "UPD": 4, "MOV": 1, "TOT": 5}]}], "nameRev": "ff7adab55a51ed44e24186e01e9c1835060c00fd tags/jetty-9.4.25.v20191220~23^2", "commitUser": "joakime", "authoredDateTime": "2019-11-13 14:47:53", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 7, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ResponseTest.java", "insertions": 3, "deletions": 4}], "commitDateTime": "2019-11-13 14:47:53", "spoonStatsSkippedReason": ""}], "title": "ResponseWriter should not throw RuntimeIOExceptions", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 1, "INS": 2, "UPD": 0, "MOV": 2, "TOT": 5, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 7, "insertions": 5, "gitFilesChange": 1, "deletions": 2}, "closed": "2019-12-02 21:22:53", "statsSkippedReason": "", "body": "The ResponseWriter returned by ServletResponse.getWriter() violates the contract of the PrintWriter API:\r\n> Methods in this class never throw I/O exceptions, ...  The client may inquire as to whether any errors have occurred by invoking checkError().\r\n\r\nOf course, ResponseWriter doesn't throw (checked) IOExceptions directly, but wraps them as unchecked RuntimeIOExceptions as soon as the application tries to write additional data. This seems to assume, that the application will use checkError() after every invocation of \"write(), \"print\", or \"append()\" -- which is usually not the case. As a result applications have to add try/catch statements in order to deal with the unexpected RuntimeIOExceptions. Without such changes, ugly stacktraces are logged each time a user closes the browser during the processing of a request. Or in other words, an applicaton which runs \"silently\" in another servlet containers (i.e. Tomcat) must be changed for Jetty.\r\n\r\nI understand the wish to \"fail fast\", but applications can do that by using the output stream (perhaps wraped by a \"Writer\"). If the application chooses to use a PrintWriter, then it should get a PrintWriter which behaves like a PrintWriter: I/O Errors have to be queried by \"checkError().\r\n\r\n", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.ResponseWriter.isOpen()"], "ttf": 27.00027777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/4269"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 2, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "sbordet", "filteredCommits": ["f675a87623d26dbafe412dd5a11e3cad7aac62a9"], "commits": {"f675a87623d26dbafe412dd5a11e3cad7aac62a9": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "f8449868e654cf998bb60aed6842db9b9128e002": {"commitUser": "sbordet", "commitGHEventType": "closed"}, "c8d98459c08c95c4c78011028b26c80599d29b01": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "ba1724ae3403dc987a14945427ff395db0462ace": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2019-10-30 22:08:39", "commitsDetails": [{"commitMessage": "Fixes #4258 - RateControl should be per-connection.\n\nUpdates after review.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["f8449868e654cf998bb60aed6842db9b9128e002"], "commitHash": "f675a87623d26dbafe412dd5a11e3cad7aac62a9", "commitSpoonAstDiffStats": [{"spoonFilePath": "WindowRateControl.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.parser.WindowRateControl.Factory.newRateControl(org.eclipse.jetty.io.EndPoint)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "RateControl.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.parser.newRateControl(org.eclipse.jetty.io.EndPoint)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AbstractHTTP2ServerConnectionFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.server.AbstractHTTP2ServerConnectionFactory.newConnection(org.eclipse.jetty.server.Connector,org.eclipse.jetty.io.EndPoint)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "f675a87623d26dbafe412dd5a11e3cad7aac62a9 tags/jetty-9.4.23.v20191118~19^2~1", "commitUser": "sbordet", "authoredDateTime": "2019-11-05 23:55:38", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 4, "filePath": "jetty-http2/http2-common/src/main/java/org/eclipse/jetty/http2/parser/WindowRateControl.java", "insertions": 3, "deletions": 1}, {"lines": 2, "filePath": "jetty-http2/http2-server/src/main/java/org/eclipse/jetty/http2/server/AbstractHTTP2ServerConnectionFactory.java", "insertions": 1, "deletions": 1}, {"lines": 7, "filePath": "jetty-http2/http2-common/src/main/java/org/eclipse/jetty/http2/parser/RateControl.java", "insertions": 5, "deletions": 2}], "commitDateTime": "2019-11-05 23:55:38", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #4258 - RateControl should be per-connection.\n\nIntroduced RateControl.Factory to create instances of RateControl\nfor each connection.\nModified relevant XML files and added distribution test for h2.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["e09444eeb52c3454c4b78cd27ec47187fc44700e"], "commitHash": "f8449868e654cf998bb60aed6842db9b9128e002", "commitSpoonAstDiffStats": [{"spoonFilePath": "WindowRateControl.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.parser.WindowRateControl.Factory", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "RateControl.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.parser", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "DistributionTests.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.tests.distribution.DistributionTests.testSimpleWebAppWithJSPOverH2()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.tests.distribution.DistributionTests.testSimpleWebAppWithJSPOverH2C()", "DEL": 1, "INS": 1, "UPD": 4, "MOV": 5, "TOT": 11}, {"spoonMethodName": "org.eclipse.jetty.tests.distribution.DistributionTests.testSimpleWebAppWithJSPOverHTTP2(boolean)", "DEL": 0, "INS": 5, "UPD": 0, "MOV": 0, "TOT": 5}]}, {"spoonFilePath": "AbstractHTTP2ServerConnectionFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.server.AbstractHTTP2ServerConnectionFactory.setRateControl(org.eclipse.jetty.http2.parser.RateControl)", "DEL": 1, "INS": 1, "UPD": 2, "MOV": 2, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.http2.server.AbstractHTTP2ServerConnectionFactory.getRateControl()", "DEL": 0, "INS": 1, "UPD": 3, "MOV": 1, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.http2.server.AbstractHTTP2ServerConnectionFactory.newConnection(org.eclipse.jetty.server.Connector,org.eclipse.jetty.io.EndPoint)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.http2.server.AbstractHTTP2ServerConnectionFactory.setRateControlFactory(org.eclipse.jetty.http2.parser.RateControl$Factory)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.server.AbstractHTTP2ServerConnectionFactory", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 0, "TOT": 3}]}], "nameRev": "f8449868e654cf998bb60aed6842db9b9128e002 tags/jetty-9.4.23.v20191118~19^2~2", "commitUser": "sbordet", "authoredDateTime": "2019-11-05 18:40:27", "commitGHEventType": "closed", "commitGitStats": [{"lines": 16, "filePath": "jetty-http2/http2-common/src/main/java/org/eclipse/jetty/http2/parser/WindowRateControl.java", "insertions": 16, "deletions": 0}, {"lines": 38, "filePath": "jetty-http2/http2-server/src/main/java/org/eclipse/jetty/http2/server/AbstractHTTP2ServerConnectionFactory.java", "insertions": 33, "deletions": 5}, {"lines": 14, "filePath": "jetty-http2/http2-common/src/main/java/org/eclipse/jetty/http2/parser/RateControl.java", "insertions": 14, "deletions": 0}, {"lines": 22, "filePath": "tests/test-distribution/src/test/java/org/eclipse/jetty/tests/distribution/DistributionTests.java", "insertions": 18, "deletions": 4}, {"lines": 10, "filePath": "jetty-http2/http2-server/src/main/config/etc/jetty-http2.xml", "insertions": 5, "deletions": 5}, {"lines": 10, "filePath": "jetty-http2/http2-server/src/main/config/etc/jetty-http2c.xml", "insertions": 5, "deletions": 5}], "commitDateTime": "2019-11-05 18:40:27", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #4270 from eclipse/jetty-9.4.x-4258-ratecontrol_per_connection\n\nFixes #4258 - RateControl should be per-connection.", "commitParents": ["a44a46f3f199bc8f5e09ae682e8ae4d325c151f7", "ba1724ae3403dc987a14945427ff395db0462ace"], "commitHash": "c8d98459c08c95c4c78011028b26c80599d29b01", "commitSpoonAstDiffStats": [{"spoonFilePath": "WindowRateControl.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.parser.WindowRateControl.Factory", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.parser.WindowRateControl.getEventsPerSecond()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.parser.WindowRateControl", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "RateControl.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.parser", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "DistributionTests.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.tests.distribution.DistributionTests.testSimpleWebAppWithJSPOverH2()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.tests.distribution.DistributionTests.testSimpleWebAppWithJSPOverH2C()", "DEL": 1, "INS": 1, "UPD": 4, "MOV": 5, "TOT": 11}, {"spoonMethodName": "org.eclipse.jetty.tests.distribution.DistributionTests.testSimpleWebAppWithJSPOverHTTP2(boolean)", "DEL": 0, "INS": 5, "UPD": 0, "MOV": 0, "TOT": 5}]}, {"spoonFilePath": "AbstractHTTP2ServerConnectionFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.server.AbstractHTTP2ServerConnectionFactory.setRateControl(org.eclipse.jetty.http2.parser.RateControl)", "DEL": 1, "INS": 1, "UPD": 2, "MOV": 1, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.http2.server.AbstractHTTP2ServerConnectionFactory.getRateControl()", "DEL": 0, "INS": 1, "UPD": 3, "MOV": 1, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.http2.server.AbstractHTTP2ServerConnectionFactory.newConnection(org.eclipse.jetty.server.Connector,org.eclipse.jetty.io.EndPoint)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.http2.server.AbstractHTTP2ServerConnectionFactory.setRateControlFactory(org.eclipse.jetty.http2.parser.RateControl$Factory)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.server.AbstractHTTP2ServerConnectionFactory", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 0, "TOT": 3}]}], "nameRev": "c8d98459c08c95c4c78011028b26c80599d29b01 tags/jetty-9.4.23.v20191118~19", "commitUser": "sbordet", "authoredDateTime": "2019-11-14 01:20:05", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 33, "filePath": "jetty-http2/http2-common/src/main/java/org/eclipse/jetty/http2/parser/WindowRateControl.java", "insertions": 33, "deletions": 0}, {"lines": 42, "filePath": "jetty-http2/http2-server/src/main/java/org/eclipse/jetty/http2/server/AbstractHTTP2ServerConnectionFactory.java", "insertions": 37, "deletions": 5}, {"lines": 17, "filePath": "jetty-http2/http2-common/src/main/java/org/eclipse/jetty/http2/parser/RateControl.java", "insertions": 17, "deletions": 0}, {"lines": 22, "filePath": "tests/test-distribution/src/test/java/org/eclipse/jetty/tests/distribution/DistributionTests.java", "insertions": 18, "deletions": 4}, {"lines": 10, "filePath": "jetty-http2/http2-server/src/main/config/etc/jetty-http2.xml", "insertions": 5, "deletions": 5}, {"lines": 10, "filePath": "jetty-http2/http2-server/src/main/config/etc/jetty-http2c.xml", "insertions": 5, "deletions": 5}], "commitDateTime": "2019-11-14 01:20:05", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #4258 - RateControl should be per-connection.\n\nUpdates after review.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["f675a87623d26dbafe412dd5a11e3cad7aac62a9"], "commitHash": "ba1724ae3403dc987a14945427ff395db0462ace", "commitSpoonAstDiffStats": [{"spoonFilePath": "WindowRateControl.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.parser.WindowRateControl.getEventsPerSecond()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.parser.WindowRateControl", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AbstractHTTP2ServerConnectionFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.server.AbstractHTTP2ServerConnectionFactory.setRateControl(org.eclipse.jetty.http2.parser.RateControl)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}], "nameRev": "ba1724ae3403dc987a14945427ff395db0462ace tags/jetty-9.4.23.v20191118~19^2", "commitUser": "sbordet", "authoredDateTime": "2019-11-12 17:46:19", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 15, "filePath": "jetty-http2/http2-common/src/main/java/org/eclipse/jetty/http2/parser/WindowRateControl.java", "insertions": 15, "deletions": 0}, {"lines": 10, "filePath": "jetty-http2/http2-server/src/main/java/org/eclipse/jetty/http2/server/AbstractHTTP2ServerConnectionFactory.java", "insertions": 7, "deletions": 3}], "commitDateTime": "2019-11-12 17:46:19", "spoonStatsSkippedReason": ""}], "title": "RateControl should be per-connection", "spoonStatsSummary": {"spoonMethodsChanged": 3, "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3, "spoonFilesChanged": 3}, "gitStatsSummary": {"lines": 13, "insertions": 9, "gitFilesChange": 3, "deletions": 4}, "closed": "2019-11-13 22:20:07", "statsSkippedReason": "", "body": "Somehow `RateControl` slipped to be a single object in the connection factory, rather than per-connection.", "changesInPackagesGIT": ["jetty-http2/http2-common/src/main/java/org/eclipse/jetty/http2/parser", "jetty-http2/http2-server/src/main/java/org/eclipse/jetty/http2/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.http2.parser.newRateControl(org.eclipse.jetty.io.EndPoint)", "org.eclipse.jetty.http2.parser.WindowRateControl.Factory.newRateControl(org.eclipse.jetty.io.EndPoint)", "org.eclipse.jetty.http2.server.AbstractHTTP2ServerConnectionFactory.newConnection(org.eclipse.jetty.server.Connector,org.eclipse.jetty.io.EndPoint)"], "ttf": 14.000277777777777, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/4258"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "byteit101", "filteredCommits": ["544ad0a28a26d19f17030410a8ebfca115aee5d4", "6a6206d8e4ff3f4abfa14c24b16267722b063c97", "5479ed030f753d7f2e494da73c087970aca2f06b"], "commits": {"5479ed030f753d7f2e494da73c087970aca2f06b": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "544ad0a28a26d19f17030410a8ebfca115aee5d4": {"commitUser": "joakime", "commitGHEventType": "closed"}, "6a6206d8e4ff3f4abfa14c24b16267722b063c97": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "c44e7c5eb1a3d3a765ef716203e1d2df442cba22": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2019-10-28 21:44:50", "commitsDetails": [{"commitMessage": "Issue #4248 - Using ServletUpgradeResponse.setSuccess(true) for servlet side\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["6a6206d8e4ff3f4abfa14c24b16267722b063c97"], "commitHash": "5479ed030f753d7f2e494da73c087970aca2f06b", "commitSpoonAstDiffStats": [{"spoonFilePath": "WebSocketServerFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketServerFactory.upgrade(org.eclipse.jetty.server.HttpConnection,org.eclipse.jetty.websocket.servlet.ServletUpgradeRequest,org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse,org.eclipse.jetty.websocket.common.events.EventDriver)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "5479ed030f753d7f2e494da73c087970aca2f06b tags/jetty-9.4.23.v20191118~14^2", "commitUser": "joakime", "authoredDateTime": "2019-11-13 15:33:00", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/WebSocketServerFactory.java", "insertions": 2, "deletions": 0}], "commitDateTime": "2019-11-13 15:33:00", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #4248 - WebSocketClient UpgradeResponse.isSuccess never set true\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["4825832a539efdb848e479d1ace4f234da7460e0"], "commitHash": "544ad0a28a26d19f17030410a8ebfca115aee5d4", "commitSpoonAstDiffStats": [{"spoonFilePath": "WebSocketUpgradeRequest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketUpgradeRequest.upgrade(org.eclipse.jetty.client.HttpResponse,org.eclipse.jetty.client.http.HttpConnectionOverHTTP)", "DEL": 1, "INS": 3, "UPD": 0, "MOV": 1, "TOT": 5}]}, {"spoonFilePath": "ClientUpgradeResponse.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.client.ClientUpgradeResponse.isSuccess()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "CookieTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.client.CookieTest.confirmClientUpgradeAndCookies(org.eclipse.jetty.websocket.client.CookieTest$CookieTrackingSocket,java.util.concurrent.Future,org.eclipse.jetty.websocket.common.test.BlockheadConnection)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 1, "TOT": 3}]}], "nameRev": "544ad0a28a26d19f17030410a8ebfca115aee5d4 tags/jetty-9.4.23.v20191118~14^2~2", "commitUser": "joakime", "authoredDateTime": "2019-11-12 10:14:51", "commitGHEventType": "closed", "commitGitStats": [{"lines": 7, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/ClientUpgradeResponse.java", "insertions": 7, "deletions": 0}, {"lines": 3, "filePath": "jetty-websocket/websocket-client/src/test/java/org/eclipse/jetty/websocket/client/CookieTest.java", "insertions": 2, "deletions": 1}, {"lines": 6, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/WebSocketUpgradeRequest.java", "insertions": 4, "deletions": 2}], "commitDateTime": "2019-11-12 10:14:51", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4248 - Deprecating UpgradeResponse setSuccess / isSuccess\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["544ad0a28a26d19f17030410a8ebfca115aee5d4"], "commitHash": "6a6206d8e4ff3f4abfa14c24b16267722b063c97", "commitSpoonAstDiffStats": [{"spoonFilePath": "UpgradeResponse.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.api.isSuccess()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.api.setSuccess(boolean)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "6a6206d8e4ff3f4abfa14c24b16267722b063c97 tags/jetty-9.4.23.v20191118~14^2~1", "commitUser": "joakime", "authoredDateTime": "2019-11-13 15:32:23", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 4, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/UpgradeResponse.java", "insertions": 4, "deletions": 0}], "commitDateTime": "2019-11-13 15:32:23", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #4299 from eclipse/jetty-9.4.x-4248-websocketclient-success-flag\n\nFixes #4248 - WebSocketClient UpgradeResponse.isSuccess never set true", "commitParents": ["0d0b3461406763fd49c82e224488c2828ec4ffaf", "5479ed030f753d7f2e494da73c087970aca2f06b"], "commitHash": "c44e7c5eb1a3d3a765ef716203e1d2df442cba22", "commitSpoonAstDiffStats": [{"spoonFilePath": "WebSocketUpgradeRequest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketUpgradeRequest.upgrade(org.eclipse.jetty.client.HttpResponse,org.eclipse.jetty.client.http.HttpConnectionOverHTTP)", "DEL": 1, "INS": 3, "UPD": 0, "MOV": 1, "TOT": 5}]}, {"spoonFilePath": "ClientUpgradeResponse.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.client.ClientUpgradeResponse.isSuccess()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "CookieTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.client.CookieTest.confirmClientUpgradeAndCookies(org.eclipse.jetty.websocket.client.CookieTest$CookieTrackingSocket,java.util.concurrent.Future,org.eclipse.jetty.websocket.common.test.BlockheadConnection)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 1, "TOT": 3}]}, {"spoonFilePath": "WebSocketServerFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketServerFactory.upgrade(org.eclipse.jetty.server.HttpConnection,org.eclipse.jetty.websocket.servlet.ServletUpgradeRequest,org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse,org.eclipse.jetty.websocket.common.events.EventDriver)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "UpgradeResponse.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.api.isSuccess()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.api.setSuccess(boolean)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "c44e7c5eb1a3d3a765ef716203e1d2df442cba22 tags/jetty-9.4.23.v20191118~14", "commitUser": "joakime", "authoredDateTime": "2019-11-14 09:42:45", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/WebSocketServerFactory.java", "insertions": 2, "deletions": 0}, {"lines": 7, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/ClientUpgradeResponse.java", "insertions": 7, "deletions": 0}, {"lines": 3, "filePath": "jetty-websocket/websocket-client/src/test/java/org/eclipse/jetty/websocket/client/CookieTest.java", "insertions": 2, "deletions": 1}, {"lines": 4, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/UpgradeResponse.java", "insertions": 4, "deletions": 0}, {"lines": 6, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/WebSocketUpgradeRequest.java", "insertions": 4, "deletions": 2}], "commitDateTime": "2019-11-14 09:42:45", "spoonStatsSkippedReason": ""}], "title": "Websocket client UpgradeListener never reports success", "spoonStatsSummary": {"spoonMethodsChanged": 5, "DEL": 1, "INS": 7, "UPD": 0, "MOV": 1, "TOT": 9, "spoonFilesChanged": 4}, "gitStatsSummary": {"lines": 19, "insertions": 17, "gitFilesChange": 4, "deletions": 2}, "closed": "2019-11-14 15:42:49", "statsSkippedReason": "", "body": "While upgrading from jetty 9.3.x to 9.4.x, I ran across this regression. With the given code below, the `UpgradeResponse` from the `UpgradeListener` never reports success in 9.4, whereas it was successful in 9.3. I confirmed that the on-the-wire websocket was valid and correctly sending & receiving, and from the output you can see the messages are received. Only the `isSuccess` method is incorrect.\r\n\r\n### Expected output\r\n```txt\r\nSuccess is true\r\nGot connect: WebSocketSession[...snip]\r\nGot msg: Hello\r\nGot msg: Thanks for the conversation.\r\nConnection closed: 1000 - I'm done\r\n```\r\n\r\n### Actual output (9.3.27.v20190418 & 9.4.0.RC2)\r\n```txt\r\nSuccess is true\r\nGot connect: WebSocketSession[...snip]\r\nGot msg: Hello\r\nGot msg: Thanks for the conversation.\r\nConnection closed: 1000 - I'm done\r\n```\r\n\r\n### Actual output (9.4.21.v20190926 & 9.4.0.RC3)\r\n```txt\r\nInvalid Behavior: Success is false\r\nGot connect: WebSocketSession[...snip]\r\nGot msg: Hello\r\nGot msg: Thanks for the conversation.\r\nConnection closed: 1000 - I'm done\r\n```\r\n\r\n### Code\r\n```xml\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\r\n\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n\txsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\r\n\t<modelVersion>4.0.0</modelVersion>\r\n\t<groupId>com.example</groupId>\r\n\t<artifactId>failure</artifactId>\r\n\t<name>Example</name>\r\n\t<version>0.0.1-SNAPSHOT</version>\r\n\t<dependencies>\r\n\t\t<dependency>\r\n\t\t\t<groupId>org.eclipse.jetty.aggregate</groupId>\r\n\t\t\t<artifactId>jetty-all</artifactId>\r\n\t\t\t<version>9.4.21.v20190926</version>\r\n\t\t\t<!-- <version>9.3.27.v20190418</version> -->\r\n\t\t\t<type>pom</type>\r\n\t\t</dependency>\r\n\t</dependencies>\r\n</project>\r\n```\r\n```java\r\nimport java.net.URI;\r\nimport java.util.concurrent.*;\r\n\r\nimport org.eclipse.jetty.websocket.api.*;\r\nimport org.eclipse.jetty.websocket.api.annotations.*;\r\nimport org.eclipse.jetty.websocket.client.*;\r\nimport org.eclipse.jetty.websocket.client.io.UpgradeListener;\r\n\r\npublic class SimpleEchoClient {\r\n    public static void main(String[] args) throws Exception {\r\n        URI echoUri = new URI(\"ws://demos.kaazing.com/echo\");\r\n        WebSocketClient client = new WebSocketClient();\r\n        SimpleEchoSocket socket = new SimpleEchoSocket();\r\n        client.start();\r\n\r\n        client.connect(socket, echoUri, new ClientUpgradeRequest(), new UpgradeListener() {\r\n            @Override public void onHandshakeRequest(UpgradeRequest request) { }\r\n\r\n            @Override public void onHandshakeResponse(UpgradeResponse response) {\r\n            \tif (response.isSuccess())\r\n            \t\tSystem.out.println(\"Success is true\");\r\n            \telse\r\n            \t\tSystem.out.println(\"Invalid Behavior: Success is false\");\r\n            }\r\n        });\r\n        // wait for closed socket connection.\r\n        socket.awaitClose(5, TimeUnit.SECONDS);\r\n    }\r\n\r\n/**\r\n * Basic Echo Client Socket (from example)\r\n */\r\n@WebSocket(maxTextMessageSize = 64 * 1024)\r\npublic static class SimpleEchoSocket\r\n{\r\n    private final CountDownLatch closeLatch;\r\n    @SuppressWarnings(\"unused\")\r\n    private Session session;\r\n    public SimpleEchoSocket() {\r\n        this.closeLatch = new CountDownLatch(1);\r\n    }\r\n    public boolean awaitClose(int duration, TimeUnit unit) throws InterruptedException {\r\n        return this.closeLatch.await(duration, unit);\r\n    }\r\n    @OnWebSocketClose\r\n    public void onClose(int statusCode, String reason) {\r\n        System.out.printf(\"Connection closed: %d - %s%n\", statusCode, reason);\r\n        this.session = null;\r\n        this.closeLatch.countDown(); // trigger latch\r\n    }\r\n    @OnWebSocketConnect\r\n    public void onConnect(Session session) {\r\n        System.out.printf(\"Got connect: %s%n\", session);\r\n        this.session = session;\r\n        try {\r\n            Future<Void> fut;\r\n            fut = session.getRemote().sendStringByFuture(\"Hello\");\r\n            fut.get(2, TimeUnit.SECONDS); // wait for send to complete.\r\n\r\n            fut = session.getRemote().sendStringByFuture(\"Thanks for the conversation.\");\r\n            fut.get(2, TimeUnit.SECONDS); // wait for send to complete.\r\n        }\r\n        catch (Throwable t){t.printStackTrace(); }\r\n    }\r\n    @OnWebSocketMessage\r\n    public void onMessage(String msg) {\r\n        System.out.printf(\"Got msg: %s%n\", msg);\r\n        if (msg.contains(\"Thanks\"))\r\n        {\r\n            session.close(StatusCode.NORMAL, \"I'm done\");\r\n        }\r\n    }\r\n    @OnWebSocketError\r\n    public void onError(Throwable cause) {\r\n        System.out.print(\"WebSocket Error: \");\r\n        cause.printStackTrace(System.out);\r\n    }\r\n}\r\n}\r\n```", "changesInPackagesGIT": ["jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client", "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api", "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.websocket.api.isSuccess()", "org.eclipse.jetty.websocket.api.setSuccess(boolean)", "org.eclipse.jetty.websocket.client.ClientUpgradeResponse.isSuccess()", "org.eclipse.jetty.websocket.client.WebSocketUpgradeRequest.upgrade(org.eclipse.jetty.client.HttpResponse,org.eclipse.jetty.client.http.HttpConnectionOverHTTP)", "org.eclipse.jetty.websocket.server.WebSocketServerFactory.upgrade(org.eclipse.jetty.server.HttpConnection,org.eclipse.jetty.websocket.servlet.ServletUpgradeRequest,org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse,org.eclipse.jetty.websocket.common.events.EventDriver)"], "ttf": 16.00027777777778, "numCommits": 3, "url": "https://github.com/eclipse/jetty.project/issues/4248"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "gbrehmer", "filteredCommits": [], "commits": {"37aa5a17e035b0f684f4966974ea1ef7fd144080": {"commitUser": "olamy", "commitGHEventType": "referenced"}, "16159583af0ebc1b851b19699eac66a10d5cb478": {"commitUser": "olamy", "commitGHEventType": "referenced"}}, "created": "2019-10-24 00:07:11", "commitsDetails": [{"commitMessage": "Issue #4243  invalid json error response from ErrorHandler (#4249)\n\n* Issue #4243  invalid json error response from ErrorHandler\r\n\r\nSigned-off-by: olivier lamy <oliver.lamy@gmail.com>\r\n\r\n", "commitParents": ["e09444eeb52c3454c4b78cd27ec47187fc44700e"], "commitHash": "37aa5a17e035b0f684f4966974ea1ef7fd144080", "commitSpoonAstDiffStats": [{"spoonFilePath": "ErrorHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.ErrorHandler.writeErrorJson(javax.servlet.http.HttpServletRequest,java.io.PrintWriter,int,java.lang.String)", "DEL": 4, "INS": 7, "UPD": 9, "MOV": 20, "TOT": 40}]}, {"spoonFilePath": "ErrorHandlerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest.testJsonResponse()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "37aa5a17e035b0f684f4966974ea1ef7fd144080 tags/jetty-9.4.23.v20191118~48", "commitUser": "olamy", "authoredDateTime": "2019-11-06 09:09:44", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 33, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/ErrorHandler.java", "insertions": 23, "deletions": 10}, {"lines": 24, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ErrorHandlerTest.java", "insertions": 24, "deletions": 0}, {"lines": 6, "filePath": "jetty-server/pom.xml", "insertions": 6, "deletions": 0}], "commitDateTime": "2019-11-06 09:09:44", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "16159583af0ebc1b851b19699eac66a10d5cb478", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "olamy", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "ErrorHandler produces invalid json error response", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2019-11-05 23:10:16", "statsSkippedReason": "", "body": "https://github.com/eclipse/jetty.project/blob/bde86467f4e5df595773ab11ed5e80c615b741f3/jetty-server/src/main/java/org/eclipse/jetty/server/handler/ErrorHandler.java#L430\r\n\r\ngenerated json has missing quotes (\"keys\") and invalid comma after last value (in both cases, if cause exists or if cause is null)", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 12.000277777777777, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/4243"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug", "High Priority", "Java 11", "Sponsored"], "user": "sbordet", "filteredCommits": ["4769de8a2b5129b4745d1b9af465a1195ca895ac", "1e360244a59d3ddb135fab4557b021606feb1c52"], "commits": {"4769de8a2b5129b4745d1b9af465a1195ca895ac": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "1e360244a59d3ddb135fab4557b021606feb1c52": {"commitUser": "sbordet", "commitGHEventType": "closed"}}, "created": "2019-10-16 10:27:48", "commitsDetails": [{"commitMessage": "Issue #4209 - Unused TLS connection is not closed in Java 11.\n\nCode cleanup.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["20e7aa01f2057299e75302e7370d8b308c20161c"], "commitHash": "4769de8a2b5129b4745d1b9af465a1195ca895ac", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpClientTLSTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpClientTLSTest.testClientRawCloseDoesNotInvalidateSession()", "DEL": 10, "INS": 10, "UPD": 4, "MOV": 11, "TOT": 35}, {"spoonMethodName": "org.eclipse.jetty.client.HttpClientTLSTest", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.HttpClientTLSTest.testServerRawCloseDetectedByClient().15.newSslClientConnectionFactory(org.eclipse.jetty.util.ssl.SslContextFactory,org.eclipse.jetty.io.ClientConnectionFactory)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "SslClientConnectionFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.ssl.SslClientConnectionFactory.setAllowMissingCloseMessage(boolean)", "DEL": 0, "INS": 1, "UPD": 3, "MOV": 2, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslClientConnectionFactory.customize(org.eclipse.jetty.io.Connection,java.util.Map)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslClientConnectionFactory.isAllowMissingCloseMessage()", "DEL": 0, "INS": 1, "UPD": 2, "MOV": 1, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslClientConnectionFactory", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "SslConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.isAllowMissingCloseMessage()", "DEL": 0, "INS": 1, "UPD": 2, "MOV": 1, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.closeOutbound()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.doShutdownOutput()", "DEL": 1, "INS": 1, "UPD": 6, "MOV": 1, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.setAllowMissingCloseMessage(boolean)", "DEL": 0, "INS": 1, "UPD": 3, "MOV": 2, "TOT": 6}]}], "nameRev": "4769de8a2b5129b4745d1b9af465a1195ca895ac tags/jetty-9.4.22.v20191022~16^2~1", "commitUser": "sbordet", "authoredDateTime": "2019-10-16 13:02:24", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 46, "filePath": "jetty-client/src/test/java/org/eclipse/jetty/client/HttpClientTLSTest.java", "insertions": 22, "deletions": 24}, {"lines": 36, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ssl/SslClientConnectionFactory.java", "insertions": 32, "deletions": 4}, {"lines": 57, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ssl/SslConnection.java", "insertions": 45, "deletions": 12}], "commitDateTime": "2019-10-16 13:02:24", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #4209 - Unused TLS connection is not closed in Java 11.\n\nAdded workarounds for the Java 11 behavior.\n\nIn fill(), call closeInbound() if we filled -1 and the handshake\ndid not start yet. This avoids to send a ClientHello to the peer\neven if we are closing.\n\nIn flush(), if the handshake status is NEED_UNWRAP but we are\nclosing, force a wrap().\n\nAdded test cases.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["4769de8a2b5129b4745d1b9af465a1195ca895ac"], "commitHash": "1e360244a59d3ddb135fab4557b021606feb1c52", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpClientTLSTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpClientTLSTest.testNeverUsedConnectionThenServerIdleTimeout()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.HttpClientTLSTest.testNeverUsedConnectionThenClientIdleTimeout()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "SslConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.handshakeSucceeded()", "DEL": 1, "INS": 1, "UPD": 3, "MOV": 2, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.isHandshakeComplete()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.isHandshakeSucceeded()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.networkFlush(java.nio.ByteBuffer)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.flush(java.nio.ByteBuffer[])", "DEL": 0, "INS": 2, "UPD": 2, "MOV": 6, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.closeInbound()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.isRenegotiating()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.fill(java.nio.ByteBuffer)", "DEL": 1, "INS": 6, "UPD": 1, "MOV": 5, "TOT": 13}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.networkFill(java.nio.ByteBuffer)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.handshakeFailed(java.lang.Throwable)", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 1, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.isHandshakeInitial()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.Handshake", "DEL": 0, "INS": 0, "UPD": 6, "MOV": 0, "TOT": 6}]}], "nameRev": "1e360244a59d3ddb135fab4557b021606feb1c52 tags/jetty-9.4.22.v20191022~16^2", "commitUser": "sbordet", "authoredDateTime": "2019-10-16 13:10:40", "commitGHEventType": "closed", "commitGitStats": [{"lines": 205, "filePath": "jetty-client/src/test/java/org/eclipse/jetty/client/HttpClientTLSTest.java", "insertions": 205, "deletions": 0}, {"lines": 69, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ssl/SslConnection.java", "insertions": 57, "deletions": 12}], "commitDateTime": "2019-10-16 13:10:40", "spoonStatsSkippedReason": ""}], "title": "Unused TLS connection is not closed in Java 11", "spoonStatsSummary": {"spoonMethodsChanged": 21, "DEL": 5, "INS": 22, "UPD": 36, "MOV": 24, "TOT": 87, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 162, "insertions": 134, "gitFilesChange": 2, "deletions": 28}, "closed": "2019-10-16 16:23:49", "statsSkippedReason": "", "body": "A client establishes a TCP connection to be used with the TLS protocol, but then it never send any bytes on that connection (not even the TLS `ClientHello`).\r\n\r\nThe server idle times out the connection and `SSLEngine.closeOutbound()` is called from `shutdownOutput()`.\r\nIn Java 8 this results in the SSLEngine state to remain in `NOT_HANDSHAKING`, while in Java 11+ this results in `NEED_UNWRAP`.\r\n\r\nSince we are trying to gently close the connection (because of the idle timeout), we expect that the call to `closeOutbound()` generates the TLS `close_notify` message and therefore a `flush()` is required.\r\n\r\nCalling `flush()` behaves differently because the `SSLEngine` state is different.\r\nIn Java 8 it calls `wrap()`, which produces 0 bytes and result `CLOSED`, which causes a network `FIN`.\r\nIn Java 11 it calls `fill()`, which reads 0 from the network, call `unwrap()` which produces 0 bytes and a `BUFFER_UNDERFLOW` result, therefore never sending a network `FIN`.\r\n\r\nIn Java 11, nothing is sent to the client: neither the `close_notify` nor the `FIN`, so the connection remains in the pool and may be used for other requests.", "changesInPackagesGIT": ["jetty-io/src/main/java/org/eclipse/jetty/io/ssl"], "changesInPackagesSPOON": ["org.eclipse.jetty.io.ssl.SslClientConnectionFactory.setAllowMissingCloseMessage(boolean)", "org.eclipse.jetty.io.ssl.SslConnection.networkFlush(java.nio.ByteBuffer)", "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.handshakeSucceeded()", "org.eclipse.jetty.io.ssl.SslConnection.isHandshakeComplete()", "org.eclipse.jetty.io.ssl.SslConnection.isHandshakeSucceeded()", "org.eclipse.jetty.io.ssl.SslClientConnectionFactory", "org.eclipse.jetty.io.ssl.SslConnection.setAllowMissingCloseMessage(boolean)", "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.closeInbound()", "org.eclipse.jetty.io.ssl.SslClientConnectionFactory.isAllowMissingCloseMessage()", "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.isRenegotiating()", "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.closeOutbound()", "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.flush(java.nio.ByteBuffer[])", "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.fill(java.nio.ByteBuffer)", "org.eclipse.jetty.io.ssl.SslConnection", "org.eclipse.jetty.io.ssl.SslConnection.isAllowMissingCloseMessage()", "org.eclipse.jetty.io.ssl.SslConnection.networkFill(java.nio.ByteBuffer)", "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.doShutdownOutput()", "org.eclipse.jetty.io.ssl.SslClientConnectionFactory.customize(org.eclipse.jetty.io.Connection,java.util.Map)", "org.eclipse.jetty.io.ssl.SslConnection.Handshake", "org.eclipse.jetty.io.ssl.SslConnection.isHandshakeInitial()", "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.handshakeFailed(java.lang.Throwable)"], "ttf": 0.0002777777777777778, "numCommits": 2, "url": "https://github.com/eclipse/jetty.project/issues/4209"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 4, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug", "Specification", "Sponsored"], "user": "joakime", "filteredCommits": [], "commits": {"627577c8f2e2c05a0dd2b37ebba432ff6bad13a7": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "890c0b26cb8e01fd061a80415330a2bf72a82e17": {"commitUser": "gregw", "commitGHEventType": "closed"}, "1babb6cf992d3df225d5240afd153b6603b54521": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "9395be0997726b6c3127b6343f8626710a82b27a": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "1c91100f9a5beecaf11e9582cef3405e8ef265e6": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2019-10-15 15:11:51", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "627577c8f2e2c05a0dd2b37ebba432ff6bad13a7", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #4203 and #4204 - Transfer-Encoding + Content-Length behaviors (#4205)\n\n* Issue #4203 - Updating test to verify report on Transfer-Encoding\r\n\r\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\r\n\r\n* Fixes #4203 - Transfer-Encoding + Content-Length is 400 Bad Request\r\n\r\n+ Fixing validation to not be header order dependent.\r\n\r\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\r\n\r\n* Issue #4203 - Fixing hasTransferEncoding reset and testcase assumption\r\n\r\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\r\n\r\n* Issue #4204 - Transfer-Encoding RFC7230 behaviors\r\n\r\n+ More test cases and implementation.\r\n\r\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\r\n\r\n* Issue #4204 - Transfer-Encoding RFC7230 behaviors\r\n\r\n+ Adjusting HttpParser to handle the case where we have multiple\r\n  Transfer-Encoding headers and none declare the 'chunked' token.\r\n\r\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\r\n\r\n* Issue #4204 - Transfer-Encoding RFC7230 behaviors\r\n\r\n+ Making changes from PR review\r\n\r\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\r\n\r\n* Issue #4203 Transfer Encoding\r\n\r\nrequest with TE and no chunking is a Bad Request\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n", "commitParents": ["3d19f6112231f0b552d97ad737da8ca28dd8225d"], "commitHash": "890c0b26cb8e01fd061a80415330a2bf72a82e17", "commitSpoonAstDiffStats": [{"spoonFilePath": "PartialRFC2616Test.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.PartialRFC2616Test.test4_4_3()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.PartialRFC2616Test.test4_4_2()", "DEL": 3, "INS": 1, "UPD": 1, "MOV": 4, "TOT": 9}]}, {"spoonFilePath": "HttpConnectionTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpConnectionTest", "DEL": 0, "INS": 4, "UPD": 0, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.server.HttpConnectionTest.testHttp11ContentLengthAndChunk()", "DEL": 3, "INS": 0, "UPD": 8, "MOV": 31, "TOT": 42}, {"spoonMethodName": "org.eclipse.jetty.server.HttpConnectionTest.testHttp11TransferEncodingChunked(java.util.List)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpConnectionTest.testHttp11TransferEncodingInvalidChunked(java.util.List)", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.HttpConnectionTest.http11TransferEncodingChunked()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpConnectionTest.http11ContentLengthAndChunkedData()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpConnectionTest.testHttp11ContentLengthAndChunk(int[])", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpConnectionTest.http11TransferEncodingInvalidChunked()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpConnectionTest.testChunkNoTrailer()", "DEL": 1, "INS": 0, "UPD": 5, "MOV": 1, "TOT": 7}]}, {"spoonFilePath": "RFC2616BaseTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.test.rfcs.RFC2616BaseTest.test4_4()", "DEL": 8, "INS": 0, "UPD": 2, "MOV": 9, "TOT": 19}]}, {"spoonFilePath": "HttpParser.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.HttpParser", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.HttpParser.parseFields(java.nio.ByteBuffer)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.HttpParser.parsedHeader()", "DEL": 3, "INS": 11, "UPD": 3, "MOV": 9, "TOT": 26}, {"spoonMethodName": "org.eclipse.jetty.http.HttpParser.reset()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpParserTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.HttpParserTest.testBadChunkParse()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "890c0b26cb8e01fd061a80415330a2bf72a82e17 tags/jetty-9.4.22.v20191022~9", "commitUser": "gregw", "authoredDateTime": "2019-10-18 14:05:15", "commitGHEventType": "closed", "commitGitStats": [{"lines": 13, "filePath": "tests/test-integration/src/test/java/org/eclipse/jetty/test/rfcs/RFC2616BaseTest.java", "insertions": 2, "deletions": 11}, {"lines": 190, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/HttpConnectionTest.java", "insertions": 162, "deletions": 28}, {"lines": 2, "filePath": "jetty-http/src/test/java/org/eclipse/jetty/http/HttpParserTest.java", "insertions": 1, "deletions": 1}, {"lines": 48, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/HttpParser.java", "insertions": 39, "deletions": 9}, {"lines": 9, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/PartialRFC2616Test.java", "insertions": 4, "deletions": 5}], "commitDateTime": "2019-10-19 08:05:15", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "1babb6cf992d3df225d5240afd153b6603b54521", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "1c91100f9a5beecaf11e9582cef3405e8ef265e6", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "9395be0997726b6c3127b6343f8626710a82b27a", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "Some Transfer-Encoding and Content-Length combinations do not result in expected 400 Bad Request", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2019-10-18 21:05:19", "statsSkippedReason": "", "body": "If a request arrives like this ...\r\n\r\n```\r\nPOST /foo HTTP/1.1\r\nHost: acme.com\r\nContent-Type: application/x-www-form-urlencoded\r\nContent-length: 4\r\nTransfer-Encoding: 'chunked'\r\n\r\nbd\r\n```\r\n\r\nWhere the `Transfer-Encoding` header exists, and has a bad token value.\r\nThe code where we evaluate 400 Bad Request if `Transfer-Encoding` AND `Content-Length` are both specified is reported to not trigger the status code 400.", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 3.000277777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/4203"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug", "High Priority"], "user": "cztomek", "filteredCommits": ["a0e90bab96acec73895a648b79243dd200efe764"], "commits": {"869184c827ca3eb82b1a0f76c0f5dc57335d76cb": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "6b26ac9ee976b56144ca4289723a674cca335c3a": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "a0e90bab96acec73895a648b79243dd200efe764": {"commitUser": "sbordet", "commitGHEventType": "closed"}}, "created": "2019-10-14 14:59:05", "commitsDetails": [{"commitMessage": "Merge pull request #4200 from eclipse/jetty-9.4.x-4190-deadlock_httpoutput_close\n\nFixes #4190 Jetty hangs after thread blocked in SharedBlockingCallbac\u2026", "commitParents": ["2efce33fbe37a49019b193207b24013933743cbd", "6b26ac9ee976b56144ca4289723a674cca335c3a"], "commitHash": "869184c827ca3eb82b1a0f76c0f5dc57335d76cb", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpOutput.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpOutput.closed()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ServletWriterTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ServletWriterTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "869184c827ca3eb82b1a0f76c0f5dc57335d76cb tags/jetty-9.4.22.v20191022~12", "commitUser": "sbordet", "authoredDateTime": "2019-10-16 23:35:52", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 127, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ServletWriterTest.java", "insertions": 127, "deletions": 0}, {"lines": 7, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpOutput.java", "insertions": 7, "deletions": 0}], "commitDateTime": "2019-10-16 23:35:52", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #4190 Jetty hangs after thread blocked in SharedBlockingCallback.block() called by HttpOutput.close.\n\nNow handling correctly the CLOSING case in HttpOutput.close().\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["320e848c577e9bc74fda36753a783b2be147dbc9"], "commitHash": "a0e90bab96acec73895a648b79243dd200efe764", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpOutput.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpOutput.closed()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ServletWriterTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ServletWriterTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "a0e90bab96acec73895a648b79243dd200efe764 tags/jetty-9.4.22.v20191022~12^2~1", "commitUser": "sbordet", "authoredDateTime": "2019-10-15 12:45:10", "commitGHEventType": "closed", "commitGitStats": [{"lines": 127, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ServletWriterTest.java", "insertions": 127, "deletions": 0}, {"lines": 6, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpOutput.java", "insertions": 6, "deletions": 0}], "commitDateTime": "2019-10-15 12:45:10", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #4190 Jetty hangs after thread blocked in SharedBlockingCallback.block() called by HttpOutput.close.\n\nNow releasing the buffer when in CLOSING state.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["a0e90bab96acec73895a648b79243dd200efe764"], "commitHash": "6b26ac9ee976b56144ca4289723a674cca335c3a", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpOutput.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpOutput.closed()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "6b26ac9ee976b56144ca4289723a674cca335c3a tags/jetty-9.4.22.v20191022~12^2", "commitUser": "sbordet", "authoredDateTime": "2019-10-15 15:47:03", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 1, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpOutput.java", "insertions": 1, "deletions": 0}], "commitDateTime": "2019-10-15 15:47:03", "spoonStatsSkippedReason": ""}], "title": "Jetty hangs after thread blocked in SharedBlockingCallback.block() called by HttpOutput.close", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 6, "insertions": 6, "gitFilesChange": 1, "deletions": 0}, "closed": "2019-10-16 21:35:54", "statsSkippedReason": "", "body": "Hi, this started happening on and off after we migrated from 9.4.8 to 9.4.21.\r\n\r\nThe entire HTTP stack is blocked - no new requests can be served.\r\nAfter calling interruptThread() on the thread that is blocked on SharedBlockingCallback.block() the server works back again.\r\n\r\n[Jetty9.4.21-blocked-jettydump.txt](https://github.com/eclipse/jetty.project/files/3725005/Jetty9.4.21-blocked-jettydump.txt)\r\n[Jetty9.4.21-blocked-treaddump.txt](https://github.com/eclipse/jetty.project/files/3725010/Jetty9.4.21-blocked-treaddump.txt)\r\n", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.HttpOutput.closed()"], "ttf": 2.000277777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/4190"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 5, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 2}, "labels": ["Bug", "High Priority"], "user": "stuban", "filteredCommits": [], "commits": {"f09e03c586502ae9b3228c930141b2f049f25413": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "50d7b8c5662d1d84d85861ee444479f5821148dc": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "1ad7a3c11d318cd10f5b3f622870a4f5204d7adc": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "8b08b0fca57f89fcfeda75709ef760dc7aacc912": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "c2e9b16ebe79a1b3c21ccdc6d8863b7c7a23b3c6": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "515ed5b54296d8c7c523a368d203c023ee35c9b9": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "318246eb24d5e58dadd05ac846d7803f426d4153": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2019-10-04 12:42:47", "commitsDetails": [{"commitMessage": "Issue #4156 - Session Already in Cache during forwarding (#4159)\n\n* Issue #4156 - Adding test to replicate issue\r\n\r\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\r\n\r\n* Issue #4156 Session already in cache\r\n\r\n+ check validity of sessions in getSession(SessionHandler)\r\n+ do not replace session in doScope if SessionHandler is the same.\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n", "commitParents": ["ec56739d3c20ad446054a0b6c8d94b7740b0dc4a"], "commitHash": "f09e03c586502ae9b3228c930141b2f049f25413", "commitSpoonAstDiffStats": [{"spoonFilePath": "SessionHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.session.SessionHandler.doScope(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 4, "TOT": 5}]}, {"spoonFilePath": "RequestDispatchedSessionTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.session.RequestDispatchedSessionTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "Request.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Request.getSession(org.eclipse.jetty.server.session.SessionHandler)", "DEL": 2, "INS": 2, "UPD": 0, "MOV": 3, "TOT": 7}]}], "nameRev": "f09e03c586502ae9b3228c930141b2f049f25413 tags/jetty-9.4.22.v20191022~23", "commitUser": "gregw", "authoredDateTime": "2019-10-14 11:18:37", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 146, "filePath": "tests/test-sessions/test-sessions-common/src/test/java/org/eclipse/jetty/server/session/RequestDispatchedSessionTest.java", "insertions": 146, "deletions": 0}, {"lines": 3, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Request.java", "insertions": 2, "deletions": 1}, {"lines": 26, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/session/SessionHandler.java", "insertions": 14, "deletions": 12}], "commitDateTime": "2019-10-14 11:18:37", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "50d7b8c5662d1d84d85861ee444479f5821148dc", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "1ad7a3c11d318cd10f5b3f622870a4f5204d7adc", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "8b08b0fca57f89fcfeda75709ef760dc7aacc912", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "c2e9b16ebe79a1b3c21ccdc6d8863b7c7a23b3c6", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "515ed5b54296d8c7c523a368d203c023ee35c9b9", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4156 Remove use of PlaceHolderSession for simultaneous session loading (#4304)\n\n* Issue #4156 Remove use of PlaceHolderSession for simultaneous session loading.\r\n", "commitParents": ["e69eea86c8bdc2f1bccbf24e812eb047859aa281"], "commitHash": "318246eb24d5e58dadd05ac846d7803f426d4153", "commitSpoonAstDiffStats": [{"spoonFilePath": "AbstractSessionCache.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.session.AbstractSessionCache.doComputeIfAbsent(java.lang.String,java.util.function.Function)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.session.AbstractSessionCache.PlaceHolderSession", "DEL": 1, "INS": 0, "UPD": 2, "MOV": 2, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.server.session.AbstractSessionCache.getAndEnter(java.lang.String,boolean)", "DEL": 8, "INS": 6, "UPD": 6, "MOV": 19, "TOT": 39}]}, {"spoonFilePath": "TestMemcachedSessions.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.memcached.session.TestMemcachedSessions.NullSessionCache", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.memcached.session.TestMemcachedSessions.testMemcached()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "AbstractClusteredSessionScavengingTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.session.AbstractClusteredSessionScavengingTest.testClusteredScavenge()", "DEL": 10, "INS": 2, "UPD": 2, "MOV": 2, "TOT": 16}]}, {"spoonFilePath": "NullSessionCache.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.session.NullSessionCache.doComputeIfAbsent(java.lang.String,java.util.function.Function)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "DefaultSessionCache.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.session.DefaultSessionCache.doPutIfAbsent(java.lang.String,org.eclipse.jetty.server.session.Session)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.session.DefaultSessionCache.doReplace(java.lang.String,org.eclipse.jetty.server.session.Session,org.eclipse.jetty.server.session.Session)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.session.DefaultSessionCache.doDelete(java.lang.String)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.server.session.DefaultSessionCache.doComputeIfAbsent(java.lang.String,java.util.function.Function)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "SessionCookieTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.session.SessionCookieTest.MockSessionStore", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.session.SessionCookieTest.testSecureSessionCookie()", "DEL": 0, "INS": 0, "UPD": 5, "MOV": 0, "TOT": 5}]}], "nameRev": "318246eb24d5e58dadd05ac846d7803f426d4153 tags/jetty-9.4.23.v20191118~4", "commitUser": "janbartel", "authoredDateTime": "2019-11-18 09:06:38", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 56, "filePath": "jetty-memcached/jetty-memcached-sessions/src/test/java/org/eclipse/jetty/memcached/session/TestMemcachedSessions.java", "insertions": 2, "deletions": 54}, {"lines": 16, "filePath": "tests/test-sessions/test-sessions-common/src/main/java/org/eclipse/jetty/server/session/AbstractClusteredSessionScavengingTest.java", "insertions": 2, "deletions": 14}, {"lines": 18, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/session/SessionCookieTest.java", "insertions": 13, "deletions": 5}, {"lines": 148, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/session/AbstractSessionCache.java", "insertions": 43, "deletions": 105}, {"lines": 41, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/session/DefaultSessionCache.java", "insertions": 16, "deletions": 25}, {"lines": 32, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/session/NullSessionCache.java", "insertions": 8, "deletions": 24}], "commitDateTime": "2019-11-18 09:06:38", "spoonStatsSkippedReason": ""}], "title": "IllegalStateException when forwarding to jsp with new session", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2019-11-25 02:05:46", "statsSkippedReason": "", "body": "We encountered a regression when upgrading from 9.4.20 to 9.4.21 in the session handling code.\r\nWhen a servlet creates a new HttpSession and then forwards to another servlet/jsp that tries to access this session the AbstractSessionCache throws a IllegalStateException which leads to a NPE in SessionHandler.getExtendedId().\r\n```\r\n2019-10-04 14:26:37.641:WARN:oejs.session:qtp650023597-23: \r\njava.lang.IllegalStateException: Session node0mswjry8jd891hqpdxkcug6a87 already in cache\r\n\tat org.eclipse.jetty.server.session.AbstractSessionCache.add(AbstractSessionCache.java:518)\r\n\tat org.eclipse.jetty.server.session.SessionHandler.newHttpSession(SessionHandler.java:771)\r\n\tat org.eclipse.jetty.server.Request.getSession(Request.java:1606)\r\n\tat org.eclipse.jetty.server.Request.getSession(Request.java:1580)\r\n\tat org.apache.jasper.runtime.PageContextImpl.initialize(PageContextImpl.java:137)\r\n\tat org.apache.jasper.runtime.JspFactoryImpl.internalGetPageContext(JspFactoryImpl.java:109)\r\n\tat org.apache.jasper.runtime.JspFactoryImpl.getPageContext(JspFactoryImpl.java:60)\r\n\tat org.apache.jsp.index_jsp._jspService(index_jsp.java:100)\r\n```\r\nSimple test case simulating a login workflow:\r\n``` java\r\npackage com.ect.test;\r\n\r\nimport java.io.IOException;\r\nimport javax.servlet.ServletException;\r\nimport javax.servlet.annotation.WebServlet;\r\nimport javax.servlet.http.HttpServlet;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpServletResponse;\r\n\r\n@WebServlet(\"/LoginServlet\")\r\npublic class LoginServlet extends HttpServlet {\r\n       \r\n\tprotected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n\t    response.sendRedirect(\"index.jsp\");\r\n\t}\r\n\r\n\tprotected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n\t    if (request.getParameter(\"username\") != null) {\r\n\t        if (request.getSession() != null) {\r\n\t            request.getSession().invalidate();\r\n\t        }\r\n\t        request.getSession(true).setAttribute(\"loggedin\", request.getParameter(\"username\"));\r\n\t        request.getRequestDispatcher(\"index.jsp\").forward(request, response);\r\n\t    }\r\n\t    response.sendRedirect(\"index.jsp\");\r\n\t}\r\n\r\n}\r\n```\r\nand \r\n``` xml\r\n<%@ page language=\"java\" contentType=\"text/html; charset=UTF-8\" pageEncoding=\"UTF-8\"%>\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n<meta charset=\"UTF-8\">\r\n<title>Hello World</title>\r\n</head>\r\n<body>\r\nWelcome <%= session.getAttribute(\"loggedin\") %>\r\n<form action=\"LoginServlet\" method=\"POST\">\r\n<p>Username: <input type=\"text\" name=\"username\"/></p>\r\n<input type=\"submit\"/>\r\n</form>\r\n</body>\r\n</html>\r\n```\r\n\r\nDid not happen with 9.4.20 so maybe a side effect of #3947 ", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 51.000277777777775, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/4156"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 3, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "lachlan-roberts", "filteredCommits": [], "commits": {"b5abc3272131b59519362557dda6d80e75ed28cd": {"commitUser": "lachlan-roberts", "commitGHEventType": "referenced"}, "9c8780d8bdb6bf9bae3a18fa7ec15ea22e8fa27c": {"commitUser": "lachlan-roberts", "commitGHEventType": "referenced"}, "ce6438c53e629f7d3e3b2a10aa05bc67cab00b34": {"commitUser": "lachlan-roberts", "commitGHEventType": "referenced"}, "2b2f6858bc0174caa16072639e8fe76e80908de2": {"commitUser": "lachlan-roberts", "commitGHEventType": "referenced"}}, "created": "2019-10-02 08:26:32", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "9c8780d8bdb6bf9bae3a18fa7ec15ea22e8fa27c", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "lachlan-roberts", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4148 - config for jetty specific settings with javax WebSockets (#4295)\n\n* Issue #4148 - config for jetty specific settings with javax WebSockets\r\n\r\n* Make every jetty EndpointConfig implementation a wrapper\r\n* Remove BasicEndpointConfig and use Client or Server specific ones\r\n", "commitParents": ["6f2ac512dc43f2b9bb42efc1328d343d47b8e79b"], "commitHash": "ce6438c53e629f7d3e3b2a10aa05bc67cab00b34", "commitSpoonAstDiffStats": [], "nameRev": "ce6438c53e629f7d3e3b2a10aa05bc67cab00b34 tags/jetty-10.0.0.alpha2~137", "commitUser": "lachlan-roberts", "authoredDateTime": "2019-12-17 10:04:07", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 29, "filePath": "jetty-websocket/javax-websocket-client/src/main/java/org/eclipse/jetty/websocket/javax/client/BasicClientEndpointConfig.java", "insertions": 29, "deletions": 0}, {"lines": 189, "filePath": "jetty-websocket/javax-websocket-server/src/main/java/org/eclipse/jetty/websocket/javax/server/internal/AnnotatedServerEndpointConfig.java", "insertions": 37, "deletions": 152}, {"lines": 39, "filePath": "jetty-websocket/{javax-websocket-server/src/main/java/org/eclipse/jetty/websocket/javax/server/internal => javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/javax/common}/ServerEndpointConfigWrapper.java", "insertions": 14, "deletions": 25}, {"lines": 3, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/javax/tests/client/AbstractClientSessionTest.java", "insertions": 2, "deletions": 1}, {"lines": 10, "filePath": "jetty-websocket/javax-websocket-tests/src/main/java/org/eclipse/jetty/websocket/javax/tests/EventSocket.java", "insertions": 8, "deletions": 2}, {"lines": 100, "filePath": "jetty-websocket/javax-websocket-server/src/main/java/org/eclipse/jetty/websocket/javax/server/internal/UndefinedServerEndpointConfig.java", "insertions": 0, "deletions": 100}, {"lines": 6, "filePath": "jetty-websocket/javax-websocket-client/src/main/java/org/eclipse/jetty/websocket/javax/client/JavaxWebSocketClientFrameHandlerFactory.java", "insertions": 6, "deletions": 0}, {"lines": 76, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/javax/common/JavaxWebSocketFrameHandler.java", "insertions": 74, "deletions": 2}, {"lines": 7, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/javax/common/DummyFrameHandlerFactory.java", "insertions": 7, "deletions": 0}, {"lines": 3, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/javax/common/AbstractSessionTest.java", "insertions": 2, "deletions": 1}, {"lines": 61, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/javax/common/ClientEndpointConfigWrapper.java", "insertions": 61, "deletions": 0}, {"lines": 36, "filePath": "jetty-websocket/javax-websocket-client/src/main/java/org/eclipse/jetty/websocket/javax/client/JavaxWebSocketClientContainer.java", "insertions": 7, "deletions": 29}, {"lines": 9, "filePath": "jetty-websocket/javax-websocket-server/src/main/java/org/eclipse/jetty/websocket/javax/server/internal/JavaxWebSocketServerContainer.java", "insertions": 1, "deletions": 8}, {"lines": 84, "filePath": "jetty-websocket/javax-websocket-client/src/main/java/org/eclipse/jetty/websocket/javax/client/EmptyClientEndpointConfig.java", "insertions": 0, "deletions": 84}, {"lines": 4, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/javax/tests/coders/AvailableEncodersTest.java", "insertions": 2, "deletions": 2}, {"lines": 118, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/javax/common/PutListenerMap.java", "insertions": 118, "deletions": 0}, {"lines": 10, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/javax/common/JavaxWebSocketSession.java", "insertions": 7, "deletions": 3}, {"lines": 47, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/javax/common/{BasicEndpointConfig.java => EndpointConfigWrapper.java}", "insertions": 30, "deletions": 17}, {"lines": 47, "filePath": "jetty-websocket/javax-websocket-server/src/main/java/org/eclipse/jetty/websocket/javax/server/internal/BasicServerEndpointConfig.java", "insertions": 47, "deletions": 0}, {"lines": 100, "filePath": "jetty-websocket/javax-websocket-client/src/main/java/org/eclipse/jetty/websocket/javax/client/AnnotatedClientEndpointConfig.java", "insertions": 20, "deletions": 80}, {"lines": 152, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/javax/tests/JettySpecificConfigTest.java", "insertions": 152, "deletions": 0}, {"lines": 4, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/javax/tests/coders/AvailableDecodersTest.java", "insertions": 2, "deletions": 2}, {"lines": 4, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/javax/tests/client/SessionAddMessageHandlerTest.java", "insertions": 2, "deletions": 2}, {"lines": 1, "filePath": "jetty-websocket/javax-websocket-server/src/main/java/org/eclipse/jetty/websocket/javax/server/internal/PathParamServerEndpointConfig.java", "insertions": 1, "deletions": 0}, {"lines": 6, "filePath": "jetty-websocket/javax-websocket-server/src/main/java/org/eclipse/jetty/websocket/javax/server/internal/JavaxWebSocketServerFrameHandlerFactory.java", "insertions": 6, "deletions": 0}, {"lines": 4, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/javax/tests/server/AbstractJavaxWebSocketServerFrameHandlerTest.java", "insertions": 2, "deletions": 2}, {"lines": 2, "filePath": "jetty-websocket/javax-websocket-tests/src/main/java/org/eclipse/jetty/websocket/javax/tests/Fuzzer.java", "insertions": 0, "deletions": 2}, {"lines": 4, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/javax/tests/client/OnCloseTest.java", "insertions": 2, "deletions": 2}, {"lines": 1, "filePath": "jetty-websocket/javax-websocket-server/src/main/java/org/eclipse/jetty/websocket/javax/server/internal/JavaxWebSocketCreator.java", "insertions": 1, "deletions": 0}, {"lines": 5, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/javax/common/JavaxWebSocketFrameHandlerFactory.java", "insertions": 4, "deletions": 1}, {"lines": 11, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/javax/common/AbstractJavaxWebSocketFrameHandlerTest.java", "insertions": 4, "deletions": 7}], "commitDateTime": "2019-12-17 10:04:07", "spoonStatsSkippedReason": "tooManyFiles"}, {"commitMessage": "", "commitParents": [], "commitHash": "2b2f6858bc0174caa16072639e8fe76e80908de2", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "lachlan-roberts", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "b5abc3272131b59519362557dda6d80e75ed28cd", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "lachlan-roberts", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "Cannot configure maxFrameSize with javax websockets.", "spoonStatsSummary": {}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2020-01-24 06:25:05", "statsSkippedReason": "", "body": "`websocket-core` uses the `maxFrameSize` of the `CoreSession` to limit the size of data frames which can be received, this defaults to 65536. This cannot be configured through the javax API so cannot be changed from the default setting of 65536 which is too small for some of the autobahn tests causing them to fail.", "changesInPackagesGIT": [], "ttf": 113.00027777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/4148"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["e9ac2c8c978d66771b5314eae5d47d623543f272"], "commits": {"bb939f6f71d69733db4e9d5a045f50608fb2306c": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "e9ac2c8c978d66771b5314eae5d47d623543f272": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2019-10-01 22:46:29", "commitsDetails": [{"commitMessage": "Merge pull request #4145 from eclipse/jetty-9.4.x-4144-naked-request-cast\n\nFixing #4144 - handle wrapped requests better", "commitParents": ["6fc42d8ba288de70d37f8b889749bc433d8c9e24", "e9ac2c8c978d66771b5314eae5d47d623543f272"], "commitHash": "bb939f6f71d69733db4e9d5a045f50608fb2306c", "commitSpoonAstDiffStats": [{"spoonFilePath": "DigestAuthenticator.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.security.authentication.DigestAuthenticator.validateRequest(javax.servlet.ServletRequest,javax.servlet.ServletResponse,boolean)", "DEL": 0, "INS": 1, "UPD": 2, "MOV": 0, "TOT": 3}]}, {"spoonFilePath": "ForwardedSchemeHeaderRule.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.rewrite.handler.ForwardedSchemeHeaderRule.apply(java.lang.String,java.lang.String,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}]}], "nameRev": "bb939f6f71d69733db4e9d5a045f50608fb2306c tags/jetty-9.4.22.v20191022~48", "commitUser": "joakime", "authoredDateTime": "2019-10-01 19:06:07", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 3, "filePath": "jetty-rewrite/src/main/java/org/eclipse/jetty/rewrite/handler/ForwardedSchemeHeaderRule.java", "insertions": 2, "deletions": 1}, {"lines": 6, "filePath": "jetty-security/src/main/java/org/eclipse/jetty/security/authentication/DigestAuthenticator.java", "insertions": 4, "deletions": 2}], "commitDateTime": "2019-10-01 19:06:07", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixing #4144 - handle wrapped requests better\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["6fc42d8ba288de70d37f8b889749bc433d8c9e24"], "commitHash": "e9ac2c8c978d66771b5314eae5d47d623543f272", "commitSpoonAstDiffStats": [{"spoonFilePath": "DigestAuthenticator.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.security.authentication.DigestAuthenticator.validateRequest(javax.servlet.ServletRequest,javax.servlet.ServletResponse,boolean)", "DEL": 0, "INS": 1, "UPD": 2, "MOV": 0, "TOT": 3}]}, {"spoonFilePath": "ForwardedSchemeHeaderRule.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.rewrite.handler.ForwardedSchemeHeaderRule.apply(java.lang.String,java.lang.String,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}]}], "nameRev": "e9ac2c8c978d66771b5314eae5d47d623543f272 tags/jetty-9.4.22.v20191022~48^2", "commitUser": "joakime", "authoredDateTime": "2019-10-01 17:49:30", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 3, "filePath": "jetty-rewrite/src/main/java/org/eclipse/jetty/rewrite/handler/ForwardedSchemeHeaderRule.java", "insertions": 2, "deletions": 1}, {"lines": 6, "filePath": "jetty-security/src/main/java/org/eclipse/jetty/security/authentication/DigestAuthenticator.java", "insertions": 4, "deletions": 2}], "commitDateTime": "2019-10-01 17:49:30", "spoonStatsSkippedReason": ""}], "title": "Naked cast to Request should be avoided", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 0, "INS": 2, "UPD": 3, "MOV": 0, "TOT": 5, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 9, "insertions": 6, "gitFilesChange": 2, "deletions": 3}, "closed": "2019-10-14 11:46:06", "statsSkippedReason": "", "body": "As part of Issue #4141 a general review of any naked casts to `(Request)` is being performed, as any use of a wrapped request can trigger a `ClassCastException`.\r\n\r\n2 examples have been found so far, but a more thorough review should be performed.\r\n\r\nhttps://github.com/eclipse/jetty.project/blob/6fc42d8ba288de70d37f8b889749bc433d8c9e24/jetty-security/src/main/java/org/eclipse/jetty/security/authentication/DigestAuthenticator.java#L176\r\n\r\nhttps://github.com/eclipse/jetty.project/blob/6fc42d8ba288de70d37f8b889749bc433d8c9e24/jetty-rewrite/src/main/java/org/eclipse/jetty/rewrite/handler/ForwardedSchemeHeaderRule.java#L49", "changesInPackagesGIT": ["jetty-security/src/main/java/org/eclipse/jetty/security/authentication", "jetty-rewrite/src/main/java/org/eclipse/jetty/rewrite/handler"], "changesInPackagesSPOON": ["org.eclipse.jetty.security.authentication.DigestAuthenticator.validateRequest(javax.servlet.ServletRequest,javax.servlet.ServletResponse,boolean)", "org.eclipse.jetty.rewrite.handler.ForwardedSchemeHeaderRule.apply(java.lang.String,java.lang.String,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)"], "ttf": 12.000277777777777, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/4144"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug", "High Priority"], "user": "davidkarlsen", "filteredCommits": ["0a5c710bdd1ff8aed600cd14e9fa6290eb51af90"], "commits": {"ed9031bd3020c4793c903ca9876450ba153f95e8": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "0a5c710bdd1ff8aed600cd14e9fa6290eb51af90": {"commitUser": "joakime", "commitGHEventType": "closed"}}, "created": "2019-10-01 21:07:01", "commitsDetails": [{"commitMessage": "Merge pull request #4143 from eclipse/jetty-9.4.x-4141-classcastexception-request-async\n\nFixes #4141 - Servlet not async + async Filter + wrapped request", "commitParents": ["2f06976e41b744b9881f227a30255b460b0ffd74", "7d533bdabc96e93609828bff0c3ebe4e1880b3ad"], "commitHash": "ed9031bd3020c4793c903ca9876450ba153f95e8", "commitSpoonAstDiffStats": [{"spoonFilePath": "ServletWrapperTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.ServletWrapperTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ServletHolder.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.ServletHolder.NotAsyncServlet.service(javax.servlet.ServletRequest,javax.servlet.ServletResponse)", "DEL": 0, "INS": 1, "UPD": 2, "MOV": 0, "TOT": 3}]}], "nameRev": "ed9031bd3020c4793c903ca9876450ba153f95e8 tags/jetty-9.4.22.v20191022~44", "commitUser": "joakime", "authoredDateTime": "2019-10-02 13:49:21", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 151, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/ServletWrapperTest.java", "insertions": 151, "deletions": 0}, {"lines": 5, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletHolder.java", "insertions": 3, "deletions": 2}], "commitDateTime": "2019-10-02 13:49:21", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #4141 - Servlet not async + async Filter + wrapped request\n\n+ Fixing ClassCastException\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["6fc42d8ba288de70d37f8b889749bc433d8c9e24"], "commitHash": "0a5c710bdd1ff8aed600cd14e9fa6290eb51af90", "commitSpoonAstDiffStats": [{"spoonFilePath": "ServletWrapperTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.ServletWrapperTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ServletHolder.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.ServletHolder.NotAsyncServlet.service(javax.servlet.ServletRequest,javax.servlet.ServletResponse)", "DEL": 0, "INS": 1, "UPD": 2, "MOV": 0, "TOT": 3}]}], "nameRev": "0a5c710bdd1ff8aed600cd14e9fa6290eb51af90 tags/jetty-9.4.22.v20191022~44^2~1", "commitUser": "joakime", "authoredDateTime": "2019-10-01 17:24:27", "commitGHEventType": "closed", "commitGitStats": [{"lines": 133, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/ServletWrapperTest.java", "insertions": 133, "deletions": 0}, {"lines": 5, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletHolder.java", "insertions": 3, "deletions": 2}], "commitDateTime": "2019-10-01 17:24:27", "spoonStatsSkippedReason": ""}], "title": "ClassCastException with non-async Servlet + async Filter + HttpServletRequestWrapper", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0, "INS": 1, "UPD": 2, "MOV": 0, "TOT": 3, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 5, "insertions": 3, "gitFilesChange": 1, "deletions": 2}, "closed": "2019-10-02 18:49:23", "statsSkippedReason": "", "body": "After upgrading jetty from 9.4.20 -> 9.4.21\r\nI am seeing:\r\n```\r\njava.lang.ClassCastException: class org.springframework.security.web.firewall.StrictHttpFirewall$1 cannot be cast \r\n  to class org.eclipse.jetty.server.Request (org.springframework.security.web.firewall.StrictHttpFirewall$1 is in \r\n  unnamed module of loader org.eclipse.jetty.webapp.WebAppClassLoader @11e355ca; \r\n  org.eclipse.jetty.server.Request is in unnamed module of loader org.eclipse.jetty.start.Classpath$Loader @311d617d)\r\n```\r\n\r\nin both cases I am running java 12 + spring security 5.1.6 ", "changesInPackagesGIT": ["jetty-servlet/src/main/java/org/eclipse/jetty/servlet"], "changesInPackagesSPOON": ["org.eclipse.jetty.servlet.ServletHolder.NotAsyncServlet.service(javax.servlet.ServletRequest,javax.servlet.ServletResponse)"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/4141"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 2, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 2}, "labels": ["Bug"], "user": "travisspencer", "filteredCommits": [], "commits": {"153c404c3e3df70d85568da0cd389695da331d44": {"commitUser": "lachlan-roberts", "commitGHEventType": "referenced"}, "acf4eeff65c2c85be3c1db1044f0b1188716dc67": {"commitUser": "lachlan-roberts", "commitGHEventType": "referenced"}, "cff6bb444a2f7e985febffda3d5b85dea4909d7d": {"commitUser": "lachlan-roberts", "commitGHEventType": "referenced"}, "67ec3d2e87b74f632c18ba5df0cd639ea7789671": {"commitUser": "lachlan-roberts", "commitGHEventType": "referenced"}}, "created": "2019-09-28 08:29:55", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "153c404c3e3df70d85568da0cd389695da331d44", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "lachlan-roberts", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #4129 from travisspencer/fix-4128\n\nIssue #4128 - Add missing padding and use URL decoder", "commitParents": ["d4270d9e97fa9b2b03e5a2610edc3ee85ca21949", "8b37a8f7fe019b4a2a4d888d2801ae0f9730e48d"], "commitHash": "acf4eeff65c2c85be3c1db1044f0b1188716dc67", "commitSpoonAstDiffStats": [{"spoonFilePath": "OpenIdCredentials.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.security.openid.OpenIdCredentials.padJWTSection(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.security.openid.OpenIdCredentials.decodeJWT(java.lang.String)", "DEL": 0, "INS": 2, "UPD": 3, "MOV": 2, "TOT": 7}]}], "nameRev": "acf4eeff65c2c85be3c1db1044f0b1188716dc67 tags/jetty-9.4.22.v20191022~41", "commitUser": "lachlan-roberts", "authoredDateTime": "2019-10-08 09:17:12", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 33, "filePath": "jetty-openid/src/main/java/org/eclipse/jetty/security/openid/OpenIdCredentials.java", "insertions": 30, "deletions": 3}], "commitDateTime": "2019-10-08 09:17:12", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "67ec3d2e87b74f632c18ba5df0cd639ea7789671", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "lachlan-roberts", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4128 - test the decoding of OpenId Credentials (#4166)\n\nSigned-off-by: Lachlan Roberts <lachlan@webtide.com>", "commitParents": ["d44a6935efd5313cea8d779e2676f2830c973e4f"], "commitHash": "cff6bb444a2f7e985febffda3d5b85dea4909d7d", "commitSpoonAstDiffStats": [{"spoonFilePath": "OpenIdCredentials.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.security.openid.OpenIdCredentials.padJWTSection(java.lang.String)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.security.openid.OpenIdCredentials.decodeJWT(java.lang.String)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.security.openid.OpenIdCredentials.redeemAuthCode(org.eclipse.jetty.client.HttpClient)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "JwtEncoder.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.security.openid.JwtEncoder", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "JwtDecoder.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.security.openid.JwtDecoder", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "OpenIdAuthenticationTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.security.openid.OpenIdAuthenticationTest.testLoginLogout()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "JwtDecoderTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.security.openid.JwtDecoderTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "OpenIdProvider.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.security.openid.OpenIdProvider.User.getFirstName()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.security.openid.OpenIdProvider.OpenIdAuthEndpoint.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.security.openid.OpenIdProvider.OpenIdTokenEndpoint.doPost(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 6, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.security.openid.OpenIdProvider.User.getIdToken()", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 6, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.security.openid.OpenIdProvider.User", "DEL": 5, "INS": 0, "UPD": 6, "MOV": 1, "TOT": 12}, {"spoonMethodName": "org.eclipse.jetty.security.openid.OpenIdProvider.User.getLastName()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}], "nameRev": "cff6bb444a2f7e985febffda3d5b85dea4909d7d tags/jetty-9.4.24.v20191120~5", "commitUser": "lachlan-roberts", "authoredDateTime": "2019-11-20 14:23:19", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 65, "filePath": "jetty-openid/src/main/java/org/eclipse/jetty/security/openid/OpenIdCredentials.java", "insertions": 1, "deletions": 64}, {"lines": 122, "filePath": "jetty-openid/src/test/java/org/eclipse/jetty/security/openid/JwtDecoderTest.java", "insertions": 122, "deletions": 0}, {"lines": 58, "filePath": "jetty-openid/src/test/java/org/eclipse/jetty/security/openid/JwtEncoder.java", "insertions": 58, "deletions": 0}, {"lines": 102, "filePath": "jetty-openid/src/main/java/org/eclipse/jetty/security/openid/JwtDecoder.java", "insertions": 102, "deletions": 0}, {"lines": 4, "filePath": "jetty-openid/src/test/java/org/eclipse/jetty/security/openid/OpenIdAuthenticationTest.java", "insertions": 2, "deletions": 2}, {"lines": 45, "filePath": "jetty-openid/src/test/java/org/eclipse/jetty/security/openid/OpenIdProvider.java", "insertions": 11, "deletions": 34}], "commitDateTime": "2019-11-20 14:23:19", "spoonStatsSkippedReason": ""}], "title": "OpenIdCredentials can't decode JWT ID token", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2019-11-20 03:25:16", "statsSkippedReason": "", "body": "Testing the new OpenID Connect authentication mechanism, I've run into what I think is a bug. My OpenID Connect Provider (OP) is Curity, an OP that's passed all the OpenID Foundation's certification tests.\r\n\r\nI can login using this OP. However, in some cases, the OpenIdCredentials gets hung up on the ID token JWT that's returned. \r\n\r\nFor instance, here's an example of a token (that is valid) which hangs up the component:\r\n\r\n`eyJraWQiOiIxNTU1OTM0ODQ3IiwieDV0IjoiOWdCOW9zRldSRHRSMkhtNGNmVnJnWTBGcmZRIiwiYWxnIjoiUlMyNTYifQ.eyJhdF9oYXNoIjoiQTA0NUoxcE5YRk1nYzlXN2wxSk1fUSIsImRlbGVnYXRpb25faWQiOiJjZTBhNjRlNS0xYWY3LTQ2MzEtOGUzNC1mNDE5N2JkYzVjZTAiLCJhY3IiOiJ1cm46c2U6Y3VyaXR5OmF1dGhlbnRpY2F0aW9uOmh0bWwtZm9ybTpodG1sLXByaW1hcnkiLCJzX2hhc2giOiIwc1FtRG9YY3FwcnM4NWUzdy0wbHdBIiwiYXpwIjoiNzZiZTc5Y2ItM2E1Ni00ZTE3LTg3NzYtNDI1Nzc5MjRjYzc2IiwiYXV0aF90aW1lIjoxNTY5NjU4MDk1LCJleHAiOjE1Njk2NjE5OTUsIm5iZiI6MTU2OTY1ODM5NSwianRpIjoiZjJkNWI2YzEtNTIxYi00Y2Y5LThlNWEtOTg5NGJhNmE0MzkyIiwiaXNzIjoiaHR0cHM6Ly9ub3JkaWNhcGlzLmN1cml0eS5pby9-IiwiYXVkIjoiNzZiZTc5Y2ItM2E1Ni00ZTE3LTg3NzYtNDI1Nzc5MjRjYzc2Iiwic3ViIjoibmlrb3MiLCJpYXQiOjE1Njk2NTgzOTUsInB1cnBvc2UiOiJpZCJ9.Wd458zNmXggpkDN6vbS3-aiajh4-VbkmcStLYUqahYJUp9p-AUI_RZttWvwh3UDMG9rWww_ya8KFK_SkPfKooEaSNOjOhw0ox4d-9lgti3J49eRyO20RViXvRHyLVtcjv5IaqvMXgwW60Thubv19OION7DstyArffcxNNSpiqDq6wjd0T2DJ3gSXXlJHLTWrry3svqu1j_GCbHc04XYGicxsusKgc3n22dh4I6p4trdo0Gu5Un0bZ8Yov7IzWItqTgm9X5r9gZlAOLcAuK1WTwkzAwZJ24HgvxKmuYfV_4ZCg_VPN2Op8YPuRAQOgUERpeTv1RDFTOG9GKZIMBVR0A`\r\n\r\nThe error is around base-64 decoding, which OpenID Connect does in a \"special\" way (see RFC 7515). Specifically, the stack trace is this:\r\n\r\n```\r\n2019-09-28T10:13:15:724+0200 WARN  {qtp294247762-17} org.eclipse.jetty.security.openid.OpenIdLoginService:93\r\n java.lang.IllegalArgumentException: Illegal base64 character 2d\r\n\tat java.util.Base64$Decoder.decode0(Base64.java:714) ~[?:1.8.0_181]\r\n\tat java.util.Base64$Decoder.decode(Base64.java:526) ~[?:1.8.0_181]\r\n\tat java.util.Base64$Decoder.decode(Base64.java:549) ~[?:1.8.0_181]\r\n\tat org.eclipse.jetty.security.openid.OpenIdCredentials.decodeJWT(OpenIdCredentials.java:163) ~[jetty-openid-9.4.21.v20190926.jar:9.4.21.v20190926]\r\n...\r\n```\r\n\r\nIn [section 2 of RFC 7515](https://tools.ietf.org/html/rfc7515#section-2) (which OpenID Connect references), it says that base64-encoded parts of the JWT should have the padding removed. This means that the decoder (this new `OpenIdCredentials` class) must first add the padding back before calling `java.util.Base64.Decoder`.", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 52.000277777777775, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/4128"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "joakime", "filteredCommits": [], "commits": {"c37a4ff99de18a235e1c8026ad55c086fd606eaf": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "813fcb79ab5bdb33717e8382a7c0e7711aa1ad93": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2019-09-25 23:13:20", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "c37a4ff99de18a235e1c8026ad55c086fd606eaf", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Jetty 9.4.x 4105 4121 4122 queued thread pool (#4146)\n\nSeveral QTP fixes:\r\n\r\n* #4105 Threads without jobs now check if they should idle die before waiting rather than before, this allows idling under steady load. 3ad6780\r\n* #4121 ThreadFactory behaviour supported by doing thread config within newThread call. 7b306d7\r\n* #4122 Always clear the interrupted status. c37a4ff\r\n   task = queue.poll(timeout);\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n\r\n", "commitParents": ["7810f2dec2db9737fd741fd144e2e05b5807c9ee"], "commitHash": "813fcb79ab5bdb33717e8382a7c0e7711aa1ad93", "commitSpoonAstDiffStats": [{"spoonFilePath": "QueuedThreadPoolTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPoolTest.waitForThreads(org.eclipse.jetty.util.thread.QueuedThreadPool,int)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPoolTest.waitForIdle(org.eclipse.jetty.util.thread.QueuedThreadPool,int)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPoolTest.testSteadyShrink()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPoolTest.waitForReserved(org.eclipse.jetty.util.thread.QueuedThreadPool,int)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPoolTest.testThreadPool()", "DEL": 3, "INS": 2, "UPD": 25, "MOV": 84, "TOT": 114}]}, {"spoonFilePath": "QueuedThreadPool.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPool.Runner.run()", "DEL": 3, "INS": 5, "UPD": 2, "MOV": 13, "TOT": 23}, {"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPool.doStart()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPool.startThread()", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 3, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPool.getQueueSize()", "DEL": 1, "INS": 2, "UPD": 1, "MOV": 1, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPool.setIdleTimeout(int)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPool.newThread(java.lang.Runnable)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 1, "TOT": 3}]}], "nameRev": "813fcb79ab5bdb33717e8382a7c0e7711aa1ad93 tags/jetty-9.4.22.v20191022~46", "commitUser": "gregw", "authoredDateTime": "2019-10-02 22:07:00", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 105, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/thread/QueuedThreadPoolTest.java", "insertions": 78, "deletions": 27}, {"lines": 76, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/thread/QueuedThreadPool.java", "insertions": 44, "deletions": 32}], "commitDateTime": "2019-10-02 22:07:00", "spoonStatsSkippedReason": ""}], "title": "QueuedThreadPool should reset thread interrupted on failed run", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2019-10-02 12:07:35", "statsSkippedReason": "", "body": "The logic found in `QueuedThreadPool.Runner.run()` appears to not handle the `Thread.interrupted()` if the `runJob(job)` call throws an exception.\r\n\r\nhttps://github.com/eclipse/jetty.project/blob/ba728eee5d9e8cfd3b7449b1246546ca2306bb25/jetty-util/src/main/java/org/eclipse/jetty/util/thread/QueuedThreadPool.java#L911-L930", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 6.000277777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/4122"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 3, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 2}, "labels": ["Bug"], "user": "AdrianFarmadin", "filteredCommits": [], "commits": {"ba728eee5d9e8cfd3b7449b1246546ca2306bb25": {"commitUser": "lachlan-roberts", "commitGHEventType": "referenced"}, "3ad6780b27614abeef985e18b77bf56f1ddea0f6": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "813fcb79ab5bdb33717e8382a7c0e7711aa1ad93": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "850848e6568587d4aa59de1c21fbaeee72058313": {"commitUser": "lachlan-roberts", "commitGHEventType": "referenced"}, "1f18ad1be7077c7d0894d87e7f789f19f9956bdd": {"commitUser": "lachlan-roberts", "commitGHEventType": "referenced"}}, "created": "2019-09-19 08:15:20", "commitsDetails": [{"commitMessage": "Issue #4105 - atomically increment idle count when starting new thread in QTP (#4118)\n\n* Issue #4105 - starting a thread in QTP now increments idle count\r\n\r\nSigned-off-by: Lachlan Roberts <lachlan@webtide.com>\r\n\r\n* Issue #4105 - improve comments in test\r\n\r\nSigned-off-by: Lachlan Roberts <lachlan@webtide.com>\r\n", "commitParents": ["39ee316a7fbcecc2d8de01048c24c5627b6f39d7"], "commitHash": "ba728eee5d9e8cfd3b7449b1246546ca2306bb25", "commitSpoonAstDiffStats": [{"spoonFilePath": "QueuedThreadPoolTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPoolTest.TestQueuedThreadPool", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPoolTest.testEnsureThreads()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "QueuedThreadPool.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPool.startThread()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPool.Runner.run()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPool.execute(java.lang.Runnable)", "DEL": 4, "INS": 6, "UPD": 1, "MOV": 4, "TOT": 15}, {"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPool.ensureThreads()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}]}], "nameRev": "ba728eee5d9e8cfd3b7449b1246546ca2306bb25 tags/jetty-9.4.21.v20190926~1", "commitUser": "lachlan-roberts", "authoredDateTime": "2019-09-26 08:15:07", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 112, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/thread/QueuedThreadPoolTest.java", "insertions": 112, "deletions": 0}, {"lines": 21, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/thread/QueuedThreadPool.java", "insertions": 8, "deletions": 13}], "commitDateTime": "2019-09-26 08:15:07", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "3ad6780b27614abeef985e18b77bf56f1ddea0f6", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Jetty 9.4.x 4105 4121 4122 queued thread pool (#4146)\n\nSeveral QTP fixes:\r\n\r\n* #4105 Threads without jobs now check if they should idle die before waiting rather than before, this allows idling under steady load. 3ad6780\r\n* #4121 ThreadFactory behaviour supported by doing thread config within newThread call. 7b306d7\r\n* #4122 Always clear the interrupted status. c37a4ff\r\n   task = queue.poll(timeout);\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n\r\n", "commitParents": ["7810f2dec2db9737fd741fd144e2e05b5807c9ee"], "commitHash": "813fcb79ab5bdb33717e8382a7c0e7711aa1ad93", "commitSpoonAstDiffStats": [{"spoonFilePath": "QueuedThreadPoolTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPoolTest.waitForThreads(org.eclipse.jetty.util.thread.QueuedThreadPool,int)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPoolTest.waitForIdle(org.eclipse.jetty.util.thread.QueuedThreadPool,int)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPoolTest.testSteadyShrink()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPoolTest.waitForReserved(org.eclipse.jetty.util.thread.QueuedThreadPool,int)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPoolTest.testThreadPool()", "DEL": 3, "INS": 2, "UPD": 25, "MOV": 84, "TOT": 114}]}, {"spoonFilePath": "QueuedThreadPool.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPool.Runner.run()", "DEL": 3, "INS": 5, "UPD": 2, "MOV": 13, "TOT": 23}, {"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPool.doStart()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPool.startThread()", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 3, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPool.getQueueSize()", "DEL": 1, "INS": 2, "UPD": 1, "MOV": 1, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPool.setIdleTimeout(int)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPool.newThread(java.lang.Runnable)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 1, "TOT": 3}]}], "nameRev": "813fcb79ab5bdb33717e8382a7c0e7711aa1ad93 tags/jetty-9.4.22.v20191022~46", "commitUser": "gregw", "authoredDateTime": "2019-10-02 22:07:00", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 105, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/thread/QueuedThreadPoolTest.java", "insertions": 78, "deletions": 27}, {"lines": 76, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/thread/QueuedThreadPool.java", "insertions": 44, "deletions": 32}], "commitDateTime": "2019-10-02 22:07:00", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "850848e6568587d4aa59de1c21fbaeee72058313", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "lachlan-roberts", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "1f18ad1be7077c7d0894d87e7f789f19f9956bdd", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "lachlan-roberts", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "QueuedThreadPool increased thread usage and no idle thread decay", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2019-11-14 04:13:32", "statsSkippedReason": "", "body": "I recently updated my Jetty version from 9.4.7.v20170914 to 9.4.20.v20190813 and I noticed increase in JVM threads count from 410 to 2300. The update was done on test environment with stable load.\r\n\r\nAccording to thread dump there is 1912 threads in TIMED_WAITING state.\r\n\r\n```\r\n\"jetty-1982\" #1982 daemon prio=5 os_prio=0 tid=0x00007f9f28019800 nid=0x13ba0 waiting on condition [0x00007f9ae3677000]\r\n   java.lang.Thread.State: TIMED_WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  <0x00000003c0001150> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\n\tat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\r\n\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)\r\n\tat org.eclipse.jetty.util.BlockingArrayQueue.poll(BlockingArrayQueue.java:382)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.idleJobPoll(QueuedThreadPool.java:851)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:890)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n```\r\n\r\nThe active threads were also affected.\r\n![activeThreads](https://user-images.githubusercontent.com/14540375/65227297-ababfb00-dac8-11e9-8c4e-d364b3c44b51.PNG)\r\n\r\n\r\n\r\nIs this a regression in new version?", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 55.000277777777775, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/4105"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["a7856dd6d07557ff39836bb8cc8bdb51fed38480", "157910d79a4a3554774292b767c70de334db27a6", "bb659e0e5825165d14bf9d0c95b9b519e21a2f6f", "2268983a3900d3f5ec5e3dabb0e8ee3f115a887c", "7065196400dc61e0aa80362ade9ee67c3cdd6fca"], "commits": {"157910d79a4a3554774292b767c70de334db27a6": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "7065196400dc61e0aa80362ade9ee67c3cdd6fca": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "c7a3dd4a27d660947ae476f580bf9af25e5cd707": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "bb659e0e5825165d14bf9d0c95b9b519e21a2f6f": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "2268983a3900d3f5ec5e3dabb0e8ee3f115a887c": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "a7856dd6d07557ff39836bb8cc8bdb51fed38480": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2019-09-12 10:35:47", "commitsDetails": [{"commitMessage": "Issue #4084 make deprecated warnings only with debug in jetty-9\n\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\n", "commitParents": ["f85382aa9df43176ee5f213fb613a643c747282c"], "commitHash": "157910d79a4a3554774292b767c70de334db27a6", "commitSpoonAstDiffStats": [{"spoonFilePath": "XmlConfiguration.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.xml.XmlConfiguration.JettyXmlConfiguration.invokeConstructor(java.lang.reflect.Constructor,java.lang.Object[])", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.xml.XmlConfiguration.JettyXmlConfiguration.getField(java.lang.reflect.Field,java.lang.Object)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.xml.XmlConfiguration.JettyXmlConfiguration.setField(java.lang.reflect.Field,java.lang.Object,java.lang.Object)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.xml.XmlConfiguration.JettyXmlConfiguration.invokeMethod(java.lang.reflect.Method,java.lang.Object,java.lang.Object[])", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}], "nameRev": "157910d79a4a3554774292b767c70de334db27a6 tags/jetty-9.4.21.v20190926~9", "commitUser": "gregw", "authoredDateTime": "2019-09-18 15:58:46", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 20, "filePath": "jetty-xml/src/main/java/org/eclipse/jetty/xml/XmlConfiguration.java", "insertions": 12, "deletions": 8}], "commitDateTime": "2019-09-18 15:58:46", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1676 remove deprecated properties from XML\n", "commitParents": ["1b1b2509475855012f72ff730b595a004751a53b"], "commitHash": "7065196400dc61e0aa80362ade9ee67c3cdd6fca", "commitSpoonAstDiffStats": [], "nameRev": "7065196400dc61e0aa80362ade9ee67c3cdd6fca tags/jetty-10.0.0.alpha1~642", "commitUser": "sbordet", "authoredDateTime": "2017-07-19 16:29:13", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 8, "filePath": "jetty-server/src/main/config/etc/jetty-gzip.xml", "insertions": 4, "deletions": 4}, {"lines": 14, "filePath": "jetty-server/src/main/config/etc/jetty-ssl-context.xml", "insertions": 7, "deletions": 7}, {"lines": 6, "filePath": "jetty-jmx/src/main/config/etc/jetty-jmx-remote.xml", "insertions": 3, "deletions": 3}, {"lines": 2, "filePath": "jetty-jaas/src/main/config/etc/jetty-jaas.xml", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-http2/http2-server/src/main/config/etc/jetty-http2.xml", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-http2/http2-server/src/main/config/etc/jetty-http2c.xml", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-server/src/main/config/etc/jetty-debuglog.xml", "insertions": 1, "deletions": 1}, {"lines": 16, "filePath": "jetty-server/src/main/config/etc/jetty-ssl.xml", "insertions": 8, "deletions": 8}, {"lines": 16, "filePath": "jetty-server/src/main/config/etc/jetty-http.xml", "insertions": 8, "deletions": 8}, {"lines": 26, "filePath": "jetty-server/src/main/config/etc/jetty.xml", "insertions": 13, "deletions": 13}, {"lines": 4, "filePath": "jetty-alpn/jetty-alpn-server/src/main/config/etc/jetty-alpn.xml", "insertions": 2, "deletions": 2}, {"lines": 12, "filePath": "jetty-server/src/main/config/etc/jetty-requestlog.xml", "insertions": 6, "deletions": 6}, {"lines": 12, "filePath": "jetty-server/src/main/config/etc/jetty-lowresources.xml", "insertions": 6, "deletions": 6}, {"lines": 8, "filePath": "jetty-home/src/main/resources/etc/jetty-setuid.xml", "insertions": 4, "deletions": 4}, {"lines": 8, "filePath": "jetty-util/src/main/config/etc/console-capture.xml", "insertions": 4, "deletions": 4}, {"lines": 2, "filePath": "jetty-deploy/src/main/config/etc/jetty-deploy.xml", "insertions": 1, "deletions": 1}, {"lines": 6, "filePath": "jetty-rewrite/src/main/config/etc/jetty-rewrite.xml", "insertions": 3, "deletions": 3}], "commitDateTime": "2017-07-19 16:29:13", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #4107 from eclipse/jetty-9.4.x-4084-silence-blockingtimeout-warning\n\nIssue #4084 - squelch deprecated warning on <Set> call.", "commitParents": ["69d52b226335be62389aaf63e763882845b00107", "a7856dd6d07557ff39836bb8cc8bdb51fed38480"], "commitHash": "c7a3dd4a27d660947ae476f580bf9af25e5cd707", "commitSpoonAstDiffStats": [], "nameRev": "c7a3dd4a27d660947ae476f580bf9af25e5cd707 tags/jetty-9.4.21.v20190926~7", "commitUser": "joakime", "authoredDateTime": "2019-09-20 17:54:46", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 280, "filePath": "jetty-xml/src/test/java/org/eclipse/jetty/xml/XmlConfigurationTest.java", "insertions": 258, "deletions": 22}, {"lines": 102, "filePath": "jetty-xml/src/main/java/org/eclipse/jetty/xml/XmlConfiguration.java", "insertions": 81, "deletions": 21}, {"lines": 18, "filePath": "jetty-xml/src/test/java/org/eclipse/jetty/xml/AnnotatedTestConfiguration.java", "insertions": 18, "deletions": 0}], "commitDateTime": "2019-09-20 17:54:46", "spoonStatsSkippedReason": "tooManyChanges"}, {"commitMessage": "Issue #4084 - squelch deprecated warning on <Set> call.\n\n+ The XML warning on Deprecated will be squelched (set to DEBUG)\n  if the <Set> call has a <Property> (or <SystemProperty>)\n  that is using its default value.\n  All other uses will still result in WARN level logging event.\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["2268983a3900d3f5ec5e3dabb0e8ee3f115a887c"], "commitHash": "bb659e0e5825165d14bf9d0c95b9b519e21a2f6f", "commitSpoonAstDiffStats": [], "nameRev": "bb659e0e5825165d14bf9d0c95b9b519e21a2f6f tags/jetty-9.4.21.v20190926~7^2~1", "commitUser": "joakime", "authoredDateTime": "2019-09-19 13:25:53", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 296, "filePath": "jetty-xml/src/test/java/org/eclipse/jetty/xml/XmlConfigurationTest.java", "insertions": 274, "deletions": 22}, {"lines": 90, "filePath": "jetty-xml/src/main/java/org/eclipse/jetty/xml/XmlConfiguration.java", "insertions": 77, "deletions": 13}, {"lines": 18, "filePath": "jetty-xml/src/test/java/org/eclipse/jetty/xml/AnnotatedTestConfiguration.java", "insertions": 18, "deletions": 0}], "commitDateTime": "2019-09-19 13:25:53", "spoonStatsSkippedReason": "tooManyChanges"}, {"commitMessage": "Revert \"Issue #4084 make deprecated warnings only with debug in jetty-9\"\n\nThis reverts commit 157910d79a4a3554774292b767c70de334db27a6.\n", "commitParents": ["69d52b226335be62389aaf63e763882845b00107"], "commitHash": "2268983a3900d3f5ec5e3dabb0e8ee3f115a887c", "commitSpoonAstDiffStats": [{"spoonFilePath": "XmlConfiguration.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.xml.XmlConfiguration.JettyXmlConfiguration.invokeConstructor(java.lang.reflect.Constructor,java.lang.Object[])", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.xml.XmlConfiguration.JettyXmlConfiguration.getField(java.lang.reflect.Field,java.lang.Object)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.xml.XmlConfiguration.JettyXmlConfiguration.setField(java.lang.reflect.Field,java.lang.Object,java.lang.Object)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.xml.XmlConfiguration.JettyXmlConfiguration.invokeMethod(java.lang.reflect.Method,java.lang.Object,java.lang.Object[])", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}]}], "nameRev": "2268983a3900d3f5ec5e3dabb0e8ee3f115a887c tags/jetty-9.4.21.v20190926~7^2~2", "commitUser": "joakime", "authoredDateTime": "2019-09-18 16:18:41", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 20, "filePath": "jetty-xml/src/main/java/org/eclipse/jetty/xml/XmlConfiguration.java", "insertions": 8, "deletions": 12}], "commitDateTime": "2019-09-18 16:18:41", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4084 - Removing System.err|out usage in tests\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["bb659e0e5825165d14bf9d0c95b9b519e21a2f6f"], "commitHash": "a7856dd6d07557ff39836bb8cc8bdb51fed38480", "commitSpoonAstDiffStats": [{"spoonFilePath": "XmlConfigurationTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.xml.XmlConfigurationTest.assertDeprecatedPropertyUnSet(java.lang.Class,org.eclipse.jetty.xml.XmlConfiguration)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.xml.XmlConfigurationTest.testSetDeprecatedMultipleProperties()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.xml.XmlConfigurationTest.testDeprecatedMany()", "DEL": 2, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.xml.XmlConfigurationTest.assertDeprecatedPropertySetToDefaultValue(java.lang.Class,org.eclipse.jetty.xml.XmlConfiguration)", "DEL": 3, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.xml.XmlConfigurationTest.testDeprecatedPropertySetToNewValue()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "a7856dd6d07557ff39836bb8cc8bdb51fed38480 tags/jetty-9.4.21.v20190926~7^2", "commitUser": "joakime", "authoredDateTime": "2019-09-20 17:13:10", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 18, "filePath": "jetty-xml/src/test/java/org/eclipse/jetty/xml/XmlConfigurationTest.java", "insertions": 1, "deletions": 17}], "commitDateTime": "2019-09-20 17:13:10", "spoonStatsSkippedReason": ""}], "title": "Use of HttpConfiguration.setBlockingTimeout(long) in jetty.xml produces warning on jetty-home startup", "spoonStatsSummary": {"spoonMethodsChanged": 4, "DEL": 4.0, "INS": 4.0, "UPD": 0.0, "MOV": 8.0, "TOT": 16.0, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 130, "insertions": 97, "gitFilesChange": 1, "deletions": 33}, "closed": "2019-09-20 22:57:34", "statsSkippedReason": "", "body": "The HttpConfiguration.setBlockingTimeout(long) is deprecated.\r\nThe new deprecation warnings in XmlConfiguration is correctly reporting that our use of setBlockingTimeout(long) is deprecated.\r\nEven if we are not setting it to a value (default value in jetty-home modules / xml is -1)\r\n\r\n```\r\n2019-09-11 16:22:35.810:WARN:oejx.XmlConfiguration:main: Deprecated method public void org.eclipse.jetty.server.HttpConfiguration.setBlockingTimeout(long) in\r\n     file:///home/joakim/code/jetty/distros/jetty-home-9.4.20.v20190813/etc/jetty.xml\r\n```\r\n\r\nShould we make an effort to remove this warning?", "changesInPackagesGIT": ["jetty-xml/src/main/java/org/eclipse/jetty/xml"], "changesInPackagesSPOON": ["org.eclipse.jetty.xml.XmlConfiguration.JettyXmlConfiguration.invokeConstructor(java.lang.reflect.Constructor,java.lang.Object[])", "org.eclipse.jetty.xml.XmlConfiguration.JettyXmlConfiguration.getField(java.lang.reflect.Field,java.lang.Object)", "org.eclipse.jetty.xml.XmlConfiguration.JettyXmlConfiguration.setField(java.lang.reflect.Field,java.lang.Object,java.lang.Object)", "org.eclipse.jetty.xml.XmlConfiguration.JettyXmlConfiguration.invokeMethod(java.lang.reflect.Method,java.lang.Object,java.lang.Object[])"], "ttf": 8.000277777777777, "numCommits": 3, "url": "https://github.com/eclipse/jetty.project/issues/4084"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "janbartel", "filteredCommits": [], "commits": {"ed506cb1f0407ccdea161adaadd3c46ff609885f": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "ac15b1a093bcf6f8d6192dc1b984e62bf63f4e34": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2019-09-10 07:18:27", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "ed506cb1f0407ccdea161adaadd3c46ff609885f", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4076 Fix restart of quickstarted webapp (#4078)\n\nSigned-off-by: Jan Bartel <janb@webtide.com>", "commitParents": ["1722acafa83f49af8e80fb797bab8143a204563d"], "commitHash": "ac15b1a093bcf6f8d6192dc1b984e62bf63f4e34", "commitSpoonAstDiffStats": [{"spoonFilePath": "QuickStartConfiguration.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.quickstart.QuickStartConfiguration.postConfigure(org.eclipse.jetty.webapp.WebAppContext)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "ac15b1a093bcf6f8d6192dc1b984e62bf63f4e34 tags/jetty-10.0.0.alpha1~65^2~1", "commitUser": "janbartel", "authoredDateTime": "2019-09-11 09:38:13", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 12, "filePath": "jetty-quickstart/src/main/java/org/eclipse/jetty/quickstart/QuickStartConfiguration.java", "insertions": 12, "deletions": 0}], "commitDateTime": "2019-09-11 09:38:13", "spoonStatsSkippedReason": ""}], "title": "Restarting quickstarted webapp throws IllegalStateException: ServletContainerInitializersStarter already exists", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2019-09-10 23:43:01", "statsSkippedReason": "", "body": "If a webapp that is started via quickstart is stopped and restarted, it throws:\r\n\r\n```\r\njava.lang.IllegalStateException: ServletContainerInitializersStarter already exists\r\n\tat org.eclipse.jetty.quickstart.QuickStartConfiguration.configure(QuickStartConfiguration.java:186)\r\n\tat org.eclipse.jetty.webapp.Configurations.configure(Configurations.java:484)\r\n\tat org.eclipse.jetty.webapp.WebAppContext.configure(WebAppContext.java:522)\r\n\tat org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1287)\r\n\tat org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:817)\r\n\tat org.eclipse.jetty.servlet.ServletContextHandler.doStart(ServletContextHandler.java:309)\r\n\tat org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:542)\r\n```\r\n\r\nThe problem is that the ServletContainerInitializersStarter is added by the QuickStartConfiguration.configure() method, but never cleared in the QuickStartConfiguration.postconfigure or deconfigure() method.", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 0.0002777777777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/4076"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "irinacen", "filteredCommits": ["7618eae91534178a375e021a65c141da19833c9d"], "commits": {"7618eae91534178a375e021a65c141da19833c9d": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2019-09-06 08:07:50", "commitsDetails": [{"commitMessage": "Issue #4064 - MinimalServlets test and ServletHolder fix\n\n+ Also made ContextHandler warning message about features\n  that are unimplemented (and you should use ServletContextHandler)\n  more clear. (this helped with diagnosing where the bug was\n  in ServletHolder)\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["829cccaef76e93361b48ba499047ac358786dd38"], "commitHash": "7618eae91534178a375e021a65c141da19833c9d", "commitSpoonAstDiffStats": [{"spoonFilePath": "MinimalServlets.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.embedded.MinimalServlets.createServer(int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.embedded.MinimalServlets.HelloServlet.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.embedded.MinimalServlets.main(java.lang.String[])", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 4, "TOT": 7}]}, {"spoonFilePath": "MinimalServletsTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.embedded.MinimalServletsTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ServletHolder.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.ServletHolder.newInstance()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 2, "TOT": 3}]}, {"spoonFilePath": "ContextHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.addFilter(java.lang.String,javax.servlet.Filter)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.addListener(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.addServlet(java.lang.String,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.createFilter(java.lang.Class)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.addListener(java.lang.Class)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.Context.getJspConfigDescriptor()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.addFilter(java.lang.String,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.addFilter(java.lang.String,java.lang.Class)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.setSessionTrackingModes(java.util.Set)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.addServlet(java.lang.String,java.lang.Class)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.getFilterRegistrations()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 2, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.getDefaultSessionTrackingModes()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 2, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.getFilterRegistration(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 2, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.getEffectiveSessionTrackingModes()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 2, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.getServletRegistrations()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 2, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.addServlet(java.lang.String,javax.servlet.Servlet)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.createServlet(java.lang.Class)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.addListener(java.util.EventListener)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.declareRoles(java.lang.String[])", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.getServletRegistration(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 2, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.getJspConfigDescriptor()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.getSessionCookieConfig()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 2, "TOT": 4}]}], "nameRev": "7618eae91534178a375e021a65c141da19833c9d tags/jetty-9.4.21.v20190926~22^2~9", "commitUser": "joakime", "authoredDateTime": "2019-09-06 09:26:06", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 64, "filePath": "examples/embedded/src/test/java/org/eclipse/jetty/embedded/MinimalServletsTest.java", "insertions": 64, "deletions": 0}, {"lines": 46, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/ContextHandler.java", "insertions": 23, "deletions": 23}, {"lines": 25, "filePath": "examples/embedded/src/main/java/org/eclipse/jetty/embedded/MinimalServlets.java", "insertions": 15, "deletions": 10}, {"lines": 7, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletHolder.java", "insertions": 4, "deletions": 3}], "commitDateTime": "2019-09-06 09:26:06", "spoonStatsSkippedReason": ""}], "title": "java.lang.NullPointerException initializing embedded servlet", "spoonStatsSummary": {"spoonMethodsChanged": 27, "DEL": 2, "INS": 26, "UPD": 25, "MOV": 22, "TOT": 75, "spoonFilesChanged": 3}, "gitStatsSummary": {"lines": 78, "insertions": 42, "gitFilesChange": 3, "deletions": 36}, "closed": "2019-09-11 14:20:51", "statsSkippedReason": "", "body": "Embedded servlet raises a NullPointerException when servlet is called on version 9.4.20.v20190813. \r\n\r\nSame issue with JDK8 and JDK11.\r\n\r\nThis DOESN'T happen in any of the previous versions I've tried, including inmediate previous version 9.4.19.v20190610, with the exactly same code, configuration and environment.\r\n\r\nThe issue can be reproduced running the \"Minimal Servlet\" sample from official documentation: https://www.eclipse.org/jetty/documentation/current/embedded-examples.html#embedded-minimal-servlet\r\n\r\nWhen GET call is done to listening ip and port, the received response is HTTP ERROR 500 and the servlet error trace is:\r\n\r\n```\r\n2019-09-06 09:35:55.347:INFO::main: Logging initialized @616ms to org.eclipse.jetty.util.log.StdErrLog\r\n2019-09-06 09:35:55.521:INFO:oejs.Server:main: jetty-9.4.20.v20190813; built: 2019-08-13T21:28:18.144Z; git: 84700530e645e812b336747464d6fbbf370c9a20; jvm 1.8.0_202-b08\r\n2019-09-06 09:35:56.358:INFO:oejs.AbstractConnector:main: Started ServerConnector@dcf3e99{HTTP/1.1,[http/1.1]}{0.0.0.0:8080}\r\n2019-09-06 09:35:56.359:INFO:oejs.Server:main: Started @1651ms\r\n2019-09-06 09:36:03.267:INFO:oeju.TypeUtil:qtp1394438858-16: JVM Runtime does not support Modules\r\n2019-09-06 09:36:03.303:WARN:oejsh.ContextHandler:qtp1394438858-16: Unimplemented - use org.eclipse.jetty.servlet.ServletContextHandler\r\n2019-09-06 09:36:03.306:WARN:oejsh.ContextHandler:qtp1394438858-16: unavailable\r\njava.lang.NullPointerException\r\n\tat org.eclipse.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:656)\r\n\tat org.eclipse.jetty.servlet.ServletHolder.getServlet(ServletHolder.java:511)\r\n\tat org.eclipse.jetty.servlet.ServletHolder.prepare(ServletHolder.java:791)\r\n\tat org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:539)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:190)\r\n\tat org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:482)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\r\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)\r\n\tat org.eclipse.jetty.server.Server.handle(Server.java:494)\r\n\tat org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:374)\r\n\tat org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:268)\r\n\tat org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:311)\r\n\tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:103)\r\n\tat org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:117)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:782)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:918)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n2019-09-06 09:36:03.309:WARN:oejs.HttpChannel:qtp1394438858-16: /\r\njavax.servlet.ServletException: carmelo.embeddedjetty.HelloServlet-2a33fae0@2c5b2ff6==carmelo.embeddedjetty.HelloServlet,jsp=null,order=-1,inst=false,async=true\r\n\tat org.eclipse.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:677)\r\n\tat org.eclipse.jetty.servlet.ServletHolder.getServlet(ServletHolder.java:511)\r\n\tat org.eclipse.jetty.servlet.ServletHolder.prepare(ServletHolder.java:791)\r\n\tat org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:539)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:190)\r\n\tat org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:482)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\r\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)\r\n\tat org.eclipse.jetty.server.Server.handle(Server.java:494)\r\n\tat org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:374)\r\n\tat org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:268)\r\n\tat org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:311)\r\n\tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:103)\r\n\tat org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:117)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:782)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:918)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\nCaused by: \r\njava.lang.NullPointerException\r\n\tat org.eclipse.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:656)\r\n\tat org.eclipse.jetty.servlet.ServletHolder.getServlet(ServletHolder.java:511)\r\n\tat org.eclipse.jetty.servlet.ServletHolder.prepare(ServletHolder.java:791)\r\n\tat org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:539)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:190)\r\n\tat org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:482)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\r\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)\r\n\tat org.eclipse.jetty.server.Server.handle(Server.java:494)\r\n\tat org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:374)\r\n\tat org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:268)\r\n\tat org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:311)\r\n\tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:103)\r\n\tat org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:117)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:782)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:918)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n```", "changesInPackagesGIT": ["jetty-servlet/src/main/java/org/eclipse/jetty/servlet", "examples/embedded/src/main/java/org/eclipse/jetty/embedded", "jetty-server/src/main/java/org/eclipse/jetty/server/handler"], "changesInPackagesSPOON": ["org.eclipse.jetty.embedded.MinimalServlets.HelloServlet.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.addFilter(java.lang.String,javax.servlet.Filter)", "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.addListener(java.util.EventListener)", "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.addServlet(java.lang.String,java.lang.Class)", "org.eclipse.jetty.embedded.MinimalServlets.createServer(int)", "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.addServlet(java.lang.String,java.lang.String)", "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.createFilter(java.lang.Class)", "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.addListener(java.lang.Class)", "org.eclipse.jetty.server.handler.ContextHandler.Context.getJspConfigDescriptor()", "org.eclipse.jetty.server.handler.ContextHandler", "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.addFilter(java.lang.String,java.lang.String)", "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.addFilter(java.lang.String,java.lang.Class)", "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.setSessionTrackingModes(java.util.Set)", "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.addListener(java.lang.String)", "org.eclipse.jetty.embedded.MinimalServlets.main(java.lang.String[])", "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.getFilterRegistrations()", "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.getDefaultSessionTrackingModes()", "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.getFilterRegistration(java.lang.String)", "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.getEffectiveSessionTrackingModes()", "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.getServletRegistrations()", "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.addServlet(java.lang.String,javax.servlet.Servlet)", "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.createServlet(java.lang.Class)", "org.eclipse.jetty.servlet.ServletHolder.newInstance()", "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.declareRoles(java.lang.String[])", "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.getServletRegistration(java.lang.String)", "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.getJspConfigDescriptor()", "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.getSessionCookieConfig()"], "ttf": 5.000277777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/4064"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "SerCeMan", "filteredCommits": ["2b1fe8c38de4462da006db695c7c087ddf2cc24c", "91d3ddced66ba5a9e7aae6b80c62aa5e1e5726f2"], "commits": {"4717a8e049f6cc6d94ea5e5819e58a633c049353": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "2b1fe8c38de4462da006db695c7c087ddf2cc24c": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "91d3ddced66ba5a9e7aae6b80c62aa5e1e5726f2": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2019-09-05 08:51:38", "commitsDetails": [{"commitMessage": "Issue #4057 - Clean up identified by PR review\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["91d3ddced66ba5a9e7aae6b80c62aa5e1e5726f2"], "commitHash": "2b1fe8c38de4462da006db695c7c087ddf2cc24c", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpFieldsTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.HttpFieldsTest.testContainsKeyFalse(java.lang.String)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpField.java", "spoonMethods": []}], "nameRev": "2b1fe8c38de4462da006db695c7c087ddf2cc24c tags/jetty-9.4.21.v20190926~38^2", "commitUser": "joakime", "authoredDateTime": "2019-09-05 12:04:23", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 1, "filePath": "jetty-http/src/test/java/org/eclipse/jetty/http/HttpFieldsTest.java", "insertions": 0, "deletions": 1}, {"lines": 4, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/HttpField.java", "insertions": 0, "deletions": 4}], "commitDateTime": "2019-09-05 12:04:23", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #4059 from eclipse/jetty-9.4.x-4057-response.containsHeader-npe\n\nIssue #4057 - NPE in HttpFields.containsKey", "commitParents": ["3a6b26d2920b015811725c784c8b212606ec2507", "2b1fe8c38de4462da006db695c7c087ddf2cc24c"], "commitHash": "4717a8e049f6cc6d94ea5e5819e58a633c049353", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpFieldsTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.HttpFieldsTest.testContainsKeyFalse(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.HttpFieldsTest.testContainsKeyTrue(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.HttpFieldsTest.testPreventNullField()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpField.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.HttpField.equals(java.lang.Object)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.HttpField", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}]}], "nameRev": "4717a8e049f6cc6d94ea5e5819e58a633c049353 tags/jetty-9.4.21.v20190926~38", "commitUser": "joakime", "authoredDateTime": "2019-09-05 13:08:01", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 37, "filePath": "jetty-http/src/test/java/org/eclipse/jetty/http/HttpFieldsTest.java", "insertions": 37, "deletions": 0}, {"lines": 7, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/HttpField.java", "insertions": 4, "deletions": 3}], "commitDateTime": "2019-09-05 13:08:01", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4057 - NPE in HttpFields.containsKey\n\n+ Preventing HttpField from having a null name.\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["49ba6d1acb230ecc5d2cdca1517d3e97dff4bfbf"], "commitHash": "91d3ddced66ba5a9e7aae6b80c62aa5e1e5726f2", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpFieldsTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.HttpFieldsTest.testContainsKeyFalse(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.HttpFieldsTest.testContainsKeyTrue(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.HttpFieldsTest.testPreventNullField()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpField.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.HttpField.equals(java.lang.Object)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.HttpField", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}]}], "nameRev": "91d3ddced66ba5a9e7aae6b80c62aa5e1e5726f2 tags/jetty-9.4.21.v20190926~38^2~1", "commitUser": "joakime", "authoredDateTime": "2019-09-05 10:04:25", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 38, "filePath": "jetty-http/src/test/java/org/eclipse/jetty/http/HttpFieldsTest.java", "insertions": 38, "deletions": 0}, {"lines": 11, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/HttpField.java", "insertions": 8, "deletions": 3}], "commitDateTime": "2019-09-05 10:04:25", "spoonStatsSkippedReason": ""}], "title": "NullPointerException in o.e.j.h.HttpFields", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 2, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 4, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 15, "insertions": 8, "gitFilesChange": 1, "deletions": 7}, "closed": "2019-09-05 18:09:12", "statsSkippedReason": "", "body": "Hi, Jetty Maintainers!\r\n\r\nAfter upgrading to `9.4.20.v20190813` 3 weeks ago, we started seeing the following exception. \r\n```\r\njava.lang.NullPointerException: null\r\n    at org.eclipse.jetty.http.HttpFields.containsKey(HttpFields.java:240)\r\n    at org.eclipse.jetty.server.Response.containsHeader(Response.java:267)\r\n    at com.company.security.MyFilter.doFilter(MyFilter.java:118)\r\n    at ...\r\n```\r\n\r\nThe code is similar to the following:\r\n\r\n```java\r\nHttpServletResponse httpResponse = (HttpServletResponse) response;\r\n// ...\r\nchain.doFilter(request, response);\r\n// ...\r\nif (httpResponse.containsHeader(LOCATION_KEY)) {\r\n...\r\n}\r\n```\r\n\r\nI couldn't find a real reproducer for the issue. I noticed that there were a few changes introduced to `HttpFields` recently and I was wondering if you could have any ideas on what could be causing this? ", "changesInPackagesGIT": ["jetty-http/src/main/java/org/eclipse/jetty/http"], "changesInPackagesSPOON": ["org.eclipse.jetty.http.HttpField.equals(java.lang.Object)", "org.eclipse.jetty.http.HttpField"], "ttf": 0.0002777777777777778, "numCommits": 2, "url": "https://github.com/eclipse/jetty.project/issues/4057"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "xamino", "filteredCommits": [], "commits": {"7e98e7ff7808ce175d65b68fbb362cb948a341cd": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "894f31e6122f930015a5221394d1e8fb5ba464b5": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2019-09-02 13:38:08", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "7e98e7ff7808ce175d65b68fbb362cb948a341cd", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4048 Multiple proxy ports (#4063)\n\nSupport multiple proxy port values.\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>", "commitParents": ["74e560fb7ac0ddd6482fbc745d2dc61b827677ac"], "commitHash": "894f31e6122f930015a5221394d1e8fb5ba464b5", "commitSpoonAstDiffStats": [{"spoonFilePath": "ForwardedRequestCustomizer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizer.Forwarded.handlePort(org.eclipse.jetty.http.HttpField)", "DEL": 4, "INS": 4, "UPD": 0, "MOV": 4, "TOT": 12}]}, {"spoonFilePath": "ForwardedRequestCustomizerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizerTest.cases()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "894f31e6122f930015a5221394d1e8fb5ba464b5 tags/jetty-9.4.21.v20190926~35", "commitUser": "gregw", "authoredDateTime": "2019-09-06 14:45:00", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 8, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/ForwardedRequestCustomizer.java", "insertions": 4, "deletions": 4}, {"lines": 12, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ForwardedRequestCustomizerTest.java", "insertions": 12, "deletions": 0}], "commitDateTime": "2019-09-06 14:45:00", "spoonStatsSkippedReason": ""}], "title": "Multiple values in X-Forwarded-Port throw NumberFormatException", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2019-09-06 10:03:12", "statsSkippedReason": "", "body": "This issue arose in our development environment, using webpack-dev-server with **two** proxies. Request looks like thus:\r\n```\r\nX-Forwarded-For: 127.0.0.1,127.0.0.1\r\nX-Forwarded-Port: 8080,8080\r\n```\r\nThe multiple port values however cause Jetty to throw:\r\n```\r\njava.lang.RuntimeException: java.lang.NumberFormatException: For input string: \"8080,8080\"\r\n\tat org.eclipse.jetty.server.ForwardedRequestCustomizer.customize(ForwardedRequestCustomizer.java:375) ~[jetty-server-9.4.19.v20190610.jar:9.4.19.v20190610]\r\n\tat org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:363) ~[jetty-server-9.4.19.v20190610.jar:9.4.19.v20190610]\r\n\tat org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:267) ~[jetty-server-9.4.19.v20190610.jar:9.4.19.v20190610]\r\n\tat org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:305) ~[jetty-io-9.4.19.v20190610.jar:9.4.19.v20190610]\r\n\tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:103) ~[jetty-io-9.4.19.v20190610.jar:9.4.19.v20190610]\r\n\tat org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:117) ~[jetty-io-9.4.19.v20190610.jar:9.4.19.v20190610]\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.java:333) ~[jetty-util-9.4.19.v20190610.jar:9.4.19.v20190610]\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:310) ~[jetty-util-9.4.19.v20190610.jar:9.4.19.v20190610]\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:168) ~[jetty-util-9.4.19.v20190610.jar:9.4.19.v20190610]\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.produce(EatWhatYouKill.java:132) ~[jetty-util-9.4.19.v20190610.jar:9.4.19.v20190610]\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:781) ~[jetty-util-9.4.19.v20190610.jar:9.4.19.v20190610]\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:917) ~[jetty-util-9.4.19.v20190610.jar:9.4.19.v20190610]\r\n\tat java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]\r\nCaused by: java.lang.NumberFormatException: For input string: \"8080,8080\"\r\n\tat java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:65) ~[na:na]\r\n\tat java.base/java.lang.Integer.parseInt(Integer.java:652) ~[na:na]\r\n\tat java.base/java.lang.Integer.parseInt(Integer.java:770) ~[na:na]\r\n\tat org.eclipse.jetty.http.HttpField.getIntValue(HttpField.java:75) ~[jetty-http-9.4.19.v20190610.jar:9.4.19.v20190610]\r\n\tat org.eclipse.jetty.server.ForwardedRequestCustomizer$Forwarded.handlePort(ForwardedRequestCustomizer.java:577) ~[jetty-server-9.4.19.v20190610.jar:9.4.19.v20190610]\r\n\tat org.eclipse.jetty.server.ForwardedRequestCustomizer.customize(ForwardedRequestCustomizer.java:370) ~[jetty-server-9.4.19.v20190610.jar:9.4.19.v20190610]\r\n\t... 12 common frames omitted\r\n```\r\n\r\nJetty 9.4.19, but relevant file is still unchanged for 9.4.x \u2013 https://github.com/eclipse/jetty.project/blob/jetty-9.4.x/jetty-server/src/main/java/org/eclipse/jetty/server/ForwardedRequestCustomizer.java#L628 calls https://github.com/eclipse/jetty.project/blob/jetty-9.4.x/jetty-http/src/main/java/org/eclipse/jetty/http/HttpField.java#L74 so it will still throw (since it is not just one port number).\r\n\r\nI'm aware that `X-Forwarded-*` is a mess, and we've fixed it by not adding the headers twice (webpack-dev-server: set `xfwd` only in a single proxy), but the error could well happen in the wild, so reporting for anyone else (independent of whether this should be fixed or not).", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 3.000277777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/4048"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 7, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 2}, "labels": ["Bug", "High Priority", "Sponsored"], "user": "wilkinsona", "filteredCommits": ["2fcb311c568e4f288d2cfdbd191027e7e37b98b2", "7da57151ed31bab515a312e81249743a69ada90c", "f47115c5856921728954cf5c24de106753ee0a0c"], "commits": {"eab8bdddf7a0818dc2b9c0b5152aa85ee2fb7f0b": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "25071c3e99c0eeab6a27aa0033e374b111406521": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "ebc2fa971f82b8195d540882a7231d0f6335ef00": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "443167cdd33717cd2e7fee669d7bae9e16c1aa4c": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "f47115c5856921728954cf5c24de106753ee0a0c": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "ee0f9fc1d031e34a137406b0d184d5ed9f1c0278": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "deaf6fed6559e261ab8d3c43d4e71f4a96978356": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "2fcb311c568e4f288d2cfdbd191027e7e37b98b2": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "7da57151ed31bab515a312e81249743a69ada90c": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "9720fb746d28f537dbda43451e87e5f441245345": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "79b73b14d299453124a64676b993fda30e73314d": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "88663331edbf4013bc8eefa8560b6f4bae0cc770": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2019-08-28 13:02:30", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "eab8bdddf7a0818dc2b9c0b5152aa85ee2fb7f0b", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #4034 from eclipse/jetty-9.4.x-4033-uriutil-equalsignoreencodings\n\nIssue #4033 - Add Lenient percent decode in URIUtil", "commitParents": ["2b72f08f1b583b0fb8cc5f66c28dc2534c77bae4", "2fcb311c568e4f288d2cfdbd191027e7e37b98b2"], "commitHash": "25071c3e99c0eeab6a27aa0033e374b111406521", "commitSpoonAstDiffStats": [{"spoonFilePath": "URIUtil.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.URIUtil.decodePath(java.lang.String,int,int)", "DEL": 3, "INS": 5, "UPD": 5, "MOV": 12, "TOT": 25}, {"spoonMethodName": "org.eclipse.jetty.util.URIUtil.equalsIgnoreEncodings(java.lang.String,java.lang.String)", "DEL": 3, "INS": 5, "UPD": 4, "MOV": 26, "TOT": 38}, {"spoonMethodName": "org.eclipse.jetty.util.URIUtil.lenientPercentDecode(java.lang.String,int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpConnectionTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpConnectionTest.testBadURIencoding()", "DEL": 2, "INS": 1, "UPD": 2, "MOV": 5, "TOT": 10}]}, {"spoonFilePath": "StringUtil.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.StringUtil.isHex(java.lang.String,int,int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "URIUtilTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.URIUtilTest.decodePathSource()", "DEL": 0, "INS": 9, "UPD": 5, "MOV": 1, "TOT": 15}, {"spoonMethodName": "org.eclipse.jetty.util.URIUtilTest.equalsIgnoreEncodingStringFalseSource()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.URIUtilTest.equalsIgnoreEncodingStringTrueSource()", "DEL": 0, "INS": 4, "UPD": 0, "MOV": 0, "TOT": 4}]}], "nameRev": "25071c3e99c0eeab6a27aa0033e374b111406521 tags/jetty-9.4.21.v20190926~43", "commitUser": "joakime", "authoredDateTime": "2019-08-29 07:21:34", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 106, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/URIUtil.java", "insertions": 94, "deletions": 12}, {"lines": 17, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/HttpConnectionTest.java", "insertions": 6, "deletions": 11}, {"lines": 20, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/StringUtil.java", "insertions": 20, "deletions": 0}, {"lines": 33, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/URIUtilTest.java", "insertions": 29, "deletions": 4}], "commitDateTime": "2019-08-29 07:21:34", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4033 - Addressing Lenient URIUtil decode behavior change in test\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["f47115c5856921728954cf5c24de106753ee0a0c"], "commitHash": "2fcb311c568e4f288d2cfdbd191027e7e37b98b2", "commitSpoonAstDiffStats": [{"spoonFilePath": "URIUtil.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.URIUtil.equalsIgnoreEncodings(java.lang.String,java.lang.String)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "HttpConnectionTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpConnectionTest.testBadURIencoding()", "DEL": 2, "INS": 1, "UPD": 2, "MOV": 5, "TOT": 10}]}], "nameRev": "2fcb311c568e4f288d2cfdbd191027e7e37b98b2 tags/jetty-9.4.21.v20190926~43^2", "commitUser": "joakime", "authoredDateTime": "2019-08-28 16:32:19", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 3, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/URIUtil.java", "insertions": 2, "deletions": 1}, {"lines": 17, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/HttpConnectionTest.java", "insertions": 6, "deletions": 11}], "commitDateTime": "2019-08-28 16:32:19", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "443167cdd33717cd2e7fee669d7bae9e16c1aa4c", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4033 - More tests for Lenient URIUtil behavior\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["7da57151ed31bab515a312e81249743a69ada90c"], "commitHash": "f47115c5856921728954cf5c24de106753ee0a0c", "commitSpoonAstDiffStats": [{"spoonFilePath": "URIUtil.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.URIUtil.decodePath(java.lang.String,int,int)", "DEL": 3, "INS": 1, "UPD": 1, "MOV": 3, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.util.URIUtil.lenientPercentDecode(java.lang.String,int)", "DEL": 3, "INS": 1, "UPD": 1, "MOV": 4, "TOT": 9}]}, {"spoonFilePath": "URIUtilTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.URIUtilTest.equalsIgnoreEncodingStringTrueSource()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "StringUtil.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.StringUtil.isHex(java.lang.String,int,int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "f47115c5856921728954cf5c24de106753ee0a0c tags/jetty-9.4.21.v20190926~43^2~1", "commitUser": "joakime", "authoredDateTime": "2019-08-28 12:20:52", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 12, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/URIUtil.java", "insertions": 4, "deletions": 8}, {"lines": 5, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/StringUtil.java", "insertions": 5, "deletions": 0}, {"lines": 2, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/URIUtilTest.java", "insertions": 2, "deletions": 0}], "commitDateTime": "2019-08-28 12:20:52", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4033 Percent Encoded Bad Requests (#4272)\n\n* Modernizing testcase\r\n\r\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\r\n\r\n* Issue #4033 Percent Encoded Bad Requests\r\n\r\nAdded test to demonstrate bad percent encoded request\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n\r\n* Issue #4033 - adding sanity test for percent paths and checkAlias()\r\n\r\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\r\n\r\n* Eliminating 9.3.0.RC0 dependency\r\n\r\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\r\n\r\n* Issue #4033 - More tests for Resource checkAlias() behavior\r\n\r\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\r\n\r\n* Issue #4033 - Splitting badDecodePath\r\n\r\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\r\n\r\n* Issue #4033 - More badDecodePath tests\r\n\r\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\r\n\r\n* Issue #4033 Percent Encoded Bad Requests\r\n\r\nreverted decodePathBehaviour\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n\r\n* testing pull request building\r\n\r\n* Issue #4033\r\n\r\nupdates after review\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n", "commitParents": ["c336616c9655b4fba5023d6496d7633461619927"], "commitHash": "ee0f9fc1d031e34a137406b0d184d5ed9f1c0278", "commitSpoonAstDiffStats": [{"spoonFilePath": "URIUtil.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.URIUtil.decodePath(java.lang.String,int,int)", "DEL": 6, "INS": 5, "UPD": 7, "MOV": 11, "TOT": 29}]}, {"spoonFilePath": "HttpConnectionTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpConnectionTest.testBadURIencoding()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpServerTestBase.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpServerTestBase.testBadURI()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "URIUtilTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.URIUtilTest.decodePathSource()", "DEL": 9, "INS": 1, "UPD": 1, "MOV": 16, "TOT": 27}, {"spoonMethodName": "org.eclipse.jetty.util.URIUtilTest.testBadDecodePath(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ResourceAliasTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.ResourceAliasTest.testNullCharEndingFilename()", "DEL": 2, "INS": 4, "UPD": 14, "MOV": 46, "TOT": 66}, {"spoonMethodName": "org.eclipse.jetty.util.resource.ResourceAliasTest.before()", "DEL": 1, "INS": 0, "UPD": 1, "MOV": 4, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.util.resource.ResourceAliasTest", "DEL": 0, "INS": 1, "UPD": 3, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.util.resource.ResourceAliasTest.beforeClass()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.resource.ResourceAliasTest.testPercentPaths(java.util.function.Function)", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}]}], "nameRev": "ee0f9fc1d031e34a137406b0d184d5ed9f1c0278 tags/jetty-9.4.23.v20191118~35", "commitUser": "gregw", "authoredDateTime": "2019-11-11 12:01:26", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 82, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/URIUtil.java", "insertions": 23, "deletions": 59}, {"lines": 3, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/HttpConnectionTest.java", "insertions": 1, "deletions": 2}, {"lines": 18, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/HttpServerTestBase.java", "insertions": 18, "deletions": 0}, {"lines": 178, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/resource/ResourceAliasTest.java", "insertions": 120, "deletions": 58}, {"lines": 67, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/URIUtilTest.java", "insertions": 55, "deletions": 12}], "commitDateTime": "2019-11-11 12:01:26", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "deaf6fed6559e261ab8d3c43d4e71f4a96978356", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "ebc2fa971f82b8195d540882a7231d0f6335ef00", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4033 - lenient percent decode in URIUtil\n\n+ Allows for preserving decoded Strings like \"X%YZ\"\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["b2ea6a0861efee1b337c9beef7d7db3ca0b86f12"], "commitHash": "7da57151ed31bab515a312e81249743a69ada90c", "commitSpoonAstDiffStats": [{"spoonFilePath": "URIUtil.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.URIUtil.decodePath(java.lang.String,int,int)", "DEL": 3, "INS": 6, "UPD": 4, "MOV": 9, "TOT": 22}, {"spoonMethodName": "org.eclipse.jetty.util.URIUtil.equalsIgnoreEncodings(java.lang.String,java.lang.String)", "DEL": 4, "INS": 3, "UPD": 2, "MOV": 24, "TOT": 33}, {"spoonMethodName": "org.eclipse.jetty.util.URIUtil.lenientPercentDecode(java.lang.String,int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "URIUtilTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.URIUtilTest.decodePathSource()", "DEL": 0, "INS": 9, "UPD": 5, "MOV": 1, "TOT": 15}, {"spoonMethodName": "org.eclipse.jetty.util.URIUtilTest.equalsIgnoreEncodingStringFalseSource()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.URIUtilTest.equalsIgnoreEncodingStringTrueSource()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "StringUtil.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.StringUtil.isHex(java.lang.String,int,int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "7da57151ed31bab515a312e81249743a69ada90c tags/jetty-9.4.21.v20190926~43^2~2", "commitUser": "joakime", "authoredDateTime": "2019-08-28 12:08:18", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 107, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/URIUtil.java", "insertions": 96, "deletions": 11}, {"lines": 15, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/StringUtil.java", "insertions": 15, "deletions": 0}, {"lines": 31, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/URIUtilTest.java", "insertions": 27, "deletions": 4}], "commitDateTime": "2019-08-28 12:08:18", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "9720fb746d28f537dbda43451e87e5f441245345", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "79b73b14d299453124a64676b993fda30e73314d", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "88663331edbf4013bc8eefa8560b6f4bae0cc770", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "Ignore bad percent encodings in paths during URIUtil.equalsIgnoreEncodings()", "spoonStatsSummary": {"spoonMethodsChanged": 4, "DEL": 14.0, "INS": 15.0, "UPD": 8.0, "MOV": 40.0, "TOT": 77.0, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 142.0, "insertions": 122.0, "gitFilesChange": 2, "deletions": 20.0}, "closed": "2019-11-11 01:01:59", "statsSkippedReason": "", "body": "The problem is illustrated by the following test:\r\n\r\n```java\r\n@Test\r\npublic void equalsIgnoreEncodingsHandlesPercentCorrectly() {\r\n\tassertThat(URIUtil.equalsIgnoreEncodings(\"test%25path\", \"test%path\")).isTrue();\r\n}\r\n```\r\n\r\nIt fails with a `NumberFormatException`:\r\n\r\n```\r\njava.lang.NumberFormatException: !hex p\r\n\tat org.eclipse.jetty.util.TypeUtil.convertHexDigit(TypeUtil.java:373)\r\n\tat org.eclipse.jetty.util.URIUtil.equalsIgnoreEncodings(URIUtil.java:1028)\r\n\t\u2026\r\n```\r\n\r\nI discovered this while investigating [this Spring Boot issue](https://github.com/spring-projects/spring-boot/issues/17853) to see if Jetty was affected in any way as well. A more user-facing symptom of the problem in `URIUtil` or `TypeUtil` is, I believe, that a static resource in `META-INF/resources` that includes certain reserved characters in its name will be inaccessible.", "changesInPackagesGIT": ["jetty-util/src/main/java/org/eclipse/jetty/util"], "changesInPackagesSPOON": ["org.eclipse.jetty.util.URIUtil.decodePath(java.lang.String,int,int)", "org.eclipse.jetty.util.StringUtil.isHex(java.lang.String,int,int)", "org.eclipse.jetty.util.URIUtil.equalsIgnoreEncodings(java.lang.String,java.lang.String)", "org.eclipse.jetty.util.URIUtil.lenientPercentDecode(java.lang.String,int)"], "ttf": 74.00027777777778, "numCommits": 3, "url": "https://github.com/eclipse/jetty.project/issues/4033"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 2, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "gregw", "filteredCommits": [], "commits": {"aeb02fb273add2ea7b8e07a19b08e37bd51bdab6": {"commitUser": "lachlan-roberts", "commitGHEventType": "referenced"}, "74e560fb7ac0ddd6482fbc745d2dc61b827677ac": {"commitUser": "lachlan-roberts", "commitGHEventType": "referenced"}, "59d05c0df390a4b69d86895b09c47661180f29ff": {"commitUser": "lachlan-roberts", "commitGHEventType": "referenced"}}, "created": "2019-08-28 02:30:03", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "aeb02fb273add2ea7b8e07a19b08e37bd51bdab6", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "lachlan-roberts", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4031 - stop unopened WebSocketSessions gracefully (#4046)\n\n* Issue #4031 - stop unopened WebSocketSessions gracefully\r\n\r\nSigned-off-by: Lachlan Roberts <lachlan@webtide.com>\r\n\r\n* Issue #4031 - notify onError if shutdown before open\r\n\r\nSigned-off-by: Lachlan Roberts <lachlan@webtide.com>\r\n", "commitParents": ["39a3cd6b3c55059d50326922a3f842c84f0ea9f3"], "commitHash": "74e560fb7ac0ddd6482fbc745d2dc61b827677ac", "commitSpoonAstDiffStats": [{"spoonFilePath": "ConnectionState.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.io.ConnectionState.closing()", "DEL": 2, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.io.ConnectionState", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.io.ConnectionState.wasOpened()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.io.ConnectionState.opening()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "ClientCloseTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.tests.client.ClientCloseTest.testStopWhileOpening()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AbstractWebSocketConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.io.AbstractWebSocketConnection.disconnect()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 3, "TOT": 4}]}], "nameRev": "74e560fb7ac0ddd6482fbc745d2dc61b827677ac tags/jetty-9.4.21.v20190926~36", "commitUser": "lachlan-roberts", "authoredDateTime": "2019-09-06 13:50:33", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 25, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/io/AbstractWebSocketConnection.java", "insertions": 17, "deletions": 8}, {"lines": 49, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/ClientCloseTest.java", "insertions": 49, "deletions": 0}, {"lines": 21, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/io/ConnectionState.java", "insertions": 16, "deletions": 5}], "commitDateTime": "2019-09-06 13:50:33", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "59d05c0df390a4b69d86895b09c47661180f29ff", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "lachlan-roberts", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "websocket.tests.client.ClientConnectTest is flakey in 9.4", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2019-09-06 14:04:40", "statsSkippedReason": "", "body": "[INFO] Running org.eclipse.jetty.websocket.tests.client.ClientConnectTest\r\n[ERROR] Tests run: 12, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 6.226 s <<< FAILURE! - in org.eclipse.jetty.websocket.tests.client.ClientConnectTest\r\n[ERROR] testAltConnect  Time elapsed: 0.034 s  <<< ERROR!\r\njava.lang.RuntimeException: java.lang.IllegalStateException: ConnectionState@493250cf[HANDSHAKING]\r\n\tat org.eclipse.jetty.websocket.tests.client.ClientConnectTest.stopServer(ClientConnectTest.java:156)\r\nCaused by: java.lang.IllegalStateException: ConnectionState@493250cf[HANDSHAKING]\r\n\tat org.eclipse.jetty.websocket.tests.client.ClientConnectTest.stopServer(ClientConnectTest.java:156)\r\n\r\n", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 9.000277777777777, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/4031"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 2, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "tbroyer", "filteredCommits": [], "commits": {"828646f0c86ca9abd343fadd78cb5636897137dd": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "19980ceeb5eb6f18eb88c17b3f6e61565a4d9bae": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "a3a035d675cbda08db6a6429c1cfc16645b75cdd": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2019-08-21 14:37:35", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "828646f0c86ca9abd343fadd78cb5636897137dd", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #4009 ServletContextHandler setSecurityHandler broke handler chain (#4012)\n\n* Issue #4009 ServletContextHandler setSecurityHandler broke handler chain\r\n\r\nSigned-off-by: Jan Bartel <janb@webtide.com>\r\n", "commitParents": ["387e33acaf0dec60bb9c311ac83f7ac02f6243e4"], "commitHash": "19980ceeb5eb6f18eb88c17b3f6e61565a4d9bae", "commitSpoonAstDiffStats": [{"spoonFilePath": "ServletContextHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.ServletContextHandler.setSecurityHandler(org.eclipse.jetty.security.SecurityHandler)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ServletContextHandlerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.ServletContextHandlerTest.testSetSecurityHandler()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletContextHandlerTest.testReplaceHandler().1", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletContextHandlerTest.testFallThrough().2", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "19980ceeb5eb6f18eb88c17b3f6e61565a4d9bae tags/jetty-9.4.21.v20190926~58", "commitUser": "janbartel", "authoredDateTime": "2019-08-27 11:00:09", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 70, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/ServletContextHandlerTest.java", "insertions": 70, "deletions": 0}, {"lines": 2, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletContextHandler.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2019-08-27 11:00:09", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "a3a035d675cbda08db6a6429c1cfc16645b75cdd", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "ServletContextHandler setSecurityHandler broke handler chain", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2019-08-27 01:02:17", "statsSkippedReason": "", "body": "In our app, using an embedded server, this used to work with Jetty 9.4.19:\r\n\r\n```java\r\n    final ServletContextHandler context = new ServletContextHandler(SESSIONS | SECURITY | GZIP);\r\n    // \u2026\r\n    context.setSecurityHandler(new SimpleSecurityHandler(authenticator));\r\n    // \u2026\r\n    ServletHolder resources =\r\n        new ServletHolder(\r\n            \"resources\",\r\n            new DefaultServlet(\r\n                new ResourceService() {\r\n                  @Override\r\n                  @SuppressWarnings(\"squid:S00112\")\r\n                  protected void notFound(HttpServletRequest request, HttpServletResponse response)\r\n                      throws IOException {\r\n                    // For use with history.pushState: return the index for everything unknown.\r\n                    // XXX: filter only extension-less (and/or with .html extension) paths?\r\n                    try {\r\n                      response.setHeader(HttpHeaders.CONTENT_LOCATION, \"/\");\r\n                      request.getRequestDispatcher(\"/\").forward(request, response);\r\n                    } catch (ServletException e) {\r\n                      throw new RuntimeException(e);\r\n                    }\r\n                  }\r\n                }));\r\n    resources.setInitParameter(\"dirAllowed\", \"false\");\r\n    context.addServlet(resources, \"/*\");\r\n```\r\n\r\nbut broke with 9.4.20 in that our `SimpleSecurityHandler` wasn't called for `/index.html` on the forwarded dispatch, when requesting a `/foo/bar/whatever` URL.\r\n\r\nI traced this to this line: https://github.com/eclipse/jetty.project/blame/jetty-9.4.20.v20190813/jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletContextHandler.java#L612\r\n\r\nThis should probably use `_securityHandler` rather than `_sessionHandler` here.\r\n\r\nFortunately, in our case, the workaround is easy: remove the `SECURITY` flag; which is probably a good idea anyway.", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 5.000277777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/4009"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug", "Microsoft Windows"], "user": "DoGi114", "filteredCommits": ["4d8e8050bd1940e8e1913ec62f6c959a088ff128"], "commits": {"4d8e8050bd1940e8e1913ec62f6c959a088ff128": {"commitUser": "joakime", "commitGHEventType": "closed"}}, "created": "2019-08-21 07:01:15", "commitsDetails": [{"commitMessage": "Fixes #4007 - using `user.home` system property instead of $HOME\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["2564a08150bc36e81c02a20fcadfe4b8f9bcf8b3"], "commitHash": "4d8e8050bd1940e8e1913ec62f6c959a088ff128", "commitSpoonAstDiffStats": [{"spoonFilePath": "StartArgs.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.start.StartArgs.findMavenLocalRepoDir()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}], "nameRev": "4d8e8050bd1940e8e1913ec62f6c959a088ff128 tags/jetty-9.4.21.v20190926~52", "commitUser": "joakime", "authoredDateTime": "2019-08-27 08:48:02", "commitGHEventType": "closed", "commitGitStats": [{"lines": 2, "filePath": "jetty-start/src/main/java/org/eclipse/jetty/start/StartArgs.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2019-08-27 08:48:02", "spoonStatsSkippedReason": ""}], "title": "Getting NullPointerException while trying to run jetty start.run on Windows", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 2, "insertions": 1, "gitFilesChange": 1, "deletions": 1}, "closed": "2019-08-29 17:06:24", "statsSkippedReason": "", "body": "I am trying to make jetty server as service, and im using this guide: https://www.eclipse.org/jetty/documentation/current/startup-windows-service.html However I cant make it work, when trying to proceed with:\r\n`java -jar ..\\jetty\\start.jar --add-to-start=deploy,http,console-capture`\r\nim getting this:\r\n```\r\njava.lang.NullPointerException\r\n        at sun.nio.fs.WindowsPathParser.parse(Unknown Source)\r\n        at sun.nio.fs.WindowsPathParser.parse(Unknown Source)\r\n        at sun.nio.fs.WindowsPath.parse(Unknown Source)\r\n        at sun.nio.fs.WindowsFileSystem.getPath(Unknown Source)\r\n        at java.nio.file.Paths.get(Unknown Source)\r\n        at org.eclipse.jetty.start.StartArgs.findMavenLocalRepoDir(StartArgs.java:845)\r\n        at org.eclipse.jetty.start.BaseBuilder.<init>(BaseBuilder.java:90)\r\n        at org.eclipse.jetty.start.Main.start(Main.java:439)\r\n        at org.eclipse.jetty.start.Main.main(Main.java:77)\r\n```", "changesInPackagesGIT": ["jetty-start/src/main/java/org/eclipse/jetty/start"], "changesInPackagesSPOON": ["org.eclipse.jetty.start.StartArgs.findMavenLocalRepoDir()"], "ttf": 8.000277777777777, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/4007"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "gaoxingliang", "filteredCommits": ["c1c241349e76f38588c372723abe85dd13522094", "fba010d33d2302ec2b7356da16a6bb71a1c11fdf", "1254f6eb671a420e470133062b657ebab4fd0ddb", "eaf22630538d18653c3f4409c9d21936f245a07f"], "commits": {"c1c241349e76f38588c372723abe85dd13522094": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "eaf22630538d18653c3f4409c9d21936f245a07f": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "318045cd876dd4fb050ee980a601d5e81ba1ab87": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "fba010d33d2302ec2b7356da16a6bb71a1c11fdf": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "f15ca7765e156fb874c5cf0ecee313e343b12472": {"commitUser": "joakime", "commitGHEventType": "closed"}, "1254f6eb671a420e470133062b657ebab4fd0ddb": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2019-08-15 08:16:10", "commitsDetails": [{"commitMessage": "Issue #3985 - Applying PR Review to CookieCutter\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["1254f6eb671a420e470133062b657ebab4fd0ddb"], "commitHash": "c1c241349e76f38588c372723abe85dd13522094", "commitSpoonAstDiffStats": [{"spoonFilePath": "CookieCutter_LenientTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.CookieCutter_LenientTest.data()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "CookieCutter.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.CookieCutter.isRFC6265RejectedCharacter(char)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.CookieCutter.parseFields()", "DEL": 2, "INS": 2, "UPD": 2, "MOV": 5, "TOT": 11}]}, {"spoonFilePath": "RequestTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testCookies()", "DEL": 0, "INS": 2, "UPD": 1, "MOV": 4, "TOT": 7}]}], "nameRev": "c1c241349e76f38588c372723abe85dd13522094 tags/jetty-9.4.21.v20190926~63^2~1", "commitUser": "joakime", "authoredDateTime": "2019-08-21 12:54:26", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 31, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/CookieCutter.java", "insertions": 20, "deletions": 11}, {"lines": 2, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/CookieCutter_LenientTest.java", "insertions": 1, "deletions": 1}, {"lines": 4, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/RequestTest.java", "insertions": 3, "deletions": 1}], "commitDateTime": "2019-08-21 12:54:26", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3985 - Testcase for CookieCutter parsing issue of bad cookie\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["50b524bb6b0985c966653905701dcf2918cc706a"], "commitHash": "eaf22630538d18653c3f4409c9d21936f245a07f", "commitSpoonAstDiffStats": [{"spoonFilePath": "CookieCutterTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.CookieCutterTest.testMultipleCookies()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "eaf22630538d18653c3f4409c9d21936f245a07f tags/jetty-9.4.21.v20190926~63^2~4", "commitUser": "joakime", "authoredDateTime": "2019-08-15 17:58:53", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 14, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/CookieCutterTest.java", "insertions": 14, "deletions": 0}], "commitDateTime": "2019-08-15 17:58:53", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3985 - Applying PR Review to CookieCutter\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["c1c241349e76f38588c372723abe85dd13522094"], "commitHash": "318045cd876dd4fb050ee980a601d5e81ba1ab87", "commitSpoonAstDiffStats": [{"spoonFilePath": "CookieCutter_LenientTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.CookieCutter_LenientTest.data()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "CookieCutter.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.CookieCutter.isRFC6265RejectedCharacter(char)", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.CookieCutter.parseFields()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.CookieCutter.isRFC6265RejectedCharacter(boolean,char)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}]}], "nameRev": "318045cd876dd4fb050ee980a601d5e81ba1ab87 tags/jetty-9.4.21.v20190926~63^2", "commitUser": "joakime", "authoredDateTime": "2019-08-22 12:46:23", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 35, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/CookieCutter.java", "insertions": 22, "deletions": 13}, {"lines": 2, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/CookieCutter_LenientTest.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2019-08-22 12:46:23", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3985 - Updates to CookieCutter to reject no-equal cookies\n\n* If a cookie has no value it is rejected and not stored.\n  - `name` is rejected\n  - `name=` is accepted, with empty value\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["eaf22630538d18653c3f4409c9d21936f245a07f"], "commitHash": "fba010d33d2302ec2b7356da16a6bb71a1c11fdf", "commitSpoonAstDiffStats": [{"spoonFilePath": "CookieCutter_LenientTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.CookieCutter_LenientTest.data()", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}]}, {"spoonFilePath": "CookieCutter.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.CookieCutter.parseFields()", "DEL": 1, "INS": 10, "UPD": 0, "MOV": 5, "TOT": 16}]}], "nameRev": "fba010d33d2302ec2b7356da16a6bb71a1c11fdf tags/jetty-9.4.21.v20190926~63^2~3", "commitUser": "joakime", "authoredDateTime": "2019-08-16 13:11:40", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 49, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/CookieCutter.java", "insertions": 43, "deletions": 6}, {"lines": 19, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/CookieCutter_LenientTest.java", "insertions": 12, "deletions": 7}], "commitDateTime": "2019-08-16 13:11:40", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #3994 from eclipse/jetty-9.4.x-3985-cookie-parsing\n\nFixes #3985 - Updates to CookieCutter to reject no-equal cookies", "commitParents": ["12e1473fd0617e4d2c69d6e0864d119fc7dd75b7", "318045cd876dd4fb050ee980a601d5e81ba1ab87"], "commitHash": "f15ca7765e156fb874c5cf0ecee313e343b12472", "commitSpoonAstDiffStats": [{"spoonFilePath": "CookieCutterTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.CookieCutterTest.testMultipleCookies()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "CookieCutter_LenientTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.CookieCutter_LenientTest.data()", "DEL": 0, "INS": 4, "UPD": 2, "MOV": 0, "TOT": 6}]}, {"spoonFilePath": "CookieCutter.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.CookieCutter.parseFields()", "DEL": 1, "INS": 7, "UPD": 0, "MOV": 1, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.server.CookieCutter.isRFC6265RejectedCharacter(boolean,char)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "f15ca7765e156fb874c5cf0ecee313e343b12472 tags/jetty-9.4.21.v20190926~63", "commitUser": "joakime", "authoredDateTime": "2019-08-23 07:27:23", "commitGHEventType": "closed", "commitGitStats": [{"lines": 67, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/CookieCutter.java", "insertions": 61, "deletions": 6}, {"lines": 14, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/CookieCutterTest.java", "insertions": 14, "deletions": 0}, {"lines": 20, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/CookieCutter_LenientTest.java", "insertions": 13, "deletions": 7}], "commitDateTime": "2019-08-23 07:27:23", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3985 - Fixing RequestTest\n\n+ Moving overly bad cookie to CookieCutter_LenientTest\n+ Changing expectation in RequestTest.testCookie()\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["fba010d33d2302ec2b7356da16a6bb71a1c11fdf"], "commitHash": "1254f6eb671a420e470133062b657ebab4fd0ddb", "commitSpoonAstDiffStats": [{"spoonFilePath": "CookieCutter_LenientTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.CookieCutter_LenientTest.data()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "RequestTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testCookies()", "DEL": 2, "INS": 0, "UPD": 1, "MOV": 4, "TOT": 7}]}], "nameRev": "1254f6eb671a420e470133062b657ebab4fd0ddb tags/jetty-9.4.21.v20190926~63^2~2", "commitUser": "joakime", "authoredDateTime": "2019-08-16 15:57:26", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 1, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/CookieCutter_LenientTest.java", "insertions": 1, "deletions": 0}, {"lines": 4, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/RequestTest.java", "insertions": 1, "deletions": 3}], "commitDateTime": "2019-08-16 15:57:26", "spoonStatsSkippedReason": ""}], "title": "Improve lenient Cookie parsing", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 3, "INS": 13, "UPD": 2, "MOV": 10, "TOT": 28, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 80, "insertions": 63, "gitFilesChange": 1, "deletions": 17}, "closed": "2019-08-23 12:27:27", "statsSkippedReason": "", "body": "Now we encounter some buggy device Netgear. \r\nit's passing a buggy cookie when login:\r\n```\r\nCookie: testcookie; lmrelayserver.id=abcd; lmrelayserver.detail=efg\r\n```\r\nAfter I call getCookie, I found the latter cookie after the bug cookie `testcookie` is missed.\r\nbelow is a test code:\r\n```\r\nimport org.eclipse.jetty.http.CookieCompliance;\r\nimport org.eclipse.jetty.server.CookieCutter;\r\n\r\nimport javax.servlet.http.Cookie;\r\n\r\npublic class Test {\r\n    public static void main(String[] args) {\r\n        CookieCutter cc = new CookieCutter(CookieCompliance.RFC6265);\r\n        cc.addCookieField(\"testcookie; lmrelayserver.id=abcd; lmrelayserver.detail=efg\");\r\n\r\n        for (Cookie c : cc.getCookies()) {\r\n            System.out.println(c.getName() + \" \" + c.getValue());\r\n        }\r\n    }\r\n}\r\n\r\n```\r\nand output is (only one cookie is got):\r\n```\r\nlmrelayserver.detail efg\r\n```\r\n\r\nAnyway to workaround this? (I worked it around by adding a dummy cookie between testcookie and lmrelayserver.id. but it's not a beautiful solution)", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.CookieCutter.isRFC6265RejectedCharacter(char)", "org.eclipse.jetty.server.CookieCutter.parseFields()"], "ttf": 8.000277777777777, "numCommits": 2, "url": "https://github.com/eclipse/jetty.project/issues/3985"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "gthelleloid", "filteredCommits": ["4ab0be9b1bd2686132682908208b385898fc37bd", "f65e59cadfe15159550566cf3e8488deda3209f4", "472ede48cd35748c4d3d7a5206b96bc068757f57"], "commits": {"d0ec6e7d076517581315cc7746b9c3880556b28e": {"commitUser": "joakime", "commitGHEventType": "closed"}, "f65e59cadfe15159550566cf3e8488deda3209f4": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "4ab0be9b1bd2686132682908208b385898fc37bd": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "472ede48cd35748c4d3d7a5206b96bc068757f57": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2019-08-15 01:48:25", "commitsDetails": [{"commitMessage": "Merge pull request #3995 from eclipse/jetty-9.4.x-3983-jarfileresource-list\n\nFixes #3983 - JarFileResource directory listing is invalid", "commitParents": ["e7765ab5761f1b211c6e690174d070326487a49c", "4ab0be9b1bd2686132682908208b385898fc37bd"], "commitHash": "d0ec6e7d076517581315cc7746b9c3880556b28e", "commitSpoonAstDiffStats": [{"spoonFilePath": "JarFileResource.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.JarFileResource.listEntries()", "DEL": 1, "INS": 1, "UPD": 1, "MOV": 1, "TOT": 4}]}, {"spoonFilePath": "JarResourceTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.JarResourceTest.testEncodedFileName()", "DEL": 1, "INS": 1, "UPD": 3, "MOV": 3, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.util.resource.JarResourceTest.testJarFileCopyToDirectoryTraversal().3.accept(java.io.File,java.lang.String)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 4, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.util.resource.JarResourceTest.testJarFileResourceList_DirWithSpace()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.JarResourceTest", "DEL": 0, "INS": 1, "UPD": 3, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.util.resource.JarResourceTest.testJarFileGetAllResoures()", "DEL": 1, "INS": 2, "UPD": 1, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.util.resource.JarResourceTest.testJarFileCopyToDirectoryTraversal()", "DEL": 14, "INS": 15, "UPD": 18, "MOV": 43, "TOT": 90}, {"spoonMethodName": "org.eclipse.jetty.util.resource.JarResourceTest.testJarFileLastModified()", "DEL": 1, "INS": 2, "UPD": 3, "MOV": 0, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.util.resource.JarResourceTest.testJarFileIsContainedIn()", "DEL": 3, "INS": 4, "UPD": 2, "MOV": 0, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.util.resource.JarResourceTest.listFiles(java.nio.file.Path,java.nio.file.DirectoryStream$Filter)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.JarResourceTest.listFiles(java.nio.file.Path)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.JarResourceTest.testJarFileResourceList()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.JarResourceTest.testJarFileResourceList_PreEncodedEntries()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.JarResourceTest.testJarFileCopyToDirectoryTraversal().1.accept(java.io.File,java.lang.String)", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 4, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.util.resource.JarResourceTest.testJarFile()", "DEL": 11, "INS": 8, "UPD": 10, "MOV": 5, "TOT": 34}, {"spoonMethodName": "org.eclipse.jetty.util.resource.JarResourceTest.testJarFileCopyToDirectoryTraversal().2.accept(java.io.File,java.lang.String)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 4, "TOT": 6}]}], "nameRev": "d0ec6e7d076517581315cc7746b9c3880556b28e tags/jetty-9.4.21.v20190926~66", "commitUser": "joakime", "authoredDateTime": "2019-08-22 15:09:16", "commitGHEventType": "closed", "commitGitStats": [{"lines": 0, "filePath": "jetty-util/src/test/resources/jar-file-resource.jar", "insertions": 0, "deletions": 0}, {"lines": 234, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/resource/JarResourceTest.java", "insertions": 156, "deletions": 78}, {"lines": 8, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/resource/JarFileResource.java", "insertions": 4, "deletions": 4}], "commitDateTime": "2019-08-22 15:09:16", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3983 - Modernizing JarResourceTest\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["d6bd6e6e32cdb1c57f04a2c23915ba7ac0af1b11"], "commitHash": "f65e59cadfe15159550566cf3e8488deda3209f4", "commitSpoonAstDiffStats": [{"spoonFilePath": "JarResourceTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.JarResourceTest.testJarFile()", "DEL": 11, "INS": 8, "UPD": 10, "MOV": 5, "TOT": 34}, {"spoonMethodName": "org.eclipse.jetty.util.resource.JarResourceTest.testJarFileCopyToDirectoryTraversal().3.accept(java.io.File,java.lang.String)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 3, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.util.resource.JarResourceTest", "DEL": 0, "INS": 1, "UPD": 3, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.util.resource.JarResourceTest.testJarFileCopyToDirectoryTraversal()", "DEL": 21, "INS": 17, "UPD": 12, "MOV": 18, "TOT": 68}, {"spoonMethodName": "org.eclipse.jetty.util.resource.JarResourceTest.testJarFileGetAllResoures()", "DEL": 1, "INS": 2, "UPD": 1, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.util.resource.JarResourceTest.testJarFileLastModified()", "DEL": 1, "INS": 2, "UPD": 3, "MOV": 0, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.util.resource.JarResourceTest.testJarFileIsContainedIn()", "DEL": 3, "INS": 4, "UPD": 2, "MOV": 0, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.util.resource.JarResourceTest.listFiles(java.nio.file.Path,java.nio.file.DirectoryStream$Filter)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.JarResourceTest.listFiles(java.nio.file.Path)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.JarResourceTest.testJarFileCopyToDirectoryTraversal().1.accept(java.io.File,java.lang.String)", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 3, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.util.resource.JarResourceTest.testEncodedFileName()", "DEL": 1, "INS": 2, "UPD": 1, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.util.resource.JarResourceTest.testJarFileCopyToDirectoryTraversal().2.accept(java.io.File,java.lang.String)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 3, "TOT": 5}]}], "nameRev": "f65e59cadfe15159550566cf3e8488deda3209f4 tags/jetty-9.4.21.v20190926~66^2~2", "commitUser": "joakime", "authoredDateTime": "2019-08-16 15:13:53", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 160, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/resource/JarResourceTest.java", "insertions": 82, "deletions": 78}], "commitDateTime": "2019-08-16 15:13:53", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3983 - Applying PR review to JarFileResource\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["472ede48cd35748c4d3d7a5206b96bc068757f57"], "commitHash": "4ab0be9b1bd2686132682908208b385898fc37bd", "commitSpoonAstDiffStats": [{"spoonFilePath": "JarFileResource.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.JarFileResource.newConnection()", "DEL": 4, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 7}]}], "nameRev": "4ab0be9b1bd2686132682908208b385898fc37bd tags/jetty-9.4.21.v20190926~66^2", "commitUser": "joakime", "authoredDateTime": "2019-08-21 12:43:25", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 10, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/resource/JarFileResource.java", "insertions": 4, "deletions": 6}], "commitDateTime": "2019-08-21 12:43:25", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3983 - JarFileResource directory listing is invalid\n\n+ Correcting encoded path searching\n+ Adding more unit tests to ensure no regression\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["f65e59cadfe15159550566cf3e8488deda3209f4"], "commitHash": "472ede48cd35748c4d3d7a5206b96bc068757f57", "commitSpoonAstDiffStats": [{"spoonFilePath": "JarFileResource.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.JarFileResource.newConnection()", "DEL": 3, "INS": 4, "UPD": 0, "MOV": 0, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.util.resource.JarFileResource.listEntries()", "DEL": 1, "INS": 1, "UPD": 1, "MOV": 1, "TOT": 4}]}, {"spoonFilePath": "JarResourceTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.JarResourceTest.testJarFileResourceList_PreEncodedEntries()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.JarResourceTest.testJarFileResourceList()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.JarResourceTest.testJarFileCopyToDirectoryTraversal()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.resource.JarResourceTest.testJarFileResourceList_DirWithSpace()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "472ede48cd35748c4d3d7a5206b96bc068757f57 tags/jetty-9.4.21.v20190926~66^2~1", "commitUser": "joakime", "authoredDateTime": "2019-08-16 15:48:42", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 0, "filePath": "jetty-util/src/test/resources/jar-file-resource.jar", "insertions": 0, "deletions": 0}, {"lines": 78, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/resource/JarResourceTest.java", "insertions": 76, "deletions": 2}, {"lines": 14, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/resource/JarFileResource.java", "insertions": 8, "deletions": 6}], "commitDateTime": "2019-08-16 15:48:42", "spoonStatsSkippedReason": ""}], "title": "JarFileResource incorrectly lists the contents of directories with spaces", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 8, "INS": 8, "UPD": 1, "MOV": 1, "TOT": 18, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 24, "insertions": 12, "gitFilesChange": 1, "deletions": 12}, "closed": "2019-08-22 20:09:20", "statsSkippedReason": "", "body": "In [Issue 1539](https://github.com/eclipse/jetty.project/issues/1539), I noted JarFileResource failed to serve any resource with a space in its name that is located in a jar file. While my patch fixed that problem, it did not fix a related problem: a directory with a space in its name that is located in a jar file will not list any entries when queried for directory listing.\r\n\r\nI have attached a zip file with two files:\r\n\r\n1. test.jar, which contains a directory named \"dir1\" with a file \"file1\" and a directory named \"dir 2\" with a file \"file2\" (note the space in the second directory name).\r\n2. JarDirWithSpaceTest.java, which shows that JarFileResource.list() returns the wrong number of files in \"dir 2\".\r\n\r\nThe Java file was compiled and run with a classpath including jetty-util-9.4.11.v20180605.jar.\r\n\r\nThe problem lies in JarFileResource.listEntries() in the line\r\n\r\nString dir=_urlString.substring(_urlString.lastIndexOf(\"!/\")+2);\r\n\r\nHere, as in issue 1539, the substring value must be decoded before use. The fix is to change the line to \r\n\r\nString dir=URIUtil.decodePath(_urlString.substring(_urlString.lastIndexOf(\"!/\")+2));\r\n", "changesInPackagesGIT": ["jetty-util/src/main/java/org/eclipse/jetty/util/resource"], "changesInPackagesSPOON": ["org.eclipse.jetty.util.resource.JarFileResource.newConnection()", "org.eclipse.jetty.util.resource.JarFileResource.listEntries()"], "ttf": 7.000277777777778, "numCommits": 2, "url": "https://github.com/eclipse/jetty.project/issues/3983"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 2}, "labels": ["Bug"], "user": "harbulot", "filteredCommits": ["fec01a46284dfe8ce6f00bfa8d22ae85d2c602f0", "3940baea9c40ed8524a3fd849dfea79e21ff7e1a", "4b17d28cb085b2c33ace9d45f401295d2e200f43", "72c05bc8baac40cb975d78cbbaf8e9986bd71ff2"], "commits": {"3940baea9c40ed8524a3fd849dfea79e21ff7e1a": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "fec01a46284dfe8ce6f00bfa8d22ae85d2c602f0": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "4b17d28cb085b2c33ace9d45f401295d2e200f43": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "d10fea9b7eeee0e37f896f9bf9bb486946f21f8f": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "982717cc775db1b78021e92b78a4d2b6302841fd": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "72c05bc8baac40cb975d78cbbaf8e9986bd71ff2": {"commitUser": "joakime", "commitGHEventType": "closed"}}, "created": "2019-08-13 11:34:49", "commitsDetails": [{"commitMessage": "Fixes #3969 - Adding comments from PR review\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["72c05bc8baac40cb975d78cbbaf8e9986bd71ff2"], "commitHash": "3940baea9c40ed8524a3fd849dfea79e21ff7e1a", "commitSpoonAstDiffStats": [{"spoonFilePath": "ForwardedRequestCustomizer.java", "spoonMethods": []}], "nameRev": "3940baea9c40ed8524a3fd849dfea79e21ff7e1a tags/jetty-9.4.20.v20190813~2^2~1", "commitUser": "joakime", "authoredDateTime": "2019-08-13 15:56:11", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 3, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/ForwardedRequestCustomizer.java", "insertions": 2, "deletions": 1}], "commitDateTime": "2019-08-13 15:56:11", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #3969 - Changing TYPE to class from PR review\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["3940baea9c40ed8524a3fd849dfea79e21ff7e1a"], "commitHash": "fec01a46284dfe8ce6f00bfa8d22ae85d2c602f0", "commitSpoonAstDiffStats": [{"spoonFilePath": "ForwardedRequestCustomizer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizer.updateForwardedHandle(java.lang.invoke.MethodHandles$Lookup,java.lang.String,java.lang.String)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}], "nameRev": "fec01a46284dfe8ce6f00bfa8d22ae85d2c602f0 tags/jetty-9.4.20.v20190813~2^2", "commitUser": "joakime", "authoredDateTime": "2019-08-13 16:00:18", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/ForwardedRequestCustomizer.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2019-08-13 16:00:18", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3969 - adding testcase to verify behavior\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["699f83263273c36ebf721d0e517f8304beeb7180"], "commitHash": "4b17d28cb085b2c33ace9d45f401295d2e200f43", "commitSpoonAstDiffStats": [{"spoonFilePath": "ForwardedRequestCustomizerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizerTest.testAllXForwarded()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "4b17d28cb085b2c33ace9d45f401295d2e200f43 tags/jetty-9.4.20.v20190813~3^2", "commitUser": "joakime", "authoredDateTime": "2019-08-13 07:30:14", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 23, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ForwardedRequestCustomizerTest.java", "insertions": 23, "deletions": 0}], "commitDateTime": "2019-08-13 07:30:14", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #3970 from eclipse/jetty-9.4.x-3969-xforwarded-host\n\nIssue #3969 - adding testcase to verify Host & X-Forwarded behavior", "commitParents": ["e4b4a30c4c79983b6bdf4d43b1a706e8213a06b0", "4b17d28cb085b2c33ace9d45f401295d2e200f43"], "commitHash": "d10fea9b7eeee0e37f896f9bf9bb486946f21f8f", "commitSpoonAstDiffStats": [{"spoonFilePath": "ForwardedRequestCustomizerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizerTest.testAllXForwarded()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "d10fea9b7eeee0e37f896f9bf9bb486946f21f8f tags/jetty-9.4.20.v20190813~3", "commitUser": "joakime", "authoredDateTime": "2019-08-13 09:16:08", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 23, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ForwardedRequestCustomizerTest.java", "insertions": 23, "deletions": 0}], "commitDateTime": "2019-08-13 09:16:08", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #3969 - Fixing X-Forwarded-Port header setter\n\n+ Fixing ForwardedRequestCustomizer.getForwardedPortHeader()\n+ Fixing ForwardedRequestCustomizer.setForwardedPortHeader(String)\n+ Refactoring unit tests:\n  + Tests default ForwardedRequestCustomizer behavior\n    on one Connector\n  + Tests header configured ForwardedRequestCustomizer behavior\n    on different Connector\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["d10fea9b7eeee0e37f896f9bf9bb486946f21f8f"], "commitHash": "72c05bc8baac40cb975d78cbbaf8e9986bd71ff2", "commitSpoonAstDiffStats": [], "nameRev": "72c05bc8baac40cb975d78cbbaf8e9986bd71ff2 tags/jetty-9.4.20.v20190813~2^2~2", "commitUser": "joakime", "authoredDateTime": "2019-08-13 12:39:30", "commitGHEventType": "closed", "commitGitStats": [{"lines": 59, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/ForwardedRequestCustomizer.java", "insertions": 36, "deletions": 23}, {"lines": 1125, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ForwardedRequestCustomizerTest.java", "insertions": 567, "deletions": 558}], "commitDateTime": "2019-08-13 12:39:30", "spoonStatsSkippedReason": "tooManyChanges"}, {"commitMessage": "Merge pull request #3972 from eclipse/jetty-9.4.x-3969-forwarded-headers-testing\n\nFixes #3969 - Fixing X-Forwarded-Port header setter", "commitParents": ["d10fea9b7eeee0e37f896f9bf9bb486946f21f8f", "fec01a46284dfe8ce6f00bfa8d22ae85d2c602f0"], "commitHash": "982717cc775db1b78021e92b78a4d2b6302841fd", "commitSpoonAstDiffStats": [], "nameRev": "982717cc775db1b78021e92b78a4d2b6302841fd tags/jetty-9.4.20.v20190813~2", "commitUser": "joakime", "authoredDateTime": "2019-08-13 16:01:32", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 62, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/ForwardedRequestCustomizer.java", "insertions": 38, "deletions": 24}, {"lines": 1125, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ForwardedRequestCustomizerTest.java", "insertions": 567, "deletions": 558}], "commitDateTime": "2019-08-13 16:01:32", "spoonStatsSkippedReason": "tooManyChanges"}], "title": "X-Forwarded-Port header customization isn't possible", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0.0, "INS": 0.0, "UPD": 2.0, "MOV": 0.0, "TOT": 2.0, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 64, "insertions": 39, "gitFilesChange": 1, "deletions": 25}, "closed": "2019-08-13 21:01:36", "statsSkippedReason": "", "body": "When setting up a Jetty 9.4.19 behind an Apache Httpd reverse proxy, the `Host` header says `443` and the request URL's authority part is also just `443` (no host name).\r\n\r\n\r\nThese are the Apache settings:\r\n\r\n```\r\n    RequestHeader set X-Forwarded-Proto \"https\"\r\n    RequestHeader set X-Forwarded-Port 443\r\n```\r\n\r\nWhen debugging the headers (via `request.getHeader(...)`), I have:\r\n\r\n```\r\nX-Forwarded-Proto: https\r\nX-Forwarded-Host: www.example.com\r\nX-Forwarded-Port: 443\r\nX-Forwarded-For: x.x.x.x\r\nX-Forwarded-Server: www.example.com\r\nHost: 443\r\n```\r\n\r\n`request.getRequestURL()` also gives `https://443/...` (just `443` instead of the actual host).\r\n\r\n\r\nCould this be due to a typo in [ForwardedRequestCustomizer.java](https://github.com/eclipse/jetty.project/blob/jetty-9.4.19.v20190610/jetty-server/src/main/java/org/eclipse/jetty/server/ForwardedRequestCustomizer.java#L246)?\r\n\r\nLooking at this, although the method name would suggest it's meant to set the forwarded port, it actually sets the forwarded **host**.\r\n\r\n```java\r\n    public void setForwardedPortHeader(String forwardedPortHeader)\r\n    {\r\n        if (_forwardedHostHeader == null || !_forwardedHostHeader.equalsIgnoreCase(forwardedPortHeader))\r\n        {\r\n            _forwardedHostHeader = forwardedPortHeader;\r\n            updateHandles();\r\n        }\r\n    }\r\n```\r\n\r\nA workaround is to remove `RequestHeader set X-Forwarded-Port 443` from the Apache configuration altogether (it seems to help in some cases). However, I'm not sure setting the host with the port setter was intended.", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.ForwardedRequestCustomizer.updateForwardedHandle(java.lang.invoke.MethodHandles$Lookup,java.lang.String,java.lang.String)"], "ttf": 0.0002777777777777778, "numCommits": 3, "url": "https://github.com/eclipse/jetty.project/issues/3969"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "sbordet", "filteredCommits": ["c7867cdd5ee24101dfcc872741b6ba6d7ed1a820"], "commits": {"2f664398f794a70c9e70b14245877d60763ea920": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "c7867cdd5ee24101dfcc872741b6ba6d7ed1a820": {"commitUser": "sbordet", "commitGHEventType": "closed"}, "63798f666403cdd0c93ccaeb2f091a82896e87ad": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2019-08-11 14:00:19", "commitsDetails": [{"commitMessage": "Merge pull request #4069 from eclipse/jetty-9.4.x-3956-http2_remove_fields\n\nFixes #3956 - Remove and warn illegal HTTP/2 response headers.", "commitParents": ["8c1e0b07144c545d0b45690e5d9db785002afc39", "63798f666403cdd0c93ccaeb2f091a82896e87ad"], "commitHash": "2f664398f794a70c9e70b14245877d60763ea920", "commitSpoonAstDiffStats": [{"spoonFilePath": "HpackFieldPreEncoder.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.hpack.HpackFieldPreEncoder.getEncodedField(org.eclipse.jetty.http.HttpHeader,java.lang.String,java.lang.String)", "DEL": 0, "INS": 0, "UPD": 4, "MOV": 0, "TOT": 4}]}, {"spoonFilePath": "HpackTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.hpack.HpackTest.encodeDecodeResponseTest()", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.http2.hpack.HpackTest.assertMetadataSame(org.eclipse.jetty.http.MetaData,org.eclipse.jetty.http.MetaData)", "DEL": 1, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.http2.hpack.HpackTest.assertHttpFieldsSame(org.eclipse.jetty.http.HttpFields,org.eclipse.jetty.http.HttpFields)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.http2.hpack.HpackTest.encodeDecodeTooLargeTest()", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.http2.hpack.HpackTest.testTETrailers()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.hpack.HpackTest.assertHttpFieldsSame(java.lang.String,org.eclipse.jetty.http.HttpFields,org.eclipse.jetty.http.HttpFields)", "DEL": 3, "INS": 0, "UPD": 1, "MOV": 7, "TOT": 11}, {"spoonMethodName": "org.eclipse.jetty.http2.hpack.HpackTest.evictReferencedFieldTest()", "DEL": 5, "INS": 6, "UPD": 3, "MOV": 0, "TOT": 14}, {"spoonMethodName": "org.eclipse.jetty.http2.hpack.HpackTest.testHopHeadersAreRemoved()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.hpack.HpackTest.assertMetadataSame(org.eclipse.jetty.http.MetaData$Response,org.eclipse.jetty.http.MetaData$Response)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "HpackEncoder.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.hpack.HpackEncoder", "DEL": 4, "INS": 0, "UPD": 7, "MOV": 1, "TOT": 12}, {"spoonMethodName": "org.eclipse.jetty.http2.hpack.HpackEncoder.encode(java.nio.ByteBuffer,org.eclipse.jetty.http.HttpField)", "DEL": 0, "INS": 0, "UPD": 4, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.http2.hpack.HpackEncoder.encode(java.nio.ByteBuffer,org.eclipse.jetty.http.MetaData)", "DEL": 7, "INS": 8, "UPD": 5, "MOV": 10, "TOT": 30}]}], "nameRev": "2f664398f794a70c9e70b14245877d60763ea920 tags/jetty-9.4.21.v20190926~20", "commitUser": "sbordet", "authoredDateTime": "2019-09-12 14:16:43", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 102, "filePath": "jetty-http2/http2-hpack/src/test/java/org/eclipse/jetty/http2/hpack/HpackTest.java", "insertions": 78, "deletions": 24}, {"lines": 62, "filePath": "jetty-http2/http2-hpack/src/main/java/org/eclipse/jetty/http2/hpack/HpackEncoder.java", "insertions": 31, "deletions": 31}, {"lines": 8, "filePath": "jetty-http2/http2-hpack/src/main/java/org/eclipse/jetty/http2/hpack/HpackFieldPreEncoder.java", "insertions": 4, "deletions": 4}], "commitDateTime": "2019-09-12 14:16:43", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #3956 - Remove and warn illegal HTTP/2 response headers.\n\nImplemented RFC 7540 8.1.2.2.\nFields that should be removed are now dropped.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["eb5d4ece3936deb602403d0d986212ef8e46a959"], "commitHash": "c7867cdd5ee24101dfcc872741b6ba6d7ed1a820", "commitSpoonAstDiffStats": [{"spoonFilePath": "HpackTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.hpack.HpackTest.encodeDecodeResponseTest()", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.http2.hpack.HpackTest.assertMetadataSame(org.eclipse.jetty.http.MetaData,org.eclipse.jetty.http.MetaData)", "DEL": 1, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.http2.hpack.HpackTest.assertHttpFieldsSame(org.eclipse.jetty.http.HttpFields,org.eclipse.jetty.http.HttpFields)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.http2.hpack.HpackTest.encodeDecodeTooLargeTest()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.hpack.HpackTest.testTETrailers()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.hpack.HpackTest.assertHttpFieldsSame(java.lang.String,org.eclipse.jetty.http.HttpFields,org.eclipse.jetty.http.HttpFields)", "DEL": 3, "INS": 0, "UPD": 1, "MOV": 7, "TOT": 11}, {"spoonMethodName": "org.eclipse.jetty.http2.hpack.HpackTest.evictReferencedFieldTest()", "DEL": 2, "INS": 2, "UPD": 2, "MOV": 0, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.http2.hpack.HpackTest.testHopHeadersAreRemoved()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.hpack.HpackTest.assertMetadataSame(org.eclipse.jetty.http.MetaData$Response,org.eclipse.jetty.http.MetaData$Response)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "HpackEncoder.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.hpack.HpackEncoder", "DEL": 5, "INS": 1, "UPD": 1, "MOV": 2, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.http2.hpack.HpackEncoder.encode(java.nio.ByteBuffer,org.eclipse.jetty.http.MetaData)", "DEL": 6, "INS": 6, "UPD": 4, "MOV": 9, "TOT": 25}]}], "nameRev": "c7867cdd5ee24101dfcc872741b6ba6d7ed1a820 tags/jetty-9.4.21.v20190926~20^2~1", "commitUser": "sbordet", "authoredDateTime": "2019-09-09 19:47:06", "commitGHEventType": "closed", "commitGitStats": [{"lines": 88, "filePath": "jetty-http2/http2-hpack/src/test/java/org/eclipse/jetty/http2/hpack/HpackTest.java", "insertions": 70, "deletions": 18}, {"lines": 38, "filePath": "jetty-http2/http2-hpack/src/main/java/org/eclipse/jetty/http2/hpack/HpackEncoder.java", "insertions": 19, "deletions": 19}], "commitDateTime": "2019-09-09 19:47:06", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #3956 - Remove and warn illegal HTTP/2 response headers.\n\nUpdates after review.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["c7867cdd5ee24101dfcc872741b6ba6d7ed1a820"], "commitHash": "63798f666403cdd0c93ccaeb2f091a82896e87ad", "commitSpoonAstDiffStats": [{"spoonFilePath": "HpackFieldPreEncoder.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.hpack.HpackFieldPreEncoder.getEncodedField(org.eclipse.jetty.http.HttpHeader,java.lang.String,java.lang.String)", "DEL": 0, "INS": 0, "UPD": 4, "MOV": 0, "TOT": 4}]}, {"spoonFilePath": "HpackTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.hpack.HpackTest.evictReferencedFieldTest()", "DEL": 3, "INS": 4, "UPD": 1, "MOV": 0, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.http2.hpack.HpackTest.testHopHeadersAreRemoved()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.hpack.HpackTest.encodeDecodeTooLargeTest()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "HpackEncoder.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.hpack.HpackEncoder", "DEL": 0, "INS": 1, "UPD": 7, "MOV": 0, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.http2.hpack.HpackEncoder.encode(java.nio.ByteBuffer,org.eclipse.jetty.http.HttpField)", "DEL": 0, "INS": 0, "UPD": 4, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.http2.hpack.HpackEncoder.encode(java.nio.ByteBuffer,org.eclipse.jetty.http.MetaData)", "DEL": 6, "INS": 7, "UPD": 3, "MOV": 5, "TOT": 21}]}], "nameRev": "63798f666403cdd0c93ccaeb2f091a82896e87ad tags/jetty-9.4.21.v20190926~20^2", "commitUser": "sbordet", "authoredDateTime": "2019-09-11 23:55:25", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 16, "filePath": "jetty-http2/http2-hpack/src/test/java/org/eclipse/jetty/http2/hpack/HpackTest.java", "insertions": 9, "deletions": 7}, {"lines": 48, "filePath": "jetty-http2/http2-hpack/src/main/java/org/eclipse/jetty/http2/hpack/HpackEncoder.java", "insertions": 24, "deletions": 24}, {"lines": 8, "filePath": "jetty-http2/http2-hpack/src/main/java/org/eclipse/jetty/http2/hpack/HpackFieldPreEncoder.java", "insertions": 4, "deletions": 4}], "commitDateTime": "2019-09-11 23:55:25", "spoonStatsSkippedReason": ""}], "title": "Remove and warn on use of illegal HTTP/2 response headers", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 11, "INS": 7, "UPD": 5, "MOV": 11, "TOT": 34, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 38, "insertions": 19, "gitFilesChange": 1, "deletions": 19}, "closed": "2019-09-12 12:16:47", "statsSkippedReason": "", "body": "We should remove (and warn about) illegal HTTP/2 response headers that may be set by applications, such as `Transfer-Encoding`, as found in #3904.", "changesInPackagesGIT": ["jetty-http2/http2-hpack/src/main/java/org/eclipse/jetty/http2/hpack"], "changesInPackagesSPOON": ["org.eclipse.jetty.http2.hpack.HpackEncoder", "org.eclipse.jetty.http2.hpack.HpackEncoder.encode(java.nio.ByteBuffer,org.eclipse.jetty.http.MetaData)"], "ttf": 31.00027777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/3956"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 3, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "swankjesse", "filteredCommits": ["b9b79a6ad75a8548d7f7e86e36d4fda9c052b72b"], "commits": {"f484b83c2ea6dcd6174498b7fbb4a0069be60f87": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "fa0e7850be1d215469f007acd6e9af519b7e667a": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "b9b79a6ad75a8548d7f7e86e36d4fda9c052b72b": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "4b7ba20aae3680c976495a864115cb2a9fc05111": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "6c1b5982a5577d6110ce8c985424f823673bd6cc": {"commitUser": "sbordet", "commitGHEventType": "closed"}}, "created": "2019-08-01 18:26:25", "commitsDetails": [{"commitMessage": "Merge pull request #3938 from eclipse/jetty-9.4.x-3929-http2_deadlock_stopping_server\n\nFixes #3929 - Deadlock between new HTTP2Connection() and Server.stop().", "commitParents": ["6c4412bd75cb023df17136bd798feea76ff91798", "b9b79a6ad75a8548d7f7e86e36d4fda9c052b72b"], "commitHash": "fa0e7850be1d215469f007acd6e9af519b7e667a", "commitSpoonAstDiffStats": [{"spoonFilePath": "ContainerLifeCycleTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.component.ContainerLifeCycleTest.testFailedAutoBeanIsNotRestarted()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.component.ContainerLifeCycleTest.InheritedListenerLifeCycle", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.component.ContainerLifeCycleTest.testDumpable()", "DEL": 12, "INS": 2, "UPD": 0, "MOV": 16, "TOT": 30}, {"spoonMethodName": "org.eclipse.jetty.util.component.ContainerLifeCycleTest.testGetBeans()", "DEL": 8, "INS": 8, "UPD": 4, "MOV": 28, "TOT": 48}, {"spoonMethodName": "org.eclipse.jetty.util.component.ContainerLifeCycleTest.testFailedManagedBeanCanBeRestarted()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.component.ContainerLifeCycleTest.testBeanStoppingAddedToStartingBean()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.component.ContainerLifeCycleTest.testIllegalToStartAfterDestroy()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}]}, {"spoonFilePath": "ContainerLifeCycle.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.component.ContainerLifeCycle.doStart()", "DEL": 1, "INS": 2, "UPD": 1, "MOV": 4, "TOT": 8}]}], "nameRev": "fa0e7850be1d215469f007acd6e9af519b7e667a tags/jetty-9.4.20.v20190813~20", "commitUser": "sbordet", "authoredDateTime": "2019-08-07 12:34:15", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 12, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/component/ContainerLifeCycle.java", "insertions": 7, "deletions": 5}, {"lines": 143, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/component/ContainerLifeCycleTest.java", "insertions": 118, "deletions": 25}], "commitDateTime": "2019-08-07 12:34:15", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #3929 - Deadlock between new HTTP2Connection() and Server.stop().\n\nCode cleanup.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["4b7ba20aae3680c976495a864115cb2a9fc05111"], "commitHash": "b9b79a6ad75a8548d7f7e86e36d4fda9c052b72b", "commitSpoonAstDiffStats": [{"spoonFilePath": "ContainerLifeCycleTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.component.ContainerLifeCycleTest.InheritedListenerLifeCycle", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.component.ContainerLifeCycleTest.testGetBeans()", "DEL": 13, "INS": 17, "UPD": 0, "MOV": 0, "TOT": 30}, {"spoonMethodName": "org.eclipse.jetty.util.component.ContainerLifeCycleTest.testIllegalToStartAfterDestroy()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.component.ContainerLifeCycleTest.testDumpable()", "DEL": 12, "INS": 2, "UPD": 0, "MOV": 16, "TOT": 30}]}], "nameRev": "b9b79a6ad75a8548d7f7e86e36d4fda9c052b72b tags/jetty-9.4.20.v20190813~20^2", "commitUser": "sbordet", "authoredDateTime": "2019-08-07 10:51:27", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 52, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/component/ContainerLifeCycleTest.java", "insertions": 27, "deletions": 25}], "commitDateTime": "2019-08-07 10:51:27", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #3929 - Deadlock between new HTTP2Connection() and Server.stop().\n\nUpdated code after review.\nNow a managed failed bean is restarted if its container is restarted.\nAdded more test cases.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["f484b83c2ea6dcd6174498b7fbb4a0069be60f87"], "commitHash": "4b7ba20aae3680c976495a864115cb2a9fc05111", "commitSpoonAstDiffStats": [{"spoonFilePath": "ContainerLifeCycleTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.component.ContainerLifeCycleTest.testFailedAutoBeanIsNotRestarted()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.component.ContainerLifeCycleTest.testFailedManagedBeanCanBeRestarted()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ContainerLifeCycle.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.component.ContainerLifeCycle.doStart()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}], "nameRev": "4b7ba20aae3680c976495a864115cb2a9fc05111 tags/jetty-9.4.20.v20190813~20^2~1", "commitUser": "sbordet", "authoredDateTime": "2019-08-07 10:44:04", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/component/ContainerLifeCycle.java", "insertions": 1, "deletions": 1}, {"lines": 68, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/component/ContainerLifeCycleTest.java", "insertions": 68, "deletions": 0}], "commitDateTime": "2019-08-07 10:44:04", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #3929 - Deadlock between new HTTP2Connection() and Server.stop().\n\nPreviously beans were started if they were not running, which\nincluded them being in a STOPPING state.\nNow beans are only started if they are in STOPPED state.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["ab015f26536b5cece2affafe127cc012875f9b95"], "commitHash": "6c1b5982a5577d6110ce8c985424f823673bd6cc", "commitSpoonAstDiffStats": [{"spoonFilePath": "ContainerLifeCycle.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.component.ContainerLifeCycle.doStart()", "DEL": 1, "INS": 2, "UPD": 1, "MOV": 4, "TOT": 8}]}], "nameRev": "6c1b5982a5577d6110ce8c985424f823673bd6cc tags/jetty-9.4.20.v20190813~20^2~3", "commitUser": "sbordet", "authoredDateTime": "2019-08-05 21:08:55", "commitGHEventType": "closed", "commitGitStats": [{"lines": 12, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/component/ContainerLifeCycle.java", "insertions": 7, "deletions": 5}], "commitDateTime": "2019-08-05 21:08:55", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #3929 - Deadlock between new HTTP2Connection() and Server.stop().\n\nAdded test case.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["6c1b5982a5577d6110ce8c985424f823673bd6cc"], "commitHash": "f484b83c2ea6dcd6174498b7fbb4a0069be60f87", "commitSpoonAstDiffStats": [{"spoonFilePath": "ContainerLifeCycleTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.component.ContainerLifeCycleTest.testBeanStoppingAddedToStartingBean()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "f484b83c2ea6dcd6174498b7fbb4a0069be60f87 tags/jetty-9.4.20.v20190813~20^2~2", "commitUser": "sbordet", "authoredDateTime": "2019-08-06 11:50:29", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 23, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/component/ContainerLifeCycleTest.java", "insertions": 23, "deletions": 0}], "commitDateTime": "2019-08-06 11:50:29", "spoonStatsSkippedReason": ""}], "title": "Deadlock between new HTTP2Connection() and Server.stop()", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0, "insertions": 0, "gitFilesChange": 0, "deletions": 0}, "closed": "2019-08-07 09:34:21", "statsSkippedReason": "", "body": "`Server.stop()` holds `AbstractLifeCycle._lock` while it joins a network thread:\r\n\r\n```\r\n  java.lang.Thread.State: WAITING\r\n\t blocks qtp2102368942-24@2434\r\n\t  at java.lang.Object.wait(Object.java:-1)\r\n\t  at java.lang.Thread.join(Thread.java:1313)\r\n\t  at org.eclipse.jetty.util.thread.QueuedThreadPool.doStop(QueuedThreadPool.java:179)\r\n\t  at org.eclipse.jetty.util.component.AbstractLifeCycle.stop(AbstractLifeCycle.java:89)\r\n\t  - locked <0xe86> (a java.lang.Object)\r\n\t  at org.eclipse.jetty.util.component.ContainerLifeCycle.stop(ContainerLifeCycle.java:178)\r\n\t  at org.eclipse.jetty.util.component.ContainerLifeCycle.doStop(ContainerLifeCycle.java:199)\r\n\t  at org.eclipse.jetty.server.handler.AbstractHandler.doStop(AbstractHandler.java:124)\r\n\t  at org.eclipse.jetty.server.Server.doStop(Server.java:464)\r\n\t  at org.eclipse.jetty.util.component.AbstractLifeCycle.stop(AbstractLifeCycle.java:89)\r\n\t  - locked <0xe87> (a java.lang.Object)\r\n```\r\n\r\nBut that network thread will never complete because it\u2019s attempting to acquire `AbstractLifeCycle._lock`:\r\n\r\n```\r\n\"qtp2102368942-24@2434\" prio=5 tid=0x18 nid=NA waiting for monitor entry\r\n  java.lang.Thread.State: BLOCKED\r\n\t waiting for Time-limited test@1899 to release lock on <0xe86> (a java.lang.Object)\r\n\t  at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:65)\r\n\t  at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:167)\r\n\t  at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:119)\r\n\t  at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n\t  - locked <0xe88> (a java.lang.Object)\r\n\t  at org.eclipse.jetty.util.component.LifeCycle.start(LifeCycle.java:139)\r\n\t  at org.eclipse.jetty.http2.HTTP2Connection.<init>(HTTP2Connection.java:70)\r\n\t  at org.eclipse.jetty.http2.server.HTTP2ServerConnection.<init>(HTTP2ServerConnection.java:100)\r\n\t  at org.eclipse.jetty.http2.server.AbstractHTTP2ServerConnectionFactory.newConnection(AbstractHTTP2ServerConnectionFactory.java:243)\r\n\t  at org.eclipse.jetty.server.NegotiatingServerConnection.onFillable(NegotiatingServerConnection.java:130)\r\n\t  at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:305)\r\n\t  at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:103)\r\n\t  at org.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.onFillable(SslConnection.java:427)\r\n\t  at org.eclipse.jetty.io.ssl.SslConnection.onFillable(SslConnection.java:321)\r\n\t  at org.eclipse.jetty.io.ssl.SslConnection$2.succeeded(SslConnection.java:159)\r\n\t  at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:103)\r\n\t  at org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:117)\r\n\t  at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:698)\r\n\t  at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:804)\r\n\t  at java.lang.Thread.run(Thread.java:834)\r\n```\r\n\r\nSo we get a deadlock.\r\n\r\nHere\u2019s [thread_dump.txt](https://github.com/eclipse/jetty.project/files/3458156/thread_dump.txt), captured in the deadlock.\r\n\r\nI was able to reproduce this with [JettyFailsToStopTest.java](https://github.com/eclipse/jetty.project/files/3458159/JettyFailsToStopTest.java.txt). It needs OkHttp and Okio to create an HTTP/2 connection. I observed the deadlock 1 attempt out of every 5 on my MacBook Pro. ", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 5.000277777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/3929"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "jshook", "filteredCommits": ["c2f76a6be5284418e151cd34bc05b5823c86992a", "24b2ca4c328fcc22a1c1534d39ea2970920b1ac4"], "commits": {"c2f76a6be5284418e151cd34bc05b5823c86992a": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "cb87d7049e1e1a152e6c45a5ca8d0acdf682195f": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "24b2ca4c328fcc22a1c1534d39ea2970920b1ac4": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2019-07-25 12:04:31", "commitsDetails": [{"commitMessage": "Issue #3906 - Handling SeekableByteChannel.setPosition() Exception\n\n+ UnsupportedOperationException now triggers a fallback seek mode\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["6b07bd23c8276407d8eb17271ac5de17fcc5694e"], "commitHash": "c2f76a6be5284418e151cd34bc05b5823c86992a", "commitSpoonAstDiffStats": [{"spoonFilePath": "PathResource.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.PathResource.getReadableByteChannel()", "DEL": 0, "INS": 1, "UPD": 2, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.util.resource.PathResource.writeTo(java.io.OutputStream,long,long)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.PathResource.skipTo(java.nio.channels.SeekableByteChannel,java.nio.ByteBuffer,long)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpContentRangeWriter.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.resource.HttpContentRangeWriter.newRangeWriter(org.eclipse.jetty.http.HttpContent)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "RangeWriterTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.resource.RangeWriterTest.testSameRange_MultipleTimes(java.lang.String,org.eclipse.jetty.server.resource.RangeWriter)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.resource.RangeWriterTest.closeZipFs()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.resource.RangeWriterTest.testMultipleRanges_ReverseOrder(java.lang.String,org.eclipse.jetty.server.resource.RangeWriter)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.resource.RangeWriterTest.testMultipleRanges_Ordered(org.eclipse.jetty.server.resource.RangeWriter)", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 9, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.server.resource.RangeWriterTest.testMultipleRanges_Overlapping(java.lang.String,org.eclipse.jetty.server.resource.RangeWriter)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.resource.RangeWriterTest.impls()", "DEL": 0, "INS": 10, "UPD": 6, "MOV": 1, "TOT": 17}, {"spoonMethodName": "org.eclipse.jetty.server.resource.RangeWriterTest.initZipFsDataFile()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.resource.RangeWriterTest.testMultipleRanges_ReverseOrder(org.eclipse.jetty.server.resource.RangeWriter)", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 9, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.server.resource.RangeWriterTest.testMultipleRanges_Ordered(java.lang.String,org.eclipse.jetty.server.resource.RangeWriter)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.resource.RangeWriterTest.testSimpleRange(java.lang.String,org.eclipse.jetty.server.resource.RangeWriter)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.resource.RangeWriterTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "PathResourceTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.PathResourceTest.testNonDefaultFileSystem_GetFile()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.PathResourceTest.testNonDefaultFileSystem_GetReadableByteChannel()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.PathResourceTest.testNonDefaultFileSystem_GetInputStream()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.PathResourceTest.testNonDefaultFileSystem_WriteTo()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "SeekableByteChannelRangeWriter.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.resource.SeekableByteChannelRangeWriter.close()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.resource.SeekableByteChannelRangeWriter.skipTo(long)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.resource.SeekableByteChannelRangeWriter.fallbackSkipTo(long)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.resource.SeekableByteChannelRangeWriter.writeTo(java.io.OutputStream,long,long)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.resource.SeekableByteChannelRangeWriter", "DEL": 0, "INS": 8, "UPD": 4, "MOV": 0, "TOT": 12}]}], "nameRev": "c2f76a6be5284418e151cd34bc05b5823c86992a tags/jetty-9.4.20.v20190813~18^2", "commitUser": "joakime", "authoredDateTime": "2019-07-31 14:36:16", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 60, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/resource/PathResource.java", "insertions": 57, "deletions": 3}, {"lines": 75, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/resource/RangeWriterTest.java", "insertions": 59, "deletions": 16}, {"lines": 110, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/resource/SeekableByteChannelRangeWriter.java", "insertions": 105, "deletions": 5}, {"lines": 0, "filePath": "jetty-server/src/test/resources/example.jar", "insertions": 0, "deletions": 0}, {"lines": 31, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/resource/PathResourceTest.java", "insertions": 28, "deletions": 3}, {"lines": 2, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/resource/HttpContentRangeWriter.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2019-07-31 14:36:16", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3906 - Introducing Testcase to demonstrate issue\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["6f9495f5c13466fb2e730195f8e6d1802e6dacfe"], "commitHash": "24b2ca4c328fcc22a1c1534d39ea2970920b1ac4", "commitSpoonAstDiffStats": [{"spoonFilePath": "PathResourceTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.PathResourceTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "24b2ca4c328fcc22a1c1534d39ea2970920b1ac4 tags/jetty-9.4.20.v20190813~31^2~8", "commitUser": "joakime", "authoredDateTime": "2019-07-25 11:43:51", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 71, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/resource/PathResourceTest.java", "insertions": 71, "deletions": 0}], "commitDateTime": "2019-07-25 11:43:51", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #3923 from eclipse/jetty-9.4.x-3906-seekablebytechannel-fallback\n\nIssue #3906 - Handling SeekableByteChannel.position(long) Exception", "commitParents": ["e64e3309d3e6c6e7f3b2f4257479c3ecca4cd7d4", "c2f76a6be5284418e151cd34bc05b5823c86992a"], "commitHash": "cb87d7049e1e1a152e6c45a5ca8d0acdf682195f", "commitSpoonAstDiffStats": [{"spoonFilePath": "PathResource.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.PathResource.getReadableByteChannel()", "DEL": 0, "INS": 1, "UPD": 2, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.util.resource.PathResource.writeTo(java.io.OutputStream,long,long)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.PathResource.skipTo(java.nio.channels.SeekableByteChannel,java.nio.ByteBuffer,long)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpContentRangeWriter.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.resource.HttpContentRangeWriter.newRangeWriter(org.eclipse.jetty.http.HttpContent)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "RangeWriterTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.resource.RangeWriterTest.testSameRange_MultipleTimes(java.lang.String,org.eclipse.jetty.server.resource.RangeWriter)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.resource.RangeWriterTest.closeZipFs()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.resource.RangeWriterTest.testMultipleRanges_ReverseOrder(java.lang.String,org.eclipse.jetty.server.resource.RangeWriter)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.resource.RangeWriterTest.testMultipleRanges_Ordered(org.eclipse.jetty.server.resource.RangeWriter)", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 9, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.server.resource.RangeWriterTest.testMultipleRanges_Overlapping(java.lang.String,org.eclipse.jetty.server.resource.RangeWriter)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.resource.RangeWriterTest.impls()", "DEL": 0, "INS": 10, "UPD": 6, "MOV": 1, "TOT": 17}, {"spoonMethodName": "org.eclipse.jetty.server.resource.RangeWriterTest.initZipFsDataFile()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.resource.RangeWriterTest.testMultipleRanges_ReverseOrder(org.eclipse.jetty.server.resource.RangeWriter)", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 9, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.server.resource.RangeWriterTest.testMultipleRanges_Ordered(java.lang.String,org.eclipse.jetty.server.resource.RangeWriter)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.resource.RangeWriterTest.testSimpleRange(java.lang.String,org.eclipse.jetty.server.resource.RangeWriter)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.resource.RangeWriterTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "PathResourceTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.PathResourceTest.testNonDefaultFileSystem_GetFile()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.PathResourceTest.testNonDefaultFileSystem_GetReadableByteChannel()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.PathResourceTest.testNonDefaultFileSystem_GetInputStream()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.PathResourceTest.testNonDefaultFileSystem_WriteTo()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "SeekableByteChannelRangeWriter.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.resource.SeekableByteChannelRangeWriter.close()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.resource.SeekableByteChannelRangeWriter.skipTo(long)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.resource.SeekableByteChannelRangeWriter.fallbackSkipTo(long)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.resource.SeekableByteChannelRangeWriter.writeTo(java.io.OutputStream,long,long)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.resource.SeekableByteChannelRangeWriter", "DEL": 0, "INS": 8, "UPD": 4, "MOV": 0, "TOT": 12}]}], "nameRev": "cb87d7049e1e1a152e6c45a5ca8d0acdf682195f tags/jetty-9.4.20.v20190813~18", "commitUser": "joakime", "authoredDateTime": "2019-08-07 07:43:16", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 60, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/resource/PathResource.java", "insertions": 57, "deletions": 3}, {"lines": 75, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/resource/RangeWriterTest.java", "insertions": 59, "deletions": 16}, {"lines": 110, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/resource/SeekableByteChannelRangeWriter.java", "insertions": 105, "deletions": 5}, {"lines": 0, "filePath": "jetty-server/src/test/resources/example.jar", "insertions": 0, "deletions": 0}, {"lines": 31, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/resource/PathResourceTest.java", "insertions": 28, "deletions": 3}, {"lines": 2, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/resource/HttpContentRangeWriter.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2019-08-07 07:43:16", "spoonStatsSkippedReason": ""}], "title": "Fix for #3840 breaks Path encapsulation in PathResource", "spoonStatsSummary": {"spoonMethodsChanged": 9, "DEL": 0, "INS": 14, "UPD": 9, "MOV": 2, "TOT": 25, "spoonFilesChanged": 3}, "gitStatsSummary": {"lines": 172, "insertions": 163, "gitFilesChange": 3, "deletions": 9}, "closed": "2019-08-07 12:45:13", "statsSkippedReason": "", "body": "Fix for Issue #3840 breaks PathResource so that it behaves like a FileResource, and breaks some projects which depend on the newer Path API in the Java runtime. The Path APIs provide useful encpapsulation of filesystems and relatively Paths. \r\n\r\nUsing PathResource as such worked fine before, as Jetty was able to find any useful data channel to the Path resource. Now, with a File short-circuiting to the default filesystem, Path resources do not work as intended. Reverting back to 9.4.* fixed the issue for me, but I will not be able to use 10.* unless PathResources continue to work as originally designed.\r\n\r\nSimply, using a File instead of a Path causes any relatively-pathed resources to break out of the intended encapsulation back to the default file system, breaking Path abstractions.\r\n\r\nThis is also possibly a security issue, as file content could be loaded from a file or path outside of a users intended filesystem. This may qualify the issue as a blocker for release of 10.*.\r\n", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server/resource", "jetty-util/src/main/java/org/eclipse/jetty/util/resource"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.resource.SeekableByteChannelRangeWriter", "org.eclipse.jetty.server.resource.HttpContentRangeWriter.newRangeWriter(org.eclipse.jetty.http.HttpContent)", "org.eclipse.jetty.server.resource.SeekableByteChannelRangeWriter.skipTo(long)", "org.eclipse.jetty.server.resource.SeekableByteChannelRangeWriter.writeTo(java.io.OutputStream,long,long)", "org.eclipse.jetty.util.resource.PathResource.getReadableByteChannel()", "org.eclipse.jetty.util.resource.PathResource.writeTo(java.io.OutputStream,long,long)", "org.eclipse.jetty.server.resource.SeekableByteChannelRangeWriter.fallbackSkipTo(long)", "org.eclipse.jetty.server.resource.SeekableByteChannelRangeWriter.close()", "org.eclipse.jetty.util.resource.PathResource.skipTo(java.nio.channels.SeekableByteChannel,java.nio.ByteBuffer,long)"], "ttf": 13.000277777777777, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/3906"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["446c3d7202c2d8c6223547f47dbdf7f0ea4aeccd", "9e90c60f0e78331be86a50ae198f03b5a5c784bd", "36294ef0da95f63545c027ce78a9159f153dca82", "6fd8aeefde9f23a8efb9e7238beb5aa9da7578c9", "602c44ec96966b0a40b3b3fae0e465a2a114ca1f", "aef58168d06f3e1edd95e2a007be9df5f1f4ccb2", "f856ad41da2c20817d124066a75452d54a13f0d5", "122f994aaf5699a4fb08d16633bfb185150ced77"], "commits": {"6fd8aeefde9f23a8efb9e7238beb5aa9da7578c9": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "f856ad41da2c20817d124066a75452d54a13f0d5": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "36294ef0da95f63545c027ce78a9159f153dca82": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "602c44ec96966b0a40b3b3fae0e465a2a114ca1f": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "dc4b7b17910d50df063d73871ed1c4f9e2e203af": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "446c3d7202c2d8c6223547f47dbdf7f0ea4aeccd": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "122f994aaf5699a4fb08d16633bfb185150ced77": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "9e90c60f0e78331be86a50ae198f03b5a5c784bd": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "aef58168d06f3e1edd95e2a007be9df5f1f4ccb2": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2019-07-18 16:09:25", "commitsDetails": [{"commitMessage": "Issue #3888 - Adding HttpClient tests\n\n+ Also applying changes from review\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["122f994aaf5699a4fb08d16633bfb185150ced77"], "commitHash": "6fd8aeefde9f23a8efb9e7238beb5aa9da7578c9", "commitSpoonAstDiffStats": [{"spoonFilePath": "HugeResourceTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.HugeResourceTest", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.webapp.HugeResourceTest.ByteCountingOutputStream", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.webapp.HugeResourceTest.testUpload_Multipart(java.lang.String,long)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.webapp.HugeResourceTest.prepareStaticFiles()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.webapp.HugeResourceTest.MultipartServlet", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.webapp.HugeResourceTest.dumpResponse(org.eclipse.jetty.client.api.Response)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.webapp.HugeResourceTest.dumpResponseHeaders(java.net.HttpURLConnection)", "DEL": 0, "INS": 0, "UPD": 13, "MOV": 9, "TOT": 22}, {"spoonMethodName": "org.eclipse.jetty.webapp.HugeResourceTest.testDownload_1G()", "DEL": 0, "INS": 0, "UPD": 4, "MOV": 3, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.webapp.HugeResourceTest.testDownload_4G()", "DEL": 0, "INS": 0, "UPD": 4, "MOV": 2, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.webapp.HugeResourceTest.PostServlet", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.webapp.HugeResourceTest.staticFiles()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.webapp.HugeResourceTest.testDownload_10G()", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 4, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.webapp.HugeResourceTest.testUpload(java.lang.String,long)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.webapp.HugeResourceTest.startServer()", "DEL": 0, "INS": 8, "UPD": 0, "MOV": 0, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.webapp.HugeResourceTest.download(java.net.URI,long)", "DEL": 1, "INS": 0, "UPD": 23, "MOV": 19, "TOT": 43}]}, {"spoonFilePath": "ResourceHttpContent.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.ResourceHttpContent.getIndirectBuffer()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.http.ResourceHttpContent.getDirectBuffer()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "CachedContentFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.CachedContentFactory.CachedHttpContent.getDirectBuffer()", "DEL": 0, "INS": 1, "UPD": 2, "MOV": 1, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.server.CachedContentFactory.CachedHttpContent.getIndirectBuffer()", "DEL": 4, "INS": 2, "UPD": 1, "MOV": 9, "TOT": 16}, {"spoonMethodName": "org.eclipse.jetty.server.CachedContentFactory.getIndirectBuffer(org.eclipse.jetty.util.resource.Resource)", "DEL": 1, "INS": 1, "UPD": 1, "MOV": 3, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.server.CachedContentFactory.getMappedBuffer(org.eclipse.jetty.util.resource.Resource)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.server.CachedContentFactory.getDirectBuffer(org.eclipse.jetty.util.resource.Resource)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 4}]}, {"spoonFilePath": "Request.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Request.getContentLength()", "DEL": 2, "INS": 4, "UPD": 1, "MOV": 1, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.server.Request.getContentLengthLong()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "6fd8aeefde9f23a8efb9e7238beb5aa9da7578c9 tags/jetty-9.4.20.v20190813~32^2~2", "commitUser": "joakime", "authoredDateTime": "2019-07-23 15:24:33", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 36, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/CachedContentFactory.java", "insertions": 22, "deletions": 14}, {"lines": 4, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/ResourceHttpContent.java", "insertions": 2, "deletions": 2}, {"lines": 14, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Request.java", "insertions": 9, "deletions": 5}, {"lines": 212, "filePath": "jetty-webapp/src/test/java/org/eclipse/jetty/webapp/HugeResourceTest.java", "insertions": 174, "deletions": 38}, {"lines": 16, "filePath": "jetty-webapp/pom.xml", "insertions": 11, "deletions": 5}], "commitDateTime": "2019-07-23 15:24:33", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3888 - For Resources exceeding maxCachedFileSize do not allocate\n\n+ Only used Mapped ByteBuffers, ReadableByteChannel, or InputStream\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["36294ef0da95f63545c027ce78a9159f153dca82"], "commitHash": "f856ad41da2c20817d124066a75452d54a13f0d5", "commitSpoonAstDiffStats": [{"spoonFilePath": "CachedContentFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.CachedContentFactory.CachedHttpContent.getDirectBuffer()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.CachedContentFactory.CachedHttpContent.getIndirectBuffer()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "f856ad41da2c20817d124066a75452d54a13f0d5 tags/jetty-9.4.20.v20190813~32^2~6", "commitUser": "joakime", "authoredDateTime": "2019-07-19 10:25:04", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 7, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/CachedContentFactory.java", "insertions": 6, "deletions": 1}], "commitDateTime": "2019-07-19 10:25:04", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3888 - Fixing for truncated long to int\n\n+ Allowing CachedHttpContent._contentLengthValue actually hold\n  the `long` resource size (for the 4G variant on test)\n+ Allowing BufferUtil to not throw Exception if resource length\n  is a positive value, but exceeds Integer.MAX_VALUE, opting instead\n  to return a null to prevent excessive memory usage. (fixes the 10G\n  variant of test)\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["aef58168d06f3e1edd95e2a007be9df5f1f4ccb2"], "commitHash": "36294ef0da95f63545c027ce78a9159f153dca82", "commitSpoonAstDiffStats": [{"spoonFilePath": "HugeResourceTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.HugeResourceTest.download(java.net.URI,long)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.webapp.HugeResourceTest.dumpResponseHeaders(java.net.HttpURLConnection)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "BufferUtil.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.BufferUtil.toBuffer(org.eclipse.jetty.util.resource.Resource,boolean)", "DEL": 0, "INS": 2, "UPD": 4, "MOV": 2, "TOT": 8}]}, {"spoonFilePath": "CachedContentFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.CachedContentFactory.CachedHttpContent.getIndirectBuffer()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.CachedContentFactory.CachedHttpContent", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "36294ef0da95f63545c027ce78a9159f153dca82 tags/jetty-9.4.20.v20190813~32^2~7", "commitUser": "joakime", "authoredDateTime": "2019-07-18 12:13:35", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 6, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/CachedContentFactory.java", "insertions": 3, "deletions": 3}, {"lines": 14, "filePath": "jetty-webapp/src/test/java/org/eclipse/jetty/webapp/HugeResourceTest.java", "insertions": 14, "deletions": 0}, {"lines": 14, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/BufferUtil.java", "insertions": 11, "deletions": 3}], "commitDateTime": "2019-07-18 12:13:35", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3888 - Adding comment from PR review\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["9e90c60f0e78331be86a50ae198f03b5a5c784bd"], "commitHash": "602c44ec96966b0a40b3b3fae0e465a2a114ca1f", "commitSpoonAstDiffStats": [{"spoonFilePath": "CachedContentFactory.java", "spoonMethods": []}], "nameRev": "602c44ec96966b0a40b3b3fae0e465a2a114ca1f tags/jetty-9.4.20.v20190813~32^2", "commitUser": "joakime", "authoredDateTime": "2019-07-30 20:02:18", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 1, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/CachedContentFactory.java", "insertions": 1, "deletions": 0}], "commitDateTime": "2019-07-30 20:02:18", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #3889 from eclipse/jetty-9.4.x-3888-huge-resources\n\nIssue #3888 - Huge file Resources behaviors", "commitParents": ["6790e8d977dcb5969b38f2af49656a19694fca98", "602c44ec96966b0a40b3b3fae0e465a2a114ca1f"], "commitHash": "dc4b7b17910d50df063d73871ed1c4f9e2e203af", "commitSpoonAstDiffStats": [], "nameRev": "dc4b7b17910d50df063d73871ed1c4f9e2e203af tags/jetty-9.4.20.v20190813~32", "commitUser": "joakime", "authoredDateTime": "2019-07-30 20:03:34", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 137, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ResourceCacheTest.java", "insertions": 98, "deletions": 39}, {"lines": 4, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/ResourceHttpContent.java", "insertions": 2, "deletions": 2}, {"lines": 20, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Request.java", "insertions": 16, "deletions": 4}, {"lines": 14, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/BufferUtil.java", "insertions": 11, "deletions": 3}, {"lines": 44, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/CachedContentFactory.java", "insertions": 29, "deletions": 15}, {"lines": 16, "filePath": "jetty-webapp/pom.xml", "insertions": 11, "deletions": 5}, {"lines": 339, "filePath": "jetty-webapp/src/test/java/org/eclipse/jetty/webapp/HugeResourceTest.java", "insertions": 339, "deletions": 0}, {"lines": 50, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/RequestTest.java", "insertions": 50, "deletions": 0}], "commitDateTime": "2019-07-30 20:03:34", "spoonStatsSkippedReason": "tooManyChanges"}, {"commitMessage": "Issue #3888 - Fixing ServletRequest.getContentLength() behavior\n\n+ For Content-Length values exceeding Integer.MAX_VALUE the return\n  must be -1.\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["8afc4464d5f8fe6d6e4e1ee59d413f99f2765b87"], "commitHash": "446c3d7202c2d8c6223547f47dbdf7f0ea4aeccd", "commitSpoonAstDiffStats": [{"spoonFilePath": "RequestTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testContentLength_ExceedsMaxLong()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "Request.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Request.getContentLength()", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 3, "TOT": 6}]}], "nameRev": "446c3d7202c2d8c6223547f47dbdf7f0ea4aeccd tags/jetty-9.4.20.v20190813~32^2~4", "commitUser": "joakime", "authoredDateTime": "2019-07-19 10:35:35", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 10, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Request.java", "insertions": 9, "deletions": 1}, {"lines": 23, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/RequestTest.java", "insertions": 13, "deletions": 10}], "commitDateTime": "2019-07-19 10:35:35", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3888 - Removing excessive \"huge\" per PR review\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["446c3d7202c2d8c6223547f47dbdf7f0ea4aeccd"], "commitHash": "122f994aaf5699a4fb08d16633bfb185150ced77", "commitSpoonAstDiffStats": [{"spoonFilePath": "HugeResourceTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.HugeResourceTest", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.webapp.HugeResourceTest.startServer()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.webapp.HugeResourceTest.cleanupHugeStaticFiles()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.webapp.HugeResourceTest.prepareStaticFiles()", "DEL": 0, "INS": 0, "UPD": 7, "MOV": 0, "TOT": 7}]}], "nameRev": "122f994aaf5699a4fb08d16633bfb185150ced77 tags/jetty-9.4.20.v20190813~32^2~3", "commitUser": "joakime", "authoredDateTime": "2019-07-19 10:38:15", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 20, "filePath": "jetty-webapp/src/test/java/org/eclipse/jetty/webapp/HugeResourceTest.java", "insertions": 10, "deletions": 10}], "commitDateTime": "2019-07-19 10:39:03", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3888 - Fixing implementation of CachedContentFactory\n\n+ ResourceCacheTest identified a bug in CachedContentFactory\n  (a bad/reversed if statement)\n+ Updated ResourceCacheTest to not rely on jetty-util src/test/resources\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["6fd8aeefde9f23a8efb9e7238beb5aa9da7578c9"], "commitHash": "9e90c60f0e78331be86a50ae198f03b5a5c784bd", "commitSpoonAstDiffStats": [{"spoonFilePath": "ResourceCacheTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ResourceCacheTest.makeFile(java.nio.file.Path,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ResourceCacheTest.testNoextension()", "DEL": 0, "INS": 1, "UPD": 10, "MOV": 7, "TOT": 18}, {"spoonMethodName": "org.eclipse.jetty.server.ResourceCacheTest.testMutlipleSources1()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.ResourceCacheTest.testUncacheable()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.ResourceCacheTest.getContent(org.eclipse.jetty.util.resource.Resource,java.lang.String)", "DEL": 1, "INS": 0, "UPD": 12, "MOV": 11, "TOT": 24}, {"spoonMethodName": "org.eclipse.jetty.server.ResourceCacheTest.getContent(org.eclipse.jetty.server.CachedContentFactory,java.lang.String)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ResourceCacheTest.testResourceCache()", "DEL": 1, "INS": 2, "UPD": 7, "MOV": 8, "TOT": 18}, {"spoonMethodName": "org.eclipse.jetty.server.ResourceCacheTest", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "CachedContentFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.CachedContentFactory.CachedHttpContent.getDirectBuffer()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "9e90c60f0e78331be86a50ae198f03b5a5c784bd tags/jetty-9.4.20.v20190813~32^2~1", "commitUser": "joakime", "authoredDateTime": "2019-07-24 11:26:49", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/CachedContentFactory.java", "insertions": 1, "deletions": 1}, {"lines": 137, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ResourceCacheTest.java", "insertions": 98, "deletions": 39}], "commitDateTime": "2019-07-24 11:26:49", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3888 - Adding testcase to demonstrate Huge file Resource issue\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["6f9495f5c13466fb2e730195f8e6d1802e6dacfe"], "commitHash": "aef58168d06f3e1edd95e2a007be9df5f1f4ccb2", "commitSpoonAstDiffStats": [{"spoonFilePath": "HugeResourceTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.HugeResourceTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "aef58168d06f3e1edd95e2a007be9df5f1f4ccb2 tags/jetty-9.4.20.v20190813~32^2~8", "commitUser": "joakime", "authoredDateTime": "2019-07-18 11:47:37", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 189, "filePath": "jetty-webapp/src/test/java/org/eclipse/jetty/webapp/HugeResourceTest.java", "insertions": 189, "deletions": 0}], "commitDateTime": "2019-07-18 11:47:37", "spoonStatsSkippedReason": ""}], "title": "BufferUtil.toBuffer(Resource resource,boolean direct) does not like large (4G+) Resources", "spoonStatsSummary": {"spoonMethodsChanged": 11, "DEL": 10.0, "INS": 16.0, "UPD": 15.0, "MOV": 27.0, "TOT": 68.0, "spoonFilesChanged": 4}, "gitStatsSummary": {"lines": 94, "insertions": 64, "gitFilesChange": 4, "deletions": 30}, "closed": "2019-07-31 01:37:55", "statsSkippedReason": "", "body": "When troubleshooting issue #3878 the following exception occurred ...\r\n\r\n```\r\n2019-07-18 11:02:08.317:WARN:oejs.CachedContentFactory:qtp1144748369-45: Could not load CachedContent@55a4cf39{r=file:///tmp/jetty-huge-work/file4G.txt,e=true,lm=Last-Modified: Tue, 16 Jul 2019 15:35:47 GMT,ct=Content-Type: text/plain,c=0}\r\n2019-07-18 11:02:08.317:WARN:oejs.CachedContentFactory:qtp1144748369-45: \r\njava.lang.IllegalArgumentException: invalid resource: file:///tmp/jetty-huge-work/file4G.txt len=-100663296\r\n\tat org.eclipse.jetty.util.BufferUtil.toBuffer(BufferUtil.java:970)\r\n\tat org.eclipse.jetty.server.CachedContentFactory.getIndirectBuffer(CachedContentFactory.java:338)\r\n\tat org.eclipse.jetty.server.CachedContentFactory$CachedHttpContent.getIndirectBuffer(CachedContentFactory.java:558)\r\n\tat org.eclipse.jetty.server.HttpOutput.sendContent(HttpOutput.java:988)\r\n\tat org.eclipse.jetty.server.HttpOutput.sendContent(HttpOutput.java:869)\r\n\tat org.eclipse.jetty.server.ResourceService.sendData(ResourceService.java:731)\r\n\tat org.eclipse.jetty.server.ResourceService.doGet(ResourceService.java:294)\r\n\tat org.eclipse.jetty.servlet.DefaultServlet.doGet(DefaultServlet.java:457)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:687)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:790)\r\n```\r\n\r\nBut it didn't prevent the file from being downloaded.\r\n\r\nThe length value is truncated in the beginning of the method ...\r\n\r\nhttps://github.com/eclipse/jetty.project/blob/4ebf4b7477acb42c73a069a37e29b5fd0738bfec/jetty-util/src/main/java/org/eclipse/jetty/util/BufferUtil.java#L972-L993\r\n\r\nBut that seems like it only exists to protect the eventual call to `BufferUtil.readFrom(is, len, buffer);` as that doesn't like `long len`.", "changesInPackagesGIT": ["jetty-util/src/main/java/org/eclipse/jetty/util", "jetty-server/src/main/java/org/eclipse/jetty/server", "jetty-http/src/main/java/org/eclipse/jetty/http"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.CachedContentFactory.CachedHttpContent.getDirectBuffer()", "org.eclipse.jetty.server.CachedContentFactory.CachedHttpContent.getIndirectBuffer()", "org.eclipse.jetty.server.CachedContentFactory.getIndirectBuffer(org.eclipse.jetty.util.resource.Resource)", "org.eclipse.jetty.util.BufferUtil.toBuffer(org.eclipse.jetty.util.resource.Resource,boolean)", "org.eclipse.jetty.http.ResourceHttpContent.getIndirectBuffer()", "org.eclipse.jetty.server.Request.getContentLengthLong()", "org.eclipse.jetty.server.CachedContentFactory.CachedHttpContent", "org.eclipse.jetty.http.ResourceHttpContent.getDirectBuffer()", "org.eclipse.jetty.server.CachedContentFactory.getMappedBuffer(org.eclipse.jetty.util.resource.Resource)", "org.eclipse.jetty.server.Request.getContentLength()", "org.eclipse.jetty.server.CachedContentFactory.getDirectBuffer(org.eclipse.jetty.util.resource.Resource)"], "ttf": 12.000277777777777, "numCommits": 6, "url": "https://github.com/eclipse/jetty.project/issues/3888"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "marcphilipp", "filteredCommits": ["02c49efc5f5c9768ba5ad15349fe9565ba7333e0", "f36358c631cf24fcf2797eec4ee33760b76fa60d", "b8f29630eddd9575ad142dc9821c54a2d26f16c0", "f7b212abb00eccdca03e54339e87bfe2d4f7664d", "f4ce98b1c80f1b78367ddbba59da519ca645f81c"], "commits": {"f36358c631cf24fcf2797eec4ee33760b76fa60d": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "69763a7163ecb628ca2710bba155de11d79bc079": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "02c49efc5f5c9768ba5ad15349fe9565ba7333e0": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "f7b212abb00eccdca03e54339e87bfe2d4f7664d": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "b8f29630eddd9575ad142dc9821c54a2d26f16c0": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "f4ce98b1c80f1b78367ddbba59da519ca645f81c": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2019-07-17 17:44:35", "commitsDetails": [{"commitMessage": "Issue #3884 - Adding testcase to satisfy PR review\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["f4ce98b1c80f1b78367ddbba59da519ca645f81c"], "commitHash": "02c49efc5f5c9768ba5ad15349fe9565ba7333e0", "commitSpoonAstDiffStats": [{"spoonFilePath": "WebSocketClientTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.tests.client.WebSocketClientTest.testBasicEcho_PartialUsage_FromClient()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "02c49efc5f5c9768ba5ad15349fe9565ba7333e0 tags/jetty-9.4.20.v20190813~23^2~3", "commitUser": "joakime", "authoredDateTime": "2019-07-18 07:51:12", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 33, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/WebSocketClientTest.java", "insertions": 33, "deletions": 0}], "commitDateTime": "2019-07-18 07:51:12", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3884 - Adding NullMessage to satisfy PR review\n\n+ If an annotated Jetty WebSocket Endpoint doesn't have\n  a handler for data types TEXT or BINARY then the\n  new NullMessage (sink) is used for that specific data type\n  to consume (quietly) those ignored Messages.\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["02c49efc5f5c9768ba5ad15349fe9565ba7333e0"], "commitHash": "f36358c631cf24fcf2797eec4ee33760b76fa60d", "commitSpoonAstDiffStats": [{"spoonFilePath": "WebSocketClientTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.tests.client.WebSocketClientTest.testBasicEcho_PartialText_WithPartialBinary_FromClient()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "NullMessage.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.message.NullMessage", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "JettyAnnotatedEventDriver.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.events.JettyAnnotatedEventDriver.onContinuationFrame(java.nio.ByteBuffer,boolean)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.events.JettyAnnotatedEventDriver.onBinaryFrame(java.nio.ByteBuffer,boolean)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.events.JettyAnnotatedEventDriver.onTextFrame(java.nio.ByteBuffer,boolean)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "f36358c631cf24fcf2797eec4ee33760b76fa60d tags/jetty-9.4.20.v20190813~23^2~2", "commitUser": "joakime", "authoredDateTime": "2019-07-18 08:03:16", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 19, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/events/JettyAnnotatedEventDriver.java", "insertions": 10, "deletions": 9}, {"lines": 38, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/message/NullMessage.java", "insertions": 38, "deletions": 0}, {"lines": 38, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/WebSocketClientTest.java", "insertions": 38, "deletions": 0}], "commitDateTime": "2019-07-18 08:04:17", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3884 - Updating tests and fixing merge\n\n+ Test cases have been updated based on PR review\n+ Fixing merge from `jetty-9.4.x` that caused a duplicate\n  JettyListenerEventDriver.onContinuationFrame() method\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["1ee771e991c21bc7265d23adfc376dd085a53a72"], "commitHash": "b8f29630eddd9575ad142dc9821c54a2d26f16c0", "commitSpoonAstDiffStats": [{"spoonFilePath": "CloseTrackingEndpoint.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.tests.CloseTrackingEndpoint.onWebSocketBinary(byte[],int,int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.tests.CloseTrackingEndpoint", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "WebSocketClientTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.tests.client.WebSocketClientTest.testBasicEcho_PartialText_WithPartialBinary_FromClient()", "DEL": 3, "INS": 7, "UPD": 0, "MOV": 0, "TOT": 10}]}, {"spoonFilePath": "JettyListenerEventDriver.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.events.JettyListenerEventDriver.onContinuationFrame(java.nio.ByteBuffer,boolean)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "FrameListenerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.tests.server.FrameListenerTest.FrameCreator", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.tests.server.FrameListenerTest.startServer().1.configure(org.eclipse.jetty.websocket.servlet.WebSocketServletFactory)", "DEL": 1, "INS": 1, "UPD": 2, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.websocket.tests.server.FrameListenerTest", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.tests.server.FrameListenerTest.testPartialText()", "DEL": 4, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 7}]}, {"spoonFilePath": "EchoSocket.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.tests.EchoSocket.onBinaryMessage(org.eclipse.jetty.websocket.api.Session,byte[],int,int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "b8f29630eddd9575ad142dc9821c54a2d26f16c0 tags/jetty-9.4.20.v20190813~23^2", "commitUser": "joakime", "authoredDateTime": "2019-08-05 12:52:20", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 9, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/CloseTrackingEndpoint.java", "insertions": 9, "deletions": 0}, {"lines": 6, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/events/JettyListenerEventDriver.java", "insertions": 0, "deletions": 6}, {"lines": 23, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/FrameListenerTest.java", "insertions": 3, "deletions": 20}, {"lines": 7, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/EchoSocket.java", "insertions": 7, "deletions": 0}, {"lines": 17, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/WebSocketClientTest.java", "insertions": 14, "deletions": 3}], "commitDateTime": "2019-08-05 12:52:20", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3884 - Pure WebSocketFrameListener should not process Continuation events\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["6f9495f5c13466fb2e730195f8e6d1802e6dacfe"], "commitHash": "f7b212abb00eccdca03e54339e87bfe2d4f7664d", "commitSpoonAstDiffStats": [{"spoonFilePath": "JettyListenerEventDriver.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.events.JettyListenerEventDriver.onContinuationFrame(java.nio.ByteBuffer,boolean)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "FrameListenerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.tests.server.FrameListenerTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "f7b212abb00eccdca03e54339e87bfe2d4f7664d tags/jetty-9.4.20.v20190813~23^2~5", "commitUser": "joakime", "authoredDateTime": "2019-07-17 14:34:51", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 9, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/events/JettyListenerEventDriver.java", "insertions": 9, "deletions": 0}, {"lines": 202, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/FrameListenerTest.java", "insertions": 202, "deletions": 0}], "commitDateTime": "2019-07-17 14:34:51", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #3885 from eclipse/jetty-9.4.x-3884-websocket-frame-listener\n\nIssue #3884 - Pure WebSocketFrameListener should not process Continuation events", "commitParents": ["4d2c981718bbb5999aa214a9fb5392efdabc6734", "b8f29630eddd9575ad142dc9821c54a2d26f16c0"], "commitHash": "69763a7163ecb628ca2710bba155de11d79bc079", "commitSpoonAstDiffStats": [{"spoonFilePath": "JettyListenerEventDriver.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.events.JettyListenerEventDriver.onContinuationFrame(java.nio.ByteBuffer,boolean)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "NullMessage.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.message.NullMessage", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "CloseTrackingEndpoint.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.tests.CloseTrackingEndpoint.onWebSocketBinary(byte[],int,int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.tests.CloseTrackingEndpoint", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "WebSocketClientTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.tests.client.WebSocketClientTest.testBasicEcho_PartialText_WithPartialBinary_FromClient()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.tests.client.WebSocketClientTest.testBasicEcho_PartialUsage_FromClient()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "EchoSocket.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.tests.EchoSocket.onBinaryMessage(org.eclipse.jetty.websocket.api.Session,byte[],int,int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "FrameListenerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.tests.server.FrameListenerTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "JettyAnnotatedEventDriver.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.events.JettyAnnotatedEventDriver.onTextFrame(java.nio.ByteBuffer,boolean)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.events.JettyAnnotatedEventDriver.onBinaryFrame(java.nio.ByteBuffer,boolean)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "FrameAnnotationTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.tests.server.FrameAnnotationTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "69763a7163ecb628ca2710bba155de11d79bc079 tags/jetty-9.4.20.v20190813~23", "commitUser": "joakime", "authoredDateTime": "2019-08-05 14:17:08", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 9, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/CloseTrackingEndpoint.java", "insertions": 9, "deletions": 0}, {"lines": 10, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/events/JettyAnnotatedEventDriver.java", "insertions": 10, "deletions": 0}, {"lines": 185, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/FrameListenerTest.java", "insertions": 185, "deletions": 0}, {"lines": 38, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/message/NullMessage.java", "insertions": 38, "deletions": 0}, {"lines": 207, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/FrameAnnotationTest.java", "insertions": 207, "deletions": 0}, {"lines": 5, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/events/JettyListenerEventDriver.java", "insertions": 4, "deletions": 1}, {"lines": 7, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/EchoSocket.java", "insertions": 7, "deletions": 0}, {"lines": 82, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/WebSocketClientTest.java", "insertions": 82, "deletions": 0}], "commitDateTime": "2019-08-05 14:17:08", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3884 - Pure @OnWebSocketFrame usage should not process Continuation events\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["f7b212abb00eccdca03e54339e87bfe2d4f7664d"], "commitHash": "f4ce98b1c80f1b78367ddbba59da519ca645f81c", "commitSpoonAstDiffStats": [{"spoonFilePath": "JettyAnnotatedEventDriver.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.events.JettyAnnotatedEventDriver.onContinuationFrame(java.nio.ByteBuffer,boolean)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "FrameAnnotationTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.tests.server.FrameAnnotationTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "f4ce98b1c80f1b78367ddbba59da519ca645f81c tags/jetty-9.4.20.v20190813~23^2~4", "commitUser": "joakime", "authoredDateTime": "2019-07-17 15:51:35", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 9, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/events/JettyAnnotatedEventDriver.java", "insertions": 9, "deletions": 0}, {"lines": 207, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/FrameAnnotationTest.java", "insertions": 207, "deletions": 0}], "commitDateTime": "2019-07-17 15:51:35", "spoonStatsSkippedReason": ""}], "title": "@WebSocket without @OnWebSocketMessage handler fails when receiving a continuation frame", "spoonStatsSummary": {"spoonMethodsChanged": 8, "DEL": 2, "INS": 9, "UPD": 0, "MOV": 0, "TOT": 11, "spoonFilesChanged": 5}, "gitStatsSummary": {"lines": 81, "insertions": 66, "gitFilesChange": 3, "deletions": 15}, "closed": "2019-08-05 19:17:45", "statsSkippedReason": "", "body": "Receiving a continuation frame for a binary or text frame with the following `@WebSocket` listener fails with the exception below.\r\n\r\n```java\r\n@WebSocket\r\npublic class MyWebSocketListener {\r\n    @OnWebSocketFrame\r\n    public void onWebSocketFrame(Frame frame) {\r\n        System.out.println(frame);\r\n    }\r\n}\r\n```\r\n\r\nException:\r\n\r\n```\r\njava.io.IOException: Out of order Continuation frame encountered\r\n\tat org.eclipse.jetty.websocket.common.events.AbstractEventDriver.onContinuationFrame(AbstractEventDriver.java:180)\r\n\tat org.eclipse.jetty.websocket.common.events.AbstractEventDriver.incomingFrame(AbstractEventDriver.java:155)\r\n\tat org.eclipse.jetty.websocket.common.WebSocketSession.incomingFrame(WebSocketSession.java:319)\r\n\tat org.eclipse.jetty.websocket.common.extensions.ExtensionStack.incomingFrame(ExtensionStack.java:201)\r\n\tat org.eclipse.jetty.websocket.common.Parser.notifyFrame(Parser.java:226)\r\n\tat org.eclipse.jetty.websocket.common.Parser.parseSingleFrame(Parser.java:260)\r\n\tat org.eclipse.jetty.websocket.common.io.AbstractWebSocketConnection.readParse(AbstractWebSocketConnection.java:583)\r\n\tat org.eclipse.jetty.websocket.common.io.AbstractWebSocketConnection.onFillable(AbstractWebSocketConnection.java:441)\r\n\tat org.eclipse.jetty.websocket.common.io.AbstractWebSocketConnection.onFillable(AbstractWebSocketConnection.java:428)\r\n\tat org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:305)\r\n\tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:103)\r\n\tat org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:117)\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.java:333)\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:310)\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:168)\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:126)\r\n\tat org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:366)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:781)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:917)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n```\r\n\r\nAs a workaround, adding two dummy methods to handle text and binary frames makes it work:\r\n\r\n```java\r\n@WebSocket\r\npublic class MyWebSocketListener {\r\n    @OnWebSocketFrame\r\n    public void onWebSocketFrame(Frame frame) {\r\n        System.out.println(frame);\r\n    }\r\n    @OnWebSocketMessage\r\n    public void onBinaryMessage(byte buf[], int offset, int length) {\r\n        //do nothing\r\n    }\r\n    @OnWebSocketMessage\r\n    public void onTextMessage(String text) {\r\n        //do nothing\r\n    }\r\n}\r\n```\r\n\r\nIt is really non-obvious that these two methods should be necessary. Moreover, all frame payloads will be collected behind the scenes so they can be passed to the `@OnWebSocketMessage` methods when the last frame is received even though they are not consumed.\r\n\r\nThis seems to happen because `JettyAnnotatedEventDriver` only sets `activeMessage` when a handler method for text/binary frames is present in the `@WebSocket` class.\r\n\r\nFrom a quick look at the code, it seems the same happens in `JettyListenerEventDriver` if the listener does not implement `WebSocketListener`.", "changesInPackagesGIT": ["jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common"], "changesInPackagesSPOON": ["org.eclipse.jetty.websocket.common.events.JettyAnnotatedEventDriver.onContinuationFrame(java.nio.ByteBuffer,boolean)", "org.eclipse.jetty.websocket.tests.CloseTrackingEndpoint.onWebSocketBinary(byte[],int,int)", "org.eclipse.jetty.websocket.common.events.JettyListenerEventDriver.onContinuationFrame(java.nio.ByteBuffer,boolean)", "org.eclipse.jetty.websocket.common.events.JettyAnnotatedEventDriver.onBinaryFrame(java.nio.ByteBuffer,boolean)", "org.eclipse.jetty.websocket.tests.CloseTrackingEndpoint", "org.eclipse.jetty.websocket.common.events.JettyAnnotatedEventDriver.onTextFrame(java.nio.ByteBuffer,boolean)", "org.eclipse.jetty.websocket.tests.EchoSocket.onBinaryMessage(org.eclipse.jetty.websocket.api.Session,byte[],int,int)", "org.eclipse.jetty.websocket.common.message.NullMessage"], "ttf": 19.00027777777778, "numCommits": 4, "url": "https://github.com/eclipse/jetty.project/issues/3884"}, {"labels": ["Bug"], "closed": "2019-07-31 22:51:41", "body": "Hi,\r\n\r\nI have an application serving large files from a directory using an Embedded Jetty.\r\nAs long as the file is smaller than 4Gb, it can be downloaded with no issue but if the file is bigger than that it gets truncated.\r\n\r\nThe file directory is configured in a ResourceColletion as BaseResource (https://github.com/bu3/jetty-big-files-provider/blob/76e1fd67723596ebd662d51e334183c25ad89770/src/main/java/com/acme/Main.java#L63).\r\n\r\nI have created a repo to show you the problem:\r\nhttps://github.com/bu3/jetty-big-files-provider", "commits": {}, "title": "Large files get truncated", "created": "2019-07-16 12:08:23", "user": "bu3", "url": "https://github.com/eclipse/jetty.project/issues/3878", "commitsDetails": [], "ttf": 15.000277777777777}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "magnus-gustafsson", "filteredCommits": ["ec9f4ef392a59fec0f375f81a4f10294908c9642", "f20d4034809dc11beb9359df7781731963fec7dc"], "commits": {"ec9f4ef392a59fec0f375f81a4f10294908c9642": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "f20d4034809dc11beb9359df7781731963fec7dc": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "e31b878c7bcbb73425f1b91e2bc509c31a409013": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2019-07-16 08:01:47", "commitsDetails": [{"commitMessage": "Issue #3876 - WebSocket Partial Listener testcases and fix\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["6f9495f5c13466fb2e730195f8e6d1802e6dacfe"], "commitHash": "ec9f4ef392a59fec0f375f81a4f10294908c9642", "commitSpoonAstDiffStats": [{"spoonFilePath": "JettyListenerEventDriver.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.events.JettyListenerEventDriver.onContinuationFrame(java.nio.ByteBuffer,boolean)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.events.JettyListenerEventDriver", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.events.JettyListenerEventDriver.onBinaryFrame(java.nio.ByteBuffer,boolean)", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 3, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.events.JettyListenerEventDriver.PartialMode", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.events.JettyListenerEventDriver.onTextFrame(java.nio.ByteBuffer,boolean)", "DEL": 4, "INS": 3, "UPD": 1, "MOV": 8, "TOT": 16}]}, {"spoonFilePath": "PartialListenerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.tests.server.PartialListenerTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "ec9f4ef392a59fec0f375f81a4f10294908c9642 tags/jetty-9.4.20.v20190813~28^2~1", "commitUser": "joakime", "authoredDateTime": "2019-07-16 07:07:55", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 81, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/events/JettyListenerEventDriver.java", "insertions": 72, "deletions": 9}, {"lines": 239, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/PartialListenerTest.java", "insertions": 239, "deletions": 0}], "commitDateTime": "2019-07-16 07:07:55", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3876 - Additional testcase\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["ec9f4ef392a59fec0f375f81a4f10294908c9642"], "commitHash": "f20d4034809dc11beb9359df7781731963fec7dc", "commitSpoonAstDiffStats": [{"spoonFilePath": "PartialListenerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.tests.server.PartialListenerTest.testPartial_TextBinaryText()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "f20d4034809dc11beb9359df7781731963fec7dc tags/jetty-9.4.20.v20190813~28^2", "commitUser": "joakime", "authoredDateTime": "2019-07-16 13:04:19", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 62, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/PartialListenerTest.java", "insertions": 62, "deletions": 0}], "commitDateTime": "2019-07-16 13:04:19", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #3879 from eclipse/jetty-9.4.x-3876-websocket-partial-listener\n\nIssue #3876 - WebSocket Partial Listener testcases and fix", "commitParents": ["b7fdf9f9f3b87b6953bab6ca5ae478bd8bc900b2", "f20d4034809dc11beb9359df7781731963fec7dc"], "commitHash": "e31b878c7bcbb73425f1b91e2bc509c31a409013", "commitSpoonAstDiffStats": [], "nameRev": "e31b878c7bcbb73425f1b91e2bc509c31a409013 tags/jetty-9.4.20.v20190813~28", "commitUser": "joakime", "authoredDateTime": "2019-08-01 09:48:34", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 81, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/events/JettyListenerEventDriver.java", "insertions": 72, "deletions": 9}, {"lines": 301, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/PartialListenerTest.java", "insertions": 301, "deletions": 0}], "commitDateTime": "2019-08-01 09:48:34", "spoonStatsSkippedReason": "tooManyChanges"}], "title": "WebSocketPartialListener is only called for initial frames, not for continuation frames", "spoonStatsSummary": {"spoonMethodsChanged": 5, "DEL": 5.0, "INS": 8.0, "UPD": 2.0, "MOV": 11.0, "TOT": 26.0, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 81, "insertions": 72, "gitFilesChange": 1, "deletions": 9}, "closed": "2019-08-01 14:49:05", "statsSkippedReason": "", "body": "In jetty-9.4.x `WebSocketPartialListener` is only called for first TEXT / BINARY frame, not for the following continuation frames.\r\n\r\n`JettyListenerEventDriver` should override `onContinuationFrame` from `AbstractEventDriver` so that it can both check if listener is of type  `WebSocketListener` (and if so aggregate message) and if its of type `WebSocketPartialListener` delegate to its methods.\r\nThis change would make it possible to use  `WebSocketPartialListener` and get both the initial start BINARY/TEXT frame as well as all CONTINUATION frames.\r\n\r\nRight now `AbstractEventDriver` also enforces that the listener is of type  `WebSocketListener` in its `onContinuationFrame` method (since if the listener is any other type, the `activeMessage` field will be null, and it will throw an exception).\r\nThis change would fix this as well.", "changesInPackagesGIT": ["jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common"], "changesInPackagesSPOON": ["org.eclipse.jetty.websocket.common.events.JettyListenerEventDriver.onContinuationFrame(java.nio.ByteBuffer,boolean)", "org.eclipse.jetty.websocket.common.events.JettyListenerEventDriver", "org.eclipse.jetty.websocket.common.events.JettyListenerEventDriver.onBinaryFrame(java.nio.ByteBuffer,boolean)", "org.eclipse.jetty.websocket.common.events.JettyListenerEventDriver.PartialMode", "org.eclipse.jetty.websocket.common.events.JettyListenerEventDriver.onTextFrame(java.nio.ByteBuffer,boolean)"], "ttf": 16.00027777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/3876"}, {"labels": ["Bug"], "closed": "2019-08-01 13:41:02", "body": "OS: Amazon Linux AMI 2018.03\r\nJetty version: 9.4.19.v20190610\r\nJava version :\r\nopenjdk version \"1.8.0_162\"\r\nOpenJDK Runtime Environment (build 1.8.0_162-8u162-b12-1~14.04-b12)\r\nOpenJDK 64-Bit Server VM (build 25.162-b12, mixed mode)\r\n\r\nOur application uses embedded jetty for websocket.\r\nWe just moved to version 9.4.19.v20190610 from 9.4.18.v20190429 without changes in the server code.\r\n\r\nDuring load testing we experience OutOfMemoryError.\r\nAfter analyzing the heap dump we see around 3 gigs (out of 4) being consumed by a CopyOnWriteArrayList containing 37556 ContainerLifeCycle$Bean which itself contains a WebSocketSession. \r\nThis problem did not occur with version 9.4.18.v20190429.\r\n\r\nI attached some screen shots of Eclipse Memory Analysis Tool.\r\n\r\nI wonder if some changes in the latest version requires some changes in our setup to clean up the sessions.\r\n\r\nThanks in advance\r\n<img width=\"650\" alt=\"accumulation_point\" src=\"https://user-images.githubusercontent.com/2422690/61155358-be012b80-a4be-11e9-9c22-5e1e482d4be0.png\">\r\n<img width=\"795\" alt=\"Content_of_copy_on_write_array_list\" src=\"https://user-images.githubusercontent.com/2422690/61155359-be012b80-a4be-11e9-93ac-01ec25526b51.png\">\r\n\r\n\r\n  \r\n\r\n", "commits": {}, "title": "OutOfMemoryError after migrating to version 9.4.19.v20190610 from 9.4.18.v20190429", "created": "2019-07-12 20:05:09", "user": "paskos", "url": "https://github.com/eclipse/jetty.project/issues/3871", "commitsDetails": [], "ttf": 19.00027777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 4, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "gbu-censhare", "filteredCommits": ["8418f56e944e7e29eae9715c84e99035dc75b0ef"], "commits": {"2e2cde69e918993d21e9231af03c183c28528b5b": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "8418f56e944e7e29eae9715c84e99035dc75b0ef": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "2629961e745ac15f893e1ab2a5dd83e823e44abd": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "632c916608b95995899b9aad0b0f706923f8ea56": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "42815a781b58b878f9bd0ff50f92b791ccc554be": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "d939c9435af83a4a23e9d32eba25c35e586e2b71": {"commitUser": "sbordet", "commitGHEventType": "closed"}}, "created": "2019-07-08 07:55:35", "commitsDetails": [{"commitMessage": "Merge pull request #3899 from eclipse/jetty-9.4.x-3856-maxForm_contentLength_behavior\n\nFixes #3856 - Different behaviour with maxFormContentSize=0 if Content-Length header is present/missing.", "commitParents": ["cb87d7049e1e1a152e6c45a5ca8d0acdf682195f", "632c916608b95995899b9aad0b0f706923f8ea56"], "commitHash": "2e2cde69e918993d21e9231af03c183c28528b5b", "commitSpoonAstDiffStats": [{"spoonFilePath": "FormTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.FormTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ContextHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler", "DEL": 2, "INS": 6, "UPD": 0, "MOV": 4, "TOT": 12}]}, {"spoonFilePath": "UrlEncoded.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.UrlEncoded.decodeTo(java.lang.String,org.eclipse.jetty.util.MultiMap,java.nio.charset.Charset)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.UrlEncoded.decode88591To(java.io.InputStream,org.eclipse.jetty.util.MultiMap,int,int)", "DEL": 6, "INS": 2, "UPD": 4, "MOV": 34, "TOT": 46}, {"spoonMethodName": "org.eclipse.jetty.util.UrlEncoded.decodeUtf8To(java.io.InputStream,org.eclipse.jetty.util.MultiMap,int,int)", "DEL": 2, "INS": 3, "UPD": 0, "MOV": 3, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.util.UrlEncoded.decodeTo(java.io.InputStream,org.eclipse.jetty.util.MultiMap,java.nio.charset.Charset,int,int)", "DEL": 3, "INS": 3, "UPD": 0, "MOV": 3, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.util.UrlEncoded.checkMaxKeys(org.eclipse.jetty.util.MultiMap,int)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.UrlEncoded.checkMaxLength(int,int)", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}]}, {"spoonFilePath": "Request.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Request.lookupServerAttribute(java.lang.String,int)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.Request.extractFormParameters(org.eclipse.jetty.util.MultiMap)", "DEL": 11, "INS": 6, "UPD": 16, "MOV": 12, "TOT": 45}]}], "nameRev": "2e2cde69e918993d21e9231af03c183c28528b5b tags/jetty-9.4.20.v20190813~17", "commitUser": "sbordet", "authoredDateTime": "2019-08-07 19:46:49", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 11, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/ContextHandler.java", "insertions": 7, "deletions": 4}, {"lines": 203, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/FormTest.java", "insertions": 203, "deletions": 0}, {"lines": 61, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Request.java", "insertions": 22, "deletions": 39}, {"lines": 58, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/UrlEncoded.java", "insertions": 34, "deletions": 24}], "commitDateTime": "2019-08-07 19:46:49", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #3856 - Different behaviour with maxFormContentSize=0 if Content-Length header is present/missing.\n\nChanged the logic to lookup server attributes if there is no context.\nThis fixes a failing test that was explicitly setting the server\nattributes after start.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["2488c9611f2e345a9eaaca8c49aca314f8ea9a6b"], "commitHash": "8418f56e944e7e29eae9715c84e99035dc75b0ef", "commitSpoonAstDiffStats": [{"spoonFilePath": "ContextHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler", "DEL": 2, "INS": 3, "UPD": 3, "MOV": 3, "TOT": 11}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.doStart()", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "Request.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Request.lookupServerAttribute(java.lang.String,int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.Request.extractFormParameters(org.eclipse.jetty.util.MultiMap)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "8418f56e944e7e29eae9715c84e99035dc75b0ef tags/jetty-9.4.20.v20190813~17^2~1", "commitUser": "sbordet", "authoredDateTime": "2019-08-02 22:05:07", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 16, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/ContextHandler.java", "insertions": 6, "deletions": 10}, {"lines": 15, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Request.java", "insertions": 15, "deletions": 0}], "commitDateTime": "2019-08-02 22:05:07", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #3856 - Different behaviour with maxFormContentSize=0 if Content-Length header is present/missing.\n\nChanges after review.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["d939c9435af83a4a23e9d32eba25c35e586e2b71"], "commitHash": "2629961e745ac15f893e1ab2a5dd83e823e44abd", "commitSpoonAstDiffStats": [{"spoonFilePath": "FormTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.FormTest.testMaxFormKeysZero()", "DEL": 1, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.servlet.FormTest.testMaxFormContentSizeZero(boolean).1.service(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlet.FormTest.testMaxFormKeysZero().3.service(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "ContextHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 2, "TOT": 4}]}, {"spoonFilePath": "UrlEncoded.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.UrlEncoded.decodeTo(java.io.InputStream,org.eclipse.jetty.util.MultiMap,java.nio.charset.Charset,int,int)", "DEL": 3, "INS": 3, "UPD": 0, "MOV": 4, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.util.UrlEncoded.checkMaxKeys(org.eclipse.jetty.util.MultiMap,int)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.UrlEncoded.checkMaxLength(int,int)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.UrlEncoded.decode88591To(java.io.InputStream,org.eclipse.jetty.util.MultiMap,int,int)", "DEL": 6, "INS": 2, "UPD": 3, "MOV": 33, "TOT": 44}, {"spoonMethodName": "org.eclipse.jetty.util.UrlEncoded.decodeUtf8To(java.io.InputStream,org.eclipse.jetty.util.MultiMap,int,int)", "DEL": 2, "INS": 3, "UPD": 0, "MOV": 3, "TOT": 8}]}, {"spoonFilePath": "Request.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Request.extractFormParameters(org.eclipse.jetty.util.MultiMap)", "DEL": 8, "INS": 8, "UPD": 3, "MOV": 11, "TOT": 30}]}], "nameRev": "2629961e745ac15f893e1ab2a5dd83e823e44abd tags/jetty-9.4.20.v20190813~17^2~4", "commitUser": "sbordet", "authoredDateTime": "2019-07-23 22:01:13", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 4, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/ContextHandler.java", "insertions": 2, "deletions": 2}, {"lines": 13, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/FormTest.java", "insertions": 5, "deletions": 8}, {"lines": 37, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Request.java", "insertions": 14, "deletions": 23}, {"lines": 51, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/UrlEncoded.java", "insertions": 32, "deletions": 19}], "commitDateTime": "2019-07-23 22:01:13", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #3856 - Different behaviour with maxFormContentSize=0 if Content-Length header is present/missing.\n\nRemoved duplicated, unused, code.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["8418f56e944e7e29eae9715c84e99035dc75b0ef"], "commitHash": "632c916608b95995899b9aad0b0f706923f8ea56", "commitSpoonAstDiffStats": [{"spoonFilePath": "ContextHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.lookup(java.lang.String,int)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "632c916608b95995899b9aad0b0f706923f8ea56 tags/jetty-9.4.20.v20190813~17^2", "commitUser": "sbordet", "authoredDateTime": "2019-08-07 17:35:10", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 16, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/ContextHandler.java", "insertions": 0, "deletions": 16}], "commitDateTime": "2019-08-07 17:35:10", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #3856 - Different behaviour with maxFormContentSize=0 if Content-Length header is present/missing.\n\nUpdated code to reflect reviews.\nNow lookup of system properties and server attributes is done in\nContextHandler.doStart(), so that the getter always return the\nactual value (and this is good for JMX too).\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["2629961e745ac15f893e1ab2a5dd83e823e44abd"], "commitHash": "42815a781b58b878f9bd0ff50f92b791ccc554be", "commitSpoonAstDiffStats": [{"spoonFilePath": "FormTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.FormTest.testMaxFormKeysZero()", "DEL": 1, "INS": 0, "UPD": 2, "MOV": 3, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.servlet.FormTest.testMaxFormContentSizeZero(boolean)", "DEL": 2, "INS": 0, "UPD": 5, "MOV": 3, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.servlet.FormTest.testMaxFormContentSizeZeroWithContentLength()", "DEL": 1, "INS": 0, "UPD": 1, "MOV": 3, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.servlet.FormTest.testMaxFormKeysZero().3", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.FormTest.testMaxFormKeysExceeded(java.lang.Integer)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.FormTest.testMaxFormContentSizeZero(boolean).2.getLength()", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.FormTest.testMaxFormContentSizeExceeded(java.lang.Integer,boolean)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlet.FormTest.formContentSizeScenarios()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlet.FormTest.testMaxFormContentSizeZeroWithoutContentLength()", "DEL": 1, "INS": 0, "UPD": 2, "MOV": 4, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.servlet.FormTest", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlet.FormTest.formKeysScenarios()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ContextHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler", "DEL": 1, "INS": 4, "UPD": 2, "MOV": 6, "TOT": 13}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.doStart()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.lookup(java.lang.String,int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "UrlEncoded.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.UrlEncoded.decodeTo(java.lang.String,org.eclipse.jetty.util.MultiMap,java.nio.charset.Charset)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "Request.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Request.getContentLength()", "DEL": 2, "INS": 3, "UPD": 1, "MOV": 1, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.server.Request.extractFormParameters(org.eclipse.jetty.util.MultiMap)", "DEL": 4, "INS": 3, "UPD": 4, "MOV": 6, "TOT": 17}, {"spoonMethodName": "org.eclipse.jetty.server.Request.getContentLengthLong()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 2}]}], "nameRev": "42815a781b58b878f9bd0ff50f92b791ccc554be tags/jetty-9.4.20.v20190813~17^2~3", "commitUser": "sbordet", "authoredDateTime": "2019-08-02 19:12:49", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 31, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/ContextHandler.java", "insertions": 27, "deletions": 4}, {"lines": 103, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/FormTest.java", "insertions": 77, "deletions": 26}, {"lines": 48, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Request.java", "insertions": 19, "deletions": 29}, {"lines": 23, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/UrlEncoded.java", "insertions": 10, "deletions": 13}], "commitDateTime": "2019-08-02 19:12:49", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #3856 - Different behaviour with maxFormContentSize=0 if Content-Length header is present/missing.\n\nFixed zero checks and exception messages.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["40fc4ef340c7f07b22b7cdff1dfc384cc6a52288"], "commitHash": "d939c9435af83a4a23e9d32eba25c35e586e2b71", "commitSpoonAstDiffStats": [{"spoonFilePath": "FormTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.FormTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "UrlEncoded.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.UrlEncoded.decodeTo(java.io.InputStream,org.eclipse.jetty.util.MultiMap,java.nio.charset.Charset,int,int)", "DEL": 1, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.util.UrlEncoded.decode88591To(java.io.InputStream,org.eclipse.jetty.util.MultiMap,int,int)", "DEL": 1, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.util.UrlEncoded.decodeUtf8To(java.io.InputStream,org.eclipse.jetty.util.MultiMap,int,int)", "DEL": 1, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 3}]}, {"spoonFilePath": "Request.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Request.extractFormParameters(org.eclipse.jetty.util.MultiMap)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 2}]}], "nameRev": "d939c9435af83a4a23e9d32eba25c35e586e2b71 tags/jetty-9.4.20.v20190813~17^2~5", "commitUser": "sbordet", "authoredDateTime": "2019-07-23 15:44:08", "commitGHEventType": "closed", "commitGitStats": [{"lines": 155, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/FormTest.java", "insertions": 155, "deletions": 0}, {"lines": 5, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Request.java", "insertions": 2, "deletions": 3}, {"lines": 12, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/UrlEncoded.java", "insertions": 6, "deletions": 6}], "commitDateTime": "2019-07-23 15:44:08", "spoonStatsSkippedReason": ""}], "title": "Different behaviour with maxFormContentSize=0 if Content-Length header is present/missing", "spoonStatsSummary": {"spoonMethodsChanged": 4, "DEL": 4, "INS": 5, "UPD": 3, "MOV": 3, "TOT": 15, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 31, "insertions": 21, "gitFilesChange": 2, "deletions": 10}, "closed": "2019-08-07 16:46:55", "statsSkippedReason": "", "body": "Hi,\r\n\r\nwith jetty 9.4.19 some visitors cannot post on our website anymore whe HTTP 2 is in use. \r\nfrom our tests it works fine as long as a \"content-length\" header is supplied. if this header is missing it is still working with HTTP 1.1, but not with HTTP 2\r\n\r\nit seems the the inputstream of UrlEncoded.decodeUtf8To reads some bytes if  HTTP 2 is used  but not in HTTP 1.1.\r\n\r\nthis breaks as soon as HttpServletRequest.getParameters() is called.\r\n\r\nif i interpreted the RFCs right the content-length header is not required.\r\n\r\n```curl 'https://localhost/' -H 'Content-Length:' -H 'Connection: keep-alive' -H 'Cache-Control: max-age=0'  -H 'Content-Type: application/x-www-form-urlencoded' --data 'login=user&password=pass' --compressed -D - -q -o /dev/null --http1.1```\r\n\r\n```\r\ncurl 'https://localhost/' -H 'content-length:' -H 'upgrade-insecure-requests: 1' -H 'content-type: application/x-www-form-urlencoded' --data 'login=login&password=pass'  -D- -q -o /dev/null --http2```\r\n\r\nThanks,\r\nGeorg", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server", "jetty-server/src/main/java/org/eclipse/jetty/server/handler"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.handler.ContextHandler", "org.eclipse.jetty.server.Request.lookupServerAttribute(java.lang.String,int)", "org.eclipse.jetty.server.Request.extractFormParameters(org.eclipse.jetty.util.MultiMap)", "org.eclipse.jetty.server.handler.ContextHandler.doStart()"], "ttf": 30.00027777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/3856"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "lachlan-roberts", "filteredCommits": ["196833d15e5108f1313a54f9ea3ef0b94c9973d6", "1554b3dbb16dc629315dae44a77f2dcc7734bb93", "2383bf4974ba7d82109cedfc4a8e7693d106abf0"], "commits": {"b6ad73bd7d70bea642c6779069f17e92db439caa": {"commitUser": "lachlan-roberts", "commitGHEventType": "referenced"}, "2383bf4974ba7d82109cedfc4a8e7693d106abf0": {"commitUser": "lachlan-roberts", "commitGHEventType": "referenced"}, "1554b3dbb16dc629315dae44a77f2dcc7734bb93": {"commitUser": "lachlan-roberts", "commitGHEventType": "referenced"}, "d8164a1728d4b0413b9420c16950ea04f60b17b2": {"commitUser": "lachlan-roberts", "commitGHEventType": "referenced"}, "196833d15e5108f1313a54f9ea3ef0b94c9973d6": {"commitUser": "lachlan-roberts", "commitGHEventType": "referenced"}}, "created": "2019-07-01 06:16:00", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "b6ad73bd7d70bea642c6779069f17e92db439caa", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "lachlan-roberts", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3835 - ensure WebSocketSessions are always stopped\n\nSigned-off-by: Lachlan Roberts <lachlan@webtide.com>\n", "commitParents": ["c94230da4011d3b996ee0520aa209932040f0d51"], "commitHash": "2383bf4974ba7d82109cedfc4a8e7693d106abf0", "commitSpoonAstDiffStats": [{"spoonFilePath": "WebSocketUpgradeRequest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketUpgradeRequest.upgrade(org.eclipse.jetty.client.HttpResponse,org.eclipse.jetty.client.http.HttpConnectionOverHTTP)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "WebSocketSession.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.WebSocketSession", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ClientContainer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.ClientContainer.JsrSessionListenerBridge.onSessionCreated(org.eclipse.jetty.websocket.common.WebSocketSession)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "SessionTracker.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.SessionTracker.onSessionClosed(org.eclipse.jetty.websocket.common.WebSocketSession)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.SessionTracker.onSessionCreated(org.eclipse.jetty.websocket.common.WebSocketSession)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.SessionTracker.onSessionOpened(org.eclipse.jetty.websocket.common.WebSocketSession)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 3, "TOT": 5}]}, {"spoonFilePath": "WebSocketServerFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketServerFactory.upgrade(org.eclipse.jetty.server.HttpConnection,org.eclipse.jetty.websocket.servlet.ServletUpgradeRequest,org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse,org.eclipse.jetty.websocket.common.events.EventDriver)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "WebSocketSessionListener.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.onSessionCreated(org.eclipse.jetty.websocket.common.WebSocketSession)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ClientOpenSessionTracker.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.tests.client.ClientOpenSessionTracker.onSessionCreated(org.eclipse.jetty.websocket.common.WebSocketSession)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ClientSessionsTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.tests.client.ClientSessionsTest.testBasicEcho_FromClient().2.onSessionCreated(org.eclipse.jetty.websocket.common.WebSocketSession)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.tests.client.ClientSessionsTest.testBasicEcho_FromClient()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ConcurrentConnectTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.tests.ConcurrentConnectTest.testConcurrentConnect()", "DEL": 0, "INS": 4, "UPD": 0, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.websocket.tests.ConcurrentConnectTest.CloseListener", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "BadNetworkTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.tests.client.BadNetworkTest.testAbruptClientClose().3.onSessionCreated(org.eclipse.jetty.websocket.common.WebSocketSession)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "SessionTrackingTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.SessionTrackingTest.testAddRemoveSessions().1.onSessionCreated(org.eclipse.jetty.websocket.common.WebSocketSession)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "2383bf4974ba7d82109cedfc4a8e7693d106abf0 tags/jetty-9.4.20.v20190813~53^2~3", "commitUser": "lachlan-roberts", "authoredDateTime": "2019-07-01 16:17:41", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 32, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/ConcurrentConnectTest.java", "insertions": 32, "deletions": 0}, {"lines": 5, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/ClientOpenSessionTracker.java", "insertions": 5, "deletions": 0}, {"lines": 5, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/ClientContainer.java", "insertions": 5, "deletions": 0}, {"lines": 7, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/ClientSessionsTest.java", "insertions": 6, "deletions": 1}, {"lines": 1, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/WebSocketUpgradeRequest.java", "insertions": 0, "deletions": 1}, {"lines": 10, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/SessionTracker.java", "insertions": 9, "deletions": 1}, {"lines": 5, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/BadNetworkTest.java", "insertions": 5, "deletions": 0}, {"lines": 5, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/SessionTrackingTest.java", "insertions": 5, "deletions": 0}, {"lines": 2, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/WebSocketSession.java", "insertions": 2, "deletions": 0}, {"lines": 1, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/WebSocketServerFactory.java", "insertions": 0, "deletions": 1}, {"lines": 2, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/WebSocketSessionListener.java", "insertions": 2, "deletions": 0}], "commitDateTime": "2019-07-01 16:40:45", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3835 - fix SessionTracker dump, add test assertions\n\nSigned-off-by: Lachlan Roberts <lachlan@webtide.com>\n", "commitParents": ["2383bf4974ba7d82109cedfc4a8e7693d106abf0"], "commitHash": "196833d15e5108f1313a54f9ea3ef0b94c9973d6", "commitSpoonAstDiffStats": [{"spoonFilePath": "ConcurrentConnectTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.tests.ConcurrentConnectTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.tests.ConcurrentConnectTest.MyWebSocketServlet", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.tests.ConcurrentConnectTest.testConcurrentConnect()", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.tests.ConcurrentConnectTest.MyWebSocketServlet.configure(org.eclipse.jetty.websocket.servlet.WebSocketServletFactory)", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 3, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.tests.ConcurrentConnectTest.start()", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 3}]}, {"spoonFilePath": "SessionTracker.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.SessionTracker.dump(java.lang.Appendable,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "196833d15e5108f1313a54f9ea3ef0b94c9973d6 tags/jetty-9.4.20.v20190813~53^2~2", "commitUser": "lachlan-roberts", "authoredDateTime": "2019-07-02 18:32:22", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 28, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/ConcurrentConnectTest.java", "insertions": 18, "deletions": 10}, {"lines": 10, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/SessionTracker.java", "insertions": 9, "deletions": 1}], "commitDateTime": "2019-07-02 19:06:05", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #3836 from eclipse/jetty-9.4.x-3835-WebSocketSession-LifeCycle\n\nIssue #3835 - ensure WebSocketSessions are always stopped", "commitParents": ["4fb596cf1c56a3dae68f4e2c2d1fdd41612befae", "062444630f7028ede32eec29b452a9cc06bd7778"], "commitHash": "d8164a1728d4b0413b9420c16950ea04f60b17b2", "commitSpoonAstDiffStats": [{"spoonFilePath": "WebSocketUpgradeRequest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketUpgradeRequest.upgrade(org.eclipse.jetty.client.HttpResponse,org.eclipse.jetty.client.http.HttpConnectionOverHTTP)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "WebSocketSession.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.WebSocketSession", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ClientOpenSessionTracker.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.tests.client.ClientOpenSessionTracker.onSessionOpened(org.eclipse.jetty.websocket.common.WebSocketSession)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "SessionTracker.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.SessionTracker.dump(java.lang.Appendable,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.SessionTracker.onSessionClosed(org.eclipse.jetty.websocket.common.WebSocketSession)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.SessionTracker.onSessionOpened(org.eclipse.jetty.websocket.common.WebSocketSession)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "WebSocketServerFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketServerFactory.upgrade(org.eclipse.jetty.server.HttpConnection,org.eclipse.jetty.websocket.servlet.ServletUpgradeRequest,org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse,org.eclipse.jetty.websocket.common.events.EventDriver)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "WebSocketSessionListener.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.onSessionClosed(org.eclipse.jetty.websocket.common.WebSocketSession)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.onSessionOpened(org.eclipse.jetty.websocket.common.WebSocketSession)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.onSessionCreated(org.eclipse.jetty.websocket.common.WebSocketSession)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ClientSessionsTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.tests.client.ClientSessionsTest.testBasicEcho_FromClient().2.onSessionOpened(org.eclipse.jetty.websocket.common.WebSocketSession)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.tests.client.ClientSessionsTest.testBasicEcho_FromClient()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ConcurrentConnectTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.tests.ConcurrentConnectTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.tests.ConcurrentConnectTest.MyWebSocketServlet", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.tests.ConcurrentConnectTest.MyWebSocketServlet.configure(org.eclipse.jetty.websocket.servlet.WebSocketServletFactory)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 3, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.websocket.tests.ConcurrentConnectTest.testConcurrentConnect()", "DEL": 0, "INS": 7, "UPD": 0, "MOV": 0, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.websocket.tests.ConcurrentConnectTest.start()", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 3}]}], "nameRev": "d8164a1728d4b0413b9420c16950ea04f60b17b2 tags/jetty-9.4.20.v20190813~53", "commitUser": "lachlan-roberts", "authoredDateTime": "2019-07-04 12:59:49", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 38, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/ConcurrentConnectTest.java", "insertions": 34, "deletions": 4}, {"lines": 5, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/ClientOpenSessionTracker.java", "insertions": 0, "deletions": 5}, {"lines": 7, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/ClientSessionsTest.java", "insertions": 1, "deletions": 6}, {"lines": 1, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/WebSocketUpgradeRequest.java", "insertions": 0, "deletions": 1}, {"lines": 14, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/SessionTracker.java", "insertions": 12, "deletions": 2}, {"lines": 2, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/WebSocketSession.java", "insertions": 2, "deletions": 0}, {"lines": 1, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/WebSocketServerFactory.java", "insertions": 0, "deletions": 1}, {"lines": 12, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/WebSocketSessionListener.java", "insertions": 10, "deletions": 2}], "commitDateTime": "2019-07-04 12:59:49", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3835 - add default methods to WebSocketSessionListener\n\nSigned-off-by: Lachlan Roberts <lachlan@webtide.com>\n", "commitParents": ["196833d15e5108f1313a54f9ea3ef0b94c9973d6"], "commitHash": "1554b3dbb16dc629315dae44a77f2dcc7734bb93", "commitSpoonAstDiffStats": [{"spoonFilePath": "ClientContainer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.ClientContainer.JsrSessionListenerBridge.onSessionCreated(org.eclipse.jetty.websocket.common.WebSocketSession)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "SessionTracker.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.SessionTracker.onSessionOpened(org.eclipse.jetty.websocket.common.WebSocketSession)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "WebSocketSessionListener.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.onSessionClosed(org.eclipse.jetty.websocket.common.WebSocketSession)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.onSessionOpened(org.eclipse.jetty.websocket.common.WebSocketSession)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.onSessionCreated(org.eclipse.jetty.websocket.common.WebSocketSession)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ClientOpenSessionTracker.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.tests.client.ClientOpenSessionTracker.onSessionOpened(org.eclipse.jetty.websocket.common.WebSocketSession)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.tests.client.ClientOpenSessionTracker.onSessionCreated(org.eclipse.jetty.websocket.common.WebSocketSession)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ClientSessionsTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.tests.client.ClientSessionsTest.testBasicEcho_FromClient().2.onSessionCreated(org.eclipse.jetty.websocket.common.WebSocketSession)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.tests.client.ClientSessionsTest.testBasicEcho_FromClient().2.onSessionOpened(org.eclipse.jetty.websocket.common.WebSocketSession)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ConcurrentConnectTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.tests.ConcurrentConnectTest.CloseListener.onSessionCreated(org.eclipse.jetty.websocket.common.WebSocketSession)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.tests.ConcurrentConnectTest.CloseListener.onSessionOpened(org.eclipse.jetty.websocket.common.WebSocketSession)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "BadNetworkTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.tests.client.BadNetworkTest.testAbruptClientClose().3.onSessionCreated(org.eclipse.jetty.websocket.common.WebSocketSession)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "SessionTrackingTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.SessionTrackingTest.testAddRemoveSessions().1.onSessionCreated(org.eclipse.jetty.websocket.common.WebSocketSession)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "1554b3dbb16dc629315dae44a77f2dcc7734bb93 tags/jetty-9.4.20.v20190813~53^2~1", "commitUser": "lachlan-roberts", "authoredDateTime": "2019-07-03 11:33:32", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 10, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/ConcurrentConnectTest.java", "insertions": 0, "deletions": 10}, {"lines": 10, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/ClientOpenSessionTracker.java", "insertions": 0, "deletions": 10}, {"lines": 5, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/ClientContainer.java", "insertions": 0, "deletions": 5}, {"lines": 10, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/ClientSessionsTest.java", "insertions": 0, "deletions": 10}, {"lines": 6, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/SessionTracker.java", "insertions": 0, "deletions": 6}, {"lines": 5, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/BadNetworkTest.java", "insertions": 0, "deletions": 5}, {"lines": 5, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/SessionTrackingTest.java", "insertions": 0, "deletions": 5}, {"lines": 12, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/WebSocketSessionListener.java", "insertions": 9, "deletions": 3}], "commitDateTime": "2019-07-03 11:33:32", "spoonStatsSkippedReason": ""}], "title": "WebSocketSession are not being stopped properly", "spoonStatsSummary": {"spoonMethodsChanged": 13, "DEL": 9.0, "INS": 9.0, "UPD": 0.0, "MOV": 3.0, "TOT": 21.0, "spoonFilesChanged": 7}, "gitStatsSummary": {"lines": 54.0, "insertions": 36.0, "gitFilesChange": 6, "deletions": 18.0}, "closed": "2019-07-08 02:44:21", "statsSkippedReason": "", "body": "WebSocketSession stop is not called in the normal case when a session is being closed, it is only called from the `SessionTracker` if it is being shut down with a non empty session list\r\n\r\n`WebSocketSession.stop()` should be called every time a session is closed because it manages the LifeCycle of things like the ExtensionStack which may need to free its Deflaters when stopped", "changesInPackagesGIT": ["jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client", "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356", "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server", "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common"], "changesInPackagesSPOON": ["org.eclipse.jetty.websocket.jsr356.ClientContainer.JsrSessionListenerBridge.onSessionCreated(org.eclipse.jetty.websocket.common.WebSocketSession)", "org.eclipse.jetty.websocket.common.SessionTracker.onSessionClosed(org.eclipse.jetty.websocket.common.WebSocketSession)", "org.eclipse.jetty.websocket.common.onSessionCreated(org.eclipse.jetty.websocket.common.WebSocketSession)", "org.eclipse.jetty.websocket.server.WebSocketServerFactory.upgrade(org.eclipse.jetty.server.HttpConnection,org.eclipse.jetty.websocket.servlet.ServletUpgradeRequest,org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse,org.eclipse.jetty.websocket.common.events.EventDriver)", "org.eclipse.jetty.websocket.tests.client.ClientOpenSessionTracker.onSessionOpened(org.eclipse.jetty.websocket.common.WebSocketSession)", "org.eclipse.jetty.websocket.tests.client.ClientOpenSessionTracker.onSessionCreated(org.eclipse.jetty.websocket.common.WebSocketSession)", "org.eclipse.jetty.websocket.client.WebSocketUpgradeRequest.upgrade(org.eclipse.jetty.client.HttpResponse,org.eclipse.jetty.client.http.HttpConnectionOverHTTP)", "org.eclipse.jetty.websocket.common.SessionTracker.dump(java.lang.Appendable,java.lang.String)", "org.eclipse.jetty.websocket.common.SessionTracker.onSessionCreated(org.eclipse.jetty.websocket.common.WebSocketSession)", "org.eclipse.jetty.websocket.common.onSessionClosed(org.eclipse.jetty.websocket.common.WebSocketSession)", "org.eclipse.jetty.websocket.common.WebSocketSession", "org.eclipse.jetty.websocket.common.SessionTracker.onSessionOpened(org.eclipse.jetty.websocket.common.WebSocketSession)", "org.eclipse.jetty.websocket.common.onSessionOpened(org.eclipse.jetty.websocket.common.WebSocketSession)"], "ttf": 6.000277777777778, "numCommits": 3, "url": "https://github.com/eclipse/jetty.project/issues/3835"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "Charon-Shi", "filteredCommits": ["c94230da4011d3b996ee0520aa209932040f0d51"], "commits": {"c94230da4011d3b996ee0520aa209932040f0d51": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2019-06-27 22:14:27", "commitsDetails": [{"commitMessage": "Issue #3832 Test for proxy protocol v2\n\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\n", "commitParents": ["01a02cc15b5d79e403da8240e63e327cc4d80641"], "commitHash": "c94230da4011d3b996ee0520aa209932040f0d51", "commitSpoonAstDiffStats": [{"spoonFilePath": "ProxyProtocolTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ProxyProtocolTest.testProxyProtocolV2()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ProxyProtocolTest.testProxyProtocol()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "c94230da4011d3b996ee0520aa209932040f0d51 tags/jetty-9.4.20.v20190813~66", "commitUser": "gregw", "authoredDateTime": "2019-06-29 10:04:01", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 84, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ProxyProtocolTest.java", "insertions": 83, "deletions": 1}], "commitDateTime": "2019-06-29 10:04:01", "spoonStatsSkippedReason": ""}], "title": "Proxy Protocol version 2 Parser has bug", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0, "insertions": 0, "gitFilesChange": 0, "deletions": 0}, "closed": "2019-06-29 08:05:06", "statsSkippedReason": "", "body": "According to PPv2 protocol:\r\n\r\n> PP2_TYPE_NOOP\r\n> The TLV of this type should be ignored when parsed. The value is zero or more\r\n> bytes. Can be used for data padding or alignment. Note that it can be used\r\n> to align only by 3 or more bytes because a TLV can not be smaller than that. \r\n\r\nBut In ProxyConnectionFactory.java, next() function in class ProxyProtocolV2Connection, it always read value into bytes array even when length is 1 and value is just one byte, this will break the read workflow.\r\n\r\nWhat's more, the length can be 0 and you need to skip one byte in this situation.", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 1.0002777777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/3832"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "sjrd218", "filteredCommits": [], "commits": {"cf4e7412d440c581bc351de69fee1d00eac1a33e": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "6ae09bd0352f279021234dfec1039e3aa5dc0209": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2019-06-24 20:30:07", "commitsDetails": [{"commitMessage": "Issue #3815 Ensure user not in roles for PropertyFileLoginModule (#3826)\n\nSigned-off-by: Jan Bartel <janb@webtide.com>", "commitParents": ["e26179e8e95f688f480ea02474861c075782305f"], "commitHash": "cf4e7412d440c581bc351de69fee1d00eac1a33e", "commitSpoonAstDiffStats": [{"spoonFilePath": "PropertyFileLoginModule.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.jaas.spi.PropertyFileLoginModule.getUserInfo(java.lang.String)", "DEL": 2, "INS": 2, "UPD": 2, "MOV": 2, "TOT": 8}]}, {"spoonFilePath": "PropertyFileLoginModuleTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.jaas.spi.PropertyFileLoginModuleTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "cf4e7412d440c581bc351de69fee1d00eac1a33e tags/jetty-9.4.20.v20190813~61", "commitUser": "janbartel", "authoredDateTime": "2019-07-01 15:46:14", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 53, "filePath": "jetty-jaas/src/test/java/org/eclipse/jetty/jaas/spi/PropertyFileLoginModuleTest.java", "insertions": 53, "deletions": 0}, {"lines": 16, "filePath": "jetty-jaas/src/main/java/org/eclipse/jetty/jaas/spi/PropertyFileLoginModule.java", "insertions": 7, "deletions": 9}, {"lines": 1, "filePath": "jetty-jaas/src/test/resources/login.properties", "insertions": 1, "deletions": 0}], "commitDateTime": "2019-07-01 15:46:14", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "6ae09bd0352f279021234dfec1039e3aa5dc0209", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "PropertyFileLoginModule adds user principle as a role", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2019-07-01 13:47:34", "statsSkippedReason": "", "body": "https://github.com/eclipse/jetty.project/blob/7b941098d02a7d305a38a02ddf447eaa8f19070a/jetty-jaas/src/main/java/org/eclipse/jetty/jaas/spi/PropertyFileLoginModule.java#L119-L126\r\n\r\nWhen PropertyFileLoginModule adds the principles to the role list it does not discriminate between the user principle and the role principles. This causes the user to be added to the list of roles which is not desirable. \r\n\r\nThe expected behavior is for only role type principles to be added to the role list without also adding the user principle.", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 6.000277777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/3815"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 25, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 2}, "labels": ["Bug"], "user": "gaoxingliang", "filteredCommits": [], "commits": {"72474d8a671c3d5864429becfb714a0e65c010ed": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "72ffe697521fe308846d5045b7a1838bfdd0398b": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "d03496cf5d02f77e20f8231a41aa1365cfc758a3": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "56f73a2c4ddbd2881bea7ba574aa558ee25fbc26": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "6d9202f0b5c24d3de9f1752e5d5413ee5759660b": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "59588475ecb089386b378bbb91eeb4f73ee5f347": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "2558aac086f86122ff9fd25ba0336af147215d15": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "ed3ba54c537eb0af4804cbc43396f7d8d3c35c0f": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "f02ce731007e0fc790d752f9fa9761f3ed522b88": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "8f1ec06059d94d62454a95af4285d513371c854f": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "4367f7e5115455d76acecf3a0dafb55e448b3fa3": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "d71a2d8f7ded24bf68c47fbeb0737a02649a8dec": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "fb6680f04b3c1462d710e35898af7d63cc0276e3": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "e448047623a996196777d20b238ae274e6b677e6": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "3d3a4ab984ed526f48cb9b1a5a7e4cdce218824e": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "f3a18bcd27332809ed0e07ce309356286d0bc673": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "ab7f8e7d641971443102f03c5a9d911380052d9d": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "b715f2d25439099a35df775605bf197e1881bfc8": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "ae71b99a6c04e8282ca86542bb23e19f8f0a665f": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "0b0f19a7631bb8f62de5bb5823554aba06cd3cd8": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "f1080a37655e865a3de084325de73f9f5cf8e8f8": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "802b692878fa7cc216a24634d1993d2d5435dd2d": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "001e219e51229eb5734144c9822b604e1fdc1d4c": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "6fa73c98e5da1ee967d00b8101a785ac2c658cca": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "6c49a5d47f3bfd20d171fcf2b7721d1a6ead6a79": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "bde86467f4e5df595773ab11ed5e80c615b741f3": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "f6ef8ac8b9e0e86ed4f09d87de4882c2bab9b7d4": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2019-06-24 01:17:43", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "72474d8a671c3d5864429becfb714a0e65c010ed", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "72ffe697521fe308846d5045b7a1838bfdd0398b", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "d03496cf5d02f77e20f8231a41aa1365cfc758a3", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "56f73a2c4ddbd2881bea7ba574aa558ee25fbc26", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "6d9202f0b5c24d3de9f1752e5d5413ee5759660b", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "59588475ecb089386b378bbb91eeb4f73ee5f347", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "2558aac086f86122ff9fd25ba0336af147215d15", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "f02ce731007e0fc790d752f9fa9761f3ed522b88", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "8f1ec06059d94d62454a95af4285d513371c854f", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "4367f7e5115455d76acecf3a0dafb55e448b3fa3", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3806 async sendError (minimal fix) (#3875)\n\n* Issue #3806 async sendError\r\n\r\nThis is a minimal fix for the async race of sendError using isHandled\r\nat the same time as the normal dispatch is exiting.\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n\r\n* Issue #3806 async sendError\r\n\r\nFixed isStreaming method in minimal fix (showing the need for actual\r\ntest harnesses).\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n", "commitParents": ["6f9495f5c13466fb2e730195f8e6d1802e6dacfe"], "commitHash": "d71a2d8f7ded24bf68c47fbeb0737a02649a8dec", "commitSpoonAstDiffStats": [{"spoonFilePath": "ErrorHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.ErrorHandler.generateAcceptableResponse(org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse,int,java.lang.String)", "DEL": 2, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ErrorHandler.doError(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 8, "MOV": 0, "TOT": 8}]}, {"spoonFilePath": "Response.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Response.isStreaming()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.Response.sendError(int,java.lang.String)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "Request.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Request", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.Request.setContext(org.eclipse.jetty.server.handler.ContextHandler.Context)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.Request.getErrorContext()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ErrorHandlerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest.testMoreSpecificAccept()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "d71a2d8f7ded24bf68c47fbeb0737a02649a8dec tags/jetty-9.4.20.v20190813~42", "commitUser": "gregw", "authoredDateTime": "2019-07-17 23:25:30", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 14, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/ErrorHandler.java", "insertions": 6, "deletions": 8}, {"lines": 14, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ErrorHandlerTest.java", "insertions": 14, "deletions": 0}, {"lines": 17, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Request.java", "insertions": 16, "deletions": 1}, {"lines": 7, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Response.java", "insertions": 6, "deletions": 1}], "commitDateTime": "2019-07-17 23:25:30", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "fb6680f04b3c1462d710e35898af7d63cc0276e3", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "e448047623a996196777d20b238ae274e6b677e6", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "3d3a4ab984ed526f48cb9b1a5a7e4cdce218824e", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "f3a18bcd27332809ed0e07ce309356286d0bc673", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "ab7f8e7d641971443102f03c5a9d911380052d9d", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "b715f2d25439099a35df775605bf197e1881bfc8", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "ae71b99a6c04e8282ca86542bb23e19f8f0a665f", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "0b0f19a7631bb8f62de5bb5823554aba06cd3cd8", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "f1080a37655e865a3de084325de73f9f5cf8e8f8", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "f6ef8ac8b9e0e86ed4f09d87de4882c2bab9b7d4", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "802b692878fa7cc216a24634d1993d2d5435dd2d", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "001e219e51229eb5734144c9822b604e1fdc1d4c", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "6fa73c98e5da1ee967d00b8101a785ac2c658cca", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "6c49a5d47f3bfd20d171fcf2b7721d1a6ead6a79", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3806 - Make Async sendError fully Async (#3912)\n\n* Issue #3806 async sendError\r\n\r\nAvoid using isHandled as a test withing sendError as this can be\r\ncalled asynchronously and is in a race with the normal dispatch of the\r\nrequest, which could also be setting handled status.\r\n\r\nThe ErrorHandler was dispatching directly to a context from within\r\nsendError.  This meant that an async thread can call sendError and be\r\ndispatched to within the servlet container at the same time that the\r\noriginal thread was still dispatched to the container.\r\n\r\nThis commit fixes that problem by using an async dispatch for error\r\npages within the ErrorHandler.  However, this introduces a new problem\r\nthat a well behaved async app will call complete after calling\r\nsendError.  Thus we have ignore complete ISEs for the remainder of\r\nthe current async cycle.\r\n\r\nFixed the closing of the output after calling sendError. Do not\r\nclose if the request was async (and thus might be dispatched to an\r\nasync error) or if it is now async because the error page itself is\r\nasync.\r\n\r\n* updates from review\r\n* better tests\r\n* revert ignore complete\r\n* added some TODOs\r\n* more TODOs\r\n* fixed rename\r\n* cleanup ISE and more TODOs\r\n* refactored to call sendError for uncaught exceptions rather than onError\r\n* more of the refactor\r\n* extra tests for sendError from completing state\r\n\r\nReworked HttpChannelState and sendError so that sendError is now\r\njust a change of state. All the work is done in the ErrorDispatch\r\naction, including calling the ErrorHandler.  Async not yet working.\r\n\r\nAdditional tests\r\n\r\nConverted ERRORED state to a separate boolean so it can be used for\r\nboth Sync and Async dispatches.\r\n\r\nRemoved ASYNC_IO state as it was just the same as DISPATCHED\r\n\r\nThe async onError listener handling is now most likely broken.\r\n\r\n\r\nWIP making sendError simpler and more tests pass\r\nWIP handling async and thrown exceptions\r\nWIP passing tests\r\n\r\nImproved thread handling\r\n\r\nremoved bad test\r\n\r\nImplemented error dispatch on complete properly\r\nmore fixed tests\r\n\r\nsendError state looks committed\r\n\r\n- Added resetContent method to leave more non-content headers during sendError\r\n- Fixed security tests\r\n- simplified the non dispatch error page writing.  Moved towards being able to write async\r\n\r\n* fixed gzipHandlerTest\r\n\r\n* Updated handling of timeout errors.  According to servlet spec,\r\nexceptions thrown from onTimeout should not be passed to onError, but\r\njust logged and ignored:\r\n\r\n   If an exception is thrown while invoking methods in an AsyncListener,\r\n   it is logged and will not affect the invocation of any other AsyncListeners.\r\n\r\n* This changes several tests.\r\n\r\n* Dispatcher/ContextHandler changes for new ERROR dispatch handling. Feels a bit fragile!\r\n\r\n* Fixed tests in jetty-servlets\r\n* Fixed tests in jetty-proxy\r\n\r\n* more test fixes\r\n\r\n* Fixed head handling\r\nreverted unnecessary changes\r\nImproved reason handling\r\n\r\nWIP on fully async error handling.\r\nSimplified HttpChannelState state machines to allow for async actions\r\nduring completing\r\n\r\nmore WIP on fully async error handling.\r\n\r\nsendError and completion are not both non-blocking, without using\r\na startAsync operation. However we are lacking unit tests that actually\r\nexercise those code paths.\r\n\r\n* Simplified name of states\r\nAdded test for async completion\r\n* Cleanups and javadoc\r\n* Cleanups and javadoc\r\n* remove snake case\r\n* feedback from review\r\n* Write error page into fixed pooled buffer\r\n\r\nUse the response to get/release a pooled buffer into which the error\r\npage can be written.  Make it a fixed sized buffer and if it overflows\r\nthen no error page is generated (first overflow turns off showstacks\r\nto save space).\r\n\r\nThe ErrorHandler badly needs to be refactored, but we cannot change\r\nAPI in jetty-9\r\n\r\n* More test fixes for different error page format\r\n* minor cleanups\r\n* Cleanup from Review\r\n* Fixed javadoc\r\n* cleanups and simplifications\r\n* Cleanup from Review\r\n* renaming and some TODOs\r\n* Cleanup from Review\r\n* Checkstyle fixes\r\n* Cleanup from Review\r\n* Code cleanups and simplifications\r\n* fixed debug\r\n* Cleanup from Review\r\n* Ensure response sent before server shutdown\r\n* removed unnecessary optimisation\r\n* fixed duplicate from merge\r\n* Updates from review\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n", "commitParents": ["0f8230c05b425eacc70f95d9d1b9daddf4cd933b"], "commitHash": "bde86467f4e5df595773ab11ed5e80c615b741f3", "commitSpoonAstDiffStats": [], "nameRev": "bde86467f4e5df595773ab11ed5e80c615b741f3 tags/jetty-9.4.21.v20190926~60", "commitUser": "gregw", "authoredDateTime": "2019-08-26 17:55:58", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 17, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/AsyncListenerTest.java", "insertions": 11, "deletions": 6}, {"lines": 3, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpInput.java", "insertions": 2, "deletions": 1}, {"lines": 1260, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannelState.java", "insertions": 662, "deletions": 598}, {"lines": 2, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/AsyncContextEvent.java", "insertions": 1, "deletions": 1}, {"lines": 69, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ssl/SniSslConnectionFactoryTest.java", "insertions": 26, "deletions": 43}, {"lines": 31, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/ContextHandler.java", "insertions": 6, "deletions": 25}, {"lines": 8, "filePath": "jetty-rewrite/src/test/java/org/eclipse/jetty/rewrite/handler/ResponsePatternRuleTest.java", "insertions": 5, "deletions": 3}, {"lines": 14, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/HttpStatus.java", "insertions": 14, "deletions": 0}, {"lines": 10, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Request.java", "insertions": 9, "deletions": 1}, {"lines": 5, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/AsyncContextTest.java", "insertions": 3, "deletions": 2}, {"lines": 8, "filePath": "tests/test-distribution/src/test/java/org/eclipse/jetty/tests/distribution/BadAppTests.java", "insertions": 4, "deletions": 4}, {"lines": 316, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/ErrorHandler.java", "insertions": 225, "deletions": 91}, {"lines": 11, "filePath": "jetty-servlets/src/main/java/org/eclipse/jetty/servlets/DoSFilter.java", "insertions": 10, "deletions": 1}, {"lines": 3, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/CustomRequestLogTest.java", "insertions": 2, "deletions": 1}, {"lines": 13, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/BufferUtil.java", "insertions": 7, "deletions": 6}, {"lines": 10, "filePath": "jetty-rewrite/src/main/java/org/eclipse/jetty/rewrite/handler/ValidUrlRule.java", "insertions": 9, "deletions": 1}, {"lines": 443, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/ErrorPageTest.java", "insertions": 432, "deletions": 11}, {"lines": 2, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/WebSocketNegotiationTest.java", "insertions": 1, "deletions": 1}, {"lines": 25, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/handler/NcsaRequestLogTest.java", "insertions": 18, "deletions": 7}, {"lines": 2, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/WebSocketInvalidVersionTest.java", "insertions": 1, "deletions": 1}, {"lines": 28, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/HttpServerTestFixture.java", "insertions": 27, "deletions": 1}, {"lines": 4, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/HttpInputAsyncStateTest.java", "insertions": 4, "deletions": 0}, {"lines": 44, "filePath": "jetty-security/src/test/java/org/eclipse/jetty/security/authentication/SpnegoAuthenticatorTest.java", "insertions": 30, "deletions": 14}, {"lines": 15, "filePath": "jetty-rewrite/src/main/java/org/eclipse/jetty/rewrite/handler/ResponsePatternRule.java", "insertions": 13, "deletions": 2}, {"lines": 1, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/handler/SecuredRedirectHandlerTest.java", "insertions": 1, "deletions": 0}, {"lines": 12, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Dispatcher.java", "insertions": 1, "deletions": 11}, {"lines": 133, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/HttpManyWaysToAsyncCommitBadBehaviourTest.java", "insertions": 0, "deletions": 133}, {"lines": 776, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/HttpManyWaysToAsyncCommitTest.java", "insertions": 468, "deletions": 308}, {"lines": 43, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/AsyncServletTest.java", "insertions": 3, "deletions": 40}, {"lines": 3, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/thread/QueuedThreadPool.java", "insertions": 2, "deletions": 1}, {"lines": 5, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/GzipHandlerTest.java", "insertions": 4, "deletions": 1}, {"lines": 106, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ResponseTest.java", "insertions": 52, "deletions": 54}, {"lines": 2, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/WebSocketConnectionStatsTest.java", "insertions": 1, "deletions": 1}, {"lines": 3, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/ShutdownHandler.java", "insertions": 2, "deletions": 1}, {"lines": 62, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ByteBufferOutputStream.java", "insertions": 62, "deletions": 0}, {"lines": 8, "filePath": "jetty-proxy/src/main/java/org/eclipse/jetty/proxy/AbstractProxyServlet.java", "insertions": 8, "deletions": 0}, {"lines": 12, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/AbstractHttpTest.java", "insertions": 5, "deletions": 7}, {"lines": 4, "filePath": "jetty-security/src/test/java/org/eclipse/jetty/security/SpecExampleConstraintTest.java", "insertions": 3, "deletions": 1}, {"lines": 38, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ErrorHandlerTest.java", "insertions": 0, "deletions": 38}, {"lines": 221, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/AsyncCompletionTest.java", "insertions": 221, "deletions": 0}, {"lines": 302, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannel.java", "insertions": 137, "deletions": 165}, {"lines": 14, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpConnection.java", "insertions": 2, "deletions": 12}, {"lines": 12, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Server.java", "insertions": 9, "deletions": 3}, {"lines": 261, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpOutput.java", "insertions": 169, "deletions": 92}, {"lines": 189, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Response.java", "insertions": 98, "deletions": 91}, {"lines": 8, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/AsyncServletIOTest.java", "insertions": 7, "deletions": 1}, {"lines": 5, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/LocalAsyncContextTest.java", "insertions": 5, "deletions": 0}, {"lines": 106, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/HttpServerTestBase.java", "insertions": 57, "deletions": 49}], "commitDateTime": "2019-08-26 17:55:58", "spoonStatsSkippedReason": "tooManyFiles"}, {"commitMessage": "", "commitParents": [], "commitHash": "ed3ba54c537eb0af4804cbc43396f7d8d3c35c0f", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "Error Page handling Async race with ProxyServlet", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2019-08-27 04:35:43", "statsSkippedReason": "", "body": "Hi, I\u2019m using Jetty 9.4.18.v20190429 to implement the reverse proxy function.\r\nbut it has a problem in Chrome 73 when customizing the error page.\r\n\r\nCase:\r\nChrome added a new header application/signed-exchange;v=b3 and this is not a text/ style header since version 73. and this cause a different behavior with the firefox.\r\nOn chrome it\u2019s (note the content-length is 0)\r\n![image](https://user-images.githubusercontent.com/3148215/59984931-af161e80-9660-11e9-84e5-1dc893c4382b.png)\r\n![image](https://user-images.githubusercontent.com/3148215/59984939-bc330d80-9660-11e9-9789-6c2e6c789e16.png)\r\nOn firefox:\r\n![image](https://user-images.githubusercontent.com/3148215/59984952-dec52680-9660-11e9-9615-8097d1431c3c.png)\r\n\r\n\r\nafter digging more:\r\nCode analysis:\r\n\r\n`org.eclipse.jetty.server.handler.ErrorHandler#generateAcceptableResponse(org.eclipse.jetty.server.Request, javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse, int, java.lang.String)`\r\n```\r\n        List<String> acceptable=baseRequest.getHttpFields().getQualityCSV(HttpHeader.ACCEPT, QuotedQualityCSV.MOST_SPECIFIC_MIME_ORDERING);\r\n        \r\n        if (acceptable.isEmpty() && !baseRequest.getHttpFields().contains(HttpHeader.ACCEPT))\r\n        {\r\n            generateAcceptableResponse(baseRequest,request,response,code,message,MimeTypes.Type.TEXT_HTML.asString());\r\n        }\r\n        else\r\n        {\r\n            for (String mimeType:acceptable)\r\n            {\r\n                generateAcceptableResponse(baseRequest,request,response,code,message,mimeType);\r\n                if (baseRequest.isHandled())\r\n                    break;\r\n            }\r\n        }\r\n        baseRequest.setHandled(true);\r\n        baseRequest.getResponse().closeOutput();\r\n```\r\nthis method has a loop on the accept headers to process and generate a readable message.\r\nbut this will NOT work because the \r\n`baseRequest.isHandled()  is always true when entering this code`.\r\n\r\n", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 64.00027777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/3806"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug", "Enhancement"], "user": "joakime", "filteredCommits": [], "commits": {"093b39be09f62b6aa9d841b80eaf7d065115ab14": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "df259d2c9add01a66569d72a0b2cc0bd1efe74da": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "a9106c622801ba5d105ea519bf874db5de5ebfe4": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "0126ae04c0e08104afe18908b680a203450a8383": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "890f59c3321545cfc8408c527e6f1aebf7a9f293": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "27c0ae605f30ec9ab759d72c325be0baadd4d919": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "eb4be618eee23fccd409b8bdbcbaa71736a311c7": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "516fdd45cb97ea68a98fb3871a7e426386861423": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "dc939d753a6b097da500b33e7cb615a32c629ff2": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "70fcd3d1452dac46e6f50be12df9af3b9eb69c10": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "e08d421efc61979f20312acdab4fce6ffd6012aa": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "85f198419d6dde41daf2f3a2d8f1d0e1b43cf03c": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "e4b4a30c4c79983b6bdf4d43b1a706e8213a06b0": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "e7a1978556630552c6c15ad0294649ce36cd2c61": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "8601baa3cc020aeac3566da63ac21048db13943c": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "8c4dd7ab05ce11bf242b1a215c06c72be823aa6b": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "bcb4c59ab2832118b62cba8e1ad4f0da0b26b11e": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "9d497084d435a72ffd3026d97b37d6fab4ea6acc": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "0bfc1bb9eaa7588c2506b18ed568420da09e6e8e": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "597dcc5b9b6a34c2c04378c14a9b7a1c3ecef48c": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "ca5a07ae39e7566ff9d3aebe7e78c149d2a82d0d": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "a523c84383db0d0c9dddbe61cc672a5bfbf1f144": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "b9f70a032d7ffd1c45ce24bf4985104517afa80f": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "bf1ece938f5ecd88c22c72dcf27150648d142141": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "e967cdd8b56a568c910049689b65b5146a6fa9cb": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "94141095868623c0cbbe4ee989d0b56f5e4711d1": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2019-06-21 23:27:43", "commitsDetails": [], "title": "Weld/CDI XML backwards compat?", "spoonStatsSummary": {}, "closed": "2019-08-09 13:43:31", "statsSkippedReason": "", "body": "We have a backwards compat XML breakage for weld/cdi users starting in Jetty 10.0.x\r\n\r\nThe documented format ...\r\nhttps://docs.jboss.org/weld/reference/latest/en-US/html/environments.html#_class_loading\r\n\r\n``` xml\r\n   <Call name=\"prependServerClass\">\r\n      <Arg>-org.eclipse.jetty.util.Decorator</Arg>\r\n   </Call>\r\n   <Call name=\"prependServerClass\">\r\n      <Arg>-org.eclipse.jetty.util.DecoratedObjectFactory</Arg>\r\n   </Call>\r\n   <Call name=\"prependServerClass\">\r\n      <Arg>-org.eclipse.jetty.server.handler.ContextHandler.</Arg>\r\n   </Call>\r\n   <Call name=\"prependServerClass\">\r\n      <Arg>-org.eclipse.jetty.server.handler.ContextHandler</Arg>\r\n   </Call>\r\n   <Call name=\"prependServerClass\">\r\n      <Arg>-org.eclipse.jetty.servlet.ServletContextHandler</Arg>\r\n   </Call>\r\n```\r\n\r\nThe new format, starting in Jetty 10.0.x is ...\r\n\r\n``` xml\r\n  <Get name=\"serverClassMatcher\">\r\n    <Call name=\"add\">\r\n      <Arg>-org.eclipse.jetty.util.Decorator</Arg>\r\n    </Call>\r\n    <Call name=\"add\">\r\n      <Arg>-org.eclipse.jetty.util.DecoratedObjectFactory</Arg>\r\n    </Call>\r\n    <Call name=\"add\">\r\n      <Arg>-org.eclipse.jetty.server.handler.ContextHandler</Arg>\r\n    </Call>\r\n    <Call name=\"add\">\r\n      <Arg>-org.eclipse.jetty.servlet.ServletContextHandler</Arg>\r\n    </Call>\r\n  </Get>\r\n```\r\n\r\nThe changes are ...\r\n\r\n* The `WebAppContext.prependServerClass()` method has been removed.\r\n* The `org.eclipse.jetty.server.handler.ContextHandler.` (note the extra trailing \".\") has been removed.\r\n\r\nIt should be noted that `WebAppContext.prependServerClass()` is a deprecated method in Jetty 9.4.x.\r\n\r\nhttps://github.com/eclipse/jetty.project/blob/b9fc1f736241036162ecfed8ea5cde22337b0f0d/jetty-webapp/src/main/java/org/eclipse/jetty/webapp/WebAppContext.java#L718-L725\r\n\r\nThe suggested alternative of using `.getServerClasspathPattern()` has been renamed in Jetty 10.0.x to `getServerClassMatcher()`\r\n\r\nDo we want to rename this back to `.getServerClasspathPattern()` in Jetty 10.0.x?\r\nOr do we want to bring `.getServerClassMatcher()` back to Jetty 9.4.x?\r\n\r\nEither approach will minimize the version hassles that weld/cdi will have to deal with.", "ttf": 48.000277777777775, "url": "https://github.com/eclipse/jetty.project/issues/3804"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 3, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug", "TCK"], "user": "olamy", "filteredCommits": [], "commits": {"ffca5e6ef73364b4eb54aa7e8a58cc10163b4a69": {"commitUser": "olamy", "commitGHEventType": "referenced"}, "e26179e8e95f688f480ea02474861c075782305f": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "deaaadd2df136c46031d7d0fa065fe09344d3b06": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "219eb51341fd95badfbb742bec74b9f5211d0d47": {"commitUser": "olamy", "commitGHEventType": "referenced"}}, "created": "2019-06-21 07:10:13", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "ffca5e6ef73364b4eb54aa7e8a58cc10163b4a69", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "olamy", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3799 Programmatic listeners from ServletContextListeners. (#3824)\n\n* Issue #3799 Programmatic listeners from ServletContextListeners.\r\n\r\nEnsure programmatic listeners added from ServletContextListeners are\r\ncalled.\r\n\r\nSigned-off-by: Jan Bartel <janb@webtide.com>\r\n\r\n* Issue #3799 add distribution test\r\n\r\nSigned-off-by: olivier lamy <oliver.lamy@gmail.com>\r\n", "commitParents": ["154e036b1d47a136c423a13041abbed522508b46"], "commitHash": "e26179e8e95f688f480ea02474861c075782305f", "commitSpoonAstDiffStats": [], "nameRev": "e26179e8e95f688f480ea02474861c075782305f tags/jetty-9.4.20.v20190813~62", "commitUser": "janbartel", "authoredDateTime": "2019-07-01 15:14:19", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 50, "filePath": "tests/test-webapps/test-jetty-webapp/src/main/java/com/acme/AddListServletRequestListener.java", "insertions": 50, "deletions": 0}, {"lines": 56, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ListenerHolder.java", "insertions": 25, "deletions": 31}, {"lines": 378, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/ServletContextHandlerTest.java", "insertions": 368, "deletions": 10}, {"lines": 38, "filePath": "tests/test-webapps/test-jetty-webapp/src/main/java/com/acme/TestServlet.java", "insertions": 38, "deletions": 0}, {"lines": 27, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/ContextHandler.java", "insertions": 20, "deletions": 7}, {"lines": 24, "filePath": "tests/test-distribution/src/test/resources/test-realm.xml", "insertions": 24, "deletions": 0}, {"lines": 9, "filePath": "tests/test-distribution/src/test/resources/realm.ini", "insertions": 9, "deletions": 0}, {"lines": 21, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletContextHandler.java", "insertions": 16, "deletions": 5}, {"lines": 25, "filePath": "tests/test-distribution/src/test/resources/realm.properties", "insertions": 25, "deletions": 0}, {"lines": 98, "filePath": "tests/test-distribution/src/test/java/org/eclipse/jetty/tests/distribution/DynamicListenerTests.java", "insertions": 98, "deletions": 0}, {"lines": 12, "filePath": "tests/test-webapps/test-jetty-webapp/src/main/webapp/WEB-INF/web.xml", "insertions": 12, "deletions": 0}, {"lines": 7, "filePath": "tests/test-distribution/pom.xml", "insertions": 7, "deletions": 0}, {"lines": 13, "filePath": "tests/test-webapps/test-jetty-webapp/src/main/java/com/acme/TestListener.java", "insertions": 13, "deletions": 0}], "commitDateTime": "2019-07-01 15:14:19", "spoonStatsSkippedReason": "tooManyChanges"}, {"commitMessage": "", "commitParents": [], "commitHash": "deaaadd2df136c46031d7d0fa065fe09344d3b06", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "219eb51341fd95badfbb742bec74b9f5211d0d47", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "olamy", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "Programmatically added listeners from ServletContextListener.contextInitialized() are not called", "spoonStatsSummary": {}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2019-07-01 13:44:19", "statsSkippedReason": "", "body": "Not tested but I suppose the issue is for all EventListener.\r\nPseudo code in a ServletContextListener\r\n```\r\n            AddListServletRequestListener listenerClass =\r\n                sce.getServletContext().createListener( AddListServletRequestListener.class );\r\n            sce.getServletContext().addListener( listenerClass );\r\n```\r\nThe ServletRequestListener is not executed for any requests", "changesInPackagesGIT": [], "ttf": 10.000277777777777, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/3799"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "ruozhuochen", "filteredCommits": ["af4dd0285ff2db4332ad170efa83210b859690b4"], "commits": {"af4dd0285ff2db4332ad170efa83210b859690b4": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2019-06-21 02:25:19", "commitsDetails": [{"commitMessage": "Issue #3798 - Prevent NPE on null or partial URI in ClasspathPattern\n\n+ Not allowing URI to be null or non-absolute for location or\n  module tests.\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["1118750139b3200006274ab855e8680aec3d21af"], "commitHash": "af4dd0285ff2db4332ad170efa83210b859690b4", "commitSpoonAstDiffStats": [{"spoonFilePath": "ClasspathPattern.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.ClasspathPattern.ByLocation.test(java.net.URI)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.webapp.ClasspathPattern.ByLocationOrModule.test(java.net.URI)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.webapp.ClasspathPattern.ByModule.test(java.net.URI)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "af4dd0285ff2db4332ad170efa83210b859690b4 tags/jetty-9.4.20.v20190813~86^2~1", "commitUser": "joakime", "authoredDateTime": "2019-06-21 07:05:55", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 6, "filePath": "jetty-webapp/src/main/java/org/eclipse/jetty/webapp/ClasspathPattern.java", "insertions": 6, "deletions": 0}], "commitDateTime": "2019-06-21 07:05:55", "spoonStatsSkippedReason": ""}], "title": "ClasspathPattern match method throws NPE. URI can be null", "spoonStatsSummary": {"spoonMethodsChanged": 3, "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 6, "insertions": 6, "gitFilesChange": 1, "deletions": 0}, "closed": "2019-07-26 01:38:50", "statsSkippedReason": "", "body": "https://github.com/eclipse/jetty.project/blob/5e3cecee6feb9313496c1652821aca642a51ce19/jetty-webapp/src/main/java/org/eclipse/jetty/webapp/ClasspathPattern.java#L356\r\n\r\nShould the code check for null? Or relying on it being caught by \r\n\r\nhttps://github.com/eclipse/jetty.project/blob/5e3cecee6feb9313496c1652821aca642a51ce19/jetty-webapp/src/main/java/org/eclipse/jetty/webapp/ClasspathPattern.java#L695\r\n", "changesInPackagesGIT": ["jetty-webapp/src/main/java/org/eclipse/jetty/webapp"], "changesInPackagesSPOON": ["org.eclipse.jetty.webapp.ClasspathPattern.ByLocation.test(java.net.URI)", "org.eclipse.jetty.webapp.ClasspathPattern.ByLocationOrModule.test(java.net.URI)", "org.eclipse.jetty.webapp.ClasspathPattern.ByModule.test(java.net.URI)"], "ttf": 34.000277777777775, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/3798"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 6, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug", "Specification"], "user": "stuban", "filteredCommits": ["345750f9fdc6673fdbf01545d4b0cad074e4d694", "e7e63a5617ffca484a1b1349f8c90eb826605023", "2f3eed86049600b9da385112168f7f8b658fd582", "a1fe57a654db6a44449c0c7e40acb8217cc7eb28"], "commits": {"d188a47ef33a26255fbe3316780af359165348cc": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "2f3eed86049600b9da385112168f7f8b658fd582": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "7c61aa4850184fc5f4d2671a321e829c0978574b": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "967d9a16964c179335071de2a7ec700f5ff03535": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "e9751c7691d81a8b6f9c1db14ddafb862e758b2e": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "345750f9fdc6673fdbf01545d4b0cad074e4d694": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "a1fe57a654db6a44449c0c7e40acb8217cc7eb28": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "2b3f5d5833401100f4ca473399b5500b7f33bbc2": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "e7e63a5617ffca484a1b1349f8c90eb826605023": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "9cf8cf3c0d60c7e92cf0239730183168e90a663b": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2019-06-14 14:09:36", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "d188a47ef33a26255fbe3316780af359165348cc", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3782 - reducing noise during testing\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["a18bd12ada2aabbb72cd142b05fffb0af6cabd6d"], "commitHash": "2f3eed86049600b9da385112168f7f8b658fd582", "commitSpoonAstDiffStats": [], "nameRev": "2f3eed86049600b9da385112168f7f8b658fd582 tags/jetty-9.4.20.v20190813~98", "commitUser": "gregw", "authoredDateTime": "2019-06-14 11:20:08", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 1, "filePath": "jetty-server/src/test/resources/jetty-logging.properties", "insertions": 1, "deletions": 0}], "commitDateTime": "2019-06-17 16:58:20", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "7c61aa4850184fc5f4d2671a321e829c0978574b", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "967d9a16964c179335071de2a7ec700f5ff03535", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "e9751c7691d81a8b6f9c1db14ddafb862e758b2e", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3782 - X-Forwarded-Port refers to node listening port\n\n+ Updating testcases to test requestURL as well.\n+ Adding new testcases for X-Forwarded-Port modifying only\n  the port of an existing `Host:` header.\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["a1fe57a654db6a44449c0c7e40acb8217cc7eb28"], "commitHash": "345750f9fdc6673fdbf01545d4b0cad074e4d694", "commitSpoonAstDiffStats": [{"spoonFilePath": "ForwardedRequestCustomizer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizer.Forwarded.handleHost(org.eclipse.jetty.http.HttpField)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizer.Forwarded.handleHttpHost(org.eclipse.jetty.http.HttpField)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizer.Forwarded", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizer.updateHandles()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizer.Forwarded.handlePort(org.eclipse.jetty.http.HttpField)", "DEL": 1, "INS": 2, "UPD": 6, "MOV": 2, "TOT": 11}]}, {"spoonFilePath": "ForwardedRequestCustomizerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizerTest.testForIpv6AndPort()", "DEL": 0, "INS": 1, "UPD": 2, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizerTest.testRFC7239_Proto()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizerTest.testProto_OldSyntax()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizerTest.testRFC7239_Examples_7_4()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizerTest.testForIpv6AndPort_MultiField()", "DEL": 0, "INS": 1, "UPD": 2, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizerTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizerTest.testURIIpv4()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizerTest.testRFC7239_Examples_7_1()", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizerTest.testSslSession()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizerTest.testForIpv6WithPort()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizerTest.testURIIpv6()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizerTest.init()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizerTest.testRFC7239_Examples_7_5()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizerTest.testPort_For_LateHost()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizerTest.testMixed_For_Port_RFC_For()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizerTest.testPort_For()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizerTest.testLegacyProto()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizerTest.testHostIpv4()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizerTest.testSslCertificate()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizerTest.testRFC7239_Examples_4()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizerTest.testFor()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizerTest.testForIpv4WithPort()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizerTest.testHostIpv6()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "345750f9fdc6673fdbf01545d4b0cad074e4d694 tags/jetty-9.4.20.v20190813~96", "commitUser": "gregw", "authoredDateTime": "2019-06-14 12:28:58", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 24, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/ForwardedRequestCustomizer.java", "insertions": 19, "deletions": 5}, {"lines": 78, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ForwardedRequestCustomizerTest.java", "insertions": 74, "deletions": 4}], "commitDateTime": "2019-06-17 16:58:20", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3782 - updating existing testcases\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["2f3eed86049600b9da385112168f7f8b658fd582"], "commitHash": "a1fe57a654db6a44449c0c7e40acb8217cc7eb28", "commitSpoonAstDiffStats": [], "nameRev": "a1fe57a654db6a44449c0c7e40acb8217cc7eb28 tags/jetty-9.4.20.v20190813~97", "commitUser": "gregw", "authoredDateTime": "2019-06-14 11:20:31", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 692, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ForwardedRequestCustomizerTest.java", "insertions": 382, "deletions": 310}], "commitDateTime": "2019-06-17 16:58:20", "spoonStatsSkippedReason": "tooManyChanges"}, {"commitMessage": "", "commitParents": [], "commitHash": "2b3f5d5833401100f4ca473399b5500b7f33bbc2", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3782 X-Forwarded-Port can be remote or local\n\nImproved names and javadoc after review.\n\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\n", "commitParents": ["9cf8cf3c0d60c7e92cf0239730183168e90a663b"], "commitHash": "e7e63a5617ffca484a1b1349f8c90eb826605023", "commitSpoonAstDiffStats": [{"spoonFilePath": "ForwardedRequestCustomizer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizer.Forwarded.parsedParam(java.lang.StringBuffer,int,int,int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizer", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 2, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizer.Forwarded.handleFor(org.eclipse.jetty.http.HttpField)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizer.Forwarded.handlePort(org.eclipse.jetty.http.HttpField)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizer.Forwarded.handleHost(org.eclipse.jetty.http.HttpField)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizer.setForwardedPortHeaderRemote(boolean)", "DEL": 0, "INS": 0, "UPD": 4, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizer.isForwardedPortHeaderRemote()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "ForwardedRequestCustomizerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizerTest.testRemote_Port_For()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}], "nameRev": "e7e63a5617ffca484a1b1349f8c90eb826605023 tags/jetty-9.4.20.v20190813~94", "commitUser": "gregw", "authoredDateTime": "2019-06-17 14:00:30", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-server/src/main/config/etc/jetty-http-forwarded.xml", "insertions": 1, "deletions": 1}, {"lines": 8, "filePath": "jetty-server/src/main/config/modules/http-forwarded.mod", "insertions": 7, "deletions": 1}, {"lines": 2, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ForwardedRequestCustomizerTest.java", "insertions": 1, "deletions": 1}, {"lines": 29, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/ForwardedRequestCustomizer.java", "insertions": 19, "deletions": 10}], "commitDateTime": "2019-06-17 16:58:20", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3782 X-Forwarded-Port can be remote or local\n\nAdded option for X-Forwarded-Port to be remote or local with default\nbeing local.\n\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\n", "commitParents": ["345750f9fdc6673fdbf01545d4b0cad074e4d694"], "commitHash": "9cf8cf3c0d60c7e92cf0239730183168e90a663b", "commitSpoonAstDiffStats": [{"spoonFilePath": "ForwardedRequestCustomizer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizer.Forwarded.parsedParam(java.lang.StringBuffer,int,int,int)", "DEL": 3, "INS": 3, "UPD": 3, "MOV": 8, "TOT": 17}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizer.Forwarded.handleFor(org.eclipse.jetty.http.HttpField)", "DEL": 2, "INS": 5, "UPD": 4, "MOV": 6, "TOT": 17}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizer", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizer.Forwarded.handleHost(org.eclipse.jetty.http.HttpField)", "DEL": 4, "INS": 3, "UPD": 5, "MOV": 9, "TOT": 21}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizer.Forwarded.handleHttpHost(org.eclipse.jetty.http.HttpField)", "DEL": 2, "INS": 0, "UPD": 3, "MOV": 5, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizer.Forwarded", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizer.setForwardedPortHeaderRemote(boolean)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizer.XHostPort", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 2, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizer.PossiblyPartialHostPort", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizer.Forwarded.handleServer(org.eclipse.jetty.http.HttpField)", "DEL": 1, "INS": 1, "UPD": 2, "MOV": 7, "TOT": 11}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizer.Forwarded.handlePort(org.eclipse.jetty.http.HttpField)", "DEL": 1, "INS": 4, "UPD": 5, "MOV": 7, "TOT": 17}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizer.isForwardedPortHeaderRemote()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizer.updateHandles()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ForwardedRequestCustomizerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizerTest.testRemote_Port_For()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "9cf8cf3c0d60c7e92cf0239730183168e90a663b tags/jetty-9.4.20.v20190813~95", "commitUser": "gregw", "authoredDateTime": "2019-06-17 11:35:40", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 1, "filePath": "jetty-server/src/main/config/etc/jetty-http-forwarded.xml", "insertions": 1, "deletions": 0}, {"lines": 1, "filePath": "jetty-server/src/main/config/modules/http-forwarded.mod", "insertions": 1, "deletions": 0}, {"lines": 25, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ForwardedRequestCustomizerTest.java", "insertions": 25, "deletions": 0}, {"lines": 93, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/ForwardedRequestCustomizer.java", "insertions": 62, "deletions": 31}], "commitDateTime": "2019-06-17 16:58:20", "spoonStatsSkippedReason": ""}], "title": "X-Forwarded-Port overrides X-Forwarded-For", "spoonStatsSummary": {"spoonMethodsChanged": 10, "DEL": 5.0, "INS": 10.0, "UPD": 14.0, "MOV": 10.0, "TOT": 39.0, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 61.0, "insertions": 45.0, "gitFilesChange": 2, "deletions": 16.0}, "closed": "2019-12-05 16:11:28", "statsSkippedReason": "", "body": "For us the changes related to #3630 have some surprising regression with 9.4.19\r\nOur reverse-proxy (haproxy) always sends both X-Forwarded-Port and X-Forwarded-Host headers towards jetty.\r\nThis always worked fine but with 9.4.19 it looks like the X-Forwarded-Port is taken as host.\r\nA simple example just printing out `request.getRequestURL()`\r\nRequest forwarded from upstream haproxy:\r\n```\r\nGET /test/forwardedTest HTTP/1.1\r\nHost: linux-0py3.test-example.de\r\nUser-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:67.0) Gecko/20100101 Firefox/67.0\r\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\nAccept-Language: en,en-US;q=0.95,de;q=0.89,fr-FR;q=0.84,nl;q=0.79,de-DE;q=0.74,en-GB;q=0.68,de-US;q=0.63,en-EN;q=0.58,fr;q=0.53,nl-NL;q=0.47,de-formal;q=0.42,en-CA;q=0.37,en-AU;q=0.32,es-ES;q=0.26,es;q=0.21,en-DE;q=0.16,eng-US;q=0.11,eng;q=0.05\r\nAccept-Encoding: gzip, deflate\r\nDNT: 1\r\nUpgrade-Insecure-Requests: 1\r\nCache-Control: max-age=0\r\nX-Forwarded-Port: 80\r\nX-Forwarded-For: 192.168.251.50\r\n```\r\n\r\nAnswer from 9.4.18:\r\n```\r\nHTTP/1.1 200 OK\r\nContent-Type: text/html;charset=utf-8\r\nContent-Length: 179\r\n\r\n<html lang=\"en\"><head><title>Servlet Hello</title></head>\r\n<body><h2>Hello World!</h2>\r\n<p>As seen by jetty: http://linux-0py3.test-example/test/forwardedTest</p>\r\n</body></html>\r\n```\r\n\r\nAnswer from 9.4.19:\r\n```\r\nHTTP/1.1 200 OK\r\nContent-Type: text/html;charset=utf-8\r\nContent-Length: 155\r\n\r\n<html lang=\"en\"><head><title>Servlet Hello</title></head>\r\n<body><h2>Hello World!</h2>\r\n<p>As seen by jetty: http://80/test/forwardedTest</p>\r\n</body></html>\r\n```", "changesInPackagesGIT": ["jetty-server/src/main/config/modules/http-forwarded.mod", "jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.ForwardedRequestCustomizer.Forwarded.parsedParam(java.lang.StringBuffer,int,int,int)", "org.eclipse.jetty.server.ForwardedRequestCustomizer", "org.eclipse.jetty.server.ForwardedRequestCustomizer.Forwarded.handleFor(org.eclipse.jetty.http.HttpField)", "org.eclipse.jetty.server.ForwardedRequestCustomizer.Forwarded", "org.eclipse.jetty.server.ForwardedRequestCustomizer.Forwarded.handleHost(org.eclipse.jetty.http.HttpField)", "org.eclipse.jetty.server.ForwardedRequestCustomizer.Forwarded.handleHttpHost(org.eclipse.jetty.http.HttpField)", "org.eclipse.jetty.server.ForwardedRequestCustomizer.Forwarded.handlePort(org.eclipse.jetty.http.HttpField)", "org.eclipse.jetty.server.ForwardedRequestCustomizer.setForwardedPortHeaderRemote(boolean)", "org.eclipse.jetty.server.ForwardedRequestCustomizer.isForwardedPortHeaderRemote()", "org.eclipse.jetty.server.ForwardedRequestCustomizer.updateHandles()"], "ttf": 174.00027777777777, "numCommits": 2, "url": "https://github.com/eclipse/jetty.project/issues/3782"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 9, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 2}, "labels": ["Bug"], "user": "sbordet", "filteredCommits": [], "commits": {"af1381fb41545aeda8da716ca500454fcc36ef38": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "819c37997516ca49b1b00978344c5a8c2f600f08": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "c1833767d442be072bd8d1983fd56c0b8f2f320b": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "e241795200dfa03242890e7ec50c6b2c9a3fa36b": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "2db3b84c213f3ed3db8aa656d1e29f2182671dfa": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "8d69a99f9f183ea4d73e6b83938d0fcd0c357f94": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "edc47d5dd0b7f0b1c7476fd8e9cc3171b7982df2": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "4f74e19463b2b62037eaa6050002b6b3d3d40cfb": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "ff414a08ea6a3946a7bcd4871a6e66913f9654cf": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "2d36f034a5d0802c95cefc84fc62dc4737036010": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "630f96dba5947ad40094fb35141cd490792a44a5": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2019-06-07 08:46:00", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "edc47d5dd0b7f0b1c7476fd8e9cc3171b7982df2", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Servlet Context/Handler/Holder  cleanups (#3767)\n\nIssue #3749 #3755 Servlet annotation cleanups\r\nCleanups when checking thread safety of lazy servlet/filter introspection.\r\n\r\n + Handle multiple holders for annotated servlets\r\n + Replaced duplicate code with common methods\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n", "commitParents": ["2ea0bca3331731dd74aaba0ce4f9e8c26d02a534"], "commitHash": "819c37997516ca49b1b00978344c5a8c2f600f08", "commitSpoonAstDiffStats": [{"spoonFilePath": "ServletContextHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.ServletContextHandler.replaceHandler(org.eclipse.jetty.server.handler.HandlerWrapper,org.eclipse.jetty.server.handler.HandlerWrapper)", "DEL": 0, "INS": 7, "UPD": 0, "MOV": 0, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletContextHandler.Context.addServlet(java.lang.String,javax.servlet.Servlet)", "DEL": 3, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletContextHandler.Context.addFilter(java.lang.String,java.lang.String)", "DEL": 3, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletContextHandler.replaceHandler(org.eclipse.jetty.server.Handler,org.eclipse.jetty.server.Handler)", "DEL": 1, "INS": 0, "UPD": 4, "MOV": 8, "TOT": 13}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletContextHandler.setServletHandler(org.eclipse.jetty.servlet.ServletHandler)", "DEL": 0, "INS": 1, "UPD": 2, "MOV": 6, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletContextHandler.Context.checkDynamicName(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletContextHandler.Context.addServlet(java.lang.String,java.lang.Class)", "DEL": 3, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletContextHandler.Context.addServlet(java.lang.String,java.lang.String)", "DEL": 3, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletContextHandler.Context.addFilter(java.lang.String,javax.servlet.Filter)", "DEL": 3, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletContextHandler.setGzipHandler(org.eclipse.jetty.server.handler.gzip.GzipHandler)", "DEL": 4, "INS": 1, "UPD": 1, "MOV": 7, "TOT": 13}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletContextHandler.setSessionHandler(org.eclipse.jetty.server.session.SessionHandler)", "DEL": 4, "INS": 1, "UPD": 0, "MOV": 12, "TOT": 17}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletContextHandler.Context.addFilter(java.lang.String,java.lang.Class)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 3, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletContextHandler.setSecurityHandler(org.eclipse.jetty.security.SecurityHandler)", "DEL": 1, "INS": 0, "UPD": 2, "MOV": 6, "TOT": 9}]}, {"spoonFilePath": "ServletHolder.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.ServletHolder", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletHolder.newInstance()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 2, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletHolder.JspContainer", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "MultiPartConfigAnnotationHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.annotations.MultiPartConfigAnnotationHandler.doHandle(java.lang.Class)", "DEL": 2, "INS": 1, "UPD": 0, "MOV": 4, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.annotations.MultiPartConfigAnnotationHandler.getServletHolderForClass(java.lang.Class)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "RunAsAnnotationHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.annotations.RunAsAnnotationHandler.getServletHolderForClass(java.lang.Class)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.annotations.RunAsAnnotationHandler.doHandle(java.lang.Class)", "DEL": 3, "INS": 1, "UPD": 0, "MOV": 7, "TOT": 11}]}, {"spoonFilePath": "ServletHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.ServletHandler.getServlets(java.lang.Class)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "819c37997516ca49b1b00978344c5a8c2f600f08 tags/jetty-9.4.20.v20190813~108^2~1", "commitUser": "gregw", "authoredDateTime": "2019-06-12 08:00:01", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 18, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletHandler.java", "insertions": 17, "deletions": 1}, {"lines": 170, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletContextHandler.java", "insertions": 49, "deletions": 121}, {"lines": 21, "filePath": "jetty-annotations/src/main/java/org/eclipse/jetty/annotations/RunAsAnnotationHandler.java", "insertions": 1, "deletions": 20}, {"lines": 11, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletHolder.java", "insertions": 4, "deletions": 7}, {"lines": 21, "filePath": "jetty-annotations/src/main/java/org/eclipse/jetty/annotations/MultiPartConfigAnnotationHandler.java", "insertions": 1, "deletions": 20}], "commitDateTime": "2019-06-12 08:00:01", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "c1833767d442be072bd8d1983fd56c0b8f2f320b", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "e241795200dfa03242890e7ec50c6b2c9a3fa36b", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "8d69a99f9f183ea4d73e6b83938d0fcd0c357f94", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "2db3b84c213f3ed3db8aa656d1e29f2182671dfa", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "af1381fb41545aeda8da716ca500454fcc36ef38", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3749 Fix memory leak for AsyncContextListeners with annotations (#3769)\n\n* Issue #3749 Fix memory leak for AsyncContextListeners with annotations\r\n\r\nAlso make InjectionCollection and LifeCycleCollection threadsafe for\r\nreaders with concurrent modifications.\r\n\r\nSigned-off-by: Jan Bartel <janb@webtide.com>\r\n\r\n", "commitParents": ["1a6ceb2fa8f45d915bbce12132c9f29d6483bbbe"], "commitHash": "4f74e19463b2b62037eaa6050002b6b3d3d40cfb", "commitSpoonAstDiffStats": [], "nameRev": "4f74e19463b2b62037eaa6050002b6b3d3d40cfb tags/jetty-9.4.20.v20190813~64", "commitUser": "janbartel", "authoredDateTime": "2019-07-01 14:46:40", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 3, "filePath": "jetty-annotations/src/main/java/org/eclipse/jetty/annotations/PreDestroyAnnotationHandler.java", "insertions": 1, "deletions": 2}, {"lines": 1, "filePath": "jetty-annotations/src/main/java/org/eclipse/jetty/annotations/package-info.java", "insertions": 0, "deletions": 1}, {"lines": 16, "filePath": "jetty-plus/src/main/java/org/eclipse/jetty/plus/annotation/RunAs.java", "insertions": 5, "deletions": 11}, {"lines": 2, "filePath": "jetty-plus/src/test/java/org/eclipse/jetty/plus/jndi/NamingEntryUtilTest.java", "insertions": 1, "deletions": 1}, {"lines": 11, "filePath": "jetty-plus/src/main/java/org/eclipse/jetty/plus/annotation/RunAsCollection.java", "insertions": 7, "deletions": 4}, {"lines": 1, "filePath": "jetty-plus/src/main/java/org/eclipse/jetty/plus/security/package-info.java", "insertions": 0, "deletions": 1}, {"lines": 23, "filePath": "jetty-annotations/src/test/java/org/eclipse/jetty/annotations/TestSecurityAnnotationConversions.java", "insertions": 14, "deletions": 9}, {"lines": 2, "filePath": "jetty-annotations/src/test/java/org/eclipse/jetty/annotations/Multi.java", "insertions": 0, "deletions": 2}, {"lines": 18, "filePath": "jetty-plus/src/main/java/org/eclipse/jetty/plus/annotation/PreDestroyCallback.java", "insertions": 18, "deletions": 0}, {"lines": 89, "filePath": "jetty-plus/src/main/java/org/eclipse/jetty/plus/annotation/LifeCycleCallbackCollection.java", "insertions": 51, "deletions": 38}, {"lines": 7, "filePath": "jetty-annotations/src/test/java/org/eclipse/jetty/annotations/resources/TestResourceAnnotations.java", "insertions": 4, "deletions": 3}, {"lines": 17, "filePath": "jetty-annotations/src/main/java/org/eclipse/jetty/annotations/ResourceAnnotationHandler.java", "insertions": 6, "deletions": 11}, {"lines": 41, "filePath": "jetty-annotations/src/main/java/org/eclipse/jetty/annotations/AnnotationIntrospector.java", "insertions": 29, "deletions": 12}, {"lines": 1, "filePath": "jetty-plus/src/main/java/org/eclipse/jetty/plus/jndi/package-info.java", "insertions": 0, "deletions": 1}, {"lines": 147, "filePath": "jetty-plus/src/main/java/org/eclipse/jetty/plus/annotation/Injection.java", "insertions": 70, "deletions": 77}, {"lines": 87, "filePath": "jetty-plus/src/main/java/org/eclipse/jetty/plus/annotation/LifeCycleCallback.java", "insertions": 45, "deletions": 42}, {"lines": 2, "filePath": "tests/test-sessions/test-sessions-common/src/test/java/org/eclipse/jetty/server/session/SessionListenerTest.java", "insertions": 1, "deletions": 1}, {"lines": 44, "filePath": "jetty-plus/src/main/java/org/eclipse/jetty/plus/webapp/PlusDescriptorProcessor.java", "insertions": 11, "deletions": 33}, {"lines": 3, "filePath": "jetty-annotations/src/main/java/org/eclipse/jetty/annotations/PostConstructAnnotationHandler.java", "insertions": 1, "deletions": 2}, {"lines": 3, "filePath": "jetty-annotations/src/test/java/org/acme/ClassOne.java", "insertions": 2, "deletions": 1}, {"lines": 4, "filePath": "jetty-annotations/src/main/java/org/eclipse/jetty/annotations/RunAsAnnotationHandler.java", "insertions": 1, "deletions": 3}, {"lines": 18, "filePath": "jetty-plus/src/main/java/org/eclipse/jetty/plus/annotation/PostConstructCallback.java", "insertions": 18, "deletions": 0}, {"lines": 1, "filePath": "jetty-annotations/src/test/java/org/eclipse/jetty/annotations/Sample.java", "insertions": 0, "deletions": 1}, {"lines": 234, "filePath": "jetty-plus/src/test/java/org/eclipse/jetty/plus/annotation/LifeCycleCallbackCollectionTest.java", "insertions": 234, "deletions": 0}, {"lines": 1, "filePath": "jetty-plus/src/main/java/org/eclipse/jetty/plus/webapp/package-info.java", "insertions": 0, "deletions": 1}, {"lines": 1, "filePath": "jetty-plus/src/main/java/org/eclipse/jetty/plus/annotation/package-info.java", "insertions": 0, "deletions": 1}, {"lines": 6, "filePath": "jetty-annotations/src/test/java/org/eclipse/jetty/annotations/TestAnnotationParser.java", "insertions": 2, "deletions": 4}, {"lines": 44, "filePath": "jetty-plus/src/main/java/org/eclipse/jetty/plus/annotation/InjectionCollection.java", "insertions": 30, "deletions": 14}, {"lines": 2, "filePath": "jetty-annotations/src/main/java/org/eclipse/jetty/annotations/AnnotationConfiguration.java", "insertions": 0, "deletions": 2}, {"lines": 3, "filePath": "jetty-annotations/src/test/java/org/eclipse/jetty/annotations/ServletC.java", "insertions": 2, "deletions": 1}], "commitDateTime": "2019-07-01 14:46:40", "spoonStatsSkippedReason": "tooManyFiles"}, {"commitMessage": "", "commitParents": [], "commitHash": "ff414a08ea6a3946a7bcd4871a6e66913f9654cf", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "2d36f034a5d0802c95cefc84fc62dc4737036010", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "630f96dba5947ad40094fb35141cd490792a44a5", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "Memory leak while processing AsyncListener annotations", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2019-07-01 13:45:19", "statsSkippedReason": "", "body": "Class `AsyncListenerServlet.MyAsyncListener` of `test-spec-webapp` is annotated with `@PostConstruct`.\r\n\r\nFor every request, a new instance of `MyAsyncListener` is created and its annotations processed, but the instance is stored in a list mapped to context attribute `org.eclipse.jetty.lifecyleCallbackCollection` and never removed from the list when the request cycle ends.\r\n\r\n```java\r\nAsyncContext asyncContext = req.startAsync();\r\nMyAsyncListener listener = asyncContext.createListener(MyAsyncListener.class);\r\n// listener is never used\r\nasyncContext.complete();\r\n```\r\n\r\nThe instance is added in `PostConstructAnnotationHandler.doHandle()` which is called directly from `AsyncContext.createListener()`.\r\n\r\nClass `PlusDecorator` extracts the attribute and calls `@PostConstruct` for every leaked instance.\r\n\r\nI suspect that this happens for field injections too and possibly for other injections as they seems to all use the same mechanism (store instances in a list mapped to a context attribute).", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 24.00027777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/3749"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 2, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "shamsimam", "filteredCommits": [], "commits": {"c97280612ed13490509839ce72ffedea047ab09b": {"commitUser": "lachlan-roberts", "commitGHEventType": "referenced"}, "a2716fada9658a62c4d8cf96518b16d434dda624": {"commitUser": "lachlan-roberts", "commitGHEventType": "referenced"}, "c94753ece3f79715c5d0707c60dcdfed17d678c9": {"commitUser": "lachlan-roberts", "commitGHEventType": "referenced"}}, "created": "2019-06-06 22:58:16", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "c97280612ed13490509839ce72ffedea047ab09b", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "lachlan-roberts", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "a2716fada9658a62c4d8cf96518b16d434dda624", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "lachlan-roberts", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3746 - fix WriteFlusher ClassCastException if Callback throws (#3778)\n\nSigned-off-by: Lachlan Roberts <lachlan@webtide.com>", "commitParents": ["370a85b921ecbeb244c506cb3fdb5c7d8cd5ed09"], "commitHash": "c94753ece3f79715c5d0707c60dcdfed17d678c9", "commitSpoonAstDiffStats": [{"spoonFilePath": "WriteFlusherTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.WriteFlusherTest.testConcurrentWrites().7", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.WriteFlusherTest.testFailWhileBlocking().5", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.WriteFlusherTest.testCallbackThrows()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.WriteFlusherTest.testPendingWriteDoesNotStoreConsumedBuffers()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.io.WriteFlusherTest.testConcurrentIncompleteFlushAndOnFail().8", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.WriteFlusherTest.testConcurrentIncompleteFlushAndOnFail().8.onIncompleteFlush()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.WriteFlusherTest.testCloseWhileBlocking()", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 4, "TOT": 7}]}, {"spoonFilePath": "WriteFlusher.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.WriteFlusher.fail(org.eclipse.jetty.util.Callback,java.lang.Throwable[])", "DEL": 0, "INS": 1, "UPD": 2, "MOV": 2, "TOT": 5}]}], "nameRev": "c94753ece3f79715c5d0707c60dcdfed17d678c9 tags/jetty-9.4.20.v20190813~104", "commitUser": "lachlan-roberts", "authoredDateTime": "2019-06-13 15:51:22", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 31, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/WriteFlusher.java", "insertions": 29, "deletions": 2}, {"lines": 55, "filePath": "jetty-io/src/test/java/org/eclipse/jetty/io/WriteFlusherTest.java", "insertions": 46, "deletions": 9}], "commitDateTime": "2019-06-13 15:51:22", "spoonStatsSkippedReason": ""}], "title": "ClassCastException in WriteFlusher.java - IdleState cannot be cast to FailedState", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2019-06-18 03:17:58", "statsSkippedReason": "", "body": "This happened for us while streaming chunks of data asynchronously.\r\n\r\nDetailed stack trace (from a Clojure project):\r\n\r\nJetty version: 9.4.18.v20190429\r\n\r\n```\r\n#error {\r\n :cause org.eclipse.jetty.io.WriteFlusher$IdleState cannot be cast to org.eclipse.jetty.io.WriteFlusher$FailedState\r\n :via\r\n [{:type java.lang.ClassCastException\r\n   :message org.eclipse.jetty.io.WriteFlusher$IdleState cannot be cast to org.eclipse.jetty.io.WriteFlusher$FailedState\r\n   :at [org.eclipse.jetty.io.WriteFlusher fail WriteFlusher.java 310]}]\r\n :trace\r\n [[org.eclipse.jetty.io.WriteFlusher fail WriteFlusher.java 310]\r\n  [org.eclipse.jetty.io.WriteFlusher write WriteFlusher.java 304]\r\n  [org.eclipse.jetty.io.AbstractEndPoint write AbstractEndPoint.java 380]\r\n  [org.eclipse.jetty.http2.HTTP2Flusher process HTTP2Flusher.java 247]\r\n  [org.eclipse.jetty.util.IteratingCallback processing IteratingCallback.java 241]\r\n  [org.eclipse.jetty.util.IteratingCallback iterate IteratingCallback.java 224]\r\n  [org.eclipse.jetty.http2.HTTP2Session newStream HTTP2Session.java 569]\r\n  [org.eclipse.jetty.http2.client.http.HttpSenderOverHTTP2 sendHeaders HttpSenderOverHTTP2.java 95]\r\n  [org.eclipse.jetty.client.HttpSender send HttpSender.java 214]\r\n  [org.eclipse.jetty.http2.client.http.HttpChannelOverHTTP2 send HttpChannelOverHTTP2.java 96]\r\n  [org.eclipse.jetty.client.HttpChannel send HttpChannel.java 128]\r\n  [org.eclipse.jetty.client.HttpConnection send HttpConnection.java 201]\r\n  [org.eclipse.jetty.http2.client.http.HttpConnectionOverHTTP2 send HttpConnectionOverHTTP2.java 77]\r\n  [org.eclipse.jetty.http2.client.http.HttpDestinationOverHTTP2 send HttpDestinationOverHTTP2.java 38]\r\n  [org.eclipse.jetty.client.HttpDestination process HttpDestination.java 346]\r\n  [org.eclipse.jetty.client.HttpDestination process HttpDestination.java 304]\r\n  [org.eclipse.jetty.client.HttpDestination send HttpDestination.java 294]\r\n  [org.eclipse.jetty.client.HttpDestination send HttpDestination.java 269]\r\n  [org.eclipse.jetty.client.HttpDestination send HttpDestination.java 246]\r\n  [org.eclipse.jetty.client.HttpClient send HttpClient.java 576]\r\n  [org.eclipse.jetty.client.HttpRequest send HttpRequest.java 726]\r\n  [org.eclipse.jetty.client.HttpRequest send HttpRequest.java 718]\r\n  ...]}\r\n```", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 11.000277777777777, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/3746"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 2}, "labels": ["Bug"], "user": "gregw", "filteredCommits": ["db30cbd184075a249d640de40e7ccb274b72d2e9", "1118750139b3200006274ab855e8680aec3d21af", "cc966dd1f2c0be0e6e2c73cace110869d1e61385", "5eb3e73400b25d8ba654bf53e0085532206877e2", "8d59302978d8107bfce40754ead29986940b5f94"], "commits": {"5c91e44eaf86f0b6c74afead33b6d1bd8aed9921": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "8d59302978d8107bfce40754ead29986940b5f94": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "1118750139b3200006274ab855e8680aec3d21af": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "cc966dd1f2c0be0e6e2c73cace110869d1e61385": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "5eb3e73400b25d8ba654bf53e0085532206877e2": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "b9fc1f736241036162ecfed8ea5cde22337b0f0d": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "2e7c588e2892c34830e2d6086416f856fa8e0f7f": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "db30cbd184075a249d640de40e7ccb274b72d2e9": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2019-05-28 08:27:42", "commitsDetails": [{"commitMessage": "Issue #3700 better handling of null location (#3837)\n\nIssue #3700 if a location is null then consider if there are inclusions and/or exclusions when matching a class.\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>", "commitParents": ["21857f0b817e1cca993f24484ac808d0905f6106"], "commitHash": "5c91e44eaf86f0b6c74afead33b6d1bd8aed9921", "commitSpoonAstDiffStats": [{"spoonFilePath": "ClasspathPattern.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.ClasspathPattern.combine(org.eclipse.jetty.util.IncludeExcludeSet,java.lang.String,org.eclipse.jetty.util.IncludeExcludeSet,java.util.function.Supplier)", "DEL": 1, "INS": 1, "UPD": 1, "MOV": 3, "TOT": 6}]}, {"spoonFilePath": "IncludeExcludeSet.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.IncludeExcludeSet.hasExcludes()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "5c91e44eaf86f0b6c74afead33b6d1bd8aed9921 tags/jetty-9.4.20.v20190813~57", "commitUser": "gregw", "authoredDateTime": "2019-07-03 11:48:09", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 16, "filePath": "jetty-webapp/src/main/java/org/eclipse/jetty/webapp/ClasspathPattern.java", "insertions": 8, "deletions": 8}, {"lines": 5, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/IncludeExcludeSet.java", "insertions": 5, "deletions": 0}], "commitDateTime": "2019-07-03 11:48:09", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3700 - Reworking getLocationOfClass()\n\n+ Reverting commit against IncludeExcludeSet\n+ TypeUtil.getLocationOfClass is now MethodHandle based\n+ new ModuleLocation class provides Module behaviors for Java 9+\n  Runtimes, and is used by new MethodHandle based getLocationOfClass\n+ Jetty 10 doesn't need reflect complexity of ModuleLocation class\n  and can be inlined as real code in TypeUtil\n+ TypeUtil.getLocationOfClass is only guaranteed to return the\n  URI to the container holding the location of the class, or null.\n  - The JAR file - most common\n  - The Directory - 2nd most common - a classpath dir entry\n  - The jrt:// module reference - if a module reference\n+ URLResource support for results of getLocationOfClass is deprecated\n  (nothing was using it anyway)\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["5eb3e73400b25d8ba654bf53e0085532206877e2"], "commitHash": "8d59302978d8107bfce40754ead29986940b5f94", "commitSpoonAstDiffStats": [{"spoonFilePath": "JrtResourceTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.JrtResourceTest.testResourceFromURLForString()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.JrtResourceTest.testResourceFromStringForString()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.JrtResourceTest", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.JrtResourceTest.testResourceFromUriForString()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ModuleLocation.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.ModuleLocation", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ClasspathPattern.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.ClasspathPattern.combine(org.eclipse.jetty.util.IncludeExcludeSet,java.lang.String,org.eclipse.jetty.util.IncludeExcludeSet,java.util.function.Supplier)", "DEL": 1, "INS": 4, "UPD": 0, "MOV": 5, "TOT": 10}]}, {"spoonFilePath": "IncludeExcludeSet.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.IncludeExcludeSet.isIncludedAndNotExcluded(java.lang.Object)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "TypeUtilTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.TypeUtilTest.testGetLocationOfClass()", "DEL": 1, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.util.TypeUtilTest.testIsFalse()", "DEL": 10, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.util.TypeUtilTest.testGetLocation_JavaLangThreadDeath_Java8RT()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.TypeUtilTest.testGetLocation_JvmCore_Java8RT()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.TypeUtilTest.testGetLocation_JavaLangThreadDeath_JPMS()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.TypeUtilTest.testIsTrue()", "DEL": 10, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.util.TypeUtilTest.getLocationOfClass_ClassDirectory()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.TypeUtilTest.testToHexLong()", "DEL": 4, "INS": 0, "UPD": 0, "MOV": 3, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.util.TypeUtilTest.convertHexDigitTest()", "DEL": 12, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 12}, {"spoonMethodName": "org.eclipse.jetty.util.TypeUtilTest.testGetLocation_JvmCore_JPMS()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.TypeUtilTest.testToHexInt()", "DEL": 5, "INS": 0, "UPD": 0, "MOV": 5, "TOT": 10}]}, {"spoonFilePath": "TypeUtil.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.TypeUtil.getSystemClassLoaderLocation(java.lang.Class)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.TypeUtil.getClassLoaderLocation(java.lang.Class)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.TypeUtil.getCodeSourceLocation(java.lang.Class)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.TypeUtil.getLocationOfClass(java.lang.Class)", "DEL": 1, "INS": 1, "UPD": 7, "MOV": 18, "TOT": 27}, {"spoonMethodName": "org.eclipse.jetty.util.TypeUtil.getModuleLocation(java.lang.Class)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.TypeUtil", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.util.TypeUtil.getClassLoaderLocation(java.lang.Class,java.lang.ClassLoader)", "DEL": 0, "INS": 6, "UPD": 0, "MOV": 0, "TOT": 6}]}], "nameRev": "8d59302978d8107bfce40754ead29986940b5f94 tags/jetty-9.4.20.v20190813~86^2~4", "commitUser": "joakime", "authoredDateTime": "2019-06-20 15:35:10", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 17, "filePath": "jetty-webapp/src/main/java/org/eclipse/jetty/webapp/ClasspathPattern.java", "insertions": 11, "deletions": 6}, {"lines": 4, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/IncludeExcludeSet.java", "insertions": 2, "deletions": 2}, {"lines": 164, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/ModuleLocation.java", "insertions": 164, "deletions": 0}, {"lines": 28, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/TypeUtilTest.java", "insertions": 16, "deletions": 12}, {"lines": 20, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/resource/JrtResourceTest.java", "insertions": 9, "deletions": 11}, {"lines": 145, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/TypeUtil.java", "insertions": 130, "deletions": 15}], "commitDateTime": "2019-06-20 15:35:10", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3700 - Fixing bad ClasspathPatternTest assumptions\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["075333a62788a1419bba3999dc960f900741fb62"], "commitHash": "1118750139b3200006274ab855e8680aec3d21af", "commitSpoonAstDiffStats": [{"spoonFilePath": "TypeUtil.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.TypeUtil.getClassLoaderLocation(java.lang.Class,java.lang.ClassLoader)", "DEL": 2, "INS": 4, "UPD": 1, "MOV": 4, "TOT": 11}]}, {"spoonFilePath": "ClasspathPatternTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.ClasspathPatternTest.testIncludedLocations()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.webapp.ClasspathPatternTest.testExcludeLocations()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}]}], "nameRev": "1118750139b3200006274ab855e8680aec3d21af tags/jetty-9.4.20.v20190813~86^2~2", "commitUser": "joakime", "authoredDateTime": "2019-06-21 06:55:59", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 16, "filePath": "jetty-webapp/src/test/java/org/eclipse/jetty/webapp/ClasspathPatternTest.java", "insertions": 6, "deletions": 10}, {"lines": 10, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/TypeUtil.java", "insertions": 7, "deletions": 3}], "commitDateTime": "2019-06-21 06:55:59", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3700 - Using newer felix version\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["db30cbd184075a249d640de40e7ccb274b72d2e9"], "commitHash": "cc966dd1f2c0be0e6e2c73cace110869d1e61385", "commitSpoonAstDiffStats": [], "nameRev": "cc966dd1f2c0be0e6e2c73cace110869d1e61385 tags/jetty-9.4.20.v20190813~86^2~6", "commitUser": "joakime", "authoredDateTime": "2019-06-18 10:13:56", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "tests/test-webapps/test-felix-webapp/pom.xml", "insertions": 1, "deletions": 1}], "commitDateTime": "2019-06-18 10:13:56", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3700 - Fixing TypeUtil and IncludeExcludeSet to work with null location\n\n+ TypeUtil.getLocationOfClass() respects Class.getClassLoader() of null\n  which means a class belonging to Boot ClassLoader, a Primitive, Void,\n  or a dynamic in-memory class.  Using system classloader is incorrect\n  and invalid in Java 9+\n+ Fixing IncludeExcludeSet.test() to always return TRUE or FALSE\n  never null.\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["cc966dd1f2c0be0e6e2c73cace110869d1e61385"], "commitHash": "5eb3e73400b25d8ba654bf53e0085532206877e2", "commitSpoonAstDiffStats": [{"spoonFilePath": "IncludeExcludeSet.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.IncludeExcludeSet.isIncludedAndNotExcluded(java.lang.Object)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "TypeUtilTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.TypeUtilTest.testGetLocation_JvmCore_Java8RT()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.TypeUtilTest.testGetLocation_JvmCore_JPMS()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "TypeUtil.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.TypeUtil.getLocationOfClass(java.lang.Class)", "DEL": 2, "INS": 2, "UPD": 0, "MOV": 3, "TOT": 7}]}], "nameRev": "5eb3e73400b25d8ba654bf53e0085532206877e2 tags/jetty-9.4.20.v20190813~86^2~5", "commitUser": "joakime", "authoredDateTime": "2019-06-18 11:03:06", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 10, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/TypeUtil.java", "insertions": 7, "deletions": 3}, {"lines": 24, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/TypeUtilTest.java", "insertions": 20, "deletions": 4}, {"lines": 4, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/IncludeExcludeSet.java", "insertions": 2, "deletions": 2}], "commitDateTime": "2019-06-18 11:03:06", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #3777 from eclipse/jetty-9.4.x-3700-felix-webapp-testing\n\nIssue #3700 - Adding felix webapp to test-distribution to help catch URLStreamHandler classloader issues earlier", "commitParents": ["bb486c55ccfa106554d39aad058bb77384ac2600", "6ca87a0de15aa91e7509c5982b2ef3addc7f7329"], "commitHash": "b9fc1f736241036162ecfed8ea5cde22337b0f0d", "commitSpoonAstDiffStats": [{"spoonFilePath": "OsgiAppTests.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.tests.distribution.OsgiAppTests", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "InfoServlet.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.demo.InfoServlet", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ModuleLocation.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.ModuleLocation", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ClasspathPattern.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.ClasspathPattern.ByLocation.test(java.net.URI)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.webapp.ClasspathPattern.ByLocationOrModule.test(java.net.URI)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.webapp.ClasspathPattern.combine(org.eclipse.jetty.util.IncludeExcludeSet,java.lang.String,org.eclipse.jetty.util.IncludeExcludeSet,java.util.function.Supplier)", "DEL": 1, "INS": 4, "UPD": 0, "MOV": 5, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.webapp.ClasspathPattern.ByModule.test(java.net.URI)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "IncludeExcludeSet.java", "spoonMethods": []}, {"spoonFilePath": "ClasspathPatternTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.ClasspathPatternTest.testIncludedLocations()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.webapp.ClasspathPatternTest.testExcludeLocations()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "TypeUtil.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.TypeUtil.getSystemClassLoaderLocation(java.lang.Class)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.TypeUtil.getClassLoaderLocation(java.lang.Class)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.TypeUtil.getCodeSourceLocation(java.lang.Class)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.TypeUtil.getLocationOfClass(java.lang.Class)", "DEL": 2, "INS": 1, "UPD": 7, "MOV": 20, "TOT": 30}, {"spoonMethodName": "org.eclipse.jetty.util.TypeUtil.getModuleLocation(java.lang.Class)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.TypeUtil", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.util.TypeUtil.getClassLoaderLocation(java.lang.Class,java.lang.ClassLoader)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "AppListener.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.demo.AppListener", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "JrtResourceTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.JrtResourceTest.testResourceFromURLForString()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.JrtResourceTest.testResourceFromStringForString()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.JrtResourceTest", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.JrtResourceTest.testResourceFromUriForString()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "TypeUtilTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.TypeUtilTest.testGetLocationOfClass()", "DEL": 1, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.util.TypeUtilTest.testIsFalse()", "DEL": 10, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.util.TypeUtilTest.testGetLocation_JavaLangThreadDeath_Java8RT()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.TypeUtilTest.testGetLocation_JavaLangThreadDeath_JPMS()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.TypeUtilTest.testIsTrue()", "DEL": 10, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.util.TypeUtilTest.getLocationOfClass_ClassDirectory()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.TypeUtilTest.testToHexLong()", "DEL": 4, "INS": 0, "UPD": 0, "MOV": 3, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.util.TypeUtilTest.convertHexDigitTest()", "DEL": 12, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 12}, {"spoonMethodName": "org.eclipse.jetty.util.TypeUtilTest.testGetLocation_JvmCore_JPMS()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.TypeUtilTest.testToHexInt()", "DEL": 5, "INS": 0, "UPD": 0, "MOV": 5, "TOT": 10}]}], "nameRev": "b9fc1f736241036162ecfed8ea5cde22337b0f0d tags/jetty-9.4.20.v20190813~86", "commitUser": "joakime", "authoredDateTime": "2019-06-21 14:45:21", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 69, "filePath": "tests/test-distribution/src/test/java/org/eclipse/jetty/tests/distribution/OsgiAppTests.java", "insertions": 69, "deletions": 0}, {"lines": 16, "filePath": "jetty-webapp/src/test/java/org/eclipse/jetty/webapp/ClasspathPatternTest.java", "insertions": 6, "deletions": 10}, {"lines": 164, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/ModuleLocation.java", "insertions": 164, "deletions": 0}, {"lines": 54, "filePath": "tests/test-webapps/test-felix-webapp/src/main/java/org/eclipse/jetty/demo/InfoServlet.java", "insertions": 54, "deletions": 0}, {"lines": 23, "filePath": "jetty-webapp/src/main/java/org/eclipse/jetty/webapp/ClasspathPattern.java", "insertions": 17, "deletions": 6}, {"lines": 2, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/IncludeExcludeSet.java", "insertions": 1, "deletions": 1}, {"lines": 147, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/TypeUtil.java", "insertions": 135, "deletions": 12}, {"lines": 1, "filePath": "tests/test-webapps/pom.xml", "insertions": 1, "deletions": 0}, {"lines": 50, "filePath": "tests/test-webapps/test-felix-webapp/pom.xml", "insertions": 50, "deletions": 0}, {"lines": 7, "filePath": "tests/test-distribution/pom.xml", "insertions": 7, "deletions": 0}, {"lines": 82, "filePath": "tests/test-webapps/test-felix-webapp/src/main/java/org/eclipse/jetty/demo/AppListener.java", "insertions": 82, "deletions": 0}, {"lines": 20, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/resource/JrtResourceTest.java", "insertions": 9, "deletions": 11}, {"lines": 40, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/TypeUtilTest.java", "insertions": 30, "deletions": 10}], "commitDateTime": "2019-06-21 14:45:21", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "2e7c588e2892c34830e2d6086416f856fa8e0f7f", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3700 - Adding felix webapp tests to discover OSGi issues earlier\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["fab70bd13cc250c9b405be44fd807d380f66c582"], "commitHash": "db30cbd184075a249d640de40e7ccb274b72d2e9", "commitSpoonAstDiffStats": [{"spoonFilePath": "AppListener.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.demo.AppListener", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "OsgiAppTests.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.tests.distribution.OsgiAppTests", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "InfoServlet.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.demo.InfoServlet", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "db30cbd184075a249d640de40e7ccb274b72d2e9 tags/jetty-9.4.20.v20190813~86^2~7", "commitUser": "joakime", "authoredDateTime": "2019-06-12 14:37:13", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 7, "filePath": "tests/test-distribution/pom.xml", "insertions": 7, "deletions": 0}, {"lines": 1, "filePath": "tests/test-webapps/pom.xml", "insertions": 1, "deletions": 0}, {"lines": 50, "filePath": "tests/test-webapps/test-felix-webapp/pom.xml", "insertions": 50, "deletions": 0}, {"lines": 82, "filePath": "tests/test-webapps/test-felix-webapp/src/main/java/org/eclipse/jetty/demo/AppListener.java", "insertions": 82, "deletions": 0}, {"lines": 69, "filePath": "tests/test-distribution/src/test/java/org/eclipse/jetty/tests/distribution/OsgiAppTests.java", "insertions": 69, "deletions": 0}, {"lines": 54, "filePath": "tests/test-webapps/test-felix-webapp/src/main/java/org/eclipse/jetty/demo/InfoServlet.java", "insertions": 54, "deletions": 0}], "commitDateTime": "2019-06-12 14:37:13", "spoonStatsSkippedReason": ""}], "title": "stackoverflow in WebAppClassLoaderUrlStreamTest", "spoonStatsSummary": {"spoonMethodsChanged": 12, "DEL": 8.0, "INS": 29.0, "UPD": 8.0, "MOV": 30.0, "TOT": 75.0, "spoonFilesChanged": 6}, "gitStatsSummary": {"lines": 490.0, "insertions": 459.0, "gitFilesChange": 6, "deletions": 31.0}, "closed": "2019-07-03 09:48:33", "statsSkippedReason": "", "body": "When run from an IDE this test in jetty-10.0.x  fails to initialize with a stackoverflow error:\r\n```\r\n        ...\r\n\tat org.eclipse.jetty.webapp.WebAppClassLoaderUrlStreamTest$URLHandlers.getBuiltInHandler(WebAppClassLoaderUrlStreamTest.java:63)\r\n\tat org.eclipse.jetty.webapp.WebAppClassLoaderUrlStreamTest$URLHandlers.createURLStreamHandler(WebAppClassLoaderUrlStreamTest.java:92)\r\n\tat java.base/java.net.URL.getURLStreamHandler(URL.java:1415)\r\n\tat java.base/java.net.URL.<init>(URL.java:449)\r\n\tat java.base/java.net.URL.fromURI(URL.java:699)\r\n\tat java.base/java.net.URI.toURL(URI.java:1116)\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.findResource(BuiltinClassLoader.java:456)\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.findResource(BuiltinClassLoader.java:227)\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.findResource(BuiltinClassLoader.java:274)\r\n\tat java.base/jdk.internal.loader.BootLoader.findResource(BootLoader.java:154)\r\n\tat java.base/java.lang.ClassLoader.getResource(ClassLoader.java:1397)\r\n\tat java.base/java.lang.ClassLoader.getResource(ClassLoader.java:1395)\r\n\tat org.eclipse.jetty.util.TypeUtil.getLocationOfClass(TypeUtil.java:723)\r\n\tat org.eclipse.jetty.webapp.ClassMatcher.lambda$match$3(ClassMatcher.java:713)\r\n\tat org.eclipse.jetty.webapp.ClassMatcher.combine(ClassMatcher.java:751)\r\n\tat org.eclipse.jetty.webapp.ClassMatcher.match(ClassMatcher.java:713)\r\n\tat org.eclipse.jetty.webapp.WebAppContext.isServerClass(WebAppContext.java:785)\r\n\tat org.eclipse.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:558)\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\r\n\tat java.base/java.lang.Class.forName0(Native Method)\r\n\tat java.base/java.lang.Class.forName(Class.java:398)\r\n\tat org.eclipse.jetty.webapp.WebAppClassLoaderUrlStreamTest$URLHandlers.getBuiltInHandler(WebAppClassLoaderUrlStreamTest.java:63)\r\n\tat org.eclipse.jetty.webapp.WebAppClassLoaderUrlStreamTest$URLHandlers.createURLStreamHandler(WebAppClassLoaderUrlStreamTest.java:92)\r\n\tat java.base/java.net.URL.getURLStreamHandler(URL.java:1415)\r\n\tat java.base/java.net.URL.<init>(URL.java:449)\r\n\tat java.base/java.net.URL.fromURI(URL.java:699)\r\n\tat java.base/java.net.URI.toURL(URI.java:1116)\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.findResource(BuiltinClassLoader.java:456)\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.findResource(BuiltinClassLoader.java:227)\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.findResource(BuiltinClassLoader.java:274)\r\n\tat java.base/jdk.internal.loader.BootLoader.findResource(BootLoader.java:154)\r\n\tat java.base/java.lang.ClassLoader.getResource(ClassLoader.java:1397)\r\n\tat java.base/java.lang.ClassLoader.getResource(ClassLoader.java:1395)\r\n\tat org.eclipse.jetty.util.TypeUtil.getLocationOfClass(TypeUtil.java:723)\r\n\tat org.eclipse.jetty.webapp.ClassMatcher.lambda$match$3(ClassMatcher.java:713)\r\n\tat org.eclipse.jetty.webapp.ClassMatcher.combine(ClassMatcher.java:751)\r\n\tat org.eclipse.jetty.webapp.ClassMatcher.match(ClassMatcher.java:713)\r\n\tat org.eclipse.jetty.webapp.WebAppContext.isServerClass(WebAppContext.java:785)\r\n\tat org.eclipse.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:558)\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\r\n\tat java.base/java.lang.Class.forName0(Native Method)\r\n\tat java.base/java.lang.Class.forName(Class.java:398)\r\n\tat org.eclipse.jetty.webapp.WebAppClassLoaderUrlStreamTest$URLHandlers.getBuiltInHandler(WebAppClassLoaderUrlStreamTest.java:63)\r\n\tat org.eclipse.jetty.webapp.WebAppClassLoaderUrlStreamTest$URLHandlers.createURLStreamHandler(WebAppClassLoaderUrlStreamTest.java:92)\r\n\tat java.base/java.net.URL.getURLStreamHandler(URL.java:1415)\r\n\tat java.base/java.net.URL.<init>(URL.java:449)\r\n\tat java.base/java.net.URL.fromURI(URL.java:699)\r\n\tat java.base/java.net.URI.toURL(URI.java:1116)\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.findResource(BuiltinClassLoader.java:456)\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.findResource(BuiltinClassLoader.java:227)\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.findResource(BuiltinClassLoader.java:274)\r\n```", "changesInPackagesGIT": ["jetty-util/src/main/java/org/eclipse/jetty/util", "jetty-webapp/src/main/java/org/eclipse/jetty/webapp", "tests/test-webapps/test-felix-webapp/src/main/java/org/eclipse/jetty/demo"], "changesInPackagesSPOON": ["org.eclipse.jetty.util.TypeUtil.getSystemClassLoaderLocation(java.lang.Class)", "org.eclipse.jetty.util.TypeUtil.getClassLoaderLocation(java.lang.Class)", "org.eclipse.jetty.demo.InfoServlet", "org.eclipse.jetty.util.TypeUtil.getCodeSourceLocation(java.lang.Class)", "org.eclipse.jetty.util.ModuleLocation", "org.eclipse.jetty.util.IncludeExcludeSet.isIncludedAndNotExcluded(java.lang.Object)", "org.eclipse.jetty.util.TypeUtil.getLocationOfClass(java.lang.Class)", "org.eclipse.jetty.webapp.ClasspathPattern.combine(org.eclipse.jetty.util.IncludeExcludeSet,java.lang.String,org.eclipse.jetty.util.IncludeExcludeSet,java.util.function.Supplier)", "org.eclipse.jetty.util.TypeUtil.getClassLoaderLocation(java.lang.Class,java.lang.ClassLoader)", "org.eclipse.jetty.util.TypeUtil.getModuleLocation(java.lang.Class)", "org.eclipse.jetty.demo.AppListener", "org.eclipse.jetty.util.TypeUtil"], "ttf": 36.000277777777775, "numCommits": 4, "url": "https://github.com/eclipse/jetty.project/issues/3700"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 4, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "sbordet", "filteredCommits": ["a6b2bd86efdfc20fd8073716d9ab865b626156ea", "8c0f889abd79a006d5590c0b8036b9f72daa7543", "54888d25417ca80b6ad141345297773ae6bdf061", "550fb99e867258617288feaf315fb93b5d04f39a", "986dd77e609b42934766683cdd34bfd229bcd926"], "commits": {"986dd77e609b42934766683cdd34bfd229bcd926": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "5b58b5c8ce9dbbdc71c4adb870e201baf28f62bf": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "a6b2bd86efdfc20fd8073716d9ab865b626156ea": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "e8d3ffe72212c60716bb8578501d73870958e427": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "2f3a38aecf9def5724bea5aa3531ee7a5a94bf13": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "54888d25417ca80b6ad141345297773ae6bdf061": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "8c0f889abd79a006d5590c0b8036b9f72daa7543": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "550fb99e867258617288feaf315fb93b5d04f39a": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "5e3cecee6feb9313496c1652821aca642a51ce19": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "0119deeea13225ae1add5d405b04842559d7ad4d": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2019-05-27 17:28:12", "commitsDetails": [{"commitMessage": "Issue #3698 - Applying changes from PR feedback.\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["a6b2bd86efdfc20fd8073716d9ab865b626156ea"], "commitHash": "986dd77e609b42934766683cdd34bfd229bcd926", "commitSpoonAstDiffStats": [{"spoonFilePath": "ServletContextHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.ServletContextHandler.getServletContextHandler(javax.servlet.ServletContext)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "NativeWebSocketServletContainerInitializer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.NativeWebSocketServletContainerInitializer.configure(org.eclipse.jetty.servlet.ServletContextHandler,org.eclipse.jetty.websocket.server.NativeWebSocketServletContainerInitializer$Configurator)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.NativeWebSocketServletContainerInitializer.getDefaultFrom(javax.servlet.ServletContext)", "DEL": 1, "INS": 2, "UPD": 2, "MOV": 1, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.NativeWebSocketServletContainerInitializer.onStartup(java.util.Set,javax.servlet.ServletContext)", "DEL": 1, "INS": 2, "UPD": 1, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.NativeWebSocketServletContainerInitializer.initialize(org.eclipse.jetty.servlet.ServletContextHandler)", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.NativeWebSocketServletContainerInitializer.initialize(javax.servlet.ServletContext)", "DEL": 4, "INS": 0, "UPD": 3, "MOV": 6, "TOT": 13}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.NativeWebSocketServletContainerInitializer.configure(org.eclipse.jetty.servlet.ServletContextHandler)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "RestartContextTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.RestartContextTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "WebSocketServerContainerInitializer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer.initialize(org.eclipse.jetty.servlet.ServletContextHandler)", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer.configure(org.eclipse.jetty.servlet.ServletContextHandler,org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer$Configurator)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer.ContextDestroyListener.contextDestroyed(javax.servlet.ServletContextEvent)", "DEL": 1, "INS": 1, "UPD": 1, "MOV": 1, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer.initialize(javax.servlet.ServletContext)", "DEL": 14, "INS": 0, "UPD": 7, "MOV": 14, "TOT": 35}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer.configure(org.eclipse.jetty.servlet.ServletContextHandler)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer.configureContext(org.eclipse.jetty.servlet.ServletContextHandler)", "DEL": 3, "INS": 0, "UPD": 0, "MOV": 2, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer.configureContext(javax.servlet.ServletContext,org.eclipse.jetty.servlet.ServletContextHandler)", "DEL": 1, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer.onStartup(java.util.Set,javax.servlet.ServletContext)", "DEL": 1, "INS": 1, "UPD": 4, "MOV": 2, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}]}, {"spoonFilePath": "WebSocketUpgradeFilter.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter.configureContext(org.eclipse.jetty.servlet.ServletContextHandler)", "DEL": 1, "INS": 1, "UPD": 4, "MOV": 17, "TOT": 23}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter.configureContext(javax.servlet.ServletContext)", "DEL": 1, "INS": 0, "UPD": 4, "MOV": 0, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "986dd77e609b42934766683cdd34bfd229bcd926 tags/jetty-9.4.20.v20190813~89^2~3", "commitUser": "joakime", "authoredDateTime": "2019-06-06 16:44:35", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 212, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/RestartContextTest.java", "insertions": 212, "deletions": 0}, {"lines": 12, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletContextHandler.java", "insertions": 10, "deletions": 2}, {"lines": 82, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/WebSocketUpgradeFilter.java", "insertions": 45, "deletions": 37}, {"lines": 125, "filePath": "jetty-websocket/javax-websocket-server-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/server/deploy/WebSocketServerContainerInitializer.java", "insertions": 48, "deletions": 77}, {"lines": 70, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/NativeWebSocketServletContainerInitializer.java", "insertions": 35, "deletions": 35}], "commitDateTime": "2019-06-06 16:44:35", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "5b58b5c8ce9dbbdc71c4adb870e201baf28f62bf", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3698 - Changes based on review from @sbordet\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["54888d25417ca80b6ad141345297773ae6bdf061"], "commitHash": "a6b2bd86efdfc20fd8073716d9ab865b626156ea", "commitSpoonAstDiffStats": [{"spoonFilePath": "NativeWebSocketServletContainerInitializer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.NativeWebSocketServletContainerInitializer.configure(org.eclipse.jetty.servlet.ServletContextHandler,org.eclipse.jetty.websocket.server.NativeWebSocketServletContainerInitializer$Configurator)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ContainerInitializer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.listener.ContainerInitializer.asContextListener(javax.servlet.ServletContainerInitializer)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlet.listener.ContainerInitializer.SCIAsContextListener.getClasses()", "DEL": 0, "INS": 0, "UPD": 5, "MOV": 0, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.servlet.listener.ContainerInitializer.SCIAsContextListener.addClasses(java.lang.String[])", "DEL": 0, "INS": 0, "UPD": 5, "MOV": 0, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.servlet.listener.ContainerInitializer.SCIAsContextListener.contextInitialized(javax.servlet.ServletContextEvent)", "DEL": 0, "INS": 0, "UPD": 6, "MOV": 0, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.servlet.listener.ContainerInitializer.SCIAsContextListener", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.servlet.listener.ContainerInitializer.SCIAsContextListener.addClasses(java.lang.Class[])", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.servlet.listener.ContainerInitializer.SCIAsContextListener.setPostOnStartupConsumer(java.util.function.Consumer)", "DEL": 0, "INS": 0, "UPD": 5, "MOV": 0, "TOT": 5}]}, {"spoonFilePath": "WebSocketServerContainerInitializer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer.configure(org.eclipse.jetty.servlet.ServletContextHandler,org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer$Configurator)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "a6b2bd86efdfc20fd8073716d9ab865b626156ea tags/jetty-9.4.20.v20190813~89^2~4", "commitUser": "joakime", "authoredDateTime": "2019-06-03 15:52:41", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/NativeWebSocketServletContainerInitializer.java", "insertions": 1, "deletions": 1}, {"lines": 13, "filePath": "jetty-websocket/javax-websocket-server-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/server/deploy/WebSocketServerContainerInitializer.java", "insertions": 6, "deletions": 7}, {"lines": 37, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/listener/ContainerInitializer.java", "insertions": 18, "deletions": 19}], "commitDateTime": "2019-06-03 15:52:41", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "e8d3ffe72212c60716bb8578501d73870958e427", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "2f3a38aecf9def5724bea5aa3531ee7a5a94bf13", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3698 - Reworking WebSocket SCI's to be more flexible in embedded\n\n+ Added new SCIOnStartupListener that allows for manual wiring up\n  of ServletContainerInitializers (with no bytecode scanning)\n  in embedded jetty usages\n+ Introduced .initialized(context) and .configure(context) to both of\n  the websocket SCIs\n+ Moved ClientConnectTest to jetty-websocket-tests\n+ Moved WebSocketClientTest to jetty-websocket-tests\n+ Made moved tests not use BlockheadServer\n+ Made moved tests use new .configure(context, lambda) methods\n+ Also allowing javax.websocket.server SCI implementation to\n  add ContextDestroyListener during the execution of another\n  ServletContextListener.\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["ad3be199e8ba29433ce5a2d40cd279f1222c1281"], "commitHash": "54888d25417ca80b6ad141345297773ae6bdf061", "commitSpoonAstDiffStats": [], "nameRev": "54888d25417ca80b6ad141345297773ae6bdf061 tags/jetty-9.4.20.v20190813~89^2~5", "commitUser": "joakime", "authoredDateTime": "2019-05-28 16:03:50", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 328, "filePath": "jetty-websocket/websocket-client/src/test/java/org/eclipse/jetty/websocket/client/WebSocketClientTest.java", "insertions": 0, "deletions": 328}, {"lines": 98, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/NativeWebSocketServletContainerInitializer.java", "insertions": 78, "deletions": 20}, {"lines": 38, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/GetAuthHeaderEndpoint.java", "insertions": 38, "deletions": 0}, {"lines": 41, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/SimpleStatusServlet.java", "insertions": 41, "deletions": 0}, {"lines": 49, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/ParamsEndpoint.java", "insertions": 49, "deletions": 0}, {"lines": 16, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/BinaryStreamTest.java", "insertions": 8, "deletions": 8}, {"lines": 157, "filePath": "jetty-websocket/javax-websocket-server-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/server/deploy/WebSocketServerContainerInitializer.java", "insertions": 121, "deletions": 36}, {"lines": 333, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/WebSocketClientTest.java", "insertions": 333, "deletions": 0}, {"lines": 436, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/ClientConnectTest.java", "insertions": 436, "deletions": 0}, {"lines": 36, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/AnnoMaxMessageEndpoint.java", "insertions": 36, "deletions": 0}, {"lines": 15, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/browser/JsrBrowserDebugTool.java", "insertions": 3, "deletions": 12}, {"lines": 1, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/EchoSocket.java", "insertions": 1, "deletions": 0}, {"lines": 463, "filePath": "jetty-websocket/websocket-client/src/test/java/org/eclipse/jetty/websocket/client/ClientConnectTest.java", "insertions": 0, "deletions": 463}, {"lines": 68, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/InvalidUpgradeServlet.java", "insertions": 68, "deletions": 0}, {"lines": 36, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/ConnectMessageEndpoint.java", "insertions": 36, "deletions": 0}, {"lines": 185, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/listener/ContainerInitializer.java", "insertions": 185, "deletions": 0}], "commitDateTime": "2019-06-03 13:31:06", "spoonStatsSkippedReason": "tooManyChanges"}, {"commitMessage": "Issue #3698 - Updating javadoc on .initialize() method purpose/meaning\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["49ee5ac3c093e545a6f9c838f02f3f0bd15b3b2e"], "commitHash": "8c0f889abd79a006d5590c0b8036b9f72daa7543", "commitSpoonAstDiffStats": [{"spoonFilePath": "NativeWebSocketServletContainerInitializer.java", "spoonMethods": []}, {"spoonFilePath": "WebSocketServerContainerInitializer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer.initialize(org.eclipse.jetty.servlet.ServletContextHandler)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "WebSocketUpgradeFilter.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter.initialize(org.eclipse.jetty.servlet.ServletContextHandler)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter.configureContext(javax.servlet.ServletContext)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter.configureContext(org.eclipse.jetty.servlet.ServletContextHandler)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "8c0f889abd79a006d5590c0b8036b9f72daa7543 tags/jetty-9.4.20.v20190813~89^2", "commitUser": "joakime", "authoredDateTime": "2019-06-14 08:37:01", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 13, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/NativeWebSocketServletContainerInitializer.java", "insertions": 11, "deletions": 2}, {"lines": 17, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/WebSocketUpgradeFilter.java", "insertions": 11, "deletions": 6}, {"lines": 12, "filePath": "jetty-websocket/javax-websocket-server-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/server/deploy/WebSocketServerContainerInitializer.java", "insertions": 10, "deletions": 2}], "commitDateTime": "2019-06-14 08:37:01", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3698 - fixing javadoc\n", "commitParents": ["986dd77e609b42934766683cdd34bfd229bcd926"], "commitHash": "550fb99e867258617288feaf315fb93b5d04f39a", "commitSpoonAstDiffStats": [{"spoonFilePath": "NativeWebSocketServletContainerInitializer.java", "spoonMethods": []}], "nameRev": "550fb99e867258617288feaf315fb93b5d04f39a tags/jetty-9.4.20.v20190813~89^2~2", "commitUser": "joakime", "authoredDateTime": "2019-06-07 07:01:06", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 1, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/NativeWebSocketServletContainerInitializer.java", "insertions": 0, "deletions": 1}], "commitDateTime": "2019-06-07 07:01:06", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #3706 from eclipse/jetty-9.4.x-websocket-sci-from-embedded\n\nIssue #3698 - Reworking WebSocket SCI's to be more flexible in embedded", "commitParents": ["a847f54cd2f8434aa350227fc4ff4616edc5ade1", "8c0f889abd79a006d5590c0b8036b9f72daa7543"], "commitHash": "5e3cecee6feb9313496c1652821aca642a51ce19", "commitSpoonAstDiffStats": [], "nameRev": "5e3cecee6feb9313496c1652821aca642a51ce19 tags/jetty-9.4.20.v20190813~89", "commitUser": "joakime", "authoredDateTime": "2019-06-19 15:31:59", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 328, "filePath": "jetty-websocket/websocket-client/src/test/java/org/eclipse/jetty/websocket/client/WebSocketClientTest.java", "insertions": 0, "deletions": 328}, {"lines": 102, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/NativeWebSocketServletContainerInitializer.java", "insertions": 84, "deletions": 18}, {"lines": 38, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/GetAuthHeaderEndpoint.java", "insertions": 38, "deletions": 0}, {"lines": 41, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/SimpleStatusServlet.java", "insertions": 41, "deletions": 0}, {"lines": 436, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/ClientConnectTest.java", "insertions": 436, "deletions": 0}, {"lines": 36, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/ConnectMessageEndpoint.java", "insertions": 36, "deletions": 0}, {"lines": 16, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/BinaryStreamTest.java", "insertions": 8, "deletions": 8}, {"lines": 169, "filePath": "jetty-websocket/javax-websocket-server-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/server/deploy/WebSocketServerContainerInitializer.java", "insertions": 116, "deletions": 53}, {"lines": 333, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/WebSocketClientTest.java", "insertions": 333, "deletions": 0}, {"lines": 87, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/WebSocketUpgradeFilter.java", "insertions": 50, "deletions": 37}, {"lines": 10, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletContextHandler.java", "insertions": 10, "deletions": 0}, {"lines": 36, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/AnnoMaxMessageEndpoint.java", "insertions": 36, "deletions": 0}, {"lines": 15, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/browser/JsrBrowserDebugTool.java", "insertions": 3, "deletions": 12}, {"lines": 1, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/EchoSocket.java", "insertions": 1, "deletions": 0}, {"lines": 212, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/RestartContextTest.java", "insertions": 212, "deletions": 0}, {"lines": 463, "filePath": "jetty-websocket/websocket-client/src/test/java/org/eclipse/jetty/websocket/client/ClientConnectTest.java", "insertions": 0, "deletions": 463}, {"lines": 68, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/InvalidUpgradeServlet.java", "insertions": 68, "deletions": 0}, {"lines": 49, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/ParamsEndpoint.java", "insertions": 49, "deletions": 0}, {"lines": 184, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/listener/ContainerInitializer.java", "insertions": 184, "deletions": 0}], "commitDateTime": "2019-06-19 15:31:59", "spoonStatsSkippedReason": "tooManyChanges"}, {"commitMessage": "", "commitParents": [], "commitHash": "0119deeea13225ae1add5d405b04842559d7ad4d", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "Missing WebSocket ServerContainer after server restart", "spoonStatsSummary": {"spoonMethodsChanged": 27, "DEL": 30.0, "INS": 17.0, "UPD": 63.0, "MOV": 49.0, "TOT": 159.0, "spoonFilesChanged": 5}, "gitStatsSummary": {"lines": 824.0, "insertions": 579.0, "gitFilesChange": 5, "deletions": 245.0}, "closed": "2019-07-21 15:59:30", "statsSkippedReason": "", "body": "In Jetty 9.4.x, the following pseudo code works:\r\n\r\n```java\r\nServer server = new Server();\r\nServletContextHandler context = new ServletContextHandler(server, ...);\r\nWebSocketServerContainerInitializer.configureContext(context);\r\nserver.start();\r\nServerContainer ws1 = (ServerContainer)context.getAttribute(ServerContainer.class.getName()); // -> it's there.\r\nserver.stop();\r\nserver.start();\r\nServerContainer ws2 = (ServerContainer)context.getAttribute(ServerContainer.class.getName()); // -> it's there.\r\n```\r\n\r\nIn Jetty 10.0.x, after the server restart, `ws2` is missing.\r\n\r\nI'm not sure what is exactly the right semantic here, but if the context stays in the Jetty component tree, I'm leaning towards the behavior that application code should not re-initialize WebSocket (like it does not re-add Servlets, Filters, etc.).\r\n\r\n@gregw @joakime @lachlan-roberts thoughts?\r\n", "changesInPackagesGIT": ["jetty-servlet/src/main/java/org/eclipse/jetty/servlet", "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/listener", "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server", "jetty-websocket/javax-websocket-server-impl/src/main/java/org/eclipse/jetty/websocket/jsr356"], "changesInPackagesSPOON": ["org.eclipse.jetty.websocket.server.NativeWebSocketServletContainerInitializer.configure(org.eclipse.jetty.servlet.ServletContextHandler,org.eclipse.jetty.websocket.server.NativeWebSocketServletContainerInitializer$Configurator)", "org.eclipse.jetty.servlet.listener.ContainerInitializer.SCIAsContextListener.addClasses(java.lang.String[])", "org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer.configure(org.eclipse.jetty.servlet.ServletContextHandler,org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer$Configurator)", "org.eclipse.jetty.servlet.ServletContextHandler.getServletContextHandler(javax.servlet.ServletContext)", "org.eclipse.jetty.servlet.listener.ContainerInitializer.SCIAsContextListener.setPostOnStartupConsumer(java.util.function.Consumer)", "org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer.configureContext(org.eclipse.jetty.servlet.ServletContextHandler)", "org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter.configureContext(javax.servlet.ServletContext)", "org.eclipse.jetty.servlet.listener.ContainerInitializer.asContextListener(javax.servlet.ServletContainerInitializer)", "org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter.configureContext(org.eclipse.jetty.servlet.ServletContextHandler)", "org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer.ContextDestroyListener.contextDestroyed(javax.servlet.ServletContextEvent)", "org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer.initialize(javax.servlet.ServletContext)", "org.eclipse.jetty.websocket.server.NativeWebSocketServletContainerInitializer.configure(org.eclipse.jetty.servlet.ServletContextHandler)", "org.eclipse.jetty.servlet.listener.ContainerInitializer.SCIAsContextListener.contextInitialized(javax.servlet.ServletContextEvent)", "org.eclipse.jetty.websocket.server.NativeWebSocketServletContainerInitializer.initialize(javax.servlet.ServletContext)", "org.eclipse.jetty.servlet.listener.ContainerInitializer.SCIAsContextListener.getClasses()", "org.eclipse.jetty.websocket.server.NativeWebSocketServletContainerInitializer.initialize(org.eclipse.jetty.servlet.ServletContextHandler)", "org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer.configureContext(javax.servlet.ServletContext,org.eclipse.jetty.servlet.ServletContextHandler)", "org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer.onStartup(java.util.Set,javax.servlet.ServletContext)", "org.eclipse.jetty.servlet.listener.ContainerInitializer.SCIAsContextListener.addClasses(java.lang.Class[])", "org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer.initialize(org.eclipse.jetty.servlet.ServletContextHandler)", "org.eclipse.jetty.websocket.server.NativeWebSocketServletContainerInitializer.getDefaultFrom(javax.servlet.ServletContext)", "org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer.configure(org.eclipse.jetty.servlet.ServletContextHandler)", "org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter.initialize(org.eclipse.jetty.servlet.ServletContextHandler)", "org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter", "org.eclipse.jetty.servlet.listener.ContainerInitializer.SCIAsContextListener", "org.eclipse.jetty.websocket.server.NativeWebSocketServletContainerInitializer.onStartup(java.util.Set,javax.servlet.ServletContext)", "org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer"], "ttf": 54.000277777777775, "numCommits": 5, "url": "https://github.com/eclipse/jetty.project/issues/3698"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 3, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug", "Specification"], "user": "viretp", "filteredCommits": ["5d267963a3016d4810d10aa272f512247c0f3b60", "26169491c9c6bf5a00cca26a357c962691548ff8", "2de5456790e2717b8117a097b7bb4894837951db"], "commits": {"d259a89de405bf1a3d14aa7aca857ee47c24aa25": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "26169491c9c6bf5a00cca26a357c962691548ff8": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "2de5456790e2717b8117a097b7bb4894837951db": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "5d267963a3016d4810d10aa272f512247c0f3b60": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "7177648c6f3520c3597d3ce573b8d358adb9e660": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "e1a2a277b54e57a4e72f9a7288cf7294a5def396": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2019-05-15 15:24:51", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "d259a89de405bf1a3d14aa7aca857ee47c24aa25", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3655 simplifications of Cookie handling\n\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\n", "commitParents": ["2de5456790e2717b8117a097b7bb4894837951db"], "commitHash": "26169491c9c6bf5a00cca26a357c962691548ff8", "commitSpoonAstDiffStats": [], "nameRev": "26169491c9c6bf5a00cca26a357c962691548ff8 tags/jetty-9.4.19.v20190610~37", "commitUser": "gregw", "authoredDateTime": "2019-05-16 13:08:03", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 384, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Response.java", "insertions": 36, "deletions": 348}, {"lines": 332, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ResponseTest.java", "insertions": 26, "deletions": 306}, {"lines": 187, "filePath": "jetty-http/src/test/java/org/eclipse/jetty/http/HttpCookieTest.java", "insertions": 187, "deletions": 0}, {"lines": 8, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/QuotedCSVParser.java", "insertions": 8, "deletions": 0}, {"lines": 227, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/HttpCookie.java", "insertions": 227, "deletions": 0}], "commitDateTime": "2019-05-22 23:10:12", "spoonStatsSkippedReason": "tooManyChanges"}, {"commitMessage": "Issue #3655 - Fixing javadoc\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["5d267963a3016d4810d10aa272f512247c0f3b60"], "commitHash": "2de5456790e2717b8117a097b7bb4894837951db", "commitSpoonAstDiffStats": [{"spoonFilePath": "CookieCutter.java", "spoonMethods": []}], "nameRev": "2de5456790e2717b8117a097b7bb4894837951db tags/jetty-9.4.19.v20190610~38", "commitUser": "gregw", "authoredDateTime": "2019-05-15 15:23:58", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/CookieCutter.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2019-05-22 23:10:12", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3655 - Cookie generation now complies with RFC6265 spaces\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["fd542c2856c9edf9d826c1c7e5bae29934d5901a"], "commitHash": "5d267963a3016d4810d10aa272f512247c0f3b60", "commitSpoonAstDiffStats": [{"spoonFilePath": "ConstraintTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.security.ConstraintTest.testFormProgrammaticLoginLogout()", "DEL": 0, "INS": 0, "UPD": 10, "MOV": 0, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.security.ConstraintTest.testStrictFormDispatch()", "DEL": 0, "INS": 0, "UPD": 6, "MOV": 0, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.security.ConstraintTest.testFormPostRedirect()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.security.ConstraintTest.testFormDispatch()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.security.ConstraintTest.testFormRedirect()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.security.ConstraintTest.testFormNoCookies()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.security.ConstraintTest.testStrictFormRedirect()", "DEL": 0, "INS": 0, "UPD": 8, "MOV": 0, "TOT": 8}]}, {"spoonFilePath": "CookieCutter.java", "spoonMethods": []}, {"spoonFilePath": "ResponseTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ResponseTest.testReplaceHttpCookie()", "DEL": 1, "INS": 3, "UPD": 0, "MOV": 1, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.server.ResponseTest.testAddCookie_JavaxServletHttp()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ResponseTest.testCookiesWithReset()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.ResponseTest.testAddCookie()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ResponseTest.testSetRFC6265Cookie()", "DEL": 0, "INS": 0, "UPD": 12, "MOV": 12, "TOT": 24}]}, {"spoonFilePath": "CookieCutterTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.CookieCutterTest.testRFC6265_SidLangExample_Lenient()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.CookieCutterTest.testRFC_Single_Lenient_NoSpaces()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "Response.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Response.replaceCookie(org.eclipse.jetty.http.HttpCookie)", "DEL": 8, "INS": 16, "UPD": 0, "MOV": 3, "TOT": 27}, {"spoonMethodName": "org.eclipse.jetty.server.Response.newRFC6265SetCookie(java.lang.String,java.lang.String,java.lang.String,java.lang.String,long,boolean,boolean)", "DEL": 0, "INS": 0, "UPD": 6, "MOV": 0, "TOT": 6}]}], "nameRev": "5d267963a3016d4810d10aa272f512247c0f3b60 tags/jetty-9.4.19.v20190610~39", "commitUser": "gregw", "authoredDateTime": "2019-05-15 13:55:20", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 48, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/CookieCutterTest.java", "insertions": 41, "deletions": 7}, {"lines": 24, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/CookieCutter.java", "insertions": 15, "deletions": 9}, {"lines": 62, "filePath": "jetty-security/src/test/java/org/eclipse/jetty/security/ConstraintTest.java", "insertions": 31, "deletions": 31}, {"lines": 55, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ResponseTest.java", "insertions": 29, "deletions": 26}, {"lines": 43, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Response.java", "insertions": 26, "deletions": 17}], "commitDateTime": "2019-05-22 23:10:12", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "7177648c6f3520c3597d3ce573b8d358adb9e660", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "e1a2a277b54e57a4e72f9a7288cf7294a5def396", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "Spaces missing on Cookies generated via RFC6265", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 8.0, "INS": 16.0, "UPD": 6.0, "MOV": 3.0, "TOT": 33.0, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 688.0, "insertions": 313.0, "gitFilesChange": 4, "deletions": 375.0}, "closed": "2019-07-31 21:57:52", "statsSkippedReason": "", "body": "I have following issue: if I add a cookie with a Path to a HttpServletResponse using addCookie method, than the client receives following Set-Cookie value:\r\nc=d;Path=/esp/\r\n which does not conform to RFC 6265, as the space character is missing.\r\nCorrect would be: \"c=d; Path=/esp/\"\r\n\r\nAfter some debugging I found the error in the org.eclipse.jetty.server.Response.newRFC6265SetCookie method: for instance at line 380 of version 9.4.18.v20190429:\r\n`buf.append(\";Path=\").append(path);`\r\n\r\nThe method has the same problem for the other cookie attributes.\r\n\r\nIn RFC 6265 stands following:\r\n\r\n`set-cookie-header = \"Set-Cookie:\" SP set-cookie-string`\r\n`set-cookie-string = cookie-pair *( \";\" SP cookie-av )`\r\n\r\nSP stands for the space character.\r\n\r\nSo the correct code would be (note the space character after the semi-colon):\r\n`buf.append(\"; Path=\").append(path);`", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server", "jetty-http/src/main/java/org/eclipse/jetty/http"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.Response.replaceCookie(org.eclipse.jetty.http.HttpCookie)", "org.eclipse.jetty.server.Response.newRFC6265SetCookie(java.lang.String,java.lang.String,java.lang.String,java.lang.String,long,boolean,boolean)"], "ttf": 77.00027777777778, "numCommits": 3, "url": "https://github.com/eclipse/jetty.project/issues/3655"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 2, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["631f0cd9f61904af92d2e95321a34a1c31270668"], "commits": {"8484d910ee17442687d896cfa7c52ad229d09c22": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "a847f54cd2f8434aa350227fc4ff4616edc5ade1": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "631f0cd9f61904af92d2e95321a34a1c31270668": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "a237390ee4dbe46bc3fef722d45e745c08ab4dec": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2019-05-14 16:12:31", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "8484d910ee17442687d896cfa7c52ad229d09c22", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #3744 from eclipse/jetty-9.4.x-3648-websocket-client-ssl\n\nIssue #3648 - SSL based on WebSocket behavior (CLIENT vs SERVER)", "commitParents": ["cd38756ef5ace34610d3dcfd2fafc4a8eb87b660", "631f0cd9f61904af92d2e95321a34a1c31270668"], "commitHash": "a847f54cd2f8434aa350227fc4ff4616edc5ade1", "commitSpoonAstDiffStats": [{"spoonFilePath": "SimpleContainerScope.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.scopes.SimpleContainerScope", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 3, "TOT": 5}]}], "nameRev": "a847f54cd2f8434aa350227fc4ff4616edc5ade1 tags/jetty-9.4.20.v20190813~90", "commitUser": "joakime", "authoredDateTime": "2019-06-18 08:05:33", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 5, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/scopes/SimpleContainerScope.java", "insertions": 4, "deletions": 1}], "commitDateTime": "2019-06-18 08:05:33", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3648 - SSL based on WebSocket behavior (CLIENT vs SERVER)\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["0bc88ec28630336f5ba56641906286771cfb649d"], "commitHash": "631f0cd9f61904af92d2e95321a34a1c31270668", "commitSpoonAstDiffStats": [{"spoonFilePath": "SimpleContainerScope.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.scopes.SimpleContainerScope", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 3, "TOT": 5}]}], "nameRev": "631f0cd9f61904af92d2e95321a34a1c31270668 tags/jetty-9.4.20.v20190813~90^2", "commitUser": "joakime", "authoredDateTime": "2019-06-06 11:39:55", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 5, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/scopes/SimpleContainerScope.java", "insertions": 4, "deletions": 1}], "commitDateTime": "2019-06-06 11:39:55", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "a237390ee4dbe46bc3fef722d45e745c08ab4dec", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "javax.websocket client container incorrectly creates Server SslContextFactory", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 1.0, "INS": 1.0, "UPD": 0.0, "MOV": 3.0, "TOT": 5.0, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 5.0, "insertions": 4.0, "gitFilesChange": 1, "deletions": 1.0}, "closed": "2019-07-31 22:48:00", "statsSkippedReason": "", "body": "See :\r\n\r\nhttps://github.com/eclipse/jetty.project/blob/8e4756b89c3972f6501b1f93ef3f2d369517d1f8/jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/scopes/SimpleContainerScope.java#L85-L91\r\n\r\nIt should be aware of the policy and create an appropriate SslContextFactory Client or Server.", "changesInPackagesGIT": ["jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common"], "changesInPackagesSPOON": ["org.eclipse.jetty.websocket.common.scopes.SimpleContainerScope"], "ttf": 78.00027777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/3648"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "naddame", "filteredCommits": ["7d52a6957bea3a88c00f038d4c29d8bbe2bd7b18"], "commits": {"4188f92ca01a55c80c66aae22d9a80322c8e5e89": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "7d52a6957bea3a88c00f038d4c29d8bbe2bd7b18": {"commitUser": "joakime", "commitGHEventType": "closed"}}, "created": "2019-05-07 14:37:10", "commitsDetails": [{"commitMessage": "Fixes #3633 - endpointIdentificationAlgorithm enabled by default jetty-ssl-context.xml.\n\nUpdated *.xml and *.mod to reflect the right default (null), rather than \"HTTPS\".\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["e45c176649aedd14ba0ce5ca507623af7472c0bf"], "commitHash": "7d52a6957bea3a88c00f038d4c29d8bbe2bd7b18", "commitSpoonAstDiffStats": [], "nameRev": "7d52a6957bea3a88c00f038d4c29d8bbe2bd7b18 tags/jetty-9.4.19.v20190610~69^2", "commitUser": "joakime", "authoredDateTime": "2019-05-07 16:46:34", "commitGHEventType": "closed", "commitGitStats": [{"lines": 2, "filePath": "jetty-server/src/main/config/modules/ssl.mod", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-server/src/main/config/etc/jetty-ssl-context.xml", "insertions": 1, "deletions": 1}], "commitDateTime": "2019-05-07 16:46:34", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #3634 from eclipse/jetty-9.4.x-3633-wrong_endPointIdentificationAlgorithm_in_module_files\n\nFixes #3633 - endpointIdentificationAlgorithm enabled by default jetty-ssl-context.xml.", "commitParents": ["7e7920a96927785db1bace34b08b3b5377481e62", "7d52a6957bea3a88c00f038d4c29d8bbe2bd7b18"], "commitHash": "4188f92ca01a55c80c66aae22d9a80322c8e5e89", "commitSpoonAstDiffStats": [], "nameRev": "4188f92ca01a55c80c66aae22d9a80322c8e5e89 tags/jetty-9.4.19.v20190610~69", "commitUser": "joakime", "authoredDateTime": "2019-05-07 11:46:56", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-server/src/main/config/modules/ssl.mod", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-server/src/main/config/etc/jetty-ssl-context.xml", "insertions": 1, "deletions": 1}], "commitDateTime": "2019-05-07 11:46:56", "spoonStatsSkippedReason": ""}], "title": "endpointIdentificationAlgorithm enabled by default jetty-ssl-context.xml", "spoonStatsSummary": {}, "gitStatsSummary": {"lines": 2, "insertions": 1, "gitFilesChange": 1, "deletions": 1}, "closed": "2019-05-07 18:47:00", "statsSkippedReason": "", "body": "Hi,\r\nIn relation to issues : https://github.com/eclipse/jetty.project/issues/3454\r\nWhen i downloaded jetty 9.4.18, I don't understand why in jetty-ssl-context.xml we have:\r\n`\r\n<Set name=\"EndpointIdentificationAlgorithm\"><Property name=\"jetty.sslContext.endpointIdentificationAlgorithm\" default=\"HTTPS\"/></Set>\r\n`\r\n\r\nWhy the param \"EndpointIdentificationAlgorithm\" is specified and why default value is HTTPS even if SslContextFactory.Server force it to be null?\r\n\r\nThanks", "changesInPackagesGIT": ["jetty-server/src/main/config/modules/ssl.mod"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/3633"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 5, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "mkrogh", "filteredCommits": ["cec50b3d2cea7bdf6b2f00d45c8554139aebbf87", "9f3b0223ab7e3159c4794e102f6b5e06dfc8710d", "09a60cd4f3e6a5b53ce59c35b188998f540ca584"], "commits": {"9f3b0223ab7e3159c4794e102f6b5e06dfc8710d": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "05072b34dce43064e87ad0d59065f14666c1f34e": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "920e30b05735305a00ad602546fb963ddcb4958a": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "09a60cd4f3e6a5b53ce59c35b188998f540ca584": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "7977e387669c3957cc9e81e742ed31248d8d8d4c": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "ca6a649d2671510628a245da2112289d69601627": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "60e821e18634b869472750ec4a30fb0e265751a7": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "cec50b3d2cea7bdf6b2f00d45c8554139aebbf87": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2019-05-07 13:45:58", "commitsDetails": [{"commitMessage": "Issue #3630 Forwarded-Port\n\nreformatted code\nAvoid updating handles unless configuration is changed.\n\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\n", "commitParents": ["05072b34dce43064e87ad0d59065f14666c1f34e"], "commitHash": "9f3b0223ab7e3159c4794e102f6b5e06dfc8710d", "commitSpoonAstDiffStats": [{"spoonFilePath": "ForwardedRequestCustomizer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizer.setForwardedHostHeader(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizer.setForwardedHttpsHeader(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizer.setForwardedPortHeader(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizer.setForwardedForHeader(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizer.setForcedHost(java.lang.String)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizer.setForwardedServerHeader(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizer.setForwardedProtoHeader(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizer.setForwardedSslSessionIdHeader(java.lang.String)", "DEL": 1, "INS": 1, "UPD": 2, "MOV": 3, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizer.setForwardedCipherSuiteHeader(java.lang.String)", "DEL": 1, "INS": 1, "UPD": 2, "MOV": 3, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.server.ForwardedRequestCustomizer.setForwardedHeader(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 3}]}], "nameRev": "9f3b0223ab7e3159c4794e102f6b5e06dfc8710d tags/jetty-9.4.19.v20190610~59", "commitUser": "gregw", "authoredDateTime": "2019-05-08 14:00:58", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 216, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/ForwardedRequestCustomizer.java", "insertions": 117, "deletions": 99}], "commitDateTime": "2019-05-14 17:08:01", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3630 Forwarded-Port\n\nAdded support for the X-Forwarded-Port header.\nReimplemented header scanning using more efficient Trie and MethodHandles\n\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\n", "commitParents": ["3f4d1960708977732f4791359e744ccf2419e2e7"], "commitHash": "05072b34dce43064e87ad0d59065f14666c1f34e", "commitSpoonAstDiffStats": [], "nameRev": "05072b34dce43064e87ad0d59065f14666c1f34e tags/jetty-9.4.19.v20190610~60", "commitUser": "gregw", "authoredDateTime": "2019-05-08 13:28:16", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 274, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/ForwardedRequestCustomizer.java", "insertions": 200, "deletions": 74}, {"lines": 13, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/HostPortTest.java", "insertions": 7, "deletions": 6}, {"lines": 1, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/HttpHeader.java", "insertions": 1, "deletions": 0}, {"lines": 1, "filePath": "jetty-server/src/main/config/modules/http-forwarded.mod", "insertions": 1, "deletions": 0}, {"lines": 1, "filePath": "jetty-server/src/main/config/etc/jetty-http-forwarded.xml", "insertions": 1, "deletions": 0}, {"lines": 13, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/HostPortHttpField.java", "insertions": 13, "deletions": 0}, {"lines": 27, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ForwardedRequestCustomizerTest.java", "insertions": 22, "deletions": 5}, {"lines": 30, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/HostPort.java", "insertions": 24, "deletions": 6}], "commitDateTime": "2019-05-14 17:08:01", "spoonStatsSkippedReason": "tooManyChanges"}, {"commitMessage": "", "commitParents": [], "commitHash": "920e30b05735305a00ad602546fb963ddcb4958a", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3630 - more HostPort tests\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["cec50b3d2cea7bdf6b2f00d45c8554139aebbf87"], "commitHash": "09a60cd4f3e6a5b53ce59c35b188998f540ca584", "commitSpoonAstDiffStats": [{"spoonFilePath": "HostPortTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.HostPortTest.validAuthorityProvider()", "DEL": 0, "INS": 18, "UPD": 0, "MOV": 0, "TOT": 18}]}], "nameRev": "09a60cd4f3e6a5b53ce59c35b188998f540ca584 tags/jetty-9.4.19.v20190610~57", "commitUser": "gregw", "authoredDateTime": "2019-05-08 15:53:23", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 23, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/HostPortTest.java", "insertions": 22, "deletions": 1}], "commitDateTime": "2019-05-14 17:08:01", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "7977e387669c3957cc9e81e742ed31248d8d8d4c", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "ca6a649d2671510628a245da2112289d69601627", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "60e821e18634b869472750ec4a30fb0e265751a7", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3630 Optimized ForwardedRequestCustomizer\n\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\n", "commitParents": ["9f3b0223ab7e3159c4794e102f6b5e06dfc8710d"], "commitHash": "cec50b3d2cea7bdf6b2f00d45c8554139aebbf87", "commitSpoonAstDiffStats": [], "nameRev": "cec50b3d2cea7bdf6b2f00d45c8554139aebbf87 tags/jetty-9.4.19.v20190610~58", "commitUser": "gregw", "authoredDateTime": "2019-05-08 21:07:22", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 17, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/HostPortHttpField.java", "insertions": 8, "deletions": 9}, {"lines": 249, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/ForwardedRequestCustomizer.java", "insertions": 106, "deletions": 143}, {"lines": 288, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/QuotedCSVParser.java", "insertions": 288, "deletions": 0}, {"lines": 99, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ForwardedRequestCustomizerTest.java", "insertions": 98, "deletions": 1}, {"lines": 264, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/QuotedCSV.java", "insertions": 7, "deletions": 257}], "commitDateTime": "2019-05-14 17:08:01", "spoonStatsSkippedReason": "tooManyChanges"}], "title": "X-Forwarded-For missing last hextet for ipv6", "spoonStatsSummary": {"spoonMethodsChanged": 10, "DEL": 3.0, "INS": 9.0, "UPD": 4.0, "MOV": 20.0, "TOT": 36.0, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 1034.0, "insertions": 526.0, "gitFilesChange": 4, "deletions": 508.0}, "closed": "2019-05-22 20:36:45", "statsSkippedReason": "", "body": "The code from https://github.com/eclipse/jetty.project/issues/3302 has broken ipv6 support for `X-Forwarded-For` headers.\r\n\r\nThis means that `request.getRemoteAddr()` no longer returns the full ipv6 address.\r\nE.g. nginx sets the header  `X-Forwarded-For: 2001:878:302:6:5dcb:8e1:f1c9:c71c` then jetty will set the `request.getRemoteAddr()` to `2001:878:302:6:5dcb:8e1:f1c9` which is not a valid ipv6 address.\r\n\r\nThe problem stems from the [HostPort change](https://github.com/eclipse/jetty.project/blame/051edc94d737456a59100d7814f4b13020d7fff7/jetty-server/src/main/java/org/eclipse/jetty/server/ForwardedRequestCustomizer.java#L449), but it seems like a [previous commit](https://github.com/eclipse/jetty.project/blame/edf74a655473e5dda82c8e67e5c9ffea6ec0d025/jetty-server/src/main/java/org/eclipse/jetty/server/ForwardedRequestCustomizer.java) tried to handle it. It might be a an idea to check if it is a ipv6 address, instead of just checking if a `:` is present (guess that was why the code ended up looking like it does now).\r\n\r\nConsider if `X-Forwarded-Port` is the proper way to send on the port, rather than `X-Forwarded-For`.\r\n\r\nPOC test app\r\n```\r\nimport java.io.*;\r\nimport javax.servlet.*;\r\nimport javax.servlet.http.*;\r\n\r\npublic class TestServlet extends HttpServlet {\r\n   public void doGet(HttpServletRequest request, HttpServletResponse response)\r\n      throws ServletException, IOException {\r\n      response.setContentType(\"text/html\");\r\n      PrintWriter out = response.getWriter();\r\n      out.println(\"<h1>Request IP: \" + request.getRemoteAddr() + \"</h1>\");\r\n   }\r\n   public void init() throws ServletException {}\r\n   public void destroy() {}\r\n}\r\n```\r\n\r\n```\r\n        location / {\r\n                proxy_pass http://127.0.0.1:8080;\r\n                proxy_set_header Host $host;\r\n                proxy_set_header X-Forwarded-For $remote_addr;\r\n                proxy_set_header      X-Forwarded-Proto $scheme;\r\n                proxy_set_header      X-Forwarded-Port  $server_port;\r\n        }\r\n```\r\n", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server", "jetty-http/src/main/java/org/eclipse/jetty/http"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.ForwardedRequestCustomizer.setForwardedHostHeader(java.lang.String)", "org.eclipse.jetty.server.ForwardedRequestCustomizer.setForwardedSslSessionIdHeader(java.lang.String)", "org.eclipse.jetty.server.ForwardedRequestCustomizer.setForwardedForHeader(java.lang.String)", "org.eclipse.jetty.server.ForwardedRequestCustomizer.setForcedHost(java.lang.String)", "org.eclipse.jetty.server.ForwardedRequestCustomizer.setForwardedServerHeader(java.lang.String)", "org.eclipse.jetty.server.ForwardedRequestCustomizer.setForwardedProtoHeader(java.lang.String)", "org.eclipse.jetty.server.ForwardedRequestCustomizer.setForwardedHttpsHeader(java.lang.String)", "org.eclipse.jetty.server.ForwardedRequestCustomizer.setForwardedPortHeader(java.lang.String)", "org.eclipse.jetty.server.ForwardedRequestCustomizer.setForwardedCipherSuiteHeader(java.lang.String)", "org.eclipse.jetty.server.ForwardedRequestCustomizer.setForwardedHeader(java.lang.String)"], "ttf": 15.000277777777777, "numCommits": 2, "url": "https://github.com/eclipse/jetty.project/issues/3630"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 2, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug", "Sponsored"], "user": "gregw", "filteredCommits": ["762767c62c186ce0ff179dbea69901009eef456e"], "commits": {"e64e3309d3e6c6e7f3b2f4257479c3ecca4cd7d4": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "264ceb143d7f1cb118fa325c58100933421b66f9": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "762767c62c186ce0ff179dbea69901009eef456e": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "873d1c6d7ddcd773c73ce04416fc4d8dd54c8583": {"commitUser": "sbordet", "commitGHEventType": "closed"}}, "created": "2019-04-27 06:30:50", "commitsDetails": [{"commitMessage": "Fixes #3601 - HTTP2 stall on reset streams.\n\nAfter review, updated the logic to always fail the transport.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["753024af54e90d790de6deb9e357a16feed55ce5"], "commitHash": "762767c62c186ce0ff179dbea69901009eef456e", "commitSpoonAstDiffStats": [{"spoonFilePath": "AsyncServletTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.client.AsyncServletTest.testStartAsyncThenClientSessionIdleTimeout().3.onHeaders(org.eclipse.jetty.http2.api.Stream,org.eclipse.jetty.http2.frames.HeadersFrame)", "DEL": 0, "INS": 1, "UPD": 2, "MOV": 4, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.http2.client.AsyncServletTest.testStartAsyncThenClientSessionIdleTimeout()", "DEL": 0, "INS": 2, "UPD": 2, "MOV": 1, "TOT": 5}]}, {"spoonFilePath": "AsyncIOServletTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.client.AsyncIOServletTest.testAsyncReadEarlyEOF(org.eclipse.jetty.http.client.Transport)", "DEL": 5, "INS": 5, "UPD": 4, "MOV": 7, "TOT": 21}, {"spoonMethodName": "org.eclipse.jetty.http.client.AsyncIOServletTest.testAsyncReadEarlyEOF(org.eclipse.jetty.http.client.Transport).20.service(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse).1.onAllDataRead()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpTransportOverHTTP2.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.server.HttpTransportOverHTTP2.abort(java.lang.Throwable)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.server.HttpTransportOverHTTP2.TransportCallback.getInvocationType()", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.server.HttpTransportOverHTTP2.TransportCallback.failed(java.lang.Throwable)", "DEL": 4, "INS": 0, "UPD": 0, "MOV": 4, "TOT": 8}]}], "nameRev": "762767c62c186ce0ff179dbea69901009eef456e tags/jetty-9.4.20.v20190813~19^2~1", "commitUser": "sbordet", "authoredDateTime": "2019-08-01 15:52:47", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "tests/test-http-client-transport/src/test/resources/jetty-logging.properties", "insertions": 1, "deletions": 1}, {"lines": 44, "filePath": "jetty-http2/http2-server/src/main/java/org/eclipse/jetty/http2/server/HttpTransportOverHTTP2.java", "insertions": 19, "deletions": 25}, {"lines": 19, "filePath": "jetty-http2/http2-client/src/test/java/org/eclipse/jetty/http2/client/AsyncServletTest.java", "insertions": 11, "deletions": 8}, {"lines": 38, "filePath": "tests/test-http-client-transport/src/test/java/org/eclipse/jetty/http/client/AsyncIOServletTest.java", "insertions": 26, "deletions": 12}], "commitDateTime": "2019-08-01 15:52:47", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #3601 - HTTP2 stall on reset streams.\n\nThe client reset wakes up threads blocked in\nwrites, but these may again attempt to write,\ntherefore blocking again.\n\nNow we detect that the stream is not writable\nand mark the transport as failed, so that\nwrites fail immediately without blocking.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["1aaadea13db0075a04a65d724bcfd8277d8a0949"], "commitHash": "873d1c6d7ddcd773c73ce04416fc4d8dd54c8583", "commitSpoonAstDiffStats": [{"spoonFilePath": "StreamResetTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.client.StreamResetTest.testResetAfterTCPCongestedWrite()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.client.StreamResetTest.testResetSecondRequestAfterTCPCongestedWriteBeforeWrite()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.client.StreamResetTest.waitUntilTCPCongested(org.eclipse.jetty.io.WriteFlusher)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpTransportOverHTTP2.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.server.HttpTransportOverHTTP2.TransportCallback.failed(java.lang.Throwable)", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 1, "TOT": 4}]}, {"spoonFilePath": "AbstractEndPoint.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.AbstractEndPoint.getWriteFlusher()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "SslConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.getWriteFlusher()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "873d1c6d7ddcd773c73ce04416fc4d8dd54c8583 tags/jetty-9.4.20.v20190813~19^2~3", "commitUser": "sbordet", "authoredDateTime": "2019-07-25 22:21:13", "commitGHEventType": "closed", "commitGitStats": [{"lines": 8, "filePath": "jetty-http2/http2-server/src/main/java/org/eclipse/jetty/http2/server/HttpTransportOverHTTP2.java", "insertions": 5, "deletions": 3}, {"lines": 226, "filePath": "jetty-http2/http2-client/src/test/java/org/eclipse/jetty/http2/client/StreamResetTest.java", "insertions": 226, "deletions": 0}, {"lines": 2, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ssl/SslConnection.java", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/AbstractEndPoint.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2019-07-25 22:21:13", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #3601 - HTTP2 stall on reset streams.\n\nAfter review, introduced WriteFlusher.isPending() and now using that\nin the test case to test for TCP congestion.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["762767c62c186ce0ff179dbea69901009eef456e"], "commitHash": "264ceb143d7f1cb118fa325c58100933421b66f9", "commitSpoonAstDiffStats": [{"spoonFilePath": "StreamResetTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.client.StreamResetTest.testResetSecondRequestAfterTCPCongestedWriteBeforeWrite()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.client.StreamResetTest.waitUntilTCPCongested(org.eclipse.jetty.io.WriteFlusher)", "DEL": 2, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.http2.client.StreamResetTest.testResetSecondRequestAfterTCPCongestedWriteBeforeWrite().23.service(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "WriteFlusher.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.WriteFlusher.write(org.eclipse.jetty.util.Callback,java.nio.ByteBuffer[])", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.io.WriteFlusher.isPending()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.WriteFlusher.isIdle()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.io.WriteFlusher.isFailed()", "DEL": 1, "INS": 1, "UPD": 3, "MOV": 2, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.io.WriteFlusher.isState(org.eclipse.jetty.io.WriteFlusher$StateType)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "264ceb143d7f1cb118fa325c58100933421b66f9 tags/jetty-9.4.20.v20190813~19^2", "commitUser": "sbordet", "authoredDateTime": "2019-08-07 11:48:31", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 16, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/WriteFlusher.java", "insertions": 13, "deletions": 3}, {"lines": 10, "filePath": "jetty-http2/http2-client/src/test/java/org/eclipse/jetty/http2/client/StreamResetTest.java", "insertions": 3, "deletions": 7}], "commitDateTime": "2019-08-07 11:48:31", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #3908 from eclipse/jetty-9.4.x-3601-http2_stall_on_reset_stream\n\nFixes #3601 - HTTP2 stall on reset streams.", "commitParents": ["fa0e7850be1d215469f007acd6e9af519b7e667a", "264ceb143d7f1cb118fa325c58100933421b66f9"], "commitHash": "e64e3309d3e6c6e7f3b2f4257479c3ecca4cd7d4", "commitSpoonAstDiffStats": [{"spoonFilePath": "SslConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.getWriteFlusher()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AsyncServletTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.client.AsyncServletTest.testStartAsyncThenClientSessionIdleTimeout().3.onHeaders(org.eclipse.jetty.http2.api.Stream,org.eclipse.jetty.http2.frames.HeadersFrame)", "DEL": 0, "INS": 1, "UPD": 2, "MOV": 4, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.http2.client.AsyncServletTest.testStartAsyncThenClientSessionIdleTimeout()", "DEL": 0, "INS": 2, "UPD": 2, "MOV": 1, "TOT": 5}]}, {"spoonFilePath": "HttpTransportOverHTTP2.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.server.HttpTransportOverHTTP2.abort(java.lang.Throwable)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.server.HttpTransportOverHTTP2.TransportCallback.getInvocationType()", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.server.HttpTransportOverHTTP2.TransportCallback.failed(java.lang.Throwable)", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 4, "TOT": 6}]}, {"spoonFilePath": "AbstractEndPoint.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.AbstractEndPoint.getWriteFlusher()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "StreamResetTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.client.StreamResetTest.testResetAfterTCPCongestedWrite()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.client.StreamResetTest.testResetSecondRequestAfterTCPCongestedWriteBeforeWrite()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.client.StreamResetTest.waitUntilTCPCongested(org.eclipse.jetty.io.WriteFlusher)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AsyncIOServletTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.client.AsyncIOServletTest.testAsyncReadEarlyEOF(org.eclipse.jetty.http.client.Transport)", "DEL": 5, "INS": 5, "UPD": 4, "MOV": 7, "TOT": 21}, {"spoonMethodName": "org.eclipse.jetty.http.client.AsyncIOServletTest.testAsyncReadEarlyEOF(org.eclipse.jetty.http.client.Transport).20.service(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse).1.onAllDataRead()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "WriteFlusher.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.WriteFlusher.write(org.eclipse.jetty.util.Callback,java.nio.ByteBuffer[])", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.io.WriteFlusher.isPending()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.WriteFlusher.isIdle()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.io.WriteFlusher.isFailed()", "DEL": 1, "INS": 1, "UPD": 3, "MOV": 2, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.io.WriteFlusher.isState(org.eclipse.jetty.io.WriteFlusher$StateType)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "e64e3309d3e6c6e7f3b2f4257479c3ecca4cd7d4 tags/jetty-9.4.20.v20190813~19", "commitUser": "sbordet", "authoredDateTime": "2019-08-07 14:49:55", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "tests/test-http-client-transport/src/test/resources/jetty-logging.properties", "insertions": 1, "deletions": 1}, {"lines": 42, "filePath": "jetty-http2/http2-server/src/main/java/org/eclipse/jetty/http2/server/HttpTransportOverHTTP2.java", "insertions": 19, "deletions": 23}, {"lines": 2, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/AbstractEndPoint.java", "insertions": 1, "deletions": 1}, {"lines": 38, "filePath": "tests/test-http-client-transport/src/test/java/org/eclipse/jetty/http/client/AsyncIOServletTest.java", "insertions": 26, "deletions": 12}, {"lines": 16, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/WriteFlusher.java", "insertions": 13, "deletions": 3}, {"lines": 19, "filePath": "jetty-http2/http2-client/src/test/java/org/eclipse/jetty/http2/client/AsyncServletTest.java", "insertions": 11, "deletions": 8}, {"lines": 222, "filePath": "jetty-http2/http2-client/src/test/java/org/eclipse/jetty/http2/client/StreamResetTest.java", "insertions": 222, "deletions": 0}, {"lines": 2, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ssl/SslConnection.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2019-08-07 14:49:55", "spoonStatsSkippedReason": ""}], "title": "HTTP2 stall on reset streams", "spoonStatsSummary": {"spoonMethodsChanged": 3, "DEL": 4, "INS": 0, "UPD": 1, "MOV": 5, "TOT": 10, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 44, "insertions": 19, "gitFilesChange": 1, "deletions": 25}, "closed": "2019-08-07 11:50:01", "statsSkippedReason": "", "body": "We have a report that a client that is not consuming a servers HTTP2 stream content (until such time as the server TCP/IP flow control blocking), but then sends a reset frame, can result in a  stall.  The servers HTTP2Stream objects are stuck waiting in the HTTP2Flusher queue, but with remoteReset field as true.  This indicates that the reset has been received, but has not been sufficient to free those streams from the HTTP2Flusher - presumably due to TCP/IP flow control. ", "changesInPackagesGIT": ["jetty-http2/http2-server/src/main/java/org/eclipse/jetty/http2/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.http2.server.HttpTransportOverHTTP2.TransportCallback.failed(java.lang.Throwable)", "org.eclipse.jetty.http2.server.HttpTransportOverHTTP2.TransportCallback.getInvocationType()", "org.eclipse.jetty.http2.server.HttpTransportOverHTTP2.abort(java.lang.Throwable)"], "ttf": 102.00027777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/3601"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 11, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug", "Security"], "user": "joakime", "filteredCommits": ["eebad0655af99478fe268f51be811a47f2f211fe", "d983890d1769744e7da865de7ff34065fe491a28", "9f506e4123b519adccb7df3599441f55daaff31e", "6d847d4a73b34b8c19f43dcf221eefe6859b7d55", "5ef8a8abfa63b26a6f978200519730f964ebee0b", "99f3926d0546032814077cf0d0a684ed80e7bb08"], "commits": {"7d9b52d7f5ff718c3d69a589c94e6b65be1a5f82": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "99f3926d0546032814077cf0d0a684ed80e7bb08": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "0665c3dd7aca1718dd1ccf8da4c1b06de0e505e3": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "9f506e4123b519adccb7df3599441f55daaff31e": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "c6734a0e658d40a5d5f1110b102e4ea88d3abd30": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "739cfe549ce02c993447ca89547824bb9e5f35b9": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "d983890d1769744e7da865de7ff34065fe491a28": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "6d847d4a73b34b8c19f43dcf221eefe6859b7d55": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "b4321bba37f02aabebe5dd2eaae9d9607ac6bf3c": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "7746c83ad6c4f71ceb60e6ed29d3411a09d0e9db": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "d8e40fcf54a0691b8885e2f851ec32aac5fe43f9": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "b0f72a87d5b35ff0a814143fb1725f7c6fc4e0d7": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "eebad0655af99478fe268f51be811a47f2f211fe": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "a15534d72c0c8d84cb821c767343a91584a4fecb": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "086eb2c170e5c9c6432cca9822a0cc00b07bfa70": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "04c994712c0b29824633598cfe0bf709f3b96f09": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "5ef8a8abfa63b26a6f978200519730f964ebee0b": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2019-04-15 22:57:24", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "7d9b52d7f5ff718c3d69a589c94e6b65be1a5f82", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3555 - DefaultHandler output is now HTML5 compliant.\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["9f506e4123b519adccb7df3599441f55daaff31e"], "commitHash": "6d847d4a73b34b8c19f43dcf221eefe6859b7d55", "commitSpoonAstDiffStats": [{"spoonFilePath": "DefaultHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.DefaultHandler.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 1, "INS": 9, "UPD": 36, "MOV": 6, "TOT": 52}]}], "nameRev": "6d847d4a73b34b8c19f43dcf221eefe6859b7d55 tags/jetty-9.2.28.v20190418~10", "commitUser": "joakime", "authoredDateTime": "2019-04-16 12:02:15", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 67, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/DefaultHandler.java", "insertions": 38, "deletions": 29}], "commitDateTime": "2019-04-16 12:02:15", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "0665c3dd7aca1718dd1ccf8da4c1b06de0e505e3", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3555 - Do not reveal base resource in error response\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["04c994712c0b29824633598cfe0bf709f3b96f09"], "commitHash": "9f506e4123b519adccb7df3599441f55daaff31e", "commitSpoonAstDiffStats": [{"spoonFilePath": "DefaultHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.DefaultHandler.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "9f506e4123b519adccb7df3599441f55daaff31e tags/jetty-9.2.28.v20190418~11", "commitUser": "joakime", "authoredDateTime": "2019-04-15 18:24:35", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 1, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/DefaultHandler.java", "insertions": 0, "deletions": 1}], "commitDateTime": "2019-04-15 18:24:35", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "c6734a0e658d40a5d5f1110b102e4ea88d3abd30", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "739cfe549ce02c993447ca89547824bb9e5f35b9", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3555 - DefaultHandler output cleaned up.\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["6d847d4a73b34b8c19f43dcf221eefe6859b7d55"], "commitHash": "d983890d1769744e7da865de7ff34065fe491a28", "commitSpoonAstDiffStats": [{"spoonFilePath": "DefaultHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.DefaultHandler.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 4, "INS": 12, "UPD": 18, "MOV": 37, "TOT": 71}]}], "nameRev": "d983890d1769744e7da865de7ff34065fe491a28 tags/jetty-9.2.28.v20190418~9", "commitUser": "joakime", "authoredDateTime": "2019-04-16 13:28:57", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 74, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/DefaultHandler.java", "insertions": 49, "deletions": 25}], "commitDateTime": "2019-04-16 13:28:57", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3555 - Applying changes from review\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["d983890d1769744e7da865de7ff34065fe491a28"], "commitHash": "99f3926d0546032814077cf0d0a684ed80e7bb08", "commitSpoonAstDiffStats": [{"spoonFilePath": "DefaultHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.DefaultHandler.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 4, "MOV": 0, "TOT": 4}]}], "nameRev": "99f3926d0546032814077cf0d0a684ed80e7bb08 tags/jetty-9.2.28.v20190418~8", "commitUser": "joakime", "authoredDateTime": "2019-04-16 14:49:03", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 8, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/DefaultHandler.java", "insertions": 4, "deletions": 4}], "commitDateTime": "2019-04-16 14:49:03", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "b4321bba37f02aabebe5dd2eaae9d9607ac6bf3c", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "7746c83ad6c4f71ceb60e6ed29d3411a09d0e9db", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3555 - Applying more changes from review\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["ec34fafc3f3302b240947479e9d526ea4bc0a6e3"], "commitHash": "5ef8a8abfa63b26a6f978200519730f964ebee0b", "commitSpoonAstDiffStats": [{"spoonFilePath": "DefaultHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.DefaultHandler.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 1, "UPD": 3, "MOV": 1, "TOT": 5}]}], "nameRev": "5ef8a8abfa63b26a6f978200519730f964ebee0b tags/jetty-9.2.28.v20190418~4", "commitUser": "joakime", "authoredDateTime": "2019-04-17 10:51:05", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 7, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/DefaultHandler.java", "insertions": 3, "deletions": 4}], "commitDateTime": "2019-04-17 10:51:05", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3555 - Applying more changes from review\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["5ef8a8abfa63b26a6f978200519730f964ebee0b"], "commitHash": "b0f72a87d5b35ff0a814143fb1725f7c6fc4e0d7", "commitSpoonAstDiffStats": [{"spoonFilePath": "DefaultHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.DefaultHandler.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 3, "INS": 2, "UPD": 1, "MOV": 2, "TOT": 8}]}], "nameRev": "b0f72a87d5b35ff0a814143fb1725f7c6fc4e0d7 tags/jetty-9.2.28.v20190418~3", "commitUser": "joakime", "authoredDateTime": "2019-04-17 12:16:18", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 7, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/DefaultHandler.java", "insertions": 3, "deletions": 4}], "commitDateTime": "2019-04-17 12:16:18", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3555 - Updating testcase\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["879e161c22a3613986e7ffd1601fd2711bba556a"], "commitHash": "eebad0655af99478fe268f51be811a47f2f211fe", "commitSpoonAstDiffStats": [{"spoonFilePath": "DefaultHandlerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.DefaultHandlerTest.testNotRevealBaseResource()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}], "nameRev": "eebad0655af99478fe268f51be811a47f2f211fe tags/jetty-9.2.28.v20190418~6", "commitUser": "joakime", "authoredDateTime": "2019-04-16 13:32:44", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 4, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/DefaultHandlerTest.java", "insertions": 2, "deletions": 2}], "commitDateTime": "2019-04-16 17:23:39", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3555 - Applying more changes from review\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["b0f72a87d5b35ff0a814143fb1725f7c6fc4e0d7"], "commitHash": "a15534d72c0c8d84cb821c767343a91584a4fecb", "commitSpoonAstDiffStats": [{"spoonFilePath": "DefaultHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.DefaultHandler.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 1, "TOT": 3}]}], "nameRev": "a15534d72c0c8d84cb821c767343a91584a4fecb tags/jetty-9.2.28.v20190418~2", "commitUser": "joakime", "authoredDateTime": "2019-04-17 16:36:33", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 4, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/DefaultHandler.java", "insertions": 2, "deletions": 2}], "commitDateTime": "2019-04-17 16:36:33", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "086eb2c170e5c9c6432cca9822a0cc00b07bfa70", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3555 - Do not reveal base resource in error response\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["3d028ab2ca76086a742bac7409a3620e81ec4791"], "commitHash": "04c994712c0b29824633598cfe0bf709f3b96f09", "commitSpoonAstDiffStats": [{"spoonFilePath": "DefaultHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.DefaultHandler.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 2, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 4}]}, {"spoonFilePath": "DefaultHandlerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.DefaultHandlerTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "04c994712c0b29824633598cfe0bf709f3b96f09 tags/jetty-9.2.28.v20190418~12", "commitUser": "joakime", "authoredDateTime": "2019-04-15 18:20:39", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 101, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/DefaultHandlerTest.java", "insertions": 101, "deletions": 0}, {"lines": 7, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/DefaultHandler.java", "insertions": 2, "deletions": 5}], "commitDateTime": "2019-04-15 18:20:39", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "d8e40fcf54a0691b8885e2f851ec32aac5fe43f9", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "DefaultHandler Reveals Base Resource Path of each Context", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 6.0, "INS": 22.0, "UPD": 61.0, "MOV": 44.0, "TOT": 133.0, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 157.0, "insertions": 94.0, "gitFilesChange": 1, "deletions": 63.0}, "closed": "2019-04-17 22:14:54", "statsSkippedReason": "", "body": "When you have an environment where the DefaultHandler has to produce an error page showing the list of contexts, the base resource directory of each context is revealed.\r\n", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server/handler"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.handler.DefaultHandler.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)"], "ttf": 1.0002777777777778, "numCommits": 5, "url": "https://github.com/eclipse/jetty.project/issues/3555"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug", "High Priority", "Sponsored"], "user": "tholu", "filteredCommits": [], "commits": {"4305f61b909e14f4ff1ba50d2d83cc2abd720dcf": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "a640c19579aa893cbfb2bf8d828db927b59caae9": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "a3f6d3aeb68dad07cf88308e637d066ae7590920": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "5fe1420734a9fb85de5f23f3def55c7eb0724bcf": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "ae2addc70a26f8d9ab1dce2ead88a6cecd7a1472": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "1839d7f2041d18db1d45ce312c12f608837765b7": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "787380a91ecf54331ba7d87c6fa369e0fa3f33a4": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "438f0b86a3c75b607a8e70df00ef549eea0e0e99": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "2b227f121ea6d416d55ab4a5f6e86c27981d5cf7": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "561ea0dafb77efaa97cb04dd0db31650ad563129": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "f69de3372ec97a6c4547a48696f92b8d08a369ef": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "c66957867b3c88c0abaf8c5395ad983237ac44fa": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "611eacd964dc21119d59b4e6553285883ec5ce86": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "c4d51b09df7a181efcbe6a130f701a95fecea37d": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "6be2f7ba1f680881897dd885419a59844d858fa9": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "42f231551882c2cb89e2c812bb8174c78ed9ee04": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "d31c9ea5f199b038730b77ceddfbdc018aceeb75": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "98e38e104e527b4e5b67a9cc89035b013a7c1a60": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "4dd76fc092c09cfc526abffb542cc750e918c158": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "3fd486737e6b25f7ffc276449ec9cf229bd2a784": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "b70d22fee88605d23463890b0602484d918d2846": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "897d15df05143c693b6b8a1fb0db55792b77ccb1": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "d6e4b8b11aaec2a68c05a1fd2cf3a515be187a61": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2019-04-15 10:44:11", "commitsDetails": [], "title": "Server becomes unresponsive after sitting idle from a load spike", "spoonStatsSummary": {}, "closed": "2019-06-21 06:49:07", "statsSkippedReason": "", "body": "I tested Jetty 9.4.16 over the weekend with quite some load, although if's currently only available on Maven central and not officially been announced.\r\n\r\nAfter a few hours, Jetty became unresponsive and I got 502 errors from my reverse proxy before it. I downgraded to Jetty 9.4.15 again and it seems to be running fine.\r\n\r\nI really can't pinpoint what might cause this behavior, as it only happened after a few hours - but repeatedly. I use Glowroot to monitor the application and I found nothing obvious in the threaddump either. Out of ideas how to debug such situations.\r\n\r\nCan somebody reproduce this? Any ideas how to further debug this?", "ttf": 66.00027777777778, "url": "https://github.com/eclipse/jetty.project/issues/3550"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 6, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug", "Microsoft Windows", "Security"], "user": "boughtonp", "filteredCommits": ["3d028ab2ca76086a742bac7409a3620e81ec4791"], "commits": {"09c5b615ef0d140a4d27d75d2ae2bd6361ad1cd6": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "3909285dcf4c7c006833f2f8b20f5fde5afe12e5": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "1e7c46acafb49bc122f0b919aa1b3d9d1071d493": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "3d028ab2ca76086a742bac7409a3620e81ec4791": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "b3ab2b2d04cfcbe27104f97e8e042cfdb4cf5e11": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "9e7ea996c863db538a498cf59a43d7b35a4aa9d2": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "7b774d82e8234231e99b33c19acac3b6f83c0377": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "1565b5f160e600d08da9b00edf081fb353a443d9": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2019-04-14 18:46:50", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "09c5b615ef0d140a4d27d75d2ae2bd6361ad1cd6", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "3909285dcf4c7c006833f2f8b20f5fde5afe12e5", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "1e7c46acafb49bc122f0b919aa1b3d9d1071d493", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3549 - Using FileName properly in Directory Listings.\n\n+ Even though this was reported against Windows, the solution\n  implemented should be sane for all OS or FileSystem combinations.\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["9b19374c5df5040b6f8ce2a35443c1818a097c82"], "commitHash": "3d028ab2ca76086a742bac7409a3620e81ec4791", "commitSpoonAstDiffStats": [{"spoonFilePath": "DefaultServletTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.DefaultServletTest.testListingFilenamesOnly_UrlResource()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.DefaultServletTest.testListingFilenamesOnly()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.DefaultServletTest.init()", "DEL": 0, "INS": 5, "UPD": 0, "MOV": 0, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.servlet.DefaultServletTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "Resource.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.Resource.getFileName()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.Resource.getListHTML(java.lang.String,boolean)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.Resource.getListHTML(java.lang.String,boolean,java.lang.String)", "DEL": 2, "INS": 3, "UPD": 10, "MOV": 5, "TOT": 20}]}], "nameRev": "3d028ab2ca76086a742bac7409a3620e81ec4791 tags/jetty-9.2.28.v20190418~13", "commitUser": "joakime", "authoredDateTime": "2019-04-15 07:11:31", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 0, "filePath": "jetty-servlet/src/test/resources/jar-resource-odd.jar", "insertions": 0, "deletions": 0}, {"lines": 139, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/DefaultServletTest.java", "insertions": 134, "deletions": 5}, {"lines": 150, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/resource/Resource.java", "insertions": 106, "deletions": 44}], "commitDateTime": "2019-04-15 18:05:48", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "b3ab2b2d04cfcbe27104f97e8e042cfdb4cf5e11", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "9e7ea996c863db538a498cf59a43d7b35a4aa9d2", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3549 - Using FileName properly in Directory Listings.\n\n+ Even though this was reported against Windows, the solution\n  implemented should be sane for all OS or FileSystem combinations.\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["608e4f5a9864497086cd4e5b4845a520a8a4ef3b"], "commitHash": "7b774d82e8234231e99b33c19acac3b6f83c0377", "commitSpoonAstDiffStats": [{"spoonFilePath": "DefaultServletTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.DefaultServletTest.testListingFilenamesOnly_UrlResource()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.DefaultServletTest.testListingFilenamesOnly()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.DefaultServletTest.init()", "DEL": 0, "INS": 5, "UPD": 0, "MOV": 0, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.servlet.DefaultServletTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "Resource.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.Resource.getFileName()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.Resource.getListHTML(java.lang.String,boolean)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.Resource.getListHTML(java.lang.String,boolean,java.lang.String)", "DEL": 2, "INS": 3, "UPD": 10, "MOV": 5, "TOT": 20}]}], "nameRev": "7b774d82e8234231e99b33c19acac3b6f83c0377 tags/jetty-9.3.27.v20190418~6^2", "commitUser": "joakime", "authoredDateTime": "2019-04-15 07:11:31", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 0, "filePath": "jetty-servlet/src/test/resources/jar-resource-odd.jar", "insertions": 0, "deletions": 0}, {"lines": 129, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/DefaultServletTest.java", "insertions": 129, "deletions": 0}, {"lines": 141, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/resource/Resource.java", "insertions": 101, "deletions": 40}], "commitDateTime": "2019-04-15 18:01:41", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #3552 from eclipse/jetty-9.3.x-issue-3549-windows-dir-listing\n\nIssue #3549 - Using FileName properly in Directory Listings.", "commitParents": ["608e4f5a9864497086cd4e5b4845a520a8a4ef3b", "7b774d82e8234231e99b33c19acac3b6f83c0377"], "commitHash": "1565b5f160e600d08da9b00edf081fb353a443d9", "commitSpoonAstDiffStats": [{"spoonFilePath": "DefaultServletTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.DefaultServletTest.testListingFilenamesOnly_UrlResource()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.DefaultServletTest.testListingFilenamesOnly()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.DefaultServletTest.init()", "DEL": 0, "INS": 5, "UPD": 0, "MOV": 0, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.servlet.DefaultServletTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "Resource.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.Resource.getFileName()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.Resource.getListHTML(java.lang.String,boolean)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.Resource.getListHTML(java.lang.String,boolean,java.lang.String)", "DEL": 2, "INS": 3, "UPD": 10, "MOV": 5, "TOT": 20}]}], "nameRev": "1565b5f160e600d08da9b00edf081fb353a443d9 tags/jetty-9.3.27.v20190418~6", "commitUser": "joakime", "authoredDateTime": "2019-04-16 04:42:57", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 0, "filePath": "jetty-servlet/src/test/resources/jar-resource-odd.jar", "insertions": 0, "deletions": 0}, {"lines": 129, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/DefaultServletTest.java", "insertions": 129, "deletions": 0}, {"lines": 141, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/resource/Resource.java", "insertions": 101, "deletions": 40}], "commitDateTime": "2019-04-16 04:42:57", "spoonStatsSkippedReason": ""}], "title": "Directory Listing on Windows reveals Resource Base path", "spoonStatsSummary": {"spoonMethodsChanged": 3, "DEL": 2.0, "INS": 5.0, "UPD": 10.0, "MOV": 5.0, "TOT": 22.0, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 150.0, "insertions": 106.0, "gitFilesChange": 1, "deletions": 44.0}, "closed": "2019-04-17 22:15:41", "statsSkippedReason": "", "body": "This is likely related to #3319 - on Windows, v9.4.16 has full paths instead of just the name.\r\n\r\nThe same release on Debian works fine, as does v9.4.15 on Windows (with older markup).\r\n\r\nExample:\r\n```\r\nmkdir -p webapps/browse\r\ntouch webapps/browse/test.txt\r\njava -jar ../jetty-distribution-9.4.16.v20190411/start.jar --module=deploy --module=http\r\n```\r\n\r\nBrowsing to `http://localhost:8080/browse/` on Windows gives a dir list including:\r\n\r\n`<a href=\"/browse/S:%5Cjetty%5Cdirectory-browsing%5Cwebapps%5Cbrowse%5Ctest.txt\">S:\\jetty\\directory-browsing\\webapps\\browse\\test.txt&nbsp;</a>`\r\n\r\nOn Debian it correctly outputs:\r\n\r\n`<a href=\"/browse/test.txt\">test.txt&nbsp;</a>`", "changesInPackagesGIT": ["jetty-util/src/main/java/org/eclipse/jetty/util/resource"], "changesInPackagesSPOON": ["org.eclipse.jetty.util.resource.Resource.getListHTML(java.lang.String,boolean)", "org.eclipse.jetty.util.resource.Resource.getFileName()", "org.eclipse.jetty.util.resource.Resource.getListHTML(java.lang.String,boolean,java.lang.String)"], "ttf": 3.000277777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/3549"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "bio-boris", "filteredCommits": ["9fc5eb2af8b1bc93109ff66936fdaa6d2ae851bb"], "commits": {"81b988cddf16a380b13e1e8296211050b5816632": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "9fc5eb2af8b1bc93109ff66936fdaa6d2ae851bb": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2019-04-11 03:56:32", "commitsDetails": [{"commitMessage": "Merge pull request #3547 from eclipse/jetty-9.4.x-issue-3545-npe-in-httpoutput\n\nIssue #3545 - NPE in HttpOutput with print(\"\")", "commitParents": ["20343ba7cbdf1d7c58b60374ea347fab424d70ab", "9fc5eb2af8b1bc93109ff66936fdaa6d2ae851bb"], "commitHash": "81b988cddf16a380b13e1e8296211050b5816632", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpOutput.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpOutput.print(java.lang.String,boolean)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "ResponseTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ResponseTest.testPrintln()", "DEL": 0, "INS": 1, "UPD": 14, "MOV": 22, "TOT": 37}]}], "nameRev": "81b988cddf16a380b13e1e8296211050b5816632 tags/jetty-9.4.16.v20190411~1", "commitUser": "joakime", "authoredDateTime": "2019-04-11 06:00:22", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 3, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpOutput.java", "insertions": 1, "deletions": 2}, {"lines": 61, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ResponseTest.java", "insertions": 33, "deletions": 28}], "commitDateTime": "2019-04-11 06:00:22", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3545 - NPE in HttpOutput with print(\"\")\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["20343ba7cbdf1d7c58b60374ea347fab424d70ab"], "commitHash": "9fc5eb2af8b1bc93109ff66936fdaa6d2ae851bb", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpOutput.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpOutput.print(java.lang.String,boolean)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "ResponseTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ResponseTest.testPrintln()", "DEL": 0, "INS": 1, "UPD": 14, "MOV": 22, "TOT": 37}]}], "nameRev": "9fc5eb2af8b1bc93109ff66936fdaa6d2ae851bb tags/jetty-9.4.16.v20190411~1^2", "commitUser": "joakime", "authoredDateTime": "2019-04-11 07:17:00", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 3, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpOutput.java", "insertions": 1, "deletions": 2}, {"lines": 61, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ResponseTest.java", "insertions": 33, "deletions": 28}], "commitDateTime": "2019-04-11 07:17:00", "spoonStatsSkippedReason": ""}], "title": "NullPointerException on ServletOutputStream.print(\"\");", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 3, "insertions": 1, "gitFilesChange": 1, "deletions": 2}, "closed": "2019-04-11 13:17:18", "statsSkippedReason": "", "body": "\r\n\r\nThe following code produces a NPE\r\n```\r\njava.lang.NullPointerException\r\n\tat org.eclipse.jetty.server.HttpOutput.print(HttpOutput.java:734)\r\n\tat org.eclipse.jetty.server.HttpOutput.print(HttpOutput.java:689)\r\n```\r\n\r\n when overriding the doOptions method in the  `HttpServlet` for jetty `9.4.15.v20190215` but works in `9.4.12.v20180830`  \r\n\r\n```\r\n@Override\r\nprotected void doOptions(HttpServletRequest request, HttpServletResponse response)\r\n        throws ServletException, IOException {\r\n    response.setContentLength(0);\r\n    response.getOutputStream().print(\"\");\r\n    response.getOutputStream().flush();\r\n}\r\n```\r\nThe fix is to remove `response.getOutputStream().print(\"\");` ", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.HttpOutput.print(java.lang.String,boolean)"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/3545"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 2, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["0efa519553c9d1398c1f5d438b093e5ebf9adad6"], "commits": {"0efa519553c9d1398c1f5d438b093e5ebf9adad6": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "0a4fd7676139a7f4b7a20830e4615ba73d92ed4d": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "20343ba7cbdf1d7c58b60374ea347fab424d70ab": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "138ff4e2026fa44543a737502ba682c60c6db948": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2019-04-09 17:04:23", "commitsDetails": [{"commitMessage": "Issue #3540 - Use configured Security Provider consistently\n\n+ If optional Security Provider is configured, then use it consistently\n  for all security objects that take a Provider argument.\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["2e46dd0a215c73a9684f7dd3ec623fe398b24157"], "commitHash": "0efa519553c9d1398c1f5d438b093e5ebf9adad6", "commitSpoonAstDiffStats": [{"spoonFilePath": "SecureRequestCustomizer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.SecureRequestCustomizer.getCertChain(org.eclipse.jetty.server.Request,javax.net.ssl.SSLSession)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.SecureRequestCustomizer.customize(javax.net.ssl.SSLEngine,org.eclipse.jetty.server.Request)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "SslContextFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 2, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.getX509CertChain(org.eclipse.jetty.util.ssl.SslContextFactory,javax.net.ssl.SSLSession)", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.getTrustManagerFactoryInstance()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.getSSLContextInstance()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.newPKIXBuilderParameters(java.security.KeyStore,java.util.Collection)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.getCertStoreInstance(java.util.Collection)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.getCertificateFactoryInstance(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.getTrustManagers(java.security.KeyStore,java.util.Collection)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.getKeyManagers(java.security.KeyStore)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.getCertChain(javax.net.ssl.SSLSession)", "DEL": 1, "INS": 1, "UPD": 1, "MOV": 3, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.getSecureRandomInstance()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.load()", "DEL": 6, "INS": 4, "UPD": 0, "MOV": 2, "TOT": 12}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.getX509CertChain(javax.net.ssl.SSLSession)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.getKeyManagerFactoryInstance()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "0efa519553c9d1398c1f5d438b093e5ebf9adad6 tags/jetty-9.4.16.v20190411~2^2", "commitUser": "joakime", "authoredDateTime": "2019-04-09 15:39:51", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 243, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/ssl/SslContextFactory.java", "insertions": 220, "deletions": 23}, {"lines": 37, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/SecureRequestCustomizer.java", "insertions": 27, "deletions": 10}], "commitDateTime": "2019-04-10 08:22:16", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "0a4fd7676139a7f4b7a20830e4615ba73d92ed4d", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #3542 from eclipse/jetty-9.4.x-issue-3540-ssl-provider-consistency\n\nIssue #3540 - Use configured Security Provider consistently", "commitParents": ["1532eba61d2276b2ed665719ce87f148e4a976da", "0efa519553c9d1398c1f5d438b093e5ebf9adad6"], "commitHash": "20343ba7cbdf1d7c58b60374ea347fab424d70ab", "commitSpoonAstDiffStats": [{"spoonFilePath": "SecureRequestCustomizer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.SecureRequestCustomizer.getCertChain(org.eclipse.jetty.server.Request,javax.net.ssl.SSLSession)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.SecureRequestCustomizer.customize(javax.net.ssl.SSLEngine,org.eclipse.jetty.server.Request)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "SslContextFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 2, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.getX509CertChain(org.eclipse.jetty.util.ssl.SslContextFactory,javax.net.ssl.SSLSession)", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.getTrustManagerFactoryInstance()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.getSSLContextInstance()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.newPKIXBuilderParameters(java.security.KeyStore,java.util.Collection)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.getCertStoreInstance(java.util.Collection)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.getCertificateFactoryInstance(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.getTrustManagers(java.security.KeyStore,java.util.Collection)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.getKeyManagers(java.security.KeyStore)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.getCertChain(javax.net.ssl.SSLSession)", "DEL": 1, "INS": 1, "UPD": 1, "MOV": 3, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.getSecureRandomInstance()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.load()", "DEL": 6, "INS": 4, "UPD": 0, "MOV": 2, "TOT": 12}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.getX509CertChain(javax.net.ssl.SSLSession)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.getKeyManagerFactoryInstance()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "20343ba7cbdf1d7c58b60374ea347fab424d70ab tags/jetty-9.4.16.v20190411~2", "commitUser": "joakime", "authoredDateTime": "2019-04-10 08:16:03", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 243, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/ssl/SslContextFactory.java", "insertions": 220, "deletions": 23}, {"lines": 37, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/SecureRequestCustomizer.java", "insertions": 27, "deletions": 10}], "commitDateTime": "2019-04-10 08:16:03", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "138ff4e2026fa44543a737502ba682c60c6db948", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "Use configured Provider in SslContextFactory consistently", "spoonStatsSummary": {"spoonMethodsChanged": 16, "DEL": 9.0, "INS": 17.0, "UPD": 7.0, "MOV": 10.0, "TOT": 43.0, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 280.0, "insertions": 247.0, "gitFilesChange": 2, "deletions": 33.0}, "closed": "2019-04-10 15:16:29", "statsSkippedReason": "", "body": "Currently the configured Provider is only used for SSLContext.\r\n\r\nBut it's not used for :\r\n\r\n* TrustManagerFactory\r\n* KeyManagerFactory\r\n* SecureRandom\r\n* CertStore\r\n* CertificateFactory\r\n\r\nThis is particularly important for Conscrypt usage for KeyManagerFactory and TrustManagerFactory", "changesInPackagesGIT": ["jetty-util/src/main/java/org/eclipse/jetty/util/ssl", "jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.util.ssl.SslContextFactory", "org.eclipse.jetty.util.ssl.SslContextFactory.getX509CertChain(org.eclipse.jetty.util.ssl.SslContextFactory,javax.net.ssl.SSLSession)", "org.eclipse.jetty.util.ssl.SslContextFactory.getTrustManagerFactoryInstance()", "org.eclipse.jetty.util.ssl.SslContextFactory.getSSLContextInstance()", "org.eclipse.jetty.server.SecureRequestCustomizer.getCertChain(org.eclipse.jetty.server.Request,javax.net.ssl.SSLSession)", "org.eclipse.jetty.util.ssl.SslContextFactory.newPKIXBuilderParameters(java.security.KeyStore,java.util.Collection)", "org.eclipse.jetty.util.ssl.SslContextFactory.getCertStoreInstance(java.util.Collection)", "org.eclipse.jetty.util.ssl.SslContextFactory.getCertificateFactoryInstance(java.lang.String)", "org.eclipse.jetty.util.ssl.SslContextFactory.getTrustManagers(java.security.KeyStore,java.util.Collection)", "org.eclipse.jetty.util.ssl.SslContextFactory.getKeyManagers(java.security.KeyStore)", "org.eclipse.jetty.util.ssl.SslContextFactory.getCertChain(javax.net.ssl.SSLSession)", "org.eclipse.jetty.util.ssl.SslContextFactory.getSecureRandomInstance()", "org.eclipse.jetty.server.SecureRequestCustomizer.customize(javax.net.ssl.SSLEngine,org.eclipse.jetty.server.Request)", "org.eclipse.jetty.util.ssl.SslContextFactory.load()", "org.eclipse.jetty.util.ssl.SslContextFactory.getX509CertChain(javax.net.ssl.SSLSession)", "org.eclipse.jetty.util.ssl.SslContextFactory.getKeyManagerFactoryInstance()"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/3540"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "duanfeixiang", "filteredCommits": ["9628ea3bc158784bb2d9b040e264d1a45fc4b7df"], "commits": {"364ded9f73b86ca5477a26388a173447b854ed02": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "9628ea3bc158784bb2d9b040e264d1a45fc4b7df": {"commitUser": "sbordet", "commitGHEventType": "closed"}}, "created": "2019-04-01 02:36:50", "commitsDetails": [{"commitMessage": "Merge pull request #4391 from eclipse/jetty-9.4.x-3512-httpclient_multipart_close\n\nFixes #3512 - File descriptor is not released after zip file uploaded\u2026", "commitParents": ["2ee079feb1e6645a25fc6343227f60e2ae4aefff", "9628ea3bc158784bb2d9b040e264d1a45fc4b7df"], "commitHash": "364ded9f73b86ca5477a26388a173447b854ed02", "commitSpoonAstDiffStats": [{"spoonFilePath": "MultiPartContentProvider.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.util.MultiPartContentProvider.MultiPartIterator.next()", "DEL": 0, "INS": 2, "UPD": 1, "MOV": 3, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.client.util.MultiPartContentProvider.MultiPartIterator.failed(java.lang.Throwable)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.client.util.MultiPartContentProvider.MultiPartIterator.succeeded()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "MultiPartContentProviderTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.util.MultiPartContentProviderTest.CloseableStringContentProvider", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.util.MultiPartContentProviderTest.testEachPartIsClosed(org.eclipse.jetty.client.util.Scenario)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpContent.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpContent.close()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}]}], "nameRev": "364ded9f73b86ca5477a26388a173447b854ed02 tags/jetty-9.4.25.v20191220~17", "commitUser": "sbordet", "authoredDateTime": "2019-12-07 12:38:40", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 17, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/util/MultiPartContentProvider.java", "insertions": 12, "deletions": 5}, {"lines": 12, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpContent.java", "insertions": 3, "deletions": 9}, {"lines": 88, "filePath": "jetty-client/src/test/java/org/eclipse/jetty/client/util/MultiPartContentProviderTest.java", "insertions": 88, "deletions": 0}], "commitDateTime": "2019-12-07 12:38:40", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #3512 - File descriptor is not released after zip file uploaded via jetty-client.\n\nIn case of multiple parts only the last iterator was closed.\nNow, every part's iterator is closed.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["db9ad2fcecd6158ac9535eebd9fc952809d5e1ff"], "commitHash": "9628ea3bc158784bb2d9b040e264d1a45fc4b7df", "commitSpoonAstDiffStats": [{"spoonFilePath": "MultiPartContentProvider.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.util.MultiPartContentProvider.MultiPartIterator.next()", "DEL": 0, "INS": 2, "UPD": 1, "MOV": 3, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.client.util.MultiPartContentProvider.MultiPartIterator.failed(java.lang.Throwable)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.client.util.MultiPartContentProvider.MultiPartIterator.succeeded()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "MultiPartContentProviderTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.util.MultiPartContentProviderTest.CloseableStringContentProvider", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.util.MultiPartContentProviderTest.testEachPartIsClosed(org.eclipse.jetty.client.util.Scenario)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpContent.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpContent.close()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}]}], "nameRev": "9628ea3bc158784bb2d9b040e264d1a45fc4b7df tags/jetty-9.4.25.v20191220~17^2", "commitUser": "sbordet", "authoredDateTime": "2019-12-03 11:36:53", "commitGHEventType": "closed", "commitGitStats": [{"lines": 17, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/util/MultiPartContentProvider.java", "insertions": 12, "deletions": 5}, {"lines": 12, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpContent.java", "insertions": 3, "deletions": 9}, {"lines": 88, "filePath": "jetty-client/src/test/java/org/eclipse/jetty/client/util/MultiPartContentProviderTest.java", "insertions": 88, "deletions": 0}], "commitDateTime": "2019-12-03 11:36:53", "spoonStatsSkippedReason": ""}], "title": "File descriptor is not released after zip file uploaded via jetty-client", "spoonStatsSummary": {"spoonMethodsChanged": 4, "DEL": 1, "INS": 5, "UPD": 1, "MOV": 6, "TOT": 13, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 29, "insertions": 15, "gitFilesChange": 2, "deletions": 14}, "closed": "2019-12-07 11:38:44", "statsSkippedReason": "", "body": "Every time you upload a file, there will be one more file descriptor, which will not be released.", "changesInPackagesGIT": ["jetty-client/src/main/java/org/eclipse/jetty/client/util", "jetty-client/src/main/java/org/eclipse/jetty/client"], "changesInPackagesSPOON": ["org.eclipse.jetty.client.HttpContent.close()", "org.eclipse.jetty.client.util.MultiPartContentProvider.MultiPartIterator.failed(java.lang.Throwable)", "org.eclipse.jetty.client.util.MultiPartContentProvider.MultiPartIterator.succeeded()", "org.eclipse.jetty.client.util.MultiPartContentProvider.MultiPartIterator.next()"], "ttf": 250.00027777777777, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/3512"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug", "Microsoft Windows"], "user": "nomeaning25", "filteredCommits": ["73f79751892b535fff906a6ce9437e8d9a6ca01f"], "commits": {"d0a5ba8d5a00c36e334660f006a064e69ad45729": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "73f79751892b535fff906a6ce9437e8d9a6ca01f": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2019-03-26 14:05:46", "commitsDetails": [{"commitMessage": "Merge pull request #3495 from eclipse/jetty-9.4.x-3489-extraclasspath-splat-windows\n\nIssue #3489 - Allowing JAR directory references on Windows", "commitParents": ["97ff7ed9c0506cdca5598b7363cd7df4bea4a583", "73f79751892b535fff906a6ce9437e8d9a6ca01f"], "commitHash": "d0a5ba8d5a00c36e334660f006a064e69ad45729", "commitSpoonAstDiffStats": [{"spoonFilePath": "WebAppClassLoader.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.WebAppClassLoader.addClassPath(java.lang.String)", "DEL": 1, "INS": 4, "UPD": 0, "MOV": 4, "TOT": 9}]}], "nameRev": "d0a5ba8d5a00c36e334660f006a064e69ad45729 tags/jetty-9.4.16.v20190411~42", "commitUser": "joakime", "authoredDateTime": "2019-03-28 08:19:06", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 17, "filePath": "jetty-webapp/src/main/java/org/eclipse/jetty/webapp/WebAppClassLoader.java", "insertions": 13, "deletions": 4}], "commitDateTime": "2019-03-28 08:19:06", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3489 - Allowing JAR directory references on Windows\n\n+ Moving Resource.newResource() to later point\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["1e4be0a98e060afe216998e3d4f03d2272eba85d"], "commitHash": "73f79751892b535fff906a6ce9437e8d9a6ca01f", "commitSpoonAstDiffStats": [{"spoonFilePath": "WebAppClassLoader.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.WebAppClassLoader.addClassPath(java.lang.String)", "DEL": 1, "INS": 4, "UPD": 0, "MOV": 4, "TOT": 9}]}], "nameRev": "73f79751892b535fff906a6ce9437e8d9a6ca01f tags/jetty-9.4.16.v20190411~42^2", "commitUser": "joakime", "authoredDateTime": "2019-03-27 14:14:41", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 17, "filePath": "jetty-webapp/src/main/java/org/eclipse/jetty/webapp/WebAppClassLoader.java", "insertions": 13, "deletions": 4}], "commitDateTime": "2019-03-27 14:14:41", "spoonStatsSkippedReason": ""}], "title": "Using setExtraClasspath(\"lib/extra/*\") does not work on Microsoft Windows", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 1, "INS": 4, "UPD": 0, "MOV": 4, "TOT": 9, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 17, "insertions": 13, "gitFilesChange": 1, "deletions": 4}, "closed": "2019-03-28 15:20:13", "statsSkippedReason": "", "body": "Trying to add extra Jars to classpath using:\r\n`    context.setExtraClasspath(\"lib/extra/*\");`\r\n\r\nWhich was added in #150 \r\n\r\nThe error I get is:\r\n```\r\n2019-03-26 14:57:40.921:WARN:oejw.WebAppContext:main: Failed startup of context o.e.j.w.WebAppContext@42f30e0a{/posh,null,UNAVAILABLE}{file:/C:/Standalone%20apps/posh/posh-jar-with-dependencies.jar}\r\njava.io.IOException: Invalid argument\r\n\tat java.io.WinNTFileSystem.canonicalize0(Native Method)\r\n\tat java.io.WinNTFileSystem.canonicalize(Unknown Source)\r\n\tat java.io.File.getCanonicalPath(Unknown Source)\r\n\tat java.io.File.getCanonicalFile(Unknown Source)\r\n\tat org.eclipse.jetty.util.resource.Resource.newResource(Resource.java:180)\r\n\tat org.eclipse.jetty.util.resource.Resource.newResource(Resource.java:150)\r\n\tat org.eclipse.jetty.server.handler.ContextHandler.newResource(ContextHandler.java:1995)\r\n\tat org.eclipse.jetty.webapp.WebAppClassLoader.addClassPath(WebAppClassLoader.java:282)\r\n\tat org.eclipse.jetty.webapp.WebAppClassLoader.<init>(WebAppClassLoader.java:216)\r\n\tat org.eclipse.jetty.webapp.WebAppClassLoader.<init>(WebAppClassLoader.java:180)\r\n\tat org.eclipse.jetty.webapp.WebAppContext.preConfigure(WebAppContext.java:485)\r\n\tat org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:544)\r\n\tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:138)\r\n\tat org.eclipse.jetty.server.Server.start(Server.java:415)\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:108)\r\n\tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113)\r\n\tat org.eclipse.jetty.server.Server.doStart(Server.java:382)\r\n\tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n\tat posh.standalone.EmbeddedServer.main(EmbeddedServer.java:77)\r\nSuppressed: \r\n\t|java.net.MalformedURLException: no protocol: lib/extra/*\r\n\t|\tat java.net.URL.<init>(Unknown Source)\r\n\t|\tat java.net.URL.<init>(Unknown Source)\r\n\t|\tat java.net.URL.<init>(Unknown Source)\r\n\t|\tat org.eclipse.jetty.util.resource.Resource.newResource(Resource.java:167)\r\n\t|\tat org.eclipse.jetty.util.resource.Resource.newResource(Resource.java:150)\r\n\t|\tat org.eclipse.jetty.server.handler.ContextHandler.newResource(ContextHandler.java:1995)\r\n\t|\tat org.eclipse.jetty.webapp.WebAppClassLoader.addClassPath(WebAppClassLoader.java:282)\r\n\t|\tat org.eclipse.jetty.webapp.WebAppClassLoader.<init>(WebAppClassLoader.java:216)\r\n\t|\tat org.eclipse.jetty.webapp.WebAppClassLoader.<init>(WebAppClassLoader.java:180)\r\n\t|\tat org.eclipse.jetty.webapp.WebAppContext.preConfigure(WebAppContext.java:485)\r\n\t|\tat org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:544)\r\n\t|\tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n\t|\tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:138)\r\n\t|\tat org.eclipse.jetty.server.Server.start(Server.java:415)\r\n\t|\tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:108)\r\n\t|\tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113)\r\n\t|\tat org.eclipse.jetty.server.Server.doStart(Server.java:382)\r\n\t|\tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n\t|\tat posh.standalone.EmbeddedServer.main(EmbeddedServer.java:77)\r\n```\r\nThe jars are not added to class path since i still get class not found exception.\r\n\r\nI am using jetty version 9.4.15.v20190215 embedding it with maven plugin.", "changesInPackagesGIT": ["jetty-webapp/src/main/java/org/eclipse/jetty/webapp"], "changesInPackagesSPOON": ["org.eclipse.jetty.webapp.WebAppClassLoader.addClassPath(java.lang.String)"], "ttf": 2.000277777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/3489"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "ykonrad", "filteredCommits": ["d7364e47947f4be0944511a5b8c47543d524e977", "4eb8cb1686d384a0548539801a6c520f97a69c7e", "4fb19402830279f05bc29bad673cd083df49e037", "76de1c0f24cb5df93263b313b6f6e1a40bc760ab"], "commits": {"65528f76c5ef6ddca11385f9721c8f0bc5f2eed7": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "76de1c0f24cb5df93263b313b6f6e1a40bc760ab": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "4fb19402830279f05bc29bad673cd083df49e037": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "4eb8cb1686d384a0548539801a6c520f97a69c7e": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "d7364e47947f4be0944511a5b8c47543d524e977": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2019-03-04 11:58:31", "commitsDetails": [{"commitMessage": "Issue #3422 - Using new Connection.Listener support in websocket server\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["e56ef9d8f86f436b3ee69c41d970e77682207722"], "commitHash": "4eb8cb1686d384a0548539801a6c520f97a69c7e", "commitSpoonAstDiffStats": [{"spoonFilePath": "BadNetworkTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.tests.client.BadNetworkTest.testAbruptClientClose().2", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.tests.client.BadNetworkTest.testAbruptClientClose()", "DEL": 0, "INS": 3, "UPD": 2, "MOV": 2, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.websocket.tests.client.BadNetworkTest.testAbruptClientClose().3.onSessionClosed(org.eclipse.jetty.websocket.common.WebSocketSession)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.tests.client.BadNetworkTest.testAbruptClientClose().2.onSessionClosed(org.eclipse.jetty.websocket.common.WebSocketSession)", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 2, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.tests.client.BadNetworkTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.tests.client.BadNetworkTest.startServer()", "DEL": 3, "INS": 3, "UPD": 0, "MOV": 1, "TOT": 7}]}], "nameRev": "4eb8cb1686d384a0548539801a6c520f97a69c7e tags/jetty-9.4.16.v20190411~46^2", "commitUser": "joakime", "authoredDateTime": "2019-03-21 14:40:49", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 25, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/BadNetworkTest.java", "insertions": 20, "deletions": 5}], "commitDateTime": "2019-03-21 14:40:49", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3422 - WebSocket wss CLOSE_WAIT on aborted client connection\n\n+ Adding testcase to replicate\n+ Fixing CLOSE_WAIT by issuing wsclose + disconnect on eof\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["3b7338888bdf8c899444f00a0dbaff9a7b20da06"], "commitHash": "76de1c0f24cb5df93263b313b6f6e1a40bc760ab", "commitSpoonAstDiffStats": [{"spoonFilePath": "BadNetworkTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.tests.client.BadNetworkTest.startServer().1.configure(org.eclipse.jetty.websocket.servlet.WebSocketServletFactory)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.tests.client.BadNetworkTest", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.tests.client.BadNetworkTest.testAbruptClientClose()", "DEL": 0, "INS": 10, "UPD": 0, "MOV": 0, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.websocket.tests.client.BadNetworkTest.startServer()", "DEL": 4, "INS": 4, "UPD": 0, "MOV": 0, "TOT": 8}]}, {"spoonFilePath": "AbstractWebSocketConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.io.AbstractWebSocketConnection.onFillable()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}]}], "nameRev": "76de1c0f24cb5df93263b313b6f6e1a40bc760ab tags/jetty-9.4.16.v20190411~46^2~4", "commitUser": "joakime", "authoredDateTime": "2019-03-15 11:50:41", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 4, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/io/AbstractWebSocketConnection.java", "insertions": 4, "deletions": 0}, {"lines": 44, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/BadNetworkTest.java", "insertions": 41, "deletions": 3}], "commitDateTime": "2019-03-15 11:52:14", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3422 - Fixing testcase expectation\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["76de1c0f24cb5df93263b313b6f6e1a40bc760ab"], "commitHash": "4fb19402830279f05bc29bad673cd083df49e037", "commitSpoonAstDiffStats": [{"spoonFilePath": "ClientCloseTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.tests.client.ClientCloseTest.testWriteException()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 2, "TOT": 4}]}], "nameRev": "4fb19402830279f05bc29bad673cd083df49e037 tags/jetty-9.4.16.v20190411~46^2~3", "commitUser": "joakime", "authoredDateTime": "2019-03-15 12:44:28", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 8, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/ClientCloseTest.java", "insertions": 3, "deletions": 5}], "commitDateTime": "2019-03-15 12:44:28", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #3467 from eclipse/jetty-9.4.x-3422-wss-close-wait\n\nIssue #3422 - WebSocket wss CLOSE_WAIT on aborted client connection", "commitParents": ["10d3ea2548475e9da9990eef0d0bbed93e0ce0e5", "4eb8cb1686d384a0548539801a6c520f97a69c7e"], "commitHash": "65528f76c5ef6ddca11385f9721c8f0bc5f2eed7", "commitSpoonAstDiffStats": [{"spoonFilePath": "CloseTrackingEndpoint.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.tests.CloseTrackingEndpoint.assertReceivedCloseEvent(int,org.hamcrest.Matcher,org.hamcrest.Matcher)", "DEL": 2, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 4}]}, {"spoonFilePath": "ClientCloseTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.tests.client.ClientCloseTest.testRemoteDisconnect()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 2, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.websocket.tests.client.ClientCloseTest.testWriteException()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 2, "TOT": 4}]}, {"spoonFilePath": "BadNetworkTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.tests.client.BadNetworkTest.startServer().1.configure(org.eclipse.jetty.websocket.servlet.WebSocketServletFactory)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.tests.client.BadNetworkTest", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.tests.client.BadNetworkTest.testAbruptClientClose()", "DEL": 0, "INS": 12, "UPD": 0, "MOV": 0, "TOT": 12}, {"spoonMethodName": "org.eclipse.jetty.websocket.tests.client.BadNetworkTest.startServer()", "DEL": 7, "INS": 7, "UPD": 0, "MOV": 1, "TOT": 15}]}, {"spoonFilePath": "WebSocketServerFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketServerFactory.upgrade(org.eclipse.jetty.server.HttpConnection,org.eclipse.jetty.websocket.servlet.ServletUpgradeRequest,org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse,org.eclipse.jetty.websocket.common.events.EventDriver)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AbstractWebSocketConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.io.AbstractWebSocketConnection.onFillable()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}]}], "nameRev": "65528f76c5ef6ddca11385f9721c8f0bc5f2eed7 tags/jetty-9.4.16.v20190411~46", "commitUser": "joakime", "authoredDateTime": "2019-03-22 11:36:40", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 7, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/CloseTrackingEndpoint.java", "insertions": 1, "deletions": 6}, {"lines": 4, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/io/AbstractWebSocketConnection.java", "insertions": 4, "deletions": 0}, {"lines": 61, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/BadNetworkTest.java", "insertions": 57, "deletions": 4}, {"lines": 13, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/ClientCloseTest.java", "insertions": 5, "deletions": 8}, {"lines": 6, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/WebSocketServerFactory.java", "insertions": 5, "deletions": 1}], "commitDateTime": "2019-03-22 11:36:40", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3422 - Fixing testcase expectations\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["4fb19402830279f05bc29bad673cd083df49e037"], "commitHash": "d7364e47947f4be0944511a5b8c47543d524e977", "commitSpoonAstDiffStats": [{"spoonFilePath": "CloseTrackingEndpoint.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.tests.CloseTrackingEndpoint.assertReceivedCloseEvent(int,org.hamcrest.Matcher,org.hamcrest.Matcher)", "DEL": 2, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 4}]}, {"spoonFilePath": "ClientCloseTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.tests.client.ClientCloseTest.testRemoteDisconnect()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 2, "TOT": 4}]}], "nameRev": "d7364e47947f4be0944511a5b8c47543d524e977 tags/jetty-9.4.16.v20190411~46^2~2", "commitUser": "joakime", "authoredDateTime": "2019-03-15 14:08:33", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 7, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/CloseTrackingEndpoint.java", "insertions": 1, "deletions": 6}, {"lines": 5, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/ClientCloseTest.java", "insertions": 2, "deletions": 3}], "commitDateTime": "2019-03-15 14:08:33", "spoonStatsSkippedReason": ""}], "title": "CLOSE_WAIT socket status forever after terminating websocket client side", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 2, "INS": 2, "UPD": 1, "MOV": 1, "TOT": 6, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 4, "insertions": 4, "gitFilesChange": 1, "deletions": 0}, "closed": "2019-03-22 16:37:16", "statsSkippedReason": "", "body": "Hi,\r\njetty 9.4.15 - After websocket  client app is abnormally terminated  (kill -9, OOM, core dump, etc...) , the websocket stays in CLOSE_WAIT forever. \r\nAs result of this, the onWebSocketClose hook is never executed, leaving the server side unaware of the lost client. I am almost positive this is not websocket exclusive issue but it is very easy to reproduce it with websockets.\r\nthis can be encountered in 9.4.15 only; After rolling back to 9.4.14 issue is gone/ So, this is new one.", "changesInPackagesGIT": ["jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common"], "changesInPackagesSPOON": ["org.eclipse.jetty.websocket.common.io.AbstractWebSocketConnection.onFillable()", "org.eclipse.jetty.websocket.tests.CloseTrackingEndpoint.assertReceivedCloseEvent(int,org.hamcrest.Matcher,org.hamcrest.Matcher)"], "ttf": 18.00027777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/3422"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "stuban", "filteredCommits": [], "commits": {"dbf0d2e6becc09ef0310616bd9045e4f97130cab": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "32025570c557e8ae45531ecd8833de892bfbe327": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2019-03-04 10:24:25", "commitsDetails": [{"commitMessage": "Issue #3421 Duplicate session set-cookie (#3426)\n\nAdded Response.replaceCookieuse replaceCookie in sessions\r\nunit tests\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>", "commitParents": ["11755539e8a8dee6b0fb128cc33f5f902b0f24ac"], "commitHash": "dbf0d2e6becc09ef0310616bd9045e4f97130cab", "commitSpoonAstDiffStats": [{"spoonFilePath": "ResponseTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ResponseTest.testReplaceHttpCookie()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "SessionRenewTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.session.SessionRenewTest.TestServlet.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "SessionHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.session.SessionHandler.doScope(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "CreationTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.session.CreationTest.TestServlet.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.server.session.CreationTest.testSessionCreateInvalidateCreate()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "Response.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Response.addSetRFC6265Cookie(java.lang.String,java.lang.String,java.lang.String,java.lang.String,long,boolean,boolean)", "DEL": 0, "INS": 1, "UPD": 2, "MOV": 11, "TOT": 14}, {"spoonMethodName": "org.eclipse.jetty.server.Response.replaceCookie(org.eclipse.jetty.http.HttpCookie)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.Response.addSetRFC2965Cookie(java.lang.String,java.lang.String,java.lang.String,java.lang.String,long,java.lang.String,boolean,boolean,int)", "DEL": 0, "INS": 1, "UPD": 2, "MOV": 12, "TOT": 15}]}, {"spoonFilePath": "Request.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Request.getSession(boolean)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.Request.changeSessionId()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "LoginAuthenticator.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.security.authentication.LoginAuthenticator.renewSession(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "dbf0d2e6becc09ef0310616bd9045e4f97130cab tags/jetty-9.4.16.v20190411~61", "commitUser": "janbartel", "authoredDateTime": "2019-03-06 14:44:48", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 7, "filePath": "tests/test-sessions/test-sessions-common/src/test/java/org/eclipse/jetty/server/session/SessionRenewTest.java", "insertions": 1, "deletions": 6}, {"lines": 37, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ResponseTest.java", "insertions": 35, "deletions": 2}, {"lines": 136, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Response.java", "insertions": 119, "deletions": 17}, {"lines": 2, "filePath": "jetty-security/src/main/java/org/eclipse/jetty/security/authentication/LoginAuthenticator.java", "insertions": 1, "deletions": 1}, {"lines": 71, "filePath": "tests/test-sessions/test-sessions-common/src/test/java/org/eclipse/jetty/server/session/CreationTest.java", "insertions": 65, "deletions": 6}, {"lines": 2, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/session/SessionHandler.java", "insertions": 1, "deletions": 1}, {"lines": 4, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Request.java", "insertions": 2, "deletions": 2}], "commitDateTime": "2019-03-06 14:44:48", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "32025570c557e8ae45531ecd8833de892bfbe327", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "Duplicate JSESSIONID sent when invalidating new session", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2019-03-06 04:03:39", "statsSkippedReason": "", "body": "When invalidating a (new) session and immediately creating a new when jetty 9.4.x sends the JSESSION cookie twice which confuses some browsers.\r\nThis seems to be a regression as it did behave differently in 9.2.x\r\nExample code:\r\n```java\r\n@WebServlet(\"/sessionTest\")\r\npublic class SessionServlet extends HttpServlet {\r\n\r\n    @Override\r\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\r\n        resp.setContentType(\"text/html;charset=UTF-8\");\r\n        PrintWriter out = resp.getWriter(); \r\n        out.println(\"<html lang=\\\"en\\\">\" + \"<head><title>Servlet Hello</title></head>\");\r\n        out.println(\"<body><h2>Hello World!</h2>\");\r\n        out.println(\"<p>Current sessionID:\" + (req.getSession(false) == null ? \"empty\" : req.getSession(false).getId())+\"</p>\");\r\n        out.println(\"<p><form method=\\\"post\\\"><input type=\\\"submit\\\" value=\\\"New Session please\\\">\");\r\n        out.println(\"</form>\");\r\n        out.println(\"</body></html>\");\r\n        \r\n    }\r\n    \r\n    @Override\r\n    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\r\n        req.getSession().invalidate();\r\n        req.getSession().setAttribute(\"testKey\", \"testValue\");\r\n        resp.setContentType(\"text/html;charset=UTF-8\");\r\n        PrintWriter out = resp.getWriter();\r\n        out.println(\"<html lang=\\\"en\\\">\" + \"<head><title>Servlet Hello</title></head>\");\r\n        out.println(\"<body><h2>Tried to create a new session</h2>\");\r\n        out.println(\"<p>Current sessionID:\" + (req.getSession(false) == null ? \"empty\" : req.getSession(false).getId())+\"</p>\");\r\n        out.println(\"<p><form method=\\\"post\\\"><input type=\\\"submit\\\" value=\\\"New Session please\\\">\");\r\n        out.println(\"</form>\");\r\n        out.println(\"</body></html>\");\r\n     \r\n    }\r\n}\r\n```\r\n\r\nOutput from 9.2.26:\r\n```\r\nPOST /test/sessionTest HTTP/1.1\r\nHost: localhost:8080\r\nUser-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:65.0) Gecko/20100101 Firefox/65.0\r\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8\r\nAccept-Language: en,en-US;q=0.95,de;q=0.89,fr-FR;q=0.84,nl;q=0.79,de-DE;q=0.74,en-GB;q=0.68,de-US;q=0.63,en-EN;q=0.58,fr;q=0.53,nl-NL;q=0.47,de-formal;q=0.42,en-CA;q=0.37,en-AU;q=0.32,es-ES;q=0.26,es;q=0.21,en-DE;q=0.16,eng-US;q=0.11,eng;q=0.05\r\nAccept-Encoding: gzip, deflate\r\nReferer: http://localhost:8080/test/sessionTest\r\nContent-Type: application/x-www-form-urlencoded\r\nContent-Length: 0\r\nDNT: 1\r\nConnection: keep-alive\r\nUpgrade-Insecure-Requests: 1\r\n\r\nHTTP/1.1 200 OK\r\nDate: Mon, 04 Mar 2019 09:46:26 GMT\r\nExpires: Thu, 01 Jan 1970 00:00:00 GMT\r\nSet-Cookie: JSESSIONID=1fo6m5u049z11sb9uxibgs2ja;Path=/test\r\nContent-Type: text/html;charset=UTF-8\r\nContent-Length: 249\r\nServer: Jetty(9.2.26.v20180806)\r\n\r\n<html lang=\"en\"><head><title>Servlet Hello</title></head>\r\n<body><h2>Tried to create a new session</h2>\r\n<p>Current sessionID:1fo6m5u049z11sb9uxibgs2ja</p>\r\n<p><form method=\"post\"><input type=\"submit\" value=\"New Session please\">\r\n</form>\r\n</body></html>\r\n```\r\n\r\nOutput from 9.4.15:\r\n```\r\nPOST /test/sessionTest HTTP/1.1\r\nHost: localhost:8080\r\nUser-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:65.0) Gecko/20100101 Firefox/65.0\r\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8\r\nAccept-Language: en,en-US;q=0.95,de;q=0.89,fr-FR;q=0.84,nl;q=0.79,de-DE;q=0.74,en-GB;q=0.68,de-US;q=0.63,en-EN;q=0.58,fr;q=0.53,nl-NL;q=0.47,de-formal;q=0.42,en-CA;q=0.37,en-AU;q=0.32,es-ES;q=0.26,es;q=0.21,en-DE;q=0.16,eng-US;q=0.11,eng;q=0.05\r\nAccept-Encoding: gzip, deflate\r\nReferer: http://localhost:8080/test/sessionTest\r\nContent-Type: application/x-www-form-urlencoded\r\nContent-Length: 0\r\nDNT: 1\r\nConnection: keep-alive\r\nUpgrade-Insecure-Requests: 1\r\n\r\nHTTP/1.1 200 OK\r\nDate: Mon, 04 Mar 2019 09:48:22 GMT\r\nSet-Cookie: JSESSIONID=node094iqyxoe2z8h7ojaybhzk30g0.node0;Path=/test\r\nExpires: Thu, 01 Jan 1970 00:00:00 GMT\r\nSet-Cookie: JSESSIONID=node0tyopewww0zyps62cnw8h33ti1.node0;Path=/test\r\nContent-Type: text/html;charset=utf-8\r\nContent-Length: 254\r\nServer: Jetty(9.4.15.v20190215)\r\n\r\n<html lang=\"en\"><head><title>Servlet Hello</title></head>\r\n<body><h2>Tried to create a new session</h2>\r\n<p>Current sessionID:node0tyopewww0zyps62cnw8h33ti1</p>\r\n<p><form method=\"post\"><input type=\"submit\" value=\"New Session please\">\r\n</form>\r\n</body></html>\r\n```\r\n\r\nThis only happens when there has been no session before so the line req.getSession().invalidate(); creates and invalidates a session in one go.", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 1.0002777777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/3421"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "janbartel", "filteredCommits": [], "commits": {"add79c0b54438ce7fe9f98c2528b839505beb64a": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "adc2d43536282a53ec4785bc5eae6a77f54c3c46": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2019-02-06 05:45:56", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "add79c0b54438ce7fe9f98c2528b839505beb64a", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3329 Hazelcast remove session fails (#3330)\n\nSigned-off-by: Jan Bartel <janb@webtide.com>", "commitParents": ["d22ec03acc1db5c846a2fb611a24cfd8c782f9d8"], "commitHash": "adc2d43536282a53ec4785bc5eae6a77f54c3c46", "commitSpoonAstDiffStats": [{"spoonFilePath": "HazelcastSessionDataStore.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.hazelcast.session.HazelcastSessionDataStore.delete(java.lang.String)", "DEL": 1, "INS": 2, "UPD": 1, "MOV": 2, "TOT": 6}]}], "nameRev": "adc2d43536282a53ec4785bc5eae6a77f54c3c46 tags/jetty-9.4.15.v20190215~16", "commitUser": "janbartel", "authoredDateTime": "2019-02-06 17:18:40", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 8, "filePath": "jetty-hazelcast/src/main/java/org/eclipse/jetty/hazelcast/session/HazelcastSessionDataStore.java", "insertions": 7, "deletions": 1}], "commitDateTime": "2019-02-06 17:18:40", "spoonStatsSkippedReason": ""}], "title": "Hazelcast delete expired session fails in deserialize", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2019-02-06 22:25:10", "statsSkippedReason": "", "body": "See https://github.com/eclhttps://github.com/eclipse/jetty.project/blob/jetty-9.4.x/jetty-hazelcast/src/main/java/org/eclipse/jetty/hazelcast/session/HazelcastSessionDataStore.java#L77\r\n\r\nThe call to hazelcast.remove(key) will deserialize the SessionData object, but the call does not set up the appropriate context classloader to use. It needs to either do something similar to the AbstractSessionDataStore.load(id) method (ie pass a runnable to the Context which annoints the thread with the right Classloader), or it can use the hazelcast.delete(key) method, which does the delete but does not deserialize and pass back the SessionData object.  As the SessionData object is not used, it would be more efficient to use the hazelcast.delete(key) method instead.", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 0.0002777777777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/3329"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 11, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "sbordet", "filteredCommits": ["ee1a7f613f94888e6c60afcdcfb478cf6a542893", "8dba440317f7f8f2313d7a709946f38b9425d98c"], "commits": {"8ebeb0cdd9332e2b1e47d4f8bdf600c5f6dae4d7": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "931387e8c5d032514479f6e50da180fbd8ecccb5": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "ee1a7f613f94888e6c60afcdcfb478cf6a542893": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "c558ca0b652d16facc01b42aca2faa2733a8ccd0": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "1be26b326bf9e83167d5bc7743ca232cfb413b1e": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "c68cb3149f0a16f2185991710b133f04455af2a2": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "8a38966fb7f6d5076ca04d1409427fb89d4ee88c": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "389589b27081192d04a7bb49c9fd902fae35ab3a": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "909b783a39c9a943b04214063394f80bac17bff4": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "17c21d63d4d54de3c993f68199a6bf15ee1fd1d5": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "f8ec36e75d78ce4863d6f83e72adb665d9fd0ce2": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "170cfb353bd983c1c31ad056e0aa91c83c63f695": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "8dba440317f7f8f2313d7a709946f38b9425d98c": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "438b536ce2255a8fd3a107843e364c79755607ab": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2019-01-21 11:14:38", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "909b783a39c9a943b04214063394f80bac17bff4", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "931387e8c5d032514479f6e50da180fbd8ecccb5", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3279 - Merge of FrameFlusher fix\n\nSigned-off-by: Joakim Erdfelt <joakim@erdfelt.com>\n", "commitParents": ["38263971903bfce13cc78e3c287a556356f62086"], "commitHash": "ee1a7f613f94888e6c60afcdcfb478cf6a542893", "commitSpoonAstDiffStats": [{"spoonFilePath": "FrameFlusherTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.core.internal.FrameFlusherTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "FrameFlusher.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.core.internal.FrameFlusher.enqueue(org.eclipse.jetty.websocket.core.Frame,org.eclipse.jetty.util.Callback,boolean)", "DEL": 3, "INS": 8, "UPD": 5, "MOV": 6, "TOT": 22}, {"spoonMethodName": "org.eclipse.jetty.websocket.core.internal.FrameFlusher", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "MockEndpoint.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.core.internal.MockEndpoint", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "ee1a7f613f94888e6c60afcdcfb478cf6a542893 tags/jetty-10.0.0.alpha1~170", "commitUser": "joakime", "authoredDateTime": "2019-02-21 13:56:32", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 46, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/internal/FrameFlusher.java", "insertions": 36, "deletions": 10}, {"lines": 178, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/internal/MockEndpoint.java", "insertions": 178, "deletions": 0}, {"lines": 180, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/internal/FrameFlusherTest.java", "insertions": 180, "deletions": 0}], "commitDateTime": "2019-02-21 13:56:32", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "c558ca0b652d16facc01b42aca2faa2733a8ccd0", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "1be26b326bf9e83167d5bc7743ca232cfb413b1e", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #3315 from eclipse/jetty-9.4.x-issue-3279-websocket-flush-hang\n\nIssue #3279 - WebSocket May Hang Forever", "commitParents": ["f88f856673f2e8768042c973481ad78d41910e22", "8dba440317f7f8f2313d7a709946f38b9425d98c"], "commitHash": "c68cb3149f0a16f2185991710b133f04455af2a2", "commitSpoonAstDiffStats": [], "nameRev": "c68cb3149f0a16f2185991710b133f04455af2a2 tags/jetty-9.4.15.v20190215~1", "commitUser": "joakime", "authoredDateTime": "2019-02-15 10:08:01", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 6, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/AbstractJsrRemote.java", "insertions": 4, "deletions": 2}, {"lines": 2, "filePath": "jetty-websocket/websocket-client/src/test/resources/jetty-logging.properties", "insertions": 1, "deletions": 1}, {"lines": 133, "filePath": "jetty-websocket/websocket-client/src/test/java/org/eclipse/jetty/websocket/client/SlowClientTest.java", "insertions": 0, "deletions": 133}, {"lines": 7, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/test/BlockheadConnection.java", "insertions": 0, "deletions": 7}, {"lines": 8, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/ClosePayloadParserTest.java", "insertions": 3, "deletions": 5}, {"lines": 11, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/GeneratorParserRoundtripTest.java", "insertions": 4, "deletions": 7}, {"lines": 168, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/io/LocalWebSocketConnection.java", "insertions": 111, "deletions": 57}, {"lines": 483, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/ClientCloseTest.java", "insertions": 483, "deletions": 0}, {"lines": 18, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/extensions/compress/DeflateFrameExtensionTest.java", "insertions": 6, "deletions": 12}, {"lines": 160, "filePath": "jetty-websocket/websocket-client/src/test/java/org/eclipse/jetty/websocket/client/SlowServerTest.java", "insertions": 0, "deletions": 160}, {"lines": 134, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/CloseTrackingEndpoint.java", "insertions": 134, "deletions": 0}, {"lines": 53, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/test/IncomingFramesCapture.java", "insertions": 4, "deletions": 49}, {"lines": 2, "filePath": "jetty-websocket/{websocket-client/src/test/java/org/eclipse/jetty/websocket => jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests}/client/ClientWriteThread.java", "insertions": 1, "deletions": 1}, {"lines": 26, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/WebSocketSessionListener.java", "insertions": 26, "deletions": 0}, {"lines": 68, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/ContainerEndpoint.java", "insertions": 68, "deletions": 0}, {"lines": 4, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/extensions/IncomingFrames.java", "insertions": 1, "deletions": 3}, {"lines": 245, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/io/IOStateTest.java", "insertions": 0, "deletions": 245}, {"lines": 14, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/extensions/AbstractExtension.java", "insertions": 0, "deletions": 14}, {"lines": 14, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/samples/echo/ConfiguredEchoSocket.java", "insertions": 13, "deletions": 1}, {"lines": 2, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/Parser.java", "insertions": 2, "deletions": 0}, {"lines": 401, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/io/AbstractWebSocketConnection.java", "insertions": 208, "deletions": 193}, {"lines": 7, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/helper/RFCSocket.java", "insertions": 7, "deletions": 0}, {"lines": 631, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/io/IOState.java", "insertions": 0, "deletions": 631}, {"lines": 14, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/ab/TestABCase1_2.java", "insertions": 3, "deletions": 11}, {"lines": 17, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/ab/TestABCase2.java", "insertions": 6, "deletions": 11}, {"lines": 224, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/io/ConnectionState.java", "insertions": 224, "deletions": 0}, {"lines": 140, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/SlowServerTest.java", "insertions": 140, "deletions": 0}, {"lines": 17, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/OnPartialTest.java", "insertions": 9, "deletions": 8}, {"lines": 15, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/ab/TestABCase1_1.java", "insertions": 3, "deletions": 12}, {"lines": 52, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/WebSocketServerFactory.java", "insertions": 21, "deletions": 31}, {"lines": 7, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/events/JettyAnnotatedEventDriver.java", "insertions": 7, "deletions": 0}, {"lines": 24, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/scopes/WebSocketContainerScope.java", "insertions": 9, "deletions": 15}, {"lines": 673, "filePath": "jetty-websocket/websocket-client/src/test/java/org/eclipse/jetty/websocket/client/ClientCloseTest.java", "insertions": 0, "deletions": 673}, {"lines": 13, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/ab/TestABCase7_3.java", "insertions": 4, "deletions": 9}, {"lines": 130, "filePath": "jetty-websocket/websocket-client/src/test/java/org/eclipse/jetty/websocket/client/BadNetworkTest.java", "insertions": 0, "deletions": 130}, {"lines": 34, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/events/EventDriver.java", "insertions": 17, "deletions": 17}, {"lines": 76, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/AbstractCloseEndpoint.java", "insertions": 76, "deletions": 0}, {"lines": 6, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/extensions/DummyIncomingFrames.java", "insertions": 0, "deletions": 6}, {"lines": 21, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/resources/jetty-logging.properties", "insertions": 21, "deletions": 0}, {"lines": 17, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/WebSocketRemoteEndpoint.java", "insertions": 4, "deletions": 13}, {"lines": 96, "filePath": "jetty-websocket/websocket-client/src/test/java/org/eclipse/jetty/websocket/client/ServerWriteThread.java", "insertions": 0, "deletions": 96}, {"lines": 14, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/RFC6455ExamplesParserTest.java", "insertions": 3, "deletions": 11}, {"lines": 2, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/annotations/JsrCallable.java", "insertions": 1, "deletions": 1}, {"lines": 28, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/misbehaving/MisbehavingClassTest.java", "insertions": 19, "deletions": 9}, {"lines": 35, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/FastCloseEndpoint.java", "insertions": 35, "deletions": 0}, {"lines": 35, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/EchoSocket.java", "insertions": 35, "deletions": 0}, {"lines": 6, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/samples/echo/LargeEchoConfiguredSocket.java", "insertions": 6, "deletions": 0}, {"lines": 16, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/ParserTest.java", "insertions": 5, "deletions": 11}, {"lines": 167, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/ClientSessionsTest.java", "insertions": 167, "deletions": 0}, {"lines": 20, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/TextPayloadParserTest.java", "insertions": 7, "deletions": 13}, {"lines": 25, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/events/EventDriverTest.java", "insertions": 12, "deletions": 13}, {"lines": 376, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/ManyConnectionsCleanupTest.java", "insertions": 0, "deletions": 376}, {"lines": 6, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/io/FramePipes.java", "insertions": 0, "deletions": 6}, {"lines": 26, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/scopes/SimpleContainerScope.java", "insertions": 20, "deletions": 6}, {"lines": 60, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/events/AbstractEventDriver.java", "insertions": 6, "deletions": 54}, {"lines": 76, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/ClientOpenSessionTracker.java", "insertions": 76, "deletions": 0}, {"lines": 135, "filePath": "jetty-websocket/websocket-client/src/test/java/org/eclipse/jetty/websocket/client/SessionTest.java", "insertions": 0, "deletions": 135}, {"lines": 1, "filePath": "jetty-websocket/websocket-server/src/test/resources/jetty-logging.properties", "insertions": 1, "deletions": 0}, {"lines": 10, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/IdleTimeoutTest.java", "insertions": 5, "deletions": 5}, {"lines": 60, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/test/DummyConnection.java", "insertions": 47, "deletions": 13}, {"lines": 76, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/SlowServerEndpoint.java", "insertions": 76, "deletions": 0}, {"lines": 10, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/ab/ABSocket.java", "insertions": 10, "deletions": 0}, {"lines": 10, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/helper/SessionSocket.java", "insertions": 10, "deletions": 0}, {"lines": 7, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/extensions/identity/IdentityExtension.java", "insertions": 0, "deletions": 7}, {"lines": 37, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/test/BlockheadClient.java", "insertions": 24, "deletions": 13}, {"lines": 64, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/WebSocketProtocolTest.java", "insertions": 53, "deletions": 11}, {"lines": 4, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/WriteCallback.java", "insertions": 2, "deletions": 2}, {"lines": 24, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/ClientContainer.java", "insertions": 23, "deletions": 1}, {"lines": 141, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/SlowClientTest.java", "insertions": 141, "deletions": 0}, {"lines": 1, "filePath": "tests/test-integration/src/test/resources/jetty-logging.properties", "insertions": 1, "deletions": 0}, {"lines": 8, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/PingPayloadParserTest.java", "insertions": 3, "deletions": 5}, {"lines": 36, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/FastFailEndpoint.java", "insertions": 36, "deletions": 0}, {"lines": 7, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/samples/echo/LargeEchoAnnotatedSocket.java", "insertions": 7, "deletions": 0}, {"lines": 12, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/WebSocketUpgradeRequest.java", "insertions": 11, "deletions": 1}, {"lines": 13, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/SessionTrackingTest.java", "insertions": 6, "deletions": 7}, {"lines": 102, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/LogicalConnection.java", "insertions": 74, "deletions": 28}, {"lines": 77, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/ServerCloseCreator.java", "insertions": 77, "deletions": 0}, {"lines": 4, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/SimpleServletServer.java", "insertions": 0, "deletions": 4}, {"lines": 200, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/BadNetworkTest.java", "insertions": 200, "deletions": 0}, {"lines": 10, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/examples/echo/BigEchoSocket.java", "insertions": 10, "deletions": 0}, {"lines": 44, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/io/DisconnectCallback.java", "insertions": 44, "deletions": 0}, {"lines": 277, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/ServerCloseTest.java", "insertions": 277, "deletions": 0}, {"lines": 89, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/io/ConnectionStateTest.java", "insertions": 89, "deletions": 0}, {"lines": 76, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/io/FrameFlusher.java", "insertions": 55, "deletions": 21}, {"lines": 349, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/WebSocketSession.java", "insertions": 104, "deletions": 245}, {"lines": 1, "filePath": "jetty-websocket/pom.xml", "insertions": 1, "deletions": 0}, {"lines": 81, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/io/FrameFlusherTest.java", "insertions": 61, "deletions": 20}, {"lines": 22, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/WebSocketRemoteEndpointTest.java", "insertions": 11, "deletions": 11}, {"lines": 61, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/ConnectionState.java", "insertions": 0, "deletions": 61}, {"lines": 412, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/WebSocketCloseTest.java", "insertions": 0, "deletions": 412}, {"lines": 21, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/scopes/DelegatedContainerScope.java", "insertions": 14, "deletions": 7}, {"lines": 8, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/extensions/ExtensionStack.java", "insertions": 0, "deletions": 8}, {"lines": 70, "filePath": "jetty-websocket/jetty-websocket-tests/pom.xml", "insertions": 70, "deletions": 0}, {"lines": 24, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/StatusCode.java", "insertions": 23, "deletions": 1}, {"lines": 30, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/WebSocketClient.java", "insertions": 27, "deletions": 3}], "commitDateTime": "2019-02-15 10:08:01", "spoonStatsSkippedReason": "tooManyFiles"}, {"commitMessage": "", "commitParents": [], "commitHash": "8a38966fb7f6d5076ca04d1409427fb89d4ee88c", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "389589b27081192d04a7bb49c9fd902fae35ab3a", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "8ebeb0cdd9332e2b1e47d4f8bdf600c5f6dae4d7", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "17c21d63d4d54de3c993f68199a6bf15ee1fd1d5", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "f8ec36e75d78ce4863d6f83e72adb665d9fd0ce2", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "170cfb353bd983c1c31ad056e0aa91c83c63f695", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3279 - WebSocket Close Refactoring\n\n+ FrameFlusher \"close\" frames are detected during\n  enqueue and sets the state properly for failing\n  other frames after it\n+ Moving away from Blockhead(Client|Server) to using actual implementations\n+ Moved tests to /jetty-websocket-tests/ to be able to use actual impl\n  for both sides of testcase (client and server)\n+ Corrected FrameFlusher terminate/close to not fail the close frame\n  itself, but only frames that arrive AFTER the close frame.\n+ Moving WebSocketCloseTest to jetty-websocket-tests to avoid\n  using BlockheadClient / BlockheadServer in testing\n+ Cleanup of unnecessary modifiers on interface\n+ Logging error if @OnWebSocketError is undeclared\n+ IOState removed\n+ New ConnectionState tracks connection basics in a simpler\n  method then IOState did.\n+ No tracking of Remote close initiated (not needed)\n+ IncomingFrames.incomingError() removed\n+ Session delegates to Connection for all state changes\n+ Errors can be communicated to application multiple times\n+ Close is only communicated once\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["f88f856673f2e8768042c973481ad78d41910e22"], "commitHash": "8dba440317f7f8f2313d7a709946f38b9425d98c", "commitSpoonAstDiffStats": [], "nameRev": "8dba440317f7f8f2313d7a709946f38b9425d98c tags/jetty-9.4.15.v20190215~1^2", "commitUser": "joakime", "authoredDateTime": "2019-01-29 11:45:06", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 6, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/AbstractJsrRemote.java", "insertions": 4, "deletions": 2}, {"lines": 2, "filePath": "jetty-websocket/websocket-client/src/test/resources/jetty-logging.properties", "insertions": 1, "deletions": 1}, {"lines": 133, "filePath": "jetty-websocket/websocket-client/src/test/java/org/eclipse/jetty/websocket/client/SlowClientTest.java", "insertions": 0, "deletions": 133}, {"lines": 7, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/test/BlockheadConnection.java", "insertions": 0, "deletions": 7}, {"lines": 8, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/ClosePayloadParserTest.java", "insertions": 3, "deletions": 5}, {"lines": 11, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/GeneratorParserRoundtripTest.java", "insertions": 4, "deletions": 7}, {"lines": 168, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/io/LocalWebSocketConnection.java", "insertions": 111, "deletions": 57}, {"lines": 483, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/ClientCloseTest.java", "insertions": 483, "deletions": 0}, {"lines": 18, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/extensions/compress/DeflateFrameExtensionTest.java", "insertions": 6, "deletions": 12}, {"lines": 160, "filePath": "jetty-websocket/websocket-client/src/test/java/org/eclipse/jetty/websocket/client/SlowServerTest.java", "insertions": 0, "deletions": 160}, {"lines": 134, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/CloseTrackingEndpoint.java", "insertions": 134, "deletions": 0}, {"lines": 53, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/test/IncomingFramesCapture.java", "insertions": 4, "deletions": 49}, {"lines": 2, "filePath": "jetty-websocket/{websocket-client/src/test/java/org/eclipse/jetty/websocket => jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests}/client/ClientWriteThread.java", "insertions": 1, "deletions": 1}, {"lines": 26, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/WebSocketSessionListener.java", "insertions": 26, "deletions": 0}, {"lines": 68, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/ContainerEndpoint.java", "insertions": 68, "deletions": 0}, {"lines": 4, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/extensions/IncomingFrames.java", "insertions": 1, "deletions": 3}, {"lines": 245, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/io/IOStateTest.java", "insertions": 0, "deletions": 245}, {"lines": 14, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/extensions/AbstractExtension.java", "insertions": 0, "deletions": 14}, {"lines": 14, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/samples/echo/ConfiguredEchoSocket.java", "insertions": 13, "deletions": 1}, {"lines": 2, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/Parser.java", "insertions": 2, "deletions": 0}, {"lines": 401, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/io/AbstractWebSocketConnection.java", "insertions": 208, "deletions": 193}, {"lines": 7, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/helper/RFCSocket.java", "insertions": 7, "deletions": 0}, {"lines": 631, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/io/IOState.java", "insertions": 0, "deletions": 631}, {"lines": 14, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/ab/TestABCase1_2.java", "insertions": 3, "deletions": 11}, {"lines": 17, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/ab/TestABCase2.java", "insertions": 6, "deletions": 11}, {"lines": 224, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/io/ConnectionState.java", "insertions": 224, "deletions": 0}, {"lines": 140, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/SlowServerTest.java", "insertions": 140, "deletions": 0}, {"lines": 17, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/OnPartialTest.java", "insertions": 9, "deletions": 8}, {"lines": 15, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/ab/TestABCase1_1.java", "insertions": 3, "deletions": 12}, {"lines": 52, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/WebSocketServerFactory.java", "insertions": 21, "deletions": 31}, {"lines": 7, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/events/JettyAnnotatedEventDriver.java", "insertions": 7, "deletions": 0}, {"lines": 24, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/scopes/WebSocketContainerScope.java", "insertions": 9, "deletions": 15}, {"lines": 673, "filePath": "jetty-websocket/websocket-client/src/test/java/org/eclipse/jetty/websocket/client/ClientCloseTest.java", "insertions": 0, "deletions": 673}, {"lines": 13, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/ab/TestABCase7_3.java", "insertions": 4, "deletions": 9}, {"lines": 130, "filePath": "jetty-websocket/websocket-client/src/test/java/org/eclipse/jetty/websocket/client/BadNetworkTest.java", "insertions": 0, "deletions": 130}, {"lines": 34, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/events/EventDriver.java", "insertions": 17, "deletions": 17}, {"lines": 76, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/AbstractCloseEndpoint.java", "insertions": 76, "deletions": 0}, {"lines": 6, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/extensions/DummyIncomingFrames.java", "insertions": 0, "deletions": 6}, {"lines": 21, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/resources/jetty-logging.properties", "insertions": 21, "deletions": 0}, {"lines": 17, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/WebSocketRemoteEndpoint.java", "insertions": 4, "deletions": 13}, {"lines": 96, "filePath": "jetty-websocket/websocket-client/src/test/java/org/eclipse/jetty/websocket/client/ServerWriteThread.java", "insertions": 0, "deletions": 96}, {"lines": 14, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/RFC6455ExamplesParserTest.java", "insertions": 3, "deletions": 11}, {"lines": 2, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/annotations/JsrCallable.java", "insertions": 1, "deletions": 1}, {"lines": 28, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/misbehaving/MisbehavingClassTest.java", "insertions": 19, "deletions": 9}, {"lines": 35, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/FastCloseEndpoint.java", "insertions": 35, "deletions": 0}, {"lines": 35, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/EchoSocket.java", "insertions": 35, "deletions": 0}, {"lines": 6, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/samples/echo/LargeEchoConfiguredSocket.java", "insertions": 6, "deletions": 0}, {"lines": 16, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/ParserTest.java", "insertions": 5, "deletions": 11}, {"lines": 167, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/ClientSessionsTest.java", "insertions": 167, "deletions": 0}, {"lines": 20, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/TextPayloadParserTest.java", "insertions": 7, "deletions": 13}, {"lines": 25, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/events/EventDriverTest.java", "insertions": 12, "deletions": 13}, {"lines": 376, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/ManyConnectionsCleanupTest.java", "insertions": 0, "deletions": 376}, {"lines": 6, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/io/FramePipes.java", "insertions": 0, "deletions": 6}, {"lines": 26, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/scopes/SimpleContainerScope.java", "insertions": 20, "deletions": 6}, {"lines": 60, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/events/AbstractEventDriver.java", "insertions": 6, "deletions": 54}, {"lines": 76, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/ClientOpenSessionTracker.java", "insertions": 76, "deletions": 0}, {"lines": 135, "filePath": "jetty-websocket/websocket-client/src/test/java/org/eclipse/jetty/websocket/client/SessionTest.java", "insertions": 0, "deletions": 135}, {"lines": 1, "filePath": "jetty-websocket/websocket-server/src/test/resources/jetty-logging.properties", "insertions": 1, "deletions": 0}, {"lines": 10, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/IdleTimeoutTest.java", "insertions": 5, "deletions": 5}, {"lines": 60, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/test/DummyConnection.java", "insertions": 47, "deletions": 13}, {"lines": 76, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/SlowServerEndpoint.java", "insertions": 76, "deletions": 0}, {"lines": 10, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/ab/ABSocket.java", "insertions": 10, "deletions": 0}, {"lines": 10, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/helper/SessionSocket.java", "insertions": 10, "deletions": 0}, {"lines": 7, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/extensions/identity/IdentityExtension.java", "insertions": 0, "deletions": 7}, {"lines": 37, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/test/BlockheadClient.java", "insertions": 24, "deletions": 13}, {"lines": 64, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/WebSocketProtocolTest.java", "insertions": 53, "deletions": 11}, {"lines": 4, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/WriteCallback.java", "insertions": 2, "deletions": 2}, {"lines": 24, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/ClientContainer.java", "insertions": 23, "deletions": 1}, {"lines": 141, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/SlowClientTest.java", "insertions": 141, "deletions": 0}, {"lines": 1, "filePath": "tests/test-integration/src/test/resources/jetty-logging.properties", "insertions": 1, "deletions": 0}, {"lines": 8, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/PingPayloadParserTest.java", "insertions": 3, "deletions": 5}, {"lines": 36, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/FastFailEndpoint.java", "insertions": 36, "deletions": 0}, {"lines": 7, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/samples/echo/LargeEchoAnnotatedSocket.java", "insertions": 7, "deletions": 0}, {"lines": 12, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/WebSocketUpgradeRequest.java", "insertions": 11, "deletions": 1}, {"lines": 13, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/SessionTrackingTest.java", "insertions": 6, "deletions": 7}, {"lines": 102, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/LogicalConnection.java", "insertions": 74, "deletions": 28}, {"lines": 77, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/ServerCloseCreator.java", "insertions": 77, "deletions": 0}, {"lines": 4, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/SimpleServletServer.java", "insertions": 0, "deletions": 4}, {"lines": 200, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/BadNetworkTest.java", "insertions": 200, "deletions": 0}, {"lines": 10, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/examples/echo/BigEchoSocket.java", "insertions": 10, "deletions": 0}, {"lines": 44, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/io/DisconnectCallback.java", "insertions": 44, "deletions": 0}, {"lines": 277, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/ServerCloseTest.java", "insertions": 277, "deletions": 0}, {"lines": 89, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/io/ConnectionStateTest.java", "insertions": 89, "deletions": 0}, {"lines": 76, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/io/FrameFlusher.java", "insertions": 55, "deletions": 21}, {"lines": 349, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/WebSocketSession.java", "insertions": 104, "deletions": 245}, {"lines": 1, "filePath": "jetty-websocket/pom.xml", "insertions": 1, "deletions": 0}, {"lines": 81, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/io/FrameFlusherTest.java", "insertions": 61, "deletions": 20}, {"lines": 22, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/WebSocketRemoteEndpointTest.java", "insertions": 11, "deletions": 11}, {"lines": 61, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/ConnectionState.java", "insertions": 0, "deletions": 61}, {"lines": 412, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/WebSocketCloseTest.java", "insertions": 0, "deletions": 412}, {"lines": 21, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/scopes/DelegatedContainerScope.java", "insertions": 14, "deletions": 7}, {"lines": 8, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/extensions/ExtensionStack.java", "insertions": 0, "deletions": 8}, {"lines": 70, "filePath": "jetty-websocket/jetty-websocket-tests/pom.xml", "insertions": 70, "deletions": 0}, {"lines": 24, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/StatusCode.java", "insertions": 23, "deletions": 1}, {"lines": 30, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/WebSocketClient.java", "insertions": 27, "deletions": 3}], "commitDateTime": "2019-02-15 10:07:24", "spoonStatsSkippedReason": "tooManyFiles"}, {"commitMessage": "", "commitParents": [], "commitHash": "438b536ce2255a8fd3a107843e364c79755607ab", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "WebSocket write may hang forever", "spoonStatsSummary": {"spoonMethodsChanged": 3, "DEL": 3.0, "INS": 10.0, "UPD": 5.0, "MOV": 6.0, "TOT": 24.0, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 2344.0, "insertions": 963.0, "gitFilesChange": 31, "deletions": 1381.0}, "closed": "2019-02-17 14:39:12", "statsSkippedReason": "", "body": "* [T1] Client receives a message from server, it happens to be a message too large for the client configuration.\r\n* [T1] WebSocket endpoint's `onError()` is called, notifying the application.\r\n* [T1] `WebSocketSession.close()` is called to generate the `CLOSE` frame to send to the server.\r\n* [T1] The `CLOSE` frame is enqueued and flushed by the `FrameFlusher`, but its callback is not completed yet.\r\n* [T2] Application writes a message with callback and enqueues it in the `FrameFlusher`. This is possible because `FrameFlusher.enqueue()` does not stop accepting frame after a `CLOSE` frame (which may be ok - see below).\r\n* [T2] Tries to `iterate()` the flusher, but it's a noop because the flusher is currently processing.\r\n* [T2] Now waiting for the callback to be completed.\r\n* [T1] Runs the `CLOSE` frame callback `OnCloseLocalCallback`.\r\n* [T1] `FrameFlusher.succeedEntries()` is called, which calls `FrameFlusher.terminate()` which terminates the `FrameFlusher` with still one entry in the queue. Log line proof:\r\n`2019-01-21 11:10:04,541 WebSocketClient@1650955365-785 [DEBUG][io.FrameFlusher] Terminating Flusher@b665ba2[queueSize=1,aggregateSize=-1,terminated=java.nio.channels.ClosedChannelException]`\r\nNote `queueSize=1`. At this point, `FrameFlusher.closed=true`.\r\n* [T1] There is still an attempt to flush the `FrameFlusher`, but the logic in `FrameFlusher.process()` does this:\r\n`if (closed) return Action.SUCCEEDED;`\r\nThat is, there is no attempt to drain the queue.\r\n* [T1] T1 returns but the entry in the queue is never notified, possibly hanging T2 forever.\r\n\r\nThe combination of `FrameFlusher.enqueue()` not checking for `CLOSE` frame, coupled with `FrameFlusher.terminate()` not draining the queue, or alternatively `FrameFlusher.process()` not draining the queue if closed make the events above possible.", "changesInPackagesGIT": ["jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client", "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api", "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356", "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core", "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server", "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common"], "changesInPackagesSPOON": ["org.eclipse.jetty.websocket.core.internal.FrameFlusher.enqueue(org.eclipse.jetty.websocket.core.Frame,org.eclipse.jetty.util.Callback,boolean)", "org.eclipse.jetty.websocket.core.internal.FrameFlusher", "org.eclipse.jetty.websocket.core.internal.MockEndpoint"], "ttf": 27.00027777777778, "numCommits": 2, "url": "https://github.com/eclipse/jetty.project/issues/3279"}, {"labels": ["Bug", "Build", "Help Wanted", "Java 11"], "closed": "2019-05-23 19:41:14", "body": "Like many other projects (Tomcat, MongoDB, etc.) compiling with JDK 9+ with release 8 produces incorrect bytecode for these ByteBuffer methods:\r\n\r\nposition(int)\r\nlimit(int)\r\nmark\u200b()\r\nreset\u200b()\r\nclear()\r\nflip()\r\nrewind\u200b()\r\n\r\nRunning a Jetty compiled with JDK 9+ with release 8 in a JDK 8 JVM will produce a `NoSuchMethodError`.\r\n\r\nThe solution is to cast the `ByteBuffer` to `Buffer` when calling those methods:\r\n\r\n```java\r\n((Buffer)byteBuffer).position(0);\r\n```", "commits": {}, "title": "NoSuchMethodError: java.nio.ByteBuffer.limit(I)Ljava/nio/ByteBuffer", "created": "2019-01-08 16:39:00", "user": "sbordet", "url": "https://github.com/eclipse/jetty.project/issues/3244", "commitsDetails": [], "ttf": 135.00027777777777}, {"labels": ["Bug"], "closed": "2018-12-19 21:49:56", "body": "As discussed in the thread at https://www.eclipse.org/lists/jetty-users/msg08704.html, we're seeing sessions created with `_requests` always set to 1 with Jetty 9.4.14. Since `_requests_` never goes to 0, these sessions are never expired, which leads to a memory leak.\r\n\r\nThis was initially seen with a JSP error page for 503 status codes from the Jetty QoSFilter. However, the code at https://github.com/carey/jetty-sessions-bug reproduces this without filters or JSPs by calling `req.startAsync().dispatch()`, calling `sendError(404)` from the async request, then calling `req.getSession()` from the servlet configured as the `<error-page>` for that status.", "commits": {}, "title": "Sessions leaking with error pages from async dispatch", "created": "2018-12-16 09:01:30", "user": "carey", "url": "https://github.com/eclipse/jetty.project/issues/3203", "commitsDetails": [], "ttf": 3.000277777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 2, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "jvanheesch", "filteredCommits": [], "commits": {"4183884aa964906b26ae7d8be1207ee115b6845a": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "8fc7384c4fb05bb2440f5e6560a9b86c20ccd856": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "6af567a4b99ebd48df43715f55b2a046269eac86": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2018-11-25 16:45:20", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "4183884aa964906b26ae7d8be1207ee115b6845a", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "8fc7384c4fb05bb2440f5e6560a9b86c20ccd856", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Handle ServletContainerInitializer from WEB-INF/classes #3146 (#3158)\n\n* Handle the case where a ServletContainerInitializer comes from\r\nWEB-INF/classes\r\n\r\nSigned-off-by: Jan Bartel <janb@webtide.com>", "commitParents": ["2497cf6febc0420707544a76dbe0aeee95adb17c"], "commitHash": "6af567a4b99ebd48df43715f55b2a046269eac86", "commitSpoonAstDiffStats": [{"spoonFilePath": "AnnotationConfiguration.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.annotations.AnnotationConfiguration.getNonExcludedInitializers(org.eclipse.jetty.webapp.WebAppContext)", "DEL": 2, "INS": 3, "UPD": 0, "MOV": 7, "TOT": 12}, {"spoonMethodName": "org.eclipse.jetty.annotations.AnnotationConfiguration.isFromWebInfClasses(org.eclipse.jetty.webapp.WebAppContext,org.eclipse.jetty.util.resource.Resource)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.annotations.AnnotationConfiguration.isFromContainerClassPath(org.eclipse.jetty.webapp.WebAppContext,javax.servlet.ServletContainerInitializer)", "DEL": 1, "INS": 6, "UPD": 1, "MOV": 3, "TOT": 11}, {"spoonMethodName": "org.eclipse.jetty.annotations.AnnotationConfiguration.isFromExcludedJar(org.eclipse.jetty.webapp.WebAppContext,javax.servlet.ServletContainerInitializer,org.eclipse.jetty.util.resource.Resource)", "DEL": 0, "INS": 2, "UPD": 1, "MOV": 2, "TOT": 5}]}, {"spoonFilePath": "TestAnnotationConfiguration.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.annotations.TestAnnotationConfiguration.testSCIControl()", "DEL": 12, "INS": 6, "UPD": 12, "MOV": 63, "TOT": 93}]}, {"spoonFilePath": "WebInfClassServletContainerInitializer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.annotations.ServerServletContainerInitializer", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "6af567a4b99ebd48df43715f55b2a046269eac86 tags/jetty-9.4.15.v20190215~63", "commitUser": "janbartel", "authoredDateTime": "2018-12-11 06:33:44", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-annotations/src/test/resources/META-INF/services/javax.servlet.ServletContainerInitializer", "insertions": 1, "deletions": 1}, {"lines": 109, "filePath": "jetty-annotations/src/main/java/org/eclipse/jetty/annotations/AnnotationConfiguration.java", "insertions": 88, "deletions": 21}, {"lines": 0, "filePath": "jetty-annotations/src/test/jar/test-sci-for-container-path.jar", "insertions": 0, "deletions": 0}, {"lines": 198, "filePath": "jetty-annotations/src/test/java/org/eclipse/jetty/annotations/TestAnnotationConfiguration.java", "insertions": 140, "deletions": 58}, {"lines": 4, "filePath": "jetty-annotations/src/test/java/org/eclipse/jetty/annotations/{ServerServletContainerInitializer.java => WebInfClassServletContainerInitializer.java}", "insertions": 2, "deletions": 2}, {"lines": 0, "filePath": "jetty-annotations/src/test/jar/test-sci-with-ordering.jar", "insertions": 0, "deletions": 0}], "commitDateTime": "2018-12-11 06:33:44", "spoonStatsSkippedReason": ""}], "title": "ServletContainerInitializer from war WEB-INF/classes not executing", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2018-12-11 05:37:56", "statsSkippedReason": "", "body": "I extracted the issue in a small self-contained application (jetty-maven-plugin, version 9.4.14.v20181114):\r\nhttps://github.com/jvanheesch/servlet-container-initializer-web-fragment-bug\r\n\r\nThe code includes:\r\n- 1 webapp module (war), with a barebones web.xml, that depends on 2 jars (defined in the same multi-module project): external-jar and another-external-jar.\r\n- The war and 2 jar artifacts all define an implementation of ServletContainerInitializer, declared in resources/META-INF/services/javax.servlet.ServletContainerInitializer.\r\n- another-external-jar contains a web-fragment.xml, which I copied from log4j-web-2.10.0.jar.\r\n\r\nThe issue:\r\n- If web-fragment.xml from another-external-jar declares no `<ordering>` element, then all three ServletContainerInitializer are called on container startup (mvn jetty:run from webapp directory).\r\n- If the `<ordering>` element gets added to this web-fragment.xml, then SomeServletContainerInitializer.onStartup() is no longer called on container startup.\r\n\r\nI noticed the same behavior in tomcat 9.0.12, but since the behavior surprised me, I was wondering if this behavior is either correct, incorrect, undefined, or something else.\r\n", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 15.000277777777777, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/3146"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 2}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["a703fc626b0ec8d71e9938f214660f3e30e86002"], "commits": {"1d9e7b7613055e8f775b0dfe7e1d1ab2d518512f": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "020a9803942532513b3363cfcc9a086ae6d1e70a": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "a703fc626b0ec8d71e9938f214660f3e30e86002": {"commitUser": "joakime", "commitGHEventType": "closed"}}, "created": "2018-11-23 15:17:10", "commitsDetails": [{"commitMessage": "Merge pull request #3199 from lachlan-roberts/jetty-10.0.x-3139-npe-websocket-sci\n\nIssue #3139 - NPE in WebSocketContainerInitializer for jetty10", "commitParents": ["4d191d8a31dfb67deaef5f448d33f8337fe81bbe", "a8a5e505791d8e1403b7e8653c9bfb2c60125d23"], "commitHash": "1d9e7b7613055e8f775b0dfe7e1d1ab2d518512f", "commitSpoonAstDiffStats": [{"spoonFilePath": "WebSocketJsrServer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.embedded.WebSocketJsrServer.main(java.lang.String[])", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 2, "TOT": 2}]}, {"spoonFilePath": "JavaxWebSocketServerContainer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.javax.server.JavaxWebSocketServerContainer.ensureContainer(javax.servlet.ServletContext)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "1d9e7b7613055e8f775b0dfe7e1d1ab2d518512f tags/jetty-10.0.0.alpha1~211", "commitUser": "gregw", "authoredDateTime": "2019-01-29 10:56:59", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 5, "filePath": "examples/embedded/src/main/java/org/eclipse/jetty/embedded/WebSocketJsrServer.java", "insertions": 2, "deletions": 3}, {"lines": 6, "filePath": "jetty-websocket/javax-websocket-server/src/main/java/org/eclipse/jetty/websocket/javax/server/JavaxWebSocketServerContainer.java", "insertions": 3, "deletions": 3}], "commitDateTime": "2019-01-29 10:56:59", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #3155 from eclipse/jetty-9.4.x-issue-3139-npe-websocket-sci\n\nFixes #3139 - NPE in WebSocketContainerInitializer", "commitParents": ["da3d69261cd23d2826db799ba45ce551dc73881e", "a703fc626b0ec8d71e9938f214660f3e30e86002"], "commitHash": "020a9803942532513b3363cfcc9a086ae6d1e70a", "commitSpoonAstDiffStats": [{"spoonFilePath": "WebSocketJsrServer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.embedded.WebSocketJsrServer.main(java.lang.String[])", "DEL": 0, "INS": 3, "UPD": 1, "MOV": 1, "TOT": 5}]}, {"spoonFilePath": "ConfiguratorTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.ConfiguratorTest.startServer()", "DEL": 0, "INS": 3, "UPD": 1, "MOV": 1, "TOT": 5}]}, {"spoonFilePath": "WebSocketServerContainerInitializer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer.configureContext(org.eclipse.jetty.servlet.ServletContextHandler)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}], "nameRev": "020a9803942532513b3363cfcc9a086ae6d1e70a tags/jetty-9.4.15.v20190215~44", "commitUser": "joakime", "authoredDateTime": "2019-01-08 15:57:35", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 9, "filePath": "examples/embedded/src/main/java/org/eclipse/jetty/embedded/WebSocketJsrServer.java", "insertions": 8, "deletions": 1}, {"lines": 9, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/ConfiguratorTest.java", "insertions": 8, "deletions": 1}, {"lines": 2, "filePath": "jetty-websocket/javax-websocket-server-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/server/deploy/WebSocketServerContainerInitializer.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2019-01-08 15:57:35", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #3139 - NPE in WebSocketContainerInitializer\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["8c4ee8496feb11fc0a0992834c60c3c6fdd1efe9"], "commitHash": "a703fc626b0ec8d71e9938f214660f3e30e86002", "commitSpoonAstDiffStats": [{"spoonFilePath": "WebSocketJsrServer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.embedded.WebSocketJsrServer.main(java.lang.String[])", "DEL": 0, "INS": 3, "UPD": 1, "MOV": 1, "TOT": 5}]}, {"spoonFilePath": "ConfiguratorTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.ConfiguratorTest.startServer()", "DEL": 0, "INS": 3, "UPD": 1, "MOV": 1, "TOT": 5}]}, {"spoonFilePath": "WebSocketServerContainerInitializer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer.configureContext(org.eclipse.jetty.servlet.ServletContextHandler)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}], "nameRev": "a703fc626b0ec8d71e9938f214660f3e30e86002 tags/jetty-9.4.15.v20190215~44^2", "commitUser": "joakime", "authoredDateTime": "2018-11-27 14:42:30", "commitGHEventType": "closed", "commitGitStats": [{"lines": 9, "filePath": "examples/embedded/src/main/java/org/eclipse/jetty/embedded/WebSocketJsrServer.java", "insertions": 8, "deletions": 1}, {"lines": 9, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/ConfiguratorTest.java", "insertions": 8, "deletions": 1}, {"lines": 2, "filePath": "jetty-websocket/javax-websocket-server-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/server/deploy/WebSocketServerContainerInitializer.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2018-11-27 14:42:30", "spoonStatsSkippedReason": ""}], "title": "NPE on WebSocketServerContainerInitializer.configureContext(ServletContextHandler)", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 0, "INS": 4, "UPD": 1, "MOV": 2, "TOT": 7, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 11, "insertions": 9, "gitFilesChange": 2, "deletions": 2}, "closed": "2019-01-08 21:57:37", "statsSkippedReason": "", "body": "If the `ServletContextHandler` isn't added to the `Server` yet, and you use `WebSocketServerContainerInitializer.configureContext(context)`  like this ...\r\n\r\n``` java\r\n        Server server = new Server(8080);\r\n\r\n        HandlerList handlers = new HandlerList();\r\n\r\n        ServletContextHandler context = new ServletContextHandler(\r\n                ServletContextHandler.SESSIONS);\r\n        context.setContextPath(\"/\");\r\n        handlers.addHandler(context);\r\n\r\n        // Enable javax.websocket configuration for the context\r\n        ServerContainer wsContainer = WebSocketServerContainerInitializer.configureContext(context);\r\n\r\n        // Add your websockets to the container\r\n        wsContainer.addEndpoint(EchoJsrSocket.class);\r\n\r\n        handlers.addHandler(new DefaultHandler());\r\n\r\n        server.setHandler(handlers);\r\n        server.start();\r\n```\r\n\r\nYou'll get a NPE\r\n\r\n```\r\nException in thread \"main\" java.lang.NullPointerException\r\n\tat org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer.configureContext(WebSocketServerContainerInitializer.java:148)\r\n\tat org.eclipse.jetty.embedded.WebSocketJsrServer.main(WebSocketJsrServer.java:63)\r\n```", "changesInPackagesGIT": ["examples/embedded/src/main/java/org/eclipse/jetty/embedded", "jetty-websocket/javax-websocket-server-impl/src/main/java/org/eclipse/jetty/websocket/jsr356"], "changesInPackagesSPOON": ["org.eclipse.jetty.embedded.WebSocketJsrServer.main(java.lang.String[])", "org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer.configureContext(org.eclipse.jetty.servlet.ServletContextHandler)"], "ttf": 46.000277777777775, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/3139"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "sayap", "filteredCommits": ["910665a55a4ef16ff6cd55a1c1799c20ff76db65", "b6b7d2e730a584f837fd06f80965bc8b1231dc89"], "commits": {"b6b7d2e730a584f837fd06f80965bc8b1231dc89": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "910665a55a4ef16ff6cd55a1c1799c20ff76db65": {"commitUser": "sbordet", "commitGHEventType": "closed"}}, "created": "2018-11-21 12:05:15", "commitsDetails": [{"commitMessage": "Issue #3133 - Logging of key.readyOps() can throw unchecked CancelledKeyException.\n\nChanged logging to level IGNORE, since it's too verbose when debugging.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["ebd676df5df4d96fc0b4c40b0a409a7c5c6441ba"], "commitHash": "b6b7d2e730a584f837fd06f80965bc8b1231dc89", "commitSpoonAstDiffStats": [{"spoonFilePath": "ManagedSelector.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.safeReadyOps(java.nio.channels.SelectionKey)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.safeInterestOps(java.nio.channels.SelectionKey)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 4}]}], "nameRev": "b6b7d2e730a584f837fd06f80965bc8b1231dc89 tags/jetty-9.4.16.v20190411~32", "commitUser": "sbordet", "authoredDateTime": "2019-04-04 12:18:16", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 6, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ManagedSelector.java", "insertions": 2, "deletions": 4}], "commitDateTime": "2019-04-04 12:18:16", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #3133 - Logging of key.readyOps() can throw unchecked CancelledKeyException.\n\nIntroduced safeInterestOps() and safeReadyOps() to catch exceptions\nthey may throw and using them in relevant places to fix the issue.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["041e8fd9cfab4c6719c8a210f2570a07d9f7eb65"], "commitHash": "910665a55a4ef16ff6cd55a1c1799c20ff76db65", "commitSpoonAstDiffStats": [{"spoonFilePath": "ManagedSelector.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.safeReadyOps(java.nio.channels.SelectionKey)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.safeInterestOps(java.nio.channels.SelectionKey)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.DumpKeys.update(java.nio.channels.Selector)", "DEL": 4, "INS": 1, "UPD": 2, "MOV": 4, "TOT": 11}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.SelectorProducer.processSelected()", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 0, "TOT": 3}]}, {"spoonFilePath": "ChannelEndPoint.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.ChannelEndPoint.toEndPointString()", "DEL": 3, "INS": 1, "UPD": 2, "MOV": 1, "TOT": 7}]}], "nameRev": "910665a55a4ef16ff6cd55a1c1799c20ff76db65 tags/jetty-9.4.15.v20190215~85", "commitUser": "sbordet", "authoredDateTime": "2018-11-21 17:37:16", "commitGHEventType": "closed", "commitGitStats": [{"lines": 45, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ManagedSelector.java", "insertions": 32, "deletions": 13}, {"lines": 23, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ChannelEndPoint.java", "insertions": 6, "deletions": 17}], "commitDateTime": "2018-11-21 17:37:37", "spoonStatsSkippedReason": ""}], "title": "Logging of `key.readyOps()` can throw unchecked `CancelledKeyException`", "spoonStatsSummary": {"spoonMethodsChanged": 5, "DEL": 9, "INS": 6, "UPD": 7, "MOV": 9, "TOT": 31, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 74, "insertions": 40, "gitFilesChange": 2, "deletions": 34}, "closed": "2018-11-21 16:37:46", "statsSkippedReason": "", "body": "We are getting stack trace like this intermittently when using HttpClient with jetty-9.4.11.v20180605:\r\n```\r\njava.nio.channels.CancelledKeyException\r\n    at sun.nio.ch.SelectionKeyImpl.ensureValid(SelectionKeyImpl.java:73)\r\n    at sun.nio.ch.SelectionKeyImpl.readyOps(SelectionKeyImpl.java:87)\r\n    at org.eclipse.jetty.io.ManagedSelector$SelectorProducer.processSelected(ManagedSelector.java:443)\r\n    at org.eclipse.jetty.io.ManagedSelector$SelectorProducer.produce(ManagedSelector.java:325)\r\n    at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.produceTask(EatWhatYouKill.java:357)\r\n    at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:181)\r\n    at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:168)\r\n    at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:126)\r\n    at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:366)\r\n    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:762)\r\n    at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:680)\r\n    at java.lang.Thread.run(Thread.java:748)\r\n```\r\n\r\nEvery time this happens, a `ManagedSelector` instance would become \"stuck\", with more and more updates accumulated.\r\n\r\nEventually, once all `ManagedSelector` instances become stuck, any request would fail with:\r\n```\r\njava.net.SocketTimeoutException: Connect Timeout\r\n        at org.eclipse.jetty.io.ManagedSelector$Connect.run(ManagedSelector.java:719)\r\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)\r\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n        at java.lang.Thread.run(Thread.java:748)\r\n```\r\n\r\nThe change to log `key.readyOps()` was introduced in commit f4b82755ad0, and we do log `org.eclipse.jetty` at the debug level. Should we just move the log statement into the try-block?", "changesInPackagesGIT": ["jetty-io/src/main/java/org/eclipse/jetty/io"], "changesInPackagesSPOON": ["org.eclipse.jetty.io.ManagedSelector.safeReadyOps(java.nio.channels.SelectionKey)", "org.eclipse.jetty.io.ManagedSelector.safeInterestOps(java.nio.channels.SelectionKey)", "org.eclipse.jetty.io.ChannelEndPoint.toEndPointString()", "org.eclipse.jetty.io.ManagedSelector.DumpKeys.update(java.nio.channels.Selector)", "org.eclipse.jetty.io.ManagedSelector.SelectorProducer.processSelected()"], "ttf": 0.0002777777777777778, "numCommits": 2, "url": "https://github.com/eclipse/jetty.project/issues/3133"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 7, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug", "Performance"], "user": "wufei2016", "filteredCommits": ["041e8fd9cfab4c6719c8a210f2570a07d9f7eb65"], "commits": {"804fb664d0bb630bfd5b195130dbeed23c06ee46": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "e08addfab0195636afc620c2fc3330fbd42ecd06": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "b20d9344728509698eb2e20c659ec9c98945f94e": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "5b99a393c2c6ed6e079a082baf71334d95b05a34": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "8c4ee8496feb11fc0a0992834c60c3c6fdd1efe9": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "e72b2e8521711ece1810a465997213c4a54a51d5": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "3cde24c7ec3943159b0b1263027b4636298de3dd": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "041e8fd9cfab4c6719c8a210f2570a07d9f7eb65": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "a16ade28d75d570ee41f75b3408814d67a8c6400": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2018-10-30 01:22:07", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "804fb664d0bb630bfd5b195130dbeed23c06ee46", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "e08addfab0195636afc620c2fc3330fbd42ecd06", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "b20d9344728509698eb2e20c659ec9c98945f94e", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "5b99a393c2c6ed6e079a082baf71334d95b05a34", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Jetty 9.4.x 3038 ssl connection leak (#3121)\n\nIssue #3038 - SSL connection leak.\r\n\r\nFixed SSL spin caused when fill had NEED_WRAP, but a flush/wrap\r\nproduced 0 bytes and stayed in NEED_WRAP\r\n\r\nRemoved check of isInputShutdown prior to filling that allowed EOF to\r\novertake data already read.\r\n\r\nFix for leak by shutting down output in HttpConnection if\r\nfilled -1 and the HttpChannelState was no longer processing\r\ncurrent request.\r\n\r\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n", "commitParents": ["10622f34552d4a6cce4376fe3d873e27daa65c7e"], "commitHash": "8c4ee8496feb11fc0a0992834c60c3c6fdd1efe9", "commitSpoonAstDiffStats": [], "nameRev": "8c4ee8496feb11fc0a0992834c60c3c6fdd1efe9 tags/jetty-9.4.15.v20190215~88", "commitUser": "gregw", "authoredDateTime": "2018-11-20 13:53:42", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 1, "filePath": "jetty-server/src/test/resources/jetty-logging.properties", "insertions": 0, "deletions": 1}, {"lines": 108, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/HttpServerTestBase.java", "insertions": 97, "deletions": 11}, {"lines": 26, "filePath": "jetty-http/src/test/java/org/eclipse/jetty/http/HttpTester.java", "insertions": 20, "deletions": 6}, {"lines": 49, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/HttpServerTestFixture.java", "insertions": 49, "deletions": 0}, {"lines": 162, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ssl/SSLReadEOFAfterResponseTest.java", "insertions": 162, "deletions": 0}, {"lines": 21, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/HttpParser.java", "insertions": 11, "deletions": 10}, {"lines": 17, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/http/HttpReceiverOverHTTP.java", "insertions": 17, "deletions": 0}, {"lines": 255, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ssl/SslConnection.java", "insertions": 132, "deletions": 123}, {"lines": 36, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpConnection.java", "insertions": 19, "deletions": 17}], "commitDateTime": "2018-11-20 13:53:42", "spoonStatsSkippedReason": "tooManyChanges"}, {"commitMessage": "", "commitParents": [], "commitHash": "e72b2e8521711ece1810a465997213c4a54a51d5", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "3cde24c7ec3943159b0b1263027b4636298de3dd", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3038 SSL Connection Leak\n\nDon't call  handleContentMessage after content call if the content call\nreturns true.\n\nThis is a slight bending of the parser contract to work around the current\nclient interpretation that a true return will prevent other events from being\ndelivered.\n\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\n", "commitParents": ["b191d69bb07f7e5c4c52f9187009a9f72c8bb611"], "commitHash": "041e8fd9cfab4c6719c8a210f2570a07d9f7eb65", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpReceiverOverHTTP.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.http.HttpReceiverOverHTTP.content(java.nio.ByteBuffer).1.succeeded()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.http.HttpReceiverOverHTTP.messageComplete()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.http.HttpReceiverOverHTTP.ContentState", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.http.HttpReceiverOverHTTP.content(java.nio.ByteBuffer)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.http.HttpReceiverOverHTTP", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpParser.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.HttpParser.parseContent(java.nio.ByteBuffer)", "DEL": 4, "INS": 2, "UPD": 0, "MOV": 3, "TOT": 9}]}], "nameRev": "041e8fd9cfab4c6719c8a210f2570a07d9f7eb65 tags/jetty-9.4.15.v20190215~86", "commitUser": "gregw", "authoredDateTime": "2018-11-21 17:28:40", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 8, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/HttpParser.java", "insertions": 3, "deletions": 5}, {"lines": 17, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/http/HttpReceiverOverHTTP.java", "insertions": 0, "deletions": 17}], "commitDateTime": "2018-11-21 17:28:40", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "a16ade28d75d570ee41f75b3408814d67a8c6400", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "sbordet", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "SSL Connection Leak", "spoonStatsSummary": {"spoonMethodsChanged": 6, "DEL": 9.0, "INS": 2.0, "UPD": 0.0, "MOV": 3.0, "TOT": 14.0, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 25.0, "insertions": 3.0, "gitFilesChange": 2, "deletions": 22.0}, "closed": "2018-11-21 16:30:48", "statsSkippedReason": "", "body": "We recently upgraded to 9.4.9.v20180320, we observed that there are about 200000 unclosed jetty connections for running 12 hours and the cpu usage become higher and higher during the test.\r\nAfter a few days investigation, I think this should be a regression for \"HTTP Close #1832 #2338\". It works without any issue if we switch to 9.4.8.v20180619\r\n", "changesInPackagesGIT": ["jetty-client/src/main/java/org/eclipse/jetty/client/http", "jetty-http/src/main/java/org/eclipse/jetty/http"], "changesInPackagesSPOON": ["org.eclipse.jetty.client.http.HttpReceiverOverHTTP.content(java.nio.ByteBuffer).1.succeeded()", "org.eclipse.jetty.client.http.HttpReceiverOverHTTP.messageComplete()", "org.eclipse.jetty.http.HttpParser.parseContent(java.nio.ByteBuffer)", "org.eclipse.jetty.client.http.HttpReceiverOverHTTP.ContentState", "org.eclipse.jetty.client.http.HttpReceiverOverHTTP.content(java.nio.ByteBuffer)", "org.eclipse.jetty.client.http.HttpReceiverOverHTTP"], "ttf": 22.00027777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/3038"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["fb06b821725a1c58b00cf927a0a70df6fb3a82d1"], "commits": {"a2d65d1bb41e219668935567c4873c6f4a82b12d": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "898560bec57d94e90c595d4f44d1744ab2cf13b9": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "fb06b821725a1c58b00cf927a0a70df6fb3a82d1": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2018-10-24 21:12:48", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "a2d65d1bb41e219668935567c4873c6f4a82b12d", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3030 Enforce Content-Encoding check only on parameter extraction. (#3031)\n\n", "commitParents": ["8500e806ecffb699546cf530725b30e4651f4d55"], "commitHash": "898560bec57d94e90c595d4f44d1744ab2cf13b9", "commitSpoonAstDiffStats": [{"spoonFilePath": "RequestTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.RequestTest.RequestHandler.doNonErrorHandle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testConnectionClose()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testSessionAfterRedirect().23", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testCookies().28.check(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 10, "UPD": 0, "MOV": 0, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testMultiPartFormDataReadInputThenParams().20", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testContent().14", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testPartialRead().21", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testHashDOSKeys().30", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testHostPort().13", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testHashDOSSize()", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.test8859EncodedForm()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testSessionAfterRedirect().23.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testCookieLeak().29", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testQueryAfterRead().22", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testEncodedForm()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testHostPort()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testEncodedFormExtraMethod()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testConnectionClose().26", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testEncodedFormExtraMethod().17", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testConnectionClose().25", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testCookies()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testBadCookies()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 12, "TOT": 14}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testBadCookies().28.check(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 4, "MOV": 10, "TOT": 14}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testEncodedParamExtraction()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testCookieLeak()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testUTF8EncodedForm()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testEncodedFormUnknownMethod()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testContent()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testContentTypeEncoding()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testHashDOSKeys()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testEncodedFormUnknownMethod().16", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testContentTypeEncoding().12", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testEncodedForm().15", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testCookies().27", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testPartialInput().24", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testUTF8EncodedForm().19", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.test8859EncodedForm().18", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "Request.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Request.extractContentParameters()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 4, "TOT": 6}]}], "nameRev": "898560bec57d94e90c595d4f44d1744ab2cf13b9 tags/jetty-9.4.13.v20181111~34", "commitUser": "gregw", "authoredDateTime": "2018-10-26 06:44:40", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 11, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Request.java", "insertions": 5, "deletions": 6}, {"lines": 34, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/RequestTest.java", "insertions": 31, "deletions": 3}], "commitDateTime": "2018-10-26 06:44:40", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #3030 ignore identity content encoding during parameter extraction\n\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\n", "commitParents": ["6af567a4b99ebd48df43715f55b2a046269eac86"], "commitHash": "fb06b821725a1c58b00cf927a0a70df6fb3a82d1", "commitSpoonAstDiffStats": [{"spoonFilePath": "RequestTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testSessionAfterRedirect().24", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testConnectionClose()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testCookieLeak().30", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testQueryAfterRead().23", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testPartialInput().25", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testHashDOSSize()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.test8859EncodedForm()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testHostPort().14", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testEncodedFormUnknownMethod().17", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testEncodedForm()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testHostPort()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testUTF8EncodedForm().20", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testPartialRead().22", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testConnectionClose().26", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testCookies()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testBadCookies()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 11, "TOT": 13}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testSessionAfterRedirect().24.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testEncodedFormExtraMethod()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testMultiPartFormDataReadInputThenParams().21", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testBadCookies().29.check(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 5, "MOV": 8, "TOT": 13}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testUTF8EncodedForm()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testEncodedFormUnknownMethod()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testContent()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testContentTypeEncoding().13", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testContentTypeEncoding()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testConnectionClose().27", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testContent().15", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testEncodedNotParams().12.check(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 3, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testHashDOSKeys()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testEncodedNotParams()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testCookieLeak()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testEncodedFormExtraMethod().18", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testCookies().27.check(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 7, "UPD": 0, "MOV": 0, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testHashDOSSize().32.check(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testEncodedForm().16", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.test8859EncodedForm().19", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "Request.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Request.extractContentParameters()", "DEL": 1, "INS": 4, "UPD": 1, "MOV": 5, "TOT": 11}]}], "nameRev": "fb06b821725a1c58b00cf927a0a70df6fb3a82d1 tags/jetty-9.4.15.v20190215~62", "commitUser": "gregw", "authoredDateTime": "2018-12-13 13:42:08", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 9, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Request.java", "insertions": 7, "deletions": 2}, {"lines": 28, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/RequestTest.java", "insertions": 19, "deletions": 9}], "commitDateTime": "2018-12-13 13:42:08", "spoonStatsSkippedReason": ""}], "title": "Enforce Content-Encoding check only on parameter extraction", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 1.0, "INS": 4.0, "UPD": 1.0, "MOV": 5.0, "TOT": 11.0, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 9.0, "insertions": 7.0, "gitFilesChange": 1, "deletions": 2.0}, "closed": "2018-10-29 13:50:59", "statsSkippedReason": "", "body": "If a request arrives with the headers ....\r\n\r\n```\r\nPOST /api/upload?filter=foo HTTP/1.1\r\nContent-Encoding: gzip\r\nContent-Type: application/octet-stream\r\n...\r\n```\r\n\r\nAnd someone uses `HttpServletRequest.getParameterMap()`, then the request will fail, even though the request body content would never have been decoded anyway.\r\nWe should make sure the `Content-Encoding` check is only performed if the `Content-Type` is one of the types that would be processed for body parameters (or parts)", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.Request.extractContentParameters()"], "ttf": 4.000277777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/3030"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug", "Build"], "user": "zmeggyesi", "filteredCommits": ["a10c84c40a8d89e69a2576d148d6cb93014ece99"], "commits": {"a10c84c40a8d89e69a2576d148d6cb93014ece99": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2018-10-19 04:13:15", "commitsDetails": [{"commitMessage": "Issue #3001 - making test more resilient to environments without UTF-8 filesystem support\n", "commitParents": ["3490add2a96e683c96693fa3c91c3c31c3ca66d1"], "commitHash": "a10c84c40a8d89e69a2576d148d6cb93014ece99", "commitSpoonAstDiffStats": [{"spoonFilePath": "FileSystemResourceTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.FileSystemResourceTest.testUtf8Dir(java.lang.Class)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 3}]}], "nameRev": "a10c84c40a8d89e69a2576d148d6cb93014ece99 tags/jetty-9.4.13.v20181111~47", "commitUser": "joakime", "authoredDateTime": "2018-10-19 10:20:10", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 19, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/resource/FileSystemResourceTest.java", "insertions": 16, "deletions": 3}], "commitDateTime": "2018-10-19 10:20:10", "spoonStatsSkippedReason": ""}], "title": "Test failures when locale is not set", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0, "insertions": 0, "gitFilesChange": 0, "deletions": 0}, "closed": "2018-10-19 15:21:07", "statsSkippedReason": "", "body": "As asked in issue #2941 I'm reporting test failures when build is run in an environment without an explicit locale setting:\r\n```\r\nzmeggyesi@build-runner:~$ locale\r\nLANG=\r\nLANGUAGE=\r\nLC_CTYPE=\"POSIX\"\r\nLC_NUMERIC=\"POSIX\"\r\nLC_TIME=\"POSIX\"\r\nLC_COLLATE=\"POSIX\"\r\nLC_MONETARY=\"POSIX\"\r\nLC_MESSAGES=\"POSIX\"\r\nLC_PAPER=\"POSIX\"\r\nLC_NAME=\"POSIX\"\r\nLC_ADDRESS=\"POSIX\"\r\nLC_TELEPHONE=\"POSIX\"\r\nLC_MEASUREMENT=\"POSIX\"\r\nLC_IDENTIFICATION=\"POSIX\"\r\nLC_ALL=\r\n```\r\nLog file of build process: [jetty-install.log](https://github.com/eclipse/jetty.project/files/2494452/jetty-install.log)\r\nAs it is somewhat expected, `FileSystemResourceTest.testUtf8Dir` fails when the system locale is not UTF8-capable. With a UTF8 locale set, the build fails at a later point (`NeedWantClientAuthTest.testNeedClientAuthWithoutAuth`) - [jetty-install-locale.log](https://github.com/eclipse/jetty.project/files/2494468/jetty-install-locale.log)", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 0.0002777777777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/3001"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "martin-g", "filteredCommits": [], "commits": {"1cb3ef684c031a8dd3ed6006f34111c77ea56ec1": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2018-09-28 21:22:59", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "1cb3ef684c031a8dd3ed6006f34111c77ea56ec1", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "NullPointerException when BufferingResponseListener#onContent() receives empty content.", "spoonStatsSummary": {}, "closed": "2018-10-02 05:44:09", "statsSkippedReason": "", "body": "After upgrade from 9.4.11 to 9.4.12 I get a NPE:\r\n\r\n```\r\nCaused by: java.lang.NullPointerException\r\n\tat org.eclipse.jetty.util.BufferUtil.flipToFill(BufferUtil.java:180)\r\n\tat org.eclipse.jetty.util.BufferUtil.append(BufferUtil.java:417)\r\n\tat org.eclipse.jetty.client.util.BufferingResponseListener.onContent(BufferingResponseListener.java:127)\r\n    ...\r\n```\r\n\r\nThe problem is at https://github.com/eclipse/jetty.project/blob/c3ca4b7ee9d979e6d2e975bff521e4b3746c0c62/jetty-client/src/main/java/org/eclipse/jetty/client/util/BufferingResponseListener.java#L119 where `length` is 0 in my case and `buffer` is still `null`.\r\nThe condition (`if (0 > 0)`) doesn't pass and because of this https://github.com/eclipse/jetty.project/blob/c3ca4b7ee9d979e6d2e975bff521e4b3746c0c62/jetty-client/src/main/java/org/eclipse/jetty/client/util/BufferingResponseListener.java#L127 is executed with `buffer` still being `null`.", "ttf": 3.000277777777778, "url": "https://github.com/eclipse/jetty.project/issues/2938"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug", "Sponsored"], "user": "joakime", "filteredCommits": ["fe66e3d0cbda56c05c5e9de2cb7b59cd199c7096", "c3ca4b7ee9d979e6d2e975bff521e4b3746c0c62", "b3739f42b85fc1870ef520625185ebee591a61ef"], "commits": {"c3ca4b7ee9d979e6d2e975bff521e4b3746c0c62": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "fe66e3d0cbda56c05c5e9de2cb7b59cd199c7096": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "b91338f97dd9aa901c1801c174d1c0b90a445aa9": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "b3739f42b85fc1870ef520625185ebee591a61ef": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "57ef060325ba094b2d44264d1c0e2f24918d50b7": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2018-09-27 12:45:40", "commitsDetails": [{"commitMessage": "Issue #2936 Test bad message error page\n\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\n", "commitParents": ["283a296e29bb522c19519bbb51520e6d2b9ae4d5"], "commitHash": "c3ca4b7ee9d979e6d2e975bff521e4b3746c0c62", "commitSpoonAstDiffStats": [{"spoonFilePath": "ErrorPageTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.ErrorPageTest.AppServlet", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.ErrorPageTest.ErrorServlet.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.ErrorPageTest.init()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlet.ErrorPageTest.testBadMessage()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "c3ca4b7ee9d979e6d2e975bff521e4b3746c0c62 tags/jetty-9.4.13.v20181111~71", "commitUser": "gregw", "authoredDateTime": "2018-09-28 15:29:32", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 31, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/ErrorPageTest.java", "insertions": 31, "deletions": 0}], "commitDateTime": "2018-09-28 15:29:32", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #2936 - Allow Dispatcher.error() to work for BadMessageException\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["b3739f42b85fc1870ef520625185ebee591a61ef"], "commitHash": "fe66e3d0cbda56c05c5e9de2cb7b59cd199c7096", "commitSpoonAstDiffStats": [{"spoonFilePath": "ErrorPageTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.ErrorPageTest.testBadMessage()", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 0, "TOT": 3}]}, {"spoonFilePath": "Dispatcher.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Dispatcher.forward(javax.servlet.ServletRequest,javax.servlet.ServletResponse,javax.servlet.DispatcherType)", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 3, "TOT": 6}]}], "nameRev": "fe66e3d0cbda56c05c5e9de2cb7b59cd199c7096 tags/jetty-9.4.13.v20181111~66^2~1", "commitUser": "joakime", "authoredDateTime": "2018-10-01 10:43:57", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 6, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/ErrorPageTest.java", "insertions": 3, "deletions": 3}, {"lines": 21, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Dispatcher.java", "insertions": 19, "deletions": 2}], "commitDateTime": "2018-10-01 10:43:57", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #2943 from eclipse/jetty-9.4.x-issue-2936-badmessage-error-handling\n\nIssue #2936 - BadMessageException should be able to be handled by ErrorPageErrorHandler", "commitParents": ["0922644c5b843bce4a9e04fa1dcc6c1d91f6e325", "57ef060325ba094b2d44264d1c0e2f24918d50b7"], "commitHash": "b91338f97dd9aa901c1801c174d1c0b90a445aa9", "commitSpoonAstDiffStats": [{"spoonFilePath": "ErrorPageTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.ErrorPageTest.AppServlet.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 1, "INS": 4, "UPD": 1, "MOV": 6, "TOT": 12}, {"spoonMethodName": "org.eclipse.jetty.servlet.ErrorPageTest.testSendErrorClosedResponse()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.ErrorPageTest.AppServlet", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 2, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.servlet.ErrorPageTest.init()", "DEL": 0, "INS": 2, "UPD": 1, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.servlet.ErrorPageTest.testBadMessage()", "DEL": 4, "INS": 1, "UPD": 4, "MOV": 18, "TOT": 27}, {"spoonMethodName": "org.eclipse.jetty.servlet.ErrorPageTest.LongerAppServlet", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "Dispatcher.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Dispatcher.forward(javax.servlet.ServletRequest,javax.servlet.ServletResponse,javax.servlet.DispatcherType)", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 3, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.server.Dispatcher", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "b91338f97dd9aa901c1801c174d1c0b90a445aa9 tags/jetty-9.4.13.v20181111~66", "commitUser": "joakime", "authoredDateTime": "2018-10-02 16:54:46", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 39, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/ErrorPageTest.java", "insertions": 26, "deletions": 13}, {"lines": 28, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Dispatcher.java", "insertions": 26, "deletions": 2}], "commitDateTime": "2018-10-02 16:54:46", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #2936 - Improving testcase to replicate reported scenario as described\n", "commitParents": ["c3ca4b7ee9d979e6d2e975bff521e4b3746c0c62"], "commitHash": "b3739f42b85fc1870ef520625185ebee591a61ef", "commitSpoonAstDiffStats": [{"spoonFilePath": "ErrorPageTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.ErrorPageTest.AppServlet", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 2, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.servlet.ErrorPageTest.AppServlet.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 1, "INS": 4, "UPD": 1, "MOV": 6, "TOT": 12}, {"spoonMethodName": "org.eclipse.jetty.servlet.ErrorPageTest.init()", "DEL": 0, "INS": 2, "UPD": 1, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.servlet.ErrorPageTest.testBadMessage()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlet.ErrorPageTest.LongerAppServlet", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "b3739f42b85fc1870ef520625185ebee591a61ef tags/jetty-9.4.13.v20181111~66^2~2", "commitUser": "joakime", "authoredDateTime": "2018-09-30 07:01:06", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 19, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/ErrorPageTest.java", "insertions": 15, "deletions": 4}], "commitDateTime": "2018-09-30 07:01:06", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #2936 - Allow Dispatcher.error() to work for BadMessageException\n\n+ Applying fixes from review\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["fe66e3d0cbda56c05c5e9de2cb7b59cd199c7096"], "commitHash": "57ef060325ba094b2d44264d1c0e2f24918d50b7", "commitSpoonAstDiffStats": [{"spoonFilePath": "ErrorPageTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.ErrorPageTest.testSendErrorClosedResponse()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.ErrorPageTest.testBadMessage()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 10, "TOT": 11}]}, {"spoonFilePath": "Dispatcher.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Dispatcher.forward(javax.servlet.ServletRequest,javax.servlet.ServletResponse,javax.servlet.DispatcherType)", "DEL": 2, "INS": 2, "UPD": 2, "MOV": 2, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.server.Dispatcher", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "57ef060325ba094b2d44264d1c0e2f24918d50b7 tags/jetty-9.4.13.v20181111~66^2", "commitUser": "joakime", "authoredDateTime": "2018-10-02 08:39:05", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 24, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/ErrorPageTest.java", "insertions": 13, "deletions": 11}, {"lines": 11, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Dispatcher.java", "insertions": 9, "deletions": 2}], "commitDateTime": "2018-10-02 08:39:05", "spoonStatsSkippedReason": ""}], "title": "Error during initial RequestDispatch with bad request query results in failure for ErrorHandler to process", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 1, "INS": 2, "UPD": 0, "MOV": 3, "TOT": 6, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 21, "insertions": 19, "gitFilesChange": 1, "deletions": 2}, "closed": "2018-10-19 17:53:47", "statsSkippedReason": "", "body": "The chain of events ...\r\n\r\n1. Initial request with bad URI `/status?baa=%88%A4`\r\n2. Servlet at `/status` attempts to forward to correct status page: `getRequestDispatcher(`/longer-status.do`).forward(req,resp)`\r\n3. The `getRequestDispatcher()` call fails with BadMessageException(400) due to the bad query string.\r\n4. The ErrorPageErrorHandler is setup to forward `BadMessageException` to `/internalError` name servlet.\r\n5. This second forward within ErrorPageErrorHandler also triggers a BadMessageException(400)\r\n6. Results in a generic / simple error page response.\r\n\r\nTested on Jetty 9.4.12.v20180830.\r\nExample project demonstrating this behavior is at https://github.com/joakime/error-handling-bad-messages", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.Dispatcher.forward(javax.servlet.ServletRequest,javax.servlet.ServletResponse,javax.servlet.DispatcherType)"], "ttf": 22.00027777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/2936"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "joakime", "filteredCommits": [], "commits": {"0035cdd625fdd97240468fa02646f2c67f0dd087": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "a9566d429c218540f7a7ca74ed465ba9b47f6e39": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2018-09-15 22:04:01", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "0035cdd625fdd97240468fa02646f2c67f0dd087", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #2912 Remove Content-Length from inflated requests (#2915)\n\nIssue #2912 Remove Content-Length from inflated requests\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>", "commitParents": ["b225ebe756a2ec2aa7df60fe99d9d702bac7baa8"], "commitHash": "a9566d429c218540f7a7ca74ed465ba9b47f6e39", "commitSpoonAstDiffStats": [{"spoonFilePath": "GzipHandlerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.GzipHandlerTest.IncludeServlet.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.GzipHandlerTest.init()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.GzipHandlerTest.testGzipRequestChunked()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.GzipHandlerTest.EchoServlet.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.GzipHandlerTest.CheckFilter", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.GzipHandlerTest.DumpServlet.doPost(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.GzipHandlerTest.EchoServlet.doPost(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.GzipHandlerTest.MicroChunkedServlet.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.GzipHandlerTest.MicroServlet.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.GzipHandlerTest.TestServlet.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.GzipHandlerTest.TestServlet.doDelete(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.GzipHandlerTest.ForwardServlet.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "GzipHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.gzip.GzipHandler.getDeflater(org.eclipse.jetty.server.Request,long)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.handler.gzip.GzipHandler.getVaryField()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 3, "INS": 7, "UPD": 11, "MOV": 18, "TOT": 39}, {"spoonMethodName": "org.eclipse.jetty.server.handler.gzip.GzipHandler", "DEL": 0, "INS": 1, "UPD": 4, "MOV": 0, "TOT": 5}]}], "nameRev": "a9566d429c218540f7a7ca74ed465ba9b47f6e39 tags/jetty-9.4.13.v20181111~76", "commitUser": "gregw", "authoredDateTime": "2018-09-21 07:44:53", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 62, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/GzipHandlerTest.java", "insertions": 60, "deletions": 2}, {"lines": 53, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/gzip/GzipHandler.java", "insertions": 33, "deletions": 20}], "commitDateTime": "2018-09-21 07:44:53", "spoonStatsSkippedReason": ""}], "title": "Requests handled with GzipHandler should remove Content-Encoding and Content-Length headers", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2018-09-24 22:47:17", "statsSkippedReason": "", "body": "When a request arrives with `Content-Encoding: gzip` (raw or comma delim) and the `GzipHandler` is auto-decompressing the body content, then the `Content-Encoding` header should be stripped of the `gzip` value (and if there is no more values the entire header should be removed).\r\n\r\nIf the request arrives with a `Content-Length` header as well, this header should also be removed before dispatching to the webapp.\r\n\r\nThis was brought up at dropwizard/dropwizard#2479", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 9.000277777777777, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/2912"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 3}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["00843c8ed90c4ad5e62aa28e71ef9a091cab0ee1"], "commits": {"00843c8ed90c4ad5e62aa28e71ef9a091cab0ee1": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "3f34f70ad54392e14e580bd2cb05c85cef86d0b4": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "b225ebe756a2ec2aa7df60fe99d9d702bac7baa8": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "ae169aa6244ad1afc8c4665a839f9f4b1c9e6e6b": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "9003a0fd6940dd80c916c39063053eacafbcc14d": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2018-09-12 19:33:42", "commitsDetails": [{"commitMessage": "Issue #2901 - Moving Http Upgrader to Http Conversation\n\n+ Solves for Authentication and Redirect\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["aebe436e0006764cfe6f3d8da1752341b905643b"], "commitHash": "00843c8ed90c4ad5e62aa28e71ef9a091cab0ee1", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpRequest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpRequest.getConversation()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpChannelOverHTTP.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.http.HttpChannelOverHTTP.exchangeTerminating(org.eclipse.jetty.client.HttpExchange,org.eclipse.jetty.client.api.Result)", "DEL": 1, "INS": 1, "UPD": 3, "MOV": 0, "TOT": 5}]}], "nameRev": "00843c8ed90c4ad5e62aa28e71ef9a091cab0ee1 tags/jetty-9.4.13.v20181111~77^2~1", "commitUser": "joakime", "authoredDateTime": "2018-09-12 14:35:01", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 8, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/http/HttpChannelOverHTTP.java", "insertions": 4, "deletions": 4}, {"lines": 2, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpRequest.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2018-09-12 14:35:01", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "3f34f70ad54392e14e580bd2cb05c85cef86d0b4", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Jetty 10.0.x websocket refactor (#3055)\n\n* Adding more todos\r\n* More websocket test updates\r\n* Adding more information to exception about mismatched hash\r\n* AcceptHash improved testing\r\n* Prevent duplicate request headers\r\n* Removing ability to use LocalFuzzer entirely (until its fixed)\r\n* JSR356 HandshakeResponse header modifications are now allowed during Configurator\r\n* Correcting MessageSink creation\r\n* Using proper sub-protocol\r\n* Metadata remembers OnMessage.maxMessageSize now\r\n* Minor test updates\r\n* Issue #2172 - Fixing JSR-356 Decoder discovery and OnMessage wiring\r\n* More websocket test updates\r\n* Update for null/empty payload\r\n* Partial String Message Sink fix\r\n* More websocket fixes around InputStream handling\r\n* Moving proposed Abstract FrameHandler hierarchy into core main\r\n* More testing fixes, along with a change to use the new core Abstract*FrameHandler\r\n* Adding WebSocket URI validation\r\n* Updating copy found in other API with improvements made in first API.\r\n* More websocket test updates\r\n* Fixing compilation\r\n* WebSocket test fixes\r\n* Fixing ContinuationTest assertions\r\n* fixed package\r\n* Added some better examples of QuotedCSV\r\nI think this test is trying to use QuotedCSV in the wrong way, as it often is offering values when it should be testing parameters.\r\nI have added some examples to show that QuotedCSV is capable of handling the quotes, spaces and embedded commas of the tests, but only\r\nfor parameters and not for values.   The question is, is this sufficient for websocket?\r\n* Improve close handling\r\nThe handling of a Close Frame may close the endpoint, so parsing should not continue\r\n* moved old AbstractFrameHandler to test\r\n* implement ingoing and outgoing frame sequence checking\r\n* More work on javax.websocket parameterized server\r\n* Bumping up pom plugin versions to jetty-9.4.x standards\r\n* Merging up Jenkinsfile to attempt to fix CI build issues\r\n* JSR356 @PathParam testing\r\n* More WebSocket testing updates\r\n* More WebSocket testing updates\r\n* WebSocket Idle Timeout from FrameHandler specific policy\r\n* WebSocket/JSR Pong support\r\n* WebSocket/JSR Correcting MessageHandler.Whole<PongMessage> handling\r\n* URL Decode UriTemplatePathSpec values\r\n* Fixing test expectations\r\n* Fixing AbstractWholeMessageHandler buffer flip\r\n* More websocket test fixes\r\n* Updated ALPN version for JDK 8u181.\r\n* Removing QuotedUtil from WebSocket-core\r\n+ Moved to QuotedCSV for most usages\r\n+ Introduced HeaderUtil to satisfy remaining use cases\r\n* Review of HttpClient names and Thread names.\r\n+ Javax WebSocket Server = \"Javax-WebSocketServer@####\"\r\n+ Javax WebSocket Client = \"Javax-WebSocketClient@####\"\r\n* added OpCodeTest.java\r\n* Minor Frame cleanup\r\n* MessageOS cleanup\r\n* Made the OpCode of WebSocket Frame immutable.\r\nFrames can no longer be set as a continuation and should now be copied using the ContinuationFrame constructor\r\nDataFrames can no longer be created without one of the subclasses as the public constructor was removed in favour of newDataFrame method\r\n* Chat test\r\n* Work on Chat Test\r\nMoved implementation of assertValid to WebSocketFrame\r\nRemoved getFinRsvOp\r\n* removed constructors for DataFrame using a basedOn Frame\r\ninstead use constructors with opCode, payload and fin bit\r\n* refactor of WebSocket Frames WIP\r\n* WIP: resolved failing tests\r\n* CloseStatus rework, now use CloseStatus.toFrame to create Close Frames\r\nnew DelegateFrame class which ReadOnlyFrame extends\r\ntrim utf8 byte array in CloseStatus to utf8 character boundaries only\r\n* working on test to test socket io erros in websocket-core\r\n* renaming for clarity\r\nGave up on maintaining old names, as this is a different package anyway so some adaption will be needed regardless.\r\n* Moved AbstractFrameHandlers to common\r\nOnly have a AbstractTestFrameHandler in core\r\n* Close uses CloseStatus\r\nReduced the parsing and generation of CloseStatus when closing\r\n* merge\r\n* work on WebSocketTest\r\n* cleanup log\r\n* wip\r\n* files missing comment header\r\njetty-jmh was using 9.4.12-SNAPSHOT now using 10.0.0-SNAPSHOT\r\n* thread names\r\n* remove sequence check from parser\r\n* minor cleanups\r\n* Call frameHandler externally to parser\r\n* OpCode.check now throws ProtocolException instead of returning boolean\r\nchanged ProtocolException messages in OpCode.check\r\n* removed Frame.Type and use OpCode instead\r\nseparated out FrameValidation for parser into method in WebSocketChannel\r\n* moved remaining frame validation checks into WebSocketChannel\r\n* referenced counted buffer\r\n* cleanups\r\n* wip on demand side\r\n* First attempt at demandable\r\n* demand control\r\n* clean up reference counting\r\n* clean ups\r\n* WebSocketServerTest\r\n* wip\r\n* fixed auto fragmentation\r\n* simple demand test\r\n* test demand and retain\r\n* Added validation back into the Parser\r\nsplit up validation in WSChannel into methods for incoming and outgoing\r\nfixed various tests in websocket-core\r\n* more tests\r\n* fixed remaining tests failing due to the changes to frame validation\r\n* cleanups\r\n* more autobahn refixes\r\n* adjust mask for auto fragments\r\n* clear mask\r\n* fully close on unrecoverable error and not wait for close response\r\n* Removed the CoreFuzzer and ContinuationTest\r\nThese tests are now covered elsewhere.\r\n* remove declared exception onClosed\r\n* Test delay close\r\n* Test handler close\r\n* fixed test dependency\r\n* moved the frame sequence check from OutgoingState from after the ExtensionStack to channel.sendFrame\r\nchanged error handling to fail the callback of invalid/outOfSequence frames\r\nadded WebSocket Close tests revealing some problems with demand in state ICLOSE\r\n* cleanup\r\n* timing issues with WebSocketCloseTest\r\n* test cleanups\r\n* Cancel demand on close\r\n* removed frame validation from generator\r\n* finished close testing\r\n* Issue #2901 - Moving Http Upgrader to Http Conversation\r\n+ Solves for Authentication and Redirect\r\n* changes from #2902 to jetty-10.0.x\r\n* Validation Extension\r\nintroduced a ValidationExtension to do frame validation in the ExtensionStack\r\nadded the WebSocketChannel to ExtensionStack.connect to set it on the Extensions\r\n* added parameters for ValidationExtension to choose what to validate\r\n* ValidationExtension Cleanup\r\nValidationExtension now uses the Validation methods from its WebSocketChannel\r\nsimplified the parameter passing to the ValidationExtension\r\n* core cleanup\r\n* Fixed intermittent test failures\r\n* clean up duplicates and imports\r\n* simplified package structure\r\n* many cleanups, simplifications and duplication removal\r\n* cleanup\r\n* added utf8 validation for text frames into ValidationExtension\r\nadded tests for utf8 validation\r\n* create ValidationExtensionTest\r\n* cleanup\r\n* merge with jetty-10\r\nupdate websocket to junit5\r\n* fix to autobahn client report directory\r\n* Fixes and cleanup\r\nFixed initial buffer too large for websocket buffer\r\nless verbose debug\r\nbetter debug\r\n* Removed behavior from policy\r\n* cleanup after merge from hell\r\n* bug fixes and cleanups\r\n* refactor packages with JPMS in mind\r\n* unit test for TextMessageHandler\r\n* cleanups\r\n* more cleanups\r\n* provided client/server dependencies\r\n* fixed bad refactor\r\n* use lambdas for TextMessageHandler\r\n* cleanup\r\n* cleanup\r\n* cleanups\r\n* cleanup of websocket-common framehandlers\r\n* reverting to jetty websocket api from 9.4\r\n* better chat\r\n* renamed websocket common to util\r\n* save wip on jetty-websocket-tests\r\n* giving up on jetty-websocket-tests as mostly duplicated tests\r\n* renamed websocket-util back to websocket-common\r\n* moved InvalidWebSocketException to javax common\r\n* reworked TextMessageHandler to MessageHandler\r\nnow handles binary messages as well\r\n* implemented getByteBufferPool in remaining DummyChannel classes\r\n* Moved the abstract Frame and Message handlers out of websocket-common\r\n* replaced usages of AbstractWholeMessageHandler with CoreMessageHandler\r\nrenamed MessageHandler to CoreMessageHandler\r\n* removed AbstractFrameTypeHandler\r\n* cleanup\r\n* jetty-websocket-common passing tests without websocket-common dependency\r\n* fixed compile errors\r\n* renamed MessageHandler\r\n* Removing reference to websocket-server (no longer exists)\r\n* Removing, Extensions now exist in websocket-core\r\n* Do not append an empty ByteBuffer\r\n* NPE Fix for empty/unused UTF-8 String Builder\r\n* NPE Fix for SendPartialBinaryFrameHandler test\r\n* Punching holes in WebAppContext needed for JSR356 use\r\n* Updating \"9.x.x\" to \"10.x.x\"\r\n* Removing Bad URI test case that is ignored\r\n* Fixing test expectation now that we moved to QuotedCSV\r\n* Adding TODO about onOpen failure requiring onError + onClose.\r\n* Throwing JSR356 DeploymentException on addEndpoint() failure\r\n* Test cleanup (for better error messages)\r\n* Adding some comments to explain wrapNonVoidReturnType()\r\n* cleanup methodHandle return type filtering\r\n* test fixes\r\n* Fix change return type to Void\r\n* Fixed test by wiring up MessageHandler\r\n* test cleanups\r\nremoved changeReturnType for MethodHandle as filterReturnValue already changes to return type of the filter\r\n* fixed MessageReceivingTest.testPartialBinaryFrameHandler\r\n* Core BatchMode replaced by boolean\r\n* fixed LargeContainerTest.testEcho by allowing the policy to be set on the WSServer as an attribute\r\n* acquire batchBuffer before calculating batchSpace in FrameFlusher\r\n* Deprecated WebSocketPolicy\r\n* Fixing MessageReceivingTest\r\n* Refactoring out websocket-servlet\r\n+ WebSocketPolicy removed from websocket-servlet\r\n+ websocket-common is removed\r\n+ Migrating back up to APIs\r\n* WIP removing core policy\r\n* added missing copyright headers\r\n* customize client session\r\n* customize cleanup\r\n* wip\r\n* wip\r\n* Removing WebSocketPolicy usage within websocket-core\r\n* Allowing DummyCoreSession to have a Behavior\r\n* Removing core WebSocketPolicy.clonePolicy() - no longer used\r\n* Jetty Native WebSocket now compiles / tests\r\n* Remember WebSocketServletFactoryImpl as Context Attribute\r\n* JSR356 codebase now compiles\r\n* updated websocket servlets\r\n* fix handling for no max message size\r\n* Fixed LargeContainerTest.testEcho\r\nChanged WebSocketServletFactoryImpl.defaultAutFragment to true\r\nonly check the incoming frame size if autoFragment is false\r\n* Added WebSocketConstants to avoid duplicate default locations\r\n* applications extensions discovered via headers\r\n* fixed ConfiguratorTest.testNoExtensionsConfigurator\r\n* cleaned up extension negotiation\r\n* cleaned up extension negotiation\r\n* cleanups\r\n* Convert exceptions to API versions\r\n* cleanup imports\r\n* convert requestURI to a WebsocketURI in Negotiated\r\n* fixed SessionTrackingTest\r\n* moved session tracking management to be done by the JavaxWebSocketFrameHandler\r\n* Cleanup dump for jdk11 classloaders\r\n* fix to ConfiguratorTest\r\nadded the EchoSocket endpoint on the ServerContainer instead of using server.registerWebSocket\r\n* Simplify websocket-servlet\r\n    fixed jetty websocket chat example\r\n    fixes for javax websocket chat example\r\n    fixed Upgrade response header issues\r\n    Set default configurations\r\n    improved dump\r\n    depends on javax server impl\r\n    do not expose core classes\r\n    fix javadoc\r\n    removed FrameHandlerFactory self reference\r\n* Removed -impl from javax client and server\r\n* Fixed common tests for onClosed event\r\n* Improve creation of JavaxWebSocketServerContainer\r\nBetter handling of executor and httpClient as managed beans\r\n* Fixed MessageOutputStream using empty buffers and looping forever\r\nno longer enforce maxTextMessageBufferSize on partial messages\r\n* Updates after review\r\nreintroduced WebSocketServletFactory\r\nreverted other API changes\r\n* Ignored TextStreamTest tests incorrectly assuming no frame fragmentation\r\nWhen message fragmentation is implemented in PartialStringMessageSink\r\nthen update these tests to check on the server side for no buffers\r\nlarger than the maxTextMessageBufferSize.\r\n* fixed check for previous WebsocketUpgrade filter\r\nDisable the AltFilterTest until problems of the WebSocketUpgradeFilter\r\nattributes on the ServletContext are fixed.\r\n* fixed flaky SessionTrackingTest by waiting for Sessions to open\r\n* remove payload length check for outgoing frames\r\nfix bug sending frames after they have failed validation checks\r\n* reverted maven coords for javax client and server\r\n* updated to latest jetty-10 dump changes\r\n* Fix to WebSocketUpgradeFilter Attributes on the ServletContext\r\nRemoved deprecated method\r\nWebSocketUpgradeFilter.configureContext(ServletContext)\r\nChanged return type of\r\nWebSocketUpgradeFilter.configureContext(ServletContext) to void.\r\nWebSocketUpgradeFilter.configureContext was checking the ServletContext\r\nfor a WebSocketUpgradeFilter set as an attribute before creating a new\r\none. The FilterHolder from web.xml is being set as an attribute in init\r\nwhich is called which happens after configureContext.\r\nSo instead of checking the attribute in\r\nWebSocketUpgradeFilter.configureContext, we are now searching through\r\nthe filters on the ServletHandler to see if a WebSocketUpgradeFilter\r\nhas been registered with the CONTEXT_ATTRIBUTE_KEY.\r\n* cleanup and identifying problems with FrameHandlerMetadata\r\n* properly cache Metadata and copy MessageMetadata\r\nproperly cache Metadata in the FrameHandlerFactory using the metadataMap\r\ncopy the MessageMetadata from Metadata to prevent mutating the MethodHandle\r\n* added new WebSocketServerContainerExecutorTest\r\nremoved DelayedStartClientOnServerTest which doesnt seem to be a valid\r\ntest when executors are shared\r\nremoved last check for executor==null in JavaxWebSocketServerContainerInitializer\r\nas the threadPool is always created in the server\r\n* reformatted websocket code\r\n* reformat code\r\n* Rervert unnecessary changes from 10.0.x\r\n* Rervert unnecessary changes from 10.0.x\r\n* fix build issues testing Hazelcast sessions\r\n* QuotesDecoderTest sessions not being closed\r\n* Fixed CookiesTest\r\nCookiesTest.testCookiesAreSentToClient was failing due to the\r\nAssertion being caught and logged by the upgrade request\r\nthe response is now captured by a FuturePromise and the assertions are\r\ndone in the main test\r\nthe reason the assertion was failing was due to lowercase \"set-cookie\"\r\ninstead of \"Set-Cookie\"\r\n* fixed maven coords\r\n* javadoc fixes\r\n* fixed javadoc\r\n* revert maven artifact names\r\n* cleanup after review\r\n\r\nSigned-off-by: Lachlan Roberts <lachlan@webtide.com>\r\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n", "commitParents": ["b5d058d128b2bbfde076918a635c7cf592086323"], "commitHash": "9003a0fd6940dd80c916c39063053eacafbcc14d", "commitSpoonAstDiffStats": [], "nameRev": "9003a0fd6940dd80c916c39063053eacafbcc14d tags/jetty-10.0.0.alpha1~299", "commitUser": "gregw", "authoredDateTime": "2018-11-02 13:07:43", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 194, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/AbstractJsrRemote.java", "insertions": 0, "deletions": 194}, {"lines": 553, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/server/WebSocketServerTest.java", "insertions": 553, "deletions": 0}, {"lines": 28, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/BufferUtilTest.java", "insertions": 27, "deletions": 1}, {"lines": 303, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/AvailableEncodersTest.java", "insertions": 0, "deletions": 303}, {"lines": 60, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/primitives/BooleanTextParamSocket.java", "insertions": 0, "deletions": 60}, {"lines": 156, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/QuotesDecoderTextStreamTest.java", "insertions": 0, "deletions": 156}, {"lines": 182, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/Session.java", "insertions": 0, "deletions": 182}, {"lines": 162, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/internal/ValidationExtension.java", "insertions": 162, "deletions": 0}, {"lines": 98, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/messages/PartialStringMessageSink.java", "insertions": 98, "deletions": 0}, {"lines": 62, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/client/JsrClientTrackingSocket.java", "insertions": 62, "deletions": 0}, {"lines": 159, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/messages/DecodedBinaryMessageSinkTest.java", "insertions": 159, "deletions": 0}, {"lines": 118, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/frames/ReadOnlyDelegatedFrame.java", "insertions": 0, "deletions": 118}, {"lines": 30, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/handlers/ByteArrayWholeHandler.java", "insertions": 30, "deletions": 0}, {"lines": 89, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/JavaxWebSocketFrameHandler_OnMessage_TextStreamTest.java", "insertions": 89, "deletions": 0}, {"lines": 166, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/WebSocketFrameTest.java", "insertions": 166, "deletions": 0}, {"lines": 59, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/echo/EchoBasicTextSocket.java", "insertions": 59, "deletions": 0}, {"lines": 51, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/streaming/InputStreamSocket.java", "insertions": 51, "deletions": 0}, {"lines": 211, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/internal/FragmentExtension.java", "insertions": 211, "deletions": 0}, {"lines": 63, "filePath": "jetty-websocket/jetty-websocket-common/src/test/java/org/eclipse/jetty/websocket/common/endpoints/listeners/ListenerPingPongSocket.java", "insertions": 63, "deletions": 0}, {"lines": 88, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/internal/ReferencedBuffer.java", "insertions": 88, "deletions": 0}, {"lines": 140, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/AbstractTrackingEndpoint.java", "insertions": 140, "deletions": 0}, {"lines": 37, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/messages/AbstractMessageSink.java", "insertions": 37, "deletions": 0}, {"lines": 54, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/coders/BadDualEncoder.java", "insertions": 0, "deletions": 54}, {"lines": 37, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/InvalidOpenCloseReasonSocket.java", "insertions": 0, "deletions": 37}, {"lines": 59, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/primitives/IntTextSocket.java", "insertions": 0, "deletions": 59}, {"lines": 168, "filePath": "jetty-websocket/javax-websocket-tests/src/main/java/org/eclipse/jetty/websocket/jsr356/tests/WSServer.java", "insertions": 168, "deletions": 0}, {"lines": 150, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/JsrEndpointFunctions_OnMessage_TextTest.java", "insertions": 0, "deletions": 150}, {"lines": 57, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/HandshakeRFC6455.java", "insertions": 0, "deletions": 57}, {"lines": 119, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/WebSocketClientBadUriTest.java", "insertions": 0, "deletions": 119}, {"lines": 57, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/function/EndpointFunctions.java", "insertions": 0, "deletions": 57}, {"lines": 5, "filePath": "jetty-websocket/javax-websocket-tests/src/test/resources/quotes-twain.txt", "insertions": 5, "deletions": 0}, {"lines": 42, "filePath": "jetty-websocket/jetty-websocket-api/src/main/java/org/eclipse/jetty/websocket/api/WebSocketTimeoutException.java", "insertions": 42, "deletions": 0}, {"lines": 129, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/server/WebSocketNegotiator.java", "insertions": 129, "deletions": 0}, {"lines": 212, "filePath": "jetty-websocket/jetty-websocket-common/src/main/java/org/eclipse/jetty/websocket/common/WebSocketSessionImpl.java", "insertions": 212, "deletions": 0}, {"lines": 42, "filePath": "jetty-websocket/jetty-websocket-common/src/test/java/org/eclipse/jetty/websocket/common/endpoints/annotated/BadTextSignatureSocket.java", "insertions": 42, "deletions": 0}, {"lines": 268, "filePath": "jetty-websocket/jetty-websocket-client/src/main/java/org/eclipse/jetty/websocket/client/impl/DelegatedClientUpgradeRequest.java", "insertions": 268, "deletions": 0}, {"lines": 64, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/messages/DecodedInputStreamMessageSink.java", "insertions": 0, "deletions": 64}, {"lines": 115, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/examples/JsrBrowserDebugTool.java", "insertions": 0, "deletions": 115}, {"lines": 50, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/WebSocketSessionFactory.java", "insertions": 0, "deletions": 50}, {"lines": 49, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/SendHandlerCallback.java", "insertions": 49, "deletions": 0}, {"lines": 240, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/extensions/fragment/FragmentExtension.java", "insertions": 0, "deletions": 240}, {"lines": 2, "filePath": "jetty-webapp/src/main/java/org/eclipse/jetty/webapp/Configuration.java", "insertions": 1, "deletions": 1}, {"lines": 44, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/decoders/InputStreamDecoder.java", "insertions": 44, "deletions": 0}, {"lines": 36, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/InvalidCloseIntSocket.java", "insertions": 0, "deletions": 36}, {"lines": 95, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/JsrEndpointFunctions_OnMessage_BinaryStreamTest.java", "insertions": 0, "deletions": 95}, {"lines": 58, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/function/AnnotationPredicate.java", "insertions": 0, "deletions": 58}, {"lines": 72, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/coders/QuotesDecoder.java", "insertions": 72, "deletions": 0}, {"lines": 37, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/encoders/FloatEncoder.java", "insertions": 0, "deletions": 37}, {"lines": 64, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/coders/TimeDecoder.java", "insertions": 64, "deletions": 0}, {"lines": 58, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/primitives/BooleanTextSocket.java", "insertions": 58, "deletions": 0}, {"lines": 62, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/ParserCapture.java", "insertions": 0, "deletions": 62}, {"lines": 91, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/endpoints/AbstractStringEndpoint.java", "insertions": 91, "deletions": 0}, {"lines": 34, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/PathParamProvider.java", "insertions": 0, "deletions": 34}, {"lines": 1, "filePath": "jetty-webapp/src/main/resources/META-INF/services/org.eclipse.jetty.webapp.Configuration", "insertions": 0, "deletions": 1}, {"lines": 197, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/extensions/ExtensionStackTest.java", "insertions": 0, "deletions": 197}, {"lines": 85, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/extensions/Extension.java", "insertions": 0, "deletions": 85}, {"lines": 23, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/io/package-info.java", "insertions": 0, "deletions": 23}, {"lines": 209, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/ExtensionStackProcessingTest.java", "insertions": 0, "deletions": 209}, {"lines": 83, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/server/WebSocketUpgradeHandler.java", "insertions": 83, "deletions": 0}, {"lines": 34, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/PathParamProvider.java", "insertions": 34, "deletions": 0}, {"lines": 198, "filePath": "jetty-websocket/javax-websocket-tests/src/main/java/org/eclipse/jetty/websocket/jsr356/tests/Fuzzer.java", "insertions": 198, "deletions": 0}, {"lines": 39, "filePath": "jetty-websocket/javax-websocket-tests/src/main/java/org/eclipse/jetty/websocket/jsr356/tests/SessionMatchers.java", "insertions": 39, "deletions": 0}, {"lines": 244, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/internal/Generator.java", "insertions": 244, "deletions": 0}, {"lines": 698, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/MessageHandlerTest.java", "insertions": 698, "deletions": 0}, {"lines": 334, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/WebSocketServletRFCTest.java", "insertions": 0, "deletions": 334}, {"lines": 405, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/PrimitivesTextEchoTest.java", "insertions": 0, "deletions": 405}, {"lines": 61, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/message/PartialTextMessageSink.java", "insertions": 0, "deletions": 61}, {"lines": 591, "filePath": "jetty-websocket/websocket-servlet/src/main/java/org/eclipse/jetty/websocket/servlet/UpgradeHttpServletRequest.java", "insertions": 0, "deletions": 591}, {"lines": 127, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/JsrServerEndpointFunctions_OnMessage_TextStreamTest.java", "insertions": 0, "deletions": 127}, {"lines": 0, "filePath": "jetty-websocket/{javax-websocket-server-impl => javax-websocket-server}/src/main/resources/META-INF/services/javax.websocket.server.ServerEndpointConfig$Configurator", "insertions": 0, "deletions": 0}, {"lines": 57, "filePath": "tests/test-webapps/test-jetty-webapp/pom.xml", "insertions": 34, "deletions": 23}, {"lines": 35, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/BasicCloseReasonSessionSocket.java", "insertions": 0, "deletions": 35}, {"lines": 40, "filePath": "jetty-websocket/javax-websocket-server-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/server/PathParamArgIdentifier.java", "insertions": 0, "deletions": 40}, {"lines": 298, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/coders/AvailableEncodersTest.java", "insertions": 298, "deletions": 0}, {"lines": 61, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/decoders/ByteDecoder.java", "insertions": 61, "deletions": 0}, {"lines": 57, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/ConfiguredEndpoint.java", "insertions": 0, "deletions": 57}, {"lines": 31, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/handlers/ByteBufferWholeHandler.java", "insertions": 31, "deletions": 0}, {"lines": 127, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/MisbehavingClassTest.java", "insertions": 0, "deletions": 127}, {"lines": 265, "filePath": "jetty-websocket/jetty-websocket-common/src/main/java/org/eclipse/jetty/websocket/common/JettyWebSocketRemoteEndpoint.java", "insertions": 265, "deletions": 0}, {"lines": 117, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/LargeAnnotatedTest.java", "insertions": 117, "deletions": 0}, {"lines": 44, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/client/samples/IntSocket.java", "insertions": 44, "deletions": 0}, {"lines": 44, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/JavaxWebSocketPongMessage.java", "insertions": 44, "deletions": 0}, {"lines": 50, "filePath": "jetty-websocket/javax-websocket-server/src/main/java/org/eclipse/jetty/websocket/jsr356/server/internal/JsrHandshakeResponse.java", "insertions": 50, "deletions": 0}, {"lines": 105, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/autobahn/client/EchoHandler.java", "insertions": 105, "deletions": 0}, {"lines": 155, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/messages/DecodedTextStreamMessageSinkTest.java", "insertions": 155, "deletions": 0}, {"lines": 61, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/messages/DecodedTextMessageSink.java", "insertions": 0, "deletions": 61}, {"lines": 104, "filePath": "jetty-websocket/jetty-websocket-common/src/main/java/org/eclipse/jetty/websocket/common/message/StringMessageSink.java", "insertions": 104, "deletions": 0}, {"lines": 297, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/extensions/FragmentExtensionTest.java", "insertions": 297, "deletions": 0}, {"lines": 191, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/ClientUpgradeRequest.java", "insertions": 0, "deletions": 191}, {"lines": 489, "filePath": "jetty-websocket/jetty-websocket-common/src/main/java/org/eclipse/jetty/websocket/common/JettyWebSocketFrameHandlerFactory.java", "insertions": 489, "deletions": 0}, {"lines": 35, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/BasicCloseSessionReasonSocket.java", "insertions": 35, "deletions": 0}, {"lines": 97, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/UnitGenerator.java", "insertions": 97, "deletions": 0}, {"lines": 171, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/scopes/SimpleContainerScope.java", "insertions": 0, "deletions": 171}, {"lines": 44, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/function/AndPredicates.java", "insertions": 0, "deletions": 44}, {"lines": 50, "filePath": "jetty-websocket/javax-websocket-server/src/main/java/org/eclipse/jetty/websocket/jsr356/server/internal/PathParamIdentifier.java", "insertions": 50, "deletions": 0}, {"lines": 51, "filePath": "jetty-websocket/javax-websocket-client/src/main/java/org/eclipse/jetty/websocket/jsr356/client/DelegatedClientUpgradeRequest.java", "insertions": 51, "deletions": 0}, {"lines": 102, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/autobahn/AutobahnFrameHandler.java", "insertions": 102, "deletions": 0}, {"lines": 42, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/decoders/StringDecoder.java", "insertions": 42, "deletions": 0}, {"lines": 70, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/encoders/EncodeFailedFuture.java", "insertions": 70, "deletions": 0}, {"lines": 36, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/samples/CloseReasonSocket.java", "insertions": 0, "deletions": 36}, {"lines": 114, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/DeMaskProcessorTest.java", "insertions": 0, "deletions": 114}, {"lines": 39, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/IncomingFrames.java", "insertions": 39, "deletions": 0}, {"lines": 67, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/quotes/QuotesSocket.java", "insertions": 67, "deletions": 0}, {"lines": 58, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/WebSocketPartialListener.java", "insertions": 0, "deletions": 58}, {"lines": 39, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/coders/IntegerDecoderTest.java", "insertions": 0, "deletions": 39}, {"lines": 137, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/Text_GoodUtf8Test.java", "insertions": 0, "deletions": 137}, {"lines": 42, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/echo/LargeEchoContextListener.java", "insertions": 0, "deletions": 42}, {"lines": 31, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/handlers/ExtendedMessageHandler.java", "insertions": 31, "deletions": 0}, {"lines": 115, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/SlowClientTest.java", "insertions": 0, "deletions": 115}, {"lines": 50, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/streaming/ReaderSocket.java", "insertions": 50, "deletions": 0}, {"lines": 87, "filePath": "jetty-websocket/websocket-client/src/test/java/examples/SimpleEchoSocket.java", "insertions": 0, "deletions": 87}, {"lines": 121, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/JsrBasicRemote.java", "insertions": 0, "deletions": 121}, {"lines": 94, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/coders/QuotesUtil.java", "insertions": 94, "deletions": 0}, {"lines": 385, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/decoders/AvailableDecoders.java", "insertions": 0, "deletions": 385}, {"lines": 32, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/endpoints/DummyEndpoint.java", "insertions": 0, "deletions": 32}, {"lines": 44, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/idletimeout/OnOpenIdleTimeoutEndpoint.java", "insertions": 44, "deletions": 0}, {"lines": 26, "filePath": "jetty-websocket/websocket-tests/src/test/resources/wsuf-config-via-listener.xml", "insertions": 0, "deletions": 26}, {"lines": 33, "filePath": "jetty-websocket/javax-websocket-server/src/test/java/org/eclipse/jetty/websocket/jsr356/server/DummyServerContainer.java", "insertions": 33, "deletions": 0}, {"lines": 66, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/primitives/BooleanObjectTextParamSocket.java", "insertions": 66, "deletions": 0}, {"lines": 40, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/coders/EncoderTextTest.java", "insertions": 0, "deletions": 40}, {"lines": 84, "filePath": "jetty-websocket/javax-websocket-client/src/main/java/org/eclipse/jetty/websocket/jsr356/client/EmptyClientEndpointConfig.java", "insertions": 84, "deletions": 0}, {"lines": 102, "filePath": "jetty-websocket/jetty-websocket-server/src/main/java/org/eclipse/jetty/websocket/server/JettyWebSocketServletContainerInitializer.java", "insertions": 102, "deletions": 0}, {"lines": 50, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/client/samples/CloseSocket.java", "insertions": 50, "deletions": 0}, {"lines": 62, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/decoders/DoubleDecoder.java", "insertions": 0, "deletions": 62}, {"lines": 37, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/InvalidErrorIntSocket.java", "insertions": 37, "deletions": 0}, {"lines": 143, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/chat/ChatWebSocketClient.java", "insertions": 143, "deletions": 0}, {"lines": 95, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/coders/ValidDualDecoder.java", "insertions": 95, "deletions": 0}, {"lines": 41, "filePath": "jetty-websocket/jetty-websocket-common/src/test/java/org/eclipse/jetty/websocket/common/endpoints/adapters/AnnotatedEchoSocket.java", "insertions": 41, "deletions": 0}, {"lines": 180, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/RemoteEndpoint.java", "insertions": 0, "deletions": 180}, {"lines": 291, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/CommonEndpointFunctionsTest.java", "insertions": 0, "deletions": 291}, {"lines": 30, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/handlers/StringPartialHandler.java", "insertions": 0, "deletions": 30}, {"lines": 141, "filePath": "jetty-websocket/websocket-servlet/src/main/java/org/eclipse/jetty/websocket/servlet/WebSocketServletFactory.java", "insertions": 80, "deletions": 61}, {"lines": 3, "filePath": "jetty-osgi/test-jetty-osgi/src/test/config/etc/jetty.xml", "insertions": 2, "deletions": 1}, {"lines": 50, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/echo/EchoStatelessBasicTextSocket.java", "insertions": 50, "deletions": 0}, {"lines": 67, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/coders/FruitBinaryEncoder.java", "insertions": 67, "deletions": 0}, {"lines": 141, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/MessageWriterTest.java", "insertions": 0, "deletions": 141}, {"lines": 39, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/message/ReaderMessageSink.java", "insertions": 0, "deletions": 39}, {"lines": 385, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/JsrSession.java", "insertions": 0, "deletions": 385}, {"lines": 36, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/samples/CloseSessionSocket.java", "insertions": 0, "deletions": 36}, {"lines": 40, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/function/ReturnTypePredicate.java", "insertions": 0, "deletions": 40}, {"lines": 78, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/sockets/annotations/MyEchoSocket.java", "insertions": 0, "deletions": 78}, {"lines": 162, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/internal/Negotiated.java", "insertions": 162, "deletions": 0}, {"lines": 113, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/sockets/ConfiguredEchoSocket.java", "insertions": 0, "deletions": 113}, {"lines": 72, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/util/InvalidSignatureException.java", "insertions": 72, "deletions": 0}, {"lines": 34, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/BasicPongMessageSocket.java", "insertions": 0, "deletions": 34}, {"lines": 57, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/frames/TextFrame.java", "insertions": 0, "deletions": 57}, {"lines": 28, "filePath": "jetty-websocket/websocket-tests/src/test/resources/wsuf-config-via-servlet-init.xml", "insertions": 0, "deletions": 28}, {"lines": 606, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/internal/WebSocketConnection.java", "insertions": 606, "deletions": 0}, {"lines": 67, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/primitives/IntegerObjectParamTextSocket.java", "insertions": 0, "deletions": 67}, {"lines": 45, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/samples/IntSocket.java", "insertions": 0, "deletions": 45}, {"lines": 4, "filePath": "jetty-websocket/javax-websocket-tests/src/test/resources/quotes-ben.txt", "insertions": 4, "deletions": 0}, {"lines": 42, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/InitException.java", "insertions": 0, "deletions": 42}, {"lines": 40, "filePath": "jetty-websocket/jetty-websocket-common/src/main/java/org/eclipse/jetty/websocket/common/message/InputStreamMessageSink.java", "insertions": 40, "deletions": 0}, {"lines": 51, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/FunctionCallException.java", "insertions": 0, "deletions": 51}, {"lines": 62, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/AtomicConnectionStateTest.java", "insertions": 0, "deletions": 62}, {"lines": 105, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/UnitExtensionStack.java", "insertions": 0, "deletions": 105}, {"lines": 100, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/OutgoingFramesCapture.java", "insertions": 0, "deletions": 100}, {"lines": 42, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/io/payload/PayloadProcessor.java", "insertions": 0, "deletions": 42}, {"lines": 29, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/handlers/LongMessageHandler.java", "insertions": 29, "deletions": 0}, {"lines": 434, "filePath": "jetty-websocket/websocket-common/src/main/javadoc/org/eclipse/jetty/websocket/common/doc-files/websocket-stack-extensions.svg", "insertions": 0, "deletions": 434}, {"lines": 178, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/StatusCode.java", "insertions": 0, "deletions": 178}, {"lines": 161, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/AbstractLocalServerCase.java", "insertions": 0, "deletions": 161}, {"lines": 34, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/JavaxWebSocketUpgradeRequest.java", "insertions": 34, "deletions": 0}, {"lines": 43, "filePath": "jetty-websocket/javax-websocket-server/src/main/java/org/eclipse/jetty/websocket/jsr356/server/JavaxWebSocketConfiguration.java", "insertions": 43, "deletions": 0}, {"lines": 51, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/streaming/ReaderSocket.java", "insertions": 0, "deletions": 51}, {"lines": 28, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/Timeouts.java", "insertions": 28, "deletions": 0}, {"lines": 1, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/thread/Locker.java", "insertions": 0, "deletions": 1}, {"lines": 57, "filePath": "jetty-websocket/javax-websocket-server-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/server/PathParamServerEndpointConfig.java", "insertions": 0, "deletions": 57}, {"lines": 95, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/UriTemplateParameterTest.java", "insertions": 95, "deletions": 0}, {"lines": 67, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/primitives/FloatObjectTextSocket.java", "insertions": 0, "deletions": 67}, {"lines": 61, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/BadCloseSocket.java", "insertions": 0, "deletions": 61}, {"lines": 50, "filePath": "jetty-websocket/jetty-websocket-client/src/main/java/org/eclipse/jetty/websocket/client/impl/XmlBasedHttpClientProvider.java", "insertions": 50, "deletions": 0}, {"lines": 70, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/sockets/DateTextSocket.java", "insertions": 0, "deletions": 70}, {"lines": 327, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/CloseStatus.java", "insertions": 327, "deletions": 0}, {"lines": 58, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/sockets/annotations/AnnotatedTextSocket.java", "insertions": 0, "deletions": 58}, {"lines": 52, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/BadFrame.java", "insertions": 0, "deletions": 52}, {"lines": 46, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/BlockerFrameCallback.java", "insertions": 0, "deletions": 46}, {"lines": 74, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/extensions/WebSocketExtensionFactory.java", "insertions": 0, "deletions": 74}, {"lines": 55, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/coders/DateEncoder.java", "insertions": 0, "deletions": 55}, {"lines": 176, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/PartialEchoTest.java", "insertions": 0, "deletions": 176}, {"lines": 131, "filePath": "jetty-websocket/jetty-websocket-api/src/main/java/org/eclipse/jetty/websocket/api/util/WSURI.java", "insertions": 131, "deletions": 0}, {"lines": 97, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/util/TextUtil.java", "insertions": 97, "deletions": 0}, {"lines": 60, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/InvalidSignatureException.java", "insertions": 0, "deletions": 60}, {"lines": 39, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/UpgradeRequest.java", "insertions": 39, "deletions": 0}, {"lines": 547, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/util/ReflectUtils.java", "insertions": 0, "deletions": 547}, {"lines": 18, "filePath": "jetty-websocket/jetty-websocket-client/src/test/resources/jetty-logging.properties", "insertions": 18, "deletions": 0}, {"lines": 173, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/SuspendResumeTest.java", "insertions": 0, "deletions": 173}, {"lines": 213, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/message/MessageInputStream.java", "insertions": 0, "deletions": 213}, {"lines": 69, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/client/AbstractClientSessionTest.java", "insertions": 69, "deletions": 0}, {"lines": 96, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/coders/ValidDualDecoder.java", "insertions": 0, "deletions": 96}, {"lines": 108, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/ChromeTest.java", "insertions": 0, "deletions": 108}, {"lines": 431, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/extensions/PerMessageDeflateExtensionTest.java", "insertions": 0, "deletions": 431}, {"lines": 34, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/BasicPongMessageSocket.java", "insertions": 34, "deletions": 0}, {"lines": 17, "filePath": "jetty-http/src/test/java/org/eclipse/jetty/http/QuotedCSVTest.java", "insertions": 16, "deletions": 1}, {"lines": 238, "filePath": "jetty-websocket/javax-websocket-server-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/server/AnnotatedServerEndpointConfig.java", "insertions": 0, "deletions": 238}, {"lines": 792, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/function/CommonEndpointFunctions.java", "insertions": 0, "deletions": 792}, {"lines": 126, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/CloseHandling_BadStatusCodesTest.java", "insertions": 0, "deletions": 126}, {"lines": 114, "filePath": "jetty-websocket/websocket-tests/pom.xml", "insertions": 0, "deletions": 114}, {"lines": 71, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/DefaultHttpClientProvider.java", "insertions": 0, "deletions": 71}, {"lines": 980, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/function/JsrEndpointFunctions.java", "insertions": 0, "deletions": 980}, {"lines": 61, "filePath": "jetty-websocket/javax-websocket-server/src/test/java/org/eclipse/jetty/websocket/jsr356/server/PathParamTest.java", "insertions": 61, "deletions": 0}, {"lines": 23, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/extensions/compress/package-info.java", "insertions": 0, "deletions": 23}, {"lines": 52, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/streaming/InputStreamSocket.java", "insertions": 0, "deletions": 52}, {"lines": 96, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/autobahn/client/AbstractClientFrameHandler.java", "insertions": 96, "deletions": 0}, {"lines": 81, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/coders/FruitDecoder.java", "insertions": 81, "deletions": 0}, {"lines": 58, "filePath": "jetty-websocket/jetty-websocket-common/src/test/java/org/eclipse/jetty/websocket/common/endpoints/annotated/AnnotatedTextSocket.java", "insertions": 58, "deletions": 0}, {"lines": 39, "filePath": "jetty-websocket/javax-websocket-tests/src/main/java/org/eclipse/jetty/websocket/jsr356/tests/framehandlers/WholeMessageEcho.java", "insertions": 39, "deletions": 0}, {"lines": 12, "filePath": "jetty-websocket/websocket-tests/src/test/resources/basic-echo-endpoint-config-web.xml", "insertions": 0, "deletions": 12}, {"lines": 29, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/ManagedEndpoint.java", "insertions": 0, "deletions": 29}, {"lines": 40, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/messages/InputStreamMessageSink.java", "insertions": 40, "deletions": 0}, {"lines": 146, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/extensions/ExtensionTool.java", "insertions": 0, "deletions": 146}, {"lines": 73, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/coders/QuotesDecoder.java", "insertions": 0, "deletions": 73}, {"lines": 176, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/messages/MessageWriterTest.java", "insertions": 176, "deletions": 0}, {"lines": 31, "filePath": "jetty-websocket/websocket-servlet/src/main/java/org/eclipse/jetty/websocket/servlet/package-info.java", "insertions": 0, "deletions": 31}, {"lines": 38, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/extensions/AbstractExtensionTest.java", "insertions": 38, "deletions": 0}, {"lines": 239, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/CloseInfo.java", "insertions": 0, "deletions": 239}, {"lines": 56, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/CloseableLocalWebSocketSession.java", "insertions": 0, "deletions": 56}, {"lines": 108, "filePath": "jetty-websocket/jetty-websocket-common/src/test/java/org/eclipse/jetty/websocket/common/MessageOutputStreamTest.java", "insertions": 108, "deletions": 0}, {"lines": 62, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/AnnotatedEchoClient.java", "insertions": 0, "deletions": 62}, {"lines": 4, "filePath": "tests/test-webapps/test-jetty-webapp/src/main/java/com/acme/WebSocketChatServlet.java", "insertions": 1, "deletions": 3}, {"lines": 125, "filePath": "jetty-websocket/websocket-api/src/test/java/org/eclipse/jetty/websocket/api/extensions/ExtensionConfigTest.java", "insertions": 0, "deletions": 125}, {"lines": 42, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/WebSocketTimeoutException.java", "insertions": 42, "deletions": 0}, {"lines": 31, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/handlers/ByteBufferPartialHandler.java", "insertions": 0, "deletions": 31}, {"lines": 12, "filePath": "jetty-websocket/javax-websocket-tests/src/test/resources/basic-echo-endpoint-config-web.xml", "insertions": 12, "deletions": 0}, {"lines": 44, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/WebSocketListener.java", "insertions": 0, "deletions": 44}, {"lines": 46, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/CompletionCallback.java", "insertions": 0, "deletions": 46}, {"lines": 46, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/endpoints/EchoStringEndpoint.java", "insertions": 0, "deletions": 46}, {"lines": 52, "filePath": "jetty-websocket/jetty-websocket-common/src/test/java/org/eclipse/jetty/websocket/common/endpoints/annotated/AnnotatedBinaryArraySocket.java", "insertions": 52, "deletions": 0}, {"lines": 41, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/sockets/adapters/AnnotatedEchoSocket.java", "insertions": 0, "deletions": 41}, {"lines": 39, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/InvalidOpenSessionIntSocket.java", "insertions": 39, "deletions": 0}, {"lines": 77, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/WebSocketServerFactoryTest.java", "insertions": 0, "deletions": 77}, {"lines": 47, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/sockets/adapters/AdapterEchoSocket.java", "insertions": 0, "deletions": 47}, {"lines": 59, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/primitives/BooleanTextSocket.java", "insertions": 0, "deletions": 59}, {"lines": 92, "filePath": "jetty-websocket/javax-websocket-client/pom.xml", "insertions": 92, "deletions": 0}, {"lines": 284, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/client/SessionAddMessageHandlerTest.java", "insertions": 284, "deletions": 0}, {"lines": 35, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/samples/CloseSocket.java", "insertions": 0, "deletions": 35}, {"lines": 46, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/WebSocketException.java", "insertions": 0, "deletions": 46}, {"lines": 122, "filePath": "jetty-websocket/websocket-client/pom.xml", "insertions": 0, "deletions": 122}, {"lines": 307, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/StreamTest.java", "insertions": 0, "deletions": 307}, {"lines": 12, "filePath": "jetty-websocket/javax-websocket-tests/src/test/resources/large-echo-config-web.xml", "insertions": 12, "deletions": 0}, {"lines": 148, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/quotes/QuotesDecoderTextStreamTest.java", "insertions": 148, "deletions": 0}, {"lines": 270, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/autobahn/client/AutobahnWebSocketClient.java", "insertions": 270, "deletions": 0}, {"lines": 55, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/echo/BasicEchoSocketConfigContextListener.java", "insertions": 0, "deletions": 55}, {"lines": 70, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/io/FramePipes.java", "insertions": 0, "deletions": 70}, {"lines": 42, "filePath": "jetty-websocket/javax-websocket-server-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/server/JsrHandshakeResponse.java", "insertions": 0, "deletions": 42}, {"lines": 203, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/DummyCoreSession.java", "insertions": 203, "deletions": 0}, {"lines": 119, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/coders/tests/BadDualDecoder.java", "insertions": 119, "deletions": 0}, {"lines": 49, "filePath": "jetty-websocket/jetty-websocket-common/src/test/java/org/eclipse/jetty/websocket/common/endpoints/annotated/BadDuplicateFrameSocket.java", "insertions": 49, "deletions": 0}, {"lines": 151, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/PayloadLengthTest.java", "insertions": 0, "deletions": 151}, {"lines": 47, "filePath": "jetty-websocket/javax-websocket-server/src/test/java/examples/MyAuthedConfigurator.java", "insertions": 47, "deletions": 0}, {"lines": 33, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/BasicOpenSessionSocket.java", "insertions": 33, "deletions": 0}, {"lines": 173, "filePath": "jetty-websocket/websocket-server/src/test/java/examples/BrowserDebugTool.java", "insertions": 0, "deletions": 173}, {"lines": 137, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/OnMessageReturnTest.java", "insertions": 137, "deletions": 0}, {"lines": 58, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/primitives/LongTextSocket.java", "insertions": 58, "deletions": 0}, {"lines": 246, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/server/internal/RFC6455Handshaker.java", "insertions": 246, "deletions": 0}, {"lines": 384, "filePath": "jetty-websocket/websocket-common/src/main/javadoc/org/eclipse/jetty/websocket/common/doc-files/websocket-stack-simple.svg", "insertions": 0, "deletions": 384}, {"lines": 49, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/CloseException.java", "insertions": 49, "deletions": 0}, {"lines": 251, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/extensions/ExtensionConfig.java", "insertions": 0, "deletions": 251}, {"lines": 0, "filePath": "jetty-websocket/{websocket-api => jetty-websocket-api}/src/main/java/org/eclipse/jetty/websocket/api/package-info.java", "insertions": 0, "deletions": 0}, {"lines": 218, "filePath": "jetty-websocket/jetty-websocket-common/src/main/java/org/eclipse/jetty/websocket/common/message/MessageOutputStream.java", "insertions": 218, "deletions": 0}, {"lines": 70, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/AbstractSessionTest.java", "insertions": 70, "deletions": 0}, {"lines": 31, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/pathmap/ServletPathSpec.java", "insertions": 0, "deletions": 31}, {"lines": 120, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/coders/BadDualDecoder.java", "insertions": 0, "deletions": 120}, {"lines": 42, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/io/FutureFrameCallback.java", "insertions": 0, "deletions": 42}, {"lines": 32, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/handlers/ReaderWholeHandler.java", "insertions": 0, "deletions": 32}, {"lines": 97, "filePath": "jetty-websocket/websocket-server/pom.xml", "insertions": 0, "deletions": 97}, {"lines": 23, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/extensions/package-info.java", "insertions": 0, "deletions": 23}, {"lines": 65, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/primitives/ByteObjectTextSocket.java", "insertions": 65, "deletions": 0}, {"lines": 41, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/BasicOpenCloseSocket.java", "insertions": 41, "deletions": 0}, {"lines": 31, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/Behavior.java", "insertions": 31, "deletions": 0}, {"lines": 60, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/NullAppendable.java", "insertions": 60, "deletions": 0}, {"lines": 28, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/Defaults.java", "insertions": 28, "deletions": 0}, {"lines": 109, "filePath": "jetty-websocket/javax-websocket-tests/src/main/java/org/eclipse/jetty/websocket/jsr356/tests/RawFrameBuilder.java", "insertions": 109, "deletions": 0}, {"lines": 350, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/AbstractTestFrameHandler.java", "insertions": 350, "deletions": 0}, {"lines": 92, "filePath": "jetty-websocket/javax-websocket-client/src/main/java/org/eclipse/jetty/websocket/jsr356/client/JsrUpgradeListener.java", "insertions": 92, "deletions": 0}, {"lines": 111, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/RawFrameBuilder.java", "insertions": 0, "deletions": 111}, {"lines": 101, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/DummyEndpointFunctions.java", "insertions": 0, "deletions": 101}, {"lines": 364, "filePath": "jetty-websocket/jetty-websocket-common/src/main/java/org/eclipse/jetty/websocket/common/invoke/InvokerUtils.java", "insertions": 364, "deletions": 0}, {"lines": 6, "filePath": "jetty-http/src/test/java/org/eclipse/jetty/http/HttpURIParseTest.java", "insertions": 3, "deletions": 3}, {"lines": 145, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/CookieTest.java", "insertions": 0, "deletions": 145}, {"lines": 31, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/MessageType.java", "insertions": 0, "deletions": 31}, {"lines": 42, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/coders/FruitTextEncoder.java", "insertions": 42, "deletions": 0}, {"lines": 250, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/WebSocketServerContainerExecutorTest.java", "insertions": 250, "deletions": 0}, {"lines": 144, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/LogicalConnection.java", "insertions": 0, "deletions": 144}, {"lines": 116, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/DeploymentExceptionTest.java", "insertions": 0, "deletions": 116}, {"lines": 31, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/coders/tests/ExtDecoder.java", "insertions": 31, "deletions": 0}, {"lines": 57, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/client/misbehaving/EndpointRuntimeOnOpen.java", "insertions": 57, "deletions": 0}, {"lines": 25, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/coders/tests/Fruit.java", "insertions": 25, "deletions": 0}, {"lines": 346, "filePath": "jetty-websocket/javax-websocket-server/src/main/java/org/eclipse/jetty/websocket/jsr356/server/JavaxWebSocketServerContainerInitializer.java", "insertions": 346, "deletions": 0}, {"lines": 54, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/sockets/listeners/ListenerFrameSocket.java", "insertions": 0, "deletions": 54}, {"lines": 66, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/primitives/CharacterObjectTextSocket.java", "insertions": 0, "deletions": 66}, {"lines": 23, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/masks/package-info.java", "insertions": 0, "deletions": 23}, {"lines": 35, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/configs/EchoSocketConfigurator.java", "insertions": 0, "deletions": 35}, {"lines": 36, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/InvalidErrorIntSocket.java", "insertions": 0, "deletions": 36}, {"lines": 32, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/endpoints/DummyEndpoint.java", "insertions": 32, "deletions": 0}, {"lines": 54, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/idletimeout/IdleTimeoutContextListener.java", "insertions": 0, "deletions": 54}, {"lines": 80, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/messages/DecodedBinaryMessageSink.java", "insertions": 80, "deletions": 0}, {"lines": 59, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/primitives/BooleanTextParamSocket.java", "insertions": 59, "deletions": 0}, {"lines": 0, "filePath": "jetty-websocket/{websocket-common => jetty-websocket-common}/src/main/java/org/eclipse/jetty/websocket/common/package-info.java", "insertions": 0, "deletions": 0}, {"lines": 52, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/JettyServerEndpointConfiguratorTest.java", "insertions": 0, "deletions": 52}, {"lines": 256, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/JavaxWebSocketRemoteEndpoint.java", "insertions": 256, "deletions": 0}, {"lines": 0, "filePath": "jetty-websocket/{websocket-tests => javax-websocket-common}/src/test/resources/quotes-ben.txt", "insertions": 0, "deletions": 0}, {"lines": 398, "filePath": "jetty-websocket/jetty-websocket-common/src/test/java/org/eclipse/jetty/websocket/common/LocalEndpointMetadataTest.java", "insertions": 398, "deletions": 0}, {"lines": 30, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/handlers/BaseMessageHandler.java", "insertions": 30, "deletions": 0}, {"lines": 30, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/handlers/ByteArrayWholeHandler.java", "insertions": 30, "deletions": 0}, {"lines": 50, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/TestWebSocketUpgradeHandler.java", "insertions": 50, "deletions": 0}, {"lines": 7, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/AbstractEndPoint.java", "insertions": 4, "deletions": 3}, {"lines": 0, "filePath": "jetty-websocket/{websocket-api => jetty-websocket-api}/src/main/java/org/eclipse/jetty/websocket/api/WebSocketConstants.java", "insertions": 0, "deletions": 0}, {"lines": 50, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/BatchMode.java", "insertions": 0, "deletions": 50}, {"lines": 138, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/util/ReflectUtilsTest.java", "insertions": 138, "deletions": 0}, {"lines": 57, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/echo/BasicEchoEndpointConfigContextListener.java", "insertions": 0, "deletions": 57}, {"lines": 39, "filePath": "jetty-websocket/websocket-servlet/src/test/java/examples/MyAdvancedEchoServlet.java", "insertions": 0, "deletions": 39}, {"lines": 142, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/DummyConnection.java", "insertions": 0, "deletions": 142}, {"lines": 212, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/JsrEndpointFunctions_BadSignaturesTest.java", "insertions": 0, "deletions": 212}, {"lines": 43, "filePath": "jetty-websocket/javax-websocket-tests/src/test/resources/jetty-logging.properties", "insertions": 43, "deletions": 0}, {"lines": 55, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/coders/DateTimeEncoder.java", "insertions": 0, "deletions": 55}, {"lines": 66, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/primitives/IntegerObjectTextSocket.java", "insertions": 0, "deletions": 66}, {"lines": 148, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/JsrEndpointFunctions_OnCloseTest.java", "insertions": 0, "deletions": 148}, {"lines": 42, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/coders/FruitTextEncoder.java", "insertions": 0, "deletions": 42}, {"lines": 185, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/client/AnnotatedEchoTest.java", "insertions": 185, "deletions": 0}, {"lines": 144, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/extensions/ExtensionTool.java", "insertions": 144, "deletions": 0}, {"lines": 204, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/CloseStatusTest.java", "insertions": 204, "deletions": 0}, {"lines": 60, "filePath": "jetty-websocket/jetty-websocket-api/src/main/java/org/eclipse/jetty/websocket/api/WriteCallback.java", "insertions": 60, "deletions": 0}, {"lines": 42, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/client/EmptyConfigurator.java", "insertions": 0, "deletions": 42}, {"lines": 78, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/util/Primitives.java", "insertions": 0, "deletions": 78}, {"lines": 122, "filePath": "jetty-websocket/jetty-websocket-server/src/main/java/org/eclipse/jetty/websocket/server/internal/UpgradeResponseAdapter.java", "insertions": 122, "deletions": 0}, {"lines": 161, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/SubProtocolTest.java", "insertions": 0, "deletions": 161}, {"lines": 90, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/messages/ByteBufferMessageSink.java", "insertions": 90, "deletions": 0}, {"lines": 41, "filePath": "jetty-websocket/javax-websocket-client/src/main/java/org/eclipse/jetty/websocket/jsr356/client/EmptyConfigurator.java", "insertions": 41, "deletions": 0}, {"lines": 59, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/client/misbehaving/AnnotatedRuntimeOnOpen.java", "insertions": 59, "deletions": 0}, {"lines": 143, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/WebSocketFrameTest.java", "insertions": 0, "deletions": 143}, {"lines": 44, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/sockets/annotations/BadBinarySignatureSocket.java", "insertions": 0, "deletions": 44}, {"lines": 0, "filePath": "jetty-websocket/{websocket-api => jetty-websocket-api}/src/main/java/org/eclipse/jetty/websocket/api/extensions/package-info.java", "insertions": 0, "deletions": 0}, {"lines": 52, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/decoders/CharacterDecoder.java", "insertions": 0, "deletions": 52}, {"lines": 316, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/coders/AvailableDecodersTest.java", "insertions": 316, "deletions": 0}, {"lines": 40, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/coders/EncoderTextTest.java", "insertions": 40, "deletions": 0}, {"lines": 580, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/io/XIOState.java", "insertions": 0, "deletions": 580}, {"lines": 49, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/TestUpgradeHandler.java", "insertions": 49, "deletions": 0}, {"lines": 242, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/JavaxWebSocketFrameHandler_BadSignaturesTest.java", "insertions": 242, "deletions": 0}, {"lines": 395, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/PrimitivesTextEchoTest.java", "insertions": 395, "deletions": 0}, {"lines": 51, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/JettyServerEndpointConfiguratorTest.java", "insertions": 51, "deletions": 0}, {"lines": 562, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/util/ReflectUtils.java", "insertions": 562, "deletions": 0}, {"lines": 32, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/SessionServlet.java", "insertions": 0, "deletions": 32}, {"lines": 5, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/WriteFlusher.java", "insertions": 4, "deletions": 1}, {"lines": 59, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/sockets/listeners/ListenerBasicSocket.java", "insertions": 0, "deletions": 59}, {"lines": 84, "filePath": "jetty-websocket/jetty-websocket-api/src/main/java/org/eclipse/jetty/websocket/api/extensions/Extension.java", "insertions": 84, "deletions": 0}, {"lines": 30, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/handlers/ByteBufferPartialHandler.java", "insertions": 30, "deletions": 0}, {"lines": 62, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/UpgradeException.java", "insertions": 62, "deletions": 0}, {"lines": 175, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/PartialEchoTest.java", "insertions": 175, "deletions": 0}, {"lines": 52, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/examples/JsrBrowserConfigurator.java", "insertions": 0, "deletions": 52}, {"lines": 51, "filePath": "jetty-websocket/jetty-websocket-common/src/main/java/org/eclipse/jetty/websocket/common/FunctionCallException.java", "insertions": 51, "deletions": 0}, {"lines": 61, "filePath": "jetty-webapp/src/main/java/org/eclipse/jetty/webapp/WebSocketConfiguration.java", "insertions": 0, "deletions": 61}, {"lines": 34, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/BasicErrorThrowableSessionSocket.java", "insertions": 34, "deletions": 0}, {"lines": 105, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/WebSocketRemoteEndpointTest.java", "insertions": 0, "deletions": 105}, {"lines": 65, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/sockets/adapters/ListenerEchoSocket.java", "insertions": 0, "deletions": 65}, {"lines": 37, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/echo/BasicEchoSocket.java", "insertions": 37, "deletions": 0}, {"lines": 149, "filePath": "jetty-websocket/javax-websocket-tests/src/main/java/org/eclipse/jetty/websocket/jsr356/tests/WSEndpointTracker.java", "insertions": 149, "deletions": 0}, {"lines": 36, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/sockets/annotations/NotASocket.java", "insertions": 0, "deletions": 36}, {"lines": 120, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/ReaderMessageSinkTest.java", "insertions": 0, "deletions": 120}, {"lines": 37, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/partial/PartialTrackingSocket.java", "insertions": 0, "deletions": 37}, {"lines": 56, "filePath": "jetty-websocket/jetty-websocket-api/pom.xml", "insertions": 56, "deletions": 0}, {"lines": 88, "filePath": "jetty-websocket/jetty-websocket-api/src/test/java/org/eclipse/jetty/websocket/api/util/WSURITest.java", "insertions": 88, "deletions": 0}, {"lines": 86, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/CloseStatus.java", "insertions": 0, "deletions": 86}, {"lines": 156, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/SessionTrackingTest.java", "insertions": 156, "deletions": 0}, {"lines": 23, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/io/payload/package-info.java", "insertions": 0, "deletions": 23}, {"lines": 46, "filePath": "jetty-websocket/jetty-websocket-api/src/main/java/org/eclipse/jetty/websocket/api/annotations/OnWebSocketFrame.java", "insertions": 46, "deletions": 0}, {"lines": 357, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/CloseHandlingTest.java", "insertions": 0, "deletions": 357}, {"lines": 44, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/decoders/ReaderDecoder.java", "insertions": 44, "deletions": 0}, {"lines": 114, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/ParserBadOpCodesTest.java", "insertions": 114, "deletions": 0}, {"lines": 138, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/JavaxWebSocketFrameHandler_OnMessage_TextStreamTest.java", "insertions": 138, "deletions": 0}, {"lines": 43, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/WebSocketPingPongListener.java", "insertions": 0, "deletions": 43}, {"lines": 51, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/DummyIncomingFrames.java", "insertions": 0, "deletions": 51}, {"lines": 127, "filePath": "jetty-websocket/javax-websocket-server/src/main/java/org/eclipse/jetty/websocket/jsr356/server/ContainerDefaultConfigurator.java", "insertions": 127, "deletions": 0}, {"lines": 142, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/reflect/Arg.java", "insertions": 0, "deletions": 142}, {"lines": 32, "filePath": "jetty-websocket/websocket-servlet/src/test/java/examples/MyAuthedServlet.java", "insertions": 0, "deletions": 32}, {"lines": 63, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/BasicEndpointConfig.java", "insertions": 0, "deletions": 63}, {"lines": 186, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/internal/FrameCaptureExtension.java", "insertions": 186, "deletions": 0}, {"lines": 51, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/sockets/ByteBufferSocket.java", "insertions": 0, "deletions": 51}, {"lines": 67, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/coders/tests/FruitBinaryEncoder.java", "insertions": 67, "deletions": 0}, {"lines": 484, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/WebSocketCloseTest.java", "insertions": 484, "deletions": 0}, {"lines": 144, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/PrimitivesBinaryEchoTest.java", "insertions": 144, "deletions": 0}, {"lines": 318, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/coders/AvailableDecodersTest.java", "insertions": 0, "deletions": 318}, {"lines": 40, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/handlers/ComboMessageHandler.java", "insertions": 40, "deletions": 0}, {"lines": 167, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/messages/DecodedBinaryStreamMessageSinkTest.java", "insertions": 167, "deletions": 0}, {"lines": 6, "filePath": "jetty-hazelcast/pom.xml", "insertions": 6, "deletions": 0}, {"lines": 48, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/CompletableFutureCallback.java", "insertions": 48, "deletions": 0}, {"lines": 61, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/AcceptHash.java", "insertions": 0, "deletions": 61}, {"lines": 31, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/handlers/ReaderWholeHandler.java", "insertions": 31, "deletions": 0}, {"lines": 140, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/util/WSURI.java", "insertions": 0, "deletions": 140}, {"lines": 43, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/decoders/ByteArrayDecoder.java", "insertions": 0, "deletions": 43}, {"lines": 43, "filePath": "jetty-websocket/jetty-websocket-api/src/main/java/org/eclipse/jetty/websocket/api/PolicyViolationException.java", "insertions": 43, "deletions": 0}, {"lines": 46, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/coders/DecoderTextTest.java", "insertions": 46, "deletions": 0}, {"lines": 119, "filePath": "jetty-websocket/jetty-websocket-common/src/test/java/org/eclipse/jetty/websocket/common/TrackingEndpoint.java", "insertions": 119, "deletions": 0}, {"lines": 62, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/UpgradeException.java", "insertions": 0, "deletions": 62}, {"lines": 128, "filePath": "jetty-websocket/javax-websocket-server-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/server/ContainerDefaultConfigurator.java", "insertions": 0, "deletions": 128}, {"lines": 173, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/SessionTrackingTest.java", "insertions": 0, "deletions": 173}, {"lines": 238, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/examples/JsrBrowserSocket.java", "insertions": 0, "deletions": 238}, {"lines": 122, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/UnitGenerator.java", "insertions": 0, "deletions": 122}, {"lines": 169, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/TextStreamTest.java", "insertions": 169, "deletions": 0}, {"lines": 48, "filePath": "jetty-websocket/jetty-websocket-common/src/main/java/org/eclipse/jetty/websocket/common/CompletableFutureCallback.java", "insertions": 48, "deletions": 0}, {"lines": 42, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/coders/tests/FruitTextEncoder.java", "insertions": 42, "deletions": 0}, {"lines": 6, "filePath": "examples/embedded/src/main/java/org/eclipse/jetty/embedded/WebSocketJsrServer.java", "insertions": 3, "deletions": 3}, {"lines": 63, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/UpgradeResponseAdapter.java", "insertions": 63, "deletions": 0}, {"lines": 32, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/internal/compress/XWebkitDeflateFrameExtension.java", "insertions": 32, "deletions": 0}, {"lines": 44, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/TrackingSocket.java", "insertions": 44, "deletions": 0}, {"lines": 37, "filePath": "jetty-websocket/jetty-websocket-common/src/main/java/org/eclipse/jetty/websocket/common/MessageSink.java", "insertions": 37, "deletions": 0}, {"lines": 44, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/InfoSocket.java", "insertions": 0, "deletions": 44}, {"lines": 228, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/UpgradeResponseAdapter.java", "insertions": 0, "deletions": 228}, {"lines": 38, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/coders/IntegerDecoderTest.java", "insertions": 38, "deletions": 0}, {"lines": 458, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/MessageHandler.java", "insertions": 458, "deletions": 0}, {"lines": 15, "filePath": "jetty-websocket/javax-websocket-server/src/main/config/modules/websocket.mod", "insertions": 15, "deletions": 0}, {"lines": 112, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/WebSocketClientInitTest.java", "insertions": 0, "deletions": 112}, {"lines": 112, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/LargeAnnotatedTest.java", "insertions": 0, "deletions": 112}, {"lines": 39, "filePath": "jetty-websocket/jetty-websocket-common/src/main/java/org/eclipse/jetty/websocket/common/message/ReaderMessageSink.java", "insertions": 39, "deletions": 0}, {"lines": 56, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/util/LifeCycleScope.java", "insertions": 0, "deletions": 56}, {"lines": 30, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/handlers/ByteArrayPartialHandler.java", "insertions": 30, "deletions": 0}, {"lines": 164, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/BinaryStreamTest.java", "insertions": 0, "deletions": 164}, {"lines": 276, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/UnorderedSignatureTest.java", "insertions": 0, "deletions": 276}, {"lines": 44, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/EchoHandler.java", "insertions": 0, "deletions": 44}, {"lines": 30, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/handlers/StringWholeHandler.java", "insertions": 30, "deletions": 0}, {"lines": 58, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/misbehaving/EndpointRuntimeOnOpen.java", "insertions": 0, "deletions": 58}, {"lines": 55, "filePath": "jetty-websocket/jetty-websocket-common/src/test/java/org/eclipse/jetty/websocket/common/endpoints/listeners/ListenerFrameSocket.java", "insertions": 55, "deletions": 0}, {"lines": 50, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/coders/QuotesEncoder.java", "insertions": 0, "deletions": 50}, {"lines": 99, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/WebSocketInvalidVersionTest.java", "insertions": 0, "deletions": 99}, {"lines": 40, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/client/UpgradeListener.java", "insertions": 40, "deletions": 0}, {"lines": 64, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/coders/DateTimeDecoder.java", "insertions": 64, "deletions": 0}, {"lines": 102, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/sockets/SessionInfoEndpoint.java", "insertions": 0, "deletions": 102}, {"lines": 152, "filePath": "jetty-websocket/javax-websocket-tests/src/main/java/org/eclipse/jetty/websocket/jsr356/tests/matchers/IsMessageHandlerTypeRegistered.java", "insertions": 152, "deletions": 0}, {"lines": 30, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/handlers/StringWholeHandler.java", "insertions": 30, "deletions": 0}, {"lines": 110, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/client/DelayedStartClientTest.java", "insertions": 110, "deletions": 0}, {"lines": 545, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/util/InvokerUtilsTest.java", "insertions": 545, "deletions": 0}, {"lines": 151, "filePath": "jetty-websocket/websocket-servlet/pom.xml", "insertions": 107, "deletions": 44}, {"lines": 56, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/LifeCycleScope.java", "insertions": 56, "deletions": 0}, {"lines": 78, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/internal/compress/DeflateFrameExtension.java", "insertions": 78, "deletions": 0}, {"lines": 61, "filePath": "jetty-websocket/jetty-websocket-api/src/main/java/org/eclipse/jetty/websocket/api/annotations/OnWebSocketMessage.java", "insertions": 61, "deletions": 0}, {"lines": 46, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/echo/BasicEchoEndpoint.java", "insertions": 46, "deletions": 0}, {"lines": 437, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/BinaryTest.java", "insertions": 0, "deletions": 437}, {"lines": 74, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/messages/DecodedTextStreamMessageSink.java", "insertions": 74, "deletions": 0}, {"lines": 79, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/messages/DecodedTextMessageSink.java", "insertions": 79, "deletions": 0}, {"lines": 156, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/TextStreamTest.java", "insertions": 0, "deletions": 156}, {"lines": 60, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/WriteCallback.java", "insertions": 0, "deletions": 60}, {"lines": 34, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/BasicCloseReasonSocket.java", "insertions": 34, "deletions": 0}, {"lines": 36, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/WebSocketHandshake.java", "insertions": 0, "deletions": 36}, {"lines": 4, "filePath": "jetty-osgi/test-jetty-osgi/pom.xml", "insertions": 2, "deletions": 2}, {"lines": 39, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/metadata/DuplicateCoderException.java", "insertions": 0, "deletions": 39}, {"lines": 81, "filePath": "jetty-websocket/jetty-websocket-client/src/test/java/examples/SimpleEchoSocket.java", "insertions": 81, "deletions": 0}, {"lines": 72, "filePath": "jetty-websocket/websocket-api/src/test/java/org/eclipse/jetty/websocket/api/util/QuoteUtil_QuoteTest.java", "insertions": 0, "deletions": 72}, {"lines": 30, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/sockets/annotations/NoopSocket.java", "insertions": 0, "deletions": 30}, {"lines": 100, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/IdentityExtensionTest.java", "insertions": 0, "deletions": 100}, {"lines": 199, "filePath": "jetty-websocket/javax-websocket-server-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/server/JsrCreator.java", "insertions": 0, "deletions": 199}, {"lines": 62, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/UpgradeUtils.java", "insertions": 0, "deletions": 62}, {"lines": 642, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/WebSocketUpgradeRequest.java", "insertions": 0, "deletions": 642}, {"lines": 56, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/PongSocket.java", "insertions": 56, "deletions": 0}, {"lines": 81, "filePath": "jetty-websocket/javax-websocket-server/pom.xml", "insertions": 81, "deletions": 0}, {"lines": 118, "filePath": "jetty-websocket/javax-websocket-client/src/main/java/org/eclipse/jetty/websocket/jsr356/client/AnnotatedClientEndpointConfig.java", "insertions": 118, "deletions": 0}, {"lines": 144, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/AbstractTrackingEndpoint.java", "insertions": 0, "deletions": 144}, {"lines": 30, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/coders/ExtDecoder.java", "insertions": 0, "deletions": 30}, {"lines": 8, "filePath": "jetty-websocket/javax-websocket-tests/src/test/resources/empty-web.xml", "insertions": 8, "deletions": 0}, {"lines": 59, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/primitives/DoubleTextSocket.java", "insertions": 59, "deletions": 0}, {"lines": 301, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/FrameHandler.java", "insertions": 301, "deletions": 0}, {"lines": 78, "filePath": "jetty-websocket/javax-websocket-server-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/server/JsrServerEndpointFunctions.java", "insertions": 0, "deletions": 78}, {"lines": 50, "filePath": "jetty-websocket/jetty-websocket-client/src/main/java/org/eclipse/jetty/websocket/client/impl/HttpClientProvider.java", "insertions": 50, "deletions": 0}, {"lines": 58, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/primitives/ShortTextSocket.java", "insertions": 58, "deletions": 0}, {"lines": 131, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/message/Utf8CharBuffer.java", "insertions": 0, "deletions": 131}, {"lines": 40, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/masks/ZeroMasker.java", "insertions": 0, "deletions": 40}, {"lines": 83, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/UntrustedWSSessionFactory.java", "insertions": 0, "deletions": 83}, {"lines": 69, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/DateTextSocket.java", "insertions": 69, "deletions": 0}, {"lines": 158, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/internal/WebSocketChannelState.java", "insertions": 158, "deletions": 0}, {"lines": 29, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/NoOpEndpoint.java", "insertions": 0, "deletions": 29}, {"lines": 107, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/client/misbehaving/MisbehavingClassTest.java", "insertions": 107, "deletions": 0}, {"lines": 31, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/coders/ExtDecoder.java", "insertions": 31, "deletions": 0}, {"lines": 95, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/coders/QuotesUtil.java", "insertions": 0, "deletions": 95}, {"lines": 152, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/PrimitivesBinaryEchoTest.java", "insertions": 0, "deletions": 152}, {"lines": 78, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/WebSocketServerSessionTest.java", "insertions": 0, "deletions": 78}, {"lines": 129, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/OnCloseTest.java", "insertions": 0, "deletions": 129}, {"lines": 445, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/extensions/DeflateFrameExtensionTest.java", "insertions": 0, "deletions": 445}, {"lines": 139, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/resources/jsr-browser-debug-tool/websocket.js", "insertions": 0, "deletions": 139}, {"lines": 1, "filePath": "jetty-websocket/javax-websocket-server/src/main/resources/META-INF/services/org.eclipse.jetty.webapp.Configuration", "insertions": 1, "deletions": 0}, {"lines": 36, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/ConfigurationException.java", "insertions": 0, "deletions": 36}, {"lines": 56, "filePath": "jetty-websocket/javax-websocket-server/src/main/java/org/eclipse/jetty/websocket/jsr356/server/internal/PathParamServerEndpointConfig.java", "insertions": 56, "deletions": 0}, {"lines": 63, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/JsrClientTrackingSocket.java", "insertions": 0, "deletions": 63}, {"lines": 494, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/client/MessageReceivingTest.java", "insertions": 494, "deletions": 0}, {"lines": 0, "filePath": "jetty-websocket/{websocket-tests => javax-websocket-common}/src/test/resources/quotes-twain.txt", "insertions": 0, "deletions": 0}, {"lines": 307, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/ClientDisconnectedTest.java", "insertions": 0, "deletions": 307}, {"lines": 191, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/CookiesTest.java", "insertions": 0, "deletions": 191}, {"lines": 55, "filePath": "jetty-websocket/jetty-websocket-common/src/test/java/org/eclipse/jetty/websocket/common/endpoints/annotated/BadDuplicateBinarySocket.java", "insertions": 55, "deletions": 0}, {"lines": 65, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/JsrClientEchoTrackingSocket.java", "insertions": 0, "deletions": 65}, {"lines": 144, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/frames/ControlFrame.java", "insertions": 0, "deletions": 144}, {"lines": 162, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/EndpointViaConfigTest.java", "insertions": 162, "deletions": 0}, {"lines": 64, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/AcceptHashTest.java", "insertions": 0, "deletions": 64}, {"lines": 36, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/InvalidErrorExceptionSocket.java", "insertions": 0, "deletions": 36}, {"lines": 99, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/scopes/DelegatedContainerScope.java", "insertions": 0, "deletions": 99}, {"lines": 66, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/primitives/BooleanObjectTextSocket.java", "insertions": 0, "deletions": 66}, {"lines": 103, "filePath": "jetty-websocket/jetty-websocket-common/src/test/java/org/eclipse/jetty/websocket/common/MessageWriterTest.java", "insertions": 103, "deletions": 0}, {"lines": 60, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/echo/EchoBasicTextSocket.java", "insertions": 0, "deletions": 60}, {"lines": 123, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/UntrustedWSClientTest.java", "insertions": 0, "deletions": 123}, {"lines": 45, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/messages/AbstractMessageSinkTest.java", "insertions": 45, "deletions": 0}, {"lines": 490, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/util/InvokerUtils.java", "insertions": 490, "deletions": 0}, {"lines": 36, "filePath": "jetty-websocket/javax-websocket-tests/src/main/java/org/eclipse/jetty/websocket/jsr356/tests/CompletableFutureMethodHandle.java", "insertions": 36, "deletions": 0}, {"lines": 83, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/sockets/SessionInfoSocket.java", "insertions": 0, "deletions": 83}, {"lines": 44, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/BadPayloadException.java", "insertions": 0, "deletions": 44}, {"lines": 48, "filePath": "jetty-websocket/jetty-websocket-common/src/main/java/org/eclipse/jetty/websocket/common/message/MessageReader.java", "insertions": 48, "deletions": 0}, {"lines": 60, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/primitives/DoubleTextSocket.java", "insertions": 0, "deletions": 60}, {"lines": 20, "filePath": "jetty-websocket/websocket-client/src/test/resources/jetty-logging.properties", "insertions": 0, "deletions": 20}, {"lines": 126, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/OpCodeTest.java", "insertions": 126, "deletions": 0}, {"lines": 42, "filePath": "jetty-websocket/jetty-websocket-common/src/test/java/org/eclipse/jetty/websocket/common/EventQueue.java", "insertions": 42, "deletions": 0}, {"lines": 12, "filePath": "jetty-websocket/javax-websocket-tests/src/test/resources/idle-timeout-config-web.xml", "insertions": 12, "deletions": 0}, {"lines": 73, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/io/WebSocketClientConnection.java", "insertions": 0, "deletions": 73}, {"lines": 280, "filePath": "jetty-websocket/jetty-websocket-client/src/main/java/org/eclipse/jetty/websocket/client/WebSocketClient.java", "insertions": 280, "deletions": 0}, {"lines": 509, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/WebSocketPolicy.java", "insertions": 0, "deletions": 509}, {"lines": 125, "filePath": "jetty-websocket/jetty-websocket-common/src/test/java/org/eclipse/jetty/websocket/common/util/Utf8CharBufferTest.java", "insertions": 125, "deletions": 0}, {"lines": 45, "filePath": "jetty-websocket/javax-websocket-tests/src/main/java/org/eclipse/jetty/websocket/jsr356/tests/BiConsumerServiceServlet.java", "insertions": 45, "deletions": 0}, {"lines": 3, "filePath": "jetty-osgi/test-jetty-osgi/src/test/config/etc/jetty-with-custom-class.xml", "insertions": 2, "deletions": 1}, {"lines": 10, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/IteratingCallback.java", "insertions": 5, "deletions": 5}, {"lines": 5, "filePath": "jetty-websocket/websocket-common/src/main/resources/META-INF/services/org.eclipse.jetty.websocket.api.extensions.Extension", "insertions": 0, "deletions": 5}, {"lines": 50, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/frames/PingFrame.java", "insertions": 0, "deletions": 50}, {"lines": 241, "filePath": "jetty-websocket/jetty-websocket-common/src/main/java/org/eclipse/jetty/websocket/common/JettyWebSocketFrameHandlerMetadata.java", "insertions": 241, "deletions": 0}, {"lines": 141, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/extensions/ExtensionStackTest.java", "insertions": 141, "deletions": 0}, {"lines": 53, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/coders/tests/BadDualEncoder.java", "insertions": 53, "deletions": 0}, {"lines": 0, "filePath": "jetty-websocket/{websocket-api => jetty-websocket-api}/src/main/java/org/eclipse/jetty/websocket/api/util/package-info.java", "insertions": 0, "deletions": 0}, {"lines": 135, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/OnMessageReturnTest.java", "insertions": 0, "deletions": 135}, {"lines": 31, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/handlers/ReaderWholeHandler.java", "insertions": 31, "deletions": 0}, {"lines": 397, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/UpgradeRequestAdapter.java", "insertions": 0, "deletions": 397}, {"lines": 42, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/JsrHandshakeResponse.java", "insertions": 0, "deletions": 42}, {"lines": 4, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/pathmap/UriTemplatePathSpec.java", "insertions": 3, "deletions": 1}, {"lines": 39, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/BasicOpenCloseSocket.java", "insertions": 0, "deletions": 39}, {"lines": 0, "filePath": "jetty-websocket/{websocket-tests => javax-websocket-tests}/src/test/resources/data/medium.png", "insertions": 0, "deletions": 0}, {"lines": 84, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/UntrustedWSClient.java", "insertions": 0, "deletions": 84}, {"lines": 38, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/encoders/FloatEncoder.java", "insertions": 38, "deletions": 0}, {"lines": 88, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/JsrEndpointFunctions_OnOpenTest.java", "insertions": 0, "deletions": 88}, {"lines": 37, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/masks/Masker.java", "insertions": 0, "deletions": 37}, {"lines": 1037, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/WebSocketSession.java", "insertions": 0, "deletions": 1037}, {"lines": 330, "filePath": "jetty-websocket/jetty-websocket-common/src/test/java/org/eclipse/jetty/websocket/common/JettyWebSocketFrameHandlerTest.java", "insertions": 330, "deletions": 0}, {"lines": 227, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/extensions/AbstractExtension.java", "insertions": 0, "deletions": 227}, {"lines": 35, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/ServletWebSocketResponse.java", "insertions": 0, "deletions": 35}, {"lines": 46, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/annotations/OnWebSocketError.java", "insertions": 0, "deletions": 46}, {"lines": 61, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/decoders/ShortDecoder.java", "insertions": 61, "deletions": 0}, {"lines": 26, "filePath": "jetty-websocket/javax-websocket-tests/src/test/resources/wsuf-config-via-listener.xml", "insertions": 26, "deletions": 0}, {"lines": 67, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/messages/PartialByteBufferMessageSink.java", "insertions": 67, "deletions": 0}, {"lines": 37, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/BasicEchoSocket.java", "insertions": 37, "deletions": 0}, {"lines": 57, "filePath": "jetty-websocket/jetty-websocket-api/src/main/java/org/eclipse/jetty/websocket/api/WebSocketConnectionListener.java", "insertions": 57, "deletions": 0}, {"lines": 224, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/extensions/ValidationExtensionTest.java", "insertions": 224, "deletions": 0}, {"lines": 46, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/encoders/ByteArrayEncoder.java", "insertions": 0, "deletions": 46}, {"lines": 205, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/LocalServer.java", "insertions": 0, "deletions": 205}, {"lines": 38, "filePath": "jetty-websocket/jetty-websocket-common/src/test/java/org/eclipse/jetty/websocket/common/endpoints/annotated/FrameSocket.java", "insertions": 38, "deletions": 0}, {"lines": 38, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/pathmap/PathSpec.java", "insertions": 0, "deletions": 38}, {"lines": 50, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/binary/ByteBufferSocket.java", "insertions": 50, "deletions": 0}, {"lines": 61, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/WebSocketConnectionListener.java", "insertions": 0, "deletions": 61}, {"lines": 49, "filePath": "jetty-websocket/jetty-websocket-api/src/main/java/org/eclipse/jetty/websocket/api/CloseException.java", "insertions": 49, "deletions": 0}, {"lines": 110, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/coders/DecoderTextStreamTest.java", "insertions": 110, "deletions": 0}, {"lines": 68, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/coders/FruitBinaryEncoder.java", "insertions": 0, "deletions": 68}, {"lines": 56, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/IdleTimeoutContextListener.java", "insertions": 56, "deletions": 0}, {"lines": 39, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/QuotedStringTokenizer.java", "insertions": 39, "deletions": 0}, {"lines": 41, "filePath": "jetty-websocket/jetty-websocket-api/src/main/java/org/eclipse/jetty/websocket/api/ProtocolException.java", "insertions": 41, "deletions": 0}, {"lines": 156, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/DummyContainer.java", "insertions": 156, "deletions": 0}, {"lines": 195, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/QuotesEncoderTest.java", "insertions": 0, "deletions": 195}, {"lines": 227, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/messages/MessageInputStream.java", "insertions": 227, "deletions": 0}, {"lines": 74, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/messages/DecodedBinaryStreamMessageSink.java", "insertions": 74, "deletions": 0}, {"lines": 65, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/coders/DateTimeDecoder.java", "insertions": 0, "deletions": 65}, {"lines": 0, "filePath": "jetty-websocket/{javax-websocket-client-impl => javax-websocket-common}/src/main/java/org/eclipse/jetty/websocket/jsr356/encoders/LongEncoder.java", "insertions": 0, "deletions": 0}, {"lines": 34, "filePath": "jetty-websocket/javax-websocket-server/src/test/java/examples/GetHttpSessionConfigurator.java", "insertions": 34, "deletions": 0}, {"lines": 55, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/coders/TimeEncoder.java", "insertions": 0, "deletions": 55}, {"lines": 38, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/echo/LargeEchoDefaultSocket.java", "insertions": 38, "deletions": 0}, {"lines": 251, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/PerMessageDeflateExtensionTest.java", "insertions": 0, "deletions": 251}, {"lines": 138, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/LargeContainerTest.java", "insertions": 138, "deletions": 0}, {"lines": 5, "filePath": "examples/embedded/src/main/java/org/eclipse/jetty/embedded/WebSocketServer.java", "insertions": 2, "deletions": 3}, {"lines": 239, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/PingPongTest.java", "insertions": 0, "deletions": 239}, {"lines": 46, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/servlets/BiConsumerServiceServlet.java", "insertions": 0, "deletions": 46}, {"lines": 10, "filePath": "tests/test-webapps/test-jetty-webapp/src/test/java/org/eclipse/jetty/TestServer.java", "insertions": 8, "deletions": 2}, {"lines": 147, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/UntrustedWSConnection.java", "insertions": 0, "deletions": 147}, {"lines": 6, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/HttpGenerator.java", "insertions": 3, "deletions": 3}, {"lines": 51, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/autobahn/client/UpdateReportsHandler.java", "insertions": 51, "deletions": 0}, {"lines": 24, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/reflect/ArgIdentifier.java", "insertions": 0, "deletions": 24}, {"lines": 499, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/util/QuoteUtil.java", "insertions": 0, "deletions": 499}, {"lines": 57, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/ConfiguredEndpoint.java", "insertions": 57, "deletions": 0}, {"lines": 62, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/decoders/ShortDecoder.java", "insertions": 0, "deletions": 62}, {"lines": 263, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/NativeWebSocketConfiguration.java", "insertions": 0, "deletions": 263}, {"lines": 82, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/coders/FruitDecoder.java", "insertions": 0, "deletions": 82}, {"lines": 57, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/BasicEchoSocketConfigContextListener.java", "insertions": 57, "deletions": 0}, {"lines": 130, "filePath": "jetty-websocket/javax-websocket-tests/src/main/java/org/eclipse/jetty/websocket/jsr356/tests/DummyContainer.java", "insertions": 130, "deletions": 0}, {"lines": 150, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/MessageOutputStreamTest.java", "insertions": 0, "deletions": 150}, {"lines": 400, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/DelayedStartClientOnServerTest.java", "insertions": 0, "deletions": 400}, {"lines": 46, "filePath": "jetty-websocket/jetty-websocket-api/src/main/java/org/eclipse/jetty/websocket/api/annotations/OnWebSocketError.java", "insertions": 46, "deletions": 0}, {"lines": 65, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/primitives/CharacterObjectTextSocket.java", "insertions": 65, "deletions": 0}, {"lines": 48, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/coders/Quotes.java", "insertions": 0, "deletions": 48}, {"lines": 39, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/test/Timeouts.java", "insertions": 0, "deletions": 39}, {"lines": 234, "filePath": "jetty-websocket/jetty-websocket-server/src/main/java/org/eclipse/jetty/websocket/server/internal/UpgradeRequestAdapter.java", "insertions": 234, "deletions": 0}, {"lines": 28, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/Defaults.java", "insertions": 0, "deletions": 28}, {"lines": 32, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/handlers/ByteBufferWholeHandler.java", "insertions": 0, "deletions": 32}, {"lines": 56, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/streaming/StringReturnReaderParamSocket.java", "insertions": 0, "deletions": 56}, {"lines": 144, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/client/ConfiguratorTest.java", "insertions": 144, "deletions": 0}, {"lines": 1, "filePath": "jetty-websocket/websocket-server/src/main/resources/META-INF/services/javax.servlet.ServletContainerInitializer", "insertions": 0, "deletions": 1}, {"lines": 65, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/primitives/ShortObjectTextSocket.java", "insertions": 65, "deletions": 0}, {"lines": 25, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/coders/Fruit.java", "insertions": 0, "deletions": 25}, {"lines": 645, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/JavaxWebSocketFrameHandler.java", "insertions": 645, "deletions": 0}, {"lines": 42, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/message/FrameCallbackBuffer.java", "insertions": 0, "deletions": 42}, {"lines": 39, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/messages/ReaderMessageSink.java", "insertions": 39, "deletions": 0}, {"lines": 44, "filePath": "jetty-websocket/jetty-websocket-api/src/main/java/org/eclipse/jetty/websocket/api/BadPayloadException.java", "insertions": 44, "deletions": 0}, {"lines": 53, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/sockets/annotations/AnnotatedTextStreamSocket.java", "insertions": 0, "deletions": 53}, {"lines": 3, "filePath": "jetty-osgi/jetty-osgi-boot/jettyhome/etc/jetty.xml", "insertions": 2, "deletions": 1}, {"lines": 42, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/decoders/ByteArrayDecoder.java", "insertions": 42, "deletions": 0}, {"lines": 56, "filePath": "jetty-websocket/jetty-websocket-common/src/main/java/org/eclipse/jetty/websocket/common/util/DuplicateAnnotationException.java", "insertions": 56, "deletions": 0}, {"lines": 209, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/JsrEchoTest.java", "insertions": 209, "deletions": 0}, {"lines": 55, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/streaming/StringReturnReaderParamSocket.java", "insertions": 55, "deletions": 0}, {"lines": 63, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/messages/DecodedBinaryMessageSink.java", "insertions": 0, "deletions": 63}, {"lines": 167, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/messages/InputStreamMessageSinkTest.java", "insertions": 167, "deletions": 0}, {"lines": 152, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/MemoryUsageTest.java", "insertions": 0, "deletions": 152}, {"lines": 0, "filePath": "jetty-websocket/{websocket-api => jetty-websocket-api}/src/main/java/org/eclipse/jetty/websocket/api/annotations/package-info.java", "insertions": 0, "deletions": 0}, {"lines": 391, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/internal/ExtensionStack.java", "insertions": 391, "deletions": 0}, {"lines": 402, "filePath": "jetty-websocket/jetty-websocket-client/src/main/java/org/eclipse/jetty/websocket/client/ClientUpgradeRequest.java", "insertions": 402, "deletions": 0}, {"lines": 1, "filePath": "jetty-websocket/javax-websocket-server-impl/src/main/resources/META-INF/services/javax.servlet.ServletContainerInitializer", "insertions": 0, "deletions": 1}, {"lines": 0, "filePath": "jetty-websocket/{websocket-tests => javax-websocket-tests}/src/test/resources/data/small.png", "insertions": 0, "deletions": 0}, {"lines": 74, "filePath": "jetty-websocket/jetty-websocket-server/pom.xml", "insertions": 74, "deletions": 0}, {"lines": 68, "filePath": "jetty-websocket/websocket-api/pom.xml", "insertions": 0, "deletions": 68}, {"lines": 39, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/extensions/AbstractExtensionTest.java", "insertions": 0, "deletions": 39}, {"lines": 57, "filePath": "jetty-websocket/websocket-servlet/src/test/java/examples/MyAdvancedEchoCreator.java", "insertions": 0, "deletions": 57}, {"lines": 66, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/decoders/FloatDecoder.java", "insertions": 0, "deletions": 66}, {"lines": 159, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/AbstractExtension.java", "insertions": 159, "deletions": 0}, {"lines": 16, "filePath": "jetty-http/src/test/java/org/eclipse/jetty/http/HttpGeneratorServerTest.java", "insertions": 8, "deletions": 8}, {"lines": 253, "filePath": "jetty-websocket/javax-websocket-server/src/main/java/org/eclipse/jetty/websocket/jsr356/server/internal/AnnotatedServerEndpointConfig.java", "insertions": 253, "deletions": 0}, {"lines": 112, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/ConfiguredEchoSocket.java", "insertions": 112, "deletions": 0}, {"lines": 101, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/util/TextUtil.java", "insertions": 0, "deletions": 101}, {"lines": 59, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/frames/BinaryFrame.java", "insertions": 0, "deletions": 59}, {"lines": 69, "filePath": "jetty-websocket/javax-websocket-client/src/main/java/org/eclipse/jetty/websocket/jsr356/client/ClientUpgradeRequestImpl.java", "insertions": 69, "deletions": 0}, {"lines": 30, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/UpgradeResponse.java", "insertions": 30, "deletions": 0}, {"lines": 59, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/BasicEchoEndpointConfigContextListener.java", "insertions": 59, "deletions": 0}, {"lines": 47, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/InfoServlet.java", "insertions": 0, "deletions": 47}, {"lines": 60, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/misbehaving/AnnotatedRuntimeOnOpen.java", "insertions": 0, "deletions": 60}, {"lines": 163, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/CloseInfoTest.java", "insertions": 0, "deletions": 163}, {"lines": 116, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/WebSocketExtensionRegistry.java", "insertions": 116, "deletions": 0}, {"lines": 118, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/extensions/Frame.java", "insertions": 0, "deletions": 118}, {"lines": 54, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/partial/PartialTextSessionSocket.java", "insertions": 54, "deletions": 0}, {"lines": 131, "filePath": "jetty-websocket/javax-websocket-tests/src/main/java/org/eclipse/jetty/websocket/jsr356/tests/WSURI.java", "insertions": 131, "deletions": 0}, {"lines": 44, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/BasicOpenCloseSessionSocket.java", "insertions": 44, "deletions": 0}, {"lines": 13, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/resources/jetty-logging.properties", "insertions": 0, "deletions": 13}, {"lines": 87, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/internal/IdentityExtension.java", "insertions": 87, "deletions": 0}, {"lines": 46, "filePath": "jetty-websocket/jetty-websocket-api/src/main/java/org/eclipse/jetty/websocket/api/WebSocketException.java", "insertions": 46, "deletions": 0}, {"lines": 86, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/DummyConnection.java", "insertions": 86, "deletions": 0}, {"lines": 66, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/primitives/ByteObjectTextSocket.java", "insertions": 0, "deletions": 66}, {"lines": 81, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/extensions/ExtensionFactory.java", "insertions": 0, "deletions": 81}, {"lines": 157, "filePath": "jetty-websocket/jetty-websocket-api/src/main/java/org/eclipse/jetty/websocket/api/RemoteEndpoint.java", "insertions": 157, "deletions": 0}, {"lines": 37, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/InvalidCloseIntSocket.java", "insertions": 37, "deletions": 0}, {"lines": 90, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/message/StringMessageSink.java", "insertions": 0, "deletions": 90}, {"lines": 53, "filePath": "jetty-websocket/jetty-websocket-api/src/main/java/org/eclipse/jetty/websocket/api/FrameCallback.java", "insertions": 53, "deletions": 0}, {"lines": 39, "filePath": "jetty-websocket/websocket-servlet/src/test/java/examples/MyEchoServlet.java", "insertions": 0, "deletions": 39}, {"lines": 63, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/partial/PartialTextSocket.java", "insertions": 0, "deletions": 63}, {"lines": 0, "filePath": "jetty-websocket/{websocket-api => jetty-websocket-api}/src/main/java/org/eclipse/jetty/websocket/api/WebSocketBehavior.java", "insertions": 0, "deletions": 0}, {"lines": 42, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/echo/EchoAsyncTextSocket.java", "insertions": 42, "deletions": 0}, {"lines": 55, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/jsr356/AbstractJsrTrackingSocket.java", "insertions": 0, "deletions": 55}, {"lines": 0, "filePath": "jetty-websocket/{websocket-tests => javax-websocket-tests}/src/test/resources/data/largest.jpg", "insertions": 0, "deletions": 0}, {"lines": 26, "filePath": "jetty-websocket/websocket-tests/src/test/resources/wsuf-alt-config-via-listener.xml", "insertions": 0, "deletions": 26}, {"lines": 37, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/resources/jsr-browser-debug-tool/index.html", "insertions": 0, "deletions": 37}, {"lines": 65, "filePath": "jetty-websocket/jetty-websocket-common/src/test/java/org/eclipse/jetty/websocket/common/endpoints/adapters/ListenerEchoSocket.java", "insertions": 65, "deletions": 0}, {"lines": 33, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/resources/jsr-browser-debug-tool/main.css", "insertions": 0, "deletions": 33}, {"lines": 172, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/io/MockEndPoint.java", "insertions": 0, "deletions": 172}, {"lines": 47, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/masks/FixedMasker.java", "insertions": 0, "deletions": 47}, {"lines": 3, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/ContextHandlerCollection.java", "insertions": 1, "deletions": 2}, {"lines": 156, "filePath": "jetty-websocket/jetty-websocket-api/src/test/java/org/eclipse/jetty/websocket/api/util/QuoteUtilTest.java", "insertions": 156, "deletions": 0}, {"lines": 115, "filePath": "jetty-websocket/javax-websocket-server/src/test/java/examples/JsrBrowserDebugTool.java", "insertions": 115, "deletions": 0}, {"lines": 33, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/echo/EchoStatelessAsyncTextSocket.java", "insertions": 33, "deletions": 0}, {"lines": 63, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/messages/DecodedMessageSink.java", "insertions": 63, "deletions": 0}, {"lines": 152, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/ReaderEchoTest.java", "insertions": 0, "deletions": 152}, {"lines": 226, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/message/MessageOutputStream.java", "insertions": 0, "deletions": 226}, {"lines": 67, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/primitives/DoubleObjectTextSocket.java", "insertions": 0, "deletions": 67}, {"lines": 28, "filePath": "jetty-websocket/javax-websocket-tests/src/main/java/org/eclipse/jetty/websocket/jsr356/tests/Timeouts.java", "insertions": 28, "deletions": 0}, {"lines": 140, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/ReaderEchoTest.java", "insertions": 140, "deletions": 0}, {"lines": 79, "filePath": "jetty-websocket/javax-websocket-tests/src/main/java/org/eclipse/jetty/websocket/jsr356/tests/ParserCapture.java", "insertions": 79, "deletions": 0}, {"lines": 13, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/HttpURI.java", "insertions": 10, "deletions": 3}, {"lines": 765, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/WebSocketClient.java", "insertions": 0, "deletions": 765}, {"lines": 146, "filePath": "jetty-websocket/websocket-servlet/src/main/java/org/eclipse/jetty/websocket/servlet/WebSocketServlet.java", "insertions": 93, "deletions": 53}, {"lines": 32, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/BasicOpenSocket.java", "insertions": 0, "deletions": 32}, {"lines": 109, "filePath": "jetty-websocket/jetty-websocket-api/src/main/java/org/eclipse/jetty/websocket/api/extensions/Frame.java", "insertions": 109, "deletions": 0}, {"lines": 456, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/Generator.java", "insertions": 0, "deletions": 456}, {"lines": 93, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/JsrEndpointFunctions_OnMessage_TextStreamTest.java", "insertions": 0, "deletions": 93}, {"lines": 31, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/handlers/InputStreamWholeHandler.java", "insertions": 31, "deletions": 0}, {"lines": 50, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/ByteBufferSocket.java", "insertions": 50, "deletions": 0}, {"lines": 42, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/LargeEchoContextListener.java", "insertions": 42, "deletions": 0}, {"lines": 1, "filePath": "jetty-websocket/javax-websocket-server/src/main/resources/META-INF/services/javax.servlet.ServletContainerInitializer", "insertions": 1, "deletions": 0}, {"lines": 61, "filePath": "jetty-websocket/javax-websocket-tests/src/main/java/org/eclipse/jetty/websocket/jsr356/tests/framehandlers/FrameEcho.java", "insertions": 61, "deletions": 0}, {"lines": 43, "filePath": "jetty-websocket/jetty-websocket-api/src/main/java/org/eclipse/jetty/websocket/api/MessageTooLargeException.java", "insertions": 43, "deletions": 0}, {"lines": 273, "filePath": "jetty-websocket/websocket-servlet/src/main/java/org/eclipse/jetty/websocket/servlet/ServletUpgradeResponse.java", "insertions": 88, "deletions": 185}, {"lines": 101, "filePath": "jetty-websocket/jetty-websocket-common/src/main/java/org/eclipse/jetty/websocket/common/message/ByteBufferMessageSink.java", "insertions": 101, "deletions": 0}, {"lines": 35, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/BasicBinaryMessageByteBufferSocket.java", "insertions": 0, "deletions": 35}, {"lines": 81, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/coders/tests/FruitDecoder.java", "insertions": 81, "deletions": 0}, {"lines": 217, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/client/AnnotatedEndpointConfigTest.java", "insertions": 217, "deletions": 0}, {"lines": 171, "filePath": "jetty-websocket/jetty-websocket-api/src/main/java/org/eclipse/jetty/websocket/api/Session.java", "insertions": 171, "deletions": 0}, {"lines": 60, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/decoders/PongMessageDecoder.java", "insertions": 60, "deletions": 0}, {"lines": 105, "filePath": "jetty-websocket/jetty-websocket-common/src/main/java/org/eclipse/jetty/websocket/common/JettyWebSocketFrame.java", "insertions": 105, "deletions": 0}, {"lines": 67, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/pong/PongContextListener.java", "insertions": 0, "deletions": 67}, {"lines": 161, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/extensions/ExtensionConfigTest.java", "insertions": 161, "deletions": 0}, {"lines": 0, "filePath": "jetty-websocket/{websocket-common => jetty-websocket-common}/src/main/resources/META-INF/services/org.eclipse.jetty.websocket.common.reflect.ArgIdentifier", "insertions": 0, "deletions": 0}, {"lines": 72, "filePath": "jetty-websocket/jetty-websocket-api/src/test/java/org/eclipse/jetty/websocket/api/util/QuoteUtil_QuoteTest.java", "insertions": 72, "deletions": 0}, {"lines": 46, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/message/PartialTextMessage.java", "insertions": 0, "deletions": 46}, {"lines": 50, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/echo/BasicEchoSocketContextListener.java", "insertions": 0, "deletions": 50}, {"lines": 81, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/JavaxWebSocketFrameHandler_OnOpenTest.java", "insertions": 81, "deletions": 0}, {"lines": 28, "filePath": "jetty-websocket/javax-websocket-tests/src/test/resources/wsuf-config-via-servlet-init.xml", "insertions": 28, "deletions": 0}, {"lines": 32, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/handlers/ExtendedMessageHandler.java", "insertions": 0, "deletions": 32}, {"lines": 72, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/LocalWebSocketSession.java", "insertions": 0, "deletions": 72}, {"lines": 282, "filePath": "jetty-websocket/javax-websocket-client/src/main/java/org/eclipse/jetty/websocket/jsr356/client/JavaxWebSocketClientContainer.java", "insertions": 282, "deletions": 0}, {"lines": 30, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/handlers/ByteArrayWholeHandler.java", "insertions": 0, "deletions": 30}, {"lines": 39, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/message/MessageSink.java", "insertions": 0, "deletions": 39}, {"lines": 1330, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/GeneratorTest.java", "insertions": 1330, "deletions": 0}, {"lines": 33, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/BasicErrorSessionSocket.java", "insertions": 33, "deletions": 0}, {"lines": 15, "filePath": "jetty-websocket/javax-websocket-server-impl/src/main/config/modules/websocket.mod", "insertions": 0, "deletions": 15}, {"lines": 93, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/autobahn/AutobahnWebSocketServer.java", "insertions": 93, "deletions": 0}, {"lines": 207, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/JavaxWebSocketAsyncRemote.java", "insertions": 207, "deletions": 0}, {"lines": 25, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/coders/Fruit.java", "insertions": 25, "deletions": 0}, {"lines": 45, "filePath": "jetty-websocket/jetty-websocket-server/src/main/java/org/eclipse/jetty/websocket/server/JettyWebSocketServletFrameHandlerFactory.java", "insertions": 45, "deletions": 0}, {"lines": 183, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/UpgradeResponse.java", "insertions": 0, "deletions": 183}, {"lines": 65, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/coders/TimeDecoder.java", "insertions": 0, "deletions": 65}, {"lines": 119, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/DeploymentExceptionTest.java", "insertions": 119, "deletions": 0}, {"lines": 180, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/WSServer.java", "insertions": 0, "deletions": 180}, {"lines": 52, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/InfoContextAltAttributeListener.java", "insertions": 0, "deletions": 52}, {"lines": 30, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/handlers/ByteBufferPartialHandler.java", "insertions": 30, "deletions": 0}, {"lines": 180, "filePath": "jetty-websocket/javax-websocket-tests/src/test/webapp/index.html", "insertions": 180, "deletions": 0}, {"lines": 0, "filePath": "jetty-websocket/{websocket-tests => javax-websocket-tests}/src/test/resources/data/small.png.sha", "insertions": 0, "deletions": 0}, {"lines": 49, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/decoders/BooleanDecoder.java", "insertions": 0, "deletions": 49}, {"lines": 42, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/io/FutureWriteCallback.java", "insertions": 0, "deletions": 42}, {"lines": 255, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/JavaxWebSocketFrameHandlerMetadata.java", "insertions": 255, "deletions": 0}, {"lines": 81, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/extensions/compress/ByteAccumulator.java", "insertions": 0, "deletions": 81}, {"lines": 296, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/encoders/AvailableEncoders.java", "insertions": 296, "deletions": 0}, {"lines": 0, "filePath": "jetty-websocket/{websocket-common => jetty-websocket-common}/src/main/java/org/eclipse/jetty/websocket/common/message/package-info.java", "insertions": 0, "deletions": 0}, {"lines": 324, "filePath": "jetty-websocket/javax-websocket-server/src/main/java/org/eclipse/jetty/websocket/jsr356/server/JavaxWebSocketServerContainer.java", "insertions": 324, "deletions": 0}, {"lines": 167, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/message/DispatchedMessageSink.java", "insertions": 0, "deletions": 167}, {"lines": 108, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/client/EndpointEchoTest.java", "insertions": 108, "deletions": 0}, {"lines": 110, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/ConnectionUpgradeToBufferTest.java", "insertions": 0, "deletions": 110}, {"lines": 57, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/pong/PongSocket.java", "insertions": 0, "deletions": 57}, {"lines": 12, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ChannelEndPoint.java", "insertions": 6, "deletions": 6}, {"lines": 107, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/messages/ReaderMessageSinkTest.java", "insertions": 107, "deletions": 0}, {"lines": 104, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/extensions/IdentityExtensionTest.java", "insertions": 0, "deletions": 104}, {"lines": 33, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/BasicTextMessageStringSocket.java", "insertions": 0, "deletions": 33}, {"lines": 71, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/encoders/EncodeFailedFuture.java", "insertions": 0, "deletions": 71}, {"lines": 44, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/messages/CallbackBuffer.java", "insertions": 44, "deletions": 0}, {"lines": 140, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/InputStreamEchoTest.java", "insertions": 140, "deletions": 0}, {"lines": 492, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/WebSocketRemoteEndpoint.java", "insertions": 0, "deletions": 492}, {"lines": 276, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/ClientCloseTest.java", "insertions": 0, "deletions": 276}, {"lines": 63, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/decoders/IntegerDecoder.java", "insertions": 0, "deletions": 63}, {"lines": 323, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/UpgradeRequest.java", "insertions": 0, "deletions": 323}, {"lines": 37, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/samples/CloseReasonSessionSocket.java", "insertions": 0, "deletions": 37}, {"lines": 45, "filePath": "jetty-websocket/javax-websocket-server/src/test/java/examples/StreamingEchoSocket.java", "insertions": 45, "deletions": 0}, {"lines": 0, "filePath": "jetty-websocket/{websocket-tests => javax-websocket-tests}/src/test/resources/data/largest.jpg.sha", "insertions": 0, "deletions": 0}, {"lines": 102, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/BadOpCodesTest.java", "insertions": 0, "deletions": 102}, {"lines": 37, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/message/ByteBufferMessageSink.java", "insertions": 0, "deletions": 37}, {"lines": 297, "filePath": "jetty-websocket/javax-websocket-tests/src/main/java/org/eclipse/jetty/websocket/jsr356/tests/LocalFuzzer.java", "insertions": 297, "deletions": 0}, {"lines": 53, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/sockets/annotations/BadDuplicateBinarySocket.java", "insertions": 0, "deletions": 53}, {"lines": 94, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/quotes/QuotesUtil.java", "insertions": 94, "deletions": 0}, {"lines": 253, "filePath": "jetty-websocket/jetty-websocket-api/src/main/java/org/eclipse/jetty/websocket/api/extensions/ExtensionConfig.java", "insertions": 253, "deletions": 0}, {"lines": 86, "filePath": "jetty-websocket/javax-websocket-server-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/server/JsrHandshakeRequest.java", "insertions": 0, "deletions": 86}, {"lines": 132, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/DecoderReaderMessageSinkTest.java", "insertions": 0, "deletions": 132}, {"lines": 58, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/primitives/IntTextSocket.java", "insertions": 58, "deletions": 0}, {"lines": 64, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/client/JsrClientEchoTrackingSocket.java", "insertions": 64, "deletions": 0}, {"lines": 12, "filePath": "jetty-websocket/javax-websocket-tests/src/test/resources/pong-config-web.xml", "insertions": 12, "deletions": 0}, {"lines": 23, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/extensions/identity/package-info.java", "insertions": 0, "deletions": 23}, {"lines": 104, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/messages/ByteArrayMessageSink.java", "insertions": 104, "deletions": 0}, {"lines": 63, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/echo/EchoReturnEndpoint.java", "insertions": 0, "deletions": 63}, {"lines": 157, "filePath": "jetty-websocket/websocket-api/src/test/java/org/eclipse/jetty/websocket/api/util/QuoteUtilTest.java", "insertions": 0, "deletions": 157}, {"lines": 226, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/messages/MessageWriter.java", "insertions": 226, "deletions": 0}, {"lines": 29, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/Configurable.java", "insertions": 0, "deletions": 29}, {"lines": 12, "filePath": "jetty-websocket/websocket-core/fuzzingserver.json", "insertions": 12, "deletions": 0}, {"lines": 10, "filePath": "jetty-websocket/websocket-servlet/src/main/java/org/eclipse/jetty/websocket/servlet/WebSocketCreator.java", "insertions": 3, "deletions": 7}, {"lines": 77, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/extensions/compress/DeflateFrameExtension.java", "insertions": 0, "deletions": 77}, {"lines": 49, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/quotes/QuotesEncoder.java", "insertions": 49, "deletions": 0}, {"lines": 61, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/decoders/PongMessageDecoder.java", "insertions": 0, "deletions": 61}, {"lines": 47, "filePath": "jetty-websocket/javax-websocket-tests/src/main/java/org/eclipse/jetty/websocket/jsr356/tests/BadFrame.java", "insertions": 47, "deletions": 0}, {"lines": 18, "filePath": "jetty-websocket/jetty-websocket-common/src/test/resources/jetty-logging.properties", "insertions": 18, "deletions": 0}, {"lines": 39, "filePath": "jetty-websocket/websocket-servlet/src/test/java/examples/MyBinaryEchoSocket.java", "insertions": 0, "deletions": 39}, {"lines": 45, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/encoders/ByteArrayEncoder.java", "insertions": 45, "deletions": 0}, {"lines": 64, "filePath": "jetty-websocket/javax-websocket-tests/src/main/java/org/eclipse/jetty/websocket/jsr356/tests/FunctionMethod.java", "insertions": 64, "deletions": 0}, {"lines": 84, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/AbstractJsrEndpointFunctionsTest.java", "insertions": 0, "deletions": 84}, {"lines": 38, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/InvalidWebSocketException.java", "insertions": 38, "deletions": 0}, {"lines": 59, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/coders/ValidDualEncoder.java", "insertions": 0, "deletions": 59}, {"lines": 729, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/internal/WebSocketChannel.java", "insertions": 729, "deletions": 0}, {"lines": 61, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/decoders/LongDecoder.java", "insertions": 61, "deletions": 0}, {"lines": 228, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/JettyClientContainerProvider.java", "insertions": 0, "deletions": 228}, {"lines": 32, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/extensions/compress/XWebkitDeflateFrameExtension.java", "insertions": 0, "deletions": 32}, {"lines": 32, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/JsrServerTrackingSocket.java", "insertions": 0, "deletions": 32}, {"lines": 0, "filePath": "jetty-websocket/{javax-websocket-client-impl => javax-websocket-common}/src/main/java/org/eclipse/jetty/websocket/jsr356/encoders/ShortEncoder.java", "insertions": 0, "deletions": 0}, {"lines": 38, "filePath": "jetty-websocket/jetty-websocket-client/src/main/java/org/eclipse/jetty/websocket/client/impl/DefaultHttpClientProvider.java", "insertions": 38, "deletions": 0}, {"lines": 74, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/OutgoingNetworkBytesCapture.java", "insertions": 74, "deletions": 0}, {"lines": 107, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/ClientWriteThread.java", "insertions": 0, "deletions": 107}, {"lines": 65, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/JsrUpgradeListener.java", "insertions": 0, "deletions": 65}, {"lines": 446, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/client/UpgradeRequest.java", "insertions": 446, "deletions": 0}, {"lines": 268, "filePath": "jetty-websocket/javax-websocket-tests/src/main/java/org/eclipse/jetty/websocket/jsr356/tests/NetworkFuzzer.java", "insertions": 268, "deletions": 0}, {"lines": 85, "filePath": "jetty-websocket/javax-websocket-server-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/server/ServerEndpointConfigWrapper.java", "insertions": 0, "deletions": 85}, {"lines": 0, "filePath": "jetty-websocket/{websocket-api => jetty-websocket-api}/src/main/java/org/eclipse/jetty/websocket/api/WebSocketAdapter.java", "insertions": 0, "deletions": 0}, {"lines": 107, "filePath": "jetty-websocket/websocket-common/websocket-states.txt", "insertions": 0, "deletions": 107}, {"lines": 70, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/coders/DateDecoder.java", "insertions": 0, "deletions": 70}, {"lines": 232, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/DecoratorsTest.java", "insertions": 0, "deletions": 232}, {"lines": 101, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/IdleTimeoutTest.java", "insertions": 0, "deletions": 101}, {"lines": 244, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/MessageInputStreamTest.java", "insertions": 0, "deletions": 244}, {"lines": 40, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/sockets/IdleTimeoutOnOpenSocket.java", "insertions": 0, "deletions": 40}, {"lines": 84, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/AbstractJsrEndpointFunctionsTest.java", "insertions": 0, "deletions": 84}, {"lines": 514, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/ClientCloseHandshakeTest.java", "insertions": 0, "deletions": 514}, {"lines": 49, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/WebSocketServerConnection.java", "insertions": 0, "deletions": 49}, {"lines": 49, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/CapturedHexPayloads.java", "insertions": 0, "deletions": 49}, {"lines": 30, "filePath": "jetty-websocket/jetty-websocket-common/src/test/java/org/eclipse/jetty/websocket/common/endpoints/annotated/NoopSocket.java", "insertions": 30, "deletions": 0}, {"lines": 106, "filePath": "jetty-websocket/javax-websocket-tests/src/main/java/org/eclipse/jetty/websocket/jsr356/tests/matchers/IsMessageHandlerType.java", "insertions": 106, "deletions": 0}, {"lines": 42, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/OutgoingFrames.java", "insertions": 42, "deletions": 0}, {"lines": 69, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/coders/DateDecoder.java", "insertions": 69, "deletions": 0}, {"lines": 23, "filePath": "jetty-websocket/websocket-tests/src/test/resources/alt-filter-web.xml", "insertions": 0, "deletions": 23}, {"lines": 393, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/WebSocketFrame.java", "insertions": 0, "deletions": 393}, {"lines": 12, "filePath": "jetty-websocket/websocket-tests/src/test/resources/large-echo-config-web.xml", "insertions": 0, "deletions": 12}, {"lines": 36, "filePath": "jetty-websocket/websocket-tests/src/test/resources/logback-test.xml", "insertions": 0, "deletions": 36}, {"lines": 583, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/extensions/compress/CompressExtension.java", "insertions": 0, "deletions": 583}, {"lines": 79, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/SaneFrameOrderingAssertion.java", "insertions": 0, "deletions": 79}, {"lines": 45, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/decoders/ReaderDecoder.java", "insertions": 0, "deletions": 45}, {"lines": 160, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/JavaxWebSocketBasicRemote.java", "insertions": 160, "deletions": 0}, {"lines": 220, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/quotes/QuotesEncoderTest.java", "insertions": 220, "deletions": 0}, {"lines": 44, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/BasicOpenCloseSessionSocket.java", "insertions": 0, "deletions": 44}, {"lines": 47, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/TrackingSocket.java", "insertions": 0, "deletions": 47}, {"lines": 110, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/JavaxWebSocketFrameHandler_OnErrorTest.java", "insertions": 110, "deletions": 0}, {"lines": 22, "filePath": "jetty-websocket/pom.xml", "insertions": 11, "deletions": 11}, {"lines": 38, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/InvalidOpenCloseReasonSocket.java", "insertions": 38, "deletions": 0}, {"lines": 276, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/StreamTest.java", "insertions": 276, "deletions": 0}, {"lines": 44, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/IdleTimeoutOnOpenEndpoint.java", "insertions": 44, "deletions": 0}, {"lines": 48, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/message/PartialBinaryMessageSink.java", "insertions": 0, "deletions": 48}, {"lines": 61, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/decoders/DoubleDecoder.java", "insertions": 61, "deletions": 0}, {"lines": 140, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/ReflectUtilsTest.java", "insertions": 0, "deletions": 140}, {"lines": 197, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/JsrAsyncRemote.java", "insertions": 0, "deletions": 197}, {"lines": 75, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/jsr356/JsrTrackingEndpoint.java", "insertions": 0, "deletions": 75}, {"lines": 6, "filePath": "jetty-websocket/websocket-core/src/main/resources/META-INF/services/org.eclipse.jetty.websocket.core.Extension", "insertions": 6, "deletions": 0}, {"lines": 120, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/JavaxWebSocketContainer.java", "insertions": 120, "deletions": 0}, {"lines": 163, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/RawFrameBuilder.java", "insertions": 163, "deletions": 0}, {"lines": 80, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/io/payload/DeMaskProcessor.java", "insertions": 0, "deletions": 80}, {"lines": 45, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/decoders/InputStreamDecoder.java", "insertions": 0, "deletions": 45}, {"lines": 50, "filePath": "jetty-websocket/jetty-websocket-common/src/test/java/org/eclipse/jetty/websocket/common/invoke/NameParamIdentifier.java", "insertions": 50, "deletions": 0}, {"lines": 515, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/Frame.java", "insertions": 515, "deletions": 0}, {"lines": 36, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/reflect/NameArgIdentifier.java", "insertions": 0, "deletions": 36}, {"lines": 47, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/echo/LargeEchoConfiguredSocket.java", "insertions": 47, "deletions": 0}, {"lines": 8, "filePath": "jetty-websocket/websocket-tests/src/test/resources/empty-web.xml", "insertions": 0, "deletions": 8}, {"lines": 23, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/package-info.java", "insertions": 0, "deletions": 23}, {"lines": 157, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/QuotesDecoderTest.java", "insertions": 0, "deletions": 157}, {"lines": 62, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/echo/EchoReturnEndpoint.java", "insertions": 62, "deletions": 0}, {"lines": 46, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/WebSocketException.java", "insertions": 46, "deletions": 0}, {"lines": 40, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/idletimeout/OnOpenIdleTimeoutSocket.java", "insertions": 0, "deletions": 40}, {"lines": 123, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/coders/DecoderTextStreamTest.java", "insertions": 0, "deletions": 123}, {"lines": 127, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/Utf8CharBufferTest.java", "insertions": 0, "deletions": 127}, {"lines": 28, "filePath": "jetty-websocket/jetty-websocket-common/src/main/java/org/eclipse/jetty/websocket/common/SessionListener.java", "insertions": 28, "deletions": 0}, {"lines": 1, "filePath": "jetty-websocket/javax-websocket-client/src/main/resources/META-INF/services/javax.websocket.ContainerProvider", "insertions": 1, "deletions": 0}, {"lines": 29, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/handlers/LongMessageHandler.java", "insertions": 0, "deletions": 29}, {"lines": 41, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/decoders/ByteBufferDecoder.java", "insertions": 0, "deletions": 41}, {"lines": 0, "filePath": "jetty-websocket/websocket-tests/src/test/resources/keystore", "insertions": 0, "deletions": 0}, {"lines": 158, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/quotes/QuotesDecoderTest.java", "insertions": 158, "deletions": 0}, {"lines": 78, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/OutgoingNetworkBytesCapture.java", "insertions": 0, "deletions": 78}, {"lines": 136, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/client/WebSocketCoreClient.java", "insertions": 136, "deletions": 0}, {"lines": 38, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/DuplicateCoderException.java", "insertions": 38, "deletions": 0}, {"lines": 127, "filePath": "jetty-websocket/jetty-websocket-client/src/main/java/org/eclipse/jetty/websocket/client/impl/DelegatedClientUpgradeResponse.java", "insertions": 127, "deletions": 0}, {"lines": 59, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/primitives/ByteTextSocket.java", "insertions": 0, "deletions": 59}, {"lines": 315, "filePath": "jetty-websocket/websocket-client/src/test/java/examples/ClientDemo.java", "insertions": 0, "deletions": 315}, {"lines": 62, "filePath": "jetty-websocket/javax-websocket-tests/src/main/java/org/eclipse/jetty/websocket/jsr356/tests/UpgradeUtils.java", "insertions": 62, "deletions": 0}, {"lines": 50, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/util/MaskedByteBuffer.java", "insertions": 0, "deletions": 50}, {"lines": 146, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/TrackingEndpoint.java", "insertions": 0, "deletions": 146}, {"lines": 97, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/Extension.java", "insertions": 97, "deletions": 0}, {"lines": 20, "filePath": "jetty-websocket/websocket-core/fuzzingclient.json", "insertions": 20, "deletions": 0}, {"lines": 1573, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/ParserTest.java", "insertions": 0, "deletions": 1573}, {"lines": 58, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/NativeWebSocketServletContainerInitializer.java", "insertions": 0, "deletions": 58}, {"lines": 106, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/AtomicConnectionState.java", "insertions": 0, "deletions": 106}, {"lines": 97, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/IdleTimeoutTest.java", "insertions": 0, "deletions": 97}, {"lines": 223, "filePath": "jetty-websocket/jetty-websocket-common/src/test/java/org/eclipse/jetty/websocket/common/handshake/DummyUpgradeRequest.java", "insertions": 223, "deletions": 0}, {"lines": 0, "filePath": "jetty-websocket/websocket-common/src/main/javadoc/org/eclipse/jetty/websocket/common/doc-files/websocket-stack-extensions.png", "insertions": 0, "deletions": 0}, {"lines": 64, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/AcceptHashTest.java", "insertions": 64, "deletions": 0}, {"lines": 269, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/server/Negotiation.java", "insertions": 269, "deletions": 0}, {"lines": 34, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/configs/EchoSocketConfigurator.java", "insertions": 34, "deletions": 0}, {"lines": 31, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/handlers/ExtendedMessageHandler.java", "insertions": 31, "deletions": 0}, {"lines": 126, "filePath": "jetty-websocket/jetty-websocket-api/src/main/java/org/eclipse/jetty/websocket/api/WebSocketPolicy.java", "insertions": 126, "deletions": 0}, {"lines": 71, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/quotes/QuotesDecoder.java", "insertions": 71, "deletions": 0}, {"lines": 37, "filePath": "jetty-websocket/websocket-servlet/src/test/java/examples/MyEchoSocket.java", "insertions": 0, "deletions": 37}, {"lines": 42, "filePath": "jetty-websocket/jetty-websocket-common/src/main/java/org/eclipse/jetty/websocket/common/message/CallbackBuffer.java", "insertions": 42, "deletions": 0}, {"lines": 77, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/WebSocketServerFactoryTest.java", "insertions": 0, "deletions": 77}, {"lines": 281, "filePath": "jetty-websocket/websocket-server/src/test/java/examples/BrowserSocket.java", "insertions": 0, "deletions": 281}, {"lines": 85, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/client/EmptyClientEndpointConfig.java", "insertions": 0, "deletions": 85}, {"lines": 45, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/reflect/ArgIdentifiers.java", "insertions": 0, "deletions": 45}, {"lines": 57, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/echo/BasicEchoEndpointContextListener.java", "insertions": 0, "deletions": 57}, {"lines": 30, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/handlers/StringPartialHandler.java", "insertions": 30, "deletions": 0}, {"lines": 114, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/Sha1Sum.java", "insertions": 0, "deletions": 114}, {"lines": 59, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/primitives/LongTextSocket.java", "insertions": 0, "deletions": 59}, {"lines": 61, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/decoders/LongDecoder.java", "insertions": 0, "deletions": 61}, {"lines": 151, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/util/InvokerUtils_StaticParamsTest.java", "insertions": 151, "deletions": 0}, {"lines": 185, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/AnnotatedMaxMessageSizeTest.java", "insertions": 0, "deletions": 185}, {"lines": 119, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/coders/BadDualDecoder.java", "insertions": 119, "deletions": 0}, {"lines": 56, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/util/DuplicateAnnotationException.java", "insertions": 56, "deletions": 0}, {"lines": 47, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/examples/GetHttpSessionSocket.java", "insertions": 0, "deletions": 47}, {"lines": 268, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/SessionTest.java", "insertions": 0, "deletions": 268}, {"lines": 69, "filePath": "jetty-websocket/websocket-common/pom.xml", "insertions": 0, "deletions": 69}, {"lines": 53, "filePath": "jetty-websocket/jetty-websocket-common/src/test/java/org/eclipse/jetty/websocket/common/endpoints/annotated/AnnotatedTextStreamSocket.java", "insertions": 53, "deletions": 0}, {"lines": 153, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/InputStreamEchoTest.java", "insertions": 0, "deletions": 153}, {"lines": 359, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/internal/FrameFlusher.java", "insertions": 359, "deletions": 0}, {"lines": 119, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/sockets/annotations/SessionSocket.java", "insertions": 0, "deletions": 119}, {"lines": 185, "filePath": "jetty-websocket/javax-websocket-tests/src/main/java/org/eclipse/jetty/websocket/jsr356/tests/CoreServer.java", "insertions": 185, "deletions": 0}, {"lines": 638, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/Parser.java", "insertions": 0, "deletions": 638}, {"lines": 33, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/BasicCloseSocket.java", "insertions": 0, "deletions": 33}, {"lines": 91, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/AltFilterTest.java", "insertions": 0, "deletions": 91}, {"lines": 66, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/primitives/LongObjectTextSocket.java", "insertions": 0, "deletions": 66}, {"lines": 348, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/ExtensionConfig.java", "insertions": 348, "deletions": 0}, {"lines": 50, "filePath": "jetty-websocket/javax-websocket-common/src/test/resources/jetty-logging.properties", "insertions": 50, "deletions": 0}, {"lines": 144, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/io/FrameFlusherTest.java", "insertions": 0, "deletions": 144}, {"lines": 88, "filePath": "jetty-websocket/jetty-websocket-client/src/test/java/org/eclipse/jetty/websocket/client/HttpClientInitTest.java", "insertions": 88, "deletions": 0}, {"lines": 49, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/InfoContextAttributeListener.java", "insertions": 0, "deletions": 49}, {"lines": 62, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/partial/PartialTextSocket.java", "insertions": 62, "deletions": 0}, {"lines": 38, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/echo/LargeEchoDefaultSocket.java", "insertions": 0, "deletions": 38}, {"lines": 45, "filePath": "jetty-websocket/jetty-websocket-api/src/main/java/org/eclipse/jetty/websocket/api/InvalidWebSocketException.java", "insertions": 45, "deletions": 0}, {"lines": 46, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/annotations/OnWebSocketClose.java", "insertions": 0, "deletions": 46}, {"lines": 58, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/Callback.java", "insertions": 55, "deletions": 3}, {"lines": 179, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/LocalWebSocketConnection.java", "insertions": 0, "deletions": 179}, {"lines": 34, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/BasicErrorSessionThrowableSocket.java", "insertions": 0, "deletions": 34}, {"lines": 53, "filePath": "jetty-websocket/javax-websocket-client/src/main/java/org/eclipse/jetty/websocket/jsr356/client/JavaxWebSocketClientFrameHandlerFactory.java", "insertions": 53, "deletions": 0}, {"lines": 34, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/StatelessTextMessageStringSocket.java", "insertions": 0, "deletions": 34}, {"lines": 78, "filePath": "jetty-websocket/jetty-websocket-common/src/test/java/org/eclipse/jetty/websocket/common/endpoints/annotated/MyEchoSocket.java", "insertions": 78, "deletions": 0}, {"lines": 45, "filePath": "jetty-websocket/jetty-websocket-api/src/main/java/org/eclipse/jetty/websocket/api/annotations/OnWebSocketConnect.java", "insertions": 45, "deletions": 0}, {"lines": 77, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/AbstractJavaxWebSocketFrameHandlerTest.java", "insertions": 77, "deletions": 0}, {"lines": 29, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/handlers/LongMessageHandler.java", "insertions": 29, "deletions": 0}, {"lines": 255, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/WebSocketClientTest.java", "insertions": 0, "deletions": 255}, {"lines": 340, "filePath": "jetty-websocket/javax-websocket-server-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/server/deploy/WebSocketServerContainerInitializer.java", "insertions": 0, "deletions": 340}, {"lines": 92, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/endpoints/AbstractStringEndpoint.java", "insertions": 0, "deletions": 92}, {"lines": 59, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/primitives/IntParamTextSocket.java", "insertions": 59, "deletions": 0}, {"lines": 34, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/BasicErrorThrowableSessionSocket.java", "insertions": 0, "deletions": 34}, {"lines": 50, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/InfoContextListener.java", "insertions": 0, "deletions": 50}, {"lines": 57, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/sockets/annotations/AnnotatedBinaryStreamSocket.java", "insertions": 0, "deletions": 57}, {"lines": 26, "filePath": "jetty-websocket/javax-websocket-tests/src/test/resources/wsuf-alt-config-via-listener.xml", "insertions": 26, "deletions": 0}, {"lines": 91, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/JavaxWebSocketFrameHandler_OnMessage_BinaryStreamTest.java", "insertions": 91, "deletions": 0}, {"lines": 29, "filePath": "jetty-websocket/websocket-server/src/test/resources/jetty-logging.properties", "insertions": 0, "deletions": 29}, {"lines": 111, "filePath": "jetty-websocket/jetty-websocket-client/src/test/java/org/eclipse/jetty/websocket/client/WebSocketClientInitTest.java", "insertions": 111, "deletions": 0}, {"lines": 0, "filePath": "jetty-websocket/{websocket-tests => javax-websocket-tests}/src/test/resources/data/larger.png", "insertions": 0, "deletions": 0}, {"lines": 67, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/primitives/BooleanObjectTextParamSocket.java", "insertions": 0, "deletions": 67}, {"lines": 55, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/frames/ContinuationFrame.java", "insertions": 0, "deletions": 55}, {"lines": 51, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/binary/ByteBufferSocket.java", "insertions": 0, "deletions": 51}, {"lines": 150, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/BinaryStreamTest.java", "insertions": 150, "deletions": 0}, {"lines": 57, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/DuplicateAnnotationException.java", "insertions": 0, "deletions": 57}, {"lines": 186, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/client/DecoderReaderManySmallTest.java", "insertions": 186, "deletions": 0}, {"lines": 45, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/annotations/OnWebSocketConnect.java", "insertions": 0, "deletions": 45}, {"lines": 126, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/client/OnCloseTest.java", "insertions": 126, "deletions": 0}, {"lines": 141, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/JavaxWebSocketFrameHandler_OnMessage_TextTest.java", "insertions": 141, "deletions": 0}, {"lines": 52, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/internal/WebSocketCore.java", "insertions": 52, "deletions": 0}, {"lines": 135, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/LargeContainerTest.java", "insertions": 0, "deletions": 135}, {"lines": 53, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/coders/BadDualEncoder.java", "insertions": 53, "deletions": 0}, {"lines": 58, "filePath": "jetty-websocket/javax-websocket-client/src/main/java/org/eclipse/jetty/websocket/jsr356/client/DelegatedClientUpgradeResponse.java", "insertions": 58, "deletions": 0}, {"lines": 30, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/handlers/StringWholeHandler.java", "insertions": 0, "deletions": 30}, {"lines": 44, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/SessionFactory.java", "insertions": 0, "deletions": 44}, {"lines": 174, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/client/CookiesTest.java", "insertions": 174, "deletions": 0}, {"lines": 493, "filePath": "jetty-websocket/jetty-websocket-api/src/main/java/org/eclipse/jetty/websocket/api/util/QuoteUtil.java", "insertions": 493, "deletions": 0}, {"lines": 778, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/JavaxWebSocketFrameHandlerFactory.java", "insertions": 778, "deletions": 0}, {"lines": 69, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/ClientUpgradeResponse.java", "insertions": 0, "deletions": 69}, {"lines": 146, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/OpCode.java", "insertions": 146, "deletions": 0}, {"lines": 28, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/RemoteEndpointFactory.java", "insertions": 0, "deletions": 28}, {"lines": 140, "filePath": "jetty-websocket/javax-websocket-server/src/test/resources/jsr-browser-debug-tool/websocket.js", "insertions": 140, "deletions": 0}, {"lines": 1, "filePath": "jetty-websocket/javax-websocket-server-impl/src/main/resources/META-INF/services/org.eclipse.jetty.websocket.common.reflect.ArgIdentifier", "insertions": 0, "deletions": 1}, {"lines": 109, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/autobahn/AutobahnWebSocketNegotiator.java", "insertions": 109, "deletions": 0}, {"lines": 61, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/annotations/OnWebSocketMessage.java", "insertions": 0, "deletions": 61}, {"lines": 65, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/primitives/IntegerObjectTextSocket.java", "insertions": 65, "deletions": 0}, {"lines": 474, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/ClientContainer.java", "insertions": 0, "deletions": 474}, {"lines": 0, "filePath": "jetty-websocket/{websocket-server => javax-websocket-tests}/src/test/resources/keystore", "insertions": 0, "deletions": 0}, {"lines": 41, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/BufferUtil.java", "insertions": 40, "deletions": 1}, {"lines": 0, "filePath": "jetty-websocket/{javax-websocket-server-impl => javax-websocket-server}/src/test/java/examples/MyAuthedSocket.java", "insertions": 0, "deletions": 0}, {"lines": 137, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/chat/ChatWebSocketServer.java", "insertions": 137, "deletions": 0}, {"lines": 35, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/partial/PartialTrackingSocket.java", "insertions": 35, "deletions": 0}, {"lines": 66, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/primitives/FloatObjectTextSocket.java", "insertions": 66, "deletions": 0}, {"lines": 76, "filePath": "jetty-websocket/javax-websocket-tests/pom.xml", "insertions": 76, "deletions": 0}, {"lines": 61, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/sockets/listeners/ListenerPingPongSocket.java", "insertions": 0, "deletions": 61}, {"lines": 124, "filePath": "jetty-websocket/jetty-websocket-api/src/test/java/org/eclipse/jetty/websocket/api/extensions/ExtensionConfigTest.java", "insertions": 124, "deletions": 0}, {"lines": 66, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/primitives/IntegerObjectParamTextSocket.java", "insertions": 66, "deletions": 0}, {"lines": 67, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/internal/FrameSequence.java", "insertions": 67, "deletions": 0}, {"lines": 81, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/GeneratorFrameFlagsTest.java", "insertions": 81, "deletions": 0}, {"lines": 64, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/streaming/ReaderParamSocket.java", "insertions": 64, "deletions": 0}, {"lines": 34, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/WebSocketFrameListener.java", "insertions": 0, "deletions": 34}, {"lines": 41, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/handlers/ComboMessageHandler.java", "insertions": 0, "deletions": 41}, {"lines": 214, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/JsrEchoTest.java", "insertions": 0, "deletions": 214}, {"lines": 374, "filePath": "jetty-websocket/websocket-servlet/src/main/java/org/eclipse/jetty/websocket/servlet/internal/WebSocketCreatorMapping.java", "insertions": 374, "deletions": 0}, {"lines": 73, "filePath": "jetty-websocket/jetty-websocket-common/src/main/java/org/eclipse/jetty/websocket/common/invoke/InvalidSignatureException.java", "insertions": 73, "deletions": 0}, {"lines": 100, "filePath": "jetty-websocket/javax-websocket-server-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/server/UndefinedServerEndpointConfig.java", "insertions": 0, "deletions": 100}, {"lines": 2, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/HttpParser.java", "insertions": 2, "deletions": 0}, {"lines": 62, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/BasicEndpointConfig.java", "insertions": 62, "deletions": 0}, {"lines": 48, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/examples/MyAuthedConfigurator.java", "insertions": 0, "deletions": 48}, {"lines": 202, "filePath": "jetty-websocket/javax-websocket-server/src/main/java/org/eclipse/jetty/websocket/jsr356/server/internal/JavaxWebSocketCreator.java", "insertions": 202, "deletions": 0}, {"lines": 40, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/decoders/ByteBufferDecoder.java", "insertions": 40, "deletions": 0}, {"lines": 53, "filePath": "jetty-websocket/websocket-tests/src/test/resources/jetty-logging.properties", "insertions": 0, "deletions": 53}, {"lines": 0, "filePath": "jetty-websocket/websocket-common/src/main/javadoc/org/eclipse/jetty/websocket/common/doc-files/websocket-stack-simple.png", "insertions": 0, "deletions": 0}, {"lines": 32, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/handlers/InputStreamWholeHandler.java", "insertions": 0, "deletions": 32}, {"lines": 33, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/BasicCloseSocket.java", "insertions": 33, "deletions": 0}, {"lines": 69, "filePath": "jetty-websocket/jetty-websocket-api/src/main/java/org/eclipse/jetty/websocket/api/annotations/WebSocket.java", "insertions": 69, "deletions": 0}, {"lines": 5, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/FilterHolder.java", "insertions": 1, "deletions": 4}, {"lines": 11, "filePath": "jetty-websocket/javax-websocket-server/src/test/resources/jetty-logging.properties", "insertions": 11, "deletions": 0}, {"lines": 83, "filePath": "jetty-websocket/jetty-websocket-api/src/main/java/org/eclipse/jetty/websocket/api/CloseStatus.java", "insertions": 83, "deletions": 0}, {"lines": 237, "filePath": "jetty-websocket/javax-websocket-server/src/test/java/examples/JsrBrowserSocket.java", "insertions": 237, "deletions": 0}, {"lines": 389, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/io/FrameFlusher.java", "insertions": 0, "deletions": 389}, {"lines": 57, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/BasicEchoEndpointContextListener.java", "insertions": 57, "deletions": 0}, {"lines": 47, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/sockets/annotations/BadDuplicateFrameSocket.java", "insertions": 0, "deletions": 47}, {"lines": 60, "filePath": "jetty-websocket/jetty-websocket-common/src/test/java/org/eclipse/jetty/websocket/common/endpoints/listeners/ListenerBasicSocket.java", "insertions": 60, "deletions": 0}, {"lines": 48, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/frames/CloseFrame.java", "insertions": 0, "deletions": 48}, {"lines": 30, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/handlers/BaseMessageHandler.java", "insertions": 30, "deletions": 0}, {"lines": 0, "filePath": "jetty-websocket/{javax-websocket-client-impl => javax-websocket-common}/src/main/java/org/eclipse/jetty/websocket/jsr356/encoders/AbstractEncoder.java", "insertions": 0, "deletions": 0}, {"lines": 193, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/UntrustedWSServer.java", "insertions": 0, "deletions": 193}, {"lines": 64, "filePath": "jetty-websocket/javax-websocket-server/src/test/resources/jsr-browser-debug-tool/index.html", "insertions": 64, "deletions": 0}, {"lines": 43, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/MessageTooLargeException.java", "insertions": 0, "deletions": 43}, {"lines": 571, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/JavaxWebSocketSession.java", "insertions": 571, "deletions": 0}, {"lines": 54, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/autobahn/client/GetCaseCountHandler.java", "insertions": 54, "deletions": 0}, {"lines": 37, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/samples/CloseSessionReasonSocket.java", "insertions": 0, "deletions": 37}, {"lines": 124, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/WebSocketUpgradeHandlerWrapper.java", "insertions": 0, "deletions": 124}, {"lines": 55, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/partial/PartialTextSessionSocket.java", "insertions": 0, "deletions": 55}, {"lines": 66, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/decoders/FloatDecoder.java", "insertions": 66, "deletions": 0}, {"lines": 392, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/extensions/FragmentExtensionTest.java", "insertions": 0, "deletions": 392}, {"lines": 20, "filePath": "jetty-hazelcast/src/test/java/org/eclipse/jetty/hazelcast/session/TestHazelcastSessions.java", "insertions": 11, "deletions": 9}, {"lines": 587, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/internal/compress/CompressExtension.java", "insertions": 587, "deletions": 0}, {"lines": 133, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/AnnotatedServerEndpointTest.java", "insertions": 0, "deletions": 133}, {"lines": 58, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/FirefoxTest.java", "insertions": 0, "deletions": 58}, {"lines": 92, "filePath": "jetty-websocket/javax-websocket-common/pom.xml", "insertions": 92, "deletions": 0}, {"lines": 3, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/component/Dumpable.java", "insertions": 1, "deletions": 2}, {"lines": 308, "filePath": "jetty-websocket/jetty-websocket-api/src/main/java/org/eclipse/jetty/websocket/api/UpgradeRequest.java", "insertions": 308, "deletions": 0}, {"lines": 97, "filePath": "jetty-websocket/jetty-websocket-common/src/main/java/org/eclipse/jetty/websocket/common/util/TextUtil.java", "insertions": 97, "deletions": 0}, {"lines": 703, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/ConfiguratorTest.java", "insertions": 703, "deletions": 0}, {"lines": 197, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/extensions/compress/PerMessageDeflateExtension.java", "insertions": 0, "deletions": 197}, {"lines": 31, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/handlers/ByteBufferWholeHandler.java", "insertions": 31, "deletions": 0}, {"lines": 0, "filePath": "jetty-websocket/{javax-websocket-client-impl => javax-websocket-common}/src/main/java/org/eclipse/jetty/websocket/jsr356/encoders/DoubleEncoder.java", "insertions": 0, "deletions": 0}, {"lines": 51, "filePath": "jetty-websocket/javax-websocket-server/src/test/java/examples/JsrBrowserConfigurator.java", "insertions": 51, "deletions": 0}, {"lines": 37, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/sockets/BasicEchoSocket.java", "insertions": 0, "deletions": 37}, {"lines": 30, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/handlers/BaseMessageHandler.java", "insertions": 0, "deletions": 30}, {"lines": 112, "filePath": "jetty-websocket/websocket-tests/src/test/webapp/index.html", "insertions": 0, "deletions": 112}, {"lines": 33, "filePath": "jetty-websocket/javax-websocket-server/src/test/resources/jsr-browser-debug-tool/main.css", "insertions": 33, "deletions": 0}, {"lines": 182, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/JsrSessionTest.java", "insertions": 0, "deletions": 182}, {"lines": 61, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/client/AnnotatedEchoClient.java", "insertions": 61, "deletions": 0}, {"lines": 99, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/IdleTimeoutTest.java", "insertions": 99, "deletions": 0}, {"lines": 48, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/decoders/BooleanDecoder.java", "insertions": 48, "deletions": 0}, {"lines": 45, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/sockets/annotations/MyEchoBinarySocket.java", "insertions": 0, "deletions": 45}, {"lines": 39, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/message/InputStreamMessageSink.java", "insertions": 0, "deletions": 39}, {"lines": 43, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/MessageTooLargeException.java", "insertions": 43, "deletions": 0}, {"lines": 50, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/pong/PongMessageEndpoint.java", "insertions": 50, "deletions": 0}, {"lines": 152, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/jsr356/AbstractJsrTrackingEndpoint.java", "insertions": 0, "deletions": 152}, {"lines": 107, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/UriTemplateParameterTest.java", "insertions": 0, "deletions": 107}, {"lines": 295, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/encoders/AvailableEncoders.java", "insertions": 0, "deletions": 295}, {"lines": 43, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/decoders/StringDecoder.java", "insertions": 0, "deletions": 43}, {"lines": 47, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/message/MessageReader.java", "insertions": 0, "deletions": 47}, {"lines": 118, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/WebSocketHandler.java", "insertions": 0, "deletions": 118}, {"lines": 33, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/echo/EchoStatelessAsyncTextSocket.java", "insertions": 0, "deletions": 33}, {"lines": 35, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/package-info.java", "insertions": 0, "deletions": 35}, {"lines": 58, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/coders/ValidDualEncoder.java", "insertions": 58, "deletions": 0}, {"lines": 88, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/frames/DataFrame.java", "insertions": 0, "deletions": 88}, {"lines": 47, "filePath": "jetty-websocket/javax-websocket-server/src/main/java/org/eclipse/jetty/websocket/jsr356/server/internal/UpgradeResponseAdapter.java", "insertions": 47, "deletions": 0}, {"lines": 42, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/echo/EchoAsyncTextSocket.java", "insertions": 0, "deletions": 42}, {"lines": 51, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/pong/PongMessageEndpoint.java", "insertions": 0, "deletions": 51}, {"lines": 3, "filePath": "tests/test-webapps/test-jetty-webapp/src/test/resources/jetty-logging.properties", "insertions": 3, "deletions": 0}, {"lines": 35, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/BasicCloseSessionReasonSocket.java", "insertions": 0, "deletions": 35}, {"lines": 104, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/scopes/WebSocketContainerScope.java", "insertions": 0, "deletions": 104}, {"lines": 2, "filePath": "tests/test-webapps/test-jetty-webapp/src/main/resources/jetty-logging.properties", "insertions": 0, "deletions": 2}, {"lines": 133, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/JavaxWebSocketExtension.java", "insertions": 133, "deletions": 0}, {"lines": 49, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/message/PartialBinaryMessage.java", "insertions": 0, "deletions": 49}, {"lines": 38, "filePath": "jetty-websocket/javax-websocket-tests/src/main/java/org/eclipse/jetty/websocket/jsr356/tests/framehandlers/StaticText.java", "insertions": 38, "deletions": 0}, {"lines": 1, "filePath": "jetty-websocket/jetty-websocket-server/src/main/resources/META-INF/services/org.eclipse.jetty.webapp.Configuration", "insertions": 1, "deletions": 0}, {"lines": 59, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/primitives/FloatTextSocket.java", "insertions": 59, "deletions": 0}, {"lines": 45, "filePath": "jetty-websocket/jetty-websocket-common/src/test/java/org/eclipse/jetty/websocket/common/endpoints/annotated/MyEchoBinarySocket.java", "insertions": 45, "deletions": 0}, {"lines": 40, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/handlers/ComboMessageHandler.java", "insertions": 40, "deletions": 0}, {"lines": 51, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/XmlBasedHttpClientProvider.java", "insertions": 0, "deletions": 51}, {"lines": 60, "filePath": "jetty-websocket/websocket-servlet/src/test/java/examples/MyAuthedCreator.java", "insertions": 0, "deletions": 60}, {"lines": 34, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/examples/GetHttpSessionConfigurator.java", "insertions": 0, "deletions": 34}, {"lines": 417, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/extensions/DeflateFrameExtensionTest.java", "insertions": 417, "deletions": 0}, {"lines": 134, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/HttpClientInitTest.java", "insertions": 0, "deletions": 134}, {"lines": 46, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/encoders/ByteBufferEncoder.java", "insertions": 0, "deletions": 46}, {"lines": 46, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/messages/SendHandlerWriteCallback.java", "insertions": 0, "deletions": 46}, {"lines": 0, "filePath": "jetty-websocket/{javax-websocket-client-impl => javax-websocket-common}/src/main/java/org/eclipse/jetty/websocket/jsr356/encoders/BooleanEncoder.java", "insertions": 0, "deletions": 0}, {"lines": 91, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/message/ByteArrayMessageSink.java", "insertions": 0, "deletions": 91}, {"lines": 59, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/DataUtils.java", "insertions": 0, "deletions": 59}, {"lines": 36, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/InvalidOpenIntSocket.java", "insertions": 0, "deletions": 36}, {"lines": 43, "filePath": "jetty-websocket/websocket-servlet/src/main/java/org/eclipse/jetty/websocket/servlet/WebSocketServletFrameHandlerFactory.java", "insertions": 43, "deletions": 0}, {"lines": 128, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/AnnotatedServerEndpointTest.java", "insertions": 128, "deletions": 0}, {"lines": 54, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/coders/DateEncoder.java", "insertions": 54, "deletions": 0}, {"lines": 562, "filePath": "jetty-websocket/jetty-websocket-common/src/main/java/org/eclipse/jetty/websocket/common/util/ReflectUtils.java", "insertions": 562, "deletions": 0}, {"lines": 77, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/messages/PartialByteArrayMessageSink.java", "insertions": 77, "deletions": 0}, {"lines": 84, "filePath": "jetty-websocket/javax-websocket-server/src/main/java/org/eclipse/jetty/websocket/jsr356/server/internal/ServerEndpointConfigWrapper.java", "insertions": 84, "deletions": 0}, {"lines": 717, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/WebSocketServerFactory.java", "insertions": 0, "deletions": 717}, {"lines": 90, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/AltFilterTest.java", "insertions": 90, "deletions": 0}, {"lines": 37, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/ServletWebSocketRequest.java", "insertions": 0, "deletions": 37}, {"lines": 83, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/MappedWebSocketCreator.java", "insertions": 0, "deletions": 83}, {"lines": 61, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/sockets/listeners/ListenerPartialSocket.java", "insertions": 0, "deletions": 61}, {"lines": 144, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/JsrEndpointFunctions_OnErrorTest.java", "insertions": 0, "deletions": 144}, {"lines": 50, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/DummyFrameHandlerFactory.java", "insertions": 50, "deletions": 0}, {"lines": 44, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/sockets/IdleTimeoutOnOpenEndpoint.java", "insertions": 0, "deletions": 44}, {"lines": 750, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/ConfiguratorTest.java", "insertions": 0, "deletions": 750}, {"lines": 55, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/sockets/SessionAltConfig.java", "insertions": 0, "deletions": 55}, {"lines": 62, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/decoders/ByteDecoder.java", "insertions": 0, "deletions": 62}, {"lines": 47, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/WebSocketConstants.java", "insertions": 47, "deletions": 0}, {"lines": 30, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/JavaxWebSocketUpgradeResponse.java", "insertions": 30, "deletions": 0}, {"lines": 85, "filePath": "jetty-websocket/javax-websocket-server/src/main/java/org/eclipse/jetty/websocket/jsr356/server/internal/JsrHandshakeRequest.java", "insertions": 85, "deletions": 0}, {"lines": 37, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/sockets/annotations/FrameSocket.java", "insertions": 0, "deletions": 37}, {"lines": 47, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/echo/LargeEchoConfiguredSocket.java", "insertions": 0, "deletions": 47}, {"lines": 225, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/WebSocketUpgradeFilterWebappTest.java", "insertions": 0, "deletions": 225}, {"lines": 117, "filePath": "jetty-websocket/jetty-websocket-common/src/main/java/org/eclipse/jetty/websocket/common/util/Utf8CharBuffer.java", "insertions": 117, "deletions": 0}, {"lines": 50, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/util/NameParamIdentifier.java", "insertions": 50, "deletions": 0}, {"lines": 12, "filePath": "jetty-websocket/websocket-tests/src/test/resources/idle-timeout-config-web.xml", "insertions": 0, "deletions": 12}, {"lines": 188, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/extensions/FrameCaptureExtension.java", "insertions": 0, "deletions": 188}, {"lines": 59, "filePath": "jetty-websocket/javax-websocket-tests/src/main/java/org/eclipse/jetty/websocket/jsr356/tests/DataUtils.java", "insertions": 59, "deletions": 0}, {"lines": 95, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/extensions/ByteAccumulatorTest.java", "insertions": 0, "deletions": 95}, {"lines": 73, "filePath": "jetty-websocket/javax-websocket-server/src/main/java/org/eclipse/jetty/websocket/jsr356/server/JavaxWebSocketServerFrameHandlerFactory.java", "insertions": 73, "deletions": 0}, {"lines": 79, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/QuotedCSV.java", "insertions": 78, "deletions": 1}, {"lines": 310, "filePath": "jetty-websocket/jetty-websocket-client/src/test/java/examples/ClientDemo.java", "insertions": 310, "deletions": 0}, {"lines": 41, "filePath": "jetty-websocket/jetty-websocket-common/src/test/java/org/eclipse/jetty/websocket/common/endpoints/annotated/MyStatelessEchoSocket.java", "insertions": 41, "deletions": 0}, {"lines": 60, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/primitives/FloatTextSocket.java", "insertions": 0, "deletions": 60}, {"lines": 112, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/client/AnnotatedClientEndpointConfig.java", "insertions": 0, "deletions": 112}, {"lines": 63, "filePath": "jetty-websocket/jetty-websocket-common/src/test/java/org/eclipse/jetty/websocket/common/endpoints/listeners/ListenerPartialSocket.java", "insertions": 63, "deletions": 0}, {"lines": 49, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/UpgradeRequestAdapter.java", "insertions": 49, "deletions": 0}, {"lines": 6, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpClient.java", "insertions": 4, "deletions": 2}, {"lines": 45, "filePath": "jetty-websocket/jetty-websocket-common/src/test/java/org/eclipse/jetty/websocket/common/endpoints/annotated/BadBinarySignatureSocket.java", "insertions": 45, "deletions": 0}, {"lines": 115, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/ParserBadCloseStatusCodesTest.java", "insertions": 115, "deletions": 0}, {"lines": 34, "filePath": "jetty-websocket/jetty-websocket-api/src/main/java/org/eclipse/jetty/websocket/api/WebSocketFrameListener.java", "insertions": 34, "deletions": 0}, {"lines": 199, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/ParserReservedBitTest.java", "insertions": 199, "deletions": 0}, {"lines": 121, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/GeneratorParserRoundtripTest.java", "insertions": 0, "deletions": 121}, {"lines": 101, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/extensions/IdentityExtensionTest.java", "insertions": 101, "deletions": 0}, {"lines": 108, "filePath": "jetty-websocket/jetty-websocket-common/src/test/java/org/eclipse/jetty/websocket/common/handshake/DummyUpgradeResponse.java", "insertions": 108, "deletions": 0}, {"lines": 92, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/messages/StringMessageSink.java", "insertions": 92, "deletions": 0}, {"lines": 567, "filePath": "jetty-websocket/websocket-servlet/src/main/java/org/eclipse/jetty/websocket/servlet/internal/UpgradeHttpServletRequest.java", "insertions": 567, "deletions": 0}, {"lines": 63, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/IncomingFramesCapture.java", "insertions": 63, "deletions": 0}, {"lines": 500, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/MessageReceivingTest.java", "insertions": 0, "deletions": 500}, {"lines": 33, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/BasicErrorThrowableSocket.java", "insertions": 0, "deletions": 33}, {"lines": 144, "filePath": "jetty-websocket/jetty-websocket-api/src/main/java/org/eclipse/jetty/websocket/api/UpgradeResponse.java", "insertions": 144, "deletions": 0}, {"lines": 32, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/io/UpgradeListener.java", "insertions": 0, "deletions": 32}, {"lines": 64, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/UntrustedWSServlet.java", "insertions": 0, "deletions": 64}, {"lines": 43, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/ProtocolException.java", "insertions": 43, "deletions": 0}, {"lines": 37, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/MessageSink.java", "insertions": 37, "deletions": 0}, {"lines": 48, "filePath": "jetty-websocket/javax-websocket-server/src/test/java/examples/GetHttpSessionSocket.java", "insertions": 48, "deletions": 0}, {"lines": 202, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/JsrBatchModeTest.java", "insertions": 0, "deletions": 202}, {"lines": 30, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/handlers/ByteArrayPartialHandler.java", "insertions": 30, "deletions": 0}, {"lines": 2, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/Utf8Appendable.java", "insertions": 1, "deletions": 1}, {"lines": 65, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/streaming/ReaderParamSocket.java", "insertions": 0, "deletions": 65}, {"lines": 86, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/extensions/identity/IdentityExtension.java", "insertions": 0, "deletions": 86}, {"lines": 62, "filePath": "jetty-websocket/jetty-websocket-api/src/main/java/org/eclipse/jetty/websocket/api/UpgradeException.java", "insertions": 62, "deletions": 0}, {"lines": 30, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/handlers/StringPartialHandler.java", "insertions": 30, "deletions": 0}, {"lines": 34, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/BasicCloseReasonSocket.java", "insertions": 0, "deletions": 34}, {"lines": 69, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/annotations/WebSocket.java", "insertions": 0, "deletions": 69}, {"lines": 32, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/BasicOpenSocket.java", "insertions": 32, "deletions": 0}, {"lines": 75, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/AnnotatedEchoTest.java", "insertions": 0, "deletions": 75}, {"lines": 23, "filePath": "jetty-websocket/javax-websocket-tests/src/test/resources/alt-filter-web.xml", "insertions": 23, "deletions": 0}, {"lines": 100, "filePath": "jetty-websocket/javax-websocket-server/src/main/java/org/eclipse/jetty/websocket/jsr356/server/internal/UndefinedServerEndpointConfig.java", "insertions": 100, "deletions": 0}, {"lines": 0, "filePath": "jetty-websocket/{websocket-tests => javax-websocket-tests}/src/test/resources/data/medium.png.sha", "insertions": 0, "deletions": 0}, {"lines": 42, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/internal/FrameEntry.java", "insertions": 42, "deletions": 0}, {"lines": 53, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/FrameCallback.java", "insertions": 0, "deletions": 53}, {"lines": 51, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/HttpClientProvider.java", "insertions": 0, "deletions": 51}, {"lines": 34, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/BasicBinaryMessageByteBufferSocket.java", "insertions": 34, "deletions": 0}, {"lines": 37, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/InvalidErrorErrorSocket.java", "insertions": 37, "deletions": 0}, {"lines": 0, "filePath": "jetty-websocket/{javax-websocket-client-impl => javax-websocket-common}/src/main/java/org/eclipse/jetty/websocket/jsr356/encoders/IntegerEncoder.java", "insertions": 0, "deletions": 0}, {"lines": 309, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/reflect/UnorderedSignature.java", "insertions": 0, "deletions": 309}, {"lines": 56, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/SimpleServletServer.java", "insertions": 0, "deletions": 56}, {"lines": 75, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/GeneratorFrameFlagsTest.java", "insertions": 0, "deletions": 75}, {"lines": 46, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/echo/BasicEchoEndpoint.java", "insertions": 0, "deletions": 46}, {"lines": 88, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/OutgoingFramesCapture.java", "insertions": 88, "deletions": 0}, {"lines": 50, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/coders/QuotesEncoder.java", "insertions": 50, "deletions": 0}, {"lines": 157, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/UntrustedWSEndpoint.java", "insertions": 0, "deletions": 157}, {"lines": 52, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/BasicEchoSocketContextListener.java", "insertions": 52, "deletions": 0}, {"lines": 31, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/pathmap/RegexPathSpec.java", "insertions": 0, "deletions": 31}, {"lines": 1654, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/ParserTest.java", "insertions": 1654, "deletions": 0}, {"lines": 253, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/MisbehavingClassTest.java", "insertions": 0, "deletions": 253}, {"lines": 415, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/ClientConnectTest.java", "insertions": 0, "deletions": 415}, {"lines": 81, "filePath": "jetty-websocket/jetty-websocket-api/src/main/java/org/eclipse/jetty/websocket/api/extensions/ExtensionFactory.java", "insertions": 81, "deletions": 0}, {"lines": 36, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/samples/CloseEndpointConfigSocket.java", "insertions": 0, "deletions": 36}, {"lines": 46, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/examples/StreamingEchoSocket.java", "insertions": 0, "deletions": 46}, {"lines": 37, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/echo/BasicEchoSocket.java", "insertions": 0, "deletions": 37}, {"lines": 23, "filePath": "jetty-websocket/jetty-websocket-client/src/main/java/org/eclipse/jetty/websocket/client/package-info.java", "insertions": 23, "deletions": 0}, {"lines": 114, "filePath": "jetty-websocket/jetty-websocket-client/src/test/java/org/eclipse/jetty/websocket/client/WebSocketClientBadUriTest.java", "insertions": 114, "deletions": 0}, {"lines": 324, "filePath": "jetty-websocket/websocket-servlet/src/main/java/org/eclipse/jetty/websocket/servlet/WebSocketUpgradeFilter.java", "insertions": 324, "deletions": 0}, {"lines": 109, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/EndpointEchoTest.java", "insertions": 0, "deletions": 109}, {"lines": 33, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/BasicErrorThrowableSocket.java", "insertions": 33, "deletions": 0}, {"lines": 37, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/servlets/EchoServlet.java", "insertions": 0, "deletions": 37}, {"lines": 190, "filePath": "jetty-websocket/javax-websocket-tests/src/main/java/org/eclipse/jetty/websocket/jsr356/tests/WSEventTracker.java", "insertions": 190, "deletions": 0}, {"lines": 200, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/DecoderReaderManySmallTest.java", "insertions": 0, "deletions": 200}, {"lines": 184, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/internal/compress/PerMessageDeflateExtension.java", "insertions": 184, "deletions": 0}, {"lines": 89, "filePath": "jetty-websocket/javax-websocket-client-impl/pom.xml", "insertions": 0, "deletions": 89}, {"lines": 43, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/extensions/OutgoingFrames.java", "insertions": 0, "deletions": 43}, {"lines": 545, "filePath": "jetty-websocket/jetty-websocket-common/src/test/java/org/eclipse/jetty/websocket/common/invoke/InvokerUtilsTest.java", "insertions": 545, "deletions": 0}, {"lines": 33, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/BasicTextMessageStringSocket.java", "insertions": 33, "deletions": 0}, {"lines": 51, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/client/samples/CloseEndpointConfigSocket.java", "insertions": 51, "deletions": 0}, {"lines": 57, "filePath": "jetty-websocket/jetty-websocket-common/src/test/java/org/eclipse/jetty/websocket/common/endpoints/annotated/AnnotatedBinaryStreamSocket.java", "insertions": 57, "deletions": 0}, {"lines": 66, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/primitives/ShortObjectTextSocket.java", "insertions": 0, "deletions": 66}, {"lines": 79, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/AbstractJavaxWebSocketServerFrameHandlerTest.java", "insertions": 79, "deletions": 0}, {"lines": 176, "filePath": "jetty-websocket/jetty-websocket-common/src/test/java/org/eclipse/jetty/websocket/common/OutgoingMessageCapture.java", "insertions": 176, "deletions": 0}, {"lines": 154, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/EndpointViaConfigTest.java", "insertions": 0, "deletions": 154}, {"lines": 65, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/primitives/LongObjectTextSocket.java", "insertions": 65, "deletions": 0}, {"lines": 259, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/WebSocketUpgradeFilterEmbeddedTest.java", "insertions": 0, "deletions": 259}, {"lines": 104, "filePath": "jetty-websocket/jetty-websocket-common/src/main/java/org/eclipse/jetty/websocket/common/message/ByteArrayMessageSink.java", "insertions": 104, "deletions": 0}, {"lines": 23, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/extensions/fragment/package-info.java", "insertions": 0, "deletions": 23}, {"lines": 54, "filePath": "jetty-websocket/jetty-websocket-api/src/main/java/org/eclipse/jetty/websocket/api/WebSocketPartialListener.java", "insertions": 54, "deletions": 0}, {"lines": 168, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/SlowServerTest.java", "insertions": 0, "deletions": 168}, {"lines": 484, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/extensions/ExtensionStack.java", "insertions": 0, "deletions": 484}, {"lines": 82, "filePath": "jetty-websocket/jetty-websocket-common/pom.xml", "insertions": 82, "deletions": 0}, {"lines": 368, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/LocalFuzzer.java", "insertions": 0, "deletions": 368}, {"lines": 47, "filePath": "jetty-websocket/javax-websocket-server/src/main/java/org/eclipse/jetty/websocket/jsr356/server/internal/UpgradeRequestAdapter.java", "insertions": 47, "deletions": 0}, {"lines": 45, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/JsrPongMessage.java", "insertions": 0, "deletions": 45}, {"lines": 34, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/StatelessTextMessageStringSocket.java", "insertions": 34, "deletions": 0}, {"lines": 5, "filePath": "examples/embedded/pom.xml", "insertions": 5, "deletions": 0}, {"lines": 420, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/extensions/PerMessageDeflateExtensionTest.java", "insertions": 420, "deletions": 0}, {"lines": 51, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/client/samples/CloseReasonSocket.java", "insertions": 51, "deletions": 0}, {"lines": 89, "filePath": "jetty-websocket/websocket-api/src/test/java/org/eclipse/jetty/websocket/api/util/WSURITest.java", "insertions": 0, "deletions": 89}, {"lines": 23, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/io/package-info.java", "insertions": 0, "deletions": 23}, {"lines": 87, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/servlets/EchoSocket.java", "insertions": 0, "deletions": 87}, {"lines": 93, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/BlockingWriteCallback.java", "insertions": 0, "deletions": 93}, {"lines": 26, "filePath": "jetty-websocket/javax-websocket-tests/src/main/java/org/eclipse/jetty/websocket/jsr356/tests/MessageType.java", "insertions": 26, "deletions": 0}, {"lines": 43, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/PolicyViolationException.java", "insertions": 0, "deletions": 43}, {"lines": 54, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/coders/DateTimeEncoder.java", "insertions": 54, "deletions": 0}, {"lines": 36, "filePath": "jetty-websocket/jetty-websocket-common/src/test/java/org/eclipse/jetty/websocket/common/endpoints/annotated/NotASocket.java", "insertions": 36, "deletions": 0}, {"lines": 46, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/masks/RandomMasker.java", "insertions": 0, "deletions": 46}, {"lines": 84, "filePath": "jetty-websocket/jetty-websocket-client/pom.xml", "insertions": 84, "deletions": 0}, {"lines": 59, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/primitives/CharTextSocket.java", "insertions": 0, "deletions": 59}, {"lines": 141, "filePath": "jetty-websocket/websocket-server/src/test/resources/browser-debug-tool/websocket.js", "insertions": 0, "deletions": 141}, {"lines": 112, "filePath": "jetty-websocket/javax-websocket-tests/src/main/java/org/eclipse/jetty/websocket/jsr356/tests/Sha1Sum.java", "insertions": 112, "deletions": 0}, {"lines": 50, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/client/samples/CloseSessionSocket.java", "insertions": 50, "deletions": 0}, {"lines": 35, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/server/Handshaker.java", "insertions": 35, "deletions": 0}, {"lines": 33, "filePath": "jetty-websocket/websocket-core/src/test/resources/jetty-logging.properties", "insertions": 33, "deletions": 0}, {"lines": 33, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/BasicErrorSessionSocket.java", "insertions": 0, "deletions": 33}, {"lines": 59, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/primitives/ShortTextSocket.java", "insertions": 0, "deletions": 59}, {"lines": 120, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/FragmentExtensionTest.java", "insertions": 0, "deletions": 120}, {"lines": 48, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/messages/MessageReader.java", "insertions": 48, "deletions": 0}, {"lines": 51, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/decoders/CharacterDecoder.java", "insertions": 51, "deletions": 0}, {"lines": 58, "filePath": "jetty-websocket/websocket-server/src/test/resources/browser-debug-tool/index.html", "insertions": 0, "deletions": 58}, {"lines": 44, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/sockets/TrackingSocket.java", "insertions": 44, "deletions": 0}, {"lines": 228, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/ReservedBitTest.java", "insertions": 0, "deletions": 228}, {"lines": 158, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/Text_InvalidUtf8Test.java", "insertions": 0, "deletions": 158}, {"lines": 50, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/frames/PongFrame.java", "insertions": 0, "deletions": 50}, {"lines": 176, "filePath": "jetty-websocket/jetty-websocket-common/src/main/java/org/eclipse/jetty/websocket/common/message/DispatchedMessageSink.java", "insertions": 176, "deletions": 0}, {"lines": 44, "filePath": "jetty-websocket/jetty-websocket-api/src/main/java/org/eclipse/jetty/websocket/api/extensions/OutgoingFrames.java", "insertions": 44, "deletions": 0}, {"lines": 39, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/extensions/IncomingFrames.java", "insertions": 0, "deletions": 39}, {"lines": 54, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/quotes/Quotes.java", "insertions": 54, "deletions": 0}, {"lines": 58, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/primitives/CharTextSocket.java", "insertions": 58, "deletions": 0}, {"lines": 64, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/PongContextListener.java", "insertions": 64, "deletions": 0}, {"lines": 35, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/BasicCloseReasonSessionSocket.java", "insertions": 35, "deletions": 0}, {"lines": 51, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/echo/EchoStatelessBasicTextSocket.java", "insertions": 0, "deletions": 51}, {"lines": 59, "filePath": "jetty-websocket/jetty-websocket-common/src/main/java/org/eclipse/jetty/websocket/common/message/PartialTextMessageSink.java", "insertions": 59, "deletions": 0}, {"lines": 147, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/messages/DecodedTextMessageSinkTest.java", "insertions": 147, "deletions": 0}, {"lines": 40, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/idletimeout/OnOpenIdleTimeoutSocket.java", "insertions": 40, "deletions": 0}, {"lines": 41, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/ProtocolException.java", "insertions": 0, "deletions": 41}, {"lines": 72, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/messages/DecodedReaderMessageSink.java", "insertions": 0, "deletions": 72}, {"lines": 35, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/JsrExtensionConfig.java", "insertions": 0, "deletions": 35}, {"lines": 66, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/IncomingFramesCapture.java", "insertions": 0, "deletions": 66}, {"lines": 62, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/decoders/IntegerDecoder.java", "insertions": 62, "deletions": 0}, {"lines": 87, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/coders/CoderEventTracking.java", "insertions": 87, "deletions": 0}, {"lines": 178, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/messages/DispatchedMessageSink.java", "insertions": 178, "deletions": 0}, {"lines": 276, "filePath": "jetty-websocket/websocket-servlet/src/main/java/org/eclipse/jetty/websocket/servlet/ServletUpgradeRequest.java", "insertions": 35, "deletions": 241}, {"lines": 351, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/ManyConnectionsCleanupTest.java", "insertions": 0, "deletions": 351}, {"lines": 0, "filePath": "jetty-websocket/{javax-websocket-client-impl => javax-websocket-common}/src/main/java/org/eclipse/jetty/websocket/jsr356/encoders/StringEncoder.java", "insertions": 0, "deletions": 0}, {"lines": 35, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/JavaxWebSocketExtensionConfig.java", "insertions": 35, "deletions": 0}, {"lines": 400, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/SessionTest.java", "insertions": 400, "deletions": 0}, {"lines": 565, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/ContinuationTest.java", "insertions": 0, "deletions": 565}, {"lines": 42, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/WebSocketTimeoutException.java", "insertions": 0, "deletions": 42}, {"lines": 279, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/client/WebSocketClientServerTest.java", "insertions": 279, "deletions": 0}, {"lines": 44, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/idletimeout/OnOpenIdleTimeoutEndpoint.java", "insertions": 0, "deletions": 44}, {"lines": 65, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/primitives/BooleanObjectTextSocket.java", "insertions": 65, "deletions": 0}, {"lines": 32, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/echo/EchoReturnTextSocket.java", "insertions": 32, "deletions": 0}, {"lines": 239, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/AnnotatedEndpointConfigTest.java", "insertions": 0, "deletions": 239}, {"lines": 36, "filePath": "jetty-websocket/javax-websocket-tests/src/test/resources/logback-test.xml", "insertions": 36, "deletions": 0}, {"lines": 637, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/io/AbstractWebSocketConnection.java", "insertions": 0, "deletions": 637}, {"lines": 39, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/scopes/WebSocketSessionScope.java", "insertions": 0, "deletions": 39}, {"lines": 40, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/IdleTimeoutOnOpenSocket.java", "insertions": 40, "deletions": 0}, {"lines": 114, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/OpCode.java", "insertions": 0, "deletions": 114}, {"lines": 127, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/WebSocketTester.java", "insertions": 127, "deletions": 0}, {"lines": 46, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/CapturedHexPayloads.java", "insertions": 46, "deletions": 0}, {"lines": 83, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/RFC6455Socket.java", "insertions": 0, "deletions": 83}, {"lines": 34, "filePath": "jetty-websocket/jetty-websocket-common/src/main/java/org/eclipse/jetty/websocket/common/AbstractMessageSink.java", "insertions": 34, "deletions": 0}, {"lines": 106, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/ConfiguratorTest.java", "insertions": 0, "deletions": 106}, {"lines": 838, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/TextTest.java", "insertions": 0, "deletions": 838}, {"lines": 417, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/internal/Parser.java", "insertions": 417, "deletions": 0}, {"lines": 48, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/TestableLeakTrackingBufferPool.java", "insertions": 48, "deletions": 0}, {"lines": 31, "filePath": "jetty-websocket/javax-websocket-tests/src/main/java/org/eclipse/jetty/websocket/jsr356/tests/DummyEndpoint.java", "insertions": 31, "deletions": 0}, {"lines": 46, "filePath": "jetty-websocket/jetty-websocket-api/src/main/java/org/eclipse/jetty/websocket/api/annotations/OnWebSocketClose.java", "insertions": 46, "deletions": 0}, {"lines": 46, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/annotations/OnWebSocketFrame.java", "insertions": 0, "deletions": 46}, {"lines": 60, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/primitives/IntParamTextSocket.java", "insertions": 0, "deletions": 60}, {"lines": 0, "filePath": "jetty-websocket/{websocket-tests/src/test/resources/httpclient => javax-websocket-tests/src/test/resources}/simple/jetty-websocket-httpclient.xml", "insertions": 0, "deletions": 0}, {"lines": 37, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/endpoints/EchoStringEndpoint.java", "insertions": 37, "deletions": 0}, {"lines": 51, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/client/samples/CloseSessionReasonSocket.java", "insertions": 51, "deletions": 0}, {"lines": 153, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/JavaxWebSocketFrameHandler_OnCloseTest.java", "insertions": 153, "deletions": 0}, {"lines": 34, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/BasicErrorSessionThrowableSocket.java", "insertions": 34, "deletions": 0}, {"lines": 32, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/echo/EchoReturnTextSocket.java", "insertions": 0, "deletions": 32}, {"lines": 49, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/CloseException.java", "insertions": 0, "deletions": 49}, {"lines": 0, "filePath": "jetty-websocket/{websocket-api => jetty-websocket-api}/src/main/java/org/eclipse/jetty/websocket/api/SuspendToken.java", "insertions": 0, "deletions": 0}, {"lines": 47, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/JsrSessionFactory.java", "insertions": 0, "deletions": 47}, {"lines": 282, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/AnnotatedEndpointDiscoverTest.java", "insertions": 0, "deletions": 282}, {"lines": 36, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/InvalidErrorErrorSocket.java", "insertions": 0, "deletions": 36}, {"lines": 0, "filePath": "jetty-websocket/{websocket-tests => javax-websocket-tests}/src/test/resources/data/larger.png.sha", "insertions": 0, "deletions": 0}, {"lines": 113, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/GeneratorParserRoundtripTest.java", "insertions": 113, "deletions": 0}, {"lines": 37, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/InvalidOpenIntSocket.java", "insertions": 37, "deletions": 0}, {"lines": 30, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/handlers/ByteArrayPartialHandler.java", "insertions": 0, "deletions": 30}, {"lines": 150, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/MemoryUsageTest.java", "insertions": 150, "deletions": 0}, {"lines": 52, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/sockets/annotations/AnnotatedBinaryArraySocket.java", "insertions": 0, "deletions": 52}, {"lines": 150, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/BatchModeTest.java", "insertions": 0, "deletions": 150}, {"lines": 377, "filePath": "jetty-websocket/jetty-websocket-common/src/main/java/org/eclipse/jetty/websocket/common/JettyWebSocketFrameHandler.java", "insertions": 377, "deletions": 0}, {"lines": 88, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/coders/CoderEventTracking.java", "insertions": 0, "deletions": 88}, {"lines": 38, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/InvalidOpenSessionIntSocket.java", "insertions": 0, "deletions": 38}, {"lines": 110, "filePath": "jetty-websocket/websocket-core/pom.xml", "insertions": 110, "deletions": 0}, {"lines": 45, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/InvalidWebSocketException.java", "insertions": 0, "deletions": 45}, {"lines": 42, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/EventQueue.java", "insertions": 0, "deletions": 42}, {"lines": 41, "filePath": "jetty-websocket/jetty-websocket-api/src/main/java/org/eclipse/jetty/websocket/api/WebSocketListener.java", "insertions": 41, "deletions": 0}, {"lines": 39, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/test/MoreMatchers.java", "insertions": 0, "deletions": 39}, {"lines": 131, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/JsrExtension.java", "insertions": 0, "deletions": 131}, {"lines": 56, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/jsr356/IdleTimeoutContextListener.java", "insertions": 0, "deletions": 56}, {"lines": 41, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/sockets/annotations/MyStatelessEchoSocket.java", "insertions": 0, "deletions": 41}, {"lines": 101, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/jsr356/DummyJsrEndpointFunctions.java", "insertions": 0, "deletions": 101}, {"lines": 68, "filePath": "jetty-websocket/javax-websocket-server-impl/pom.xml", "insertions": 0, "deletions": 68}, {"lines": 389, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/decoders/AvailableDecoders.java", "insertions": 389, "deletions": 0}, {"lines": 107, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/DelayedStartClientTest.java", "insertions": 0, "deletions": 107}, {"lines": 50, "filePath": "jetty-websocket/jetty-websocket-api/src/main/java/org/eclipse/jetty/websocket/api/BatchMode.java", "insertions": 50, "deletions": 0}, {"lines": 33, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/BasicOpenSessionSocket.java", "insertions": 0, "deletions": 33}, {"lines": 83, "filePath": "jetty-websocket/javax-websocket-tests/src/main/java/org/eclipse/jetty/websocket/jsr356/tests/framehandlers/FrameHandlerTracker.java", "insertions": 83, "deletions": 0}, {"lines": 41, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/sockets/annotations/BadTextSignatureSocket.java", "insertions": 0, "deletions": 41}, {"lines": 378, "filePath": "jetty-websocket/javax-websocket-server-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/server/ServerContainer.java", "insertions": 0, "deletions": 378}, {"lines": 84, "filePath": "jetty-websocket/javax-websocket-client/src/main/java/org/eclipse/jetty/websocket/jsr356/client/JavaxWebSocketClientContainerProvider.java", "insertions": 84, "deletions": 0}, {"lines": 244, "filePath": "jetty-websocket/jetty-websocket-common/src/test/java/org/eclipse/jetty/websocket/common/MessageInputStreamTest.java", "insertions": 244, "deletions": 0}, {"lines": 32, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/jsr356/sockets/BasicErrorSocket.java", "insertions": 0, "deletions": 32}, {"lines": 32, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/BasicErrorSocket.java", "insertions": 32, "deletions": 0}, {"lines": 85, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/TestFrameHandler.java", "insertions": 85, "deletions": 0}, {"lines": 287, "filePath": "jetty-websocket/javax-websocket-tests/src/main/java/org/eclipse/jetty/websocket/jsr356/tests/LocalServer.java", "insertions": 287, "deletions": 0}, {"lines": 95, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/ParsePayloadLengthTest.java", "insertions": 95, "deletions": 0}, {"lines": 50, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/RegisteredMessageHandler.java", "insertions": 50, "deletions": 0}, {"lines": 191, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/JsrBatchModeTest.java", "insertions": 191, "deletions": 0}, {"lines": 48, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/coders/Quotes.java", "insertions": 48, "deletions": 0}, {"lines": 123, "filePath": "jetty-websocket/jetty-websocket-client/src/main/java/org/eclipse/jetty/websocket/client/impl/ClientUpgradeRequestImpl.java", "insertions": 123, "deletions": 0}, {"lines": 226, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/message/MessageWriter.java", "insertions": 0, "deletions": 226}, {"lines": 44, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/BadPayloadException.java", "insertions": 44, "deletions": 0}, {"lines": 70, "filePath": "jetty-websocket/websocket-client/src/test/java/examples/SimpleEchoClient.java", "insertions": 0, "deletions": 70}, {"lines": 0, "filePath": "jetty-websocket/{javax-websocket-client-impl => javax-websocket-common}/src/main/java/org/eclipse/jetty/websocket/jsr356/encoders/ByteEncoder.java", "insertions": 0, "deletions": 0}, {"lines": 139, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/JavaxWebSocketFrameHandler_OnMessage_BinaryTest.java", "insertions": 139, "deletions": 0}, {"lines": 38, "filePath": "jetty-websocket/jetty-websocket-api/src/main/java/org/eclipse/jetty/websocket/api/extensions/IncomingFrames.java", "insertions": 38, "deletions": 0}, {"lines": 219, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/messages/MessageOutputStream.java", "insertions": 219, "deletions": 0}, {"lines": 51, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/client/samples/CloseReasonSessionSocket.java", "insertions": 51, "deletions": 0}, {"lines": 0, "filePath": "jetty-websocket/{javax-websocket-client-impl => javax-websocket-common}/src/main/java/org/eclipse/jetty/websocket/jsr356/encoders/CharacterEncoder.java", "insertions": 0, "deletions": 0}, {"lines": 41, "filePath": "jetty-websocket/jetty-websocket-api/src/main/java/org/eclipse/jetty/websocket/api/WebSocketPingPongListener.java", "insertions": 41, "deletions": 0}, {"lines": 1, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/resources/META-INF/services/javax.websocket.ContainerProvider", "insertions": 0, "deletions": 1}, {"lines": 47, "filePath": "jetty-websocket/jetty-websocket-common/src/test/java/org/eclipse/jetty/websocket/common/endpoints/adapters/AdapterEchoSocket.java", "insertions": 47, "deletions": 0}, {"lines": 45, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/encoders/ByteBufferEncoder.java", "insertions": 45, "deletions": 0}, {"lines": 116, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/ParserGoodCloseStatusCodesTest.java", "insertions": 116, "deletions": 0}, {"lines": 1341, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/GeneratorTest.java", "insertions": 0, "deletions": 1341}, {"lines": 1, "filePath": "jetty-websocket/jetty-websocket-server/src/main/resources/META-INF/services/javax.servlet.ServletContainerInitializer", "insertions": 1, "deletions": 0}, {"lines": 140, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/JsrEndpointFunctions_OnMessage_BinaryTest.java", "insertions": 0, "deletions": 140}, {"lines": 72, "filePath": "jetty-websocket/jetty-websocket-server/src/main/java/org/eclipse/jetty/websocket/server/JettyWebSocketConfiguration.java", "insertions": 72, "deletions": 0}, {"lines": 66, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/primitives/DoubleObjectTextSocket.java", "insertions": 66, "deletions": 0}, {"lines": 416, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/WebSocketUpgradeFilter.java", "insertions": 0, "deletions": 416}, {"lines": 179, "filePath": "jetty-websocket/jetty-websocket-api/src/main/java/org/eclipse/jetty/websocket/api/StatusCode.java", "insertions": 179, "deletions": 0}, {"lines": 54, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/coders/TimeEncoder.java", "insertions": 54, "deletions": 0}, {"lines": 29, "filePath": "jetty-websocket/websocket-server/src/test/resources/browser-debug-tool/main.css", "insertions": 0, "deletions": 29}, {"lines": 366, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/PingPongTest.java", "insertions": 0, "deletions": 366}, {"lines": 77, "filePath": "jetty-websocket/websocket-core/src/main/java/org/eclipse/jetty/websocket/core/internal/compress/ByteAccumulator.java", "insertions": 77, "deletions": 0}, {"lines": 56, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/DummyOutgoingFrames.java", "insertions": 0, "deletions": 56}, {"lines": 58, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/sockets/primitives/ByteTextSocket.java", "insertions": 58, "deletions": 0}, {"lines": 185, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/WebSocketOverSSLTest.java", "insertions": 0, "deletions": 185}, {"lines": 32, "filePath": "jetty-websocket/javax-websocket-common/src/main/java/org/eclipse/jetty/websocket/jsr356/InitException.java", "insertions": 32, "deletions": 0}, {"lines": 105, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/ParserCapture.java", "insertions": 105, "deletions": 0}, {"lines": 230, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/jsr356/tests/server/PingPongTest.java", "insertions": 230, "deletions": 0}, {"lines": 124, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/server/CloseHandling_GoodStatusCodesTest.java", "insertions": 0, "deletions": 124}, {"lines": 51, "filePath": "jetty-websocket/websocket-tests/src/main/java/org/eclipse/jetty/websocket/tests/UntrustedWSSession.java", "insertions": 0, "deletions": 51}, {"lines": 226, "filePath": "jetty-websocket/jetty-websocket-common/src/main/java/org/eclipse/jetty/websocket/common/message/MessageWriter.java", "insertions": 226, "deletions": 0}, {"lines": 31, "filePath": "jetty-websocket/javax-websocket-common/src/test/java/org/eclipse/jetty/websocket/jsr356/handlers/InputStreamWholeHandler.java", "insertions": 31, "deletions": 0}, {"lines": 82, "filePath": "jetty-websocket/websocket-core/src/test/java/org/eclipse/jetty/websocket/core/TestWebSocketNegotiator.java", "insertions": 82, "deletions": 0}, {"lines": 48, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/io/CompletableFutureFrameCallback.java", "insertions": 0, "deletions": 48}, {"lines": 0, "filePath": "jetty-websocket/{javax-websocket-client-impl => javax-websocket-common}/src/main/java/org/eclipse/jetty/websocket/jsr356/decoders/AbstractDecoder.java", "insertions": 0, "deletions": 0}, {"lines": 12, "filePath": "jetty-websocket/websocket-tests/src/test/resources/pong-config-web.xml", "insertions": 0, "deletions": 12}, {"lines": 48, "filePath": "jetty-websocket/jetty-websocket-common/src/main/java/org/eclipse/jetty/websocket/common/message/PartialBinaryMessageSink.java", "insertions": 48, "deletions": 0}, {"lines": 227, "filePath": "jetty-websocket/jetty-websocket-common/src/main/java/org/eclipse/jetty/websocket/common/message/MessageInputStream.java", "insertions": 227, "deletions": 0}, {"lines": 47, "filePath": "jetty-websocket/websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/client/jsr356/QuotesSocket.java", "insertions": 0, "deletions": 47}, {"lines": 46, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/test/WriteCallbackDelegate.java", "insertions": 0, "deletions": 46}, {"lines": 70, "filePath": "jetty-websocket/jetty-websocket-client/src/test/java/examples/SimpleEchoClient.java", "insertions": 70, "deletions": 0}, {"lines": 44, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/function/PublicNonStaticPredicate.java", "insertions": 0, "deletions": 44}], "commitDateTime": "2018-11-02 13:07:43", "spoonStatsSkippedReason": "tooManyFiles"}, {"commitMessage": "Merge pull request #2902 from eclipse/jetty-9.4.x-issue-2875-websocketclient-redirect\n\nIssues #2875 and #2901 WebSocketClient Redirected Upgrade", "commitParents": ["f6474f9b8c1470c62dae6d677e9fe121558528ef", "ae169aa6244ad1afc8c4665a839f9f4b1c9e6e6b"], "commitHash": "b225ebe756a2ec2aa7df60fe99d9d702bac7baa8", "commitSpoonAstDiffStats": [{"spoonFilePath": "WebSocketUpgradeRequest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketUpgradeRequest.onComplete(org.eclipse.jetty.client.api.Result)", "DEL": 1, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketUpgradeRequest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "WebSocketSession.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.WebSocketSession.open()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "RedirectWebSocketClientTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.RedirectWebSocketClientTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "BlockheadClientRequest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.test.BlockheadClientRequest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpRequest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpRequest.getConversation()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpChannelOverHTTP.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.http.HttpChannelOverHTTP.exchangeTerminating(org.eclipse.jetty.client.HttpExchange,org.eclipse.jetty.client.api.Result)", "DEL": 1, "INS": 1, "UPD": 3, "MOV": 0, "TOT": 5}]}], "nameRev": "b225ebe756a2ec2aa7df60fe99d9d702bac7baa8 tags/jetty-9.4.13.v20181111~77", "commitUser": "joakime", "authoredDateTime": "2018-09-20 13:56:55", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 8, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/http/HttpChannelOverHTTP.java", "insertions": 4, "deletions": 4}, {"lines": 2, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpRequest.java", "insertions": 1, "deletions": 1}, {"lines": 1, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/test/BlockheadClientRequest.java", "insertions": 1, "deletions": 0}, {"lines": 6, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/WebSocketUpgradeRequest.java", "insertions": 4, "deletions": 2}, {"lines": 155, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/RedirectWebSocketClientTest.java", "insertions": 155, "deletions": 0}, {"lines": 2, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/WebSocketSession.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2018-09-20 13:56:55", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixing #2875 - WebSocketClient upgrade with redirect support\n\n+ Using HttpClient fixes from #2901 to allow upgrader to be\n  held for entire conversation regardless of authentication\n  or redirect behaviors.\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["00843c8ed90c4ad5e62aa28e71ef9a091cab0ee1"], "commitHash": "ae169aa6244ad1afc8c4665a839f9f4b1c9e6e6b", "commitSpoonAstDiffStats": [{"spoonFilePath": "WebSocketSession.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.WebSocketSession.open()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "WebSocketUpgradeRequest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketUpgradeRequest.onComplete(org.eclipse.jetty.client.api.Result)", "DEL": 1, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketUpgradeRequest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "RedirectWebSocketClientTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.RedirectWebSocketClientTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "BlockheadClientRequest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.test.BlockheadClientRequest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "ae169aa6244ad1afc8c4665a839f9f4b1c9e6e6b tags/jetty-9.4.13.v20181111~77^2", "commitUser": "joakime", "authoredDateTime": "2018-09-12 14:40:03", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 155, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/RedirectWebSocketClientTest.java", "insertions": 155, "deletions": 0}, {"lines": 2, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/WebSocketSession.java", "insertions": 1, "deletions": 1}, {"lines": 6, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/WebSocketUpgradeRequest.java", "insertions": 4, "deletions": 2}, {"lines": 1, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/test/BlockheadClientRequest.java", "insertions": 1, "deletions": 0}], "commitDateTime": "2018-09-12 15:57:31", "spoonStatsSkippedReason": ""}], "title": "Introduce HttpConnectionUpgrader as a conversation component in HttpClient", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 1.0, "INS": 1.0, "UPD": 4.0, "MOV": 0.0, "TOT": 6.0, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 10.0, "insertions": 5.0, "gitFilesChange": 2, "deletions": 5.0}, "closed": "2018-09-20 18:57:31", "statsSkippedReason": "", "body": "The Jetty HttpClient HttpConnectionUpgrader was declared as a Request component.\r\nBut due Authentication and Redirect behaviors (that belong to the conversation) will cause a new HttpRequest object to be created.\r\nMaking the HttpConnectionUpgrader not function.\r\n\r\nThis was discovered in Issue #2875 ", "changesInPackagesGIT": ["jetty-client/src/main/java/org/eclipse/jetty/client/http", "jetty-client/src/main/java/org/eclipse/jetty/client"], "changesInPackagesSPOON": ["org.eclipse.jetty.client.http.HttpChannelOverHTTP.exchangeTerminating(org.eclipse.jetty.client.HttpExchange,org.eclipse.jetty.client.api.Result)", "org.eclipse.jetty.client.HttpRequest.getConversation()"], "ttf": 7.000277777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/2901"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 2}, "labels": ["Bug"], "user": "coudy", "filteredCommits": [], "commits": {"3f34f70ad54392e14e580bd2cb05c85cef86d0b4": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "b225ebe756a2ec2aa7df60fe99d9d702bac7baa8": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "ae169aa6244ad1afc8c4665a839f9f4b1c9e6e6b": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2018-08-31 10:02:55", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "3f34f70ad54392e14e580bd2cb05c85cef86d0b4", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #2902 from eclipse/jetty-9.4.x-issue-2875-websocketclient-redirect\n\nIssues #2875 and #2901 WebSocketClient Redirected Upgrade", "commitParents": ["f6474f9b8c1470c62dae6d677e9fe121558528ef", "ae169aa6244ad1afc8c4665a839f9f4b1c9e6e6b"], "commitHash": "b225ebe756a2ec2aa7df60fe99d9d702bac7baa8", "commitSpoonAstDiffStats": [{"spoonFilePath": "WebSocketUpgradeRequest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketUpgradeRequest.onComplete(org.eclipse.jetty.client.api.Result)", "DEL": 1, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketUpgradeRequest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "WebSocketSession.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.WebSocketSession.open()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "RedirectWebSocketClientTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.RedirectWebSocketClientTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "BlockheadClientRequest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.test.BlockheadClientRequest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpRequest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpRequest.getConversation()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpChannelOverHTTP.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.http.HttpChannelOverHTTP.exchangeTerminating(org.eclipse.jetty.client.HttpExchange,org.eclipse.jetty.client.api.Result)", "DEL": 1, "INS": 1, "UPD": 3, "MOV": 0, "TOT": 5}]}], "nameRev": "b225ebe756a2ec2aa7df60fe99d9d702bac7baa8 tags/jetty-9.4.13.v20181111~77", "commitUser": "joakime", "authoredDateTime": "2018-09-20 13:56:55", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 8, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/http/HttpChannelOverHTTP.java", "insertions": 4, "deletions": 4}, {"lines": 2, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpRequest.java", "insertions": 1, "deletions": 1}, {"lines": 1, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/test/BlockheadClientRequest.java", "insertions": 1, "deletions": 0}, {"lines": 6, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/WebSocketUpgradeRequest.java", "insertions": 4, "deletions": 2}, {"lines": 155, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/RedirectWebSocketClientTest.java", "insertions": 155, "deletions": 0}, {"lines": 2, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/WebSocketSession.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2018-09-20 13:56:55", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixing #2875 - WebSocketClient upgrade with redirect support\n\n+ Using HttpClient fixes from #2901 to allow upgrader to be\n  held for entire conversation regardless of authentication\n  or redirect behaviors.\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["00843c8ed90c4ad5e62aa28e71ef9a091cab0ee1"], "commitHash": "ae169aa6244ad1afc8c4665a839f9f4b1c9e6e6b", "commitSpoonAstDiffStats": [{"spoonFilePath": "WebSocketSession.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.WebSocketSession.open()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "WebSocketUpgradeRequest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketUpgradeRequest.onComplete(org.eclipse.jetty.client.api.Result)", "DEL": 1, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketUpgradeRequest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "RedirectWebSocketClientTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.RedirectWebSocketClientTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "BlockheadClientRequest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.test.BlockheadClientRequest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "ae169aa6244ad1afc8c4665a839f9f4b1c9e6e6b tags/jetty-9.4.13.v20181111~77^2", "commitUser": "joakime", "authoredDateTime": "2018-09-12 14:40:03", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 155, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/RedirectWebSocketClientTest.java", "insertions": 155, "deletions": 0}, {"lines": 2, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/WebSocketSession.java", "insertions": 1, "deletions": 1}, {"lines": 6, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/WebSocketUpgradeRequest.java", "insertions": 4, "deletions": 2}, {"lines": 1, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/test/BlockheadClientRequest.java", "insertions": 1, "deletions": 0}], "commitDateTime": "2018-09-12 15:57:31", "spoonStatsSkippedReason": ""}], "title": "Fix WebSocketClient.connect() hang when attempting to connect at an invalid websocket endpoint", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2018-09-14 16:16:36", "statsSkippedReason": "", "body": "I\u2019ve been using the web socket client for a while and recently noticed that the session future doesn\u2019t always complete on `connect()`. Specifically, this happens when I accidentally use \u2018ws://' instead of \u2018wss://', so the upgrade fails with my server responding with a 301 (and a Location rewritten to HTTPS). My code looks as follows:\r\n\r\n```\r\nvar client = new WebSocketClient();\r\nclient.start();\r\nvar request = new ClientUpgradeRequest();\r\nvar sessionFuture = client.connect(delegate, serviceUri, request);\r\nvar session = sessionFuture.get();\r\n```\r\nI\u2019d expect `session` to be `isDone()` and throw an `ExecutionException`. Instead, the blocking get hangs forever.\r\n\r\nI can reproduce this on 9.4.12.RC2 from Maven Central.", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 14.000277777777777, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/2875"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug", "Performance"], "user": "AntonIvanov87", "filteredCommits": [], "commits": {"29d466e7046bfd2c67d50194a606ed5276a6c8f9": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2018-08-25 13:43:34", "commitsDetails": [{"commitMessage": "Merge pull request #2862 from AntonIvanov87/jetty-9.3.x-2860-fix-leakage-of-HttpDestinations\n\nIssue #2860 Fix leakage of HttpDestinations in HttpClient", "commitParents": ["bd143a674ba7fbb3c7e7e450c8102e9a4bd95172", "6211564f797ee2a09b8216c9aa0990f913bfa475"], "commitHash": "29d466e7046bfd2c67d50194a606ed5276a6c8f9", "commitSpoonAstDiffStats": [{"spoonFilePath": "PoolingHttpDestination.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.PoolingHttpDestination.tryRemoveIdleDestination()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.PoolingHttpDestination.abort(java.lang.Throwable)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.PoolingHttpDestination.close(org.eclipse.jetty.client.api.Connection)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.client.PoolingHttpDestination.failed(java.lang.Throwable)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpDestinationOverHTTPTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.http.HttpDestinationOverHTTPTest.testDestinationIsRemovedAfterConnectionError()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "29d466e7046bfd2c67d50194a606ed5276a6c8f9 tags/jetty-9.4.12.v20180830~8^2", "commitUser": "sbordet", "authoredDateTime": "2018-08-27 10:13:56", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 27, "filePath": "jetty-client/src/test/java/org/eclipse/jetty/client/http/HttpDestinationOverHTTPTest.java", "insertions": 27, "deletions": 0}, {"lines": 32, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/PoolingHttpDestination.java", "insertions": 22, "deletions": 10}], "commitDateTime": "2018-08-27 10:13:56", "spoonStatsSkippedReason": ""}], "title": "Leakage of HttpDestinations in HttpClient", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0, "insertions": 0, "gitFilesChange": 0, "deletions": 0}, "closed": "2018-08-27 09:52:58", "statsSkippedReason": "", "body": "### Problem\r\nThere is a memory leak in `HttpClient` that causes our production system to crash.\r\nIdle `HttpDestination` can remain forever in the `HttpClient.destinations` field even if `removeIdleDestinations` is set to true.\r\n\r\n### Investigation\r\nNormally `PoolingHttpDestination` is removed from the `HttpClient.destinations` when last connection to the destination is closed.\r\nBut what if we were unable to open any connection to a destination? For example, because we can not resolve host ip address, destination server is down, etc.\r\nThen there will be no last connection to close, so the destination will remain forever in 'destinations'. (Unless destination server is up and a new request to the server is made.)", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 1.0002777777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/2860"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "sbordet", "filteredCommits": ["bc78778f028827f93c54b81a547c758fe4ed16da"], "commits": {"bc78778f028827f93c54b81a547c758fe4ed16da": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2018-08-20 20:58:04", "commitsDetails": [{"commitMessage": "Issue #2836 - Sequential HTTPS requests may not reuse the same connection.\n\nWIP.\nTentative fix to avoid that onFillable() is called after the exchange\nis completed.\nNow DecryptedEndPoint.fillInterest.fillable() is called before other\nmethods that may advance the exchange processing.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["a3fe88cf1f1cbeec40fd694b1adc8376ade7c99b"], "commitHash": "bc78778f028827f93c54b81a547c758fe4ed16da", "commitSpoonAstDiffStats": [{"spoonFilePath": "FillInterest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.FillInterest.fillable()", "DEL": 1, "INS": 2, "UPD": 1, "MOV": 1, "TOT": 5}]}, {"spoonFilePath": "SslConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.onFillable()", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 1, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.IncompleteWriteCallback.succeeded()", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}]}], "nameRev": "bc78778f028827f93c54b81a547c758fe4ed16da tags/jetty-9.4.12.v20180830~20^2~2", "commitUser": "sbordet", "authoredDateTime": "2018-08-20 23:01:43", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 8, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/FillInterest.java", "insertions": 6, "deletions": 2}, {"lines": 9, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ssl/SslConnection.java", "insertions": 7, "deletions": 2}], "commitDateTime": "2018-08-20 23:01:43", "spoonStatsSkippedReason": ""}], "title": "Sequential HTTPS requests may not reuse the same connection", "spoonStatsSummary": {"spoonMethodsChanged": 3, "DEL": 2, "INS": 4, "UPD": 1, "MOV": 3, "TOT": 10, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 17, "insertions": 13, "gitFilesChange": 2, "deletions": 4}, "closed": "2018-09-04 15:45:41", "statsSkippedReason": "", "body": "See also airlift/airlift#663\r\n\r\nTypical stack trace is the following:\r\n\r\n```\r\njava.nio.channels.ClosedChannelException\r\n\tat org.eclipse.jetty.io.WriteFlusher.onClose(WriteFlusher.java:502)\r\n\tat org.eclipse.jetty.io.AbstractEndPoint.onClose(AbstractEndPoint.java:353)\r\n\tat org.eclipse.jetty.io.ChannelEndPoint.onClose(ChannelEndPoint.java:216)\r\n\tat org.eclipse.jetty.io.AbstractEndPoint.doOnClose(AbstractEndPoint.java:225)\r\n\tat org.eclipse.jetty.io.AbstractEndPoint.close(AbstractEndPoint.java:192)\r\n\tat org.eclipse.jetty.io.AbstractEndPoint.close(AbstractEndPoint.java:175)\r\n\tat org.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.doClose(SslConnection.java:1109)\r\n\tat org.eclipse.jetty.io.AbstractEndPoint.doOnClose(AbstractEndPoint.java:220)\r\n\tat org.eclipse.jetty.io.AbstractEndPoint.close(AbstractEndPoint.java:192)\r\n\tat org.eclipse.jetty.io.AbstractEndPoint.close(AbstractEndPoint.java:175)\r\n\tat org.eclipse.jetty.client.http.HttpConnectionOverHTTP.close(HttpConnectionOverHTTP.java:195)\r\n\tat org.eclipse.jetty.client.http.HttpConnectionOverHTTP.close(HttpConnectionOverHTTP.java:182)\r\n\tat org.eclipse.jetty.client.http.HttpConnectionOverHTTP.onFillable(HttpConnectionOverHTTP.java:161)\r\n\tat org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:281)\r\n\tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:102)\r\n\tat org.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.onFillable(SslConnection.java:422)\r\n\tat org.eclipse.jetty.io.ssl.SslConnection.onFillable(SslConnection.java:306)\r\n\tat org.eclipse.jetty.io.ssl.SslConnection$2.succeeded(SslConnection.java:160)\r\n\tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:102)\r\n\tat org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:118)\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.java:333)\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:310)\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:168)\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:126)\r\n\tat org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:366)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:762)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:680)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\r\n```", "changesInPackagesGIT": ["jetty-io/src/main/java/org/eclipse/jetty/io/ssl", "jetty-io/src/main/java/org/eclipse/jetty/io"], "changesInPackagesSPOON": ["org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.onFillable()", "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.IncompleteWriteCallback.succeeded()", "org.eclipse.jetty.io.FillInterest.fillable()"], "ttf": 14.000277777777777, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/2836"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug", "Microsoft Windows"], "user": "joakime", "filteredCommits": ["a90c28bde883254c149f580a848b8209c39b779e"], "commits": {"e93dc59e10b5ed793b2bdae4cd611ef6cb81db85": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "a90c28bde883254c149f580a848b8209c39b779e": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2018-08-20 15:57:26", "commitsDetails": [{"commitMessage": "Merge pull request #2843 from eclipse/jetty-9.4.x-issue-2835-war-file-locking-windows\n\nIssue #2835 - Use original WAR Resource for lastModified", "commitParents": ["51f9a1b5c69a8d7088af614abc0c5e93756f1328", "a90c28bde883254c149f580a848b8209c39b779e"], "commitHash": "e93dc59e10b5ed793b2bdae4cd611ef6cb81db85", "commitSpoonAstDiffStats": [{"spoonFilePath": "WebInfConfiguration.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.WebInfConfiguration.unpack(org.eclipse.jetty.webapp.WebAppContext)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}]}], "nameRev": "e93dc59e10b5ed793b2bdae4cd611ef6cb81db85 tags/jetty-9.4.12.v20180830~22", "commitUser": "joakime", "authoredDateTime": "2018-08-22 09:06:33", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 14, "filePath": "jetty-webapp/src/main/java/org/eclipse/jetty/webapp/WebInfConfiguration.java", "insertions": 10, "deletions": 4}], "commitDateTime": "2018-08-22 09:06:33", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #2835 - Use original WAR Resource for lastModified\n\n+ During WebInfConfiguration.unpack()\n  If you have WebAppContext declared with .setWar()\n  and it points to a file on the filesystem, use that\n  original PathResource object to determine lastModified()\n  instead of the forced JarFileResource.\n  This is done to avoid URLConnection caching that prevents\n  the original WAR file from being deleted / replaced on\n  MS Windows.\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["8b7a88608a9b39df47854ac45f838ec880474b15"], "commitHash": "a90c28bde883254c149f580a848b8209c39b779e", "commitSpoonAstDiffStats": [{"spoonFilePath": "WebInfConfiguration.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.WebInfConfiguration.unpack(org.eclipse.jetty.webapp.WebAppContext)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}]}], "nameRev": "a90c28bde883254c149f580a848b8209c39b779e tags/jetty-9.4.12.v20180830~22^2", "commitUser": "joakime", "authoredDateTime": "2018-08-21 16:37:19", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 14, "filePath": "jetty-webapp/src/main/java/org/eclipse/jetty/webapp/WebInfConfiguration.java", "insertions": 10, "deletions": 4}], "commitDateTime": "2018-08-21 16:39:31", "spoonStatsSkippedReason": ""}], "title": "JarFileResource#lastModified() side effect is URL caching preventing hot redeploy on Windows", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 14, "insertions": 10, "gitFilesChange": 1, "deletions": 4}, "closed": "2018-08-24 11:49:33", "statsSkippedReason": "", "body": "As pointed out in PR #2735 the use of `JarFileResource.lastModified()` will open the JAR File (using `URLConnection`) just to get the `lastModified` of the file itself.\r\n\r\nThis is undesired and will hold a lock on the `web_app` resource during the `WebInfConfiguration.unpack()` due to the URL caching behaviors, resulting in Hot Redeployment to not work on MS Windows.\r\n\r\nhttps://github.com/eclipse/jetty.project/blob/d8e0f8df1206536612c938b63ae677d2352de14b/jetty-webapp/src/main/java/org/eclipse/jetty/webapp/WebInfConfiguration.java#L645-L649\r\n\r\nThe use of `lastModified()` should not have this kind of side effect with lock/open/cache behaviors.", "changesInPackagesGIT": ["jetty-webapp/src/main/java/org/eclipse/jetty/webapp"], "changesInPackagesSPOON": ["org.eclipse.jetty.webapp.WebInfConfiguration.unpack(org.eclipse.jetty.webapp.WebAppContext)"], "ttf": 3.000277777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/2835"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 2, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["fc5dd874f3deda71e6cd42af994a5af5cb6be4af"], "commits": {"7c5bcbe0ca384f544c6eae095d641aebd4490780": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "793cc8952c1b8bb1b437a09b5af3b802b92a8b16": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "8b7a88608a9b39df47854ac45f838ec880474b15": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "fc5dd874f3deda71e6cd42af994a5af5cb6be4af": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2018-08-17 20:37:11", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "7c5bcbe0ca384f544c6eae095d641aebd4490780", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "793cc8952c1b8bb1b437a09b5af3b802b92a8b16", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #2825 from eclipse/jetty-9.4.x-issue-2824-request-parameters\n\nIssue #2824 - Request.getParameters() should not reparse or recreate _parameters Map", "commitParents": ["45d5bd2cae448d83cd174f6002095548675cd108", "fc5dd874f3deda71e6cd42af994a5af5cb6be4af"], "commitHash": "8b7a88608a9b39df47854ac45f838ec880474b15", "commitSpoonAstDiffStats": [{"spoonFilePath": "RequestTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testConnectionClose()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "Request.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Request.getParameters()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 3, "TOT": 4}]}], "nameRev": "8b7a88608a9b39df47854ac45f838ec880474b15 tags/jetty-9.4.12.v20180830~24", "commitUser": "joakime", "authoredDateTime": "2018-08-21 11:10:01", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 4, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Request.java", "insertions": 2, "deletions": 2}, {"lines": 7, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/RequestTest.java", "insertions": 4, "deletions": 3}], "commitDateTime": "2018-08-21 11:10:01", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #2824 - Request.getParameters() should not reparse or recreate _parameters Map\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["45d5bd2cae448d83cd174f6002095548675cd108"], "commitHash": "fc5dd874f3deda71e6cd42af994a5af5cb6be4af", "commitSpoonAstDiffStats": [{"spoonFilePath": "RequestTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testConnectionClose()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "Request.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Request.getParameters()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 3, "TOT": 4}]}], "nameRev": "fc5dd874f3deda71e6cd42af994a5af5cb6be4af tags/jetty-9.4.12.v20180830~24^2", "commitUser": "joakime", "authoredDateTime": "2018-08-17 16:57:28", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 4, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Request.java", "insertions": 2, "deletions": 2}, {"lines": 7, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/RequestTest.java", "insertions": 4, "deletions": 3}], "commitDateTime": "2018-08-21 11:09:15", "spoonStatsSkippedReason": ""}], "title": "Every call to HttpServletRequest.getParameter*() methods results in a newly created Map object if both query and body content exist", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0.0, "INS": 1.0, "UPD": 0.0, "MOV": 3.0, "TOT": 4.0, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 4.0, "insertions": 2.0, "gitFilesChange": 1, "deletions": 2.0}, "closed": "2018-08-22 07:04:05", "statsSkippedReason": "", "body": "Every call to the various HttpServletRequest.getParameter() methods results in a new Map being created.\r\n\r\nFrom the `Request.getParameters()` method ...\r\n\r\nhttps://github.com/eclipse/jetty.project/blob/ddd80deeb96eed136029b944258b36b285af79c6/jetty-server/src/main/java/org/eclipse/jetty/server/Request.java#L409-L419\r\n\r\nSince all other `.getParameter*()` methods uses `.getParameters()`, this will result in a new `MultiMap` if the request contains **both** query and content parameters.", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.Request.getParameters()"], "ttf": 4.000277777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/2824"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 2, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug", "Security"], "user": "joakime", "filteredCommits": ["c640f4a4d57c44dd1c6a1eb08ce06a5775c26b7c"], "commits": {"9e0bd2669ba540a1042b52bcc9f48a84265081e7": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "efce43eefc0e15ad1dc8db5eb47222d500ab94d1": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "c640f4a4d57c44dd1c6a1eb08ce06a5775c26b7c": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "e5d61b2a2a198cfeef2fce214cce4fd355ad9b27": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2018-08-15 22:18:57", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "9e0bd2669ba540a1042b52bcc9f48a84265081e7", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #2816 from eclipse/jetty-9.4.x-issue-2881-ssl.dump\n\nIssue #2811 - Dump fix JreDisabled:java.security to JVM:disabled", "commitParents": ["6015ad5ead4433c9678a16138d00efa80f483729", "c640f4a4d57c44dd1c6a1eb08ce06a5775c26b7c"], "commitHash": "efce43eefc0e15ad1dc8db5eb47222d500ab94d1", "commitSpoonAstDiffStats": [{"spoonFilePath": "SslSelectionDump.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.ssl.SslSelectionDump.CaptionedList", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.SslSelectionDump", "DEL": 2, "INS": 1, "UPD": 4, "MOV": 3, "TOT": 10}]}, {"spoonFilePath": "SslContextFactoryTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactoryTest.testSLOTH()", "DEL": 0, "INS": 1, "UPD": 5, "MOV": 5, "TOT": 11}]}, {"spoonFilePath": "SslContextFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.selectionDump()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.dump(java.lang.Appendable,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 4, "TOT": 5}]}], "nameRev": "efce43eefc0e15ad1dc8db5eb47222d500ab94d1 tags/jetty-9.4.12.v20180830~18", "commitUser": "joakime", "authoredDateTime": "2018-08-22 11:45:48", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 50, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/ssl/SslContextFactory.java", "insertions": 28, "deletions": 22}, {"lines": 53, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/ssl/SslContextFactoryTest.java", "insertions": 52, "deletions": 1}, {"lines": 42, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/ssl/SslSelectionDump.java", "insertions": 23, "deletions": 19}], "commitDateTime": "2018-08-22 11:45:48", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "e5d61b2a2a198cfeef2fce214cce4fd355ad9b27", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #2811 - Dump fix JreDisabled:java.security to JVM:disabled\n\n+ ensuring SLOTH fix still works with updated testcase\n+ Dump detection of JreDisabled:java.security only checked\n  default SSLEngine.enabledCipherSuites\n  New implementation changes meaning to be more general\n  JVM:disabled (as in not selected by default), and\n  only reports it as disabled in the dump if not specifically\n  included from the SSLEngine.supportedCipherSuites via\n  the SslContextFactory.includedCipherSuites configuration\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["a6c071e5e95426d314430bc6f32827c06fbf075b"], "commitHash": "c640f4a4d57c44dd1c6a1eb08ce06a5775c26b7c", "commitSpoonAstDiffStats": [{"spoonFilePath": "SslSelectionDump.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.ssl.SslSelectionDump.CaptionedList", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.SslSelectionDump", "DEL": 2, "INS": 1, "UPD": 4, "MOV": 3, "TOT": 10}]}, {"spoonFilePath": "SslContextFactoryTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactoryTest.testSLOTH()", "DEL": 0, "INS": 1, "UPD": 5, "MOV": 5, "TOT": 11}]}, {"spoonFilePath": "SslContextFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.selectionDump()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory.dump(java.lang.Appendable,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 4, "TOT": 5}]}], "nameRev": "c640f4a4d57c44dd1c6a1eb08ce06a5775c26b7c tags/jetty-9.4.12.v20180830~18^2", "commitUser": "joakime", "authoredDateTime": "2018-08-16 12:23:51", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 50, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/ssl/SslContextFactory.java", "insertions": 28, "deletions": 22}, {"lines": 53, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/ssl/SslContextFactoryTest.java", "insertions": 52, "deletions": 1}, {"lines": 42, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/ssl/SslSelectionDump.java", "insertions": 23, "deletions": 19}], "commitDateTime": "2018-08-16 13:49:28", "spoonStatsSkippedReason": ""}], "title": "SslContextFactory.dump incorrectly uses default enabled for determining \"jre:disabled\" flag", "spoonStatsSummary": {"spoonMethodsChanged": 4, "DEL": 3.0, "INS": 3.0, "UPD": 4.0, "MOV": 7.0, "TOT": 17.0, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 92.0, "insertions": 51.0, "gitFilesChange": 2, "deletions": 41.0}, "closed": "2018-08-24 11:50:26", "statsSkippedReason": "", "body": "If a cipher suite is enabled via includes, it takes that list from the default SSLEngine's supported list.\r\nBut the .dump() seems to use (exclusively) the SSLEngine enabled list.\r\nNeed testcase to verify this.", "changesInPackagesGIT": ["jetty-util/src/main/java/org/eclipse/jetty/util/ssl"], "changesInPackagesSPOON": ["org.eclipse.jetty.util.ssl.SslContextFactory.selectionDump()", "org.eclipse.jetty.util.ssl.SslSelectionDump.CaptionedList", "org.eclipse.jetty.util.ssl.SslContextFactory.dump(java.lang.Appendable,java.lang.String)", "org.eclipse.jetty.util.ssl.SslSelectionDump"], "ttf": 8.000277777777777, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/2811"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 4, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "accwebs", "filteredCommits": [], "commits": {"c7fc674846577bbdf33585638a42ea46e0a00768": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "925d476cc08e77a152753974e391a7c8d13cb0a7": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "00fcfed0050dcbbaf893b5bcc31d6e64a5acbd02": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "c97844c435764683cc90997023307283c3c34f21": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "126b008a5adb859296fa399d716e4dd26037a5e0": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2018-08-13 17:24:24", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "126b008a5adb859296fa399d716e4dd26037a5e0", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "925d476cc08e77a152753974e391a7c8d13cb0a7", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "00fcfed0050dcbbaf893b5bcc31d6e64a5acbd02", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "sbordet", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #2798 thread budget warning default to available cores (#2799)\n\n* Issue #2798 thread budget warning default to available cores\r\n* Issue #2798 - Testcase example for ExecutorThreadPool\r\n* Issue #2798 - Better TestCases for ThreadPoolBudget\r\n* Simplified\r\n* Issue #2798 - ThreadPoolBudget improvements.\r\n* Removed unused imports.\r\n* Made fields private.\r\n* Removed field info.\r\n* Changed the logic to print the info on leases only when warning or throwing.\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\r\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\r\n", "commitParents": ["44e57f21701b7fda71542b8af0b448754a84667c"], "commitHash": "c7fc674846577bbdf33585638a42ea46e0a00768", "commitSpoonAstDiffStats": [{"spoonFilePath": "ExecutorThreadPool.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.thread.ExecutorThreadPool", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.thread.ExecutorThreadPool.setMaxThreads(int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AbstractThreadPoolTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.thread.AbstractThreadPoolTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ExecutorThreadPoolTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.thread.ExecutorThreadPoolTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "QueuedThreadPoolTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPoolTest.newPool(int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPoolTest", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "ThreadPoolBudget.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.thread.ThreadPoolBudget.reset()", "DEL": 1, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.util.thread.ThreadPoolBudget.check(int)", "DEL": 0, "INS": 4, "UPD": 0, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.util.thread.ThreadPoolBudget", "DEL": 2, "INS": 7, "UPD": 6, "MOV": 0, "TOT": 15}, {"spoonMethodName": "org.eclipse.jetty.util.thread.ThreadPoolBudget.1.close()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.thread.ThreadPoolBudget.Leased.close()", "DEL": 2, "INS": 0, "UPD": 1, "MOV": 2, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.util.thread.ThreadPoolBudget.infoOnLeases()", "DEL": 1, "INS": 0, "UPD": 3, "MOV": 1, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.util.thread.ThreadPoolBudget.Leased", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.thread.ThreadPoolBudget.leaseTo(java.lang.Object,int)", "DEL": 1, "INS": 1, "UPD": 1, "MOV": 2, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.util.thread.ThreadPoolBudget.check()", "DEL": 2, "INS": 0, "UPD": 11, "MOV": 1, "TOT": 14}]}, {"spoonFilePath": "QueuedThreadPool.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPool.setMaxThreads(int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPool", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "c7fc674846577bbdf33585638a42ea46e0a00768 tags/jetty-9.4.12.v20180830~11", "commitUser": "gregw", "authoredDateTime": "2018-08-24 10:15:55", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 80, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/thread/ThreadPoolBudget.java", "insertions": 43, "deletions": 37}, {"lines": 94, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/thread/AbstractThreadPoolTest.java", "insertions": 94, "deletions": 0}, {"lines": 28, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/thread/QueuedThreadPoolTest.java", "insertions": 17, "deletions": 11}, {"lines": 5, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/thread/QueuedThreadPool.java", "insertions": 4, "deletions": 1}, {"lines": 4, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/thread/ExecutorThreadPool.java", "insertions": 3, "deletions": 1}, {"lines": 30, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/thread/ExecutorThreadPoolTest.java", "insertions": 30, "deletions": 0}], "commitDateTime": "2018-08-24 10:15:55", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "c97844c435764683cc90997023307283c3c34f21", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "ThreadPoolBudget logs WARN when minThreads == maxThreads (was: Reasoning behind ThreadPoolBudget warning logic change on 3/5/18)", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2018-08-24 00:16:22", "statsSkippedReason": "", "body": "Hello,\r\n\r\nI recently upgraded an application from Dropwizard 1.2.5 to Dropwizard 1.2.8, and as a result, upgraded from Jetty 9.4.8.v20171121 to 9.4.11.v20180605.  As part of this upgrade, I'm getting a warning printed out from ThreadPoolBudget.java that wasn't being printed before:\r\n````\r\nWARN  [2018-08-11 01:16:06,732] - - - [main] org.eclipse.jetty.util.thread.ThreadPoolBudget: Low configured threads: (max=1408 - required=4)=1404 < warnAt=1408 for InstrumentedQueuedThreadPool[dw]@7c47b0f8{STARTING,1408<=0<=1408,i=0,q=0}[ReservedThreadExecutor@399fd710{s=0/4,p=0}]\r\n````\r\n\r\nTo track this down, I dug back into the commit history to understand why this is now showing up, and discovered that this is caused by a change made on 3/5/2018 to the thread count warning logic where the minimum thread count setting is now taken into account as part of the warning threshold (rather than just the number of available processor).  Specifically, I am referring to line 100 in commit:  9f2e4fd1f4d050b229375d4ebaf92ddffc571a1c   Because our min thread count and max thread count are set to the same value (and because a few 'required' threads are subtracted from the 'minimum' warning threshold value) we get a warning.  \r\n\r\nIt's possible I'm not searching correctly, but based on what I can tell, the commit message doesn't mention this change, explain the reasoning, nor reference an associated issue.\r\n\r\nDoes anyone know the reasoning behind this change?  I am trying to decide whether I should be changing our app's thread counts (i.e. I've always had it set wrong and it's finally alerting now) or if the alert is false (due to a possibly-accidental or erroneous change?).\r\n\r\nThanks for your time and all you do!", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 10.000277777777777, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/2798"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 3, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 3}, "labels": ["Bug", "Sponsored"], "user": "gregw", "filteredCommits": ["04cbb13ad32e7fc12430f6bc635ad90c6b5b740d"], "commits": {"eed441f8ee1f05c96ac2e33d4864b8b0abd714f3": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "bd143a674ba7fbb3c7e7e450c8102e9a4bd95172": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "267459ca6522e9f384bd02894f436b6d420f4cb2": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "a315d5464f9dc45d7a46c1033dbe662fa700a00c": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "52de1965b6781f5f8e457d3fb4d045605020c2cf": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "04cbb13ad32e7fc12430f6bc635ad90c6b5b740d": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "b33f6e2886ed475df958ac07191554919e668ee4": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2018-08-09 01:22:07", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "eed441f8ee1f05c96ac2e33d4864b8b0abd714f3", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #2787 BadMessage if bad query detected in dispatcher (#2827)\n\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>", "commitParents": ["2c0557b1aefa052bf5c091681a3ea67d1b418d7d"], "commitHash": "bd143a674ba7fbb3c7e7e450c8102e9a4bd95172", "commitSpoonAstDiffStats": [{"spoonFilePath": "DispatcherTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherTest.testForwardWithBadParams()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherTest.EchoServlet.service(javax.servlet.ServletRequest,javax.servlet.ServletResponse)", "DEL": 1, "INS": 2, "UPD": 2, "MOV": 2, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherTest.AlwaysForwardServlet", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "Request.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Request.mergeQueryParameters(java.lang.String,java.lang.String,boolean)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "ServletHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.ServletHandler.doHandle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 3, "TOT": 5}]}], "nameRev": "bd143a674ba7fbb3c7e7e450c8102e9a4bd95172 tags/jetty-9.4.12.v20180830~8^2~1", "commitUser": "gregw", "authoredDateTime": "2018-08-22 08:29:12", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 8, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletHandler.java", "insertions": 8, "deletions": 0}, {"lines": 11, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Request.java", "insertions": 8, "deletions": 3}, {"lines": 64, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/DispatcherTest.java", "insertions": 61, "deletions": 3}], "commitDateTime": "2018-08-22 08:29:12", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "267459ca6522e9f384bd02894f436b6d420f4cb2", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Unwrap ServletException #2787  (#2790)\n\n* Issue #2787 Unwrap ServletException\r\n* Do not unwrap UnavailableException\r\n* unwrap to specific targets\r\n* fixes from review\r\n* fixes after merge\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n", "commitParents": ["e5f0531db0ee0273a99eb4d0d872a1a65c56566b"], "commitHash": "a315d5464f9dc45d7a46c1033dbe662fa700a00c", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpChannel.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannel.minimalErrorResponse(java.lang.Throwable)", "DEL": 1, "INS": 3, "UPD": 2, "MOV": 4, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannel.handleException(java.lang.Throwable)", "DEL": 2, "INS": 3, "UPD": 4, "MOV": 2, "TOT": 11}]}, {"spoonFilePath": "HttpChannelState.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.onError(java.lang.Throwable)", "DEL": 0, "INS": 1, "UPD": 14, "MOV": 2, "TOT": 17}]}, {"spoonFilePath": "ErrorHandlerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest.before().3.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 4, "UPD": 0, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest.testBadMessage()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "a315d5464f9dc45d7a46c1033dbe662fa700a00c tags/jetty-9.4.12.v20180830~38", "commitUser": "gregw", "authoredDateTime": "2018-08-15 12:51:27", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 29, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ErrorHandlerTest.java", "insertions": 29, "deletions": 0}, {"lines": 32, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannelState.java", "insertions": 17, "deletions": 15}, {"lines": 58, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannel.java", "insertions": 35, "deletions": 23}], "commitDateTime": "2018-08-15 12:51:27", "spoonStatsSkippedReason": ""}, {"commitMessage": "Unwrap ServletException 9.3 #2787   (#2789)\n\n* Issus #2787 unwrap ServletException\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n\r\n* Do not unwrap unavailable exception\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n\r\n* unwrap to specific targets\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n\r\n* fixes from review\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n", "commitParents": ["33228edc7d55ad4919ae8262eac0b8e68d6069fc"], "commitHash": "52de1965b6781f5f8e457d3fb4d045605020c2cf", "commitSpoonAstDiffStats": [{"spoonFilePath": "OneHandler.java", "spoonMethods": []}, {"spoonFilePath": "HttpChannel.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannel.unwrap(java.lang.Throwable,java.lang.Class[])", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannel.handleException(java.lang.Throwable)", "DEL": 0, "INS": 2, "UPD": 14, "MOV": 0, "TOT": 16}]}, {"spoonFilePath": "ErrorHandlerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest.before()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest.testBadMessage()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "52de1965b6781f5f8e457d3fb4d045605020c2cf tags/jetty-9.4.12.v20180830~8^2~3", "commitUser": "gregw", "authoredDateTime": "2018-08-15 11:43:52", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 46, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ErrorHandlerTest.java", "insertions": 45, "deletions": 1}, {"lines": 52, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannel.java", "insertions": 37, "deletions": 15}, {"lines": 1, "filePath": "examples/embedded/src/main/java/org/eclipse/jetty/embedded/OneHandler.java", "insertions": 0, "deletions": 1}], "commitDateTime": "2018-08-15 11:43:52", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #2787 BadMessage if bad query detected in dispatcher\n\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\n", "commitParents": ["2c0557b1aefa052bf5c091681a3ea67d1b418d7d"], "commitHash": "04cbb13ad32e7fc12430f6bc635ad90c6b5b740d", "commitSpoonAstDiffStats": [{"spoonFilePath": "DispatcherTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherTest.testForwardWithBadParams()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherTest.EchoServlet.service(javax.servlet.ServletRequest,javax.servlet.ServletResponse)", "DEL": 1, "INS": 2, "UPD": 2, "MOV": 2, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherTest.AlwaysForwardServlet", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "Request.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Request.mergeQueryParameters(java.lang.String,java.lang.String,boolean)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "ServletHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.ServletHandler.doHandle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 3, "TOT": 5}]}], "nameRev": "04cbb13ad32e7fc12430f6bc635ad90c6b5b740d tags/jetty-9.3.25.v20180904~3", "commitUser": "gregw", "authoredDateTime": "2018-08-18 11:52:28", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 8, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletHandler.java", "insertions": 8, "deletions": 0}, {"lines": 11, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Request.java", "insertions": 8, "deletions": 3}, {"lines": 64, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/DispatcherTest.java", "insertions": 61, "deletions": 3}], "commitDateTime": "2018-08-18 11:52:28", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "b33f6e2886ed475df958ac07191554919e668ee4", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "Use status code from nested BadMessageException wrapped in ServletException", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 1.0, "INS": 2.0, "UPD": 0.0, "MOV": 4.0, "TOT": 7.0, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 19.0, "insertions": 16.0, "gitFilesChange": 2, "deletions": 3.0}, "closed": "2018-08-24 11:51:22", "statsSkippedReason": "", "body": "If a BadMessageException is thrown, but wrapped as a ServletException, then it's status code is not used for the response and a 500 generated.", "changesInPackagesGIT": ["jetty-servlet/src/main/java/org/eclipse/jetty/servlet", "jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.servlet.ServletHandler.doHandle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "org.eclipse.jetty.server.Request.mergeQueryParameters(java.lang.String,java.lang.String,boolean)"], "ttf": 15.000277777777777, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/2787"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["586484850ff7fe6f791bb413bd44e2ebe8aa3cee"], "commits": {"d36da55626061b414cc179e55037081c1cd7b289": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "586484850ff7fe6f791bb413bd44e2ebe8aa3cee": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2018-08-02 14:12:23", "commitsDetails": [{"commitMessage": "Merge pull request #2770 from eclipse/jetty-9.4.x-issue-2768-websocket-session-userproperties-null\n\nIssue #2768 - JSR356 Session.getUserProperties() is null during @OnOpen", "commitParents": ["5cf256f3fd84a18f571885a71b43a98589b8034b", "586484850ff7fe6f791bb413bd44e2ebe8aa3cee"], "commitHash": "d36da55626061b414cc179e55037081c1cd7b289", "commitSpoonAstDiffStats": [{"spoonFilePath": "EndpointEchoTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.EndpointEchoTest.testAbstractEchoInstance()", "DEL": 1, "INS": 2, "UPD": 2, "MOV": 3, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.EndpointEchoTest.testBasicEchoClassref()", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.EndpointEchoTest.testBasicEchoInstance()", "DEL": 1, "INS": 2, "UPD": 2, "MOV": 3, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.EndpointEchoTest.testAbstractEchoClassref()", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}]}, {"spoonFilePath": "EndpointEchoClient.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.EndpointEchoClient.onOpen(javax.websocket.Session,javax.websocket.EndpointConfig)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "EchoStringEndpoint.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.samples.EchoStringEndpoint", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.samples.EchoStringEndpoint.onMessage(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.samples.EchoStringEndpoint.onOpen(javax.websocket.Session,javax.websocket.EndpointConfig)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ConfiguratorTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.ConfiguratorTest.testEndpointHandshakeInfo()", "DEL": 1, "INS": 2, "UPD": 2, "MOV": 3, "TOT": 8}]}, {"spoonFilePath": "MessageQueue.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.MessageQueue", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "EchoCaptureHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.EchoCaptureHandler", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.EchoCaptureHandler.onMessage(java.lang.String)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "d36da55626061b414cc179e55037081c1cd7b289 tags/jetty-9.4.12.RC2~16", "commitUser": "joakime", "authoredDateTime": "2018-08-03 08:16:10", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 6, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/EchoCaptureHandler.java", "insertions": 4, "deletions": 2}, {"lines": 18, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/EndpointEchoTest.java", "insertions": 12, "deletions": 6}, {"lines": 18, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/samples/EchoStringEndpoint.java", "insertions": 14, "deletions": 4}, {"lines": 1, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/EndpointEchoClient.java", "insertions": 1, "deletions": 0}, {"lines": 4, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/MessageQueue.java", "insertions": 4, "deletions": 0}, {"lines": 5, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/ConfiguratorTest.java", "insertions": 4, "deletions": 1}], "commitDateTime": "2018-08-03 08:16:10", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #2768 - JSR356 Session.getUserProperties() is null during @OnOpen\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["d37b506cb161b6fb93dd5c9b8237713cdd17316c"], "commitHash": "586484850ff7fe6f791bb413bd44e2ebe8aa3cee", "commitSpoonAstDiffStats": [{"spoonFilePath": "EndpointEchoTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.EndpointEchoTest.testAbstractEchoInstance()", "DEL": 1, "INS": 2, "UPD": 2, "MOV": 3, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.EndpointEchoTest.testBasicEchoClassref()", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.EndpointEchoTest.testBasicEchoInstance()", "DEL": 1, "INS": 2, "UPD": 2, "MOV": 3, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.EndpointEchoTest.testAbstractEchoClassref()", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}]}, {"spoonFilePath": "EndpointEchoClient.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.EndpointEchoClient.onOpen(javax.websocket.Session,javax.websocket.EndpointConfig)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "EchoStringEndpoint.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.samples.EchoStringEndpoint", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.samples.EchoStringEndpoint.onMessage(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.samples.EchoStringEndpoint.onOpen(javax.websocket.Session,javax.websocket.EndpointConfig)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ConfiguratorTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.ConfiguratorTest.testEndpointHandshakeInfo()", "DEL": 1, "INS": 2, "UPD": 2, "MOV": 3, "TOT": 8}]}, {"spoonFilePath": "MessageQueue.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.MessageQueue", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "EchoCaptureHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.EchoCaptureHandler", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.EchoCaptureHandler.onMessage(java.lang.String)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "586484850ff7fe6f791bb413bd44e2ebe8aa3cee tags/jetty-9.4.12.RC2~16^2", "commitUser": "joakime", "authoredDateTime": "2018-08-02 09:16:34", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 6, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/EchoCaptureHandler.java", "insertions": 4, "deletions": 2}, {"lines": 18, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/EndpointEchoTest.java", "insertions": 12, "deletions": 6}, {"lines": 18, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/samples/EchoStringEndpoint.java", "insertions": 14, "deletions": 4}, {"lines": 1, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/EndpointEchoClient.java", "insertions": 1, "deletions": 0}, {"lines": 4, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/MessageQueue.java", "insertions": 4, "deletions": 0}, {"lines": 5, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/ConfiguratorTest.java", "insertions": 4, "deletions": 1}], "commitDateTime": "2018-08-02 09:16:34", "spoonStatsSkippedReason": ""}], "title": "JSR356 Session.getUserProperties() is null during @OnOpen", "spoonStatsSummary": {"spoonMethodsChanged": 7, "DEL": 0, "INS": 4, "UPD": 8, "MOV": 0, "TOT": 12, "spoonFilesChanged": 4}, "gitStatsSummary": {"lines": 0, "insertions": 0, "gitFilesChange": 0, "deletions": 0}, "closed": "2018-08-15 19:54:33", "statsSkippedReason": "", "body": "During troubleshooting of Issue #2767 it was discovered that `Session.getUserProperties()` is null during `@OnOpen` call.", "changesInPackagesGIT": [], "changesInPackagesSPOON": ["org.eclipse.jetty.websocket.jsr356.EchoCaptureHandler", "org.eclipse.jetty.websocket.jsr356.EndpointEchoClient.onOpen(javax.websocket.Session,javax.websocket.EndpointConfig)", "org.eclipse.jetty.websocket.jsr356.EchoCaptureHandler.onMessage(java.lang.String)", "org.eclipse.jetty.websocket.jsr356.MessageQueue", "org.eclipse.jetty.websocket.jsr356.samples.EchoStringEndpoint", "org.eclipse.jetty.websocket.jsr356.samples.EchoStringEndpoint.onMessage(java.lang.String)", "org.eclipse.jetty.websocket.jsr356.samples.EchoStringEndpoint.onOpen(javax.websocket.Session,javax.websocket.EndpointConfig)"], "ttf": 13.000277777777777, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/2768"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 3, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["9a4b7807810d884a56a8022f48021a9def75e761"], "commits": {"9a4b7807810d884a56a8022f48021a9def75e761": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "ee68e7fdec98117d2d98bf34823439ca9fd7c4da": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "f1072e570137bf50f96312808a72f3982de1c47c": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "8430dce7c831e3badbc0837a3061e27fb5c8229f": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "0119345634994af825525aa8750d08dc92e83233": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2018-08-02 12:50:50", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "0119345634994af825525aa8750d08dc92e83233", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #2769 from eclipse/jetty-9.4.x-issue-2767-websocket-client-default-policy\n\nIssue #2767 - WebSocket Policy on JSR356 ClientContainer not represented correctly", "commitParents": ["e485b8d78de39eebcb85be4f93f97c926408e1f2", "9a4b7807810d884a56a8022f48021a9def75e761"], "commitHash": "ee68e7fdec98117d2d98bf34823439ca9fd7c4da", "commitSpoonAstDiffStats": [{"spoonFilePath": "WebSocketPolicy.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.api.WebSocketPolicy.clonePolicy(org.eclipse.jetty.websocket.api.WebSocketBehavior)", "DEL": 8, "INS": 1, "UPD": 0, "MOV": 8, "TOT": 17}, {"spoonMethodName": "org.eclipse.jetty.websocket.api.WebSocketPolicy.Delegated", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.api.WebSocketPolicy.delegateAs(org.eclipse.jetty.websocket.api.WebSocketBehavior)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.api.WebSocketPolicy.toString()", "DEL": 8, "INS": 9, "UPD": 1, "MOV": 0, "TOT": 18}, {"spoonMethodName": "org.eclipse.jetty.websocket.api.WebSocketPolicy.clonePolicy()", "DEL": 1, "INS": 8, "UPD": 0, "MOV": 2, "TOT": 11}]}, {"spoonFilePath": "LargeAnnotatedTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.LargeAnnotatedTest.startServer()", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.LargeAnnotatedTest", "DEL": 2, "INS": 1, "UPD": 3, "MOV": 0, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.LargeAnnotatedTest.stopServer()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.LargeAnnotatedTest.testEcho()", "DEL": 5, "INS": 3, "UPD": 4, "MOV": 17, "TOT": 29}]}, {"spoonFilePath": "Parser.java", "spoonMethods": []}, {"spoonFilePath": "WebSocketClient.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketClient", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "WSServer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.WSServer.copyWebInf(java.lang.String)", "DEL": 3, "INS": 5, "UPD": 3, "MOV": 5, "TOT": 16}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.WSServer", "DEL": 2, "INS": 3, "UPD": 4, "MOV": 2, "TOT": 11}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.WSServer.copyClass(java.lang.Class)", "DEL": 1, "INS": 4, "UPD": 3, "MOV": 5, "TOT": 13}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.WSServer.createWebAppContext()", "DEL": 3, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.WSServer.getWebAppDir()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "ClientContainer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.ClientContainer.getPolicy()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.ClientContainer.setDefaultMaxBinaryMessageBufferSize(int)", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.ClientContainer.setDefaultMaxTextMessageBufferSize(int)", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}]}, {"spoonFilePath": "LargeClientContainerInitAsServerListener.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.LargeClientContainerInitAsServerListener", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "JettyEchoSocket.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.JettyEchoSocket.onWebSocketClose(int,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "LargeClientContainerServlet.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.LargeClientContainerServlet", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "LargeOnOpenSessionConfiguredTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.LargeOnOpenSessionConfiguredTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "JsrSession.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.JsrSession.setMaxTextMessageBufferSize(int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.JsrSession.setMaxBinaryMessageBufferSize(int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "LargeMessageTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.LargeMessageTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "LargeServerContainerAsClientContainerServlet.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.LargeServerContainerAsClientContainerServlet", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "LargeEchoAnnotatedSocket.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.samples.echo.LargeEchoAnnotatedSocket", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "LargeNestedClientContainerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.LargeNestedClientContainerTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "ee68e7fdec98117d2d98bf34823439ca9fd7c4da tags/jetty-9.4.12.RC2~9", "commitUser": "sbordet", "authoredDateTime": "2018-08-08 13:02:09", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 11, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/JettyEchoSocket.java", "insertions": 11, "deletions": 0}, {"lines": 8, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/JsrSession.java", "insertions": 8, "deletions": 0}, {"lines": 39, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/LargeClientContainerInitAsServerListener.java", "insertions": 39, "deletions": 0}, {"lines": 136, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/LargeClientContainerServlet.java", "insertions": 136, "deletions": 0}, {"lines": 99, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/LargeOnOpenSessionConfiguredTest.java", "insertions": 99, "deletions": 0}, {"lines": 1, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/Parser.java", "insertions": 0, "deletions": 1}, {"lines": 22, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/resources/large-client-container-servlet-init-use-server-web.xml", "insertions": 22, "deletions": 0}, {"lines": 46, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/samples/echo/LargeEchoAnnotatedSocket.java", "insertions": 46, "deletions": 0}, {"lines": 134, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/LargeServerContainerAsClientContainerServlet.java", "insertions": 134, "deletions": 0}, {"lines": 46, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/WSServer.java", "insertions": 24, "deletions": 22}, {"lines": 18, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/resources/large-client-container-servlet-web.xml", "insertions": 18, "deletions": 0}, {"lines": 105, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/LargeMessageTest.java", "insertions": 105, "deletions": 0}, {"lines": 87, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/LargeAnnotatedTest.java", "insertions": 45, "deletions": 42}, {"lines": 12, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/ClientContainer.java", "insertions": 7, "deletions": 5}, {"lines": 18, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/resources/large-server-as-client-container-servlet-web.xml", "insertions": 18, "deletions": 0}, {"lines": 165, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/LargeNestedClientContainerTest.java", "insertions": 165, "deletions": 0}, {"lines": 194, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/WebSocketPolicy.java", "insertions": 175, "deletions": 19}, {"lines": 2, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/WebSocketClient.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2018-08-08 13:02:09", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "f1072e570137bf50f96312808a72f3982de1c47c", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "8430dce7c831e3badbc0837a3061e27fb5c8229f", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #2767 - WebSocket Policy on JSR356 ClientContainer not represented correctly\n\n+ Added Client unit tests for large messages\n+ Re-enabled Server unit tests for large messages\n+ Added more Server unit tests for large messages\n+ In case of JSR356 Server with policy (and Behavior of SERVER)\n  is controlling javax.websocker.server.ServerContainer\n  and a user chooses to use that ServerContainer to\n  connect to a remote websocket endpoint (using ServerContainer\n  as a client), then the policy is delegated down to the\n  Client Container with a different behavior (only).\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["8eb11a56c89dfdaae570d2e1edd9fcfbe240b979"], "commitHash": "9a4b7807810d884a56a8022f48021a9def75e761", "commitSpoonAstDiffStats": [{"spoonFilePath": "WebSocketPolicy.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.api.WebSocketPolicy.clonePolicy(org.eclipse.jetty.websocket.api.WebSocketBehavior)", "DEL": 8, "INS": 1, "UPD": 0, "MOV": 8, "TOT": 17}, {"spoonMethodName": "org.eclipse.jetty.websocket.api.WebSocketPolicy.Delegated", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.api.WebSocketPolicy.delegateAs(org.eclipse.jetty.websocket.api.WebSocketBehavior)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.api.WebSocketPolicy.toString()", "DEL": 8, "INS": 9, "UPD": 1, "MOV": 0, "TOT": 18}, {"spoonMethodName": "org.eclipse.jetty.websocket.api.WebSocketPolicy.clonePolicy()", "DEL": 1, "INS": 8, "UPD": 0, "MOV": 2, "TOT": 11}]}, {"spoonFilePath": "LargeAnnotatedTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.LargeAnnotatedTest.startServer()", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.LargeAnnotatedTest", "DEL": 2, "INS": 1, "UPD": 3, "MOV": 0, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.LargeAnnotatedTest.stopServer()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.LargeAnnotatedTest.testEcho()", "DEL": 5, "INS": 3, "UPD": 4, "MOV": 17, "TOT": 29}]}, {"spoonFilePath": "Parser.java", "spoonMethods": []}, {"spoonFilePath": "WebSocketClient.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketClient", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "WSServer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.WSServer.copyWebInf(java.lang.String)", "DEL": 3, "INS": 5, "UPD": 3, "MOV": 5, "TOT": 16}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.WSServer", "DEL": 2, "INS": 3, "UPD": 4, "MOV": 2, "TOT": 11}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.WSServer.copyClass(java.lang.Class)", "DEL": 1, "INS": 4, "UPD": 3, "MOV": 5, "TOT": 13}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.WSServer.createWebAppContext()", "DEL": 3, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.WSServer.getWebAppDir()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "ClientContainer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.ClientContainer.getPolicy()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.ClientContainer.setDefaultMaxBinaryMessageBufferSize(int)", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.ClientContainer.setDefaultMaxTextMessageBufferSize(int)", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}]}, {"spoonFilePath": "LargeClientContainerInitAsServerListener.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.LargeClientContainerInitAsServerListener", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "JettyEchoSocket.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.JettyEchoSocket.onWebSocketClose(int,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "LargeClientContainerServlet.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.LargeClientContainerServlet", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "LargeOnOpenSessionConfiguredTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.LargeOnOpenSessionConfiguredTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "JsrSession.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.JsrSession.setMaxTextMessageBufferSize(int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.JsrSession.setMaxBinaryMessageBufferSize(int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "LargeMessageTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.LargeMessageTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "LargeServerContainerAsClientContainerServlet.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.LargeServerContainerAsClientContainerServlet", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "LargeEchoAnnotatedSocket.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.samples.echo.LargeEchoAnnotatedSocket", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "LargeNestedClientContainerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.LargeNestedClientContainerTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "9a4b7807810d884a56a8022f48021a9def75e761 tags/jetty-9.4.12.RC2~9^2", "commitUser": "joakime", "authoredDateTime": "2018-08-02 11:38:09", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 11, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/JettyEchoSocket.java", "insertions": 11, "deletions": 0}, {"lines": 8, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/JsrSession.java", "insertions": 8, "deletions": 0}, {"lines": 39, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/LargeClientContainerInitAsServerListener.java", "insertions": 39, "deletions": 0}, {"lines": 136, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/LargeClientContainerServlet.java", "insertions": 136, "deletions": 0}, {"lines": 99, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/LargeOnOpenSessionConfiguredTest.java", "insertions": 99, "deletions": 0}, {"lines": 1, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/Parser.java", "insertions": 0, "deletions": 1}, {"lines": 22, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/resources/large-client-container-servlet-init-use-server-web.xml", "insertions": 22, "deletions": 0}, {"lines": 46, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/samples/echo/LargeEchoAnnotatedSocket.java", "insertions": 46, "deletions": 0}, {"lines": 134, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/LargeServerContainerAsClientContainerServlet.java", "insertions": 134, "deletions": 0}, {"lines": 46, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/WSServer.java", "insertions": 24, "deletions": 22}, {"lines": 18, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/resources/large-client-container-servlet-web.xml", "insertions": 18, "deletions": 0}, {"lines": 105, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/LargeMessageTest.java", "insertions": 105, "deletions": 0}, {"lines": 87, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/LargeAnnotatedTest.java", "insertions": 45, "deletions": 42}, {"lines": 12, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/ClientContainer.java", "insertions": 7, "deletions": 5}, {"lines": 18, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/resources/large-server-as-client-container-servlet-web.xml", "insertions": 18, "deletions": 0}, {"lines": 165, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/LargeNestedClientContainerTest.java", "insertions": 165, "deletions": 0}, {"lines": 194, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/WebSocketPolicy.java", "insertions": 175, "deletions": 19}, {"lines": 2, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/WebSocketClient.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2018-08-06 15:21:22", "spoonStatsSkippedReason": ""}], "title": "WebSocket Policy on JSR356 ClientContainer not represented correctly", "spoonStatsSummary": {"spoonMethodsChanged": 21, "DEL": 26.0, "INS": 41.0, "UPD": 13.0, "MOV": 26.0, "TOT": 106.0, "spoonFilesChanged": 10}, "gitStatsSummary": {"lines": 217.0, "insertions": 191.0, "gitFilesChange": 5, "deletions": 26.0}, "closed": "2018-08-15 19:55:00", "statsSkippedReason": "", "body": "In scenario:\r\n\r\n1. JSR356 Client Container instantiated.\r\n2. Client Container setMaxTextMessageBufferSize to 100k\r\n3. Client Container connect (new ClientSocketEndpoint)\r\n4. Server sends message that is larger than default size.\r\n5. Client parser rejects due to bad max text message buffer size (still on default, not represented by change in line 2)\r\n", "changesInPackagesGIT": ["jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client", "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api", "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356", "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common"], "changesInPackagesSPOON": ["org.eclipse.jetty.websocket.jsr356.server.LargeClientContainerServlet", "org.eclipse.jetty.websocket.jsr356.server.samples.echo.LargeEchoAnnotatedSocket", "org.eclipse.jetty.websocket.api.WebSocketPolicy.clonePolicy()", "org.eclipse.jetty.websocket.jsr356.ClientContainer.setDefaultMaxBinaryMessageBufferSize(int)", "org.eclipse.jetty.websocket.jsr356.JettyEchoSocket.onWebSocketClose(int,java.lang.String)", "org.eclipse.jetty.websocket.jsr356.JsrSession.setMaxTextMessageBufferSize(int)", "org.eclipse.jetty.websocket.jsr356.server.WSServer.getWebAppDir()", "org.eclipse.jetty.websocket.api.WebSocketPolicy.Delegated", "org.eclipse.jetty.websocket.jsr356.server.WSServer.createWebAppContext()", "org.eclipse.jetty.websocket.api.WebSocketPolicy.clonePolicy(org.eclipse.jetty.websocket.api.WebSocketBehavior)", "org.eclipse.jetty.websocket.jsr356.server.LargeClientContainerInitAsServerListener", "org.eclipse.jetty.websocket.jsr356.server.LargeServerContainerAsClientContainerServlet", "org.eclipse.jetty.websocket.jsr356.ClientContainer.getPolicy()", "org.eclipse.jetty.websocket.jsr356.server.WSServer.copyClass(java.lang.Class)", "org.eclipse.jetty.websocket.jsr356.JsrSession.setMaxBinaryMessageBufferSize(int)", "org.eclipse.jetty.websocket.jsr356.ClientContainer.setDefaultMaxTextMessageBufferSize(int)", "org.eclipse.jetty.websocket.jsr356.server.WSServer.copyWebInf(java.lang.String)", "org.eclipse.jetty.websocket.jsr356.server.WSServer", "org.eclipse.jetty.websocket.client.WebSocketClient", "org.eclipse.jetty.websocket.api.WebSocketPolicy.delegateAs(org.eclipse.jetty.websocket.api.WebSocketBehavior)", "org.eclipse.jetty.websocket.api.WebSocketPolicy.toString()"], "ttf": 13.000277777777777, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/2767"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug", "Enhancement"], "user": "jscheible-transporeon", "filteredCommits": [], "commits": {"23bf2504fe44cccf733aafe78505df2e114d2fc7": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "c826d7850d1a871a68e848d3c63ab9850776a6c2": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2018-07-16 07:12:58", "commitsDetails": [{"commitMessage": "Issue #2720 Ensure standard jetty properties available in jetty-env.xml (#2806)\n\nSigned-off-by: Jan Bartel <janb@webtide.com>", "commitParents": ["9fcb5ef9fbfb7e0bf82dc3c422034d060abfc06f"], "commitHash": "23bf2504fe44cccf733aafe78505df2e114d2fc7", "commitSpoonAstDiffStats": [{"spoonFilePath": "EnvConfiguration.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.plus.webapp.EnvConfiguration.configure(org.eclipse.jetty.webapp.WebAppContext)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "JNDITest.java", "spoonMethods": [{"spoonMethodName": "com.acme.JNDITest.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "com.acme.JNDITest", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "com.acme.JNDITest.init(javax.servlet.ServletConfig)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}]}], "nameRev": "23bf2504fe44cccf733aafe78505df2e114d2fc7 tags/jetty-9.4.12.v20180830~35", "commitUser": "janbartel", "authoredDateTime": "2018-08-16 08:29:12", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 1, "filePath": "jetty-plus/src/main/java/org/eclipse/jetty/plus/webapp/EnvConfiguration.java", "insertions": 1, "deletions": 0}, {"lines": 6, "filePath": "tests/test-webapps/test-jndi-webapp/src/main/java/com/acme/JNDITest.java", "insertions": 6, "deletions": 0}, {"lines": 13, "filePath": "tests/test-webapps/test-jndi-webapp/src/main/webapp/WEB-INF/jetty-env.xml", "insertions": 12, "deletions": 1}], "commitDateTime": "2018-08-16 08:29:12", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "c826d7850d1a871a68e848d3c63ab9850776a6c2", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "<property> config tag can't access property values in WebAppContext", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2019-11-20 20:14:01", "statsSkippedReason": "", "body": "After passing a key-value pair at startup time (`java -jar start.jar foo=bar --list-config`) referencing the property in `jetty.xml` with a `<reference>` tag works (instance of `org.eclipse.jetty.server.Server`) but neither in `web-app-context.xml` nor in `jetty-env.xml` of the web application (both are instances of `org.eclipse.jetty.webapp.WebAppContext`).\r\n\r\nI tested it with JNDI `EnvEntry` tags (this one is from `jetty.xml`):\r\n```xml\r\n<New class=\"org.eclipse.jetty.plus.jndi.EnvEntry\">\r\n    <Arg>env/foo</Arg> <!-- resp. env/context/foo and env/jetty-env/foo for web-app-context.xml and jetty-env.xml -->\r\n    <Arg><Property name=\"foo\" default=\"foo-not-found\"/></Arg>\r\n</New>\r\n```\r\n\r\nOnly for `env/foo` the value is `foo` whilst for `env/context/foo` and `env/jetty-env/foo` it is `foo-not-found`.", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 492.0002777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/2720"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 3, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 2}, "labels": ["Bug"], "user": "mattiasbe", "filteredCommits": ["4b461b75561a151e5b987b6bb2f9580406783461"], "commits": {"9a06acc84653786590dea4c3a5a42f0571ccc58b": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "c89a2d13119a9821143f1d9d7b27d7184c9df0b8": {"commitUser": "olamy", "commitGHEventType": "referenced"}, "55d0c8cbdb58499fee81e5d17b06321943de8b2b": {"commitUser": "olamy", "commitGHEventType": "referenced"}, "b4ab8a07c12cd8c3bd5f242b02ab37c61ab06676": {"commitUser": "olamy", "commitGHEventType": "referenced"}, "4b461b75561a151e5b987b6bb2f9580406783461": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "7a5620a2d5734e4cc6e16d50b27b81d49001949f": {"commitUser": "olamy", "commitGHEventType": "referenced"}}, "created": "2018-07-15 21:45:19", "commitsDetails": [{"commitMessage": "Merge pull request #2748 from olamy/bugfix/2718_NPE_HttpServerProvider\n\nIssue #2718 - prevent NPE and IAE when changing Executor", "commitParents": ["2c7fc68ff13ed2076e1937064b142744139e569b", "492361a6161893f9964c2c473a24dd07d9bda946"], "commitHash": "9a06acc84653786590dea4c3a5a42f0571ccc58b", "commitSpoonAstDiffStats": [{"spoonFilePath": "JettyHttpServer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.spi.JettyHttpServer.bind(java.net.InetSocketAddress,int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.http.spi.JettyHttpServer.setExecutor(java.util.concurrent.Executor)", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 4, "TOT": 7}]}, {"spoonFilePath": "TestEndpointMultiplePublishProblem.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.spi.TestEndpointMultiplePublishProblem", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "TestSPIServer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.spi.TestSPIServer.testBoundHttpServer().3.handle(com.sun.net.httpserver.HttpExchange)", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 10, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.http.spi.TestSPIServer.testBoundHttpServer()", "DEL": 1, "INS": 1, "UPD": 1, "MOV": 10, "TOT": 13}, {"spoonMethodName": "org.eclipse.jetty.http.spi.TestSPIServer.testBoundHttpServer().4", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.spi.TestSPIServer.testUnboundHttpServer().1.handle(com.sun.net.httpserver.HttpExchange)", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 10, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.http.spi.TestSPIServer.testUnboundHttpServer()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 10, "TOT": 12}]}], "nameRev": "9a06acc84653786590dea4c3a5a42f0571ccc58b tags/jetty-9.4.12.v20180830~16", "commitUser": "joakime", "authoredDateTime": "2018-08-22 11:48:25", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 18, "filePath": "jetty-http-spi/src/test/java/org/eclipse/jetty/http/spi/TestSPIServer.java", "insertions": 2, "deletions": 16}, {"lines": 29, "filePath": "jetty-http-spi/src/main/java/org/eclipse/jetty/http/spi/JettyHttpServer.java", "insertions": 22, "deletions": 7}, {"lines": 35, "filePath": "jetty-http-spi/pom.xml", "insertions": 35, "deletions": 0}, {"lines": 85, "filePath": "jetty-http-spi/src/test/java/org/eclipse/jetty/http/spi/TestEndpointMultiplePublishProblem.java", "insertions": 85, "deletions": 0}], "commitDateTime": "2018-08-22 11:48:25", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "c89a2d13119a9821143f1d9d7b27d7184c9df0b8", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "olamy", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "55d0c8cbdb58499fee81e5d17b06321943de8b2b", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "olamy", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "#2718 take care of starting new created context (#3145)\n\nSigned-off-by: olivier lamy <oliver.lamy@gmail.com>", "commitParents": ["132aef44209ef2803b65f08d11874f18a373908b"], "commitHash": "b4ab8a07c12cd8c3bd5f242b02ab37c61ab06676", "commitSpoonAstDiffStats": [{"spoonFilePath": "JettyHttpServer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.spi.JettyHttpServer.createContext(java.lang.String,com.sun.net.httpserver.HttpHandler)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "JettyHttpServerProvider.java", "spoonMethods": []}, {"spoonFilePath": "TestEndpointMultiplePublishProblem.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.spi.TestEndpointMultiplePublishProblem.Ws", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.spi.TestEndpointMultiplePublishProblem.mainJetty()", "DEL": 1, "INS": 22, "UPD": 3, "MOV": 2, "TOT": 28}, {"spoonMethodName": "org.eclipse.jetty.http.spi.TestEndpointMultiplePublishProblem", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.spi.TestEndpointMultiplePublishProblem.assertWsdl(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.spi.TestEndpointMultiplePublishProblem.Ws.hello()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.spi.TestEndpointMultiplePublishProblem.WsHello", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.http.spi.TestEndpointMultiplePublishProblem.HelloMessengerService", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "b4ab8a07c12cd8c3bd5f242b02ab37c61ab06676 tags/jetty-9.4.15.v20190215~66", "commitUser": "olamy", "authoredDateTime": "2018-11-30 17:55:51", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 11, "filePath": "jetty-http-spi/src/main/java/org/eclipse/jetty/http/spi/JettyHttpServerProvider.java", "insertions": 5, "deletions": 6}, {"lines": 12, "filePath": "jetty-http-spi/src/main/java/org/eclipse/jetty/http/spi/JettyHttpServer.java", "insertions": 12, "deletions": 0}, {"lines": 120, "filePath": "jetty-http-spi/src/test/java/org/eclipse/jetty/http/spi/TestEndpointMultiplePublishProblem.java", "insertions": 100, "deletions": 20}], "commitDateTime": "2018-11-30 17:55:51", "spoonStatsSkippedReason": ""}, {"commitMessage": "DelegatingThreadPool as TryExecutor\n\nNoticed while looking at #2718, it is more efficient if tryExecute semantics are available.\n\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\n", "commitParents": ["aebe436e0006764cfe6f3d8da1752341b905643b"], "commitHash": "4b461b75561a151e5b987b6bb2f9580406783461", "commitSpoonAstDiffStats": [{"spoonFilePath": "DelegatingThreadPool.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.spi.DelegatingThreadPool.setExecutor(java.util.concurrent.Executor)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.spi.DelegatingThreadPool.tryExecute(java.lang.Runnable)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.spi.DelegatingThreadPool", "DEL": 1, "INS": 2, "UPD": 2, "MOV": 3, "TOT": 8}]}], "nameRev": "4b461b75561a151e5b987b6bb2f9580406783461 tags/jetty-9.4.13.v20181111~86", "commitUser": "gregw", "authoredDateTime": "2018-09-12 16:42:05", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 19, "filePath": "jetty-http-spi/src/main/java/org/eclipse/jetty/http/spi/DelegatingThreadPool.java", "insertions": 13, "deletions": 6}], "commitDateTime": "2018-09-12 16:42:05", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "7a5620a2d5734e4cc6e16d50b27b81d49001949f", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "olamy", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "NPE using more than one Endpoint.publish", "spoonStatsSummary": {"spoonMethodsChanged": 3, "DEL": 1.0, "INS": 4.0, "UPD": 2.0, "MOV": 3.0, "TOT": 10.0, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 19.0, "insertions": 13.0, "gitFilesChange": 1, "deletions": 6.0}, "closed": "2018-12-10 03:10:50", "statsSkippedReason": "", "body": "Using the http-spi with jetty works fine on older java versions such as jdk 8_u74 \r\nUsing a JDK later than 8_u162 (or maybe 151+?) (the latest java 8 u172 fails for example).\r\nWorks if only calling ` Endpoint.publish(...)` once on all versions.\r\n\r\nBase example without setting Jetty as provider, works fine. If setting jetty as provider it fails if the second publish is there.\r\n\r\n```\r\n Endpoint.publish(String.format(\"http://%s:%d/hello\", host, port), new Ws());\r\n Endpoint.publish(String.format(\"http://%s:%d/hello2\", host, port), new Ws());\r\n System.out.printf(\"Started, check: http://localhost:%d/hello?wsdl%n\", port);\r\n```\r\n\r\nFind attached file (scratch.zip) with a simple test case (also with a working example without jetty as well). Works fine on older java as per above, fails on newer with:\r\n\r\n```\r\nException in thread \"main\" com.sun.xml.internal.ws.server.ServerRtException: Server Runtime Error: java.lang.NullPointerException\r\n\tat com.sun.xml.internal.ws.transport.http.server.ServerMgr.createContext(ServerMgr.java:130)\r\n\tat com.sun.xml.internal.ws.transport.http.server.HttpEndpoint.publish(HttpEndpoint.java:64)\r\n\tat com.sun.xml.internal.ws.transport.http.server.EndpointImpl.publish(EndpointImpl.java:232)\r\n\tat com.sun.xml.internal.ws.spi.ProviderImpl.createAndPublishEndpoint(ProviderImpl.java:126)\r\n\tat javax.xml.ws.Endpoint.publish(Endpoint.java:240)\r\n\tat scratch.EndpointMultiplePublishProblem.mainJetty(EndpointMultiplePublishProblem.java:45)\r\n\tat scratch.EndpointMultiplePublishProblem.main(EndpointMultiplePublishProblem.java:19)\r\nCaused by: java.lang.NullPointerException\r\n\tat com.sun.xml.internal.ws.transport.http.server.ServerMgr.createContext(ServerMgr.java:88)\r\n\t... 6 more\r\n```\r\n\r\n**Attachment:**\r\n[scratch.zip](https://github.com/eclipse/jetty.project/files/2196130/scratch.zip)\r\n\r\n**Test case inline as well:**\r\n\r\n```\r\npackage scratch;\r\n\r\nimport javax.jws.WebService;\r\nimport javax.xml.ws.Endpoint;\r\n\r\nimport org.eclipse.jetty.http.spi.DelegatingThreadPool;\r\nimport org.eclipse.jetty.http.spi.JettyHttpServerProvider;\r\nimport org.eclipse.jetty.server.Server;\r\nimport org.eclipse.jetty.server.ServerConnector;\r\nimport org.eclipse.jetty.server.handler.ContextHandlerCollection;\r\nimport org.eclipse.jetty.util.thread.QueuedThreadPool;\r\n\r\npublic class EndpointMultiplePublishProblem {\r\n    static int    port = 8081;\r\n    static String host = \"0.0.0.0\";\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        // mainDefaultImpl(args); //works\r\n        mainJetty(args); // fails on 8u172 (u162+ or so)\r\n    }\r\n\r\n    public static void mainDefaultImpl(String[] args) throws Exception {\r\n        Endpoint.publish(String.format(\"http://%s:%d/hello\", host, port), new Ws());\r\n        Endpoint.publish(String.format(\"http://%s:%d/hello2\", host, port), new Ws());\r\n        System.out.printf(\"Started, check: http://localhost:%d/hello?wsdl%n\", port);\r\n    }\r\n\r\n    public static void mainJetty(String[] args) throws Exception {\r\n        System.setProperty(\"com.sun.net.httpserver.HttpServerProvider\", JettyHttpServerProvider.class.getName());\r\n\r\n        // Can't just do new Server(8081); built-in http server expects a DelegatingThreadPool ?\r\n        // So instead of a one-liner all these are needed:\r\n        Server jettyWebServer = new Server(new DelegatingThreadPool(new QueuedThreadPool()));\r\n        ServerConnector connector = new ServerConnector(jettyWebServer);\r\n        connector.setHost(host);\r\n        connector.setPort(port);\r\n        connector.setReuseAddress(true);\r\n        jettyWebServer.addConnector(connector);\r\n        jettyWebServer.setHandler(new ContextHandlerCollection());\r\n\r\n        JettyHttpServerProvider.setServer(jettyWebServer);\r\n\r\n        Endpoint.publish(String.format(\"http://%s:%d/hello\", host, port), new Ws());\r\n        // Comment out the below line for success in later java such as java8_u172, works before u151 or so\r\n        Endpoint.publish(String.format(\"http://%s:%d/hello2\", host, port), new Ws());\r\n\r\n        jettyWebServer.start();\r\n\r\n        System.out.printf(\"Started, check: http://localhost:%d/hello?wsdl%n\", port);\r\n\r\n    }\r\n\r\n    @WebService\r\n    public static class Ws {\r\n        public String hello() {\r\n            return \"Hello\";\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\n", "changesInPackagesGIT": ["jetty-http-spi/src/main/java/org/eclipse/jetty/http/spi"], "changesInPackagesSPOON": ["org.eclipse.jetty.http.spi.DelegatingThreadPool.setExecutor(java.util.concurrent.Executor)", "org.eclipse.jetty.http.spi.DelegatingThreadPool.tryExecute(java.lang.Runnable)", "org.eclipse.jetty.http.spi.DelegatingThreadPool"], "ttf": 147.00027777777777, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/2718"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["0a7ad593e43bef7aaeb0ee71e6c9f2ea7d0e7066"], "commits": {"0a7ad593e43bef7aaeb0ee71e6c9f2ea7d0e7066": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2018-06-27 14:18:20", "commitsDetails": [{"commitMessage": "Issue #2684 - assumed MimeTypes can now be accessed/changed.\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["33c497a8831904f4fc8d46d02cc78a3cb8f7f6df"], "commitHash": "0a7ad593e43bef7aaeb0ee71e6c9f2ea7d0e7066", "commitSpoonAstDiffStats": [{"spoonFilePath": "MimeTypes.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.MimeTypes.getAssumedEncodings()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "0a7ad593e43bef7aaeb0ee71e6c9f2ea7d0e7066 tags/jetty-9.4.12.RC0~17", "commitUser": "joakime", "authoredDateTime": "2018-06-27 09:52:01", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/MimeTypes.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2018-06-27 09:52:01", "spoonStatsSkippedReason": ""}], "title": "MimeTypes.getAssumedEncodings() does not work", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 2, "insertions": 1, "gitFilesChange": 1, "deletions": 1}, "closed": "2018-06-27 14:52:50", "statsSkippedReason": "", "body": "Looks like its a copy/paste error on line 519 ....\r\n\r\nhttps://github.com/eclipse/jetty.project/blob/6b335877d9cc8a6be0c61c5d6d2a559ab9035323/jetty-http/src/main/java/org/eclipse/jetty/http/MimeTypes.java#L511-L520\r\n\r\nThis prevents programmatic control of the MimeTypes defaults for assumed charsets.", "changesInPackagesGIT": ["jetty-http/src/main/java/org/eclipse/jetty/http"], "changesInPackagesSPOON": ["org.eclipse.jetty.http.MimeTypes.getAssumedEncodings()"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/2684"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "konikb", "filteredCommits": ["33c497a8831904f4fc8d46d02cc78a3cb8f7f6df"], "commits": {"33c497a8831904f4fc8d46d02cc78a3cb8f7f6df": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2018-06-27 09:26:40", "commitsDetails": [{"commitMessage": "Issue #2683 - FrameFlusher.toString() isn't thread safe\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["6b335877d9cc8a6be0c61c5d6d2a559ab9035323"], "commitHash": "33c497a8831904f4fc8d46d02cc78a3cb8f7f6df", "commitSpoonAstDiffStats": [{"spoonFilePath": "FrameFlusher.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.io.FrameFlusher.toString()", "DEL": 1, "INS": 4, "UPD": 0, "MOV": 1, "TOT": 6}]}], "nameRev": "33c497a8831904f4fc8d46d02cc78a3cb8f7f6df tags/jetty-9.4.12.RC0~18", "commitUser": "joakime", "authoredDateTime": "2018-06-27 07:06:38", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 6, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/io/FrameFlusher.java", "insertions": 5, "deletions": 1}], "commitDateTime": "2018-06-27 07:06:38", "spoonStatsSkippedReason": ""}], "title": "NPE in FrameFlusher toString()", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 1, "INS": 4, "UPD": 0, "MOV": 1, "TOT": 6, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 6, "insertions": 5, "gitFilesChange": 1, "deletions": 1}, "closed": "2018-06-27 14:53:13", "statsSkippedReason": "", "body": "Hello,\r\n\r\nafter reading text on a websocket, we got a strange exception in AbstractWebSocketConnection.toConnectionString. \r\nThe client sends a message to our server. After reading the message, the server wants to log the org.eclipse.jetty.websocket.api.Session by making a toString(). It gets this exception and our server closes the websocket.\r\n\r\nWhere may this exception come from ?\r\n\r\nThanks for your help\r\n\r\nBruno Konik\r\n\r\n```\r\n2018-06-27 09:52:57,272 [qtp1533734842-144] DEBUG TelServicesWebSocketRemoteEndpoint - client cannot be handled properly, closing web socket WebSocketSession[websocket=JettyListenerEventDriver[com.unigone.telserver.gateway.TelServicesWebSocketRemoteEndpoint],behavior=SERVER,connection=WebSocketServerConnection@e004d6f1[ios=IOState@4b7511dd[OPEN,in,out],f=Flusher@1884f04c[queueSize=0,aggregateSize=0,terminated=null],g=Generator[SERVER,validating],p=Parser@1c43fe4f[ExtensionStack,s=START,c=0,len=78,f=TEXT[len=0,fin=true,rsv=...,masked=true]]]<-SocketChannelEndPoint@756aaa73{/127.0.0.1:65324<->/127.0.0.1:8092,OPEN,fill=-,flush=-,to=0/70000}{io=0/0,kio=0,kro=1}->WebSocketServerConnection@e004d6f1[ios=IOState@4b7511dd[OPEN,in,out],f=Flusher@1884f04c[queueSize=0,aggregateSize=0,terminated=null],g=Generator[SERVER,validating],p=Parser@1c43fe4f[ExtensionStack,s=START,c=0,len=78,f=TEXT[len=0,fin=true,rsv=...,masked=true]]],remote=WebSocketRemoteEndpoint@6078cf84[batching=true],incoming=JettyListenerEventDriver[com.unigone.telserver.gateway.TelServicesWebSocketRemoteEndpoint],outgoing=ExtensionStack[queueSize=0,extensions=[],incoming=org.eclipse.jetty.websocket.common.WebSocketSession,outgoing=org.eclipse.jetty.websocket.server.WebSocketServerConnection]]\r\njava.lang.NullPointerException\r\n\tat org.eclipse.jetty.websocket.common.io.FrameFlusher.toString(FrameFlusher.java:340)\r\n\tat java.util.Formatter$FormatSpecifier.printString(Formatter.java:2886)\r\n\tat java.util.Formatter$FormatSpecifier.print(Formatter.java:2763)\r\n\tat java.util.Formatter.format(Formatter.java:2520)\r\n\tat java.util.Formatter.format(Formatter.java:2455)\r\n\tat java.lang.String.format(String.java:2940)\r\n\tat org.eclipse.jetty.websocket.common.io.AbstractWebSocketConnection.toConnectionString(AbstractWebSocketConnection.java:649)\r\n\tat org.eclipse.jetty.io.AbstractEndPoint.toConnectionString(AbstractEndPoint.java:477)\r\n\tat org.eclipse.jetty.io.AbstractEndPoint.toString(AbstractEndPoint.java:446)\r\n\tat java.util.Formatter$FormatSpecifier.printString(Formatter.java:2886)\r\n\tat java.util.Formatter$FormatSpecifier.print(Formatter.java:2763)\r\n\tat java.util.Formatter.format(Formatter.java:2520)\r\n\tat java.util.Formatter.format(Formatter.java:2455)\r\n\tat java.lang.String.format(String.java:2940)\r\n\tat org.eclipse.jetty.io.AbstractConnection.toString(AbstractConnection.java:266)\r\n\tat java.lang.String.valueOf(String.java:2994)\r\n\tat java.lang.StringBuilder.append(StringBuilder.java:131)\r\n\tat org.eclipse.jetty.websocket.common.WebSocketSession.toString(WebSocketSession.java:728)\r\n\tat com.unigone.telserver.gateway.TelServicesWebSocketRemoteEndpoint.toString(TelServicesWebSocketRemoteEndpoint.java:76)\r\n\tat com.unigone.telserver.gateway.TelServicesGateway.dropCallService(TelServicesGateway.java:1507)\r\n\tat com.unigone.telserver.gateway.TelServicesGateway.handleTelServiceRequest(TelServicesGateway.java:394)\r\n\tat com.unigone.telserver.gateway.TelServicesGateway.handleTelServiceRequest(TelServicesGateway.java:337)\r\n\tat com.unigone.telserver.gateway.TelServicesWebSocketRemoteEndpoint.onWebSocketText(TelServicesWebSocketRemoteEndpoint.java:178)\r\n\tat org.eclipse.jetty.websocket.common.events.JettyListenerEventDriver.onTextMessage(JettyListenerEventDriver.java:189)\r\n\tat org.eclipse.jetty.websocket.common.message.SimpleTextMessage.messageComplete(SimpleTextMessage.java:69)\r\n\tat org.eclipse.jetty.websocket.common.events.AbstractEventDriver.appendMessage(AbstractEventDriver.java:66)\r\n\tat org.eclipse.jetty.websocket.common.events.JettyListenerEventDriver.onTextFrame(JettyListenerEventDriver.java:158)\r\n\tat org.eclipse.jetty.websocket.common.events.AbstractEventDriver.incomingFrame(AbstractEventDriver.java:162)\r\n\tat org.eclipse.jetty.websocket.common.WebSocketSession.incomingFrame(WebSocketSession.java:476)\r\n\tat org.eclipse.jetty.websocket.common.extensions.ExtensionStack.incomingFrame(ExtensionStack.java:220)\r\n\tat org.eclipse.jetty.websocket.common.Parser.notifyFrame(Parser.java:220)\r\n\tat org.eclipse.jetty.websocket.common.Parser.parse(Parser.java:245)\r\n\tat org.eclipse.jetty.websocket.common.io.AbstractWebSocketConnection.readParse(AbstractWebSocketConnection.java:560)\r\n\tat org.eclipse.jetty.websocket.common.io.AbstractWebSocketConnection.onFillable(AbstractWebSocketConnection.java:391)\r\n\tat org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:281)\r\n\tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:102)\r\n\tat org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:118)\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.java:333)\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:310)\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:168)\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:126)\r\n\tat org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:366)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:760)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:678)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n```", "changesInPackagesGIT": ["jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common"], "changesInPackagesSPOON": ["org.eclipse.jetty.websocket.common.io.FrameFlusher.toString()"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/2683"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 2, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "yaztromo99", "filteredCommits": [], "commits": {"0509dfccea02a270d2b5e63dc90fb3fb6fc786a0": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "51f9a1b5c69a8d7088af614abc0c5e93756f1328": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "a03cfdf1526681ed68d2ec5b7477833c4f59d895": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2018-06-26 11:10:19", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "0509dfccea02a270d2b5e63dc90fb3fb6fc786a0", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #2681 Hot undeploy dir deployments. (#2839)\n\n* Issue #2681 Hot undeploy dir deployments.\r\n", "commitParents": ["8b7a88608a9b39df47854ac45f838ec880474b15"], "commitHash": "51f9a1b5c69a8d7088af614abc0c5e93756f1328", "commitSpoonAstDiffStats": [{"spoonFilePath": "WebAppProvider.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.deploy.providers.WebAppProvider.fileRemoved(java.lang.String)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 3, "TOT": 5}]}], "nameRev": "51f9a1b5c69a8d7088af614abc0c5e93756f1328 tags/jetty-9.4.12.v20180830~23", "commitUser": "janbartel", "authoredDateTime": "2018-08-22 16:57:42", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 28, "filePath": "jetty-deploy/src/main/java/org/eclipse/jetty/deploy/providers/WebAppProvider.java", "insertions": 13, "deletions": 15}], "commitDateTime": "2018-08-22 16:57:42", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "a03cfdf1526681ed68d2ec5b7477833c4f59d895", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "Jetty Hot Deployment Module does not stop exploded webapps after removal from webapps directory", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2018-08-22 07:01:36", "statsSkippedReason": "", "body": "jetty-9.4.11.v20180605 running on Ubuntu Server 14.04 x64  \r\n\r\nWe are running Jetty as a service with hot deployment module enabled.\r\n\r\nWebapps are deployed by simply dropping the folder into jetty.base/webapps. This works as expected.\r\n\r\nRemoving a webapp doesn't stop it. No lines of log output are reported by jetty, the webapp simply continues to run. Previously when we were running Jetty 7, this worked as it should.\r\n\r\nHappy to provide any more information. We have tried this across two different servers, with a variety of webapps and experienced the same behaviour.\r\n\r\njetty-deploy.xml\r\n```\r\n<?xml version=\"1.0\"?>\r\n<!DOCTYPE Configure PUBLIC \"-//Jetty//Configure//EN\" \"http://www.eclipse.org/jetty/configure_9_3.dtd\">\r\n\r\n<!-- =============================================================== -->\r\n<!-- Create the deployment manager                                   -->\r\n<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->\r\n<!-- The deplyment manager handles the lifecycle of deploying web    -->\r\n<!-- applications. Apps are provided by instances of the             -->\r\n<!-- AppProvider interface.                                          -->\r\n<!-- =============================================================== -->\r\n<Configure id=\"Server\" class=\"org.eclipse.jetty.server.Server\">\r\n\r\n  <Call name=\"addBean\">\r\n    <Arg>\r\n      <New id=\"DeploymentManager\" class=\"org.eclipse.jetty.deploy.DeploymentManager\">\r\n        <Set name=\"contexts\">\r\n          <Ref refid=\"Contexts\" />\r\n        </Set>\r\n        <Call name=\"setContextAttribute\">\r\n          <Arg>org.eclipse.jetty.server.webapp.ContainerIncludeJarPattern</Arg>\r\n          <Arg>.*/[^/]*servlet-api-[^/]*\\.jar$|.*/javax.servlet.jsp.jstl-.*\\.jar$|.*/org.apache.taglibs.taglibs-standard-impl-.*\\.jar$</Arg>\r\n        </Call>\r\n\r\n        <!-- Add a customize step to the deployment lifecycle -->\r\n        <!-- uncomment and replace DebugBinding with your extended AppLifeCycle.Binding class\r\n        <Call name=\"insertLifeCycleNode\">\r\n          <Arg>deployed</Arg>\r\n          <Arg>starting</Arg>\r\n          <Arg>customise</Arg>\r\n        </Call>\r\n        <Call name=\"addLifeCycleBinding\">\r\n          <Arg>\r\n            <New class=\"org.eclipse.jetty.deploy.bindings.DebugBinding\">\r\n              <Arg>customise</Arg>\r\n            </New>\r\n          </Arg>\r\n        </Call> -->\r\n\r\n        <Call id=\"webappprovider\" name=\"addAppProvider\">\r\n          <Arg>\r\n            <New class=\"org.eclipse.jetty.deploy.providers.WebAppProvider\">\r\n              <Set name=\"monitoredDirName\">\r\n                <Property>\r\n                  <Name>jetty.deploy.monitoredPath</Name>\r\n                  <Default>\r\n                    <Property name=\"jetty.base\" default=\".\" />/<Property name=\"jetty.deploy.monitoredDir\" deprecated=\"jetty.deploy.monitoredDirName\" default=\"webapps\"/>\r\n                  </Default>\r\n                </Property>\r\n              </Set>\r\n              <Set name=\"defaultsDescriptor\">\r\n                <Property>\r\n                  <Name>jetty.deploy.defaultsDescriptorPath</Name>\r\n                  <Default>\r\n                    <Property name=\"jetty.home\" default=\".\" />/etc/webdefault.xml\r\n                  </Default>\r\n                </Property>\r\n              </Set>\r\n              <Set name=\"scanInterval\"><Property name=\"jetty.deploy.scanInterval\" default=\"1\"/></Set>\r\n              <Set name=\"extractWars\"><Property name=\"jetty.deploy.extractWars\" default=\"true\"/></Set>\r\n              <Set name=\"configurationManager\">\r\n                <New class=\"org.eclipse.jetty.deploy.PropertiesConfigurationManager\">\r\n                  <!-- file of context configuration properties\r\n                  <Set name=\"file\"><SystemProperty name=\"jetty.base\"/>/etc/some.properties</Set>\r\n                  -->\r\n                  <!-- set a context configuration property\r\n                  <Call name=\"put\"><Arg>name</Arg><Arg>value</Arg></Call>\r\n                  -->\r\n                </New>\r\n              </Set>\r\n            </New>\r\n          </Arg>\r\n        </Call>\r\n      </New>\r\n    </Arg>\r\n  </Call>\r\n</Configure>\r\n```\r\n\r\nstart.ini\r\n```\r\n#===========================================================\r\n# Jetty Startup \r\n#\r\n# Starting Jetty from this {jetty.home} is not recommended.\r\n#\r\n# A proper {jetty.base} directory should be configured, instead\r\n# of making changes to this {jetty.home} directory.\r\n#\r\n# See documentation about {jetty.base} at\r\n# http://www.eclipse.org/jetty/documentation/current/startup.html\r\n#\r\n# A demo-base directory has been provided as an example of\r\n# this sort of setup.\r\n#\r\n# $ cd demo-base\r\n# $ java -jar ../start.jar\r\n#\r\n#===========================================================\r\n\r\n# To disable the warning message, comment the following line\r\n--module=home-base-warning\r\n\r\n# --------------------------------------- \r\n# Module: ext\r\n# Adds all jar files discovered in $JETTY_HOME/lib/ext\r\n# and $JETTY_BASE/lib/ext to the servers classpath.\r\n# --------------------------------------- \r\n--module=ext\r\n\r\n\r\n# --------------------------------------- \r\n# Module: server\r\n# Enables the core Jetty server on the classpath.\r\n# --------------------------------------- \r\n--module=server\r\n\r\n### Common HTTP configuration\r\n## Scheme to use to build URIs for secure redirects\r\n# jetty.httpConfig.secureScheme=https\r\n\r\n## Port to use to build URIs for secure redirects\r\n# jetty.httpConfig.securePort=8443\r\n\r\n## Response content buffer size (in bytes)\r\n# jetty.httpConfig.outputBufferSize=32768\r\n\r\n## Max response content write length that is buffered (in bytes)\r\n# jetty.httpConfig.outputAggregationSize=8192\r\n\r\n## Max request headers size (in bytes)\r\n# jetty.httpConfig.requestHeaderSize=8192\r\n\r\n## Max response headers size (in bytes)\r\n# jetty.httpConfig.responseHeaderSize=8192\r\n\r\n## Whether to send the Server: header\r\n# jetty.httpConfig.sendServerVersion=true\r\n\r\n## Whether to send the Date: header\r\n# jetty.httpConfig.sendDateHeader=false\r\n\r\n## Max per-connection header cache size (in nodes)\r\n# jetty.httpConfig.headerCacheSize=512\r\n\r\n## Whether, for requests with content, delay dispatch until some content has arrived\r\n# jetty.httpConfig.delayDispatchUntilContent=true\r\n\r\n## Maximum number of error dispatches to prevent looping\r\n# jetty.httpConfig.maxErrorDispatches=10\r\n\r\n## Maximum time to block in total for a blocking IO operation (default -1 is to use idleTimeout on progress)\r\n# jetty.httpConfig.blockingTimeout=-1\r\n\r\n## Cookie compliance mode of: RFC2965, RFC6265\r\n# jetty.httpConfig.cookieCompliance=RFC6265\r\n\r\n### Server configuration\r\n## Whether ctrl+c on the console gracefully stops the Jetty server\r\n# jetty.server.stopAtShutdown=true\r\n\r\n## Timeout in ms to apply when stopping the server gracefully\r\n# jetty.server.stopTimeout=5000\r\n\r\n## Dump the state of the Jetty server, components, and webapps after startup\r\n# jetty.server.dumpAfterStart=false\r\n\r\n## Dump the state of the Jetty server, components, and webapps before shutdown\r\n# jetty.server.dumpBeforeStop=false\r\n\r\n# --------------------------------------- \r\n# Module: jsp\r\n# Enables JSP for all webapplications deployed on the server.\r\n# --------------------------------------- \r\n--module=jsp\r\n\r\n\r\n# --------------------------------------- \r\n# Module: resources\r\n# Adds the $JETTY_HOME/resources and/or $JETTY_BASE/resources\r\n# directory to the server classpath. Useful for configuration\r\n# property files (eg jetty-logging.properties)\r\n# --------------------------------------- \r\n--module=resources\r\n\r\n\r\n# --------------------------------------- \r\n# Module: deploy\r\n# Enables webapplication deployment from the webapps directory.\r\n# --------------------------------------- \r\n--module=deploy\r\n\r\n# Monitored directory name (relative to $jetty.base)\r\n# jetty.deploy.monitoredDir=webapps\r\n# - OR -\r\n# Monitored directory path (fully qualified)\r\n# jetty.deploy.monitoredPath=/var/www/webapps\r\n\r\n# Defaults Descriptor for all deployed webapps\r\n# jetty.deploy.defaultsDescriptorPath=${jetty.base}/etc/webdefault.xml\r\n\r\n# Monitored directory scan period (seconds)\r\n# jetty.deploy.scanInterval=1\r\n\r\n# Whether to extract *.war files\r\n# jetty.deploy.extractWars=true\r\n\r\n# --------------------------------------- \r\n# Module: jstl\r\n# Enables JSTL for all webapplications deployed on the server\r\n# --------------------------------------- \r\n--module=jstl\r\n\r\n\r\n# --------------------------------------- \r\n# Module: websocket\r\n# Enable websockets for deployed web applications\r\n# --------------------------------------- \r\n--module=websocket\r\n\r\n\r\n# --------------------------------------- \r\n# Module: http\r\n# Enables a HTTP connector on the server.\r\n# By default HTTP/1 is support, but HTTP2C can\r\n# be added to the connector with the http2c module.\r\n# --------------------------------------- \r\n--module=http\r\n\r\n### HTTP Connector Configuration\r\n\r\n## Connector host/address to bind to\r\n# jetty.http.host=0.0.0.0\r\n\r\n## Connector port to listen on\r\n jetty.http.port=80\r\n\r\n## Connector idle timeout in milliseconds\r\n# jetty.http.idleTimeout=30000\r\n\r\n## Connector socket linger time in seconds (-1 to disable)\r\n# jetty.http.soLingerTime=-1\r\n\r\n## Number of acceptors (-1 picks default based on number of cores)\r\n# jetty.http.acceptors=-1\r\n\r\n## Number of selectors (-1 picks default based on number of cores)\r\n# jetty.http.selectors=-1\r\n\r\n## ServerSocketChannel backlog (0 picks platform default)\r\n# jetty.http.acceptorQueueSize=0\r\n\r\n## Thread priority delta to give to acceptor threads\r\n# jetty.http.acceptorPriorityDelta=0\r\n\r\n## Connect Timeout in milliseconds\r\n# jetty.http.connectTimeout=15000\r\n\r\n## HTTP Compliance: RFC7230, RFC7230_LEGACY, RFC2616, RFC2616_LEGACY, LEGACY or CUSTOMn\r\n# jetty.http.compliance=RFC7230_LEGACY\r\n\r\n## Enable SSL modules for HTTPS connections - JB\r\n--module=ssl\r\njetty.sslContext.keyStorePath=blah/blah.keystore\r\njetty.sslContext.trustStorePath=blah/blah.keystore\r\njetty.sslContext.keyStorePassword=OBF:blah\r\njetty.sslContext.keyManagerPassword=OBF:blah\r\njetty.sslContext.trustStorePassword=OBF:blah\r\n\r\n--module=https\r\n\r\n# --------------------------------------- \r\n# Module: console-capture\r\n# Redirects JVMs console stderr and stdout to a log file,\r\n# including output from Jetty's default StdErrLog logging.\r\n# --------------------------------------- \r\n#--module=console-capture\r\n\r\n## Logging directory (relative to $jetty.base)\r\n# jetty.console-capture.dir=logs\r\n\r\n## Whether to append to existing file\r\n# jetty.console-capture.append=true\r\n\r\n## How many days to retain old log files\r\n# jetty.console-capture.retainDays=90\r\n\r\n## Timezone of the log timestamps\r\n# jetty.console-capture.timezone=GMT\r\n```", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 56.000277777777775, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/2681"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 4, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "bistvan", "filteredCommits": ["870c87f2f705bb5c2b2b91c5153b255ac39542f7", "2e5f106285de9817f7755ef2625d4fd742c34af7"], "commits": {"c4759ff5fdda023d1cee5f006a8f25a6b5e26498": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "ffb41edf06f0fec067977b1cbb02d72b2fc6e696": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "6b335877d9cc8a6be0c61c5d6d2a559ab9035323": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "2e5f106285de9817f7755ef2625d4fd742c34af7": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "7dc675f977e26f6df9f7b58c2135047e5f391d01": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "870c87f2f705bb5c2b2b91c5153b255ac39542f7": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "fe2d969d6e6ead88274372db7e05462e98384bd6": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2018-06-12 13:55:21", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "c4759ff5fdda023d1cee5f006a8f25a6b5e26498", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "ffb41edf06f0fec067977b1cbb02d72b2fc6e696", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #2658 from eclipse/jetty-9.4.x-issue-2655-wsclient-session-removal\n\nIssue #2655 - Removing closed WebSocket Session's from WebSocketClient", "commitParents": ["93a8afcc6bd1a6e0af7bd9f967c97ae1bc3eb718", "2e5f106285de9817f7755ef2625d4fd742c34af7"], "commitHash": "6b335877d9cc8a6be0c61c5d6d2a559ab9035323", "commitSpoonAstDiffStats": [{"spoonFilePath": "SimpleContainerScope.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.scopes.SimpleContainerScope.doStart()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.scopes.SimpleContainerScope", "DEL": 1, "INS": 7, "UPD": 0, "MOV": 1, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.scopes.SimpleContainerScope.doStop()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "WebSocketClient.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketClient.getObjectFactory()", "DEL": 2, "INS": 0, "UPD": 1, "MOV": 2, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketClient.toString()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketClient.getAsyncWriteTimeout()", "DEL": 1, "INS": 1, "UPD": 4, "MOV": 2, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketClient", "DEL": 18, "INS": 14, "UPD": 11, "MOV": 43, "TOT": 86}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketClient.equals(java.lang.Object)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketClient.getPolicy()", "DEL": 0, "INS": 1, "UPD": 4, "MOV": 3, "TOT": 8}]}, {"spoonFilePath": "WebSocketServerFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketServerFactory.findDecorator()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketServerFactory.doStart()", "DEL": 2, "INS": 0, "UPD": 2, "MOV": 1, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketServerFactory.findExecutor()", "DEL": 0, "INS": 5, "UPD": 1, "MOV": 1, "TOT": 7}]}, {"spoonFilePath": "DefaultHttpClientProvider.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.client.DefaultHttpClientProvider.newHttpClient(org.eclipse.jetty.websocket.common.scopes.WebSocketContainerScope)", "DEL": 0, "INS": 4, "UPD": 0, "MOV": 0, "TOT": 4}]}, {"spoonFilePath": "NativeWebSocketServletContainerInitializer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.NativeWebSocketServletContainerInitializer.getDefaultFrom(javax.servlet.ServletContext)", "DEL": 1, "INS": 3, "UPD": 0, "MOV": 4, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.NativeWebSocketServletContainerInitializer.onStartup(java.util.Set,javax.servlet.ServletContext)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "WebSocketPolicy.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.api.WebSocketPolicy.clonePolicy(org.eclipse.jetty.websocket.api.WebSocketBehavior)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.api.WebSocketPolicy.clonePolicy()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "DelayedStartClientOnServerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.DelayedStartClientOnServerTest.testHttpClientThreads_AfterServerConnectTo()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.DelayedStartClientOnServerTest.testHttpClientThreads_AfterClientConnectTo()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ClientCloseTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.client.ClientCloseTest.testWriteException()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.ClientCloseTest.testStopLifecycle()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.ClientCloseTest.testServerNoCloseHandshake()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.ClientCloseTest.testReadEOF()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.ClientCloseTest.testProtocolException()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.ClientCloseTest.testHalfClose()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "6b335877d9cc8a6be0c61c5d6d2a559ab9035323 tags/jetty-9.4.12.RC0~19", "commitUser": "joakime", "authoredDateTime": "2018-06-22 10:15:48", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 14, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/NativeWebSocketServletContainerInitializer.java", "insertions": 12, "deletions": 2}, {"lines": 34, "filePath": "jetty-websocket/websocket-client/src/test/java/org/eclipse/jetty/websocket/client/ClientCloseTest.java", "insertions": 24, "deletions": 10}, {"lines": 4, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/DelayedStartClientOnServerTest.java", "insertions": 2, "deletions": 2}, {"lines": 39, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/scopes/SimpleContainerScope.java", "insertions": 26, "deletions": 13}, {"lines": 11, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/DefaultHttpClientProvider.java", "insertions": 11, "deletions": 0}, {"lines": 7, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/WebSocketPolicy.java", "insertions": 6, "deletions": 1}, {"lines": 40, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/WebSocketServerFactory.java", "insertions": 26, "deletions": 14}, {"lines": 124, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/WebSocketClient.java", "insertions": 59, "deletions": 65}], "commitDateTime": "2018-06-22 10:15:48", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #2655 - Applying changes requested from review.\n\n+ WebSocketClient all constructors now delegate down into one\n  implementation\n+ NativeWebSocketServletConfiguration is now managed properly\n+ WebSocketServletFactory can find Executor as bean too\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["870c87f2f705bb5c2b2b91c5153b255ac39542f7"], "commitHash": "2e5f106285de9817f7755ef2625d4fd742c34af7", "commitSpoonAstDiffStats": [{"spoonFilePath": "SimpleContainerScope.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.scopes.SimpleContainerScope", "DEL": 1, "INS": 7, "UPD": 0, "MOV": 1, "TOT": 9}]}, {"spoonFilePath": "WebSocketClient.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketClient.toString()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketClient", "DEL": 23, "INS": 14, "UPD": 3, "MOV": 33, "TOT": 73}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketClient.equals(java.lang.Object)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketClient.newDecoratedObjectFactory()", "DEL": 1, "INS": 0, "UPD": 3, "MOV": 1, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketClient.hashCode()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "WebSocketServerFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketServerFactory.getObjectFactory()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketServerFactory.findExecutor()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "DefaultHttpClientProvider.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.client.DefaultHttpClientProvider.newHttpClient(org.eclipse.jetty.websocket.common.scopes.WebSocketContainerScope)", "DEL": 0, "INS": 4, "UPD": 0, "MOV": 0, "TOT": 4}]}, {"spoonFilePath": "NativeWebSocketServletContainerInitializer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.NativeWebSocketServletContainerInitializer.getDefaultFrom(javax.servlet.ServletContext)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "DelayedStartClientOnServerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.DelayedStartClientOnServerTest.testHttpClientThreads_AfterClientConnectTo()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "2e5f106285de9817f7755ef2625d4fd742c34af7 tags/jetty-9.4.12.RC0~19^2", "commitUser": "joakime", "authoredDateTime": "2018-06-20 12:59:23", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/NativeWebSocketServletContainerInitializer.java", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/DelayedStartClientOnServerTest.java", "insertions": 1, "deletions": 1}, {"lines": 27, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/scopes/SimpleContainerScope.java", "insertions": 26, "deletions": 1}, {"lines": 11, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/DefaultHttpClientProvider.java", "insertions": 11, "deletions": 0}, {"lines": 18, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/WebSocketServerFactory.java", "insertions": 11, "deletions": 7}, {"lines": 101, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/WebSocketClient.java", "insertions": 45, "deletions": 56}], "commitDateTime": "2018-06-20 12:59:23", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "7dc675f977e26f6df9f7b58c2135047e5f391d01", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #2655 - Removing closed WebSocket Session's from WebSocketClient\n\n+ Correcting Native WebSocketConfiguration impact.\n+ CDI requires a customized DecoratedObjectFactory, which is bound\n  later in the lifecycle, which means we cannot rely on it being\n  provided directly in the constructors, but rather have to look\n  for it in the ServletContext.\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["395f4394b63c98ba70cef07f88ca4a4b842453ed"], "commitHash": "870c87f2f705bb5c2b2b91c5153b255ac39542f7", "commitSpoonAstDiffStats": [{"spoonFilePath": "SimpleContainerScope.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.scopes.SimpleContainerScope.doStart()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.scopes.SimpleContainerScope.doStop()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "WebSocketClient.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketClient.getObjectFactory()", "DEL": 1, "INS": 0, "UPD": 3, "MOV": 2, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketClient.getPolicy()", "DEL": 0, "INS": 0, "UPD": 4, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketClient.newDecoratedObjectFactory()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketClient.getOpenSessions()", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketClient", "DEL": 8, "INS": 12, "UPD": 13, "MOV": 6, "TOT": 39}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketClient.getAsyncWriteTimeout()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}]}, {"spoonFilePath": "WebSocketServerFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketServerFactory.findDecorator()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketServerFactory.getObjectFactory()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketServerFactory.doStart()", "DEL": 2, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketServerFactory.findExecutor()", "DEL": 0, "INS": 3, "UPD": 1, "MOV": 1, "TOT": 5}]}, {"spoonFilePath": "WebSocketPolicy.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.api.WebSocketPolicy.clonePolicy(org.eclipse.jetty.websocket.api.WebSocketBehavior)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.api.WebSocketPolicy.clonePolicy()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "NativeWebSocketServletContainerInitializer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.NativeWebSocketServletContainerInitializer.getDefaultFrom(javax.servlet.ServletContext)", "DEL": 1, "INS": 3, "UPD": 0, "MOV": 4, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.NativeWebSocketServletContainerInitializer.onStartup(java.util.Set,javax.servlet.ServletContext)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "DelayedStartClientOnServerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.DelayedStartClientOnServerTest.testHttpClientThreads_AfterServerConnectTo()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ClientCloseTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.client.ClientCloseTest.testWriteException()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.ClientCloseTest.testStopLifecycle()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.ClientCloseTest.testServerNoCloseHandshake()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.ClientCloseTest.testReadEOF()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.ClientCloseTest.testProtocolException()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.ClientCloseTest.testHalfClose()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "870c87f2f705bb5c2b2b91c5153b255ac39542f7 tags/jetty-9.4.12.RC0~19^2~1", "commitUser": "joakime", "authoredDateTime": "2018-06-12 15:41:08", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 14, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/NativeWebSocketServletContainerInitializer.java", "insertions": 12, "deletions": 2}, {"lines": 34, "filePath": "jetty-websocket/websocket-client/src/test/java/org/eclipse/jetty/websocket/client/ClientCloseTest.java", "insertions": 24, "deletions": 10}, {"lines": 2, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/DelayedStartClientOnServerTest.java", "insertions": 1, "deletions": 1}, {"lines": 12, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/scopes/SimpleContainerScope.java", "insertions": 0, "deletions": 12}, {"lines": 7, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/WebSocketPolicy.java", "insertions": 6, "deletions": 1}, {"lines": 28, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/WebSocketServerFactory.java", "insertions": 18, "deletions": 10}, {"lines": 69, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/WebSocketClient.java", "insertions": 37, "deletions": 32}], "commitDateTime": "2018-06-13 16:53:14", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "fe2d969d6e6ead88274372db7e05462e98384bd6", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "WebSocketClient not removing closed WebSocket Session's from managed beans", "spoonStatsSummary": {"spoonMethodsChanged": 21, "DEL": 43.0, "INS": 54.0, "UPD": 31.0, "MOV": 51.0, "TOT": 179.0, "spoonFilesChanged": 6}, "gitStatsSummary": {"lines": 289.0, "insertions": 167.0, "gitFilesChange": 6, "deletions": 122.0}, "closed": "2019-02-19 10:13:02", "statsSkippedReason": "", "body": "Hi,\r\n\r\nwhen a Websocket Session is closed, but instead of closing the WebSocketClient, a new websocket is opened, the annotated Websocket Handler is kept in the memory.\r\n\r\nPlease find the attached java example (put a breakpoint at line \"System.out.println(\"Put a breakpoint here\")\". When it stops the client.toString() will show 100 open sessions, but they are already closed.\r\n\r\n[JettyClientCloseBug.zip](https://github.com/eclipse/jetty.project/files/2094297/JettyClientCloseBug.zip)\r\n", "changesInPackagesGIT": ["jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client", "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api", "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server", "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common"], "changesInPackagesSPOON": ["org.eclipse.jetty.websocket.api.WebSocketPolicy.clonePolicy(org.eclipse.jetty.websocket.api.WebSocketBehavior)", "org.eclipse.jetty.websocket.client.WebSocketClient.toString()", "org.eclipse.jetty.websocket.client.WebSocketClient.getOpenSessions()", "org.eclipse.jetty.websocket.client.WebSocketClient.getPolicy()", "org.eclipse.jetty.websocket.api.WebSocketPolicy.clonePolicy()", "org.eclipse.jetty.websocket.server.WebSocketServerFactory.getObjectFactory()", "org.eclipse.jetty.websocket.server.WebSocketServerFactory.findDecorator()", "org.eclipse.jetty.websocket.common.scopes.SimpleContainerScope.doStart()", "org.eclipse.jetty.websocket.client.WebSocketClient.equals(java.lang.Object)", "org.eclipse.jetty.websocket.common.scopes.SimpleContainerScope", "org.eclipse.jetty.websocket.client.WebSocketClient.getAsyncWriteTimeout()", "org.eclipse.jetty.websocket.client.WebSocketClient.getObjectFactory()", "org.eclipse.jetty.websocket.client.WebSocketClient.hashCode()", "org.eclipse.jetty.websocket.server.NativeWebSocketServletContainerInitializer.getDefaultFrom(javax.servlet.ServletContext)", "org.eclipse.jetty.websocket.client.WebSocketClient.newDecoratedObjectFactory()", "org.eclipse.jetty.websocket.server.WebSocketServerFactory.findExecutor()", "org.eclipse.jetty.websocket.client.DefaultHttpClientProvider.newHttpClient(org.eclipse.jetty.websocket.common.scopes.WebSocketContainerScope)", "org.eclipse.jetty.websocket.server.WebSocketServerFactory.doStart()", "org.eclipse.jetty.websocket.client.WebSocketClient", "org.eclipse.jetty.websocket.server.NativeWebSocketServletContainerInitializer.onStartup(java.util.Set,javax.servlet.ServletContext)", "org.eclipse.jetty.websocket.common.scopes.SimpleContainerScope.doStop()"], "ttf": 251.00027777777777, "numCommits": 2, "url": "https://github.com/eclipse/jetty.project/issues/2655"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "mpetzold", "filteredCommits": [], "commits": {"630718b628b0ed45aa15b5f4433b7717797dd656": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "fbcc752ad7593a0a7cec2ea209e23c2e7ccff648": {"commitUser": "sbordet", "commitGHEventType": "closed"}}, "created": "2018-06-06 16:04:18", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "630718b628b0ed45aa15b5f4433b7717797dd656", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "sbordet", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #2631 - Buffering capacity exceeded for HEAD requests with large Content-Length. (#2640)\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>", "commitParents": ["a6532f71162910440a5a49c534b17ab6c36a7d65"], "commitHash": "fbcc752ad7593a0a7cec2ea209e23c2e7ccff648", "commitSpoonAstDiffStats": [{"spoonFilePath": "BufferingResponseListener.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.util.BufferingResponseListener.onContent(org.eclipse.jetty.client.api.Response,java.nio.ByteBuffer)", "DEL": 2, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.client.util.BufferingResponseListener.getContentAsInputStream()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.util.BufferingResponseListener", "DEL": 3, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.client.util.BufferingResponseListener.onHeaders(org.eclipse.jetty.client.api.Response)", "DEL": 2, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 5}]}, {"spoonFilePath": "HttpClientTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.client.HttpClientTest.testHEAD(java.lang.String,int).13.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.client.HttpClientTest.testRequestWithResponseContent(int).2.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.client.HttpClientTest.testHEADWithAcceptHeaderAndSendError().14.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.client.HttpClientTest.testClientManyWritesSlowServer().5.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.client.HttpClientTest.testOPTIONSWithRelativeRedirect().8.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.http.client.HttpClientTest.testHEADWithContentLengthGreaterThanMaxBufferingCapacity()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.client.HttpClientTest.testRequestAfterFailedRequest()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.client.HttpClientTest.testRequestWithResponseContentChunked(int).3.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.client.HttpClientTest.testRequestWithoutResponseContent().1.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.http.client.HttpClientTest.testUploadWithoutResponseContent(int).4.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 3, "INS": 2, "UPD": 1, "MOV": 4, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.http.client.HttpClientTest.testOPTIONS().7.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.http.client.HttpClientTest.testResponseWithContentCompleteListenerInvokedOnce().12.service(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.client.HttpClientTest.testAsyncResponseContentBackPressure().11.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.client.HttpClientTest.testRequestAfterFailedRequest().6.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 2, "INS": 1, "UPD": 1, "MOV": 1, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.http.client.HttpClientTest.testDownloadWithInputStreamResponseListener().9.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "fbcc752ad7593a0a7cec2ea209e23c2e7ccff648 tags/jetty-9.4.12.RC0~36", "commitUser": "sbordet", "authoredDateTime": "2018-06-08 17:48:58", "commitGHEventType": "closed", "commitGitStats": [{"lines": 63, "filePath": "tests/test-http-client-transport/src/test/java/org/eclipse/jetty/http/client/HttpClientTest.java", "insertions": 44, "deletions": 19}, {"lines": 24, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/util/BufferingResponseListener.java", "insertions": 14, "deletions": 10}], "commitDateTime": "2018-06-08 17:48:58", "spoonStatsSkippedReason": ""}], "title": "IllegalArgumentException: Buffering capacity exceeded, from HttpClient HEAD Requests to resources referencing large body contents", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2018-06-08 15:49:01", "statsSkippedReason": "", "body": "I'm using Jetty 9.4.8.\r\n\r\nAccording to HTTP specifications 1.1 \"The HEAD method is identical to GET except that the server MUST NOT return a message-body in the response. The metainformation contained in the HTTP headers in response to a HEAD request SHOULD be identical to the information sent in response to a GET request.\"\r\n\r\nIn case I send a HEAD request for a large resource (larger than the default maximum length of 2 MiB), I get this error:\r\n\r\n`Caused by: java.lang.IllegalArgumentException: Buffering capacity exceeded\r\n\tat org.eclipse.jetty.client.util.BufferingResponseListener.onHeaders(BufferingResponseListener.java:75)`\r\n\r\nThe reason is, that a BufferingResponseListener is used for the HEAD request which has a maximum size. However, it seems stupid to use this listener because according to the specifications the HEAD request \"MUST NOT return a message-body in the response\". In general, also the BufferingResponseListener should not test on the \"Content-Length\" header. It would be better to interrupt the stream if the maximum size is reached.", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 1.0002777777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/2631"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "JerryChin", "filteredCommits": [], "commits": {"e1f19be35302d3cbd7d40ac3bef36438d3209017": {"commitUser": "lachlan-roberts", "commitGHEventType": "referenced"}, "a9698901307f922e646d8a35a44b144921cf9eb7": {"commitUser": "lachlan-roberts", "commitGHEventType": "referenced"}}, "created": "2018-06-04 13:20:46", "commitsDetails": [{"commitMessage": "Closes #2620 - guard against exceptions for WebSocket onClose and onError (#4346)\n\n\r\nSigned-off-by: Lachlan Roberts <lachlan@webtide.com>\r\n", "commitParents": ["96f6f2bb8d70e0018483c1bb35d6c04879f39b80"], "commitHash": "e1f19be35302d3cbd7d40ac3bef36438d3209017", "commitSpoonAstDiffStats": [], "nameRev": "e1f19be35302d3cbd7d40ac3bef36438d3209017 tags/jetty-9.4.26.v20200117~14", "commitUser": "lachlan-roberts", "authoredDateTime": "2020-01-14 09:22:56", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 278, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/ErrorCloseTest.java", "insertions": 278, "deletions": 0}, {"lines": 26, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/WebSocketSession.java", "insertions": 20, "deletions": 6}, {"lines": 10, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/WebSocketUpgradeRequest.java", "insertions": 9, "deletions": 1}], "commitDateTime": "2020-01-14 09:22:56", "spoonStatsSkippedReason": "tooManyChanges"}, {"commitMessage": "", "commitParents": [], "commitHash": "a9698901307f922e646d8a35a44b144921cf9eb7", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "lachlan-roberts", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "Exception from user endpoint onClose results in unclosed WebSocketSession", "spoonStatsSummary": {}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2020-01-13 22:47:08", "statsSkippedReason": "", "body": "Hey, I'm using Jetty `9.4.6.v20170531` in PROD, web-socket is heavily utilized in our service.\r\n\r\nToday two nodes are found memory leak, GC threads took up nearly all computing power, after carefully examining the heap dumped, we find many `WebSocketSession`s are not properly released, so are our web-socket handlers.\r\n\r\n~~When `onWebSocketError` is called, the following action is taken:~~\r\n\r\n        if (this._session != null) {\r\n            // resources clean up here\r\n\r\n            if(_session.isOpen()){\r\n                Session s = _session;\r\n                _session = null;\r\n                try {\r\n                    s.disconnect();\r\n                } catch (Exception e) {\r\n                    logger.error(\"disconnect failed\", e);\r\n                }\r\n            }\r\n            logger.info(\"close user handler finished\");\r\n        }\r\n        this._session = null;\r\n\r\n~~but, unlike `onWebSocketClose` callback, the source code of [WebSocketSession#disconnect](https://github.com/eclipse/jetty.project/blob/7af2eecf6a78818e674ad13006b1462fb9b062dd/jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/WebSocketSession.java#L231) shows us the managed WebSocketSession is not cleared, we later managed to cast `Session` object back to `WebSocketSession`, and call [getContainerScope().onSessionClosed()](https://github.com/eclipse/jetty.project/blob/7af2eecf6a78818e674ad13006b1462fb9b062dd/jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/WebSocketSession.java#L350) to manually release leaked sessions as follows:~~\r\n\r\n         if(this._session != null) {\r\n                if(this._session instanceof WebSocketSession) {\r\n                    ((WebSocketSession)this._session).getContainerScope().onSessionClosed((WebSocketSession) this._session);\r\n                }\r\n            }\r\n\r\nEdited: the initial finding is misleading, see the following discussion.\r\n\r\nWe believe this behavior is a bug, if you should need information, feel free to ask me.\r\n\r\n\r\n\r\n", "changesInPackagesGIT": [], "ttf": 588.0002777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/2620"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "sbordet", "filteredCommits": ["c6cc33805f02da08cd74d59ba5b3015b68d6dee0", "77df9e1d87c10ebee18ac23af15ec4d2b379edca"], "commits": {"c6cc33805f02da08cd74d59ba5b3015b68d6dee0": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "77df9e1d87c10ebee18ac23af15ec4d2b379edca": {"commitUser": "sbordet", "commitGHEventType": "closed"}}, "created": "2018-06-04 13:10:28", "commitsDetails": [{"commitMessage": "Issue #2619 - Test Failure: QueuedThreadPoolTest.testThreadPool().\n\nCleanup of QueuedThreadPoolTest.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["7af2eecf6a78818e674ad13006b1462fb9b062dd"], "commitHash": "c6cc33805f02da08cd74d59ba5b3015b68d6dee0", "commitSpoonAstDiffStats": [{"spoonFilePath": "QueuedThreadPoolTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPoolTest.waitForIdle(org.eclipse.jetty.util.thread.QueuedThreadPool,int)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPoolTest.RunningJob", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPoolTest.testShrink()", "DEL": 2, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPoolTest.testShrink().1.run()", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPoolTest.testException().6.run()", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPoolTest.testException()", "DEL": 4, "INS": 4, "UPD": 0, "MOV": 0, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPoolTest.testZeroMinThreads()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPoolTest.testException().3.run()", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPoolTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPoolTest.testMaxStopTime().2.run()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 2, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPoolTest.testMaxStopTime()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPoolTest.testException().5.run()", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPoolTest.waitForThreads(org.eclipse.jetty.util.thread.QueuedThreadPool,int)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPoolTest.testException().4.run()", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPoolTest.testThreadPool()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "c6cc33805f02da08cd74d59ba5b3015b68d6dee0 tags/jetty-9.4.11.v20180605~9", "commitUser": "sbordet", "authoredDateTime": "2018-06-04 17:44:11", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 1, "filePath": "jetty-util/src/test/resources/jetty-logging.properties", "insertions": 1, "deletions": 0}, {"lines": 91, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/thread/QueuedThreadPoolTest.java", "insertions": 39, "deletions": 52}], "commitDateTime": "2018-06-04 17:46:08", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #2619 - Test Failure: QueuedThreadPoolTest.testThreadPool().\n\nNow newly created threads set _lastShrink to avoid they are immediately\nremoved from the pool if they happen to meet the shrink conditions.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["c6cc33805f02da08cd74d59ba5b3015b68d6dee0"], "commitHash": "77df9e1d87c10ebee18ac23af15ec4d2b379edca", "commitSpoonAstDiffStats": [{"spoonFilePath": "QueuedThreadPool.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPool.startThreads(int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "77df9e1d87c10ebee18ac23af15ec4d2b379edca tags/jetty-9.4.11.v20180605~8", "commitUser": "sbordet", "authoredDateTime": "2018-06-04 17:45:50", "commitGHEventType": "closed", "commitGitStats": [{"lines": 19, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/thread/QueuedThreadPool.java", "insertions": 10, "deletions": 9}], "commitDateTime": "2018-06-04 17:46:08", "spoonStatsSkippedReason": ""}], "title": "QueuedThreadPool race can shrink newly created idle threads before use", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 19, "insertions": 10, "gitFilesChange": 1, "deletions": 9}, "closed": "2018-06-04 15:46:24", "statsSkippedReason": "", "body": "```\r\nexpected:<3> but was:<2>\r\n\r\njava.lang.AssertionError: expected:<3> but was:<2>\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPoolTest.waitForThreads(QueuedThreadPoolTest.java:264)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPoolTest.testThreadPool(QueuedThreadPoolTest.java:109)\r\n\r\n[AdvancedRunner] Running org.eclipse.jetty.util.thread.QueuedThreadPoolTest.testThreadPool()\r\n2018-06-01 16:00:13.729:INFO:oejut.ThreadPoolBudget:main: ReservedThreadExecutor@4e79c25{s=0/1,p=0} requires 1 threads from QueuedThreadPool[qtp1845002237]@6df87ffd{STARTING,2<=0<=4,i=0,q=0}[ReservedThreadExecutor@4e79c25{s=0/1,p=0}]\r\n2018-06-01 16:00:13.729:WARN:oejut.ThreadPoolBudget:main: Low configured threads: (max=4 - required=1)=3 < warnAt=8 for QueuedThreadPool[qtp1845002237]@6df87ffd{STARTING,2<=0<=4,i=0,q=0}[ReservedThreadExecutor@4e79c25{s=0/1,p=0}]\r\n```", "changesInPackagesGIT": ["jetty-util/src/main/java/org/eclipse/jetty/util/thread"], "changesInPackagesSPOON": ["org.eclipse.jetty.util.thread.QueuedThreadPool.startThreads(int)"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/2619"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 2, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "imario42", "filteredCommits": [], "commits": {"2d1380c483a63f1c36e4676f8f36e983fdd2967e": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "e5554831e0f08360413b5a42f81177746c39cf4f": {"commitUser": "sbordet", "commitGHEventType": "closed"}, "f855220744dfcd81f0689cdb832f9924bf67a0b0": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2018-06-02 18:38:29", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "2d1380c483a63f1c36e4676f8f36e983fdd2967e", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "sbordet", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #2616 - Trailers preventing client from processing all the data. (#2623)\n\n* Fixes #2616 - Trailers preventing client from processing all the data.\r\n\r\nTrailer handling was erroneously firing the response success event\r\nbefore all the response content events happened.\r\n\r\nNow the trailer handling uses a poison-pill DATA frame to make sure that\r\nall response content events happen before the response success event.\r\n\r\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>", "commitParents": ["f6be906caf8bbf5ca951f82092fe9e7b3410559b"], "commitHash": "e5554831e0f08360413b5a42f81177746c39cf4f", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpReceiverOverHTTP2.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.client.http.HttpReceiverOverHTTP2.onHeaders(org.eclipse.jetty.http2.api.Stream,org.eclipse.jetty.http2.frames.HeadersFrame)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.client.http.HttpReceiverOverHTTP2.onData(org.eclipse.jetty.http2.api.Stream,org.eclipse.jetty.http2.frames.DataFrame,org.eclipse.jetty.util.Callback)", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 4, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.http2.client.http.HttpReceiverOverHTTP2.notifyContent(org.eclipse.jetty.client.HttpExchange,org.eclipse.jetty.http2.frames.DataFrame,org.eclipse.jetty.util.Callback)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.client.http.HttpReceiverOverHTTP2.ContentNotifier.process()", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 4, "TOT": 7}]}, {"spoonFilePath": "HttpTrailersTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.client.HttpTrailersTest.testResponseTrailersWithLargeContent()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "e5554831e0f08360413b5a42f81177746c39cf4f tags/jetty-9.4.11.v20180605~2", "commitUser": "sbordet", "authoredDateTime": "2018-06-05 18:55:55", "commitGHEventType": "closed", "commitGitStats": [{"lines": 58, "filePath": "tests/test-http-client-transport/src/test/java/org/eclipse/jetty/http/client/HttpTrailersTest.java", "insertions": 58, "deletions": 0}, {"lines": 21, "filePath": "jetty-http2/http2-http-client-transport/src/main/java/org/eclipse/jetty/http2/client/http/HttpReceiverOverHTTP2.java", "insertions": 16, "deletions": 5}], "commitDateTime": "2018-06-05 18:55:55", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "f855220744dfcd81f0689cdb832f9924bf67a0b0", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "sbordet", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "Trailers preventing client from processing all the data ", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2018-06-05 16:55:59", "statsSkippedReason": "", "body": "The problem I have is when I try to send \"trailer\" data from the (dropwizard) server to the client.\r\nIn this case, the application does not receive all of the data sent over the wire. In Wireshark I can see that the server sent all the data correctly. Anyway, the jetty-client stops processing any data it has already received from the server as soon as the trailer header arrives.\r\nIt seems, that the responseSuccess() call terminates further processing of already received data - and purges it.\r\n\r\nWhen I fake an empty DataFrame (instead of calling responseSuccess) to end the stream it seems everthing is working fine.\r\nhttps://github.com/eclipse/jetty.project/pull/2615/commits/f2fdd6c72087d266b734d7b9ed7ded9c90d09548\r\n\r\nI am using the org.eclipse.jetty.client.util.InputStreamResponseListener and I am able to grab the trailer fields from within the onContent() method then.\r\n\r\nI've hacked together a simple project which unveils this problem.\r\nYou can check it out from my github repository:  https://github.com/imario42/jettyHttp2TrailersTest\r\n\r\n\r\nAfter (gradle) building the project (I've used Java 9) you simply execute\r\nat.datenwort.jettyTrailerTest.server.ServerMain\r\n\r\nOnce the server started you can execute at.datenwort.jettyTrailerTest.client.ClientMain.\r\n\r\nBoth do DEBUG logging.\r\n\r\nThis sample provides a simple service (at.datenwort.jettyTrailerTest.server.SimpleService) which sends a long string starting with *START_MARKER* and ending with *END_MARKER*.\r\n\r\n\r\nAfter three runs of ClientMain I got these three different results:\r\n\r\nexpected characters=800026 got characters=458213\r\nstart marker present=true\r\nend marker present=false\r\nserverTiming=total;dur=46\r\n\r\n\r\nexpected characters=800026 got characters=441870\r\nstart marker present=true\r\nend marker present=false\r\nserverTiming=total;dur=28\r\n\r\n\r\nexpected characters=800026 got characters=540066\r\nstart marker present=true\r\nend marker present=false\r\nserverTiming=total;dur=24\r\n\r\n\r\nAs soon as you remove the setTrailers() in at.datenwort.jettyTrailerTest.server.TrailersFilter you get:\r\n\r\nexpected characters =800026 got characters =800026\r\nstart marker present =true\r\nend marker present =true\r\nserverTiming=null\r\n\r\nNo trailer (obviously), but the entity has been processed correctly.", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 2.000277777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/2616"}, {"labels": ["Bug", "Test"], "closed": "2018-09-11 18:23:24", "body": "https://jenkins.webtide.net/job/jetty.project/job/jetty-9.4.x/358/testReport/junit/org.eclipse.jetty.websocket.server.misbehaving/MisbehavingClassTest/linux_jdk8___Test___jdk8___testAnnotatedRuntimeOnConnect/\r\n", "commits": {}, "title": "WebSocket Server based MisbehavingClassTest failing to get proper close status code", "created": "2018-05-30 09:22:50", "user": "janbartel", "url": "https://github.com/eclipse/jetty.project/issues/2598", "commitsDetails": [], "ttf": 104.00027777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 6, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "jbrazeau", "filteredCommits": [], "commits": {"dec2162d5376e2e3563e9cd67061449b2e5f0512": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "b72a9f49109dc2abb44984e5ff45074ae7611c6b": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "9ad4c54b122d758e01deebf5e58c0e0b7e99d560": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "d290e74b068e32007dd8b19216b9cb97b05f0103": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "79935b92ae93a6bbfa2d21bed2addcb655f853fd": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "7398adc6363f89281ff8c7ed7ee94333d4cbbade": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "838f364a9dbc3ad8d0bfb6b9b23c124c212a11cf": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2018-05-25 15:14:41", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "dec2162d5376e2e3563e9cd67061449b2e5f0512", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "b72a9f49109dc2abb44984e5ff45074ae7611c6b", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "9ad4c54b122d758e01deebf5e58c0e0b7e99d560", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "838f364a9dbc3ad8d0bfb6b9b23c124c212a11cf", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #2575 - Work around bad Bundle.getEntry() behavior with unescaped URLs (#2590)\n\n* Adding test case to verify existing PathResource behavior\r\n* Skipping Resource class usage in OSGi entirely\r\n* Only using the URL class, and removing of conversions to\r\n  other more correct forms (File and URI)\r\n\r\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>", "commitParents": ["d54da40f8fef2e75ffc0fa3906f48f906b0e285e"], "commitHash": "79935b92ae93a6bbfa2d21bed2addcb655f853fd", "commitSpoonAstDiffStats": [{"spoonFilePath": "FileSystemResourceTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.FileSystemResourceTest.testNewResource_WithSpace()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.FileSystemResourceTest.newResource(java.net.URL)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ResourceTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.ResourceTest.data()", "DEL": 0, "INS": 1, "UPD": 2, "MOV": 0, "TOT": 3}]}, {"spoonFilePath": "ServerInstanceWrapper.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.osgi.boot.internal.serverfactory.ServerInstanceWrapper.getManagedJettySharedLibFolderUrls(java.util.Dictionary)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.osgi.boot.internal.serverfactory.ServerInstanceWrapper.configure(org.eclipse.jetty.server.Server,java.util.List,java.util.Dictionary)", "DEL": 1, "INS": 0, "UPD": 4, "MOV": 0, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.osgi.boot.internal.serverfactory.ServerInstanceWrapper.start(org.eclipse.jetty.server.Server,java.util.Dictionary)", "DEL": 2, "INS": 1, "UPD": 2, "MOV": 6, "TOT": 11}, {"spoonMethodName": "org.eclipse.jetty.osgi.boot.internal.serverfactory.ServerInstanceWrapper.extractFiles(java.lang.String)", "DEL": 1, "INS": 0, "UPD": 6, "MOV": 2, "TOT": 9}]}], "nameRev": "79935b92ae93a6bbfa2d21bed2addcb655f853fd tags/jetty-9.4.11.v20180605~5", "commitUser": "janbartel", "authoredDateTime": "2018-06-05 03:12:50", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 65, "filePath": "jetty-osgi/jetty-osgi-boot/src/main/java/org/eclipse/jetty/osgi/boot/internal/serverfactory/ServerInstanceWrapper.java", "insertions": 31, "deletions": 34}, {"lines": 6, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/resource/ResourceTest.java", "insertions": 4, "deletions": 2}, {"lines": 48, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/resource/FileSystemResourceTest.java", "insertions": 48, "deletions": 0}], "commitDateTime": "2018-06-05 10:12:50", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "7398adc6363f89281ff8c7ed7ee94333d4cbbade", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "d290e74b068e32007dd8b19216b9cb97b05f0103", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "Work around broken OSGi implementations Bundle.getEntry() behavior returning with unescaped URLs", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2018-06-28 16:37:04", "statsSkippedReason": "", "body": "For example, if you package an eclipse application that embeds jetty, and if you rely on `org.eclipse.jetty.osgi.boot` to start Jetty, if your eclipse installation path contains a space for example, Jetty default bootstrap fails with the following error :\r\n```\r\n!STACK 0\r\njava.lang.IllegalStateException: No such jetty server config file: file:/Users/jbrazeau/a path with a space/MyEclipseApp.app/Contents/Eclipse/configuration/org.eclipse.osgi/215/0/.cp/jettyhome/etc/jetty.xml; BadResource=java.net.URISyntaxException: Illegal character in path at index 22: file:/Users/jbrazeau/a path with a space/MyEclipseApp.app/Contents/Eclipse/configuration/org.eclipse.osgi/215/0/.cp/jettyhome/etc/jetty.xml\r\n\tat org.eclipse.jetty.osgi.boot.internal.serverfactory.ServerInstanceWrapper.configure(ServerInstanceWrapper.java:153)\r\n\tat org.eclipse.jetty.osgi.boot.internal.serverfactory.DefaultJettyAtJettyHomeHelper.startJettyAtJettyHome(DefaultJettyAtJettyHomeHelper.java:179)\r\n\tat org.eclipse.jetty.osgi.boot.JettyBootstrapActivator.start(JettyBootstrapActivator.java:82)\r\n\tat org.eclipse.osgi.internal.framework.BundleContextImpl$3.run(BundleContextImpl.java:779)\r\n\tat org.eclipse.osgi.internal.framework.BundleContextImpl$3.run(BundleContextImpl.java:1)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat org.eclipse.osgi.internal.framework.BundleContextImpl.startActivator(BundleContextImpl.java:772)\r\n\tat org.eclipse.osgi.internal.framework.BundleContextImpl.start(BundleContextImpl.java:729)\r\n\tat org.eclipse.osgi.internal.framework.EquinoxBundle.startWorker0(EquinoxBundle.java:933)\r\n\tat org.eclipse.osgi.internal.framework.EquinoxBundle$EquinoxModule.startWorker(EquinoxBundle.java:309)\r\n\tat org.eclipse.osgi.container.Module.doStart(Module.java:581)\r\n\tat org.eclipse.osgi.container.Module.start(Module.java:449)\r\n\tat org.eclipse.osgi.container.ModuleContainer$ContainerStartLevel.incStartLevel(ModuleContainer.java:1634)\r\n\tat org.eclipse.osgi.container.ModuleContainer$ContainerStartLevel.incStartLevel(ModuleContainer.java:1614)\r\n\tat org.eclipse.osgi.container.ModuleContainer$ContainerStartLevel.doContainerStartLevel(ModuleContainer.java:1585)\r\n\tat org.eclipse.osgi.container.ModuleContainer$ContainerStartLevel.dispatchEvent(ModuleContainer.java:1528)\r\n\tat org.eclipse.osgi.container.ModuleContainer$ContainerStartLevel.dispatchEvent(ModuleContainer.java:1)\r\n\tat org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)\r\n\tat org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:340)\r\n\r\n```\r\nJetty retrieves dynamically the `org.eclipse.jetty.osgi.boot` bundle URL in order to load the `jetty.xml` configuration file that resides in this bundle. Then the URL is converted to a `java.net.URI` in the `PathResource` class as you can see here : https://github.com/eclipse/jetty.project/blob/jetty-9.4.x/jetty-util/src/main/java/org/eclipse/jetty/util/resource/PathResource.java#L285\r\n\r\nThis works perfectly unless the `org.eclipse.jetty.osgi.boot*.jar` full path contains a space (or more precisely any character that is considered as invalid in a URI like `{`, `[`, ...).\r\n\r\nThat situation leads to a `BadResource` instance here (instead of a valid `PathResource`) : https://github.com/eclipse/jetty.project/blob/jetty-9.4.x/jetty-util/src/main/java/org/eclipse/jetty/util/resource/Resource.java#L123\r\n\r\nAnd then, jetty complains about an invalid URL and stops.\r\n\r\nIt is true that a path that contains a `[` is strange, but a path that contains a space is classic (especially, but not only, for windows users).\r\n\r\nPersonnaly, I would expect jetty to be able to start even in a folder that contains a space (I feel that at the end, this looks like a strange limitation for the end user).", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 34.000277777777775, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/2575"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 2, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "javabrett", "filteredCommits": [], "commits": {"2204c795f787a2ae67c085a0bc46c0e9f5573486": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "0fb90223059ef2dd1d704748e5196d63924f3ef9": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "3c423ecd5216675307f5adcaa500cd5bb62c3cac": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2018-05-23 05:00:20", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "2204c795f787a2ae67c085a0bc46c0e9f5573486", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "3c423ecd5216675307f5adcaa500cd5bb62c3cac", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #2565  Ensure bad file throws Exception for HashLoginService (#2622)\n\n* Issue #2565  Ensure bad file throws Exception for HashLoginService\r\n\r\nSigned-off-by: Jan Bartel <janb@webtide.com>\r\n\r\n", "commitParents": ["9713dbccd5155d732e91c8f35dac9b5c4d19cbe8"], "commitHash": "0fb90223059ef2dd1d704748e5196d63924f3ef9", "commitSpoonAstDiffStats": [{"spoonFilePath": "PropertyUserStoreTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.security.PropertyUserStoreTest.testPropertyUserStoreFails()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "PropertyUserStore.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.security.PropertyUserStore.loadUsers()", "DEL": 4, "INS": 4, "UPD": 0, "MOV": 6, "TOT": 14}]}], "nameRev": "0fb90223059ef2dd1d704748e5196d63924f3ef9 tags/jetty-9.4.12.RC0~42", "commitUser": "janbartel", "authoredDateTime": "2018-06-07 14:51:53", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 16, "filePath": "jetty-security/src/main/java/org/eclipse/jetty/security/PropertyUserStore.java", "insertions": 8, "deletions": 8}, {"lines": 18, "filePath": "jetty-security/src/test/java/org/eclipse/jetty/security/PropertyUserStoreTest.java", "insertions": 18, "deletions": 0}], "commitDateTime": "2018-06-07 14:51:53", "spoonStatsSkippedReason": ""}], "title": "HashLoginService silently ignores file:/ config paths from 9.3.x", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2018-06-28 16:38:43", "statsSkippedReason": "", "body": "Found this in https://github.com/gretty-gradle-plugin/gretty where a test failed on latest 9.3.x and 9.4.x which passed on 9.2.x.  The test sets-up a Realm using `HashLoginService` and is configured with a file path, which was of the form e.g. `new HashLoginService(\"auth\", \"file:/path/to/jetty-realm.properties\")`.\r\n\r\nThat works fine in Jetty `9.2.24.v20180105`.  In the latest 9.3 and 9.4 builds we've tested with (`9.3.23.v20180228` and `9.4.9.v20180320`), the test fails, and `HashLoginService` and the `PropertyUserStore` underneath it just silently ignore that file since they consider it does not exist.  If the string passed to the `HashLoginService` is changed from URL to path form, e.g. `/path/to/jetty-realm.properties`, the test passes as the login service is properly configured.\r\n\r\nAccording to https://github.com/eclipse/jetty.project/blob/jetty-9.4.x/jetty-security/src/main/java/org/eclipse/jetty/security/HashLoginService.java#L100 :\r\n\r\n> /* ------------------------------------------------------------ */\r\n>     /**\r\n>      * Load realm users from properties file.\r\n>      * <p>\r\n>      * The property file maps usernames to password specs followed by an optional comma separated list of role names.\r\n>      * </p>\r\n>      * \r\n>      * @param config uri or url or path to realm properties file\r\n>      */\r\n>     public void setConfig(String config)\r\n>     {\r\n>         _config=config;\r\n>     }\r\n\r\n... so URL or URI as string should be fine.  The URL as string is valid (works immediately with `file:` removed).\r\n\r\n[`PathResource.exists()`](https://github.com/eclipse/jetty.project/blob/jetty-9.4.x/jetty-util/src/main/java/org/eclipse/jetty/util/resource/PathResource.java#L369) works with a `Path` type and is what causes the file path to be rejected and ignored here: https://github.com/eclipse/jetty.project/blob/jetty-9.4.x/jetty-security/src/main/java/org/eclipse/jetty/security/PropertyUserStore.java#L255\r\n\r\nIs this a real change, and was it documented, or is it a bug/regression?", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 36.000277777777775, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/2565"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["53e8bc2a636707e896fd106fbee3596823c2cdc9", "ad4dceb1c08679baa2a6a64356fcde5309e13fd8", "65de2c6690103212a933e5491fbe94d35fcdd498"], "commits": {"a51920d650d924cc2cea011995624b394437c6e0": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "ad4dceb1c08679baa2a6a64356fcde5309e13fd8": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "65de2c6690103212a933e5491fbe94d35fcdd498": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "53e8bc2a636707e896fd106fbee3596823c2cdc9": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2018-05-22 15:20:16", "commitsDetails": [{"commitMessage": "Merge pull request #2561 from eclipse/jetty-9.4.x-issue-2560-pathresource-exceptions\n\nIssue #2560 - Review of PathResource exception handling", "commitParents": ["4acc4e798bf256502c081a9d7fbd240d4403793f", "c4bcc4005a2ee558443773f4e2952d770e62609c"], "commitHash": "a51920d650d924cc2cea011995624b394437c6e0", "commitSpoonAstDiffStats": [{"spoonFilePath": "PathResource.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.PathResource.addPath(java.lang.String)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.PathResource", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ResourceContentFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ResourceContentFactory.getContent(java.lang.String,int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 3, "TOT": 4}]}, {"spoonFilePath": "DefaultServletTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.DefaultServletTest.testControlCharacter()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "a51920d650d924cc2cea011995624b394437c6e0 tags/jetty-9.4.11.v20180605~12", "commitUser": "joakime", "authoredDateTime": "2018-05-31 13:26:16", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 20, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/ResourceContentFactory.java", "insertions": 14, "deletions": 6}, {"lines": 16, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/resource/PathResource.java", "insertions": 6, "deletions": 10}, {"lines": 21, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/DefaultServletTest.java", "insertions": 21, "deletions": 0}], "commitDateTime": "2018-05-31 13:26:16", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #2560 - Moving InvalidPath logic from PathResource to ResourceContentFactory\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["d011d4c8f749eede2ee3318c2e69b1d3e9c07025"], "commitHash": "ad4dceb1c08679baa2a6a64356fcde5309e13fd8", "commitSpoonAstDiffStats": [{"spoonFilePath": "PathResource.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.PathResource", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 4, "TOT": 5}]}, {"spoonFilePath": "ResourceContentFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ResourceContentFactory.getContent(java.lang.String,int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 3, "TOT": 4}]}, {"spoonFilePath": "DefaultServletTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.DefaultServletTest.testControlCharacter()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "ad4dceb1c08679baa2a6a64356fcde5309e13fd8 tags/jetty-9.4.11.v20180605~12^2^2", "commitUser": "joakime", "authoredDateTime": "2018-05-31 11:31:36", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 20, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/ResourceContentFactory.java", "insertions": 14, "deletions": 6}, {"lines": 17, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/resource/PathResource.java", "insertions": 5, "deletions": 12}, {"lines": 1, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/DefaultServletTest.java", "insertions": 1, "deletions": 0}], "commitDateTime": "2018-05-31 11:31:36", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #2560 - Review of PathResource exception handling\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["bc16b6efae88f6fb99dc6ca677ad036dc9d2786d"], "commitHash": "65de2c6690103212a933e5491fbe94d35fcdd498", "commitSpoonAstDiffStats": [{"spoonFilePath": "PathResource.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.PathResource.addPath(java.lang.String)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.PathResource", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 5, "TOT": 7}]}, {"spoonFilePath": "DefaultServletTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.DefaultServletTest.testControlCharacter()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "65de2c6690103212a933e5491fbe94d35fcdd498 tags/jetty-9.4.11.v20180605~12^2~5", "commitUser": "joakime", "authoredDateTime": "2018-05-22 10:30:30", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 27, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/resource/PathResource.java", "insertions": 15, "deletions": 12}, {"lines": 20, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/DefaultServletTest.java", "insertions": 20, "deletions": 0}], "commitDateTime": "2018-05-22 10:30:30", "spoonStatsSkippedReason": ""}, {"commitMessage": "Backport of issue #2560 fixes to jetty-9.3.x\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["519d36ae4098253c0008f7818a0c864cde252102"], "commitHash": "53e8bc2a636707e896fd106fbee3596823c2cdc9", "commitSpoonAstDiffStats": [{"spoonFilePath": "PathResource.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.PathResource.addPath(java.lang.String)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.PathResource", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "DefaultServlet.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.DefaultServlet.getResource(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ResourceContentFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ResourceContentFactory.getContent(java.lang.String,int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 3, "TOT": 4}]}, {"spoonFilePath": "DefaultServletTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.DefaultServletTest.testControlCharacter()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "53e8bc2a636707e896fd106fbee3596823c2cdc9 tags/jetty-9.3.24.v20180605~5", "commitUser": "joakime", "authoredDateTime": "2018-05-22 10:30:30", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 25, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/ResourceContentFactory.java", "insertions": 17, "deletions": 8}, {"lines": 16, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/resource/PathResource.java", "insertions": 6, "deletions": 10}, {"lines": 6, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/DefaultServlet.java", "insertions": 6, "deletions": 0}, {"lines": 37, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/DefaultServletTest.java", "insertions": 30, "deletions": 7}], "commitDateTime": "2018-05-31 12:43:17", "spoonStatsSkippedReason": ""}], "title": "Review PathResource exception handling", "spoonStatsSummary": {"spoonMethodsChanged": 4, "DEL": 5, "INS": 4, "UPD": 0, "MOV": 15, "TOT": 24, "spoonFilesChanged": 3}, "gitStatsSummary": {"lines": 111, "insertions": 63, "gitFilesChange": 3, "deletions": 48}, "closed": "2018-06-28 16:39:25", "statsSkippedReason": "", "body": "The PathResource needs a review of its Exception handling.", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server", "jetty-util/src/main/java/org/eclipse/jetty/util/resource", "jetty-servlet/src/main/java/org/eclipse/jetty/servlet"], "changesInPackagesSPOON": ["org.eclipse.jetty.util.resource.PathResource.addPath(java.lang.String)", "org.eclipse.jetty.util.resource.PathResource", "org.eclipse.jetty.servlet.DefaultServlet.getResource(java.lang.String)", "org.eclipse.jetty.server.ResourceContentFactory.getContent(java.lang.String,int)"], "ttf": 37.000277777777775, "numCommits": 3, "url": "https://github.com/eclipse/jetty.project/issues/2560"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "marctinkler", "filteredCommits": ["a6547eaf831849e324b0a69f27b3a3229cd3c8a3"], "commits": {"a6547eaf831849e324b0a69f27b3a3229cd3c8a3": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "bc16b6efae88f6fb99dc6ca677ad036dc9d2786d": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2018-05-22 10:13:26", "commitsDetails": [{"commitMessage": "Issue #2559 - Use Configurator declared in ServerEndpointConfig over @ServerEndpoint annotation\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["e6e49bdc856cc0357bdaf25815bc4000ce632c43"], "commitHash": "a6547eaf831849e324b0a69f27b3a3229cd3c8a3", "commitSpoonAstDiffStats": [{"spoonFilePath": "AnnotatedServerEndpointConfig.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.AnnotatedServerEndpointConfig", "DEL": 1, "INS": 1, "UPD": 9, "MOV": 2, "TOT": 13}]}, {"spoonFilePath": "PongContextListener.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.samples.pong.PongContextListener.contextInitialized(javax.servlet.ServletContextEvent)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "a6547eaf831849e324b0a69f27b3a3229cd3c8a3 tags/jetty-9.4.11.v20180605~32", "commitUser": "joakime", "authoredDateTime": "2018-05-25 06:29:02", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 5, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/samples/pong/PongContextListener.java", "insertions": 3, "deletions": 2}, {"lines": 17, "filePath": "jetty-websocket/javax-websocket-server-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/server/AnnotatedServerEndpointConfig.java", "insertions": 9, "deletions": 8}], "commitDateTime": "2018-05-25 06:29:33", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #2559 - Use Configurator declared in ServerEndpointConfig over @ServerEndpoint annotation\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["462679910ffe49bc726854c3c4d4aa983b521363"], "commitHash": "bc16b6efae88f6fb99dc6ca677ad036dc9d2786d", "commitSpoonAstDiffStats": [{"spoonFilePath": "ConfiguratorTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.ConfiguratorTest.testAnnotationConfigurator()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.ConfiguratorTest.startServer()", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.ConfiguratorTest.ConfigNormalConfigurator", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.ConfiguratorTest.ConfigNormalSocket", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.ConfiguratorTest.testOverrideConfigurator()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.ConfiguratorTest.ConfigOverrideConfigurator", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AnnotatedServerEndpointConfig.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.AnnotatedServerEndpointConfig", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 6, "TOT": 8}]}], "nameRev": "bc16b6efae88f6fb99dc6ca677ad036dc9d2786d tags/jetty-9.4.11.v20180605~36", "commitUser": "joakime", "authoredDateTime": "2018-05-22 09:44:20", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 76, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/ConfiguratorTest.java", "insertions": 76, "deletions": 0}, {"lines": 18, "filePath": "jetty-websocket/javax-websocket-server-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/server/AnnotatedServerEndpointConfig.java", "insertions": 9, "deletions": 9}], "commitDateTime": "2018-05-22 09:44:20", "spoonStatsSkippedReason": ""}], "title": "Use Configurator declared in ServerEndpointConfig over one declared in the @ServerEndpoint annotation", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 2, "INS": 1, "UPD": 9, "MOV": 2, "TOT": 14, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 17, "insertions": 9, "gitFilesChange": 1, "deletions": 8}, "closed": "2018-06-06 20:15:19", "statsSkippedReason": "", "body": "I believe there is a bug in org.eclipse.jetty.websocket.jsr356.server.AnnotatedServerEndpointConfig that is affecting our ability to create Guice injected websocket Configurators.  \r\n\r\nHere is the problem, when registering a websocket via a call to ServerContainer.addEndpoint( ServerEndpointConfig ), you'd expect it to use *everything* configured in the ServerEndpointConfig (and not use the annotation, (even if the Endpoint you are adding is annotated with @ServerEndpoint).   And indeed, the AnnotatedServerEndpointConfig class makes sure to prioritize the \"BaseConfig\" over the annotation, in all but one case:\r\n\r\nHere's a (correct) example starting on line 64:\r\n\r\n```java\r\n// Decoders (favor provided config over annotation)\r\n        if (baseConfig != null && baseConfig.getDecoders() != null && baseConfig.getDecoders().size() > 0)\r\n        {\r\n            this.decoders = Collections.unmodifiableList(baseConfig.getDecoders());\r\n        }\r\n        else\r\n        {\r\n            this.decoders = Collections.unmodifiableList(Arrays.asList(anno.decoders()));\r\n        }\r\n```\r\n\r\nHowever, when it comes to the Configurator, it prefers the *annotation* over the provided config:\r\n\r\nstarting on line 115:\r\n\r\n```java\r\nif (anno.configurator() == ServerEndpointConfig.Configurator.class)\r\n        {\r\n            if (configr != null)\r\n            {\r\n                cfgr = configr;\r\n            }\r\n            else\r\n            {\r\n                cfgr = new ContainerDefaultConfigurator();\r\n            }\r\n        }\r\n        else\r\n        {\r\n            try\r\n            {\r\n                cfgr = anno.configurator().getDeclaredConstructor( ).newInstance();\r\n            }\r\n            catch (Exception e)\r\n            {\r\n                StringBuilder err = new StringBuilder();\r\n                err.append(\"Unable to instantiate ClientEndpoint.configurator() of \");\r\n                err.append(anno.configurator().getName());\r\n                err.append(\" defined as annotation in \");\r\n                err.append(anno.getClass().getName());\r\n                throw new DeploymentException(err.toString(),e);\r\n            }\r\n        }\r\n```\r\n\r\nI believe this is a bug, I think (based on the design of the class), this would be correct:\r\n\r\n```java\r\n       if (configr != null)\r\n        {\r\n                cfgr = configr;\r\n        }\r\n        else if (anno.configurator() == ServerEndpointConfig.Configurator.class)\r\n        {\r\n            cfgr = new ContainerDefaultConfigurator();\r\n        }\r\n        else\r\n        {\r\n            try\r\n            {\r\n                cfgr = anno.configurator().getDeclaredConstructor( ).newInstance();\r\n            }\r\n            catch (Exception e)\r\n            {\r\n                StringBuilder err = new StringBuilder();\r\n                err.append(\"Unable to instantiate ClientEndpoint.configurator() of \");\r\n                err.append(anno.configurator().getName());\r\n                err.append(\" defined as annotation in \");\r\n                err.append(anno.getClass().getName());\r\n                throw new DeploymentException(err.toString(),e);\r\n            }\r\n        }\r\n```\r\n            \r\n", "changesInPackagesGIT": ["jetty-websocket/javax-websocket-server-impl/src/main/java/org/eclipse/jetty/websocket/jsr356"], "changesInPackagesSPOON": ["org.eclipse.jetty.websocket.jsr356.server.samples.pong.PongContextListener.contextInitialized(javax.servlet.ServletContextEvent)", "org.eclipse.jetty.websocket.jsr356.server.AnnotatedServerEndpointConfig"], "ttf": 15.000277777777777, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/2559"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["01f7aecc4e5f0f5b0f6a48d63efc5bc33301e470"], "commits": {"01f7aecc4e5f0f5b0f6a48d63efc5bc33301e470": {"commitUser": "sbordet", "commitGHEventType": "closed"}}, "created": "2018-05-16 13:14:04", "commitsDetails": [{"commitMessage": "Fixes #2546 - Incorrect parsing of PROXY protocol v2.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["744f9054b390a8276d8f9d911da1571bf5764fe6"], "commitHash": "01f7aecc4e5f0f5b0f6a48d63efc5bc33301e470", "commitSpoonAstDiffStats": [{"spoonFilePath": "ProxyConnectionFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ProxyConnectionFactory.ProxyProtocolV2Connection.next()", "DEL": 9, "INS": 11, "UPD": 19, "MOV": 12, "TOT": 51}]}, {"spoonFilePath": "ProxyProtocolTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.client.ProxyProtocolTest.test_PROXY_GET_v2().3.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 4, "UPD": 1, "MOV": 0, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.http2.client.ProxyProtocolTest.test_PROXY_GET_v2()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}]}], "nameRev": "01f7aecc4e5f0f5b0f6a48d63efc5bc33301e470 tags/jetty-9.4.11.v20180605~38^2~8", "commitUser": "sbordet", "authoredDateTime": "2018-05-16 21:33:22", "commitGHEventType": "closed", "commitGitStats": [{"lines": 12, "filePath": "jetty-http2/http2-client/src/test/java/org/eclipse/jetty/http2/client/ProxyProtocolTest.java", "insertions": 10, "deletions": 2}, {"lines": 62, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/ProxyConnectionFactory.java", "insertions": 34, "deletions": 28}], "commitDateTime": "2018-05-16 21:33:22", "spoonStatsSkippedReason": ""}], "title": "Incorrect parsing of PROXY protocol v2", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 9, "INS": 11, "UPD": 19, "MOV": 12, "TOT": 51, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 62, "insertions": 34, "gitFilesChange": 1, "deletions": 28}, "closed": "2018-05-16 19:33:44", "statsSkippedReason": "", "body": "branch: `jetty-9.4.x` HEAD\r\nos: OSX\r\njava: 9.0.4\r\n\r\n```\r\nRunning org.eclipse.jetty.http2.client.ProxyProtocolTest\r\n2018-05-16 07:30:49.817:INFO:oejs.Server:main: jetty-9.4.11-SNAPSHOT; built: 2018-05-16T12:14:20.818Z; git: 4cc8f4dcf6c64eade4d34b2456061a9b243f002b; jvm 9.0.4+11\r\n2018-05-16 07:30:49.819:INFO:oejs.AbstractConnector:main: Started ServerConnector@5cd701e4{proxy,[proxy, h2c]}{0.0.0.0:61611}\r\n2018-05-16 07:30:49.819:INFO:oejs.Server:main: Started @90098ms\r\n2018-05-16 07:30:49.840:INFO:oejs.AbstractConnector:main: Stopped ServerConnector@5cd701e4{proxy,[proxy, h2c]}{0.0.0.0:0}\r\n2018-05-16 07:30:49.842:INFO:oejs.Server:main: jetty-9.4.11-SNAPSHOT; built: 2018-05-16T12:14:20.818Z; git: 4cc8f4dcf6c64eade4d34b2456061a9b243f002b; jvm 9.0.4+11\r\n2018-05-16 07:30:49.846:INFO:oejs.AbstractConnector:main: Started ServerConnector@6fc7e828{proxy,[proxy, h2c]}{0.0.0.0:61613}\r\n2018-05-16 07:30:49.846:INFO:oejs.Server:main: Started @90126ms\r\n2018-05-16 07:30:49.851:WARN:oejs.ProxyConnectionFactory:qtp1247492326-1175: \r\njava.lang.ArrayIndexOutOfBoundsException: 5\r\n\tat org.eclipse.jetty.server.ProxyConnectionFactory$ProxyProtocolV2Connection.next(ProxyConnectionFactory.java:541)\r\n\tat org.eclipse.jetty.server.ProxyConnectionFactory$ProxyProtocolV2Connection.onFillable(ProxyConnectionFactory.java:446)\r\n\tat org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:281)\r\n\tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:102)\r\n\tat org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:118)\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.java:333)\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:310)\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:168)\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.produce(EatWhatYouKill.java:132)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:760)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:678)\r\n\tat java.base/java.lang.Thread.run(Thread.java:844)\r\n2018-05-16 07:30:49.854:INFO:oejs.AbstractConnector:main: Stopped ServerConnector@6fc7e828{proxy,[proxy, h2c]}{0.0.0.0:0}\r\n```", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.ProxyConnectionFactory.ProxyProtocolV2Connection.next()"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/2546"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 2, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug", "Microsoft Windows"], "user": "LG987234122", "filteredCommits": ["0c8b33e5816d4cdb0f96ab3aa96dfde3f587af4f"], "commits": {"0c8b33e5816d4cdb0f96ab3aa96dfde3f587af4f": {"commitUser": "sbordet", "commitGHEventType": "closed"}, "a557a844472e4cd2b77e8480a3b4dccca7ea6bd5": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "655395727828a1a8c8fdbf253ebb5a2ff3c11435": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "b46b8e73483e51b2832b7d87f839779eacb7c205": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2018-05-14 07:38:14", "commitsDetails": [{"commitMessage": "Fixes #2530 - Client waits forever for cancelled uploads.\n\nAfter discussion on openjdk/nio-dev, we now wakeup the selector\nafter closing a socket, so that the SelectionKey can be removed\nfrom the Selector and the TCP stack notified that the socket\nhas been really closed, so that it can send RST to clients.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["e03d16e59e6d73de4dfa5bb0d6d8afefa9909912"], "commitHash": "0c8b33e5816d4cdb0f96ab3aa96dfde3f587af4f", "commitSpoonAstDiffStats": [{"spoonFilePath": "ManagedSelector.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.SelectorWakeup", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.destroyEndPoint(org.eclipse.jetty.io.EndPoint)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "0c8b33e5816d4cdb0f96ab3aa96dfde3f587af4f tags/jetty-9.4.12.RC0~7^2~2", "commitUser": "sbordet", "authoredDateTime": "2018-07-09 10:02:45", "commitGHEventType": "closed", "commitGitStats": [{"lines": 20, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ManagedSelector.java", "insertions": 18, "deletions": 2}], "commitDateTime": "2018-07-09 10:02:45", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #2530 - Client waits forever for cancelled uploads.\n\nReworked implementation after review.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["655395727828a1a8c8fdbf253ebb5a2ff3c11435"], "commitHash": "a557a844472e4cd2b77e8480a3b4dccca7ea6bd5", "commitSpoonAstDiffStats": [{"spoonFilePath": "ManagedSelector.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.submit(org.eclipse.jetty.io.ManagedSelector$SelectorUpdate)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.SelectorWakeup", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.destroyEndPoint(org.eclipse.jetty.io.EndPoint)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.SelectorWakeup.update(java.nio.channels.Selector)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.SelectorWakeup.toString()", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 2, "TOT": 5}]}], "nameRev": "a557a844472e4cd2b77e8480a3b4dccca7ea6bd5 tags/jetty-9.4.12.RC0~7^2", "commitUser": "sbordet", "authoredDateTime": "2018-07-10 11:34:56", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 38, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ManagedSelector.java", "insertions": 21, "deletions": 17}], "commitDateTime": "2018-07-10 11:34:56", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #2530 - Client waits forever for cancelled uploads.\n\nAdded comment after review.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["0c8b33e5816d4cdb0f96ab3aa96dfde3f587af4f"], "commitHash": "655395727828a1a8c8fdbf253ebb5a2ff3c11435", "commitSpoonAstDiffStats": [{"spoonFilePath": "ManagedSelector.java", "spoonMethods": []}], "nameRev": "655395727828a1a8c8fdbf253ebb5a2ff3c11435 tags/jetty-9.4.12.RC0~7^2~1", "commitUser": "sbordet", "authoredDateTime": "2018-07-09 17:26:05", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 3, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ManagedSelector.java", "insertions": 3, "deletions": 0}], "commitDateTime": "2018-07-09 17:26:05", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #2705 from eclipse/jetty-9.4.x-2530-wakeup_selector_after_close\n\nFixes #2530 - Client waits forever for cancelled uploads.", "commitParents": ["842e3c850a53e42a96b9e47caa0f6888703f52c8", "a557a844472e4cd2b77e8480a3b4dccca7ea6bd5"], "commitHash": "b46b8e73483e51b2832b7d87f839779eacb7c205", "commitSpoonAstDiffStats": [{"spoonFilePath": "ManagedSelector.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.destroyEndPoint(org.eclipse.jetty.io.EndPoint)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.submit(org.eclipse.jetty.io.ManagedSelector$SelectorUpdate)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.wakeup()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "b46b8e73483e51b2832b7d87f839779eacb7c205 tags/jetty-9.4.12.RC0~7", "commitUser": "sbordet", "authoredDateTime": "2018-07-11 12:02:27", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 29, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ManagedSelector.java", "insertions": 26, "deletions": 3}], "commitDateTime": "2018-07-11 12:02:27", "spoonStatsSkippedReason": ""}], "title": "Client waits forever for cancelled large uploads", "spoonStatsSummary": {"spoonMethodsChanged": 3, "DEL": 0.0, "INS": 3.0, "UPD": 0.0, "MOV": 0.0, "TOT": 3.0, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 20, "insertions": 18, "gitFilesChange": 1, "deletions": 2}, "closed": "2018-07-11 10:02:33", "statsSkippedReason": "", "body": "The test below simply POSTs a payload of increasing size to a Jetty server. With Jetty 9.4.9+ the client waits forever once it reaches 64KB payload size. With Jetty 9.4.8 the client receives an EOF exception @ 32KB payload size.\r\n\r\nThe client is a Jetty HttpClient, though I've tried using HttpURLConnection also and the behaviour appears the same, so seems to be server related.\r\n\r\n[JettyIssueVersion_9_4_9.zip](https://github.com/eclipse/jetty.project/files/1999743/JettyIssueVersion_9_4_9.zip)\r\n", "changesInPackagesGIT": ["jetty-io/src/main/java/org/eclipse/jetty/io"], "changesInPackagesSPOON": ["org.eclipse.jetty.io.ManagedSelector", "org.eclipse.jetty.io.ManagedSelector.SelectorWakeup", "org.eclipse.jetty.io.ManagedSelector.destroyEndPoint(org.eclipse.jetty.io.EndPoint)"], "ttf": 58.000277777777775, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/2530"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 5, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 2}, "labels": ["Bug", "High Priority"], "user": "romrich", "filteredCommits": [], "commits": {"0a4d62c91d518e266e6ef2b2edd905a7f82693d7": {"commitUser": "sbordet", "commitGHEventType": "closed"}, "b7916f7ff19042347c8dda73a852ff5d4e7cadaa": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "951d6a5da4e1ff689611690474ed4f3bbb65403e": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "4f1dd352d621667f272ac46ce8fccc8d4bb6c507": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "abd232042bec0b37c75805ec772881cb336b7d71": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "4ce51c27c595f60807d88c257583e9e43acfad14": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "54e29acb827b7f781870e727aff2df355486477a": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2018-04-19 14:16:05", "commitsDetails": [{"commitMessage": "Issue #2468 - EWYK concurrent produce (#2477)\n\nFixes #2468 - EWYK concurrent production.\r\n\r\nFixed the case when a task throws an exception, which causes\r\nthe thread that ran the task to continue production, even\r\nwhen it should not.\r\n\r\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\r\n", "commitParents": ["c4e1e8f4541d853dc47822418b0c8be18cfe38ab"], "commitHash": "0a4d62c91d518e266e6ef2b2edd905a7f82693d7", "commitSpoonAstDiffStats": [{"spoonFilePath": "EatWhatYouKillTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.thread.EatWhatYouKillTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "QueuedThreadPool.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.thread.QueuedThreadPool.toString()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "EatWhatYouKill.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(boolean)", "DEL": 1, "INS": 4, "UPD": 6, "MOV": 2, "TOT": 13}, {"spoonMethodName": "org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.invokeTask(java.lang.Runnable)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(java.lang.Runnable)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(boolean)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.produceTask()", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}]}], "nameRev": "0a4d62c91d518e266e6ef2b2edd905a7f82693d7 tags/jetty-9.4.10.RC1~10", "commitUser": "sbordet", "authoredDateTime": "2018-04-25 17:59:58", "commitGHEventType": "closed", "commitGitStats": [{"lines": 142, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/thread/EatWhatYouKillTest.java", "insertions": 142, "deletions": 0}, {"lines": 119, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/thread/strategy/EatWhatYouKill.java", "insertions": 67, "deletions": 52}, {"lines": 5, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/thread/QueuedThreadPool.java", "insertions": 3, "deletions": 2}], "commitDateTime": "2018-04-25 17:59:58", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "b7916f7ff19042347c8dda73a852ff5d4e7cadaa", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "sbordet", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "951d6a5da4e1ff689611690474ed4f3bbb65403e", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "sbordet", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #2468 - Remove SoLinger. (#2644)\n\n* Issue #2468 - Remove SoLinger.\r\n\r\nFor non-blocking sockets, StandardSocketOptions#SO_LINGER javadocs\r\nreport that the behavior is undefined. In JDK 11 setting SoLinger\r\nfor non-blocking sockets will be ignored.\r\n\r\nAs such, there is no point in allowing SoLinger to be configured\r\nin Jetty that only uses non-blocking sockets.\r\n\r\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>", "commitParents": ["482e20739217b913da7971a94d16e9eaa2e3407b"], "commitHash": "4f1dd352d621667f272ac46ce8fccc8d4bb6c507", "commitSpoonAstDiffStats": [{"spoonFilePath": "StressTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.StressTest.doPaths(int,java.lang.String,boolean)", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "RequestURITest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.RequestURITest.newSocket(java.lang.String,int)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "IOTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.IOTest.testServerChannelInterrupt()", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.io.IOTest.testHalfCloseClientServer()", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.io.IOTest.testHalfCloseBadClient()", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "AbstractConnector.java", "spoonMethods": []}, {"spoonFilePath": "HttpServerTestFixture.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpServerTestFixture.newSocket(java.lang.String,int)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "JettyStopMojo.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.maven.plugin.JettyStopMojo.execute()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "SelectChannelServerSslTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ssl.SelectChannelServerSslTest.newSocket(java.lang.String,int)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "MavenServerConnector.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.maven.plugin.MavenServerConnector", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.maven.plugin.MavenServerConnector.setSoLingerTime(int)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.maven.plugin.MavenServerConnector.doStart()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpInputIntegrationTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.test.HttpInputIntegrationTest.H1Client.send(java.lang.String,int,java.lang.Boolean,int,java.util.List)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ServerConnector.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ServerConnector.configure(java.net.Socket)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ServerConnector.setSoLingerTime(int)", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.ServerConnector", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.ServerConnector.getSoLingerTime()", "DEL": 1, "INS": 2, "UPD": 1, "MOV": 0, "TOT": 4}]}], "nameRev": "4f1dd352d621667f272ac46ce8fccc8d4bb6c507 tags/jetty-9.4.12.RC0~33", "commitUser": "sbordet", "authoredDateTime": "2018-06-09 13:21:24", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 6, "filePath": "jetty-documentation/src/main/asciidoc/configuring/connectors/configuring-connectors.adoc", "insertions": 0, "deletions": 6}, {"lines": 2, "filePath": "jetty-documentation/src/main/asciidoc/development/maven/jetty-maven-plugin.adoc", "insertions": 0, "deletions": 2}, {"lines": 1, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/HttpServerTestFixture.java", "insertions": 0, "deletions": 1}, {"lines": 3, "filePath": "jetty-maven-plugin/src/main/java/org/eclipse/jetty/maven/plugin/JettyStopMojo.java", "insertions": 0, "deletions": 3}, {"lines": 10, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/StressTest.java", "insertions": 4, "deletions": 6}, {"lines": 1, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/RequestURITest.java", "insertions": 0, "deletions": 1}, {"lines": 1, "filePath": "jetty-server/src/main/config/etc/jetty-ssl.xml", "insertions": 0, "deletions": 1}, {"lines": 1, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ssl/SelectChannelServerSslTest.java", "insertions": 0, "deletions": 1}, {"lines": 3, "filePath": "jetty-maven-plugin/src/it/jetty-run-forked-mojo-it/postbuild.groovy", "insertions": 1, "deletions": 2}, {"lines": 1, "filePath": "jetty-maven-plugin/src/it/jetty-run-distro-mojo-it/postbuild.groovy", "insertions": 0, "deletions": 1}, {"lines": 1, "filePath": "jetty-server/src/main/config/etc/jetty-http.xml", "insertions": 0, "deletions": 1}, {"lines": 7, "filePath": "jetty-documentation/src/main/asciidoc/quick-start/configuring/how-to-configure.adoc", "insertions": 0, "deletions": 7}, {"lines": 1, "filePath": "jetty-osgi/test-jetty-osgi/src/test/config/etc/jetty-ssl.xml", "insertions": 0, "deletions": 1}, {"lines": 6, "filePath": "jetty-io/src/test/java/org/eclipse/jetty/io/IOTest.java", "insertions": 0, "deletions": 6}, {"lines": 2, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/AbstractConnector.java", "insertions": 1, "deletions": 1}, {"lines": 3, "filePath": "jetty-server/src/main/config/modules/http.mod", "insertions": 0, "deletions": 3}, {"lines": 13, "filePath": "jetty-maven-plugin/src/main/java/org/eclipse/jetty/maven/plugin/MavenServerConnector.java", "insertions": 7, "deletions": 6}, {"lines": 3, "filePath": "jetty-server/src/main/config/modules/ssl.mod", "insertions": 0, "deletions": 3}, {"lines": 7, "filePath": "tests/test-integration/src/test/java/org/eclipse/jetty/test/HttpInputIntegrationTest.java", "insertions": 3, "deletions": 4}, {"lines": 1, "filePath": "jetty-maven-plugin/src/it/jetty-cdi-run-forked/postbuild.groovy", "insertions": 0, "deletions": 1}, {"lines": 28, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/ServerConnector.java", "insertions": 13, "deletions": 15}], "commitDateTime": "2018-06-09 13:21:24", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "abd232042bec0b37c75805ec772881cb336b7d71", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "sbordet", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "4ce51c27c595f60807d88c257583e9e43acfad14", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "sbordet", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "54e29acb827b7f781870e727aff2df355486477a", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "sbordet", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "EWYK concurrent produce can fail SSL connections", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2018-06-11 17:10:41", "statsSkippedReason": "", "body": "I'm using jetty server in the version 9.4.9.v20180320.\r\nFor some reasons after load tests some HTTPS connections can't be established:\r\n`C:\\>openssl s_client -connect localhost:9443\r\nWARNING: can't open config file: /etc/ssl/openssl.cnf\r\nCONNECTED(00000228)\r\n`\r\nAs you can see I've got a TCP connection, but without SSL handshake.\r\n\r\nMy system environment: Windows 10 x64, JRE v1.8_162s\r\n\r\n[threaddump_1.txt](https://github.com/eclipse/jetty.project/files/1928452/threaddump_1.txt)\r\n[threaddump_2.txt](https://github.com/eclipse/jetty.project/files/1928453/threaddump_2.txt)\r\n", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 53.000277777777775, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/2468"}, {"labels": ["Bug", "Test"], "closed": "2018-04-05 21:46:42", "body": "From jenkins build using jdk8 of the branch associated with https://github.com/eclipse/jetty.project/pull/2408\r\n\r\n```\r\nError\r\nShould only have 1 open session\r\nExpected: a string containing \"openSessions.size=1\\n\"\r\nbut: was \"openSessions.size=2\r\n[0] WebSocketSession[websocket=JettyListenerEventDriver[org.eclipse.jetty.websocket.server.WebSocketCloseTest$ContainerSocket],behavior=SERVER,connection=WebSocketServerConnection@e015dc6a[ios=IOState@7aa94026[OPEN,in,out],f=Flusher@7e96cbab[queueSize=0,aggregateSize=0,terminated=null],g=Generator[SERVER,validating],p=Parser@3b944a1d[ExtensionStack,s=START,c=0,len=0,f=null]]<-SocketChannelEndPoint@46332d41{/127.0.0.1:44470<->/127.0.0.1:44749,OPEN,fill=FI,flush=-,to=5/300000}{io=1/1,kio=1,kro=1}->WebSocketServerConnection@e015dc6a[ios=IOState@7aa94026[OPEN,in,out],f=Flusher@7e96cbab[queueSize=0,aggregateSize=0,terminated=null],g=Generator[SERVER,validating],p=Parser@3b944a1d[ExtensionStack,s=START,c=0,len=0,f=null]],remote=WebSocketRemoteEndpoint@3a7d5dcc[batching=true],incoming=JettyListenerEventDriver[org.eclipse.jetty.websocket.server.WebSocketCloseTest$ContainerSocket],outgoing=ExtensionStack[queueSize=0,extensions=[],incoming=org.eclipse.jetty.websocket.common.WebSocketSession,outgoing=org.eclipse.jetty.websocket.server.WebSocketServerConnection]]\r\n[1] WebSocketSession[websocket=JettyListenerEventDriver[org.eclipse.jetty.websocket.server.WebSocketCloseTest$ContainerSocket],behavior=SERVER,connection=WebSocketServerConnection@e015dc70[ios=IOState@ae592d5[OPEN,in,out],f=Flusher@42e6dbb1[queueSize=0,aggregateSize=0,terminated=null],g=Generator[SERVER,validating],p=Parser@5bbbb552[ExtensionStack,s=START,c=0,len=12,f=TEXT[len=0,fin=true,rsv=...,masked=true]]]<-SocketChannelEndPoint@316c5d7b{/127.0.0.1:44476<->/127.0.0.1:44749,OPEN,fill=-,flush=-,to=1/300000}{io=0/0,kio=0,kro=1}->WebSocketServerConnection@e015dc70[ios=IOState@ae592d5[OPEN,in,out],f=Flusher@42e6dbb1[queueSize=0,aggregateSize=0,terminated=null],g=Generator[SERVER,validating],p=Parser@5bbbb552[ExtensionStack,s=START,c=0,len=12,f=TEXT[len=0,fin=true,rsv=...,masked=true]]],remote=WebSocketRemoteEndpoint@b7800d4[batching=true],incoming=JettyListenerEventDriver[org.eclipse.jetty.websocket.server.WebSocketCloseTest$ContainerSocket],outgoing=ExtensionStack[queueSize=0,extensions=[],incoming=org.eclipse.jetty.websocket.common.WebSocketSession,outgoing=org.eclipse.jetty.websocket.server.WebSocketServerConnection]]\r\n\"\r\nStacktrace\r\njava.lang.AssertionError:\r\nShould only have 1 open session\r\nExpected: a string containing \"openSessions.size=1\\n\"\r\nbut: was \"openSessions.size=2\r\n[0] WebSocketSession[websocket=JettyListenerEventDriver[org.eclipse.jetty.websocket.server.WebSocketCloseTest$ContainerSocket],behavior=SERVER,connection=WebSocketServerConnection@e015dc6a[ios=IOState@7aa94026[OPEN,in,out],f=Flusher@7e96cbab[queueSize=0,aggregateSize=0,terminated=null],g=Generator[SERVER,validating],p=Parser@3b944a1d[ExtensionStack,s=START,c=0,len=0,f=null]]<-SocketChannelEndPoint@46332d41{/127.0.0.1:44470<->/127.0.0.1:44749,OPEN,fill=FI,flush=-,to=5/300000}{io=1/1,kio=1,kro=1}->WebSocketServerConnection@e015dc6a[ios=IOState@7aa94026[OPEN,in,out],f=Flusher@7e96cbab[queueSize=0,aggregateSize=0,terminated=null],g=Generator[SERVER,validating],p=Parser@3b944a1d[ExtensionStack,s=START,c=0,len=0,f=null]],remote=WebSocketRemoteEndpoint@3a7d5dcc[batching=true],incoming=JettyListenerEventDriver[org.eclipse.jetty.websocket.server.WebSocketCloseTest$ContainerSocket],outgoing=ExtensionStack[queueSize=0,extensions=[],incoming=org.eclipse.jetty.websocket.common.WebSocketSession,outgoing=org.eclipse.jetty.websocket.server.WebSocketServerConnection]]\r\n[1] WebSocketSession[websocket=JettyListenerEventDriver[org.eclipse.jetty.websocket.server.WebSocketCloseTest$ContainerSocket],behavior=SERVER,connection=WebSocketServerConnection@e015dc70[ios=IOState@ae592d5[OPEN,in,out],f=Flusher@42e6dbb1[queueSize=0,aggregateSize=0,terminated=null],g=Generator[SERVER,validating],p=Parser@5bbbb552[ExtensionStack,s=START,c=0,len=12,f=TEXT[len=0,fin=true,rsv=...,masked=true]]]<-SocketChannelEndPoint@316c5d7b{/127.0.0.1:44476<->/127.0.0.1:44749,OPEN,fill=-,flush=-,to=1/300000}{io=0/0,kio=0,kro=1}->WebSocketServerConnection@e015dc70[ios=IOState@ae592d5[OPEN,in,out],f=Flusher@42e6dbb1[queueSize=0,aggregateSize=0,terminated=null],g=Generator[SERVER,validating],p=Parser@5bbbb552[ExtensionStack,s=START,c=0,len=12,f=TEXT[len=0,fin=true,rsv=...,masked=true]]],remote=WebSocketRemoteEndpoint@b7800d4[batching=true],incoming=JettyListenerEventDriver[org.eclipse.jetty.websocket.server.WebSocketCloseTest$ContainerSocket],outgoing=ExtensionStack[queueSize=0,extensions=[],incoming=org.eclipse.jetty.websocket.common.WebSocketSession,outgoing=org.eclipse.jetty.websocket.server.WebSocketServerConnection]]\r\n\"\r\nat org.eclipse.jetty.websocket.server.WebSocketCloseTest.testOpenSessionCleanup(WebSocketCloseTest.java:329)\r\nStandard Error\r\n2018-04-04 07:37:37.224:WARN:oejwc.WebSocketSession:qtp456577608-249:\r\njava.lang.RuntimeException: Intentional FastFail\r\nat org.eclipse.jetty.websocket.server.WebSocketCloseTest$FastFailSocket.onWebSocketConnect(WebSocketCloseTest.java:196)\r\nat org.eclipse.jetty.websocket.common.events.JettyListenerEventDriver.onConnect(JettyListenerEventDriver.java:106)\r\nat org.eclipse.jetty.websocket.common.events.AbstractEventDriver.openSession(AbstractEventDriver.java:233)\r\nat org.eclipse.jetty.websocket.common.WebSocketSession.open(WebSocketSession.java:616)\r\nat org.eclipse.jetty.websocket.common.WebSocketSession.onOpened(WebSocketSession.java:544)\r\nat org.eclipse.jetty.io.AbstractConnection.onOpen(AbstractConnection.java:202)\r\nat org.eclipse.jetty.websocket.common.io.AbstractWebSocketConnection.onOpen(AbstractWebSocketConnection.java:446)\r\nat org.eclipse.jetty.io.AbstractEndPoint.upgrade(AbstractEndPoint.java:440)\r\nat org.eclipse.jetty.server.HttpConnection.onCompleted(HttpConnection.java:385)\r\nat org.eclipse.jetty.server.HttpChannel.onCompleted(HttpChannel.java:702)\r\nat org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:498)\r\nat org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:260)\r\nat org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:281)\r\nat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:102)\r\nat org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:118)\r\nat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:754)\r\nat org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:672)\r\nat java.lang.Thread.run(Thread.java:748)\r\n```", "commits": {}, "title": "Websocket intermittent test failure", "created": "2018-04-05 03:54:52", "user": "janbartel", "url": "https://github.com/eclipse/jetty.project/issues/2415", "commitsDetails": [], "ttf": 0.0002777777777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "n-kristev", "filteredCommits": [], "commits": {"6c9881726ddac1467a5aeed7863871c67302324d": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "09bfb77e5fdac357cd47df742cce3d1674a0f0b3": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2018-04-04 12:34:11", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "6c9881726ddac1467a5aeed7863871c67302324d", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #2409 Ensure no duplicate config classes in osgi (#2416)\n\nSigned-off-by: Jan Bartel <janb@webtide.com>", "commitParents": ["be3c5a08d0dc4875afcfac8948b73cba8b838dea"], "commitHash": "09bfb77e5fdac357cd47df742cce3d1674a0f0b3", "commitSpoonAstDiffStats": [{"spoonFilePath": "AbstractWebAppProvider.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.osgi.boot.AbstractWebAppProvider.getConfigurationClasses()", "DEL": 2, "INS": 2, "UPD": 0, "MOV": 1, "TOT": 5}]}], "nameRev": "09bfb77e5fdac357cd47df742cce3d1674a0f0b3 tags/jetty-9.4.10.RC0~12", "commitUser": "janbartel", "authoredDateTime": "2018-04-06 09:18:47", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 13, "filePath": "jetty-osgi/jetty-osgi-boot/src/main/java/org/eclipse/jetty/osgi/boot/AbstractWebAppProvider.java", "insertions": 9, "deletions": 4}], "commitDateTime": "2018-04-06 09:18:47", "spoonStatsSkippedReason": ""}], "title": "Ensure no duplicate config classes are assigned to WebApps in OSGi environments ", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2018-04-05 23:21:53", "statsSkippedReason": "", "body": "Hello,\r\n\r\nI am trying to run Jetty 9.4.9.v20180320 as described in https://www.eclipse.org/jetty/documentation/current/framework-jetty-osgi.html on an OSGi container. For all web applications (apart from the default Jetty one), I got errors similar to the following:\r\n\r\n```\r\n    Failed startup of context o.e.j.w.WebAppContext@11011cd{\r\n    /XXXX,file:///var/volatile/tmp/jetty-0.0.0.0-80-XXXX-,UNAVAILABLE}{file:/YYYY.jar}\r\n\r\njavax.naming.NameAlreadyBoundException: env\r\nat org.eclipse.jetty.jndi.NamingContext.createSubcontext(NamingContext.java:355)\r\nat org.eclipse.jetty.jndi.NamingContext.createSubcontext(NamingContext.java:420)\r\nat org.eclipse.jetty.plus.webapp.EnvConfiguration.createEnvContext(EnvConfiguration.java:258)\r\nat org.eclipse.jetty.plus.webapp.EnvConfiguration.preConfigure(EnvConfiguration.java:67)\r\nat org.eclipse.jetty.webapp.WebAppContext.preConfigure(WebAppContext.java:506)\r\nat org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:544)\r\nat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\nat org.eclipse.jetty.deploy.bindings.StandardStarter.processBinding(StandardStarter.java:46)\r\n```\r\nI have installed both JNDI and Annotation bundles. I tracked the cause to the following code in \r\norg.eclipse.jetty.osgi.boot.AbstractWebAppProvider:\r\n```java\r\n    public String[] getConfigurationClasses()\r\n    {\r\n        if (_configurationClasses != null)\r\n            return _configurationClasses;\r\n\r\n        Configuration.ClassList defaults = Configuration.ClassList.serverDefault(_serverWrapper.getServer());\r\n\r\n        //add before JettyWebXmlConfiguration\r\n        if (annotationsAvailable())\r\n            defaults.addBefore(\"org.eclipse.jetty.webapp.JettyWebXmlConfiguration\", \r\n                               \"org.eclipse.jetty.osgi.annotations.AnnotationConfiguration\");\r\n\r\n        //add in EnvConfiguration and PlusConfiguration just after FragmentConfiguration\r\n        if (jndiAvailable())\r\n            defaults.addAfter(\"org.eclipse.jetty.webapp.FragmentConfiguration\",\r\n                              \"org.eclipse.jetty.plus.webapp.EnvConfiguration\",\r\n                              \"org.eclipse.jetty.plus.webapp.PlusConfiguration\");\r\n       String[] asArray = new String[defaults.size()];\r\n       return defaults.toArray(asArray);\r\n    }\r\n```\r\nSince  ```Configuration.ClassList.serverDefault(_serverWrapper.getServer()); ``` returns a list which already contains org.eclipse.jetty.plus.webapp.EnvConfiguration, later in ```org.eclipse.jetty.webapp.WebAppContext.preConfigure``` the call to ```EnvConfiguration.preconfigure``` is executed twice, which causes the error.", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 1.0002777777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/2409"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "sbordet", "filteredCommits": ["ef48bc6f581124fcc83c5908d28df735a2bd3bd6", "56fc71a54afc6798580d5f7023d2b5cdc6a4f07b", "a28ec963d15719b32d62baa1c1c771bbf0864fd1"], "commits": {"ef48bc6f581124fcc83c5908d28df735a2bd3bd6": {"commitUser": "sbordet", "commitGHEventType": "closed"}, "56fc71a54afc6798580d5f7023d2b5cdc6a4f07b": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "a28ec963d15719b32d62baa1c1c771bbf0864fd1": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2018-03-27 22:36:07", "commitsDetails": [{"commitMessage": "Fixes #2388 - AtomicBiInteger.compareAndSet(long,int,int) not using encoded parameter.\n\nFixed method, added Javadocs and cleaned up code with a few renamings\nto better comply with AtomicLong naming.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["68215069853fb4c1d14f564cfdae6548b92ec468"], "commitHash": "ef48bc6f581124fcc83c5908d28df735a2bd3bd6", "commitSpoonAstDiffStats": [{"spoonFilePath": "AtomicBiInteger.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.AtomicBiInteger.encodeLo(long,int)", "DEL": 3, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.util.AtomicBiInteger.update(int,int)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.AtomicBiInteger.setHi(int)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.AtomicBiInteger.compareAndSetLo(int,int)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.AtomicBiInteger.updateHi(int)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.AtomicBiInteger.compareAndSetHi(int,int)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.AtomicBiInteger.setLo(int)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.AtomicBiInteger.updateLo(int)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.AtomicBiInteger.encodeHi(long,int)", "DEL": 3, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.util.AtomicBiInteger.compareAndSet(long,int,int)", "DEL": 1, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.AtomicBiInteger.encode(int,int)", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 3}]}, {"spoonFilePath": "AtomicBiIntegerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.AtomicBiIntegerTest.testSet()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "AbstractConnectionPool.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.AbstractConnectionPool.removed(org.eclipse.jetty.client.api.Connection)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.AbstractConnectionPool.tryCreate(int).1.succeeded(org.eclipse.jetty.client.api.Connection)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.AbstractConnectionPool.tryCreate(int).1.failed(java.lang.Throwable)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "ef48bc6f581124fcc83c5908d28df735a2bd3bd6 tags/jetty-9.4.10.RC0~35", "commitUser": "sbordet", "authoredDateTime": "2018-03-28 00:37:21", "commitGHEventType": "closed", "commitGitStats": [{"lines": 6, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/AbstractConnectionPool.java", "insertions": 3, "deletions": 3}, {"lines": 12, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/AtomicBiIntegerTest.java", "insertions": 7, "deletions": 5}, {"lines": 166, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/AtomicBiInteger.java", "insertions": 80, "deletions": 86}], "commitDateTime": "2018-03-28 00:37:21", "spoonStatsSkippedReason": ""}, {"commitMessage": "fix sign extension #2388\n\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\n", "commitParents": ["ef48bc6f581124fcc83c5908d28df735a2bd3bd6"], "commitHash": "56fc71a54afc6798580d5f7023d2b5cdc6a4f07b", "commitSpoonAstDiffStats": [{"spoonFilePath": "AtomicBiInteger.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.AtomicBiInteger.encodeLo(long,int)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.AtomicBiInteger.encodeHi(long,int)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}]}], "nameRev": "56fc71a54afc6798580d5f7023d2b5cdc6a4f07b tags/jetty-9.4.10.RC0~34", "commitUser": "gregw", "authoredDateTime": "2018-03-28 11:05:49", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 4, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/AtomicBiInteger.java", "insertions": 2, "deletions": 2}], "commitDateTime": "2018-03-28 11:05:49", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #2388 - AtomicBiInteger.compareAndSet(long,int,int) not using encoded parameter.\n\nUsing capital 'L' for long literals to avoid confusion with '1'.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["8cf15659be0b41d89ac335c91059d8d17b413cdd"], "commitHash": "a28ec963d15719b32d62baa1c1c771bbf0864fd1", "commitSpoonAstDiffStats": [{"spoonFilePath": "AtomicBiInteger.java", "spoonMethods": []}], "nameRev": "a28ec963d15719b32d62baa1c1c771bbf0864fd1 tags/jetty-9.4.10.RC0~32", "commitUser": "sbordet", "authoredDateTime": "2018-03-28 11:36:50", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 4, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/AtomicBiInteger.java", "insertions": 2, "deletions": 2}], "commitDateTime": "2018-03-28 11:36:50", "spoonStatsSkippedReason": ""}], "title": "AtomicBiInteger.compareAndSet(long,int,int) not using encoded parameter", "spoonStatsSummary": {"spoonMethodsChanged": 14, "DEL": 11.0, "INS": 4.0, "UPD": 13.0, "MOV": 3.0, "TOT": 31.0, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 180, "insertions": 87, "gitFilesChange": 2, "deletions": 93}, "closed": "2018-03-28 00:06:20", "statsSkippedReason": "", "body": "The first parameter was not used.", "changesInPackagesGIT": ["jetty-util/src/main/java/org/eclipse/jetty/util", "jetty-client/src/main/java/org/eclipse/jetty/client"], "changesInPackagesSPOON": ["org.eclipse.jetty.util.AtomicBiInteger.update(int,int)", "org.eclipse.jetty.client.AbstractConnectionPool.tryCreate(int).1.failed(java.lang.Throwable)", "org.eclipse.jetty.util.AtomicBiInteger.encodeHi(long,int)", "org.eclipse.jetty.client.AbstractConnectionPool.removed(org.eclipse.jetty.client.api.Connection)", "org.eclipse.jetty.util.AtomicBiInteger.compareAndSetHi(int,int)", "org.eclipse.jetty.util.AtomicBiInteger.compareAndSet(long,int,int)", "org.eclipse.jetty.util.AtomicBiInteger.encode(int,int)", "org.eclipse.jetty.util.AtomicBiInteger.updateHi(int)", "org.eclipse.jetty.util.AtomicBiInteger.setHi(int)", "org.eclipse.jetty.util.AtomicBiInteger.compareAndSetLo(int,int)", "org.eclipse.jetty.util.AtomicBiInteger.updateLo(int)", "org.eclipse.jetty.client.AbstractConnectionPool.tryCreate(int).1.succeeded(org.eclipse.jetty.client.api.Connection)", "org.eclipse.jetty.util.AtomicBiInteger.encodeLo(long,int)", "org.eclipse.jetty.util.AtomicBiInteger.setLo(int)"], "ttf": 0.0002777777777777778, "numCommits": 3, "url": "https://github.com/eclipse/jetty.project/issues/2388"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["c5d4897a5f352a0f5112710b9c6f1fcf39ff645b"], "commits": {"9147e408c871cc06feeddf49bd794dab4db347a1": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "c5d4897a5f352a0f5112710b9c6f1fcf39ff645b": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2018-03-27 20:43:40", "commitsDetails": [{"commitMessage": "Merge pull request #2392 from eclipse/jetty-9.4.x-issue-2387-uriutils-jarfile\n\nIssue #2387 - fixing URIUtil.equalsIgnoreEncoding() with jar:file:// uris", "commitParents": ["c41b6b7aab9aabc6496a961a49bb083645c38ede", "c5d4897a5f352a0f5112710b9c6f1fcf39ff645b"], "commitHash": "9147e408c871cc06feeddf49bd794dab4db347a1", "commitSpoonAstDiffStats": [{"spoonFilePath": "URIUtil.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.URIUtil.equalsIgnoreEncodings(java.net.URI,java.net.URI)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "URIUtilTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.URIUtilTest.testEqualsIgnoreEncoding_JarFile()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.URIUtilTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "9147e408c871cc06feeddf49bd794dab4db347a1 tags/jetty-9.4.10.RC0~18", "commitUser": "joakime", "authoredDateTime": "2018-04-04 06:16:35", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 12, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/URIUtil.java", "insertions": 10, "deletions": 2}, {"lines": 28, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/URIUtilTest.java", "insertions": 17, "deletions": 11}], "commitDateTime": "2018-04-04 06:16:35", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #2387 - fixing URIUtil.equalsIgnoreEncoding() with jar:file:// uris\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["68215069853fb4c1d14f564cfdae6548b92ec468"], "commitHash": "c5d4897a5f352a0f5112710b9c6f1fcf39ff645b", "commitSpoonAstDiffStats": [{"spoonFilePath": "URIUtil.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.URIUtil.equalsIgnoreEncodings(java.net.URI,java.net.URI)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "URIUtilTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.URIUtilTest.testEqualsIgnoreEncoding_JarFile()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.URIUtilTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "c5d4897a5f352a0f5112710b9c6f1fcf39ff645b tags/jetty-9.4.10.RC0~18^2", "commitUser": "joakime", "authoredDateTime": "2018-03-28 10:48:28", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 12, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/URIUtil.java", "insertions": 10, "deletions": 2}, {"lines": 28, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/URIUtilTest.java", "insertions": 17, "deletions": 11}], "commitDateTime": "2018-03-28 10:48:28", "spoonStatsSkippedReason": ""}], "title": "NPE in URIUtil.equalsIgnoreEncodings when working with jar:file:// URIs", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 12, "insertions": 10, "gitFilesChange": 1, "deletions": 2}, "closed": "2018-04-05 15:46:26", "statsSkippedReason": "", "body": "If you have 2 URIs\r\n\r\n* `uriA` is `jar:file://path/to/main.jar!/META-INF/versions/`\r\n* `uriB` is `jar:file://path/to/main.jar!/META-INF/versions`\r\n\r\nThen the call to `URIUtil.equalsIgnoreEncodings(URI, URI)` will cause a NPE.\r\n\r\nThis is because both of those URIs return null for `URI.getPath()`.\r\nIf the scheme is `jar` the SchemeSpecificPart should be evaluated again as a URI and then the `URI.getPath()` is valid.\r\n", "changesInPackagesGIT": ["jetty-util/src/main/java/org/eclipse/jetty/util"], "changesInPackagesSPOON": ["org.eclipse.jetty.util.URIUtil.equalsIgnoreEncodings(java.net.URI,java.net.URI)"], "ttf": 8.000277777777777, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/2387"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "arokhmistrov", "filteredCommits": ["9c68b141ba692256681bd205550117bed6bbf8fd"], "commits": {"50ca9d87d8f25c24a74e91d07baca85670d961c4": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "9c68b141ba692256681bd205550117bed6bbf8fd": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2018-03-20 13:38:31", "commitsDetails": [{"commitMessage": "Merge pull request #2362 from eclipse/jetty-9.4.x-issue-2361-cachingwebappclassloader-fix\n\nIssue #2361 - CachingWebAppClassLoader is not using cache properly", "commitParents": ["91e28eae619d9be1ff05f9324166d3a56bb4852f", "9c68b141ba692256681bd205550117bed6bbf8fd"], "commitHash": "50ca9d87d8f25c24a74e91d07baca85670d961c4", "commitSpoonAstDiffStats": [{"spoonFilePath": "CachingWebAppClassLoader.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.CachingWebAppClassLoader.getResource(java.lang.String)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "50ca9d87d8f25c24a74e91d07baca85670d961c4 tags/jetty-9.4.10.RC0~48", "commitUser": "joakime", "authoredDateTime": "2018-03-20 16:40:57", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 9, "filePath": "jetty-webapp/src/main/java/org/eclipse/jetty/webapp/CachingWebAppClassLoader.java", "insertions": 6, "deletions": 3}], "commitDateTime": "2018-03-20 16:40:57", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #2361 - CachingWebAppClassLoader using cache properly\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["afd067771937bd46eb72bbd2c4d27956e0874386"], "commitHash": "9c68b141ba692256681bd205550117bed6bbf8fd", "commitSpoonAstDiffStats": [{"spoonFilePath": "CachingWebAppClassLoader.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.CachingWebAppClassLoader.getResource(java.lang.String)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "9c68b141ba692256681bd205550117bed6bbf8fd tags/jetty-9.4.10.RC0~48^2", "commitUser": "joakime", "authoredDateTime": "2018-03-20 09:30:31", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 9, "filePath": "jetty-webapp/src/main/java/org/eclipse/jetty/webapp/CachingWebAppClassLoader.java", "insertions": 6, "deletions": 3}], "commitDateTime": "2018-03-20 09:30:31", "spoonStatsSkippedReason": ""}], "title": "CachingWebAppClassLoader is not using cache properly", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 9, "insertions": 6, "gitFilesChange": 1, "deletions": 3}, "closed": "2018-03-20 21:41:38", "statsSkippedReason": "", "body": "It seems there should be `if (url==null)` on line 68.\r\nhttps://github.com/eclipse/jetty.project/blob/afd067771937bd46eb72bbd2c4d27956e0874386/jetty-webapp/src/main/java/org/eclipse/jetty/webapp/CachingWebAppClassLoader.java#L65-L71", "changesInPackagesGIT": ["jetty-webapp/src/main/java/org/eclipse/jetty/webapp"], "changesInPackagesSPOON": ["org.eclipse.jetty.webapp.CachingWebAppClassLoader.getResource(java.lang.String)"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/2361"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "brettkail-wk", "filteredCommits": ["44d718417ae4ea5d768122bb447f4fd59e12b91f", "4cc8f4dcf6c64eade4d34b2456061a9b243f002b"], "commits": {"4cc8f4dcf6c64eade4d34b2456061a9b243f002b": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "44d718417ae4ea5d768122bb447f4fd59e12b91f": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2018-03-16 20:09:26", "commitsDetails": [{"commitMessage": "Issue #2346 Revert stack logging\n\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\n", "commitParents": ["820b5752d7207fc0ed5294d13887780f7b28a48c"], "commitHash": "4cc8f4dcf6c64eade4d34b2456061a9b243f002b", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpChannel.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannel.handleException(java.lang.Throwable)", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 5, "TOT": 8}]}], "nameRev": "4cc8f4dcf6c64eade4d34b2456061a9b243f002b tags/jetty-9.4.11.v20180605~38^2~12", "commitUser": "gregw", "authoredDateTime": "2018-05-16 17:21:06", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 4, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannel.java", "insertions": 2, "deletions": 2}], "commitDateTime": "2018-05-16 17:21:06", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixing #2346 - missing exception stacktrace\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["e7b411b90d60fb44cd6037ad09e22f7133bdab92"], "commitHash": "44d718417ae4ea5d768122bb447f4fd59e12b91f", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpChannel.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannel.handleException(java.lang.Throwable)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "44d718417ae4ea5d768122bb447f4fd59e12b91f tags/jetty-9.4.9.v20180320~13", "commitUser": "joakime", "authoredDateTime": "2018-03-16 15:27:37", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannel.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2018-03-16 15:27:37", "spoonStatsSkippedReason": ""}], "title": "Revert stack trace logging for HTTPChannel.onException", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 2, "INS": 2, "UPD": 0, "MOV": 5, "TOT": 9, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 6, "insertions": 3, "gitFilesChange": 1, "deletions": 3}, "closed": "2018-05-16 07:23:49", "statsSkippedReason": "", "body": "Similar to #1696, exceptions from `HTTPChannel.onException` are mishandled.  As in that ticket, I also believe this is a bug in `JettyAwareLogger.log` and should be fixed there rather than in the callers: `MessageFormatter.arrayFormat` [removes](https://github.com/qos-ch/slf4j/blob/9b536f4259adf2f01852e86306a3a2d7e4a238c0/slf4j-api/src/main/java/org/slf4j/helpers/MessageFormatter.java#L168-L171) the last argument if it is `Throwable` and does not include the message or stack trace in `getMessage`.  Instead, the `Throwable` is returned via `FormattingTuple.getThrowable`, so `log` should at least be doing:\r\n```\r\n_logger.log(marker, FQCN, level, ft.getMessage(), null, ft.getThrowable());\r\n```\r\n\r\nThis improves the output to include a stack trace:\r\n```\r\n2018-03-16 14:59:29,450 WARN [qtp2053996178-20] o.e.j.s.HttpChannel [HttpChannel.java:564] /test {}\r\njava.io.IOException: test\r\n\tat ...\r\n```\r\n\r\nHowever, you'll see it does include a stray `{}` since the argument.  This could be ignored, or it could be fixed by removing `{}` if present and `getThrowable()` returns non-null.", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.HttpChannel.handleException(java.lang.Throwable)"], "ttf": 60.000277777777775, "numCommits": 2, "url": "https://github.com/eclipse/jetty.project/issues/2346"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 2, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug", "Documentation"], "user": "joakime", "filteredCommits": [], "commits": {"9606ad46abf45e3f2f0687f97b6d4ddf1db2bb91": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "b24c6ce68df96778b8f6b728178fe05ac91bf5e9": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "912af623457542cd691e7ef1e4e06269f5620612": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2018-03-15 14:46:32", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "9606ad46abf45e3f2f0687f97b6d4ddf1db2bb91", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #2340 ServletContext cleanup (#4307)\n\n* Issue #2340 ServletContext cleanup\r\n\r\nA minor cleanup of the ServletContext implementation classes.\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n\r\n* Issue #2340 ServletContext cleanup\r\n\r\ncleanup after review\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n", "commitParents": ["89a4f924112b4cb3c7983a57f80a6aea456bcca1"], "commitHash": "b24c6ce68df96778b8f6b728178fe05ac91bf5e9", "commitSpoonAstDiffStats": [{"spoonFilePath": "WebAppContext.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.WebAppContext.setConfigurationClasses(java.util.List)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.webapp.WebAppContext.setDisplayName(java.lang.String)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.webapp.WebAppContext.setClassLoader(java.lang.ClassLoader)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.webapp.WebAppContext.doStart()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.webapp.WebAppContext.stopContext()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.webapp.WebAppContext.dump(java.lang.Appendable,java.lang.String)", "DEL": 2, "INS": 6, "UPD": 0, "MOV": 2, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.webapp.WebAppContext.getResource(java.lang.String)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.webapp.WebAppContext.getConfigurations()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.webapp.WebAppContext.getConfigurationClasses()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "ServletHolder.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.ServletHolder.getPackageOfJspClass(java.lang.String)", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletHolder.initJspServlet()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletHolder.newInstance()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ListenerHolder.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.ListenerHolder.doStart()", "DEL": 0, "INS": 0, "UPD": 4, "MOV": 0, "TOT": 4}]}, {"spoonFilePath": "FilterHolder.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.FilterHolder.initialize()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ServletContextHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.ServletContextHandler.Context.createFilter(java.lang.Class)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletContextHandler.JspConfig.toString()", "DEL": 2, "INS": 4, "UPD": 2, "MOV": 2, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletContextHandler.newSecurityHandler()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletContextHandler.JspConfig.getTaglibs()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletContextHandler.JspConfig.getJspPropertyGroups()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletContextHandler.Context.createListener(java.lang.Class)", "DEL": 1, "INS": 0, "UPD": 2, "MOV": 2, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletContextHandler.Context.createServlet(java.lang.Class)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletContextHandler.JspPropertyGroup.toString()", "DEL": 11, "INS": 13, "UPD": 2, "MOV": 20, "TOT": 46}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletContextHandler.relinkHandlers()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ContextHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.setAliasChecks(java.util.List)", "DEL": 2, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.addAliasCheck(org.eclipse.jetty.server.handler.ContextHandler$AliasCheck)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.getServerInfo()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.createInstance(java.lang.Class)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.Context.getContext(java.lang.String)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.doScope(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 3, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.Context.createListener(java.lang.Class)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.createFilter(java.lang.Class)", "DEL": 1, "INS": 0, "UPD": 1, "MOV": 3, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.createListener(java.lang.Class)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 2, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.StaticContext", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.clearAliasChecks()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.Context.createInstance(java.lang.Class)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.StaticContext.createServlet(java.lang.Class)", "DEL": 3, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.Context.getClassLoader()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.checkAlias(java.lang.String,org.eclipse.jetty.util.resource.Resource)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.getEventListeners()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.doStop()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}]}], "nameRev": "b24c6ce68df96778b8f6b728178fe05ac91bf5e9 tags/jetty-9.4.23.v20191118~17", "commitUser": "gregw", "authoredDateTime": "2019-11-14 11:52:03", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 105, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletContextHandler.java", "insertions": 32, "deletions": 73}, {"lines": 31, "filePath": "jetty-webapp/src/main/java/org/eclipse/jetty/webapp/WebAppContext.java", "insertions": 16, "deletions": 15}, {"lines": 6, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/FilterHolder.java", "insertions": 3, "deletions": 3}, {"lines": 6, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ListenerHolder.java", "insertions": 3, "deletions": 3}, {"lines": 113, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/ContextHandler.java", "insertions": 50, "deletions": 63}, {"lines": 15, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletHolder.java", "insertions": 7, "deletions": 8}], "commitDateTime": "2019-11-14 11:52:03", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "912af623457542cd691e7ef1e4e06269f5620612", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "Remove raw ServletHandler usage examples from documentation", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2019-11-14 01:00:30", "statsSkippedReason": "", "body": "We have a few pieces of documentation that show usage of `ServletHandler` directly.\r\n\r\nWhile this is a valid configuration and setup, it's highly confusing for people that actually read/use/reference the documentation.\r\n(ServletHandler is bare, has no listeners, no webapp, no ServletContext, etc.. it's *extremely* limited in functionality)\r\nBecause of \"Servlet\" in the name, the assumption is that its a servlet, with everything that a servlet can do. (RequestDispatcher, sendError, AsyncContext, Filtered via a Filter, Annotations, @MultipartConfig, etc)\r\nThis is a very common assumption found on the mailing lists and on stackoverflow.\r\n\r\nThe direct usage of `ServletHandler` shouldn't be demonstrated or encouraged in our documentation or embedded examples.\r\n\r\nWe should encourage usage of the more normal `ServletContextHandler` or `WebAppContext` or even the more fundamental jetty `Handler`.\r\n\r\nOne such usage: https://www.eclipse.org/jetty/documentation/9.4.x/embedded-examples.html#embedded-minimal-servlet", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 608.0002777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/2340"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "aJanuary", "filteredCommits": ["d3120ee2122f4ed6984e0193552049b7a93810f0", "dcfa6f0f380f5545c4e48ae3f70bae4e0ee6b0a3"], "commits": {"dcfa6f0f380f5545c4e48ae3f70bae4e0ee6b0a3": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "f34f23f20f266547307d4b7e9b1c004889246b1a": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "d3120ee2122f4ed6984e0193552049b7a93810f0": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2018-03-08 19:20:12", "commitsDetails": [{"commitMessage": "Issue #2307 - applying changes from review\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["d3120ee2122f4ed6984e0193552049b7a93810f0"], "commitHash": "dcfa6f0f380f5545c4e48ae3f70bae4e0ee6b0a3", "commitSpoonAstDiffStats": [{"spoonFilePath": "Response.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Response.sendError(int,java.lang.String)", "DEL": 3, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 5}]}], "nameRev": "dcfa6f0f380f5545c4e48ae3f70bae4e0ee6b0a3 tags/jetty-9.4.9.v20180320~34^2~3^2", "commitUser": "joakime", "authoredDateTime": "2018-03-12 17:33:58", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 5, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Response.java", "insertions": 2, "deletions": 3}], "commitDateTime": "2018-03-12 17:34:12", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #2320 from eclipse/jetty-9.4.x-issue-2307-null-charencoding\n\nIssue #2307 - On sendError() the response character encoding is null", "commitParents": ["faf5a54ca6a4c00d6574373ee5193ac46f5bbffd", "dcfa6f0f380f5545c4e48ae3f70bae4e0ee6b0a3"], "commitHash": "f34f23f20f266547307d4b7e9b1c004889246b1a", "commitSpoonAstDiffStats": [{"spoonFilePath": "Response.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Response.sendError(int,java.lang.String)", "DEL": 2, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 4}]}, {"spoonFilePath": "ErrorHandlerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest.test404UnAccept()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest.before()", "DEL": 7, "INS": 2, "UPD": 0, "MOV": 1, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest.test404HtmlAcceptNotUtf8Charset()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest.test404HtmlAccept()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest.test404PreferJson()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest.test404NoAccept()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest.test404HtmlAcceptUtf8Charset()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest.after()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest.test404HtmlAcceptAnyCharset()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest.test404HtmlAcceptNotUtf8UnknownCharset()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest.test404AllAccept()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest.test404PreferHtml()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest.testCharEncoding()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest.test404HtmlAcceptUnknownUtf8Charset()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest.test404EmptyAccept()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest.before().1.generateAcceptableResponse(org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse,int,java.lang.String,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "f34f23f20f266547307d4b7e9b1c004889246b1a tags/jetty-9.4.9.v20180320~34^2~3", "commitUser": "joakime", "authoredDateTime": "2018-03-13 18:56:18", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 62, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ErrorHandlerTest.java", "insertions": 50, "deletions": 12}, {"lines": 4, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Response.java", "insertions": 2, "deletions": 2}], "commitDateTime": "2018-03-13 18:56:18", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #2307 - On sendError() the response character encoding is null\n\n+ Added testcase to replicate\n+ Making character encoding from unset during sendError\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["eaefc6a9c219c70bac827001f2127c8ab689d26f"], "commitHash": "d3120ee2122f4ed6984e0193552049b7a93810f0", "commitSpoonAstDiffStats": [{"spoonFilePath": "Response.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Response.sendError(int,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ErrorHandlerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest.test404UnAccept()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest.before()", "DEL": 7, "INS": 2, "UPD": 0, "MOV": 1, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest.test404HtmlAcceptNotUtf8Charset()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest.test404HtmlAccept()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest.test404PreferJson()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest.test404NoAccept()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest.test404HtmlAcceptUtf8Charset()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest.after()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest.test404HtmlAcceptAnyCharset()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest.test404HtmlAcceptNotUtf8UnknownCharset()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest.test404AllAccept()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest.test404PreferHtml()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest.testCharEncoding()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest.test404HtmlAcceptUnknownUtf8Charset()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest.test404EmptyAccept()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ErrorHandlerTest.before().1.generateAcceptableResponse(org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse,int,java.lang.String,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "d3120ee2122f4ed6984e0193552049b7a93810f0 tags/jetty-9.4.9.v20180320~34^2~3^2~1", "commitUser": "joakime", "authoredDateTime": "2018-03-12 14:29:10", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 62, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ErrorHandlerTest.java", "insertions": 50, "deletions": 12}, {"lines": 1, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Response.java", "insertions": 1, "deletions": 0}], "commitDateTime": "2018-03-12 14:29:36", "spoonStatsSkippedReason": ""}], "title": "Error page can have null charset in content type", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 3, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 6, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 6, "insertions": 3, "gitFilesChange": 1, "deletions": 3}, "closed": "2018-03-13 23:57:18", "statsSkippedReason": "", "body": "It is possible for the charset part of the content type to be null (e.g. `text/html;charset=null`) for an error page handler. The way I have managed to recreate it is to have an `ErrorPagehandler`, and in the error handler set the content type, and then use `getOutputStream()` instead of `getWriter()` to write the output.\r\n\r\nThis is causing us problems when Spring tries to parse the mime type, leading to error pages not sending any response.\r\n\r\n```\r\n2018-03-08 10:51:33,568 WARN  qtp493944943-29 [org.eclipse.jetty.server.handler.ErrorHandler] EXCEPTION \r\norg.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.http.InvalidMediaTypeException: Invalid mime type \"text/html;charset=null\": unsupported charset 'null'\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:986) ~[spring-webmvc-5.0.3.RELEASE.jar:5.0.3.RELEASE]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:870) ~[spring-webmvc-5.0.3.RELEASE.jar:5.0.3.RELEASE]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:687) ~[javax.servlet-api-3.1.0.jar:3.1.0]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855) ~[spring-webmvc-5.0.3.RELEASE.jar:5.0.3.RELEASE]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:790) ~[javax.servlet-api-3.1.0.jar:3.1.0]\r\n\tat org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:860) ~[jetty-servlet-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1650) ~[jetty-servlet-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101) ~[spring-web-5.0.3.RELEASE.jar:5.0.3.RELEASE]\r\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1637) ~[jetty-servlet-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.servlets.CrossOriginFilter.handle(CrossOriginFilter.java:308) ~[jetty-servlets-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.servlets.CrossOriginFilter.doFilter(CrossOriginFilter.java:262) ~[jetty-servlets-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1637) ~[jetty-servlet-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.apache.logging.log4j.web.Log4jServletFilter.doFilter(Log4jServletFilter.java:64) ~[log4j-web-2.10.0.jar:2.10.0]\r\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1637) ~[jetty-servlet-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:533) ~[jetty-servlet-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143) ~[jetty-server-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:566) ~[jetty-security-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132) ~[jetty-server-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:190) ~[jetty-server-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1595) ~[jetty-server-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:188) ~[jetty-server-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1253) ~[jetty-server-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:168) ~[jetty-server-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:473) ~[jetty-servlet-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1564) ~[jetty-server-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:166) ~[jetty-server-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1155) ~[jetty-server-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141) ~[jetty-server-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.server.Dispatcher.forward(Dispatcher.java:203) ~[jetty-server-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.server.Dispatcher.error(Dispatcher.java:81) ~[jetty-server-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.server.handler.ErrorHandler.doError(ErrorHandler.java:119) [jetty-server-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.server.handler.ErrorHandler.handle(ErrorHandler.java:78) [jetty-server-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.server.Response.sendError(Response.java:655) [jetty-server-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.server.Response.sendError(Response.java:590) [jetty-server-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:442) [spring-webmvc-5.0.3.RELEASE.jar:5.0.3.RELEASE]\r\n\tat org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:53) [spring-webmvc-5.0.3.RELEASE.jar:5.0.3.RELEASE]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991) [spring-webmvc-5.0.3.RELEASE.jar:5.0.3.RELEASE]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925) [spring-webmvc-5.0.3.RELEASE.jar:5.0.3.RELEASE]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978) [spring-webmvc-5.0.3.RELEASE.jar:5.0.3.RELEASE]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:870) [spring-webmvc-5.0.3.RELEASE.jar:5.0.3.RELEASE]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:687) [javax.servlet-api-3.1.0.jar:3.1.0]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855) [spring-webmvc-5.0.3.RELEASE.jar:5.0.3.RELEASE]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:790) [javax.servlet-api-3.1.0.jar:3.1.0]\r\n\tat org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:860) [jetty-servlet-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1650) [jetty-servlet-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) [spring-web-5.0.3.RELEASE.jar:5.0.3.RELEASE]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-5.0.3.RELEASE.jar:5.0.3.RELEASE]\r\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1637) [jetty-servlet-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.servlets.CrossOriginFilter.handle(CrossOriginFilter.java:308) [jetty-servlets-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.servlets.CrossOriginFilter.doFilter(CrossOriginFilter.java:262) [jetty-servlets-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1629) [jetty-servlet-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.apache.logging.log4j.web.Log4jServletFilter.doFilter(Log4jServletFilter.java:71) [log4j-web-2.10.0.jar:2.10.0]\r\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1637) [jetty-servlet-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:533) [jetty-servlet-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143) [jetty-server-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:548) [jetty-security-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132) [jetty-server-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:190) [jetty-server-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1595) [jetty-server-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:188) [jetty-server-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1253) [jetty-server-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:168) [jetty-server-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:473) [jetty-servlet-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1564) [jetty-server-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:166) [jetty-server-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1155) [jetty-server-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141) [jetty-server-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:219) [jetty-server-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:126) [jetty-server-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132) [jetty-server-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.server.Server.handle(Server.java:530) [jetty-server-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:347) [jetty-server-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:256) [jetty-server-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:279) [jetty-io-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:102) [jetty-io-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:124) [jetty-io-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:247) [jetty-util-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.produce(EatWhatYouKill.java:140) [jetty-util-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:131) [jetty-util-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:382) [jetty-util-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:708) [jetty-util-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:626) [jetty-util-9.4.8.v20171121.jar:9.4.8.v20171121]\r\n\tat java.lang.Thread.run(Thread.java:748) [?:1.8.0_144]\r\nCaused by: org.springframework.http.InvalidMediaTypeException: Invalid mime type \"text/html;charset=null\": unsupported charset 'null'\r\n\tat org.springframework.http.MediaType.parseMediaType(MediaType.java:512) ~[spring-web-5.0.3.RELEASE.jar:5.0.3.RELEASE]\r\n\tat org.springframework.http.HttpHeaders.getContentType(HttpHeaders.java:864) ~[spring-web-5.0.3.RELEASE.jar:5.0.3.RELEASE]\r\n\tat org.springframework.http.converter.AbstractHttpMessageConverter.addDefaultHeaders(AbstractHttpMessageConverter.java:243) ~[spring-web-5.0.3.RELEASE.jar:5.0.3.RELEASE]\r\n\tat org.springframework.http.converter.AbstractHttpMessageConverter.write(AbstractHttpMessageConverter.java:208) ~[spring-web-5.0.3.RELEASE.jar:5.0.3.RELEASE]\r\n\tat org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:487) ~[spring-webmvc-5.0.3.RELEASE.jar:5.0.3.RELEASE]\r\n\tat org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:53) ~[spring-webmvc-5.0.3.RELEASE.jar:5.0.3.RELEASE]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991) ~[spring-webmvc-5.0.3.RELEASE.jar:5.0.3.RELEASE]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925) ~[spring-webmvc-5.0.3.RELEASE.jar:5.0.3.RELEASE]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978) ~[spring-webmvc-5.0.3.RELEASE.jar:5.0.3.RELEASE]\r\n\t... 82 more\r\nCaused by: org.springframework.util.InvalidMimeTypeException: Invalid mime type \"text/html;charset=null\": unsupported charset 'null'\r\n\tat org.springframework.util.MimeTypeUtils.parseMimeType(MimeTypeUtils.java:240) ~[spring-core-5.0.3.RELEASE.jar:5.0.3.RELEASE]\r\n\tat org.springframework.http.MediaType.parseMediaType(MediaType.java:509) ~[spring-web-5.0.3.RELEASE.jar:5.0.3.RELEASE]\r\n\tat org.springframework.http.HttpHeaders.getContentType(HttpHeaders.java:864) ~[spring-web-5.0.3.RELEASE.jar:5.0.3.RELEASE]\r\n\tat org.springframework.http.converter.AbstractHttpMessageConverter.addDefaultHeaders(AbstractHttpMessageConverter.java:243) ~[spring-web-5.0.3.RELEASE.jar:5.0.3.RELEASE]\r\n\tat org.springframework.http.converter.AbstractHttpMessageConverter.write(AbstractHttpMessageConverter.java:208) ~[spring-web-5.0.3.RELEASE.jar:5.0.3.RELEASE]\r\n\tat org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:487) ~[spring-webmvc-5.0.3.RELEASE.jar:5.0.3.RELEASE]\r\n\tat org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:53) ~[spring-webmvc-5.0.3.RELEASE.jar:5.0.3.RELEASE]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991) ~[spring-webmvc-5.0.3.RELEASE.jar:5.0.3.RELEASE]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925) ~[spring-webmvc-5.0.3.RELEASE.jar:5.0.3.RELEASE]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978) ~[spring-webmvc-5.0.3.RELEASE.jar:5.0.3.RELEASE]\r\n\t... 82 more\r\n```\r\n\r\nI have attached a [minimal test case](https://github.com/eclipse/jetty.project/files/1794417/NullEncodingInContentTypeTestServer.txt). It sets the character encoding, then forces an error mapped by `ErrorPageErrorHandler`. This sets the content type, which tries to append the character encoding, but it has been nulled out.\r\n\r\nI believe this is happening because `org.eclipse.jetty.server.Response` uses `_encodingFrom` to keep track of whether the value in `_characterEncoding` has not been set, has been explicitly set, or has been set from inference. The code in `setContentType` makes the reasonable assumption that if `_encodingFrom` is set to `SET_CHARACTER_ENCODING` then `_characterEncoding` cannot possibly be null. However, `sendError` resets `_characterEncoding` to null without also resetting `_encodingFrom` to `NOT_SET`. All of the specific things needed to trigger the bug - using `ErrorPageErrorHandler` and `getOutputStream()` instead of `getWriter()` - are needed to weave around any code paths that set `_characterEncoding` to something else after it has been cleared.", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.Response.sendError(int,java.lang.String)"], "ttf": 5.000277777777778, "numCommits": 2, "url": "https://github.com/eclipse/jetty.project/issues/2307"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "sbordet", "filteredCommits": ["b71cd70bf74df78084a22bd903673b6323c6e1a9"], "commits": {"b71cd70bf74df78084a22bd903673b6323c6e1a9": {"commitUser": "sbordet", "commitGHEventType": "closed"}}, "created": "2018-03-07 09:35:12", "commitsDetails": [{"commitMessage": "Fixes #2297 - HTTP/2 client transport should honor HttpClient.connectBlocking.\n\nIntroduced property connectBlocking in HTTP2Client so that it can\nbe forwarded by HttpClient and then used for HTTP/2 connects.\n\nAlso introduced HTTP2Client.bindAddress, again forwarded from HttpClient.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["74055b983705b34b30af0908cb4343f29ffa68f3"], "commitHash": "b71cd70bf74df78084a22bd903673b6323c6e1a9", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpClientTransportOverHTTP2.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.client.http.HttpClientTransportOverHTTP2.connect(java.net.InetSocketAddress,java.util.Map)", "DEL": 1, "INS": 5, "UPD": 0, "MOV": 1, "TOT": 7}]}, {"spoonFilePath": "HTTP2Client.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.client.HTTP2Client.getBindAddress()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.client.HTTP2Client", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.http2.client.HTTP2Client.connect(org.eclipse.jetty.util.ssl.SslContextFactory,java.net.InetSocketAddress,org.eclipse.jetty.http2.api.Session$Listener,org.eclipse.jetty.util.Promise,java.util.Map)", "DEL": 0, "INS": 5, "UPD": 0, "MOV": 2, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.http2.client.HTTP2Client.setBindAddress(java.net.SocketAddress)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.client.HTTP2Client.isConnectBlocking()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.client.HTTP2Client.setConnectBlocking(boolean)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AbstractConnectorHttpClientTransport.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.AbstractConnectorHttpClientTransport.connect(java.net.InetSocketAddress,java.util.Map)", "DEL": 1, "INS": 3, "UPD": 0, "MOV": 2, "TOT": 6}]}], "nameRev": "b71cd70bf74df78084a22bd903673b6323c6e1a9 tags/jetty-9.4.9.v20180320~50", "commitUser": "sbordet", "authoredDateTime": "2018-03-07 11:52:28", "commitGHEventType": "closed", "commitGitStats": [{"lines": 41, "filePath": "jetty-http2/http2-client/src/main/java/org/eclipse/jetty/http2/client/HTTP2Client.java", "insertions": 39, "deletions": 2}, {"lines": 11, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/AbstractConnectorHttpClientTransport.java", "insertions": 6, "deletions": 5}, {"lines": 7, "filePath": "jetty-http2/http2-http-client-transport/src/main/java/org/eclipse/jetty/http2/client/http/HttpClientTransportOverHTTP2.java", "insertions": 5, "deletions": 2}], "commitDateTime": "2018-03-07 11:52:28", "spoonStatsSkippedReason": ""}], "title": "HTTP/2 client transport should honor HttpClient.connectBlocking", "spoonStatsSummary": {"spoonMethodsChanged": 8, "DEL": 2, "INS": 19, "UPD": 0, "MOV": 5, "TOT": 26, "spoonFilesChanged": 3}, "gitStatsSummary": {"lines": 59, "insertions": 50, "gitFilesChange": 3, "deletions": 9}, "closed": "2018-03-07 10:52:49", "statsSkippedReason": "", "body": "`HttpClient.connectBlocking` controls whether the TCP connects should be blocking or not.\r\nWhile this is respected for the HTTP/1.1 client transport, it is not for the HTTP/2 client transport.", "changesInPackagesGIT": ["jetty-client/src/main/java/org/eclipse/jetty/client", "jetty-http2/http2-client/src/main/java/org/eclipse/jetty/http2/client", "jetty-http2/http2-http-client-transport/src/main/java/org/eclipse/jetty/http2/client"], "changesInPackagesSPOON": ["org.eclipse.jetty.http2.client.HTTP2Client.getBindAddress()", "org.eclipse.jetty.client.AbstractConnectorHttpClientTransport.connect(java.net.InetSocketAddress,java.util.Map)", "org.eclipse.jetty.http2.client.HTTP2Client.setConnectBlocking(boolean)", "org.eclipse.jetty.http2.client.HTTP2Client.connect(org.eclipse.jetty.util.ssl.SslContextFactory,java.net.InetSocketAddress,org.eclipse.jetty.http2.api.Session$Listener,org.eclipse.jetty.util.Promise,java.util.Map)", "org.eclipse.jetty.http2.client.HTTP2Client.setBindAddress(java.net.SocketAddress)", "org.eclipse.jetty.http2.client.HTTP2Client", "org.eclipse.jetty.http2.client.http.HttpClientTransportOverHTTP2.connect(java.net.InetSocketAddress,java.util.Map)", "org.eclipse.jetty.http2.client.HTTP2Client.isConnectBlocking()"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/2297"}, {"labels": ["Bug"], "closed": "2019-12-03 02:11:53", "body": "Issue #2164 fixed a bunch of OSGI ServiceLoader configuration.\r\nEnsure that the `jetty-10.0.x-websocket` branch is also updated when settled.\r\n\r\nExample configuration.\r\n``` xml\r\n      <plugin>\r\n        <groupId>org.apache.felix</groupId>\r\n        <artifactId>maven-bundle-plugin</artifactId>\r\n        <extensions>true</extensions>\r\n            <configuration>\r\n              <instructions>\r\n                <Require-Capability>osgi.extender; filter:=\"(osgi.extender=osgi.serviceloader.registrar)\"</Require-Capability>\r\n                <Provide-Capability>osgi.serviceloader;osgi.serviceloader=org.eclipse.jetty.websocket.api.extensions.Extension</Provide-Capability>\r\n                <_nouses>true</_nouses>\r\n              </instructions>\r\n            </configuration>\r\n      </plugin>\r\n```", "commits": {}, "title": "WebSocket 10 refactor needs proper OSGi ServiceLoader configuration in poms", "created": "2018-03-06 16:12:19", "user": "joakime", "url": "https://github.com/eclipse/jetty.project/issues/2289", "commitsDetails": [], "ttf": 636.0002777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 4, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "tm2git", "filteredCommits": [], "commits": {"edd1ffc60f2a80d5f2fa1783429e140432fcd468": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "a128b87e3a3245fcf3c4f54483110bc9d68d8192": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "90a7b6b2628aa8073df8b77022a02c7fe18204c0": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "0a85de90a3591503ed57eaeb9d674df374c2c68b": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "ad3533188924faa1557344b6e1c94b0126570cb8": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2018-03-04 04:41:13", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "edd1ffc60f2a80d5f2fa1783429e140432fcd468", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Jetty 9.4.x #2279 start update params (#2285)\n\nJetty 9.4.x #2279 start update params (#2285):\r\n* Cleanup and Unify param update logic #2279\r\n* Cleanup system property source #2279\r\n* Cleanup property source #2279\r\n* Property cleanup for #2279\r\n* Removed duplicate Prop and Property classes\r\n* properties are only updated/set if value source is not from ?=\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n", "commitParents": ["bcb9fa3b320cf95e86bdc3b0353eeb100b252420"], "commitHash": "a128b87e3a3245fcf3c4f54483110bc9d68d8192", "commitSpoonAstDiffStats": [{"spoonFilePath": "StartArgs.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.start.StartArgs.processAndSetProperty(java.lang.String,java.lang.String,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.start.StartArgs.hasSystemProperties()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.start.StartArgs.processProperty(java.lang.String,java.lang.String,java.lang.String,java.util.function.Function)", "DEL": 3, "INS": 0, "UPD": 6, "MOV": 13, "TOT": 22}, {"spoonMethodName": "org.eclipse.jetty.start.StartArgs.processSystemProperty(java.lang.String,java.lang.String,java.lang.String)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.start.StartArgs", "DEL": 1, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.start.StartArgs.dumpProperties()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.start.StartArgs.Property", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.start.StartArgs.dumpSystemProperties()", "DEL": 0, "INS": 2, "UPD": 3, "MOV": 3, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.start.StartArgs.expandSystemProperties()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.start.StartArgs.getMainArgs(boolean)", "DEL": 2, "INS": 1, "UPD": 3, "MOV": 2, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.start.StartArgs.parse(java.lang.String,java.lang.String)", "DEL": 3, "INS": 1, "UPD": 4, "MOV": 8, "TOT": 16}, {"spoonMethodName": "org.eclipse.jetty.start.StartArgs.ensureSystemPropertySet(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 7, "MOV": 5, "TOT": 13}, {"spoonMethodName": "org.eclipse.jetty.start.StartArgs.dumpSystemProperty(java.lang.String)", "DEL": 1, "INS": 2, "UPD": 3, "MOV": 4, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.start.StartArgs.addSystemProperty(java.lang.String,java.lang.String)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 2, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.start.StartArgs.Property.toString()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.start.StartArgs.dumpProperty(java.lang.String)", "DEL": 1, "INS": 0, "UPD": 1, "MOV": 2, "TOT": 4}]}, {"spoonFilePath": "StartIni.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.start.StartIni.update(org.eclipse.jetty.start.BaseHome,org.eclipse.jetty.start.Props)", "DEL": 2, "INS": 7, "UPD": 0, "MOV": 14, "TOT": 23}]}, {"spoonFilePath": "PropsTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.start.PropsTest.testOverride()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.start.PropsTest.testBasic()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.start.PropsTest.testSystemPropsOnly()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.start.PropsTest.assertProp(java.lang.String,org.eclipse.jetty.start.Props.Prop,java.lang.String,java.lang.String,java.lang.String)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "Module.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.start.Module.writeIniSection(java.io.BufferedWriter,org.eclipse.jetty.start.Props)", "DEL": 1, "INS": 3, "UPD": 1, "MOV": 2, "TOT": 7}]}, {"spoonFilePath": "Props.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.start.Props.Prop", "DEL": 2, "INS": 0, "UPD": 4, "MOV": 0, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.start.Props.setProperty(java.lang.String,java.lang.String,java.lang.String)", "DEL": 4, "INS": 0, "UPD": 0, "MOV": 2, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.start.Props.Prop.toString()", "DEL": 2, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 4}]}, {"spoonFilePath": "Main.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.start.Main.start(org.eclipse.jetty.start.StartArgs)", "DEL": 5, "INS": 1, "UPD": 0, "MOV": 3, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.start.Main.doStop(org.eclipse.jetty.start.StartArgs)", "DEL": 0, "INS": 0, "UPD": 4, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.start.Main.processCommandLine(java.lang.String[])", "DEL": 0, "INS": 0, "UPD": 4, "MOV": 0, "TOT": 4}]}, {"spoonFilePath": "ConfigurationAssert.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.start.ConfigurationAssert.assertConfiguration(org.eclipse.jetty.start.BaseHome,org.eclipse.jetty.start.StartArgs,java.lang.String,java.io.File)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "a128b87e3a3245fcf3c4f54483110bc9d68d8192 tags/jetty-9.4.9.v20180320~54", "commitUser": "gregw", "authoredDateTime": "2018-03-07 16:33:28", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 23, "filePath": "jetty-start/src/test/java/org/eclipse/jetty/start/PropsTest.java", "insertions": 1, "deletions": 22}, {"lines": 3, "filePath": "jetty-start/src/test/resources/usecases/parameterized.update.assert.txt", "insertions": 2, "deletions": 1}, {"lines": 1, "filePath": "jetty-start/src/test/resources/usecases/parameterized.update.prepare.txt", "insertions": 1, "deletions": 0}, {"lines": 2, "filePath": "jetty-start/src/test/java/org/eclipse/jetty/start/ConfigurationAssert.java", "insertions": 1, "deletions": 1}, {"lines": 1, "filePath": "jetty-start/src/test/resources/usecases/parameterized.addToStart.assert.txt", "insertions": 1, "deletions": 0}, {"lines": 31, "filePath": "jetty-start/src/main/java/org/eclipse/jetty/start/StartIni.java", "insertions": 26, "deletions": 5}, {"lines": 36, "filePath": "jetty-start/src/main/java/org/eclipse/jetty/start/Main.java", "insertions": 9, "deletions": 27}, {"lines": 1, "filePath": "jetty-start/src/test/resources/usecases/parameterized.commands.assert.txt", "insertions": 1, "deletions": 0}, {"lines": 153, "filePath": "jetty-start/src/main/java/org/eclipse/jetty/start/StartArgs.java", "insertions": 67, "deletions": 86}, {"lines": 3, "filePath": "jetty-start/src/test/resources/usecases/parameterized/modules/parameterized.mod", "insertions": 3, "deletions": 0}, {"lines": 6, "filePath": "jetty-start/src/main/java/org/eclipse/jetty/start/Module.java", "insertions": 4, "deletions": 2}, {"lines": 31, "filePath": "jetty-start/src/main/java/org/eclipse/jetty/start/Props.java", "insertions": 6, "deletions": 25}], "commitDateTime": "2018-03-07 16:33:28", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "90a7b6b2628aa8073df8b77022a02c7fe18204c0", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "0a85de90a3591503ed57eaeb9d674df374c2c68b", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "ad3533188924faa1557344b6e1c94b0126570cb8", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "Jetty 9.4.x start.jar:  \"?=\" in [ini] defeats Issue #1139 functionality", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2018-03-13 02:27:54", "statsSkippedReason": "", "body": "Consider these (admittedly not very realistic) jetty-start arguments:\r\n\r\n`--add-to-start=session-store-jdbc  db-connection-type=driver`\r\n\r\nI believe the expected behaviour is that session-store-jdbc.ini should be created with the property setting from the module's ini-template (db-connection-type=datasource) should be replaced by the value specified on the command line.\r\n\r\nJetty 9.4.0 does behave that way.\r\n\r\nBut more recent versions (e.g. 9.4.8) don't;  instead the newly created .ini file just ends up with the value from the ini-template.\r\n\r\nAnother way to see this is to edit jetty-start/src/test/resources/usecases/parameterized/modules/parameterized.mod and add an extra line to the [ini] section:  `name0?=value0` (the exact value doesn't matter, even \"changed0\" would have the same effect).\r\n\r\nWith Jetty 9.4.0 that modified test still passes;  with more recent versions it doesn't.\r\n\r\nThis is caused by an interaction between the logic in Module.writeIniSection() and the current implementation of \"?=\" handling in the StartArgs.processProperty() method.\r\n\r\nIf I change the code in StartArgs.processProperty() for the `if (preset!=null)` path to just `return null;` then the (modified) test passes again.\r\n\r\n(All the callers of StartArgs.processProperty() clearly expect that the method may return null, but the current implementation of the method always returns a new Property instance, even for \"?=\").\r\n\r\n\r\nNo, I wasn't actually trying to use session-store-jdbc.mod (nor session-store-cache.mod / session-store-mongo.mod, which exhibit the same issue), but they are convenient examples in the standard Jetty distro that illustrate a problem I ran into while developing a custom module.\r\n\r\nFor now the only workaround I have thought of (other than omitting default property assignments from [ini] sections) is to invoke jetty-start twice, first for --add-to-start and second for --update-ini with the property overrides.  For my vile purposes that's a good enough workaround for now.\r\n", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 8.000277777777777, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/2279"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug", "Java 9"], "user": "gregw", "filteredCommits": ["5aaf8b4a5e48d9b4c34e633401b8138a3f452717"], "commits": {"5aaf8b4a5e48d9b4c34e633401b8138a3f452717": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2018-02-26 06:42:24", "commitsDetails": [{"commitMessage": "Ignore SSLException wrapping SocketException #2244\n\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\n", "commitParents": ["1a84a8d12981bd87850a457bef0d2968ed9d6009"], "commitHash": "5aaf8b4a5e48d9b4c34e633401b8138a3f452717", "commitSpoonAstDiffStats": [{"spoonFilePath": "SelectChannelServerSslTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ssl.SelectChannelServerSslTest.testFullMethod()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "5aaf8b4a5e48d9b4c34e633401b8138a3f452717 tags/jetty-9.4.9.v20180320~90^2~1", "commitUser": "gregw", "authoredDateTime": "2018-02-26 17:45:25", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 9, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ssl/SelectChannelServerSslTest.java", "insertions": 9, "deletions": 0}], "commitDateTime": "2018-02-26 17:45:25", "spoonStatsSkippedReason": ""}], "title": "Closing SSL after error response", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0, "insertions": 0, "gitFilesChange": 0, "deletions": 0}, "closed": "2018-03-20 18:19:11", "statsSkippedReason": "", "body": "Test `SelectChannelServerSslTest.testFullMethod` frequently fails (often on CI: https://jenkins.webtide.net/job/jetty.project/job/jetty-9.4.x/1261/)\r\n\r\nHowever, suspect that this might not be a flaky test, rather a problem in how we are closing SSL connections.  Note that we are already catching and ignoring SocketExceptions with the message \"Close overtook 400 response\", which appears contrary to the whole reason for a gracefull SSL close handshake.\r\n\r\nThis test is failing because the SocketException is being wrapped by a SSLException. We could also ignore SSLException, but I think we need to investigate why we are getting the exception in the first place!\r\n", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 22.00027777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/2244"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 4, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 2}, "labels": ["Bug"], "user": "janbartel", "filteredCommits": ["1e8422935cf087835687cac996ffcfe665bf08df", "17f518ffb19d781718da61ccea30bcaf2e689a44", "df012bb0a349554b479430688e3a58b19013090b"], "commits": {"137d6d81bf8821b341a42ce97a4ee52c6069be07": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "5e1676e2a7cd52aa44147f72b45e7eb5ceed4170": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "df012bb0a349554b479430688e3a58b19013090b": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "3a84781251ee6b20d3b359bb402294aad54ff22e": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "1e8422935cf087835687cac996ffcfe665bf08df": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "0e88849a683d066b499ab76920ae6f2f9ddb62d5": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "c316cf1cfe08db1628e5d80d4183e082b7056aab": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "9eceba014c35303cfc92e7835d617136aeed81da": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "17f518ffb19d781718da61ccea30bcaf2e689a44": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2018-01-30 12:15:26", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "137d6d81bf8821b341a42ce97a4ee52c6069be07", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "5e1676e2a7cd52aa44147f72b45e7eb5ceed4170", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #2164 correct manifest headers for ServiceLoader use in osgi\n\nSigned-off-by: Jan Bartel <janb@webtide.com>\n", "commitParents": ["3ae713f2d4a311536657f349b0ac4714c086ba53"], "commitHash": "df012bb0a349554b479430688e3a58b19013090b", "commitSpoonAstDiffStats": [], "nameRev": "df012bb0a349554b479430688e3a58b19013090b tags/jetty-9.4.9.v20180320~125", "commitUser": "janbartel", "authoredDateTime": "2018-01-30 17:25:17", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 10, "filePath": "jetty-xml/pom.xml", "insertions": 10, "deletions": 0}, {"lines": 11, "filePath": "jetty-spring/pom.xml", "insertions": 11, "deletions": 0}, {"lines": 10, "filePath": "jetty-util/pom.xml", "insertions": 10, "deletions": 0}], "commitDateTime": "2018-02-20 16:28:39", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "3a84781251ee6b20d3b359bb402294aad54ff22e", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #2164 Add test for javax.websocket in osgi\n\nSigned-off-by: Jan Bartel <janb@webtide.com>\n", "commitParents": ["17f518ffb19d781718da61ccea30bcaf2e689a44"], "commitHash": "1e8422935cf087835687cac996ffcfe665bf08df", "commitSpoonAstDiffStats": [{"spoonFilePath": "TestOSGiUtil.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.osgi.test.TestOSGiUtil.coreJettyDependencies()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "TestJettyOSGiBootWithJavaxWebSocket.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.osgi.test.TestJettyOSGiBootWithJavaxWebSocket", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "SimpleJavaxWebSocket.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.osgi.test.SimpleJavaxWebSocket", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "1e8422935cf087835687cac996ffcfe665bf08df tags/jetty-9.4.9.v20180320~123", "commitUser": "janbartel", "authoredDateTime": "2018-02-01 10:48:38", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 4, "filePath": "jetty-websocket/javax-websocket-server-impl/pom.xml", "insertions": 2, "deletions": 2}, {"lines": 6, "filePath": "jetty-osgi/test-jetty-osgi/src/test/java/org/eclipse/jetty/osgi/test/TestOSGiUtil.java", "insertions": 3, "deletions": 3}, {"lines": 47, "filePath": "jetty-osgi/test-jetty-osgi/src/test/config/etc/jetty-http-boot-with-javax-websocket.xml", "insertions": 47, "deletions": 0}, {"lines": 11, "filePath": "jetty-osgi/test-jetty-osgi/pom.xml", "insertions": 11, "deletions": 0}, {"lines": 75, "filePath": "jetty-osgi/test-jetty-osgi/src/test/java/org/eclipse/jetty/osgi/test/SimpleJavaxWebSocket.java", "insertions": 75, "deletions": 0}, {"lines": 194, "filePath": "jetty-osgi/test-jetty-osgi/src/test/java/org/eclipse/jetty/osgi/test/TestJettyOSGiBootWithJavaxWebSocket.java", "insertions": 194, "deletions": 0}], "commitDateTime": "2018-02-20 16:28:39", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #2164 Update websocket manifests for osgi and add test in osgi\n\nSigned-off-by: Jan Bartel <janb@webtide.com>\n", "commitParents": ["df012bb0a349554b479430688e3a58b19013090b"], "commitHash": "17f518ffb19d781718da61ccea30bcaf2e689a44", "commitSpoonAstDiffStats": [{"spoonFilePath": "TestJettyOSGiBootWithWebSocket.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.osgi.test.TestJettyOSGiBootWithWebSocket", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "SimpleEchoSocket.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.osgi.test.SimpleEchoSocket", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "17f518ffb19d781718da61ccea30bcaf2e689a44 tags/jetty-9.4.9.v20180320~124", "commitUser": "janbartel", "authoredDateTime": "2018-01-31 15:05:18", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 5, "filePath": "pom.xml", "insertions": 3, "deletions": 2}, {"lines": 10, "filePath": "jetty-websocket/websocket-api/pom.xml", "insertions": 10, "deletions": 0}, {"lines": 87, "filePath": "jetty-osgi/test-jetty-osgi/src/test/java/org/eclipse/jetty/osgi/test/SimpleEchoSocket.java", "insertions": 87, "deletions": 0}, {"lines": 155, "filePath": "jetty-osgi/test-jetty-osgi/src/test/java/org/eclipse/jetty/osgi/test/TestJettyOSGiBootWithWebSocket.java", "insertions": 155, "deletions": 0}, {"lines": 2, "filePath": "jetty-websocket/javax-websocket-client-impl/pom.xml", "insertions": 2, "deletions": 0}, {"lines": 47, "filePath": "jetty-osgi/test-jetty-osgi/src/test/config/etc/jetty-http-boot-with-websocket.xml", "insertions": 47, "deletions": 0}, {"lines": 8, "filePath": "jetty-osgi/test-jetty-osgi/pom.xml", "insertions": 8, "deletions": 0}, {"lines": 12, "filePath": "jetty-websocket/websocket-common/pom.xml", "insertions": 12, "deletions": 0}], "commitDateTime": "2018-02-20 16:28:39", "spoonStatsSkippedReason": ""}, {"commitMessage": "Make the requirement on \"osgi.serviceloader.processor\" optional (#2377)\n\nThis allows Eclipse to continue to make use of jetty-* bundles\r\nwithout requiring the presence of Apache Aries.\r\n\r\nThis fixes a problem introduced by the resolution to #2164 and\r\nthe same solution is used as in 10cdf16\r\n\r\nSee also the discussion at Eclipse:\r\nhttps://bugs.eclipse.org/bugs/show_bug.cgi?id=532294\r\n\r\nSigned-off-by: Mat Booth <mat.booth@redhat.com>", "commitParents": ["b53fbe01ab9a1c1646b3d9ea66b060e8a953c7c2"], "commitHash": "c316cf1cfe08db1628e5d80d4183e082b7056aab", "commitSpoonAstDiffStats": [], "nameRev": "c316cf1cfe08db1628e5d80d4183e082b7056aab tags/jetty-9.4.10.RC0~24", "commitUser": "janbartel", "authoredDateTime": "2018-04-03 03:25:50", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-xml/pom.xml", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-util/pom.xml", "insertions": 1, "deletions": 1}], "commitDateTime": "2018-04-03 12:25:50", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "9eceba014c35303cfc92e7835d617136aeed81da", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #2164 Make osgi.serviceloader mostly optional (#2408)\n\nSigned-off-by: Jan Bartel <janb@webtide.com>", "commitParents": ["fac93fa7f8976acd401de40345edbbb9e4cb17c7"], "commitHash": "0e88849a683d066b499ab76920ae6f2f9ddb62d5", "commitSpoonAstDiffStats": [{"spoonFilePath": "JettyBootstrapActivator.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.osgi.boot.JettyBootstrapActivator.start(org.osgi.framework.BundleContext)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}]}], "nameRev": "0e88849a683d066b499ab76920ae6f2f9ddb62d5 tags/jetty-9.4.10.RC1~36", "commitUser": "janbartel", "authoredDateTime": "2018-04-18 14:48:53", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-http2/http2-hpack/pom.xml", "insertions": 1, "deletions": 1}, {"lines": 6, "filePath": "jetty-osgi/jetty-osgi-boot/src/main/java/org/eclipse/jetty/osgi/boot/JettyBootstrapActivator.java", "insertions": 6, "deletions": 0}, {"lines": 2, "filePath": "jetty-websocket/websocket-common/pom.xml", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-alpn/jetty-alpn-java-server/pom.xml", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-alpn/jetty-alpn-server/pom.xml", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-alpn/jetty-alpn-openjdk8-client/pom.xml", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-alpn/jetty-alpn-conscrypt-server/pom.xml", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "apache-jsp/pom.xml", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-websocket/javax-websocket-client-impl/pom.xml", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-http-spi/pom.xml", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-annotations/pom.xml", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-websocket/javax-websocket-server-impl/pom.xml", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-alpn/jetty-alpn-client/pom.xml", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-spring/pom.xml", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-websocket/websocket-api/pom.xml", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-alpn/jetty-alpn-openjdk8-server/pom.xml", "insertions": 1, "deletions": 1}, {"lines": 3, "filePath": "jetty-http/pom.xml", "insertions": 0, "deletions": 3}, {"lines": 2, "filePath": "jetty-alpn/jetty-alpn-java-client/pom.xml", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-alpn/jetty-alpn-conscrypt-client/pom.xml", "insertions": 1, "deletions": 1}, {"lines": 1, "filePath": "jetty-websocket/websocket-servlet/pom.xml", "insertions": 0, "deletions": 1}, {"lines": 4, "filePath": "jetty-websocket/websocket-server/pom.xml", "insertions": 2, "deletions": 2}], "commitDateTime": "2018-04-18 14:48:53", "spoonStatsSkippedReason": ""}], "title": "Ensure all jetty modules that use ServiceLoader have correct OSGi manifest headers", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 0.0, "INS": 2.0, "UPD": 0.0, "MOV": 0.0, "TOT": 2.0, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2018-04-18 04:51:18", "statsSkippedReason": "", "body": "Several jetty modules use the ServiceLoader these days, but they have not been updated to include the necessary manifest headers to ensure that the ServiceLoader will work in osgi.\r\n\r\nModules found so far that need attention:\r\n* jetty-xml\r\n* jetty-util\r\n* jetty-spring", "changesInPackagesGIT": [], "changesInPackagesSPOON": ["org.eclipse.jetty.osgi.test.SimpleEchoSocket", "org.eclipse.jetty.osgi.test.SimpleJavaxWebSocket"], "ttf": 77.00027777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/2164"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "tianchen047", "filteredCommits": ["d68c286499e91a3097a498eb882fbeef4ce2ad57"], "commits": {"d68c286499e91a3097a498eb882fbeef4ce2ad57": {"commitUser": "sbordet", "commitGHEventType": "closed"}}, "created": "2018-01-22 07:23:37", "commitsDetails": [{"commitMessage": "Fixes #2145 - Enabled h2, http/1.1 + https failed with invalid preface.\n\nNow using HttpVersion.HTTP_1_1::is, which is case insensitive,\nto find the default protocol among the negotiated protocols.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["464b74ed6028233be9d140c97f90eaf893557104"], "commitHash": "d68c286499e91a3097a498eb882fbeef4ce2ad57", "commitSpoonAstDiffStats": [{"spoonFilePath": "NegotiatingServerConnectionFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.NegotiatingServerConnectionFactory", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.NegotiatingServerConnectionFactory.newConnection(org.eclipse.jetty.server.Connector,org.eclipse.jetty.io.EndPoint)", "DEL": 2, "INS": 2, "UPD": 0, "MOV": 3, "TOT": 7}]}], "nameRev": "d68c286499e91a3097a498eb882fbeef4ce2ad57 tags/jetty-9.4.10.RC0~29", "commitUser": "sbordet", "authoredDateTime": "2018-03-28 19:55:58", "commitGHEventType": "closed", "commitGitStats": [{"lines": 29, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/NegotiatingServerConnectionFactory.java", "insertions": 14, "deletions": 15}], "commitDateTime": "2018-03-28 19:55:58", "spoonStatsSkippedReason": ""}], "title": "Enabled h2, http/1.1 + https failed with invalid preface", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 3, "INS": 2, "UPD": 0, "MOV": 4, "TOT": 9, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 29, "insertions": 14, "gitFilesChange": 1, "deletions": 15}, "closed": "2018-03-28 19:31:19", "statsSkippedReason": "", "body": "I'm using jetty-distribution-9.4.7.v20170914, turn on alpn, h2, https, http/1.1 and some other...\r\nh2 response well. http1.1 failed with invalid preface.\r\nIt seems defaultProtocol in newConnection function failed to check http/1.1\r\n     negotiated.contains(HttpVersion.HTTP_1_1.asString())\r\nall negotiated values are lower case, defaultProtocol will be set to h2.\r\n\r\nthe solution with set \r\n     jetty.alpn.defaultProtocol=http/1.1\r\nwill fix this problem", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.NegotiatingServerConnectionFactory", "org.eclipse.jetty.server.NegotiatingServerConnectionFactory.newConnection(org.eclipse.jetty.server.Connector,org.eclipse.jetty.io.EndPoint)"], "ttf": 65.00027777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/2145"}, {"labels": ["Bug", "Stale"], "closed": "2019-12-20 16:27:01", "body": "Report from jetty-users:\r\n\r\njava -jar /opt/jetty-distribution-9.3.22.v20171030//start.jar --add-to-startd=http,https,logging,deploy,jsp,jstl,plus,servlets,annotations,ext,resources,logging,requestlog\r\nINFO: ext             initialised in ${jetty.base}/start.d/ext.ini\r\nINFO: logging         initialised in ${jetty.base}/start.d/logging.ini\r\nINFO: resources       initialised in ${jetty.base}/start.d/resources.ini\r\nINFO: server          initialised (transitively) in ${jetty.base}/start.d/server.ini\r\nINFO: http            initialised in ${jetty.base}/start.d/http.ini\r\nINFO: requestlog      initialised in ${jetty.base}/start.d/requestlog.ini\r\nINFO: ssl             initialised (transitively) in ${jetty.base}/start.d/ssl.ini\r\nINFO: https           initialised in ${jetty.base}/start.d/https.ini\r\nINFO: servlets        initialised in ${jetty.base}/start.d/servlets.ini\r\nINFO: deploy          initialised in ${jetty.base}/start.d/deploy.ini\r\nINFO: plus            initialised in ${jetty.base}/start.d/plus.ini\r\nINFO: annotations     initialised in ${jetty.base}/start.d/annotations.ini\r\nINFO: jsp             initialised in ${jetty.base}/start.d/jsp.ini\r\nINFO: jstl            initialised in ${jetty.base}/start.d/jstl.ini\r\nMKDIR: ${jetty.base}/lib\r\nMKDIR: ${jetty.base}/lib/ext\r\nMKDIR: ${jetty.base}/logs\r\nMKDIR: ${jetty.base}/resources\r\nDOWNLOAD: https://raw.githubusercontent.com/eclipse/jetty.project/master/jetty-server/src/test/config/etc/keystore?id=master to ${jetty.base}/etc/keystore\r\njava.io.IOException: URL GET Failure [404/Not Found] on https://raw.githubusercontent.com/eclipse/jetty.project/master/jetty-server/src/test/config/etc/keystore?id=master\r\n        at org.eclipse.jetty.start.fileinits.UriFileInitializer.download(UriFileInitializer.java:79)\r\n        at org.eclipse.jetty.start.fileinits.UriFileInitializer.init(UriFileInitializer.java:60)\r\n        at org.eclipse.jetty.start.BaseBuilder.processFileResource(BaseBuilder.java:283)\r\n        at org.eclipse.jetty.start.BaseBuilder.processFileResources(BaseBuilder.java:375)\r\n        at org.eclipse.jetty.start.BaseBuilder.build(BaseBuilder.java:239)\r\n        at org.eclipse.jetty.start.Main.start(Main.java:408)\r\n        at org.eclipse.jetty.start.Main.main(Main.java:76)\r\nMKDIR: ${jetty.base}/webapps\r\nWARNING: Failed to process all file resources.\r\n - [IOException] URL GET Failure [404/Not Found] on https://raw.githubusercontent.com/eclipse/jetty.project/master/jetty-server/src/test/config/etc/keystore?id=master - /opt/jetty/etc/keystore\r\njava.lang.RuntimeException: Failed to process all file resources.\r\n - [IOException] URL GET Failure [404/Not Found] on https://raw.githubusercontent.com/eclipse/jetty.project/master/jetty-server/src/test/config/etc/keystore?id=master - /opt/jetty/etc/keystore\r\n        at org.eclipse.jetty.start.BaseBuilder.processFileResources(BaseBuilder.java:394)\r\n        at org.eclipse.jetty.start.BaseBuilder.build(BaseBuilder.java:239)\r\n        at org.eclipse.jetty.start.Main.start(Main.java:408)\r\n        at org.eclipse.jetty.start.Main.main(Main.java:76)\r\n\r\nUsage: java -jar start.jar [options] [properties] [configs]\r\n       java -jar start.jar --help  # for more information\r\n\r\n\r\nConfirmed with 9.3, not sure about 9.4 yet.", "commits": {}, "title": "Master branch deletion fails --add-to-startd=resources on jetty-9.3", "created": "2018-01-18 10:04:21", "user": "janbartel", "url": "https://github.com/eclipse/jetty.project/issues/2138", "commitsDetails": [], "ttf": 701.0002777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "lluismf", "filteredCommits": [], "commits": {"edf37893d69c204e01c8ca5a729b82d8e91bbe4b": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2018-01-14 22:48:39", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "edf37893d69c204e01c8ca5a729b82d8e91bbe4b", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "AssertionError executing RolloverFileOutputStreamTest ", "spoonStatsSummary": {}, "closed": "2018-03-02 12:57:45", "statsSkippedReason": "", "body": "Building Jetty I get an assertion error in RolloverFileOutputStreamTest\r\n\r\n[ERROR] testRolloverBackup(org.eclipse.jetty.util.RolloverFileOutputStreamTest)  Time elapsed: 10.02 s  <<< FAILURE!\r\njava.lang.AssertionError: \r\n\r\nExpected: is <2>\r\n     but: was <1>\r\n\tat org.eclipse.jetty.util.RolloverFileOutputStreamTest.testRolloverBackup(RolloverFileOutputStreamTest.java:352)\r\n\r\nMaven Apache Maven 3.5.2\r\nMaven home: c:\\Program Files\\apache-maven-3.5.2\\bin\\..\r\nJava version: 1.8.0_112, vendor: Oracle Corporation\r\nJava home: c:\\Program Files\\Java\\jdk1.8.0_112\\jre\r\nDefault locale: es_ES, platform encoding: Cp1251\r\nOS name: \"windows 7\", version: \"6.1\", arch: \"amd64\", family: \"windows\"\r\n![2018-01-15 00_56_23-workspace - java - jetty-util_src_test_java_org_eclipse_jetty_util_rolloverfileo](https://user-images.githubusercontent.com/2213724/34922357-166cbe06-f98f-11e7-8fd6-c2fef03e29de.png)\r\n", "ttf": 46.000277777777775, "url": "https://github.com/eclipse/jetty.project/issues/2120"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "IvoLimmen", "filteredCommits": ["a107e543e6131c8195d7e20aff113d1ba8ec7ab1", "595c6ac1ee639d1117bbf8282801cfe9e4a8d637"], "commits": {"a107e543e6131c8195d7e20aff113d1ba8ec7ab1": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "26a4909c88b49d1cb78adf77f2dbf86fb02a9d27": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "595c6ac1ee639d1117bbf8282801cfe9e4a8d637": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2018-01-03 12:05:41", "commitsDetails": [{"commitMessage": "Issue #2090 Java Version JEP223\n", "commitParents": ["1cad36969f0fdf5ece69f5d057bd9582d15c28ad"], "commitHash": "a107e543e6131c8195d7e20aff113d1ba8ec7ab1", "commitSpoonAstDiffStats": [{"spoonFilePath": "Jetty.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.Jetty", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 1, "TOT": 4}]}, {"spoonFilePath": "Server.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Server.doStart()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "JavaVersion.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.JavaVersion.suffix(int[],java.lang.String,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.JavaVersion.parseJDK9(java.lang.String)", "DEL": 1, "INS": 0, "UPD": 15, "MOV": 13, "TOT": 29}, {"spoonMethodName": "org.eclipse.jetty.util.JavaVersion.parsePreJDK9(java.lang.String)", "DEL": 12, "INS": 0, "UPD": 20, "MOV": 16, "TOT": 48}, {"spoonMethodName": "org.eclipse.jetty.util.JavaVersion", "DEL": 0, "INS": 6, "UPD": 5, "MOV": 3, "TOT": 14}, {"spoonMethodName": "org.eclipse.jetty.util.JavaVersion.parse(java.lang.String)", "DEL": 1, "INS": 12, "UPD": 0, "MOV": 1, "TOT": 14}]}], "nameRev": "a107e543e6131c8195d7e20aff113d1ba8ec7ab1 tags/jetty-9.4.9.v20180320~193", "commitUser": "gregw", "authoredDateTime": "2018-01-04 12:27:15", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 124, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/JavaVersion.java", "insertions": 86, "deletions": 38}, {"lines": 5, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/Jetty.java", "insertions": 4, "deletions": 1}, {"lines": 3, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Server.java", "insertions": 2, "deletions": 1}], "commitDateTime": "2018-01-04 12:27:15", "spoonStatsSkippedReason": ""}, {"commitMessage": "Use shaded utils in start for JavaVersion and TopologicalSort #2090 (#2094)\n\n* shaded TopologicalSort. Use shaded start in jetty-home\r\n* removed unused property\r\n* jetty-start shaded dependency\r\n* removed component dependencies from TopologicalSort\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n", "commitParents": ["c35b83225195487915197044a8e385fcd839e729"], "commitHash": "26a4909c88b49d1cb78adf77f2dbf86fb02a9d27", "commitSpoonAstDiffStats": [{"spoonFilePath": "TopologicalSort.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.TopologicalSort.dump()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.TopologicalSort.dump(java.lang.Appendable,java.lang.String)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "Modules.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.start.Modules.getEnabled()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "26a4909c88b49d1cb78adf77f2dbf86fb02a9d27 tags/jetty-9.4.9.v20180320~186", "commitUser": "gregw", "authoredDateTime": "2018-01-06 11:23:37", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 5, "filePath": "jetty-start/pom.xml", "insertions": 3, "deletions": 2}, {"lines": 204, "filePath": "jetty-start/src/main/java/org/eclipse/jetty/start/TopologicalSort.java", "insertions": 0, "deletions": 204}, {"lines": 2, "filePath": "jetty-home/pom.xml", "insertions": 2, "deletions": 0}, {"lines": 20, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/TopologicalSort.java", "insertions": 1, "deletions": 19}, {"lines": 2, "filePath": "jetty-start/src/main/java/org/eclipse/jetty/start/Modules.java", "insertions": 2, "deletions": 0}], "commitDateTime": "2018-01-06 11:23:37", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #2090 Java Version JEP223. Use shaded util in start.\n", "commitParents": ["bfe79c0afe16961ea1d0e9844a94d18f264c985b"], "commitHash": "595c6ac1ee639d1117bbf8282801cfe9e4a8d637", "commitSpoonAstDiffStats": [{"spoonFilePath": "StartArgs.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.start.StartArgs.setProperty(java.lang.String,java.lang.String,java.lang.String)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "Server.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Server.doStart()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "JavaVersion.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.start.JavaVersion", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "JavaVersionTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.JavaVersionTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "595c6ac1ee639d1117bbf8282801cfe9e4a8d637 tags/jetty-9.4.9.v20180320~191", "commitUser": "gregw", "authoredDateTime": "2018-01-04 13:13:24", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 36, "filePath": "jetty-start/pom.xml", "insertions": 36, "deletions": 0}, {"lines": 1, "filePath": "jetty-start/src/main/java/org/eclipse/jetty/start/StartArgs.java", "insertions": 1, "deletions": 0}, {"lines": 151, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/JavaVersionTest.java", "insertions": 151, "deletions": 0}, {"lines": 2, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Server.java", "insertions": 1, "deletions": 1}, {"lines": 159, "filePath": "jetty-start/src/main/java/org/eclipse/jetty/start/JavaVersion.java", "insertions": 0, "deletions": 159}], "commitDateTime": "2018-01-04 13:13:39", "spoonStatsSkippedReason": ""}], "title": "Jetty fails to start on OpenJDK 9: \"Invalid Java version 9.0.1.3\"", "spoonStatsSummary": {"spoonMethodsChanged": 9, "DEL": 15, "INS": 23, "UPD": 44, "MOV": 34, "TOT": 116, "spoonFilesChanged": 4}, "gitStatsSummary": {"lines": 294, "insertions": 94, "gitFilesChange": 5, "deletions": 200}, "closed": "2018-01-06 10:25:40", "statsSkippedReason": "", "body": "Jetty (bom) version: 9.4.8.v20171121\r\n\r\nOpenJDK version: \r\nopenjdk version \"9.0.1.3\"\r\nOpenJDK Runtime Environment (Zulu build 9.0.1.3+11)\r\nOpenJDK 64-Bit Server VM (Zulu build 9.0.1.3+11, mixed mode)", "changesInPackagesGIT": ["jetty-util/src/main/java/org/eclipse/jetty/util", "jetty-start/src/main/java/org/eclipse/jetty/start", "jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.util.Jetty", "org.eclipse.jetty.util.JavaVersion.parseJDK9(java.lang.String)", "org.eclipse.jetty.util.JavaVersion.parsePreJDK9(java.lang.String)", "org.eclipse.jetty.start.StartArgs.setProperty(java.lang.String,java.lang.String,java.lang.String)", "org.eclipse.jetty.util.JavaVersion.parse(java.lang.String)", "org.eclipse.jetty.util.JavaVersion.suffix(int[],java.lang.String,java.lang.String)", "org.eclipse.jetty.start.JavaVersion", "org.eclipse.jetty.server.Server.doStart()", "org.eclipse.jetty.util.JavaVersion"], "ttf": 2.000277777777778, "numCommits": 2, "url": "https://github.com/eclipse/jetty.project/issues/2090"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 3, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "gregw", "filteredCommits": [], "commits": {"41050cd8a438e24f7f8a3e07a454c74f084ab792": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "0706e53561347e6ebd9c037302b83dcf7a8337df": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "34686a5d7db4fb31f91143eaa6cd05f89cb5c580": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "d2aed5bead9078a8b96c53507d7c122aa519be22": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2017-12-28 10:04:33", "commitsDetails": [{"commitMessage": "Issue #2081 No idle timeout exception when dispatch is delayed (#2083)\n\nIssue #2081 No idle timeout exception when dispatch is delayed\r\n* Delegate the readtimeout handling to HttpChannel so that a delayed dispatch can be ended.\r\n* Added unit test for delayed dispatch idle\r\n* Now using HttpInput.onIdleTimeout() to fail the HttpInput, and then dispatching the request in case it has not been dispatched yet. This ensure consistent behavior independently of the value of HttpConfiguration.delayDispatchUntilContent.\r\n* Fixed for both HTTP/1.1 and HTTP/2.\r\n* Added tests for non-blocking reads.\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\r\n", "commitParents": ["595c6ac1ee639d1117bbf8282801cfe9e4a8d637"], "commitHash": "41050cd8a438e24f7f8a3e07a454c74f084ab792", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpInput.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpInput.onIdleTimeout(java.lang.Throwable)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 1, "TOT": 3}]}, {"spoonFilePath": "HttpChannelOverHttp.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannelOverHttp.onIdleTimeout(java.lang.Throwable)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpConnection.onReadTimeout(java.lang.Throwable)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpChannelOverHTTP2.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.server.HttpChannelOverHTTP2.onStreamTimeout(java.lang.Throwable,java.util.function.Consumer)", "DEL": 2, "INS": 6, "UPD": 0, "MOV": 3, "TOT": 11}]}, {"spoonFilePath": "ClientCloseTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.client.ClientCloseTest.testServerNoCloseHandshake()", "DEL": 1, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.ClientCloseTest.CloseTrackingSocket.onWebSocketError(java.lang.Throwable)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ServerTimeoutsTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.client.ServerTimeoutsTest.testBlockingReadWithDelayedFirstContentIdleTimeoutFires(boolean)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.client.ServerTimeoutsTest.testBlockingReadWithMinimumDataRateBelowLimit().5", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.client.ServerTimeoutsTest.testAsyncReadIdleTimeoutFires().3", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.client.ServerTimeoutsTest.testBlockingWriteWithMinimumDataRateBelowLimit().10", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.client.ServerTimeoutsTest.testBlockingTimeoutWithSlowRead().2", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.client.ServerTimeoutsTest.testBlockingReadWithDelayedFirstContentWithDelayedDispatchIdleTimeoutFires()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.client.ServerTimeoutsTest.testAsyncReadWithDelayedFirstContentWithUndelayedDispatchIdleTimeoutFires()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.client.ServerTimeoutsTest.testAsyncReadWithDelayedFirstContentIdleTimeoutFires(boolean)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.client.ServerTimeoutsTest.testDelayedDispatchRequestWithDelayedFirstContentIdleTimeoutFires()", "DEL": 3, "INS": 0, "UPD": 7, "MOV": 4, "TOT": 14}, {"spoonMethodName": "org.eclipse.jetty.http.client.ServerTimeoutsTest.testAsyncReadHttpIdleTimeoutOverridesIdleTimeout().7", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.client.ServerTimeoutsTest.testBlockingReadWithMinimumDataRateAboveLimit().6", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.client.ServerTimeoutsTest.testDelayedDispatchRequestWithDelayedFirstContentIdleTimeoutFires().1", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.http.client.ServerTimeoutsTest.testAsyncReadWithDelayedFirstContentWithDelayedDispatchIdleTimeoutFires()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.client.ServerTimeoutsTest.testAsyncWriteIdleTimeoutFires().4", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.client.ServerTimeoutsTest.testIdleTimeoutBeforeReadIsIgnored().9.onComplete(org.eclipse.jetty.client.api.Result)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.client.ServerTimeoutsTest.testReadWithDelayedFirstContentIdleTimeoutFires(org.eclipse.jetty.server.Handler,boolean)", "DEL": 0, "INS": 6, "UPD": 0, "MOV": 0, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.http.client.ServerTimeoutsTest.testDelayedDispatchRequestWithDelayedFirstContentIdleTimeoutFires().1.doNonErrorHandle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 3, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.http.client.ServerTimeoutsTest.testBlockingReadWithDelayedFirstContentWithUndelayedDispatchIdleTimeoutFires()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.client.ServerTimeoutsTest.testIdleTimeoutBeforeReadIsIgnored().8", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.client.ServerTimeoutsTest.testIdleTimeoutBeforeReadIsIgnored().9", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ConnectorTimeoutTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ConnectorTimeoutTest.testMaxIdleDelayedDispatch()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ConnectorTimeoutTest.testMaxIdleNoRequest()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.ConnectorTimeoutTest.testMaxIdleDispatch()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ConnectorTimeoutTest.testMaxIdleNothingSent()", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 1, "TOT": 4}]}, {"spoonFilePath": "SslBytesServerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.ssl.SslBytesServerTest.init().1.newConnection(org.eclipse.jetty.server.Connector,org.eclipse.jetty.io.EndPoint).1.onReadTimeout(java.lang.Throwable)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "AbstractConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.AbstractConnection.onReadTimeout(java.lang.Throwable)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.AbstractConnection.onFillInterestedFailed(java.lang.Throwable)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpClientTimeoutTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpClientTimeoutTest.testIdleTimeout().7.newSslClientConnectionFactory(org.eclipse.jetty.io.ClientConnectionFactory).1.newSslConnection(org.eclipse.jetty.io.ByteBufferPool,java.util.concurrent.Executor,org.eclipse.jetty.io.EndPoint,javax.net.ssl.SSLEngine).1.onReadTimeout(java.lang.Throwable)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "AbstractWebSocketConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.io.AbstractWebSocketConnection.onReadTimeout()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.io.AbstractWebSocketConnection.onReadTimeout(java.lang.Throwable)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}]}], "nameRev": "41050cd8a438e24f7f8a3e07a454c74f084ab792 tags/jetty-9.4.9.v20180320~190", "commitUser": "gregw", "authoredDateTime": "2018-01-04 13:26:31", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 11, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannelOverHttp.java", "insertions": 11, "deletions": 0}, {"lines": 15, "filePath": "jetty-http2/http2-server/src/main/java/org/eclipse/jetty/http2/server/HttpChannelOverHTTP2.java", "insertions": 9, "deletions": 6}, {"lines": 8, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/io/AbstractWebSocketConnection.java", "insertions": 2, "deletions": 6}, {"lines": 3, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpInput.java", "insertions": 2, "deletions": 1}, {"lines": 90, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ConnectorTimeoutTest.java", "insertions": 87, "deletions": 3}, {"lines": 4, "filePath": "jetty-client/src/test/java/org/eclipse/jetty/client/ssl/SslBytesServerTest.java", "insertions": 2, "deletions": 2}, {"lines": 6, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/AbstractConnection.java", "insertions": 4, "deletions": 2}, {"lines": 21, "filePath": "jetty-websocket/websocket-client/src/test/java/org/eclipse/jetty/websocket/client/ClientCloseTest.java", "insertions": 10, "deletions": 11}, {"lines": 4, "filePath": "jetty-client/src/test/java/org/eclipse/jetty/client/HttpClientTimeoutTest.java", "insertions": 2, "deletions": 2}, {"lines": 8, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpConnection.java", "insertions": 7, "deletions": 1}, {"lines": 111, "filePath": "tests/test-http-client-transport/src/test/java/org/eclipse/jetty/http/client/ServerTimeoutsTest.java", "insertions": 96, "deletions": 15}], "commitDateTime": "2018-01-04 13:26:31", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "0706e53561347e6ebd9c037302b83dcf7a8337df", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "34686a5d7db4fb31f91143eaa6cd05f89cb5c580", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "sbordet", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "d2aed5bead9078a8b96c53507d7c122aa519be22", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "sbordet", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "No idle timeout exception when dispatch is delayed", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2018-01-11 09:36:46", "statsSkippedReason": "", "body": "\r\nReported by Daniel Gredler <djgredler@gmail.com>\r\n\r\nThe following test indicates that the idle Timeout is not throwing an IOException?\r\n\r\n```\r\nimport static java.nio.charset.StandardCharsets.UTF_8;\r\nimport java.io.IOException;\r\nimport java.io.OutputStreamWriter;\r\nimport java.net.InetAddress;\r\nimport java.net.Socket;\r\nimport java.util.concurrent.TimeoutException;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpServletResponse;\r\nimport org.eclipse.jetty.server.NetworkConnector;\r\nimport org.eclipse.jetty.server.Request;\r\nimport org.eclipse.jetty.server.Server;\r\nimport org.eclipse.jetty.server.ServerConnector;\r\nimport org.eclipse.jetty.server.handler.AbstractHandler;\r\nimport org.eclipse.jetty.util.IO;\r\n\r\npublic class JettyTimeoutTest\r\n{\r\n\r\n    public static void main(String... args) throws Exception\r\n    {\r\n\r\n        int port = 8181;\r\n        Server jetty = new Server(port);\r\n        jetty.getBean(ServerConnector.class).setIdleTimeout(10_000);\r\n        jetty.setHandler(new TestHandler());\r\n        jetty.start();\r\n\r\n        try (Socket s = new Socket(InetAddress.getByName(\"localhost\"),port))\r\n        {\r\n\r\n            String body = \"abcdefghijklmnopqrstuvwxyz\";\r\n\r\n            OutputStreamWriter sw = new OutputStreamWriter(s.getOutputStream(),UTF_8);\r\n            sw.write(\"POST /foo HTTP/1.0\\r\\n\");\r\n            sw.write(\"Content-Length: \" + body.length() + \"\\r\\n\");\r\n            sw.write(\"Content-Type: application/x-www-form-urlencoded\\r\\n\");\r\n            sw.write(\"\\r\\n\");\r\n            sw.flush();\r\n            sw.write(body.substring(0,10));\r\n            // Thread.sleep(15_000); // a little longer than the server timeout, which is 10 seconds\r\n            // sw.write(body.substring(10));\r\n            // sw.flush();\r\n\r\n            String response = IO.toString(s.getInputStream(),UTF_8);\r\n            System.out.println(\"Response:\");\r\n            System.out.println(response); // 408 response in Jetty <= 9.2.23, empty response in Jetty >= 9.3.0\r\n\r\n        }\r\n        finally\r\n        {\r\n            jetty.stop();\r\n        }\r\n    }\r\n\r\n    private static class TestHandler extends AbstractHandler\r\n    {\r\n\r\n        @Override\r\n        public void handle(String target, Request baseRequest, HttpServletRequest request, HttpServletResponse response)\r\n            throws IOException\r\n        {\r\n\r\n            int status;\r\n            String body;\r\n\r\n            try\r\n            {\r\n                status = HttpServletResponse.SC_OK;\r\n                body = IO.toString(request.getInputStream(),UTF_8); // tries to read the entire POST body\r\n            }\r\n            catch (IOException e)\r\n            {\r\n                e.printStackTrace();\r\n                if (e.getCause() instanceof TimeoutException)\r\n                {\r\n                    status = HttpServletResponse.SC_REQUEST_TIMEOUT;\r\n                    body = \"HTTP ERROR 408\";\r\n                }\r\n                else\r\n                {\r\n                    status = HttpServletResponse.SC_INTERNAL_SERVER_ERROR;\r\n                    body = \"HTTP ERROR 500\";\r\n                }\r\n            }\r\n\r\n            response.setContentType(\"text/plain\");\r\n            response.setStatus(status);\r\n            response.getWriter().write(body);\r\n            baseRequest.setHandled(true);\r\n        }\r\n    }\r\n}\r\n```", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 13.000277777777777, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/2081"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug", "Specification"], "user": "fripoli", "filteredCommits": ["7022220904d1d985ee4597481c958a1b91960c80"], "commits": {"239b7c5c508353046d87b5d347041c7f2943f438": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "7022220904d1d985ee4597481c958a1b91960c80": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "ef9e15511834ed8d85b3d1a07145e2b122e76d53": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2017-12-20 12:09:39", "commitsDetails": [{"commitMessage": "Issue #2074 - Forwarded query parameters duplicated\n\n+ Adding testcases that replicate the behavior reported.\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["dbf0d2e6becc09ef0310616bd9045e4f97130cab"], "commitHash": "7022220904d1d985ee4597481c958a1b91960c80", "commitSpoonAstDiffStats": [{"spoonFilePath": "DispatcherForwardTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testContentCanBeReadViaInputStreamAfterForwardWithoutQuery().16", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testQueryAggregatesWithFormMergedByForwardWithQuery().12", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testQueryMerged_Unique().8.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 6, "UPD": 0, "MOV": 0, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testQueryAggregatesWithFormMergedByForwardWithQuery().11.doPost(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 4, "MOV": 8, "TOT": 12}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testQueryAggregatesWithFormByForwardWithoutQuery().8", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testQueryAggregatesWithFormByForwardWithoutQuery().7.doPost(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 2, "INS": 0, "UPD": 7, "MOV": 12, "TOT": 21}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testContentCanBeReadViaInputStreamAfterForwardWithoutQuery()", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 11, "TOT": 11}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testContentCanBeReadViaInputStreamAfterForwardWithQuery().18", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testContentCanBeReadViaInputStreamAfterForwardWithQuery().17.doPost(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 7, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testQueryAggregatesWithFormMergedByForwardWithQuery()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 2, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testContentCanBeReadViaInputStreamAfterForwardWithQuery().20.doPost(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testQueryAggregatesWithFormBeforeAndAfterForward()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testQueryMergedByForwardWithQuery().5.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testQueryMergedByForwardWithQuery().6.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 6, "UPD": 0, "MOV": 0, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testContentCanBeReadViaInputStreamAfterForwardWithQuery()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 11, "TOT": 12}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testQueryMerged_Unique()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testContentCanBeReadViaInputStreamAfterForwardWithoutQuery().15.doPost(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 7, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testQueryAggregatesWithFormByForwardWithoutQuery().8.doPost(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 1, "INS": 0, "UPD": 3, "MOV": 6, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testQueryAggregatesWithFormReplacedByForwardWithQuery()", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 10, "TOT": 13}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testContentCanBeReadViaInputStreamAfterForwardWithQuery().17", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testQueryAggregatesWithFormByForwardWithoutQuery()", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 15, "TOT": 18}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testContentCanBeReadViaInputStreamAfterForwardWithQuery().18.doPost(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 7, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testQueryAggregatesWithFormByForwardWithoutQuery().10.doPost(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testQueryAggregatesWithFormReplacedByForwardWithQuery().10.doPost(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 2, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testContentCanBeReadViaInputStreamAfterForwardWithoutQuery().16.doPost(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 6, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testContentCanBeReadViaInputStreamAfterForwardWithoutQuery().15", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testQueryAggregatesWithFormByForwardWithoutQuery().7", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testContentCanBeReadViaInputStreamAfterForwardWithQuery().19.doPost(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testQueryAggregatesWithFormReplacedByForwardWithQuery().9.doPost(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testQueryAggregatesWithFormMergedByForwardWithQuery().12.doPost(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 4, "MOV": 4, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testQueryAggregatesWithFormBeforeAndAfterForward().16.doPost(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testQueryAggregatesWithFormReplacedByForwardWithQuery().12.doPost(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testQueryAggregatesWithFormMergedByForwardWithQuery().11", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testQueryAggregatesWithFormBeforeAndAfterForward().13.doPost(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 2, "INS": 0, "UPD": 1, "MOV": 3, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testQueryAggregatesWithFormReplacedByForwardWithQuery().10", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "MultiMapTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.MultiMapTest.testMergeDuplicateMapValues()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "Request.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Request.mergeQueryParameters(java.lang.String,java.lang.String,boolean)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}]}], "nameRev": "7022220904d1d985ee4597481c958a1b91960c80 remotes/origin/jetty-9.4.x-2074-duplicate-forward-query-entry", "commitUser": "joakime", "authoredDateTime": "2019-03-06 13:24:19", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 69, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/DispatcherForwardTest.java", "insertions": 60, "deletions": 9}, {"lines": 4, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Request.java", "insertions": 2, "deletions": 2}, {"lines": 33, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/MultiMapTest.java", "insertions": 25, "deletions": 8}], "commitDateTime": "2019-03-06 13:24:19", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "239b7c5c508353046d87b5d347041c7f2943f438", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #2074 no merge query string (#4730)\n\n* Issue #4713 Async dispatch with query.\r\n\r\n+ Preserve the entire URI with query when startAsync(req,res) is used.\r\n+ merge any query string from dispatch path with either original query or preserved query from forward\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n\r\n* Issue #4713 asyncDispatch with query parameters\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n\r\n* Issue #2074 Do not merge query strings\r\n\r\nDo not merge the query string itself, only the parameter map.\r\nThe query string is either the original or replaced by the one from the dispatch.\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>", "commitParents": ["3f7d04ff96e5ca916af6d196e6d5731d4b5db8db"], "commitHash": "ef9e15511834ed8d85b3d1a07145e2b122e76d53", "commitSpoonAstDiffStats": [{"spoonFilePath": "DispatcherForwardTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testQueryReplacedByForwardWithQuery().4.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testQueryAggregatesWithFormMergedByForwardWithQuery().12.doPost(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testQueryAggregatesWithFormBeforeAndAfterForward().14.doPost(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testQueryMergedByForwardWithQuery().6.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testQueryAggregatesWithFormBeforeAndAfterForward()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testContentCanBeReadViaInputStreamAfterForwardWithQuery().18.doPost(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testQueryAggregatesWithFormMergedByForwardWithQuery()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testQueryReplacedByForwardWithQuery()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testQueryMergedByForwardWithQuery()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherForwardTest.testContentCanBeReadViaInputStreamAfterForwardWithQuery()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AsyncContextDispatchWithQueryStrings.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.AsyncContextDispatchWithQueryStrings.TestServlet.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "DispatcherTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherTest.AssertNonUTF8ForwardServlet.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.servlet.DispatcherTest.AssertForwardServlet.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AsyncServletTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.AsyncServletTest.testFwdWrapStartDispatchPath()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlet.AsyncServletTest.testFwdWrapStartDispatch()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlet.AsyncServletTest.testFwdStartDispatchPath()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.AsyncServletTest.testFwdStartDispatch()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "Request.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Request.mergeQueryParameters(java.lang.String,java.lang.String,boolean)", "DEL": 2, "INS": 2, "UPD": 0, "MOV": 2, "TOT": 6}]}], "nameRev": "ef9e15511834ed8d85b3d1a07145e2b122e76d53 tags/jetty-10.0.0.beta0~37^2~20", "commitUser": "gregw", "authoredDateTime": "2020-03-31 14:26:25", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 4, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/AsyncContextDispatchWithQueryStrings.java", "insertions": 2, "deletions": 2}, {"lines": 21, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/DispatcherForwardTest.java", "insertions": 8, "deletions": 13}, {"lines": 35, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Request.java", "insertions": 2, "deletions": 33}, {"lines": 14, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/AsyncServletTest.java", "insertions": 7, "deletions": 7}, {"lines": 6, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/DispatcherTest.java", "insertions": 3, "deletions": 3}], "commitDateTime": "2020-03-31 14:26:25", "spoonStatsSkippedReason": ""}], "title": "Forward with query duplicates parameter values", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 1.0, "INS": 1.0, "UPD": 0.0, "MOV": 0.0, "TOT": 2.0, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 4.0, "insertions": 2.0, "gitFilesChange": 1, "deletions": 2.0}, "closed": "2020-03-31 12:31:02", "statsSkippedReason": "", "body": "I'm using Spring boot with Jetty and Tuckey URL Rewrite.\r\n\r\nThe URL rewrite is doing a forward including all query parameters that were sent to the original request.\r\n\r\nFor example\r\n```\r\nrequest /en/product?productId=123\r\nforward /product?productId=123\r\n```\r\nThe query parameter map on the request then become a map of `productId` with the value `[123,123]`\r\n\r\nIs that the expected behaviour?\r\n\r\nI can see there are some testing around this forward functionality [here](https://github.com/eclipse/jetty.project/blob/jetty-9.4.x/jetty-servlet/src/test/java/org/eclipse/jetty/servlet/DispatcherForwardTest.java) but none of them covers this case\r\n", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.Request.mergeQueryParameters(java.lang.String,java.lang.String,boolean)"], "ttf": 832.0002777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/2074"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 3, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "dreis2211", "filteredCommits": [], "commits": {"78036482c95d8c930bde2d42dcb82d350b46bb14": {"commitUser": "lachlan-roberts", "commitGHEventType": "referenced"}, "50774f655bb5c974d9c776ff2ad47acd0568448e": {"commitUser": "lachlan-roberts", "commitGHEventType": "referenced"}, "47adacae99aed5d6169917fb54d37805b55d14da": {"commitUser": "lachlan-roberts", "commitGHEventType": "referenced"}, "f3f13c4ca9a8a8c899c648d06abd745c97bf93c8": {"commitUser": "lachlan-roberts", "commitGHEventType": "referenced"}}, "created": "2017-12-14 17:07:16", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "78036482c95d8c930bde2d42dcb82d350b46bb14", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "lachlan-roberts", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "50774f655bb5c974d9c776ff2ad47acd0568448e", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "lachlan-roberts", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "47adacae99aed5d6169917fb54d37805b55d14da", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "lachlan-roberts", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #2061 - fail current entry in CompressExtension on failure (#3830)\n\n* Issue #2061 - fail current entry in CompressExtension on failure\r\n\r\nSigned-off-by: Lachlan Roberts <lachlan@webtide.com>\r\n\r\n* Issue #2061 - do not notify callback failure twice\r\n\r\nSigned-off-by: Lachlan Roberts <lachlan@webtide.com>\r\n", "commitParents": ["89e756a21e1ffef2348266f0b2318c2190261667"], "commitHash": "f3f13c4ca9a8a8c899c648d06abd745c97bf93c8", "commitSpoonAstDiffStats": [{"spoonFilePath": "WriteAfterStopTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.tests.WriteAfterStopTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "CompressExtension.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.extensions.compress.CompressExtension.Flusher.writeFailed(java.lang.Throwable)", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}]}], "nameRev": "f3f13c4ca9a8a8c899c648d06abd745c97bf93c8 tags/jetty-9.4.20.v20190813~59", "commitUser": "lachlan-roberts", "authoredDateTime": "2019-07-03 11:09:34", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 6, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/extensions/compress/CompressExtension.java", "insertions": 3, "deletions": 3}, {"lines": 115, "filePath": "jetty-websocket/jetty-websocket-tests/src/test/java/org/eclipse/jetty/websocket/tests/WriteAfterStopTest.java", "insertions": 115, "deletions": 0}], "commitDateTime": "2019-07-03 11:09:34", "spoonStatsSkippedReason": ""}], "title": "WebSocket hangs in blockingWrite", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2019-07-03 01:09:35", "statsSkippedReason": "", "body": "Hi,\r\n\r\nit was suggested to me by @joakime to open a new issue for #272 as it still occurs on 9.4.8 - with a slight tendency to occur more often now (which might be just bad luck on our end).\r\n\r\nUnfortunately, I can't say anything new about the issue. It still appears to be random (regardless of load for example) that threads end up in WAITING state and only a server restart helps to solve the issue.\r\n```\r\n\"clientOutboundChannel-23\" #144 prio=5 os_prio=0 tid=0x00007fceb0001000 nid=0x28f7 waiting on condition [0x00007fce59acc000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n        at sun.misc.Unsafe.park(Native Method)\r\n        - parking to wait for  <0x00000006ca773c88> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\n        at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\r\n        at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)\r\n        at org.eclipse.jetty.util.SharedBlockingCallback$Blocker.block(SharedBlockingCallback.java:210)\r\n        at org.eclipse.jetty.websocket.common.BlockingWriteCallback$WriteBlocker.block(BlockingWriteCallback.java:90)\r\n        at org.eclipse.jetty.websocket.common.WebSocketRemoteEndpoint.blockingWrite(WebSocketRemoteEndpoint.java:107)\r\n        at org.eclipse.jetty.websocket.common.WebSocketRemoteEndpoint.sendString(WebSocketRemoteEndpoint.java:393)\r\n        at org.springframework.web.socket.adapter.jetty.JettyWebSocketSession.sendTextMessage(JettyWebSocketSession.java:273)\r\n        at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:101)\r\n        at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.tryFlushMessageBuffer(ConcurrentWebSocketSessionDecorator.java:132)\r\n        at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.sendMessage(ConcurrentWebSocketSessionDecorator.java:104)\r\n        at org.springframework.web.socket.messaging.StompSubProtocolHandler.sendToClient(StompSubProtocolHandler.java:470)\r\n        at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:457)\r\n        at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:338)\r\n        at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:135)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n        at java.lang.Thread.run(Thread.java:745)\r\n```\r\n\r\nAs this is affecting our production servers, I'd appreciate if this is investigated again. I'd also appreciate any workaround that doesn't suggest a server restart.\r\n\r\nCheers,\r\nChristoph", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 565.0002777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/2061"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 3, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug", "Sponsored"], "user": "gregw", "filteredCommits": ["de7e3001efcc970a5e4bd63371f8ea93b6893e2c", "385ba7d70ded912ca702ebbba2694dbcbac61256"], "commits": {"fdc847fb18e66478eedc842daba95d6ac7fbf341": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "de7e3001efcc970a5e4bd63371f8ea93b6893e2c": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "385ba7d70ded912ca702ebbba2694dbcbac61256": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "356bf2e06f1a0f3b79a1fe30af0fb92a9ed8f74f": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "1deab9a78cb85aafd9608b98ea5db84f3304eded": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "337eb97127d8e44a45bd4e4b739c5e430e2a46f8": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2017-12-12 08:15:47", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "fdc847fb18e66478eedc842daba95d6ac7fbf341", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "cleanup temp fix for #2046\n", "commitParents": ["1cbc1cf5e0825510e028b6e80bb852677f37592f"], "commitHash": "de7e3001efcc970a5e4bd63371f8ea93b6893e2c", "commitSpoonAstDiffStats": [{"spoonFilePath": "ManagedSelector.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.StopSelector.update(java.nio.channels.Selector)", "DEL": 4, "INS": 1, "UPD": 0, "MOV": 4, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.StopSelector", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "de7e3001efcc970a5e4bd63371f8ea93b6893e2c tags/jetty-9.4.9.v20180320~172", "commitUser": "gregw", "authoredDateTime": "2018-01-11 17:01:05", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 8, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ManagedSelector.java", "insertions": 0, "deletions": 8}], "commitDateTime": "2018-01-11 17:01:05", "spoonStatsSkippedReason": ""}, {"commitMessage": "Remove graceful handling from ManagedSelector stop #2046\n\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\n", "commitParents": ["7d9f2d7e64b3be766234bfd09a784325abb0a48a"], "commitHash": "385ba7d70ded912ca702ebbba2694dbcbac61256", "commitSpoonAstDiffStats": [{"spoonFilePath": "ManagedSelector.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.doStop()", "DEL": 4, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 7}]}, {"spoonFilePath": "GracefulStopTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.GracefulStopTest.testSlowCloseTinyGraceful()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.GracefulStopTest.testSlowCloseGraceful()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "385ba7d70ded912ca702ebbba2694dbcbac61256 tags/jetty-9.4.9.v20180320~175", "commitUser": "gregw", "authoredDateTime": "2018-01-11 10:29:27", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 38, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ManagedSelector.java", "insertions": 6, "deletions": 32}, {"lines": 3, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/GracefulStopTest.java", "insertions": 3, "deletions": 0}], "commitDateTime": "2018-01-11 10:29:27", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #2046 - Graceful stop of connections (#2100)\n\n* Clean up of actions (now updates) prior to #2046 fix\r\n* prevent exceptions from termincating lifecycle doStop or destroy\r\n* Refactored ManagedSelector stop to always close endpoints\r\n* Fixed NPE if SelectorManager is already stopped\r\n* refactored after review\r\n* further simplifications after review\r\n* Wait only for oshut endpoints\r\n* Cleanup from review\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n", "commitParents": ["21365234f8cf036829f7a03e5c7b89a9572444f9"], "commitHash": "356bf2e06f1a0f3b79a1fe30af0fb92a9ed8f74f", "commitSpoonAstDiffStats": [], "nameRev": "356bf2e06f1a0f3b79a1fe30af0fb92a9ed8f74f tags/jetty-9.4.9.v20180320~181", "commitUser": "gregw", "authoredDateTime": "2018-01-09 20:36:41", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-io/src/test/java/org/eclipse/jetty/io/SelectorManagerTest.java", "insertions": 2, "deletions": 0}, {"lines": 10, "filePath": "jetty-client/src/test/java/org/eclipse/jetty/client/LivelockTest.java", "insertions": 5, "deletions": 5}, {"lines": 444, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ManagedSelector.java", "insertions": 225, "deletions": 219}, {"lines": 20, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ChannelEndPoint.java", "insertions": 7, "deletions": 13}, {"lines": 25, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/component/ContainerLifeCycle.java", "insertions": 23, "deletions": 2}, {"lines": 29, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/SelectorManager.java", "insertions": 23, "deletions": 6}, {"lines": 170, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/GracefulStopTest.java", "insertions": 170, "deletions": 0}], "commitDateTime": "2018-01-09 20:36:41", "spoonStatsSkippedReason": "tooManyChanges"}, {"commitMessage": "", "commitParents": [], "commitHash": "1deab9a78cb85aafd9608b98ea5db84f3304eded", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "337eb97127d8e44a45bd4e4b739c5e430e2a46f8", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "Server.stop not closing connections", "spoonStatsSummary": {"spoonMethodsChanged": 3, "DEL": 9.0, "INS": 2.0, "UPD": 0.0, "MOV": 6.0, "TOT": 17.0, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 46.0, "insertions": 6.0, "gitFilesChange": 1, "deletions": 40.0}, "closed": "2018-04-17 22:58:43", "statsSkippedReason": "", "body": "The `server.stop` method is not closing connections.  ", "changesInPackagesGIT": ["jetty-io/src/main/java/org/eclipse/jetty/io"], "changesInPackagesSPOON": ["org.eclipse.jetty.io.ManagedSelector.StopSelector.update(java.nio.channels.Selector)", "org.eclipse.jetty.io.ManagedSelector.doStop()", "org.eclipse.jetty.io.ManagedSelector.StopSelector"], "ttf": 126.00027777777778, "numCommits": 2, "url": "https://github.com/eclipse/jetty.project/issues/2046"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 5, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "JoonasVali", "filteredCommits": [], "commits": {"9363d42a26d96965deee4748f380768d3e53b2f0": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "f90aa3322c36b20e5b07cd8141ce25ea8833666b": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "60c86a388a6f21821a2ee45526a3f2fcaa1a9381": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "c7a251d046605c7837ed4488c5c0ce887d604d87": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "d1d4416f2a5855a5f3b08ed8bb73447ec6d5c35e": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "eebe1394945231f87259b274890727cafd750628": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2017-12-11 08:56:39", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "9363d42a26d96965deee4748f380768d3e53b2f0", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "f90aa3322c36b20e5b07cd8141ce25ea8833666b", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "60c86a388a6f21821a2ee45526a3f2fcaa1a9381", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "c7a251d046605c7837ed4488c5c0ce887d604d87", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "d1d4416f2a5855a5f3b08ed8bb73447ec6d5c35e", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "sbordet", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Jetty 9.4.x 2043 concurrentmodification annotation parsing (#2052)\n\n* Issue #2043 Fix ConcurrentModificationException listing duplicate class scanning\r\n\r\nSigned-off-by: Jan Bartel <janb@webtide.com>\r\n", "commitParents": ["8660055574026ed963f4f5b7aa2e8a16ad292f50"], "commitHash": "eebe1394945231f87259b274890727cafd750628", "commitSpoonAstDiffStats": [{"spoonFilePath": "TestAnnotationParser.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.annotations.TestAnnotationParser.testScanDuplicateClasses()", "DEL": 0, "INS": 1, "UPD": 6, "MOV": 0, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.annotations.TestAnnotationParser.DuplicateClassScanHandler", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.annotations.TestAnnotationParser.testScanDuplicateClassesInJars()", "DEL": 0, "INS": 1, "UPD": 6, "MOV": 0, "TOT": 7}]}, {"spoonFilePath": "AnnotationParser.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.annotations.AnnotationParser.addParsedClass(java.lang.String,org.eclipse.jetty.util.resource.Resource)", "DEL": 3, "INS": 1, "UPD": 3, "MOV": 0, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.annotations.AnnotationParser.getParsedLocations(java.lang.String)", "DEL": 3, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 5}]}], "nameRev": "eebe1394945231f87259b274890727cafd750628 tags/jetty-9.4.9.v20180320~209", "commitUser": "janbartel", "authoredDateTime": "2017-12-14 09:45:29", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 25, "filePath": "jetty-annotations/src/main/java/org/eclipse/jetty/annotations/AnnotationParser.java", "insertions": 11, "deletions": 14}, {"lines": 48, "filePath": "jetty-annotations/src/test/java/org/eclipse/jetty/annotations/TestAnnotationParser.java", "insertions": 40, "deletions": 8}], "commitDateTime": "2017-12-14 09:45:29", "spoonStatsSkippedReason": ""}], "title": "ConcurrentModificationException during annotation parsing", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2017-12-14 08:46:41", "statsSkippedReason": "", "body": "I believe the fix to issue https://github.com/eclipse/jetty.project/issues/1819 seen here: https://github.com/eclipse/jetty.project/commit/7ad415b9b8dba2b78eb486aab6191face654e72b\r\nhas caused a ConcurrentModificationException on the ArrayList now used in the _parsedClassNames.\r\nWhile the ConcurrentHashMap itself is thread safe, the internal ArrayLists are not when iterating over the list is being done in \r\n`LOG.warn(\"{} scanned from multiple locations: {}\", classname, existing);`\r\n\r\nI observed a ConcurrentModificationException happening in our test logs which resulted in deployment failure:\r\n\r\njava.util.ConcurrentModificationException\r\n\t|\tat java.util.ArrayList$Itr.checkForComodification(ArrayList.java:901)\r\n\t|\tat java.util.ArrayList$Itr.next(ArrayList.java:851)\r\n\t|\tat java.util.AbstractCollection.toString(AbstractCollection.java:461)\r\n\t|\tat java.lang.String.valueOf(String.java:2994)\r\n\t|\tat org.eclipse.jetty.util.log.StdErrLog.format(StdErrLog.java:552)\r\n\t|\tat org.eclipse.jetty.util.log.StdErrLog.format(StdErrLog.java:441)\r\n\t|\tat org.eclipse.jetty.util.log.StdErrLog.warn(StdErrLog.java:296)\r\n\t|\tat org.eclipse.jetty.annotations.AnnotationParser.addParsedClass(AnnotationParser.java:572)\r\n\t|\tat org.eclipse.jetty.annotations.AnnotationParser.parseJarEntry(AnnotationParser.java:913)\r\n\t|\tat org.eclipse.jetty.annotations.AnnotationParser.lambda$parseJar$0(AnnotationParser.java:879)\r\n\t|\tat java.util.TreeMap$ValueSpliterator.forEachRemaining(TreeMap.java:2897)\r\n\t|\tat java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:580)\r\n\t|\tat org.eclipse.jetty.annotations.AnnotationParser.parseJar(AnnotationParser.java:875)\r\n\t|\tat org.eclipse.jetty.annotations.AnnotationParser.parse(AnnotationParser.java:839)\r\n\t|\tat org.eclipse.jetty.annotations.AnnotationConfiguration$ParserTask.call(AnnotationConfiguration.java:161)\r\n\t|\tat org.eclipse.jetty.annotations.AnnotationConfiguration$1.run(AnnotationConfiguration.java:468)\r\n\t|\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:708)\r\n\t|\tat org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:626)\r\n\t|\tat java.lang.Thread.run(Thread.java:748)", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 2.000277777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/2043"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "jroper", "filteredCommits": [], "commits": {"2ee2d429741a2afe4fc8b380eca886d86f0150ee": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "5ce07dddd645771885ab1f262e97f363cfb91577": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2017-11-30 03:01:06", "commitsDetails": [{"commitMessage": "#2006 Use a NOOP to allow unhandle to cope with stolen read (#2009)\n\n#2006 Use a NOOP to allow unhandle to cope with stolen read\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n", "commitParents": ["15c0f7959349bec8f0f2d74698ffc97b38d46bb0"], "commitHash": "5ce07dddd645771885ab1f262e97f363cfb91577", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpChannel.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannel.handle()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AsyncServletIOTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.AsyncServletIOTest.testStolenAsyncRead()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.AsyncServletIOTest.WrappingQTP", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.AsyncServletIOTest.StolenAsyncReadServlet", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.AsyncServletIOTest", "DEL": 0, "INS": 2, "UPD": 3, "MOV": 1, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.servlet.AsyncServletIOTest.setUp()", "DEL": 0, "INS": 5, "UPD": 0, "MOV": 0, "TOT": 5}]}, {"spoonFilePath": "HttpChannelState.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.unhandle()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.handling()", "DEL": 2, "INS": 2, "UPD": 1, "MOV": 0, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.Action", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "5ce07dddd645771885ab1f262e97f363cfb91577 tags/jetty-9.4.9.v20180320~229", "commitUser": "gregw", "authoredDateTime": "2017-12-02 12:14:43", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 9, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannelState.java", "insertions": 6, "deletions": 3}, {"lines": 5, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannel.java", "insertions": 5, "deletions": 0}, {"lines": 190, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/AsyncServletIOTest.java", "insertions": 188, "deletions": 2}], "commitDateTime": "2017-12-02 12:14:43", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "2ee2d429741a2afe4fc8b380eca886d86f0150ee", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "sbordet", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "ServletInputStream.isReady stealing read interest from existing/pending onDataAvailable", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2018-03-13 02:33:28", "statsSkippedReason": "", "body": "This affects the HEAD of the jetty 9.4.x branch, and 9.4.7. I haven't tested any other versions.\r\n\r\nI haven't fully got to the bottom of this issue, but I have observed what appears to be a race condition, where `isReady` is not registering interest in reads, due to the channel state being `ASYNC_WOKEN`, as I understand it, when it shouldn't be. As it's a race condition and at the moment I can reproduce it once every 20 or so requests, I haven't been able to observe it entirely in a debugger, I've got to this stage by scattering the code with printlns.\r\n\r\nHere's what I've observed.\r\n\r\n* I have a client that is making a POST request, and writing data one byte at a time, at random intervals between 0 and 10 milliseconds. I am fairly confident that it is doing this correctly because I have swapped out Jetty for Tomcat and in Tomcat, I don't see the same problem.\r\n* I'm using the async IO APIs.\r\n* After receiving the request, asynchronously, my process does an invocation of `isReady`, which returns `true`, and then I subsequently successfully read one byte (I only request to read one byte at a time).\r\n* My process then does another invocation of `isReady`, this time, it returns `false`. Tracing inside the method reveals that it invokes `HttpChannelState.onReadUnready`, and in that, `HttpChannelState._asyncRead` is `READY`, but `HttpChannelState._state` is `ASYNC_WOKEN`, so consequently `interested` ends up being `false`, and the channel never registers interest in reads, so when more data comes, `onDataAvailable` never gets invoked.\r\n\r\nI added some more tracing to find out what is setting `ASYNC_WOKEN` and when (I added a println before each place where `_state` is set to it), and found that it's being set to that before my first invocation of `isReady`, and is not being set again. So presumably there is either a missing `_state = ASYNC_WAIT`, or a race between `_state = ASYNC_WAIT` being invoked and `onReadUnready` reading it.\r\n\r\nAt this stage I'm kind of stabbing in the dark to know what to look at next, because I'm not that familiar with the code base, if from my description it's not obvious where the bug is, I'd appreciate pointers as to what debugging I should insert next. Where would you expect `_state` to be being set to `ASYNC_WAIT`? What methods should I look at to determine why it's not being set?", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 102.00027777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/2006"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 3, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 2}, "labels": ["Bug", "High Priority", "Performance"], "user": "sbordet", "filteredCommits": ["333c22d670fd35a86bb311f1d81dff1dc6427a5e"], "commits": {"34464682e52d4982dec9cff26f1da2bbc9aacd97": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "0142509975f1554868d01bceaaf28bb70ba309bf": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "333c22d670fd35a86bb311f1d81dff1dc6427a5e": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "47d46ec60eec626a7ab25786ad0a43c5fc9e3c5f": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "186ea082b69272e0f23b87b7a15d1ab6bf037a19": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "b834cda86d6d12d520ac4d9c4444081b9bee2b79": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2017-10-27 14:38:07", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "34464682e52d4982dec9cff26f1da2bbc9aacd97", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1920 - Connect Timeouts with NonBlocking CreateEndPoint.\n\nReverted CreateEndPoint to be non-blocking, as\nthe real issue was determined to be #1924 instead.\n", "commitParents": ["333c22d670fd35a86bb311f1d81dff1dc6427a5e"], "commitHash": "0142509975f1554868d01bceaaf28bb70ba309bf", "commitSpoonAstDiffStats": [{"spoonFilePath": "ManagedSelector.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.CreateEndPoint", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "0142509975f1554868d01bceaaf28bb70ba309bf tags/jetty-9.4.8.v20171121~39", "commitUser": "sbordet", "authoredDateTime": "2017-10-30 00:42:53", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ManagedSelector.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2017-10-30 00:42:53", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1924 - ManagedSelector livelock.\n\n* Actually using the MAX_ACTION_PERIOD value rather than a harcoded one.\n* Waking up the selector outside the sync block.\n", "commitParents": ["d90eeba233abc8426bb6f4fbc220659aa4e1afc9"], "commitHash": "333c22d670fd35a86bb311f1d81dff1dc6427a5e", "commitSpoonAstDiffStats": [{"spoonFilePath": "ManagedSelector.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.SelectorProducer.nextAction()", "DEL": 3, "INS": 6, "UPD": 1, "MOV": 5, "TOT": 15}]}, {"spoonFilePath": "LivelockTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.LivelockTest.testLivelock()", "DEL": 3, "INS": 4, "UPD": 1, "MOV": 0, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.client.LivelockTest.sleep(long)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.LivelockTest.after()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 2, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.client.LivelockTest.testLivelock().1.run()", "DEL": 1, "INS": 1, "UPD": 1, "MOV": 2, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.client.LivelockTest.testLivelock().2.run()", "DEL": 1, "INS": 1, "UPD": 1, "MOV": 2, "TOT": 5}]}], "nameRev": "333c22d670fd35a86bb311f1d81dff1dc6427a5e tags/jetty-9.4.8.v20171121~40", "commitUser": "sbordet", "authoredDateTime": "2017-10-30 00:36:01", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 42, "filePath": "jetty-client/src/test/java/org/eclipse/jetty/client/LivelockTest.java", "insertions": 28, "deletions": 14}, {"lines": 43, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ManagedSelector.java", "insertions": 25, "deletions": 18}], "commitDateTime": "2017-10-30 00:36:01", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1924 - ManagedSelector livelock. (#1963)\n\n* Issue #1924 - ManagedSelector livelock.\r\n\r\nAlternate implementation that is count based rather than time based.\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n", "commitParents": ["48df74224a231bae9f7ff4a721a8f01a815b642f"], "commitHash": "47d46ec60eec626a7ab25786ad0a43c5fc9e3c5f", "commitSpoonAstDiffStats": [{"spoonFilePath": "ManagedSelector.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector", "DEL": 1, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.SelectorProducer.nextAction()", "DEL": 7, "INS": 10, "UPD": 5, "MOV": 10, "TOT": 32}]}], "nameRev": "47d46ec60eec626a7ab25786ad0a43c5fc9e3c5f tags/jetty-9.4.8.v20171121~11", "commitUser": "gregw", "authoredDateTime": "2017-11-14 10:27:04", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 58, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ManagedSelector.java", "insertions": 33, "deletions": 25}], "commitDateTime": "2017-11-14 10:27:04", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "186ea082b69272e0f23b87b7a15d1ab6bf037a19", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "b834cda86d6d12d520ac4d9c4444081b9bee2b79", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "ManagedSelector can livelock under high load", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 3.0, "INS": 6.0, "UPD": 1.0, "MOV": 5.0, "TOT": 15.0, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 43.0, "insertions": 25.0, "gitFilesChange": 1, "deletions": 18.0}, "closed": "2018-03-13 02:24:43", "statsSkippedReason": "", "body": "There is evidence that under high load a thread may livelock running selector actions.", "changesInPackagesGIT": ["jetty-io/src/main/java/org/eclipse/jetty/io"], "changesInPackagesSPOON": ["org.eclipse.jetty.io.ManagedSelector.SelectorProducer.nextAction()"], "ttf": 136.00027777777777, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1924"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 3, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug", "High Priority", "Sponsored"], "user": "gregw", "filteredCommits": ["ce5993bc6f665fddb9f6b3c034cfe6e979de6825", "ce39d50a550bd0c3b690be12709eb1ee28be8024", "d1e5883ad4657983578d0d9688099c913897add6"], "commits": {"d1e5883ad4657983578d0d9688099c913897add6": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "ce5993bc6f665fddb9f6b3c034cfe6e979de6825": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "0142509975f1554868d01bceaaf28bb70ba309bf": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "ab849e8cc5c9408e633a98977bbd3ccf0c1f0040": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "ce39d50a550bd0c3b690be12709eb1ee28be8024": {"commitUser": "sbordet", "commitGHEventType": "closed"}, "bfaa2d536bca939a39962b792ff76198e5f101ca": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2017-10-25 00:45:50", "commitsDetails": [{"commitMessage": "Issue #1920 - Connect Timeouts with NonBlocking CreateEndPoint.\n\nMade CreateEndPoint and DestroyEndPoint blocking.\n", "commitParents": ["ee3b93de037b17f63bf5088cb1a193a71682c44e"], "commitHash": "d1e5883ad4657983578d0d9688099c913897add6", "commitSpoonAstDiffStats": [{"spoonFilePath": "ManagedSelector.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.CreateEndPoint", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.DestroyEndPoint", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "d1e5883ad4657983578d0d9688099c913897add6 tags/jetty-9.4.8.v20171121~24", "commitUser": "sbordet", "authoredDateTime": "2017-11-08 16:28:40", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 4, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ManagedSelector.java", "insertions": 2, "deletions": 2}], "commitDateTime": "2017-11-08 16:28:40", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1920 Connect timeout\n\nImproved the ManagedSelector Dump\nReverted CreateEndPoint to be a blocking task\n", "commitParents": ["6e94d4023c49525257d2eff761f3abcf73ea725f"], "commitHash": "ce5993bc6f665fddb9f6b3c034cfe6e979de6825", "commitSpoonAstDiffStats": [{"spoonFilePath": "ManagedSelector.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.CreateEndPoint", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.DumpKeys.run()", "DEL": 1, "INS": 5, "UPD": 0, "MOV": 1, "TOT": 7}]}], "nameRev": "ce5993bc6f665fddb9f6b3c034cfe6e979de6825 tags/jetty-9.4.8.v20171121~50", "commitUser": "gregw", "authoredDateTime": "2017-10-25 15:59:51", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 22, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ManagedSelector.java", "insertions": 20, "deletions": 2}], "commitDateTime": "2017-10-25 15:59:51", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1920 - Connect Timeouts with NonBlocking CreateEndPoint.\n\nReverted CreateEndPoint to be non-blocking, as\nthe real issue was determined to be #1924 instead.\n", "commitParents": ["333c22d670fd35a86bb311f1d81dff1dc6427a5e"], "commitHash": "0142509975f1554868d01bceaaf28bb70ba309bf", "commitSpoonAstDiffStats": [{"spoonFilePath": "ManagedSelector.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.CreateEndPoint", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "0142509975f1554868d01bceaaf28bb70ba309bf tags/jetty-9.4.8.v20171121~39", "commitUser": "sbordet", "authoredDateTime": "2017-10-30 00:42:53", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ManagedSelector.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2017-10-30 00:42:53", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1920 - Connect Timeouts with NonBlocking CreateEndPoint.\n\nAdded a LiveLock (BusyBlocking) test.\nModified ManagedSelector to fair share between actions and selecting\n", "commitParents": ["9fd47fd383088159e2c2b26ad736609801478736"], "commitHash": "ab849e8cc5c9408e633a98977bbd3ccf0c1f0040", "commitSpoonAstDiffStats": [{"spoonFilePath": "ManagedSelector.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.Acceptor", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.SelectorProducer.produce()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.Connect", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.Accept", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.NonBlockingAction", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.DestroyEndPoint", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.SelectorProducer.nextAction()", "DEL": 2, "INS": 4, "UPD": 4, "MOV": 13, "TOT": 23}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.CloseSelector", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.CloseEndPoints", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.SelectorProducer.update()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.ConnectTimeout", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.DumpKeys", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ChannelEndPoint.java", "spoonMethods": []}, {"spoonFilePath": "Invocable.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.thread.NonBlocking", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "IOTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.IOTest.testSelectorWakeup()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "LivelockTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.LivelockTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "ab849e8cc5c9408e633a98977bbd3ccf0c1f0040 tags/jetty-9.4.8.v20171121~42", "commitUser": "gregw", "authoredDateTime": "2017-10-28 14:54:08", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 10, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/thread/Invocable.java", "insertions": 10, "deletions": 0}, {"lines": 88, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ManagedSelector.java", "insertions": 46, "deletions": 42}, {"lines": 134, "filePath": "jetty-client/src/test/java/org/eclipse/jetty/client/LivelockTest.java", "insertions": 134, "deletions": 0}, {"lines": 1, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ChannelEndPoint.java", "insertions": 0, "deletions": 1}, {"lines": 63, "filePath": "jetty-io/src/test/java/org/eclipse/jetty/io/IOTest.java", "insertions": 63, "deletions": 0}], "commitDateTime": "2017-10-28 14:55:40", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #1920 - Connect Timeouts with NonBlocking CreateEndPoint.\n\nOnly for the client having a non-blocking CreateEndPoint was a problem,\nbecause it was sending requests from onOpen().\nFor a busy client with always queued requests, CreateEndPoint.run()\ndid never return, causing the NIO selection to stall.\n", "commitParents": ["7bc6ec6b326d793a977157a8716d4bf730421791"], "commitHash": "ce39d50a550bd0c3b690be12709eb1ee28be8024", "commitSpoonAstDiffStats": [{"spoonFilePath": "ManagedSelector.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.DestroyEndPoint.close()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.processConnect(java.nio.channels.SelectionKey,org.eclipse.jetty.io.ManagedSelector$Connect)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.DumpKeys.run()", "DEL": 5, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.CreateEndPoint", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.DumpKeys.run().1.toString()", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 2, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.Accept.run()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.processConnect(java.nio.channels.SelectionKey,org.eclipse.jetty.io.ManagedSelector$Connect).1", "DEL": 4, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.CreateEndPoint.getInvocationType()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "ce39d50a550bd0c3b690be12709eb1ee28be8024 tags/jetty-9.4.8.v20171121~48", "commitUser": "sbordet", "authoredDateTime": "2017-10-25 09:21:22", "commitGHEventType": "closed", "commitGitStats": [{"lines": 44, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ManagedSelector.java", "insertions": 20, "deletions": 24}], "commitDateTime": "2017-10-25 09:21:22", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #1920 - Connect Timeouts with NonBlocking CreateEndPoint.\n\nMade CreateEndPoint a blocking task, because it calls into application\ncode via Connection.Listener, and for safety we assume it may be\nblocking code, avoiding to stall the processing of NIO selected keys.\n", "commitParents": ["2bd39c897d237aa5511606f8b1952dc3db8839ad"], "commitHash": "bfaa2d536bca939a39962b792ff76198e5f101ca", "commitSpoonAstDiffStats": [{"spoonFilePath": "ManagedSelector.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.CreateEndPoint.getInvocationType()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.CreateEndPoint", "DEL": 3, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.Accept.run()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.processConnect(java.nio.channels.SelectionKey,org.eclipse.jetty.io.ManagedSelector$Connect).1", "DEL": 0, "INS": 4, "UPD": 0, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.createEndPoint(java.nio.channels.SelectableChannel,java.nio.channels.SelectionKey)", "DEL": 1, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.processConnect(java.nio.channels.SelectionKey,org.eclipse.jetty.io.ManagedSelector$Connect)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "bfaa2d536bca939a39962b792ff76198e5f101ca tags/jetty-9.4.8.v20171121~44", "commitUser": "sbordet", "authoredDateTime": "2017-10-26 00:19:06", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 18, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ManagedSelector.java", "insertions": 4, "deletions": 14}], "commitDateTime": "2017-10-26 00:21:51", "spoonStatsSkippedReason": ""}], "title": "Connect Timeouts with NonBlocking CreateEndPoint", "spoonStatsSummary": {"spoonMethodsChanged": 9, "DEL": 13, "INS": 11, "UPD": 2, "MOV": 3, "TOT": 29, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 70, "insertions": 42, "gitFilesChange": 1, "deletions": 28}, "closed": "2017-10-25 07:21:42", "statsSkippedReason": "", "body": "There is evidence that #1804 is causing some deployments to see connection timeouts when a Jetty HttpClient is communicating with a Jetty server.    The problem has been bisected to a few commits, with the fixes to #1804 being the most likely suspects as the change affects both how the client creates outgoing endpoints and how the server accepts incoming ones.\r\n\r\n", "changesInPackagesGIT": ["jetty-io/src/main/java/org/eclipse/jetty/io"], "changesInPackagesSPOON": ["org.eclipse.jetty.io.ManagedSelector.Accept.run()", "org.eclipse.jetty.io.ManagedSelector.processConnect(java.nio.channels.SelectionKey,org.eclipse.jetty.io.ManagedSelector$Connect)", "org.eclipse.jetty.io.ManagedSelector.DumpKeys.run()", "org.eclipse.jetty.io.ManagedSelector.DestroyEndPoint.close()", "org.eclipse.jetty.io.ManagedSelector.DumpKeys.run().1.toString()", "org.eclipse.jetty.io.ManagedSelector.CreateEndPoint", "org.eclipse.jetty.io.ManagedSelector.processConnect(java.nio.channels.SelectionKey,org.eclipse.jetty.io.ManagedSelector$Connect).1", "org.eclipse.jetty.io.ManagedSelector.DestroyEndPoint", "org.eclipse.jetty.io.ManagedSelector.CreateEndPoint.getInvocationType()"], "ttf": 0.0002777777777777778, "numCommits": 3, "url": "https://github.com/eclipse/jetty.project/issues/1920"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "sdutry", "filteredCommits": ["90bd1a7c7970ca03d91cf252a91ae91b59b52dd1"], "commits": {"90bd1a7c7970ca03d91cf252a91ae91b59b52dd1": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2017-10-09 20:08:15", "commitsDetails": [{"commitMessage": "Issue #1879\n", "commitParents": ["12dcfabd4e4e812a7257e107b3a2173e77cd13ac"], "commitHash": "90bd1a7c7970ca03d91cf252a91ae91b59b52dd1", "commitSpoonAstDiffStats": [{"spoonFilePath": "JettyTldPreScanned.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.apache.jsp.JettyTldPreScanned", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "JettyJasperInitializer.java", "spoonMethods": []}, {"spoonFilePath": "TestJettyTldPreScanned.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.jsp.TestJettyTldPreScanned", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "90bd1a7c7970ca03d91cf252a91ae91b59b52dd1 tags/jetty-9.4.8.v20171121~100", "commitUser": "janbartel", "authoredDateTime": "2017-10-10 16:02:52", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 0, "filePath": "apache-jsp/src/test/resources/taglib.jar", "insertions": 0, "deletions": 0}, {"lines": 4, "filePath": "apache-jsp/src/main/java/org/eclipse/jetty/apache/jsp/JettyJasperInitializer.java", "insertions": 1, "deletions": 3}, {"lines": 25, "filePath": "apache-jsp/src/test/resources/META-INF/foo-taglib.tld", "insertions": 25, "deletions": 0}, {"lines": 106, "filePath": "apache-jsp/src/main/java/org/eclipse/jetty/apache/jsp/JettyTldPreScanned.java", "insertions": 106, "deletions": 0}, {"lines": 74, "filePath": "apache-jsp/src/test/java/org/eclipse/jetty/jsp/TestJettyTldPreScanned.java", "insertions": 74, "deletions": 0}], "commitDateTime": "2017-10-10 16:03:46", "spoonStatsSkippedReason": ""}], "title": "'Bad tld url' seen during :jetty-run when running integration tests", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 110, "insertions": 107, "gitFilesChange": 2, "deletions": 3}, "closed": "2017-10-10 22:41:51", "statsSkippedReason": "", "body": "### affected versions\r\n* `9.4.7.v20170914`\r\n### problem\r\njetty server fails to start from `jetty-maven-plugin`, \r\n* only when started during the integration tests.\r\n* works fine when simply running \"mvn jetty:run\"\r\n### Last version without this exception\r\n* `9.4.6.v20170531`\r\n### Stacktraces and logging\r\n#### Travis build\r\n  * [build #103](https://travis-ci.org/struts-community-plugins/struts2-jquery/builds/283358089)\r\n    * [Job #103.1](https://travis-ci.org/struts-community-plugins/struts2-jquery/jobs/283358090)\r\n    * [Job #103.2](https://travis-ci.org/struts-community-plugins/struts2-jquery/jobs/283358091)\r\n#### Stacktrace\r\n```\r\n[WARNING] \r\njava.lang.IllegalStateException: Bad tld url: file:/home/travis/build/struts-community-plugins/struts2-jquery/struts2-jquery-plugin/target/classes/META-INF/struts-jquery-tags.tld\r\n\tat org.apache.jasper.servlet.TldPreScanned.scanJars(TldPreScanned.java:51)\r\n\tat org.apache.jasper.servlet.TldScanner.scan(TldScanner.java:104)\r\n\tat org.apache.jasper.servlet.JasperInitializer.onStartup(JasperInitializer.java:101)\r\n\tat org.eclipse.jetty.plus.annotation.ContainerInitializer.callStartup(ContainerInitializer.java:140)\r\n\tat org.eclipse.jetty.annotations.ServletContainerInitializersStarter.doStart(ServletContainerInitializersStarter.java:63)\r\n\tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n\tat org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:329)\r\n\tat org.eclipse.jetty.webapp.WebAppContext.startWebapp(WebAppContext.java:1514)\r\n\tat org.eclipse.jetty.maven.plugin.JettyWebAppContext.startWebapp(JettyWebAppContext.java:359)\r\n\tat org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1476)\r\n\tat org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:785)\r\n\tat org.eclipse.jetty.servlet.ServletContextHandler.doStart(ServletContextHandler.java:261)\r\n\tat org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:545)\r\n\tat org.eclipse.jetty.maven.plugin.JettyWebAppContext.doStart(JettyWebAppContext.java:434)\r\n\tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:131)\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:113)\r\n\tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113)\r\n\tat org.eclipse.jetty.server.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:167)\r\n\tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:131)\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:113)\r\n\tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113)\r\n\tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:131)\r\n\tat org.eclipse.jetty.server.Server.start(Server.java:449)\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:105)\r\n\tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113)\r\n\tat org.eclipse.jetty.server.Server.doStart(Server.java:416)\r\n\tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n\tat org.eclipse.jetty.maven.plugin.AbstractJettyMojo.startJetty(AbstractJettyMojo.java:467)\r\n\tat org.eclipse.jetty.maven.plugin.AbstractJettyMojo.execute(AbstractJettyMojo.java:333)\r\n\tat org.eclipse.jetty.maven.plugin.JettyRunMojo.execute(JettyRunMojo.java:180)\r\n\tat org.eclipse.jetty.maven.plugin.JettyStartMojo.execute(JettyStartMojo.java:48)\r\n\tat org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:134)\r\n\tat org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:208)\r\n\tat org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:154)\r\n\tat org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:146)\r\n\tat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:117)\r\n\tat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:81)\r\n\tat org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build(SingleThreadedBuilder.java:51)\r\n\tat org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:128)\r\n\tat org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:309)\r\n\tat org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:194)\r\n\tat org.apache.maven.DefaultMaven.execute(DefaultMaven.java:107)\r\n\tat org.apache.maven.cli.MavenCli.execute(MavenCli.java:993)\r\n\tat org.apache.maven.cli.MavenCli.doMain(MavenCli.java:345)\r\n\tat org.apache.maven.cli.MavenCli.main(MavenCli.java:191)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:289)\r\n\tat org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:229)\r\n\tat org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:415)\r\n\tat org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:356)\r\n[WARNING] Failed startup of context o.e.j.m.p.JettyWebAppContext@5f0f77e8{/,file:///home/travis/build/struts-community-plugins/struts2-jquery/struts2-jquery-integration-tests/src/main/webapp/,UNAVAILABLE}{file:///home/travis/build/struts-community-plugins/struts2-jquery/struts2-jquery-integration-tests/src/main/webapp/}\r\njava.lang.RuntimeException: java.lang.IllegalStateException: Bad tld url: file:/home/travis/build/struts-community-plugins/struts2-jquery/struts2-jquery-plugin/target/classes/META-INF/struts-jquery-tags.tld\r\n\tat org.eclipse.jetty.annotations.ServletContainerInitializersStarter.doStart(ServletContainerInitializersStarter.java:68)\r\n\tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n\tat org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:329)\r\n\tat org.eclipse.jetty.webapp.WebAppContext.startWebapp(WebAppContext.java:1514)\r\n\tat org.eclipse.jetty.maven.plugin.JettyWebAppContext.startWebapp(JettyWebAppContext.java:359)\r\n\tat org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1476)\r\n\tat org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:785)\r\n\tat org.eclipse.jetty.servlet.ServletContextHandler.doStart(ServletContextHandler.java:261)\r\n\tat org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:545)\r\n\tat org.eclipse.jetty.maven.plugin.JettyWebAppContext.doStart(JettyWebAppContext.java:434)\r\n\tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:131)\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:113)\r\n\tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113)\r\n\tat org.eclipse.jetty.server.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:167)\r\n\tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:131)\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:113)\r\n\tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113)\r\n\tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:131)\r\n\tat org.eclipse.jetty.server.Server.start(Server.java:449)\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:105)\r\n\tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113)\r\n\tat org.eclipse.jetty.server.Server.doStart(Server.java:416)\r\n\tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n\tat org.eclipse.jetty.maven.plugin.AbstractJettyMojo.startJetty(AbstractJettyMojo.java:467)\r\n\tat org.eclipse.jetty.maven.plugin.AbstractJettyMojo.execute(AbstractJettyMojo.java:333)\r\n\tat org.eclipse.jetty.maven.plugin.JettyRunMojo.execute(JettyRunMojo.java:180)\r\n\tat org.eclipse.jetty.maven.plugin.JettyStartMojo.execute(JettyStartMojo.java:48)\r\n\tat org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:134)\r\n\tat org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:208)\r\n\tat org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:154)\r\n\tat org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:146)\r\n\tat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:117)\r\n\tat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:81)\r\n\tat org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build(SingleThreadedBuilder.java:51)\r\n\tat org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:128)\r\n\tat org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:309)\r\n\tat org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:194)\r\n\tat org.apache.maven.DefaultMaven.execute(DefaultMaven.java:107)\r\n\tat org.apache.maven.cli.MavenCli.execute(MavenCli.java:993)\r\n\tat org.apache.maven.cli.MavenCli.doMain(MavenCli.java:345)\r\n\tat org.apache.maven.cli.MavenCli.main(MavenCli.java:191)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:289)\r\n\tat org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:229)\r\n\tat org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:415)\r\n\tat org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:356)\r\nCaused by: java.lang.IllegalStateException: Bad tld url: file:/home/travis/build/struts-community-plugins/struts2-jquery/struts2-jquery-plugin/target/classes/META-INF/struts-jquery-tags.tld\r\n\tat org.apache.jasper.servlet.TldPreScanned.scanJars(TldPreScanned.java:51)\r\n\tat org.apache.jasper.servlet.TldScanner.scan(TldScanner.java:104)\r\n\tat org.apache.jasper.servlet.JasperInitializer.onStartup(JasperInitializer.java:101)\r\n\tat org.eclipse.jetty.plus.annotation.ContainerInitializer.callStartup(ContainerInitializer.java:140)\r\n\tat org.eclipse.jetty.annotations.ServletContainerInitializersStarter.doStart(ServletContainerInitializersStarter.java:63)\r\n\t... 51 more\r\n```\r\n### pom configuration\r\n```xml\r\n                <plugin>\r\n                    <groupId>org.eclipse.jetty</groupId>\r\n                    <artifactId>jetty-maven-plugin</artifactId>\r\n                    <version>${jetty-maven-plugin.version}</version>\r\n                    <configuration>\r\n                        <stopKey>CTRL+C</stopKey>\r\n                        <stopPort>8999</stopPort>\r\n                        <scanIntervalSeconds>10</scanIntervalSeconds>\r\n                    </configuration>\r\n                    <executions>\r\n                        <execution>\r\n                            <id>start-jetty</id>\r\n                            <phase>pre-integration-test</phase>\r\n                            <goals>\r\n                                <goal>start</goal>\r\n                            </goals>\r\n                            <configuration>\r\n                                <scanIntervalSeconds>0</scanIntervalSeconds>\r\n                                <daemon>true</daemon>\r\n                            </configuration>\r\n                        </execution>\r\n                        <execution>\r\n                            <id>stop-jetty</id>\r\n                            <phase>post-integration-test</phase>\r\n                            <goals>\r\n                                <goal>stop</goal>\r\n                            </goals>\r\n                        </execution>\r\n                    </executions>\r\n                </plugin>\r\n```\r\nAny suggestions on how to prevent this would be greatly appreciated.", "changesInPackagesGIT": ["apache-jsp/src/main/java/org/eclipse/jetty/apache/jsp"], "changesInPackagesSPOON": ["org.eclipse.jetty.apache.jsp.JettyTldPreScanned"], "ttf": 1.0002777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1879"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug", "High Priority", "Test"], "user": "gregw", "filteredCommits": ["bddd5ca5ded6197ef8a7d558534a7409eb0e8c0c", "e58a7b488ed9268ef346523a7be0f90c4ca4c152"], "commits": {"e58a7b488ed9268ef346523a7be0f90c4ca4c152": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "bddd5ca5ded6197ef8a7d558534a7409eb0e8c0c": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "1da19dc2fdf794f0f23acc776be94ebba41b2640": {"commitUser": "gregw", "commitGHEventType": "closed"}}, "created": "2017-09-21 03:59:55", "commitsDetails": [{"commitMessage": "Issue #1832 work around\n", "commitParents": ["c2b7177628429156a149b2b72830bb62beab546b"], "commitHash": "e58a7b488ed9268ef346523a7be0f90c4ca4c152", "commitSpoonAstDiffStats": [{"spoonFilePath": "SelectChannelServerSslTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ssl.SelectChannelServerSslTest.init()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ssl.SelectChannelServerSslTest.testFullHeader()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "HttpServerTestBase.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpServerTestBase.testFullHeader()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 4, "TOT": 6}]}], "nameRev": "e58a7b488ed9268ef346523a7be0f90c4ca4c152 tags/jetty-9.4.8.v20171121~124^2~2", "commitUser": "gregw", "authoredDateTime": "2017-09-26 17:04:42", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 10, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ssl/SelectChannelServerSslTest.java", "insertions": 1, "deletions": 9}, {"lines": 18, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/HttpServerTestBase.java", "insertions": 13, "deletions": 5}], "commitDateTime": "2017-09-26 17:04:42", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1832 SelectChannelServerSslTest.testFullMethod\n\nWork around for now by accepting exception rather than error response.\n", "commitParents": ["5452ed18fab5915afa6f9c15bf6b2ae3a0489deb"], "commitHash": "bddd5ca5ded6197ef8a7d558534a7409eb0e8c0c", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpServerTestBase.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpServerTestBase.testFullHeader()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 3}]}], "nameRev": "bddd5ca5ded6197ef8a7d558534a7409eb0e8c0c tags/jetty-9.4.8.v20171121~125^2~2", "commitUser": "gregw", "authoredDateTime": "2017-09-21 14:00:58", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 12, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/HttpServerTestBase.java", "insertions": 9, "deletions": 3}], "commitDateTime": "2017-09-21 14:00:58", "spoonStatsSkippedReason": ""}, {"commitMessage": "[WIP!] HTTP Close #1832 (#2338)\n\n* Only close if parser closed and output is shutdown\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n\r\n* a better possible fix\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n\r\n* after review\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n", "commitParents": ["5b8fe10154e843d4e29affb592f2c260552ad176"], "commitHash": "1da19dc2fdf794f0f23acc776be94ebba41b2640", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpConnection.onFillable()", "DEL": 3, "INS": 1, "UPD": 2, "MOV": 4, "TOT": 10}]}, {"spoonFilePath": "ConnectionOpenCloseTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ConnectionOpenCloseTest.testSSLOpenRequestClose()", "DEL": 4, "INS": 2, "UPD": 4, "MOV": 5, "TOT": 15}]}, {"spoonFilePath": "AbstractEndPoint.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.AbstractEndPoint.close(java.lang.Throwable)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.AbstractEndPoint.close()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.AbstractEndPoint.shutdownInput()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.AbstractEndPoint.shutdownOutput()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "WriteFlusher.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.WriteFlusher.onFail(java.lang.Throwable)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "1da19dc2fdf794f0f23acc776be94ebba41b2640 tags/jetty-9.4.9.v20180320~22", "commitUser": "gregw", "authoredDateTime": "2018-03-15 23:12:58", "commitGHEventType": "closed", "commitGitStats": [{"lines": 11, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ConnectionOpenCloseTest.java", "insertions": 6, "deletions": 5}, {"lines": 2, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/WriteFlusher.java", "insertions": 2, "deletions": 0}, {"lines": 9, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpConnection.java", "insertions": 2, "deletions": 7}, {"lines": 8, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/AbstractEndPoint.java", "insertions": 8, "deletions": 0}], "commitDateTime": "2018-03-15 23:12:58", "spoonStatsSkippedReason": ""}], "title": "Bad HTTP Close fails SelectChannelServerSslTest.testFullMethod test", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0, "insertions": 0, "gitFilesChange": 0, "deletions": 0}, "closed": "2018-03-15 12:13:01", "statsSkippedReason": "", "body": "The SelectChannelServerSslTest.testFullMethod test intermittently fails to send a 431 response over SSL and instead just closes the connection.", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 175.00027777777777, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/1832"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "janbartel", "filteredCommits": ["d808094e8213e6ed7ca748460195eedc62d566e3"], "commits": {"d808094e8213e6ed7ca748460195eedc62d566e3": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2017-09-19 03:59:44", "commitsDetails": [{"commitMessage": "Issue #1829\n", "commitParents": ["eee41174f24d651b493a2d382df6402847f005be"], "commitHash": "d808094e8213e6ed7ca748460195eedc62d566e3", "commitSpoonAstDiffStats": [{"spoonFilePath": "AnnotationConfiguration.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.osgi.annotations.AnnotationConfiguration.parseWebInfClasses(org.eclipse.jetty.webapp.WebAppContext,org.eclipse.jetty.annotations.AnnotationParser)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "TestOSGiUtil.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.osgi.test.TestOSGiUtil.debugBundles(org.osgi.framework.BundleContext)", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 5, "TOT": 8}]}], "nameRev": "d808094e8213e6ed7ca748460195eedc62d566e3 tags/jetty-9.4.8.v20171121~131^2~1", "commitUser": "janbartel", "authoredDateTime": "2017-09-19 14:32:34", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 19, "filePath": "jetty-osgi/jetty-osgi-boot/src/main/java/org/eclipse/jetty/osgi/annotations/AnnotationConfiguration.java", "insertions": 19, "deletions": 0}, {"lines": 2, "filePath": "jetty-osgi/test-jetty-osgi/src/test/java/org/eclipse/jetty/osgi/test/TestOSGiUtil.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2017-09-19 14:32:34", "spoonStatsSkippedReason": ""}], "title": "OSGi webbundle classes scanned twice", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 19, "insertions": 19, "gitFilesChange": 1, "deletions": 0}, "closed": "2017-09-19 04:38:30", "statsSkippedReason": "", "body": "Since commit for #1819, the o.e.j.osgi.annotations.AnnotationConfiguration/AnnotationParser classes will scan both the unpacked webbundle location/WEB-INF/classes and also the webbundle itself.\r\n\r\nWe only need to scan the webbundle itself.", "changesInPackagesGIT": ["jetty-osgi/jetty-osgi-boot/src/main/java/org/eclipse/jetty/osgi/annotations"], "changesInPackagesSPOON": ["org.eclipse.jetty.osgi.annotations.AnnotationConfiguration.parseWebInfClasses(org.eclipse.jetty.webapp.WebAppContext,org.eclipse.jetty.annotations.AnnotationParser)"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1829"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug", "Test"], "user": "joakime", "filteredCommits": [], "commits": {"fd2493f2b30ffb19f4b404636e1e38c8612cb502": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "bc47942d1704320647c674e25061d402c36e8b78": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2017-09-01 19:56:59", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "fd2493f2b30ffb19f4b404636e1e38c8612cb502", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1200 Improve PathWatcher\n\nSquashed commit of the following:\n\ncommit 08b5acccf87c3b99152a8042d650aadf7e43c5ff\nMerge: cea3366 daeb844\nAuthor: Greg Wilkins <gregw@webtide.com>\nDate:   Tue Sep 5 12:43:01 2017 +1000\n\n    Merge branch 'jetty-9.4.x' into jetty-9.4.x-1200\n\ncommit cea3366625e16debf66e07284ab7afa89e73a32d\nAuthor: Greg Wilkins <gregw@webtide.com>\nDate:   Tue Sep 5 12:42:21 2017 +1000\n\n    Issue #1200 ignore OSX failure\n\ncommit fd2493f2b30ffb19f4b404636e1e38c8612cb502\nAuthor: Greg Wilkins <gregw@webtide.com>\nDate:   Tue Sep 5 12:11:05 2017 +1000\n\n    Issue #1789 PropertyUserStoreTest failures on windows\n\ncommit 89aa59ca7b16a393edc77116b13050d2d8a2c3e2\nAuthor: Greg Wilkins <gregw@webtide.com>\nDate:   Tue Sep 5 11:56:52 2017 +1000\n\n    Issue #1200 fixes for windows\n\ncommit 1904b4566d9224a19729f83a7b49a5ab23aaa5d8\nMerge: 74d770e eec6453\nAuthor: Greg Wilkins <gregw@webtide.com>\nDate:   Tue Sep 5 11:45:19 2017 +1000\n\n    Merge branch 'jetty-9.4.x' into jetty-9.4.x-1200\n\ncommit 74d770e557e8ff613a5965cb430a7b83ee75bd45\nAuthor: Greg Wilkins <gregw@webtide.com>\nDate:   Fri Sep 1 10:47:05 2017 +1000\n\n    Issue #1200 fixes for windows\n\ncommit f4ee0e97dcd0a07257cea8da8b3106f71150957f\nAuthor: Greg Wilkins <gregw@webtide.com>\nDate:   Thu Aug 31 10:24:07 2017 +1000\n\n    Issue #1200 improved tests for long duration quiet time\n\ncommit 17381cbb0bbebe3ea27ed5f55caeb45c2856e1be\nAuthor: Greg Wilkins <gregw@webtide.com>\nDate:   Thu Aug 31 10:03:04 2017 +1000\n\n    Issue #1200 fixed javadoc\n\ncommit b3a12c15167ce77a9781942680ca2d5c872374dd\nMerge: ed0db46 ce4adb5\nAuthor: Greg Wilkins <gregw@webtide.com>\nDate:   Thu Aug 31 09:41:50 2017 +1000\n\n    Merge branch 'jetty-9.4.x-1200' of github.com:eclipse/jetty.project into jetty-9.4.x-1200\n\ncommit ed0db46f495f27491ba58e6c4353cf1ef6f2061e\nAuthor: Greg Wilkins <gregw@webtide.com>\nDate:   Thu Aug 31 09:39:46 2017 +1000\n\n    Issue #1200 Improved PathWatcher\n\ncommit ce4adb54ed58d39789ea1ba4f5d58035e57980ce\nMerge: f993a7c 48aaecb\nAuthor: Joakim Erdfelt <joakim.erdfelt@gmail.com>\nDate:   Wed Aug 30 16:38:07 2017 -0700\n\n    Merge branch 'jetty-9.4.x-1200' of github.com:eclipse/jetty.project into jetty-9.4.x-1200\n\ncommit f993a7c83ee7294a34b00cea68242adb7993e565\nAuthor: Joakim Erdfelt <joakim.erdfelt@gmail.com>\nDate:   Wed Aug 30 16:37:45 2017 -0700\n\n    Issue #1200 - adding some important OSX/HFS+ timing differences\n\n    + We should really be testing the FileSystem (not the OS) to make the timing\n       constants be more sane. (APFS for example should be much lower on newer\n       OSX installations\n\ncommit 48aaecb4dd291d94d591c1545f671eecff1e3587\nAuthor: Greg Wilkins <gregw@webtide.com>\nDate:   Thu Aug 31 08:50:42 2017 +1000\n\n    Issue #1200 Improved PathWatcher diff\n\ncommit 1917f8b177d163bd42c07d5a2715858e7cf9787a\nAuthor: Greg Wilkins <gregw@webtide.com>\nDate:   Thu Aug 31 08:36:40 2017 +1000\n\n    Issue #1200 Improved PathWatcher diff\n\ncommit ecf002395a426ee3c00a4b42a32222e61805234f\nAuthor: Greg Wilkins <gregw@webtide.com>\nDate:   Thu Aug 31 08:22:41 2017 +1000\n\n    Issue #1200 Test improved PathWatcher\n\ncommit 0d76544093cbcddd9b29fc2c92a4d0bb0a6839a8\nMerge: 0fd7187 eb1320f\nAuthor: Greg Wilkins <gregw@webtide.com>\nDate:   Wed Aug 30 16:43:15 2017 +1000\n\n    Merge branch 'jetty-9.4.x' into jetty-9.4.x-1200\n\ncommit 0fd7187f908ed2d1bed24d5d82e25cb7ec244b0e\nAuthor: Greg Wilkins <gregw@webtide.com>\nDate:   Wed Aug 30 15:58:24 2017 +1000\n\n    Issue #1200 Improve PathWatcher\n", "commitParents": ["daeb84481bda441c414efc61a0c79d76a2fdbbdf"], "commitHash": "bc47942d1704320647c674e25061d402c36e8b78", "commitSpoonAstDiffStats": [], "nameRev": "bc47942d1704320647c674e25061d402c36e8b78 tags/jetty-9.4.7.v20170914~39", "commitUser": "gregw", "authoredDateTime": "2017-09-05 12:44:31", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 1, "filePath": "jetty-util/src/test/resources/jetty-logging.properties", "insertions": 1, "deletions": 0}, {"lines": 41, "filePath": "jetty-security/src/test/java/org/eclipse/jetty/security/PropertyUserStoreTest.java", "insertions": 32, "deletions": 9}, {"lines": 1075, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/PathWatcher.java", "insertions": 551, "deletions": 524}, {"lines": 603, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/PathWatcherTest.java", "insertions": 454, "deletions": 149}], "commitDateTime": "2017-09-05 12:44:31", "spoonStatsSkippedReason": "tooManyChanges"}], "title": "PropertyUserStoreTest failures in Windows", "spoonStatsSummary": {}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2017-09-06 14:36:58", "statsSkippedReason": "", "body": "These are the results of building on Windows 10 using Java 8u144 against branch jetty-9.4.x-1200 (from Issue #1200)\r\n\r\n``` shell\r\n[ERROR] Tests run: 4, Failures: 0, Errors: 2, Skipped: 0, Time elapsed: 4.3 s <<< FAILURE! - in org.eclipse.jetty.security.PropertyUserStoreTest\r\n[ERROR] testPropertyUserStoreLoadFromJarFile(org.eclipse.jetty.security.PropertyUserStoreTest)  Time elapsed: 0.021 s  <<< ERROR!\r\njava.lang.IllegalStateException: java.lang.RuntimeException: java.net.URISyntaxException: Illegal character in opaque part at index 11: jar:file:C:\\code\\jetty\\jetty.project-9.4.x\\jetty-security\\target\\tests\\testProper...reLoadFromJarFile\\users.jar!/mountain_goat/pale_ale.txt\r\n        at org.eclipse.jetty.security.PropertyUserStoreTest.testPropertyUserStoreLoadFromJarFile(PropertyUserStoreTest.java:197)\r\nCaused by: java.lang.RuntimeException: java.net.URISyntaxException: Illegal character in opaque part at index 11: jar:file:C:\\code\\jetty\\jetty.project-9.4.x\\jetty-security\\target\\tests\\testProper...reLoadFromJarFile\\users.jar!/mountain_goat/pale_ale.txt\r\n        at org.eclipse.jetty.security.PropertyUserStoreTest.testPropertyUserStoreLoadFromJarFile(PropertyUserStoreTest.java:197)\r\nCaused by: java.net.URISyntaxException: Illegal character in opaque part at index 11: jar:file:C:\\code\\jetty\\jetty.project-9.4.x\\jetty-security\\target\\tests\\testProper...reLoadFromJarFile\\users.jar!/mountain_goat/pale_ale.txt\r\n        at org.eclipse.jetty.security.PropertyUserStoreTest.testPropertyUserStoreLoadFromJarFile(PropertyUserStoreTest.java:197)\r\n\r\n[ERROR] testPropertyUserStoreLoadUpdateUser(org.eclipse.jetty.security.PropertyUserStoreTest)  Time elapsed: 2.127 s  <<< ERROR!\r\njava.lang.UnsupportedOperationException: 'posix:permissions' not supported as initial attribute\r\n        at org.eclipse.jetty.security.PropertyUserStoreTest.testPropertyUserStoreLoadUpdateUser(PropertyUserStoreTest.java:245)\r\n```", "changesInPackagesGIT": [], "ttf": 4.000277777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/1789"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 2}, "labels": ["Bug"], "user": "backinside", "filteredCommits": ["03d96ae538d7a1dc60d00558883fb5ac5ab837de"], "commits": {"ddaafc53607a6223e8b72609a2e54dc104f6ace1": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "03d96ae538d7a1dc60d00558883fb5ac5ab837de": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "e1d8834295472b7b82d6a9cfca2e4e02b688c118": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2017-08-31 21:10:59", "commitsDetails": [{"commitMessage": "Merge pull request #2422 from spbolton/jetty-9.4.x\n\nIssue #1785 Added vhost@connectorname format for AND behavior", "commitParents": ["1732ffca5101270f35019fd36996b60b562f9d0e", "ad21d35d51d0d7453a7bf7df9cfa7ae9eccc4fff"], "commitHash": "ddaafc53607a6223e8b72609a2e54dc104f6ace1", "commitSpoonAstDiffStats": [], "nameRev": "ddaafc53607a6223e8b72609a2e54dc104f6ace1 tags/jetty-9.4.11.v20180605~44", "commitUser": "gregw", "authoredDateTime": "2018-05-04 09:39:10", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 595, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/ContextHandler.java", "insertions": 359, "deletions": 236}, {"lines": 167, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/handler/ContextHandlerTest.java", "insertions": 167, "deletions": 0}], "commitDateTime": "2018-05-04 09:39:10", "spoonStatsSkippedReason": "tooManyChanges"}, {"commitMessage": "Issue #1785 minor cleanups\n\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\n", "commitParents": ["ddaafc53607a6223e8b72609a2e54dc104f6ace1"], "commitHash": "03d96ae538d7a1dc60d00558883fb5ac5ab837de", "commitSpoonAstDiffStats": [{"spoonFilePath": "ContextHandlerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandlerTest.testNamedConnector()", "DEL": 0, "INS": 8, "UPD": 0, "MOV": 2, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandlerTest.testVirtualHostManagement()", "DEL": 0, "INS": 0, "UPD": 4, "MOV": 0, "TOT": 4}]}, {"spoonFilePath": "ContextHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.toString()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.removeVirtualHosts(java.lang.String[])", "DEL": 1, "INS": 2, "UPD": 3, "MOV": 9, "TOT": 15}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.getVirtualHosts()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.checkVirtualHost(org.eclipse.jetty.server.Request)", "DEL": 7, "INS": 4, "UPD": 2, "MOV": 21, "TOT": 34}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.addVirtualHosts(java.lang.String[])", "DEL": 2, "INS": 3, "UPD": 4, "MOV": 11, "TOT": 20}]}], "nameRev": "03d96ae538d7a1dc60d00558883fb5ac5ab837de tags/jetty-9.4.11.v20180605~43", "commitUser": "gregw", "authoredDateTime": "2018-05-04 10:20:15", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 128, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/ContextHandler.java", "insertions": 50, "deletions": 78}, {"lines": 15, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/handler/ContextHandlerTest.java", "insertions": 12, "deletions": 3}], "commitDateTime": "2018-05-04 10:20:15", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #2506 from spbolton/jetty-9.4.x\n\nIssue #1785 Fix Javadoc and vhost warn logic", "commitParents": ["5faf018fbcb9e18dfb436e092eccd063c015c110", "7e0afae70ba12243a356647bbf2324640c7f7864"], "commitHash": "e1d8834295472b7b82d6a9cfca2e4e02b688c118", "commitSpoonAstDiffStats": [{"spoonFilePath": "ContextHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.setVirtualHosts(java.lang.String[])", "DEL": 0, "INS": 5, "UPD": 2, "MOV": 1, "TOT": 8}]}], "nameRev": "e1d8834295472b7b82d6a9cfca2e4e02b688c118 tags/jetty-9.4.11.v20180605~41", "commitUser": "gregw", "authoredDateTime": "2018-05-04 16:31:17", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 66, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/ContextHandler.java", "insertions": 37, "deletions": 29}], "commitDateTime": "2018-05-04 16:31:17", "spoonStatsSkippedReason": ""}], "title": "Support for vhost@connectorname syntax of virtual hosts", "spoonStatsSummary": {"spoonMethodsChanged": 5, "DEL": 10.0, "INS": 12.0, "UPD": 10.0, "MOV": 43.0, "TOT": 75.0, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 128, "insertions": 50, "gitFilesChange": 1, "deletions": 78}, "closed": "2018-05-21 18:54:46", "statsSkippedReason": "", "body": "After upgrading from jetty8, we can't set the connector name and the virtual host for a context\r\nthe setConnectorNames was removed from the WebAppContext\r\nWe would like to have multiple apps responding on https, but  other apps responding on http\r\nIs there a way, to achieve this?", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server/handler"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.handler.ContextHandler.toString()", "org.eclipse.jetty.server.handler.ContextHandler.removeVirtualHosts(java.lang.String[])", "org.eclipse.jetty.server.handler.ContextHandler.getVirtualHosts()", "org.eclipse.jetty.server.handler.ContextHandler.addVirtualHosts(java.lang.String[])", "org.eclipse.jetty.server.handler.ContextHandler.checkVirtualHost(org.eclipse.jetty.server.Request)"], "ttf": 262.0002777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1785"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "joakime", "filteredCommits": [], "commits": {"30c6a41c08fd5c735b1baa7a64d2969eb70e088d": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2017-08-25 19:36:48", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "30c6a41c08fd5c735b1baa7a64d2969eb70e088d", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "WebSocketClient should not have ShutdownThread registered if it belongs to parent LifeCycle", "spoonStatsSummary": {}, "closed": "2017-09-06 14:41:15", "statsSkippedReason": "", "body": "As identified in PR #1777 the WebSocketClient currently has a ShutdownThread registered on all uses of WebSocketClient, but if that WebSocketClient happens to also belong to a proper Jetty LifeCycle, then this is conflict in stop() between the normal Jetty LifeCycle and the ShutdownThread LifeCycle.", "ttf": 11.000277777777777, "url": "https://github.com/eclipse/jetty.project/issues/1778"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["9f28d26cffdb6466bddcc53eb8b6a868ca860212", "2ed620b1f493857a92d27199e0ccf5ecc23367d7", "f8d29c5f284baa3407e1a5c9765f66569736d0ff"], "commits": {"2ed620b1f493857a92d27199e0ccf5ecc23367d7": {"commitUser": "joakime", "commitGHEventType": "closed"}, "9f28d26cffdb6466bddcc53eb8b6a868ca860212": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "f8d29c5f284baa3407e1a5c9765f66569736d0ff": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2017-08-23 21:45:07", "commitsDetails": [{"commitMessage": "Fixed #1766 - removing common executor/bufferpool in JettyClientContainerProvider\n", "commitParents": ["7e764bad3e858566a969d05a63d5aae8a68b3e44"], "commitHash": "2ed620b1f493857a92d27199e0ccf5ecc23367d7", "commitSpoonAstDiffStats": [{"spoonFilePath": "JettyClientContainerProvider.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.JettyClientContainerProvider.getContainer()", "DEL": 5, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.JettyClientContainerProvider", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 3}]}], "nameRev": "2ed620b1f493857a92d27199e0ccf5ecc23367d7 tags/jetty-9.4.7.v20170914~60", "commitUser": "joakime", "authoredDateTime": "2017-08-23 14:46:41", "commitGHEventType": "closed", "commitGitStats": [{"lines": 26, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/JettyClientContainerProvider.java", "insertions": 3, "deletions": 23}], "commitDateTime": "2017-08-23 14:46:41", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixed #1766 - client container is managed now\n", "commitParents": ["2ed620b1f493857a92d27199e0ccf5ecc23367d7"], "commitHash": "f8d29c5f284baa3407e1a5c9765f66569736d0ff", "commitSpoonAstDiffStats": [{"spoonFilePath": "JettyClientContainerProvider.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.JettyClientContainerProvider.getContainer()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "f8d29c5f284baa3407e1a5c9765f66569736d0ff tags/jetty-9.4.7.v20170914~59", "commitUser": "joakime", "authoredDateTime": "2017-08-23 15:20:47", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/JettyClientContainerProvider.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2017-08-23 15:20:47", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixed #1766 - Fixing test case results\n", "commitParents": ["1ba12a4b3d2a971549567e46e7e018afd0aa316b"], "commitHash": "9f28d26cffdb6466bddcc53eb8b6a868ca860212", "commitSpoonAstDiffStats": [{"spoonFilePath": "DelayedStartClientOnServerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.DelayedStartClientOnServerTest.testHttpClientThreads_AfterClientConnectTo()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "WebSocketClient.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketClient.doStop()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}]}], "nameRev": "9f28d26cffdb6466bddcc53eb8b6a868ca860212 tags/jetty-9.4.7.v20170914~57", "commitUser": "joakime", "authoredDateTime": "2017-08-23 15:58:22", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/DelayedStartClientOnServerTest.java", "insertions": 1, "deletions": 1}, {"lines": 6, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/WebSocketClient.java", "insertions": 1, "deletions": 5}], "commitDateTime": "2017-08-23 15:58:22", "spoonStatsSkippedReason": ""}], "title": "JettyClientContainerProvider does not actually use common objects correctly", "spoonStatsSummary": {"spoonMethodsChanged": 3, "DEL": 8, "INS": 0, "UPD": 1, "MOV": 2, "TOT": 11, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 34, "insertions": 5, "gitFilesChange": 2, "deletions": 29}, "closed": "2017-08-23 21:47:02", "statsSkippedReason": "", "body": "After a review of JettyClientContainerProvider, the commonExecutor and commonBufferPool does not behave in the way intended.\r\n\r\nThese concepts (introduced in 9.4.6) are not valid as implemented.\r\nLets remove them in favor of the common HttpClient and singleton approaches instead.", "changesInPackagesGIT": ["jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client", "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356"], "changesInPackagesSPOON": ["org.eclipse.jetty.websocket.jsr356.JettyClientContainerProvider.getContainer()", "org.eclipse.jetty.websocket.client.WebSocketClient.doStop()", "org.eclipse.jetty.websocket.jsr356.JettyClientContainerProvider"], "ttf": 0.0002777777777777778, "numCommits": 3, "url": "https://github.com/eclipse/jetty.project/issues/1766"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug", "High Priority"], "user": "gregw", "filteredCommits": ["154824049be491b201029f9a1013891f9af514b4"], "commits": {"154824049be491b201029f9a1013891f9af514b4": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "f9ff9e1226ce873d154ce44273dd0387373eaee6": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2017-08-21 05:07:11", "commitsDetails": [{"commitMessage": "Issue #1759 - HTTP/2 producer can block in onReset.\n\nNow both failures and timeouts, when they must call the application,\ndo so by dispatching a Runnable to avoid to block the caller thread.\n", "commitParents": ["f7925aebd28341609bb30088f91a8b2075186922"], "commitHash": "154824049be491b201029f9a1013891f9af514b4", "commitSpoonAstDiffStats": [{"spoonFilePath": "HTTP2ServerConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.server.HTTP2ServerConnection.onSessionTimeout(java.lang.Throwable)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.http2.server.HTTP2ServerConnection.onStreamTimeout(org.eclipse.jetty.http2.IStream,java.lang.Throwable)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.server.HTTP2ServerConnection.onStreamFailure(org.eclipse.jetty.http2.IStream,java.lang.Throwable)", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 3, "TOT": 6}]}, {"spoonFilePath": "HttpChannelOverHTTP2.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.server.HttpChannelOverHTTP2.onStreamTimeout(java.lang.Throwable,java.util.function.Consumer)", "DEL": 0, "INS": 6, "UPD": 0, "MOV": 0, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.http2.server.HttpChannelOverHTTP2.onStreamTimeout(java.lang.Throwable)", "DEL": 4, "INS": 0, "UPD": 0, "MOV": 4, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.http2.server.HttpChannelOverHTTP2.onFailure(java.lang.Throwable)", "DEL": 1, "INS": 3, "UPD": 1, "MOV": 4, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.http2.server.HttpChannelOverHTTP2.handleWithContext()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.server.HttpChannelOverHTTP2.isRequestExecuting()", "DEL": 1, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 3}]}], "nameRev": "154824049be491b201029f9a1013891f9af514b4 tags/jetty-9.4.7.v20170914~63^2", "commitUser": "sbordet", "authoredDateTime": "2017-08-21 15:53:56", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 10, "filePath": "jetty-http2/http2-server/src/main/java/org/eclipse/jetty/http2/server/HTTP2ServerConnection.java", "insertions": 7, "deletions": 3}, {"lines": 46, "filePath": "jetty-http2/http2-server/src/main/java/org/eclipse/jetty/http2/server/HttpChannelOverHTTP2.java", "insertions": 32, "deletions": 14}], "commitDateTime": "2017-08-21 15:53:56", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1759 - HTTP/2 producer can block in onReset.\n\nBecause now the failures are asynchronous, code that was executed after\ninvoking the failure listener must be now executed after the\nasynchronous processing done by the listener and therefore Callbacks\nare introduced.\n", "commitParents": ["17116423093594d85e426afe97afabc14ac2085a"], "commitHash": "f9ff9e1226ce873d154ce44273dd0387373eaee6", "commitSpoonAstDiffStats": [{"spoonFilePath": "HTTP2Connection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.HTTP2Connection.HTTP2Producer.produce()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.http2.HTTP2Connection.HTTP2Producer", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HTTP2Session.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.HTTP2Session.CloseCallback", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.HTTP2Session.abort(java.lang.Throwable)", "DEL": 0, "INS": 1, "UPD": 5, "MOV": 4, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.http2.HTTP2Session.notifyClose(org.eclipse.jetty.http2.api.Session,org.eclipse.jetty.http2.frames.GoAwayFrame,org.eclipse.jetty.util.Callback)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.http2.HTTP2Session.notifyFailure(org.eclipse.jetty.http2.api.Session,java.lang.Throwable,org.eclipse.jetty.util.Callback)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.http2.HTTP2Session.onConnectionFailure(int,java.lang.String)", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 8, "TOT": 11}, {"spoonMethodName": "org.eclipse.jetty.http2.HTTP2Session.DisconnectCallback", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.HTTP2Session.TerminateCallback", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.HTTP2Session.onGoAway(org.eclipse.jetty.http2.frames.GoAwayFrame)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "Session.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.api.onFailure(org.eclipse.jetty.http2.api.Session,java.lang.Throwable,org.eclipse.jetty.util.Callback)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.api.onClose(org.eclipse.jetty.http2.api.Session,org.eclipse.jetty.http2.frames.GoAwayFrame,org.eclipse.jetty.util.Callback)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HTTP2ServerConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.server.HTTP2ServerConnection.onSessionFailure(java.lang.Throwable)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 3, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.http2.server.HTTP2ServerConnection.onStreamFailure(org.eclipse.jetty.http2.IStream,java.lang.Throwable,org.eclipse.jetty.util.Callback)", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.http2.server.HTTP2ServerConnection.onSessionFailure(java.lang.Throwable,org.eclipse.jetty.util.Callback)", "DEL": 0, "INS": 4, "UPD": 0, "MOV": 0, "TOT": 4}]}, {"spoonFilePath": "HTTP2ServerConnectionFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.server.HTTP2ServerConnectionFactory.HTTPServerSessionListener.onClose(org.eclipse.jetty.http2.api.Session,org.eclipse.jetty.http2.frames.GoAwayFrame,org.eclipse.jetty.util.Callback)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.http2.server.HTTP2ServerConnectionFactory.HTTPServerSessionListener.onReset(org.eclipse.jetty.http2.api.Stream,org.eclipse.jetty.http2.frames.ResetFrame)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.server.HTTP2ServerConnectionFactory.HTTPServerSessionListener.onFailure(org.eclipse.jetty.http2.api.Session,java.lang.Throwable,org.eclipse.jetty.util.Callback)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "HttpChannelOverHTTP2.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.server.HttpChannelOverHTTP2.onFailure(java.lang.Throwable,org.eclipse.jetty.util.Callback)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.server.HttpChannelOverHTTP2.onFailure(java.lang.Throwable)", "DEL": 2, "INS": 0, "UPD": 2, "MOV": 8, "TOT": 12}, {"spoonMethodName": "org.eclipse.jetty.http2.server.HttpChannelOverHTTP2.FailureTask", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.server.HttpChannelOverHTTP2.FailureTask.run()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "f9ff9e1226ce873d154ce44273dd0387373eaee6 tags/jetty-9.4.7.v20170914~61^2", "commitUser": "sbordet", "authoredDateTime": "2017-08-22 15:54:40", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 36, "filePath": "jetty-http2/http2-common/src/main/java/org/eclipse/jetty/http2/api/Session.java", "insertions": 32, "deletions": 4}, {"lines": 25, "filePath": "jetty-http2/http2-server/src/main/java/org/eclipse/jetty/http2/server/HTTP2ServerConnection.java", "insertions": 20, "deletions": 5}, {"lines": 94, "filePath": "jetty-http2/http2-common/src/main/java/org/eclipse/jetty/http2/HTTP2Session.java", "insertions": 84, "deletions": 10}, {"lines": 10, "filePath": "jetty-http2/http2-server/src/main/java/org/eclipse/jetty/http2/server/HTTP2ServerConnectionFactory.java", "insertions": 5, "deletions": 5}, {"lines": 4, "filePath": "jetty-http2/http2-common/src/main/java/org/eclipse/jetty/http2/HTTP2Connection.java", "insertions": 3, "deletions": 1}, {"lines": 41, "filePath": "jetty-http2/http2-server/src/main/java/org/eclipse/jetty/http2/server/HttpChannelOverHTTP2.java", "insertions": 33, "deletions": 8}], "commitDateTime": "2017-08-22 15:54:40", "spoonStatsSkippedReason": ""}], "title": "HTTP/2: producer can block in onReset", "spoonStatsSummary": {"spoonMethodsChanged": 8, "DEL": 8, "INS": 14, "UPD": 2, "MOV": 13, "TOT": 37, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 56, "insertions": 39, "gitFilesChange": 2, "deletions": 17}, "closed": "2017-09-14 11:17:50", "statsSkippedReason": "", "body": "The following stack trace indicates that the HTTP/2 produce (which self declares as non blocking) has blocked within a call to `onReset` from the parser.  This can result in thread starvation as selector threads are consumed by such blocking producers.\r\n\r\n```\r\n\"http-worker-1218\" #1218 prio=5 os_prio=0 tid=0x00007f17a40014e0 nid=0xa68 waiting on condition [0x00007ef7fb645000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  <0x00007f02aa003128> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\r\n\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)\r\n\tat org.eclipse.jetty.util.SharedBlockingCallback$Blocker.block(SharedBlockingCallback.java:210)\r\n\tat org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:219)\r\n\tat org.eclipse.jetty.server.HttpOutput.close(HttpOutput.java:292)\r\n\tat org.eclipse.jetty.server.HttpWriter.close(HttpWriter.java:49)\r\n\tat org.eclipse.jetty.server.ResponseWriter.close(ResponseWriter.java:163)\r\n\t- locked <0x00007f156d01c760> (a org.eclipse.jetty.server.Iso88591HttpWriter)\r\n\tat org.eclipse.jetty.server.Response.closeOutput(Response.java:1038)\r\n\tat org.eclipse.jetty.server.handler.ErrorHandler.generateAcceptableResponse(ErrorHandler.java:176)\r\n\tat org.eclipse.jetty.server.handler.ErrorHandler.doError(ErrorHandler.java:142)\r\n\tat org.eclipse.jetty.server.handler.ErrorHandler.handle(ErrorHandler.java:78)\r\n\tat org.eclipse.jetty.server.Response.sendError(Response.java:655)\r\n\tat org.eclipse.jetty.server.handler.AbstractHandler.doError(AbstractHandler.java:100)\r\n\tat org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1247)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:168)\r\n\tat org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:473)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:166)\r\n\tat org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1155)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\r\n\tat org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:126)\r\n\tat org.eclipse.jetty.server.handler.StatisticsHandler.handle(StatisticsHandler.java:169)\r\n\tat org.eclipse.jetty.server.handler.HandlerList.handle(HandlerList.java:61)\r\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132)\r\n\tat org.eclipse.jetty.server.Server.handle(Server.java:565)\r\n\tat org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:375)\r\n\tat org.eclipse.jetty.server.HttpChannel.run(HttpChannel.java:281)\r\n\tat org.eclipse.jetty.server.handler.ContextHandler.handle(ContextHandler.java:1339)\r\n\tat org.eclipse.jetty.server.HttpChannelState.runInContext(HttpChannelState.java:1110)\r\n\tat org.eclipse.jetty.server.HttpChannelState.asyncError(HttpChannelState.java:378)\r\n\tat org.eclipse.jetty.http2.server.HttpChannelOverHTTP2.onFailure(HttpChannelOverHTTP2.java:334)\r\n\tat org.eclipse.jetty.http2.server.HTTP2ServerConnection.onStreamFailure(HTTP2ServerConnection.java:214)\r\n\tat org.eclipse.jetty.http2.server.HTTP2ServerConnectionFactory$HTTPServerSessionListener.onReset(HTTP2ServerConnectionFactory.java:171)\r\n\tat org.eclipse.jetty.http2.HTTP2Stream.notifyReset(HTTP2Stream.java:425)\r\n\tat org.eclipse.jetty.http2.HTTP2Stream.onReset(HTTP2Stream.java:294)\r\n\tat org.eclipse.jetty.http2.HTTP2Stream.process(HTTP2Stream.java:230)\r\n\tat org.eclipse.jetty.http2.HTTP2Session.onReset(HTTP2Session.java:289)\r\n\tat org.eclipse.jetty.http2.parser.BodyParser.notifyReset(BodyParser.java:139)\r\n\tat org.eclipse.jetty.http2.parser.ResetBodyParser.onReset(ResetBodyParser.java:97)\r\n\tat org.eclipse.jetty.http2.parser.ResetBodyParser.parse(ResetBodyParser.java:66)\r\n\tat org.eclipse.jetty.http2.parser.Parser.parseBody(Parser.java:182)\r\n\tat org.eclipse.jetty.http2.parser.Parser.parse(Parser.java:110)\r\n\tat org.eclipse.jetty.http2.parser.ServerParser.parse(ServerParser.java:115)\r\n\tat org.eclipse.jetty.http2.HTTP2Connection$HTTP2Producer.produce(HTTP2Connection.java:205)\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:171)\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.produce(EatWhatYouKill.java:132)\r\n\tat org.eclipse.jetty.http2.HTTP2Connection.onFillable(HTTP2Connection.java:116)\r\n\tat org.eclipse.jetty.http2.HTTP2Connection$FillableCallback.succeeded(HTTP2Connection.java:263)\r\n\tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:104)\r\n\tat org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:124)\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:202)\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.produce(EatWhatYouKill.java:132)\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:123)\r\n\tat org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:232)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:679)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:597)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n```", "changesInPackagesGIT": ["jetty-http2/http2-server/src/main/java/org/eclipse/jetty/http2/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.http2.server.HTTP2ServerConnection.onStreamFailure(org.eclipse.jetty.http2.IStream,java.lang.Throwable)", "org.eclipse.jetty.http2.server.HttpChannelOverHTTP2.onStreamTimeout(java.lang.Throwable)", "org.eclipse.jetty.http2.server.HTTP2ServerConnection.onSessionTimeout(java.lang.Throwable)", "org.eclipse.jetty.http2.server.HttpChannelOverHTTP2.onStreamTimeout(java.lang.Throwable,java.util.function.Consumer)", "org.eclipse.jetty.http2.server.HttpChannelOverHTTP2.onFailure(java.lang.Throwable)", "org.eclipse.jetty.http2.server.HttpChannelOverHTTP2.handleWithContext()", "org.eclipse.jetty.http2.server.HttpChannelOverHTTP2.isRequestExecuting()", "org.eclipse.jetty.http2.server.HTTP2ServerConnection.onStreamTimeout(org.eclipse.jetty.http2.IStream,java.lang.Throwable)"], "ttf": 24.00027777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1759"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["dea0a050436ac3c1e0599cfe737f07fdef7308a3"], "commits": {"64fcfd7f6f94abbedf7d24a27098963c335308c3": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "dea0a050436ac3c1e0599cfe737f07fdef7308a3": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2017-08-15 15:20:48", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "64fcfd7f6f94abbedf7d24a27098963c335308c3", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1738 adding missing section in jetty-bom\n", "commitParents": ["fb3bf9a212cbc0348138fe6199427040bcedcf12"], "commitHash": "dea0a050436ac3c1e0599cfe737f07fdef7308a3", "commitSpoonAstDiffStats": [], "nameRev": "dea0a050436ac3c1e0599cfe737f07fdef7308a3 tags/jetty-9.4.7.RC0~10", "commitUser": "joakime", "authoredDateTime": "2017-08-15 09:27:47", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 50, "filePath": "jetty-bom/pom.xml", "insertions": 50, "deletions": 0}], "commitDateTime": "2017-08-15 09:27:47", "spoonStatsSkippedReason": ""}], "title": "jetty-bom fails oss.sonatype.org validation", "spoonStatsSummary": {}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2017-08-15 16:38:31", "statsSkippedReason": "", "body": "And attempt at a manual version update for jetty-bom (to get around issue #1736) results in a validation issue on oss.sonatype.org\r\n\r\n> Invalid POM: /org/eclipse/jetty/jetty-bom/9.4.7.RC0/jetty-bom-9.4.7.RC0.pom: Developer information missing\r\n\r\n", "changesInPackagesGIT": [], "ttf": 0.0002777777777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/1738"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "jmullo", "filteredCommits": ["9c7af338060102684cba3d83b239a95fb39e2891", "c843b809f0c120166b1231508ca1d30d3396e478"], "commits": {"9c7af338060102684cba3d83b239a95fb39e2891": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "c843b809f0c120166b1231508ca1d30d3396e478": {"commitUser": "gregw", "commitGHEventType": "closed"}}, "created": "2017-08-15 14:30:39", "commitsDetails": [{"commitMessage": "Issue #1737 - fixing up ResourceHandler behavior with welcome files\n", "commitParents": ["a472546bd019164be38fe247368cc8d1dd4d8d4b"], "commitHash": "9c7af338060102684cba3d83b239a95fb39e2891", "commitSpoonAstDiffStats": [{"spoonFilePath": "ResourceHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.ResourceHandler.getWelcomeFile(java.lang.String)", "DEL": 3, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 5}]}, {"spoonFilePath": "ResourceHandlerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.ResourceHandlerTest.testWelcomeRedirect()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "9c7af338060102684cba3d83b239a95fb39e2891 tags/jetty-9.4.7.RC0~2", "commitUser": "joakime", "authoredDateTime": "2017-08-16 09:34:07", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 6, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/ResourceHandler.java", "insertions": 3, "deletions": 3}, {"lines": 2, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/handler/ResourceHandlerTest.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2017-08-16 09:34:07", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixed #1737 DefaultServlet wrong welcome dispatcher using non-root URL path\n\nIf operating in pathInfoOnly mode, prepend the serlvet path to the welcome path\n", "commitParents": ["2dd0ac7990a3cf3224e58d2f017b18d6769b5c57"], "commitHash": "c843b809f0c120166b1231508ca1d30d3396e478", "commitSpoonAstDiffStats": [], "nameRev": "c843b809f0c120166b1231508ca1d30d3396e478 tags/jetty-9.4.7.RC0~5", "commitUser": "gregw", "authoredDateTime": "2017-08-16 09:54:52", "commitGHEventType": "closed", "commitGitStats": [{"lines": 32, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/ResourceService.java", "insertions": 19, "deletions": 13}, {"lines": 368, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/DefaultServletTest.java", "insertions": 215, "deletions": 153}], "commitDateTime": "2017-08-16 09:54:52", "spoonStatsSkippedReason": "tooManyChanges"}], "title": "DefaultServlet wrong welcome dispatcher using non-root URL path", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 3.0, "INS": 2.0, "UPD": 0.0, "MOV": 0.0, "TOT": 5.0, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 38, "insertions": 22, "gitFilesChange": 2, "deletions": 16}, "closed": "2017-08-16 18:00:27", "statsSkippedReason": "", "body": "In 9.4.4 this works, serving index.html:  **https://127.0.0.1:8443/login/**\r\n\r\nIn 9.4.5 it doesn't work anymore.\r\nBut adding index.html to the URL it still works: **https://127.0.0.1:8443/login/index.html**\r\n\r\nMost likely related to this: #1486 \r\n\r\nI'm serving DefaultServlet with Guice:\r\n\r\n`\r\nserve(/login/*).with(DefaultServlet.class, initParams);\r\n`", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server", "jetty-server/src/main/java/org/eclipse/jetty/server/handler"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.handler.ResourceHandler.getWelcomeFile(java.lang.String)"], "ttf": 1.0002777777777778, "numCommits": 2, "url": "https://github.com/eclipse/jetty.project/issues/1737"}, {"labels": ["Bug", "Help Wanted"], "closed": "2017-09-22 23:49:39", "body": "When performing a release, the jetty-bom never gets included.\r\n\r\nThis is due to the strange not-part-of-the-rest-of-the-build state that its pom exists as.\r\n\r\nThis strange state that jetty-bom exists in prevents its `<version>` from being updated during the release, and that results in it not being part of the release process for the intended version.\r\n\r\nWe have no automated solution for this, and this part of the release has to be updated manually.\r\n\r\nIf anyone wants to attempt to fix this, understand that the following command line can be used to simulate this odd behavior in version update.\r\n\r\n``` shell\r\n$ mvn org.codehaus.mojo:versions-maven-plugin:2.4:set \\\r\n        -DoldVersion=\"<snapshotver>\"  \r\n        -DnewVersion=\"<releasever>\"\r\n```\r\n\r\nJust checkout the `jetty-9.4.x` branch, perform that command line, and then check the diff.\r\nYou'll see the odd behavior the quickest this way.", "commits": {}, "title": "jetty-bom is not included in release", "created": "2017-08-15 14:26:49", "user": "joakime", "url": "https://github.com/eclipse/jetty.project/issues/1736", "commitsDetails": [], "ttf": 38.000277777777775}, {"labels": ["Bug", "Stale"], "closed": "2019-11-21 09:48:08", "body": "When verifying the fixes on a recent Jetty 9.3.20.v20170531, I am seeing threads that are blocked forever on ArrayDeque objects from org.eclipse.jetty.server.HttpInput.blockForContent(HttpInput.java:398). An lsof shows no remaining server-side connections. the consumer of the request body reads slowly using the synchronous APIs. jetty server reported the following exception\r\nwhy?\r\nCan you help me ?\r\n2017-08-10 03:05:57.243:WARN:oeji.FillInterest:qtp1983747920-34: Read pending for org.eclipse.jetty.server.HttpConnection$BlockingReadCallback@3a0064f6 prevented org.eclipse.jetty.server.HttpConnection$BlockingReadCallback@3a0064f6", "commits": {}, "title": "Jetty 9.3.20.v20170531 reported  ReadPendingException in class FillInterest.register", "created": "2017-08-10 13:50:03", "user": "yangxingguo", "url": "https://github.com/eclipse/jetty.project/issues/1727", "commitsDetails": [], "ttf": 832.0002777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 2, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "flyaruu", "filteredCommits": ["3c3d05f7227529f07baa6facdc6d9ef4664072b6"], "commits": {"3c3d05f7227529f07baa6facdc6d9ef4664072b6": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "e4c0dcdd1961ea3f5d97c39fa7428c19efe0f978": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "4d56d154ac889936647b18e4995b14099d45456a": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2017-08-09 15:45:59", "commitsDetails": [{"commitMessage": "Issue #1721 async read failure on big POST\n\nModified isReady to not fillAndParseContent if known to be isReady()==false already.\nAdded mutex on produceContent\n", "commitParents": ["a58447aea16cbfee16ddf1052ed415b2cb644274"], "commitHash": "3c3d05f7227529f07baa6facdc6d9ef4664072b6", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpInput.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpInput.isReady()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInput.asyncReadProduce()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpChannel.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannel.handle()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "FillInterest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.FillInterest.onClose()", "DEL": 1, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.io.FillInterest.tryRegister(org.eclipse.jetty.util.Callback)", "DEL": 2, "INS": 1, "UPD": 1, "MOV": 2, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.io.FillInterest.toString()", "DEL": 1, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.io.FillInterest.register(org.eclipse.jetty.util.Callback)", "DEL": 2, "INS": 1, "UPD": 0, "MOV": 3, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.io.FillInterest.fillable()", "DEL": 1, "INS": 0, "UPD": 1, "MOV": 3, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.io.FillInterest", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.FillInterest.onFail(java.lang.Throwable)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "3c3d05f7227529f07baa6facdc6d9ef4664072b6 tags/jetty-9.4.7.RC0~15", "commitUser": "gregw", "authoredDateTime": "2017-08-15 10:08:08", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 14, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpInput.java", "insertions": 14, "deletions": 0}, {"lines": 20, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/FillInterest.java", "insertions": 8, "deletions": 12}, {"lines": 2, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannel.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2017-08-15 10:08:08", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1721 async read failure on big POST\n\nRemove ISE for a S that is perfectly legal\n", "commitParents": ["3689f94bd14083dcb466bd5676013b35554ad689"], "commitHash": "e4c0dcdd1961ea3f5d97c39fa7428c19efe0f978", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpChannelState.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.handling()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "e4c0dcdd1961ea3f5d97c39fa7428c19efe0f978 tags/jetty-9.4.7.RC0~12", "commitUser": "gregw", "authoredDateTime": "2017-08-15 19:05:44", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 3, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannelState.java", "insertions": 1, "deletions": 2}], "commitDateTime": "2017-08-15 19:05:44", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1721 async read failure on big POST\n\nfixed HttpInput test\n", "commitParents": ["3c3d05f7227529f07baa6facdc6d9ef4664072b6"], "commitHash": "4d56d154ac889936647b18e4995b14099d45456a", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpInputTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpInputTest.testAsyncRead()", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 10, "TOT": 12}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInputTest.testAsyncError()", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 4, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInputTest.testAsyncReadEOF()", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 8, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInputTest.testAsyncEmpty()", "DEL": 4, "INS": 0, "UPD": 0, "MOV": 2, "TOT": 6}]}], "nameRev": "4d56d154ac889936647b18e4995b14099d45456a tags/jetty-9.4.7.RC0~14", "commitUser": "gregw", "authoredDateTime": "2017-08-15 11:50:07", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 10, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/HttpInputTest.java", "insertions": 0, "deletions": 10}], "commitDateTime": "2017-08-15 11:50:07", "spoonStatsSkippedReason": ""}], "title": "Async I/O POST fails with big files", "spoonStatsSummary": {"spoonMethodsChanged": 10, "DEL": 8, "INS": 5, "UPD": 5, "MOV": 9, "TOT": 27, "spoonFilesChanged": 3}, "gitStatsSummary": {"lines": 36, "insertions": 23, "gitFilesChange": 3, "deletions": 13}, "closed": "2017-09-06 21:00:21", "statsSkippedReason": "", "body": "Hi Jetty,\r\n\r\nI'm doing a proof of concept using Servlet 3.1 Async I/O + RxJava2\r\n\r\nWhat I want to do for now is have a servlet to which I can POST a big file, and the servlet returns that same file content, but:\r\n - All non blocking\r\n - Honoring backpressure, so the servlet will only read as fast as it writes, so it won't need much memory\r\n\r\nThe Servlet 3.1 Async API is tricky to use at best, so it is possible I'm doing something wrong, but I can not get it to work in Jetty 9.4.6 or Jetty 9.3.20.v20170531\r\n\r\nIt does seem to work well with Tomcat 8.5.16, Jetty 9.2.22, and JBoss wildfly-11.0.0.Beta1.\r\n(Wildfly 10.1 fails due to issue UNDERTOW-1092)\r\n\r\nIn Jetty 9.4 it seems to work with small files (up to about 10 Mb), but generally fails with bigger files. I've tested with file up to about 1 Gb.\r\n\r\nAfter processing a bit of data, the logs show:\r\n\r\njava.lang.IllegalStateException: HttpChannelState@351314e{s=ASYNC_WOKEN a=STARTED i=false r=REGISTER w=false}\r\nat org.eclipse.jetty.server.HttpChannelState.onReadPossible(HttpChannelState.java:1271)\r\nat org.eclipse.jetty.server.HttpConnection$AsyncReadCallback.succeeded(HttpConnection.java:629)\r\nat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:110)\r\nat org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:124)\r\nat org.eclipse.jetty.util.thread.Invocable.invokePreferred(Invocable.java:128)\r\nat org.eclipse.jetty.util.thread.Invocable$InvocableExecutor.invoke(Invocable.java:222)\r\nat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:294)\r\nat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:199)\r\nat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:673)\r\nat org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:591)\r\nat java.lang.Thread.run(Thread.java:745)\r\n\r\nAnd then the request hangs.\r\n\r\nI've got a hard time figuring out what this error even means. Any tips?\r\n\r\nTo reproduce, checkout repo: https://github.com/flyaruu/reactive-servlet.git on branch jetty-issue", "changesInPackagesGIT": ["jetty-io/src/main/java/org/eclipse/jetty/io", "jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.io.FillInterest.onClose()", "org.eclipse.jetty.io.FillInterest.tryRegister(org.eclipse.jetty.util.Callback)", "org.eclipse.jetty.server.HttpChannel.handle()", "org.eclipse.jetty.io.FillInterest.toString()", "org.eclipse.jetty.server.HttpInput.asyncReadProduce()", "org.eclipse.jetty.io.FillInterest.register(org.eclipse.jetty.util.Callback)", "org.eclipse.jetty.io.FillInterest.fillable()", "org.eclipse.jetty.io.FillInterest", "org.eclipse.jetty.server.HttpInput.isReady()", "org.eclipse.jetty.io.FillInterest.onFail(java.lang.Throwable)"], "ttf": 28.00027777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1721"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "lpandzic", "filteredCommits": ["a0cb4247e7f99f79c67f08acd6bdae2ac5bf1f8e"], "commits": {"a0cb4247e7f99f79c67f08acd6bdae2ac5bf1f8e": {"commitUser": "sbordet", "commitGHEventType": "closed"}}, "created": "2017-08-08 12:58:36", "commitsDetails": [{"commitMessage": "Fixes #1718 - QueuedThreadPool not exposed on JMX.\n\nNow MBeanContainer keeps track of the parent/child component relationship.\n\nMBeans are registered for a pair (parent, child) and unregistered only\nfor the same pair.\n\nFor example, Server owns a ThreadPool and a Connector; in turn the\nConnector adds the Server ThreadPool as an unmanaged component to itself.\nThe ThreadPool is registered as MBean with the pair (Server, ThreadPool).\nWhen the Connector is stopped and removed from the component tree,\nMBeanContainer sees a removal event for the pair (ServerConnector, ThreadPool).\nBut since that pair was not the one that triggered the registration of\nthe MBean, the MBean is not unregistered.\n", "commitParents": ["c402f8d5fa0736c2379ad0a724f1907170c71b7e"], "commitHash": "a0cb4247e7f99f79c67f08acd6bdae2ac5bf1f8e", "commitSpoonAstDiffStats": [{"spoonFilePath": "MBeanContainer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.jmx.MBeanContainer.findBean(javax.management.ObjectName)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.jmx.MBeanContainer.destroy()", "DEL": 1, "INS": 3, "UPD": 1, "MOV": 1, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.jmx.MBeanContainer.findMBean(java.lang.Object)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.jmx.MBeanContainer.beanRemoved(org.eclipse.jetty.util.component.Container,java.lang.Object)", "DEL": 1, "INS": 4, "UPD": 1, "MOV": 4, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.jmx.MBeanContainer.resetUnique()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.jmx.MBeanContainer.beanAdded(org.eclipse.jetty.util.component.Container,java.lang.Object)", "DEL": 1, "INS": 4, "UPD": 3, "MOV": 3, "TOT": 11}, {"spoonMethodName": "org.eclipse.jetty.jmx.MBeanContainer.dump(java.lang.Appendable,java.lang.String)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.jmx.MBeanContainer", "DEL": 0, "INS": 2, "UPD": 1, "MOV": 0, "TOT": 3}]}, {"spoonFilePath": "MBeanContainerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.jmx.MBeanContainerTest.testDestroy()", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.jmx.MBeanContainerTest.testNonManagedPojoNotUnregistered()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.jmx.MBeanContainerTest.testNonManagedLifecycleNotUnregistered()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.jmx.MBeanContainerTest.testNonManagedObjectNotUnregistered(java.lang.Object)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "a0cb4247e7f99f79c67f08acd6bdae2ac5bf1f8e tags/jetty-9.4.7.v20170914~11", "commitUser": "sbordet", "authoredDateTime": "2017-09-12 00:47:02", "commitGHEventType": "closed", "commitGitStats": [{"lines": 34, "filePath": "jetty-jmx/src/test/java/org/eclipse/jetty/jmx/MBeanContainerTest.java", "insertions": 32, "deletions": 2}, {"lines": 53, "filePath": "jetty-jmx/src/main/java/org/eclipse/jetty/jmx/MBeanContainer.java", "insertions": 32, "deletions": 21}], "commitDateTime": "2017-09-12 00:47:02", "spoonStatsSkippedReason": ""}], "title": "QueuedThreadPool not exposed on JMX", "spoonStatsSummary": {"spoonMethodsChanged": 8, "DEL": 4, "INS": 13, "UPD": 9, "MOV": 8, "TOT": 34, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 53, "insertions": 32, "gitFilesChange": 1, "deletions": 21}, "closed": "2017-09-11 22:47:21", "statsSkippedReason": "", "body": "After upgrading from 9.4.5.v20170502 to 9.4.6.v20170531\r\nMBean \"org.eclipse.jetty.util.thread.queuedthreadpool\" is no longer exposed on JMX althrough\r\nother jetty JMX MBeans are. QueuedThreadPool is still being constructed.\r\nAny thought about what it might be?", "changesInPackagesGIT": ["jetty-jmx/src/main/java/org/eclipse/jetty/jmx"], "changesInPackagesSPOON": ["org.eclipse.jetty.jmx.MBeanContainer.findBean(javax.management.ObjectName)", "org.eclipse.jetty.jmx.MBeanContainer.dump(java.lang.Appendable,java.lang.String)", "org.eclipse.jetty.jmx.MBeanContainer.destroy()", "org.eclipse.jetty.jmx.MBeanContainer.findMBean(java.lang.Object)", "org.eclipse.jetty.jmx.MBeanContainer.beanRemoved(org.eclipse.jetty.util.component.Container,java.lang.Object)", "org.eclipse.jetty.jmx.MBeanContainer.resetUnique()", "org.eclipse.jetty.jmx.MBeanContainer.beanAdded(org.eclipse.jetty.util.component.Container,java.lang.Object)", "org.eclipse.jetty.jmx.MBeanContainer"], "ttf": 34.000277777777775, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1718"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "julienmoumne", "filteredCommits": [], "commits": {"6f8baff07d084f135082367f91ef2965d9820b4b": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2017-08-02 12:51:02", "commitsDetails": [{"commitMessage": "Fixes #1928 - Backport #1705 to jetty-9.3.x.\n", "commitParents": ["090ce919ddd3eb30af664e0a1caed918b475ff55"], "commitHash": "6f8baff07d084f135082367f91ef2965d9820b4b", "commitSpoonAstDiffStats": [{"spoonFilePath": "ManagedSelector.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.DestroyEndPoint", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.DestroyEndPoint.run()", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.destroyEndPoint(org.eclipse.jetty.io.EndPoint).2.run()", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.destroyEndPoint(org.eclipse.jetty.io.EndPoint)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 5, "TOT": 7}]}], "nameRev": "6f8baff07d084f135082367f91ef2965d9820b4b tags/jetty-9.4.8.v20171121~23^2~7", "commitUser": "sbordet", "authoredDateTime": "2017-10-30 12:56:34", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 40, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ManagedSelector.java", "insertions": 28, "deletions": 12}], "commitDateTime": "2017-10-30 12:56:34", "spoonStatsSkippedReason": ""}], "title": "Rejected executions in QueuedThreadPool can lead to memory leaks", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0, "insertions": 0, "gitFilesChange": 0, "deletions": 0}, "closed": "2017-09-14 08:48:40", "statsSkippedReason": "", "body": "This issue follows the [discussion](http://dev.eclipse.org/mhonarc/lists/jetty-users/msg07972.html ) that took place with @gregw.\r\n\r\nWe are experiencing a memory leak in Jetty 9.4.6.\r\n\r\nWe are still unsure whether we are using Jetty improperly or if there is indeed a limitation in Jetty.\r\n\r\nThis behavior is observed under high load in a simulated environment using gatling and bench-rest, where QueuedTheadPool is saturated and [rejects jobs](https://github.com/eclipse/jetty.project/blob/jetty-9.4.6.v20170531/jetty-util/src/main/java/org/eclipse/jetty/util/thread/QueuedThreadPool.java#L384).\r\n\r\nWe are getting the following warn log from QueuedThreadPool :\r\n\r\n```\r\norg.eclipse.jetty.util.thread.QueuedThreadPool: dw{STARTED,4<=4<=4,i=0,q=4} rejected org.eclipse.jetty.io.ManagedSelector$$Lambda$72/1495355211@413f1bdf\r\n```\r\n_(the issue is also reproducible with much larger thread pools and queue sizes)_\r\n\r\nThe rejected lambda mentioned in the log is defined in [ManagedSelector.destroyEndPoint](https://github.com/eclipse/jetty.project/blob/jetty-9.4.6.v20170531/jetty-io/src/main/java/org/eclipse/jetty/io/ManagedSelector.java#L433).\r\n\r\nSince the lambda is not called, [AbstractConnector.onEndPointClosed](https://github.com/eclipse/jetty.project/blob/jetty-9.4.6.v20170531/jetty-server/src/main/java/org/eclipse/jetty/server/AbstractConnector.java#L676) is never called.\r\n\r\nTherefore, EndPoint objects remain in [AbstractConnector._endpoints](https://github.com/eclipse/jetty.project/blob/jetty-9.4.6.v20170531/jetty-server/src/main/java/org/eclipse/jetty/server/AbstractConnector.java#L147) and lead to out of memory errors.\r\n\r\nA screenshot of a memory dump showing 624159 endpoint objects holding 5GiB of heap memory : https://imagebin.ca/v/3VTm2n97Ntki\r\n\r\nA screenshot of how we validated the behavior using a \"logging breakpoint\" in the IDE : https://imagebin.ca/v/3VTnTSgJDnXx", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 42.000277777777775, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/1705"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "Maaartinus", "filteredCommits": ["bc7d53b43fa80805f3d95b69253514e35ff8d9f5"], "commits": {"bc7d53b43fa80805f3d95b69253514e35ff8d9f5": {"commitUser": "sbordet", "commitGHEventType": "closed"}}, "created": "2017-07-27 22:45:34", "commitsDetails": [{"commitMessage": "Fixes #1696 - WriteFlusher debug of onFail does not log stacktraces.\n\nFixed logging of exceptions.\n", "commitParents": ["c93360ad9ce8847fab2b1d80c29d0e9f01d89520"], "commitHash": "bc7d53b43fa80805f3d95b69253514e35ff8d9f5", "commitSpoonAstDiffStats": [{"spoonFilePath": "FillInterest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.FillInterest.onFail(java.lang.Throwable)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}]}, {"spoonFilePath": "WriteFlusher.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.WriteFlusher.onFail(java.lang.Throwable)", "DEL": 3, "INS": 3, "UPD": 0, "MOV": 3, "TOT": 9}]}], "nameRev": "bc7d53b43fa80805f3d95b69253514e35ff8d9f5 tags/jetty-9.4.8.v20171121~105", "commitUser": "sbordet", "authoredDateTime": "2017-10-06 17:08:30", "commitGHEventType": "closed", "commitGitStats": [{"lines": 4, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/FillInterest.java", "insertions": 1, "deletions": 3}, {"lines": 6, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/WriteFlusher.java", "insertions": 3, "deletions": 3}], "commitDateTime": "2017-10-06 17:08:30", "spoonStatsSkippedReason": ""}], "title": "Missing stacktraces on debug of WriteFlusher onFail", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 4, "INS": 4, "UPD": 0, "MOV": 4, "TOT": 12, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 10, "insertions": 4, "gitFilesChange": 2, "deletions": 6}, "closed": "2017-10-06 15:08:54", "statsSkippedReason": "", "body": "TL;DR The bug is in `JettyAwareLogger.log(Marker marker, int level, String msg, Object[] argArray, Throwable t)` line 620.\r\n\r\nThis is a trivial bug causing exceptions not being logged. I'm using\r\n```\r\norg.eclipse.jetty.http2:http2-server:9.4.0.v20161208\r\norg.eclipse.jetty:jetty-servlets:9.4.0.v20161208\r\norg.slf4j:slf4j-api:1.7.25\r\nch.qos.logback:logback-classic:1.2.3\r\n```\r\nThe intent is obviously to log the cause:\r\n```\r\norg.eclipse.jetty.io.WriteFlusher\r\npublic boolean onFail(Throwable cause)\r\nLOG.debug(\"ignored: {} {}\", this, cause);\r\ncause = java.nio.channels.ClosedChannelException\r\n```\r\nBut it's absent from the logfile. \r\n\r\nIt gets passed further to\r\n```\r\norg.eclipse.jetty.util.log.Slf4jLog\r\npublic void debug(String msg, Object... args)\r\n_logger.debug(msg, args);\r\nargs = [WriteFlusher@38211e27{IDLE}->null, java.nio.channels.ClosedChannelException]\r\n```\r\nand\r\n```\r\norg.eclipse.jetty.util.log.JettyAwareLogger\r\npublic void debug(String format, Object[] argArray)\r\nlog(null, DEBUG, format, argArray, null);\r\nargArray = [WriteFlusher@38211e27{IDLE}->null, java.nio.channels.ClosedChannelException]\r\n```\r\nand\r\n```\r\norg.eclipse.jetty.util.log.JettyAwareLogger\r\npublic void debug(String format, Object[] argArray)\r\nFormattingTuple ft = MessageFormatter.arrayFormat(msg, argArray);\r\nargArray = [WriteFlusher@38211e27{IDLE}->null, java.nio.channels.ClosedChannelException]\r\n```\r\nNow, the `FormattingTuple` contains the exception, but it's stored separately, rather then formatted in the message. The next line\r\n```\r\n_logger.log(marker, FQCN, level, ft.getMessage(), null, t)\r\n```\r\nuses `t`, which is `null`. So the exception does not get logged.\r\n\r\nSomething like `t != null ? t : ft.getThrowable()` would solve it.\r\n", "changesInPackagesGIT": ["jetty-io/src/main/java/org/eclipse/jetty/io"], "changesInPackagesSPOON": ["org.eclipse.jetty.io.WriteFlusher.onFail(java.lang.Throwable)", "org.eclipse.jetty.io.FillInterest.onFail(java.lang.Throwable)"], "ttf": 70.00027777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1696"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 3, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug", "Java 9"], "user": "joakime", "filteredCommits": ["e81e17d348da3b1a4a4494b7ef32c6ffa977f8e6"], "commits": {"223c82cb36ac591ec1ff08c19d8ae1597f5e6001": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "e81e17d348da3b1a4a4494b7ef32c6ffa977f8e6": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "e00182323bd98610de01500be0726b4d676f8123": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "d9c8f897418092a446fd59e451d127f21b23223d": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2017-07-25 19:42:48", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "223c82cb36ac591ec1ff08c19d8ae1597f5e6001", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1692\n", "commitParents": ["98eb354c46bf26277fe3f125f195c6da055e8595"], "commitHash": "e81e17d348da3b1a4a4494b7ef32c6ffa977f8e6", "commitSpoonAstDiffStats": [{"spoonFilePath": "AnnotationParser.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.annotations.AnnotationParser.isValidClassFileName(java.lang.String)", "DEL": 1, "INS": 5, "UPD": 0, "MOV": 1, "TOT": 7}]}], "nameRev": "e81e17d348da3b1a4a4494b7ef32c6ffa977f8e6 tags/jetty-9.4.7.RC0~58", "commitUser": "joakime", "authoredDateTime": "2017-07-26 09:38:49", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 11, "filePath": "jetty-annotations/src/main/java/org/eclipse/jetty/annotations/AnnotationParser.java", "insertions": 9, "deletions": 2}], "commitDateTime": "2017-08-08 09:15:27", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1692\n", "commitParents": ["1295dc372def7e596de9a97eeeac2b5c6391f136"], "commitHash": "e00182323bd98610de01500be0726b4d676f8123", "commitSpoonAstDiffStats": [{"spoonFilePath": "AnnotationParser.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.annotations.AnnotationParser.isValidClassFileName(java.lang.String)", "DEL": 1, "INS": 5, "UPD": 0, "MOV": 1, "TOT": 7}]}], "nameRev": "e00182323bd98610de01500be0726b4d676f8123 tags/jetty-9.4.8.v20171121~23^2~32", "commitUser": "gregw", "authoredDateTime": "2017-07-26 09:38:49", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 11, "filePath": "jetty-annotations/src/main/java/org/eclipse/jetty/annotations/AnnotationParser.java", "insertions": 9, "deletions": 2}], "commitDateTime": "2017-10-17 14:43:41", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1692\n", "commitParents": ["0ef76d56f0023a0fdbb9cef1ebd4867def92740b"], "commitHash": "d9c8f897418092a446fd59e451d127f21b23223d", "commitSpoonAstDiffStats": [{"spoonFilePath": "AnnotationParser.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.annotations.AnnotationParser.isValidClassFileName(java.lang.String)", "DEL": 1, "INS": 5, "UPD": 0, "MOV": 1, "TOT": 7}]}], "nameRev": "d9c8f897418092a446fd59e451d127f21b23223d tags/jetty-10.0.0.alpha1~632^2~1", "commitUser": "janbartel", "authoredDateTime": "2017-07-26 09:38:49", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 11, "filePath": "jetty-annotations/src/main/java/org/eclipse/jetty/annotations/AnnotationParser.java", "insertions": 9, "deletions": 2}], "commitDateTime": "2017-07-26 09:38:49", "spoonStatsSkippedReason": ""}], "title": "Annotation scanning should ignore `module-info.class` files", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 1.0, "INS": 5.0, "UPD": 0.0, "MOV": 1.0, "TOT": 7.0, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 11.0, "insertions": 9.0, "gitFilesChange": 1, "deletions": 2.0}, "closed": "2017-07-26 07:39:29", "statsSkippedReason": "", "body": "If a class has a JDK9 / JPMS specific feature known as `module-info.class`, then this class should never be scanned for annotations by Jetty's bytecode scanner.\r\n\r\nTo reproduce this bug, include the following classes in the `WEB-INF/lib` of a war file.\r\n\r\n`slf4j-api-1.8.0-alpha2.jar`\r\n`log4j-over-slf4j-1.8.0-alpha2.jar`\r\n`jcl-over-slf4j-1.8.0-alpha2.jar`", "changesInPackagesGIT": ["jetty-annotations/src/main/java/org/eclipse/jetty/annotations"], "changesInPackagesSPOON": ["org.eclipse.jetty.annotations.AnnotationParser.isValidClassFileName(java.lang.String)"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1692"}, {"labels": ["Bug"], "closed": "2018-09-11 18:18:08", "body": "`ServerContainer.assertIsValidEndpoint()` instantiates (via the zero-argument constructor) a throw-away WebSocket `EndPoint` to perform validation checks.\r\n\r\n`EndPoint`s are created via `ServerEndPointConfig.Configurator.getEndpointInstance()` and application are entitled to use any constructor they want, and omit the zero-argument constructor. This is what CometD does.\r\n\r\nI think the validation should be rewritten without instantiating a throw-away `EndPoint`.", "commits": {}, "title": "WebSocket EndPoint throw-away instantiation", "created": "2017-07-25 17:03:29", "user": "sbordet", "url": "https://github.com/eclipse/jetty.project/issues/1691", "commitsDetails": [], "ttf": 413.0002777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "joakime", "filteredCommits": [], "commits": {"cf3681ef568be2fea41e89b2937112a7474c5c07": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "fba1b50886cef72cf2108c932c6edbc63e6e10d2": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2017-07-24 16:43:20", "commitsDetails": [{"commitMessage": "Issue #1688 Encoded form content (#2733)\n\n* Issue #1688 Encoded form content\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n\r\n* fixes from review\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n", "commitParents": ["5e85ee851f957fae4a00fe0e3e7123b9a48c1278"], "commitHash": "cf3681ef568be2fea41e89b2937112a7474c5c07", "commitSpoonAstDiffStats": [{"spoonFilePath": "GzipHandlerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.GzipHandlerTest.init()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.GzipHandlerTest.testGzipFormRequest()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.GzipHandlerTest.DumpServlet", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "RequestTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testConnectionClose()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testBadCookies().27.check(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 7, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testPartialInput().23", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.test8859EncodedForm().17", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testEncodedFormUnknownMethod().15", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testBadCookies().27", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testHashDOSSize()", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testPartialRead().20", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.test8859EncodedForm()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testQueryAfterRead().21", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testUTF8EncodedForm().18", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testMultiPartFormDataReadInputThenParams().19", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testEncodedForm()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testHostPort()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testContentTypeEncoding().11", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testContent().13", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testCookies().26", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testConnectionClose().25", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testCookies()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testBadCookies()", "DEL": 0, "INS": 1, "UPD": 2, "MOV": 10, "TOT": 13}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testCookies().27.check(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testEncodedFormExtraMethod()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testSessionAfterRedirect().22", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testCookieLeak()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testUTF8EncodedForm()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testEncodedFormUnknownMethod()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testContent()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testContentTypeEncoding()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testConnectionClose().24", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testHashDOSKeys().29", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testHashDOSKeys()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testEncodedParamExtraction().11.check(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testEncodedForm().14", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testSessionAfterRedirect().22.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testHostPort().12", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testCookieLeak().28", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.RequestTest.testEncodedFormExtraMethod().16", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "GzipHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 5, "INS": 8, "UPD": 5, "MOV": 9, "TOT": 27}, {"spoonMethodName": "org.eclipse.jetty.server.handler.gzip.GzipHandler", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "Request.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Request.extractContentParameters()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "cf3681ef568be2fea41e89b2937112a7474c5c07 tags/jetty-9.4.12.RC1~8", "commitUser": "gregw", "authoredDateTime": "2018-07-20 09:30:36", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 45, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/GzipHandlerTest.java", "insertions": 45, "deletions": 0}, {"lines": 4, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Request.java", "insertions": 4, "deletions": 0}, {"lines": 36, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/gzip/GzipHandler.java", "insertions": 28, "deletions": 8}, {"lines": 36, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/RequestTest.java", "insertions": 36, "deletions": 0}], "commitDateTime": "2018-07-20 09:30:36", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "fba1b50886cef72cf2108c932c6edbc63e6e10d2", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "Request with `Content-Encoding: gzip` should not perform parameter extraction", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2018-07-20 10:43:56", "statsSkippedReason": "", "body": "Since Jetty does not support Request decompression, if a request shows up with `Content-Encoding: gzip` and the servlet does a HttpServletRequest.getParameter*() method call, then this should automatically fail, as its not possible for Jetty to satisfy this kind of request.", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 360.0002777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/1688"}, {"labels": ["Bug"], "closed": "2019-09-11 00:05:38", "body": "The method org.eclipse.jetty.util.ssl.SniX509ExtendedKeyManager.chooseServerAlias() should never return null because this result in a \"javax.net.ssl.SSLHandshakeException: no cipher suites in common\"\r\n\r\nSee also at https://stackoverflow.com/questions/41293778/jetty-javax-net-ssl-sslhandshakeexception-no-cipher-suites-in-common for details.\r\n\r\nIf this is a configuration error then is should throw an exception. If this valid then it should return NO_MATCHERS.\r\n\r\n", "commits": {}, "title": "javax.net.ssl.SSLHandshakeException: no cipher suites in common", "created": "2017-07-21 14:46:48", "user": "Horcrux7", "url": "https://github.com/eclipse/jetty.project/issues/1684", "commitsDetails": [], "ttf": 781.0002777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 4, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "rothskeller", "filteredCommits": ["86b4870d140759d4959cdafa63f96fcbc6967e23", "a2a03602695a8c9bd96e3460b6d1fdb804a0e9b8"], "commits": {"86b4870d140759d4959cdafa63f96fcbc6967e23": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "de775aad9b7a1442fed412dabe51a612e0cd0d88": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "dd3866bcd6e372cf82b2906319bbc63c1c3cf2dd": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "a2a03602695a8c9bd96e3460b6d1fdb804a0e9b8": {"commitUser": "joakime", "commitGHEventType": "closed"}, "c417a18cc8f7e6d444408600c87492e90811af6a": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "b838a236bf6e89944732e920bae8993cfdeb754b": {"commitUser": "joakime", "commitGHEventType": "closed"}}, "created": "2017-07-19 18:08:44", "commitsDetails": [{"commitMessage": "Fixed #1679 - moving JMX specific behavior to jmx.DeploymentManagerMBean\n", "commitParents": ["41938b2310a3616913124aa7c4ed3c92ed136790"], "commitHash": "a2a03602695a8c9bd96e3460b6d1fdb804a0e9b8", "commitSpoonAstDiffStats": [{"spoonFilePath": "DeploymentManager.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.deploy.DeploymentManager.getAppNames(java.lang.String)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.deploy.DeploymentManager.getApps(java.lang.String)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.deploy.DeploymentManager.getNodeNames()", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 2, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.deploy.DeploymentManager.getAppEntries()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "DeploymentManagerMBean.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.deploy.jmx.DeploymentManagerMBean", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.deploy.jmx.DeploymentManagerMBean.getApps()", "DEL": 1, "INS": 1, "UPD": 8, "MOV": 4, "TOT": 14}, {"spoonMethodName": "org.eclipse.jetty.deploy.jmx.DeploymentManagerMBean.getNodes()", "DEL": 0, "INS": 1, "UPD": 8, "MOV": 3, "TOT": 12}, {"spoonMethodName": "org.eclipse.jetty.deploy.jmx.DeploymentManagerMBean.getApps(java.lang.String)", "DEL": 0, "INS": 6, "UPD": 6, "MOV": 4, "TOT": 16}]}], "nameRev": "a2a03602695a8c9bd96e3460b6d1fdb804a0e9b8 tags/jetty-10.0.0.alpha1~633^2~6", "commitUser": "joakime", "authoredDateTime": "2017-07-20 11:22:54", "commitGHEventType": "closed", "commitGitStats": [{"lines": 70, "filePath": "jetty-deploy/src/main/java/org/eclipse/jetty/deploy/jmx/DeploymentManagerMBean.java", "insertions": 47, "deletions": 23}, {"lines": 34, "filePath": "jetty-deploy/src/main/java/org/eclipse/jetty/deploy/DeploymentManager.java", "insertions": 3, "deletions": 31}], "commitDateTime": "2017-07-20 11:22:54", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "de775aad9b7a1442fed412dabe51a612e0cd0d88", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixed #1679 - moving JMX specific behavior to jmx.DeploymentManagerMBean\n", "commitParents": ["9546db266bf5ed84aba384d3ec25aa8d6814c2c2"], "commitHash": "c417a18cc8f7e6d444408600c87492e90811af6a", "commitSpoonAstDiffStats": [{"spoonFilePath": "DeploymentManager.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.deploy.DeploymentManager.getAppNames(java.lang.String)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.deploy.DeploymentManager.getApps(java.lang.String)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.deploy.DeploymentManager.getNodeNames()", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 2, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.deploy.DeploymentManager.getAppEntries()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "DeploymentManagerMBean.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.deploy.jmx.DeploymentManagerMBean", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.deploy.jmx.DeploymentManagerMBean.getApps()", "DEL": 1, "INS": 1, "UPD": 8, "MOV": 4, "TOT": 14}, {"spoonMethodName": "org.eclipse.jetty.deploy.jmx.DeploymentManagerMBean.getNodes()", "DEL": 0, "INS": 1, "UPD": 8, "MOV": 3, "TOT": 12}, {"spoonMethodName": "org.eclipse.jetty.deploy.jmx.DeploymentManagerMBean.getApps(java.lang.String)", "DEL": 0, "INS": 6, "UPD": 6, "MOV": 4, "TOT": 16}]}], "nameRev": "c417a18cc8f7e6d444408600c87492e90811af6a tags/jetty-9.4.7.RC0~66", "commitUser": "joakime", "authoredDateTime": "2017-07-20 11:22:54", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 70, "filePath": "jetty-deploy/src/main/java/org/eclipse/jetty/deploy/jmx/DeploymentManagerMBean.java", "insertions": 47, "deletions": 23}, {"lines": 34, "filePath": "jetty-deploy/src/main/java/org/eclipse/jetty/deploy/DeploymentManager.java", "insertions": 3, "deletions": 31}], "commitDateTime": "2017-08-08 09:15:11", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixed #1679 - making DeploymentManager usable in JMX without error\n", "commitParents": ["ce4a8df311fef29c26bfe8bfea41ad18bdf30619"], "commitHash": "86b4870d140759d4959cdafa63f96fcbc6967e23", "commitSpoonAstDiffStats": [{"spoonFilePath": "DeploymentManager.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.deploy.DeploymentManager.getApps(java.lang.String)", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.deploy.DeploymentManager.getAppNames(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.deploy.DeploymentManager.getNodeNames()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "86b4870d140759d4959cdafa63f96fcbc6967e23 tags/jetty-9.4.7.RC0~70", "commitUser": "joakime", "authoredDateTime": "2017-07-19 15:29:31", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 32, "filePath": "jetty-deploy/src/main/java/org/eclipse/jetty/deploy/DeploymentManager.java", "insertions": 30, "deletions": 2}], "commitDateTime": "2017-08-08 09:15:01", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "dd3866bcd6e372cf82b2906319bbc63c1c3cf2dd", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixed #1679 - making DeploymentManager usable in JMX without error\n", "commitParents": ["300bde15354038f7e377320ed597b382718ae627"], "commitHash": "b838a236bf6e89944732e920bae8993cfdeb754b", "commitSpoonAstDiffStats": [{"spoonFilePath": "DeploymentManager.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.deploy.DeploymentManager.getApps(java.lang.String)", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.deploy.DeploymentManager.getAppNames(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.deploy.DeploymentManager.getNodeNames()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "b838a236bf6e89944732e920bae8993cfdeb754b tags/jetty-10.0.0.alpha1~638^2~3", "commitUser": "joakime", "authoredDateTime": "2017-07-19 15:29:31", "commitGHEventType": "closed", "commitGitStats": [{"lines": 32, "filePath": "jetty-deploy/src/main/java/org/eclipse/jetty/deploy/DeploymentManager.java", "insertions": 30, "deletions": 2}], "commitDateTime": "2017-07-19 15:29:31", "spoonStatsSkippedReason": ""}], "title": "DeploymentManagerMBean not usable through JMX", "spoonStatsSummary": {"spoonMethodsChanged": 8, "DEL": 4.0, "INS": 12.0, "UPD": 25.0, "MOV": 15.0, "TOT": 56.0, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 136.0, "insertions": 80.0, "gitFilesChange": 2, "deletions": 56.0}, "closed": "2017-07-20 18:23:37", "statsSkippedReason": "", "body": "JMX calls to various methods of the DeploymentManager fail due to NotSerializableException.  For example, when sending a getApps() request to the DeploymentManager mbean, the response is a NotSerializableException for org.eclipse.jetty.deploy.App.\r\n\r\nAfter some code analysis, I believe the reason for this is that DeploymentManager has the \"@ManagedObject\" annotation, and its getApps method has the \"@ManagedAttribute\" annotation.  But that method returns a Collection<App>, and App is not serializable, so it cannot be sent back to the JMX caller.  The JMX calls _should_ be handled by DeploymentManagerMBean; its getApps method returns Collection<String>.  But DeploymentManagerMBean doesn't have the same annotations, so it is ignored.\r\n\r\nThis problem was found on Jetty 9.2.22.  But the offending code is unchanged in the current Jetty versions.", "changesInPackagesGIT": ["jetty-deploy/src/main/java/org/eclipse/jetty/deploy/jmx", "jetty-deploy/src/main/java/org/eclipse/jetty/deploy"], "changesInPackagesSPOON": ["org.eclipse.jetty.deploy.jmx.DeploymentManagerMBean", "org.eclipse.jetty.deploy.jmx.DeploymentManagerMBean.getApps()", "org.eclipse.jetty.deploy.jmx.DeploymentManagerMBean.getNodes()", "org.eclipse.jetty.deploy.DeploymentManager.getNodeNames()", "org.eclipse.jetty.deploy.DeploymentManager.getAppEntries()", "org.eclipse.jetty.deploy.DeploymentManager.getApps(java.lang.String)", "org.eclipse.jetty.deploy.DeploymentManager.getAppNames(java.lang.String)", "org.eclipse.jetty.deploy.jmx.DeploymentManagerMBean.getApps(java.lang.String)"], "ttf": 1.0002777777777778, "numCommits": 2, "url": "https://github.com/eclipse/jetty.project/issues/1679"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 2, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["95d43906bbbcafbc639bab551be2c26497e0781e"], "commits": {"3aa42d989bb3bb748f563f0c13dc8b57a73ad063": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "95d43906bbbcafbc639bab551be2c26497e0781e": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "16b5b1a26cd1933614dca5f82a36b59a59f23146": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2017-06-22 18:49:12", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "16b5b1a26cd1933614dca5f82a36b59a59f23146", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1642 - avoid casting to get to (base) Request\n", "commitParents": ["3cca6642d13144667cb8f60d2a025e1c83542a41"], "commitHash": "95d43906bbbcafbc639bab551be2c26497e0781e", "commitSpoonAstDiffStats": [{"spoonFilePath": "RuleContainer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.rewrite.handler.RuleContainer.apply(java.lang.String,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 2, "UPD": 4, "MOV": 1, "TOT": 7}]}], "nameRev": "95d43906bbbcafbc639bab551be2c26497e0781e tags/jetty-10.0.0.alpha1~638^2~6^2", "commitUser": "joakime", "authoredDateTime": "2017-06-22 12:05:43", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 15, "filePath": "jetty-rewrite/src/main/java/org/eclipse/jetty/rewrite/handler/RuleContainer.java", "insertions": 9, "deletions": 6}], "commitDateTime": "2017-06-22 12:05:43", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1642 - avoid casting to get to (base) Request\n", "commitParents": ["b0e5681451c6c4638883fc70b4a4972b88619ac1"], "commitHash": "3aa42d989bb3bb748f563f0c13dc8b57a73ad063", "commitSpoonAstDiffStats": [{"spoonFilePath": "RuleContainer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.rewrite.handler.RuleContainer.apply(java.lang.String,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 2, "UPD": 4, "MOV": 1, "TOT": 7}]}], "nameRev": "3aa42d989bb3bb748f563f0c13dc8b57a73ad063 tags/jetty-9.4.7.RC0~111", "commitUser": "joakime", "authoredDateTime": "2017-06-22 12:05:43", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 15, "filePath": "jetty-rewrite/src/main/java/org/eclipse/jetty/rewrite/handler/RuleContainer.java", "insertions": 9, "deletions": 6}], "commitDateTime": "2017-08-08 09:13:48", "spoonStatsSkippedReason": ""}], "title": "Using RewriteHandler with AsyncContext.dispatch() and HttpServletRequestWrapper not possible", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0.0, "INS": 2.0, "UPD": 4.0, "MOV": 1.0, "TOT": 7.0, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 15.0, "insertions": 9.0, "gitFilesChange": 1, "deletions": 6.0}, "closed": "2017-07-19 17:37:41", "statsSkippedReason": "", "body": "If you have an HttpServletRequestWrapper in use, and also have RewriteHandler rules setup, then you cannot use AsyncContext.dispatch() as it will trigger an exception in RewriteHandler.\r\n\r\n```\r\n06/22/17 18:39:05 [WARNING] /asyncdemo/foo/bar\r\njava.lang.ClassCastException: org.eclipse.jetty.demo.AntiPatternRequestWrapper cannot be cast to org.eclipse.jetty.server.Request\r\n        at org.eclipse.jetty.rewrite.handler.RuleContainer.apply(RuleContainer.java:188)\r\n        at org.eclipse.jetty.rewrite.handler.RuleContainer.matchAndApply(RuleContainer.java:149)\r\n        at org.eclipse.jetty.rewrite.handler.RewriteHandler.handle(RewriteHandler.java:330)\r\n        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132)\r\n        at org.eclipse.jetty.server.Server.handleAsync(Server.java:609)\r\n        at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:334)\r\n        at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:251)\r\n        at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:279)\r\n        at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:110)\r\n        at org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:124)\r\n        at org.eclipse.jetty.util.thread.Invocable.invokePreferred(Invocable.java:128)\r\n        at org.eclipse.jetty.util.thread.Invocable$InvocableExecutor.invoke(Invocable.java:222)\r\n        at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:294)\r\n        at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:199)\r\n        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:673)\r\n        at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:591)\r\n        at java.lang.Thread.run(Thread.java:745)\r\n```", "changesInPackagesGIT": ["jetty-rewrite/src/main/java/org/eclipse/jetty/rewrite/handler"], "changesInPackagesSPOON": ["org.eclipse.jetty.rewrite.handler.RuleContainer.apply(java.lang.String,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)"], "ttf": 26.00027777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1642"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 2, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "frost13it", "filteredCommits": ["9e0fd7faa0217726ec8b3fac288b2daf17608f45"], "commits": {"29f3e48ba90d05ad78953563dd672802ebd8ae69": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "9e0fd7faa0217726ec8b3fac288b2daf17608f45": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "796da084b4bc40c855b9ed6b18ad12865aec0c38": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2017-06-16 05:11:36", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "29f3e48ba90d05ad78953563dd672802ebd8ae69", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1625 - Support new IANA declared websocket close status codes\n", "commitParents": ["0532852730d875e8c4217266b1808d845b96fd37"], "commitHash": "9e0fd7faa0217726ec8b3fac288b2daf17608f45", "commitSpoonAstDiffStats": [{"spoonFilePath": "SlowServerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.client.SlowServerTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "TestABCase7_GoodStatusCodes.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.ab.TestABCase7_GoodStatusCodes.data()", "DEL": 0, "INS": 4, "UPD": 0, "MOV": 0, "TOT": 4}]}, {"spoonFilePath": "TestABCase3.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.ab.TestABCase3", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "CloseInfoTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.CloseInfoTest.testFailedTlsHandshake()", "DEL": 1, "INS": 4, "UPD": 5, "MOV": 7, "TOT": 17}]}, {"spoonFilePath": "StatusCode.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.api.StatusCode.isTransmittable(int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.api.StatusCode", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "CloseInfo.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.CloseInfo.asByteBuffer()", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.CloseInfo.asFrame()", "DEL": 2, "INS": 1, "UPD": 4, "MOV": 10, "TOT": 17}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.CloseInfo", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 3, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.CloseInfo.assertValidStatusCode(int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "TestABCase7_BadStatusCodes.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.ab.TestABCase7_BadStatusCodes.data()", "DEL": 4, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 5}]}], "nameRev": "9e0fd7faa0217726ec8b3fac288b2daf17608f45 tags/jetty-10.0.0.alpha1~660^2~9", "commitUser": "joakime", "authoredDateTime": "2017-06-16 14:23:29", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 37, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/CloseInfo.java", "insertions": 26, "deletions": 11}, {"lines": 19, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/CloseInfoTest.java", "insertions": 5, "deletions": 14}, {"lines": 5, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/ab/TestABCase7_GoodStatusCodes.java", "insertions": 4, "deletions": 1}, {"lines": 16, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/ab/TestABCase7_BadStatusCodes.java", "insertions": 8, "deletions": 8}, {"lines": 56, "filePath": "jetty-websocket/websocket-server/src/test/resources/jetty-logging.properties", "insertions": 28, "deletions": 28}, {"lines": 4, "filePath": "jetty-websocket/websocket-client/src/test/java/org/eclipse/jetty/websocket/client/SlowServerTest.java", "insertions": 3, "deletions": 1}, {"lines": 5, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/ab/TestABCase3.java", "insertions": 0, "deletions": 5}, {"lines": 33, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/StatusCode.java", "insertions": 32, "deletions": 1}], "commitDateTime": "2017-06-16 14:23:29", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1625 - Support new IANA declared websocket close status codes\n", "commitParents": ["af4962f842d707a76b556539548e11239b24e4e9"], "commitHash": "796da084b4bc40c855b9ed6b18ad12865aec0c38", "commitSpoonAstDiffStats": [{"spoonFilePath": "SlowServerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.client.SlowServerTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "TestABCase7_GoodStatusCodes.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.ab.TestABCase7_GoodStatusCodes.data()", "DEL": 0, "INS": 4, "UPD": 0, "MOV": 0, "TOT": 4}]}, {"spoonFilePath": "TestABCase3.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.ab.TestABCase3", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "CloseInfoTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.CloseInfoTest.testFailedTlsHandshake()", "DEL": 1, "INS": 4, "UPD": 5, "MOV": 7, "TOT": 17}]}, {"spoonFilePath": "StatusCode.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.api.StatusCode.isTransmittable(int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.api.StatusCode", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "CloseInfo.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.CloseInfo.asByteBuffer()", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.CloseInfo.asFrame()", "DEL": 2, "INS": 1, "UPD": 4, "MOV": 10, "TOT": 17}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.CloseInfo", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 3, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.CloseInfo.assertValidStatusCode(int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "TestABCase7_BadStatusCodes.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.ab.TestABCase7_BadStatusCodes.data()", "DEL": 4, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 5}]}], "nameRev": "796da084b4bc40c855b9ed6b18ad12865aec0c38 tags/jetty-9.4.7.RC0~172", "commitUser": "joakime", "authoredDateTime": "2017-06-16 14:23:29", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 37, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/CloseInfo.java", "insertions": 26, "deletions": 11}, {"lines": 19, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/CloseInfoTest.java", "insertions": 5, "deletions": 14}, {"lines": 5, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/ab/TestABCase7_GoodStatusCodes.java", "insertions": 4, "deletions": 1}, {"lines": 16, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/ab/TestABCase7_BadStatusCodes.java", "insertions": 8, "deletions": 8}, {"lines": 56, "filePath": "jetty-websocket/websocket-server/src/test/resources/jetty-logging.properties", "insertions": 28, "deletions": 28}, {"lines": 4, "filePath": "jetty-websocket/websocket-client/src/test/java/org/eclipse/jetty/websocket/client/SlowServerTest.java", "insertions": 3, "deletions": 1}, {"lines": 5, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/ab/TestABCase3.java", "insertions": 0, "deletions": 5}, {"lines": 33, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/StatusCode.java", "insertions": 32, "deletions": 1}], "commitDateTime": "2017-08-08 08:49:58", "spoonStatsSkippedReason": ""}], "title": "Support new IANA declared Websocket Close Status Codes", "spoonStatsSummary": {"spoonMethodsChanged": 6, "DEL": 3.0, "INS": 7.0, "UPD": 4.0, "MOV": 14.0, "TOT": 28.0, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 70.0, "insertions": 58.0, "gitFilesChange": 2, "deletions": 12.0}, "closed": "2017-06-16 21:33:42", "statsSkippedReason": "", "body": "When I trying to close websocket with `CloseReason.CloseCodes.TRY_AGAIN_LATER`, Jetty throws `ProtocolException` (see `org.eclipse.jetty.websocket.common.CloseInfo`).\r\n\r\nI think close codes 1012 and 1013 should be available for use.\r\nThese codes are registered in IANA:\r\nhttps://www.iana.org/assignments/websocket/websocket.xhtml#close-code-number", "changesInPackagesGIT": ["jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api", "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common"], "changesInPackagesSPOON": ["org.eclipse.jetty.websocket.common.CloseInfo.asByteBuffer()", "org.eclipse.jetty.websocket.common.CloseInfo.asFrame()", "org.eclipse.jetty.websocket.api.StatusCode", "org.eclipse.jetty.websocket.common.CloseInfo", "org.eclipse.jetty.websocket.common.CloseInfo.assertValidStatusCode(int)", "org.eclipse.jetty.websocket.api.StatusCode.isTransmittable(int)"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1625"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 8, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "rstoyanchev", "filteredCommits": ["61904052f4058efa73a4be4158ee822b9f0f008b", "2416430527accf152b6af114f3099ed5182b2b24", "59e919bfe51700c297642d58301579524a6c864b", "c9a1395f08a06a523ac6654d1781f8f007a09cf9"], "commits": {"61904052f4058efa73a4be4158ee822b9f0f008b": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "59e919bfe51700c297642d58301579524a6c864b": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "d2dbe07ba6e6fb48cdf46a40ac86273a566808d6": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "61d7ac571199898b102e50bbbc89fc24cd7eac57": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "c9a1395f08a06a523ac6654d1781f8f007a09cf9": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "4556680ddb8dae48fb7c31e515ee7091918ae04d": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "166b4b9e47c58af437199f9e4fe8580b90dc12ce": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "d22daadf4be185e252755dbfa23f8264e515973d": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "2416430527accf152b6af114f3099ed5182b2b24": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "90e5b5603be3a2efe558d7e6da92bee33ec90578": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "88a951735c534d57b9be116658da414fd2c5e69e": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "8c96fdde4c8e11e9cde999a7fff3a63bde548d4e": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2017-06-15 13:53:30", "commitsDetails": [{"commitMessage": "Issue #1618 - new testcase for startAsync(req,resp).dispatch() behavior with regards to URL/URI\n", "commitParents": ["8c96fdde4c8e11e9cde999a7fff3a63bde548d4e"], "commitHash": "61904052f4058efa73a4be4158ee822b9f0f008b", "commitSpoonAstDiffStats": [{"spoonFilePath": "AsyncContextTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.AsyncContextTest.setUp()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.AsyncContextTest.testDispatchAsyncContext_SelfEncodedUrl()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.AsyncContextTest.SelfDispatchingServlet", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "61904052f4058efa73a4be4158ee822b9f0f008b tags/jetty-9.4.7.RC0~118", "commitUser": "joakime", "authoredDateTime": "2017-06-19 13:38:19", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 44, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/AsyncContextTest.java", "insertions": 43, "deletions": 1}], "commitDateTime": "2017-08-08 09:13:41", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1618 - adding testcase to verify AsyncContext dispatch encoding\n", "commitParents": ["166f44fad2524a65e30859adf5da394da1218091"], "commitHash": "59e919bfe51700c297642d58301579524a6c864b", "commitSpoonAstDiffStats": [{"spoonFilePath": "AsyncContextTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.AsyncContextTest.testDispatchAsyncContext_EncodedUrl()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.AsyncContextTest.TestServlet.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 1, "INS": 10, "UPD": 0, "MOV": 3, "TOT": 14}, {"spoonMethodName": "org.eclipse.jetty.servlet.AsyncContextTest.setUp()", "DEL": 0, "INS": 4, "UPD": 0, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.servlet.AsyncContextTest.TestServlet2.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 9, "UPD": 0, "MOV": 3, "TOT": 12}, {"spoonMethodName": "org.eclipse.jetty.servlet.AsyncContextTest.TestServlet.init()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.AsyncContextTest.TestServlet", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "59e919bfe51700c297642d58301579524a6c864b tags/jetty-10.0.0.alpha1~660^2~7", "commitUser": "joakime", "authoredDateTime": "2017-06-19 08:33:12", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 74, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/AsyncContextTest.java", "insertions": 71, "deletions": 3}], "commitDateTime": "2017-06-19 08:33:12", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "d2dbe07ba6e6fb48cdf46a40ac86273a566808d6", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "61d7ac571199898b102e50bbbc89fc24cd7eac57", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1618 - updating testcase expectations for getPathInfo to match javadoc\n", "commitParents": ["59e919bfe51700c297642d58301579524a6c864b"], "commitHash": "2416430527accf152b6af114f3099ed5182b2b24", "commitSpoonAstDiffStats": [{"spoonFilePath": "AsyncContextTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.AsyncContextTest.testDispatchAsyncContext_EncodedUrl()", "DEL": 1, "INS": 0, "UPD": 3, "MOV": 0, "TOT": 4}]}], "nameRev": "2416430527accf152b6af114f3099ed5182b2b24 tags/jetty-10.0.0.alpha1~660^2~6", "commitUser": "joakime", "authoredDateTime": "2017-06-19 08:39:39", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 8, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/AsyncContextTest.java", "insertions": 3, "deletions": 5}], "commitDateTime": "2017-06-19 08:39:39", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1618 - adding testcase to verify AsyncContext dispatch encoding\n", "commitParents": ["11f2cc5294efab09b5b9bfe2118645e2069711fc"], "commitHash": "4556680ddb8dae48fb7c31e515ee7091918ae04d", "commitSpoonAstDiffStats": [{"spoonFilePath": "AsyncContextTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.AsyncContextTest.testDispatchAsyncContext_EncodedUrl()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.AsyncContextTest.TestServlet.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 1, "INS": 10, "UPD": 0, "MOV": 3, "TOT": 14}, {"spoonMethodName": "org.eclipse.jetty.servlet.AsyncContextTest.setUp()", "DEL": 0, "INS": 4, "UPD": 0, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.servlet.AsyncContextTest.TestServlet2.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 9, "UPD": 0, "MOV": 3, "TOT": 12}, {"spoonMethodName": "org.eclipse.jetty.servlet.AsyncContextTest.TestServlet.init()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.AsyncContextTest.TestServlet", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "4556680ddb8dae48fb7c31e515ee7091918ae04d tags/jetty-9.4.7.RC0~120", "commitUser": "joakime", "authoredDateTime": "2017-06-19 08:33:12", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 74, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/AsyncContextTest.java", "insertions": 71, "deletions": 3}], "commitDateTime": "2017-08-08 09:13:40", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1618 - new testcase for startAsync(req,resp).dispatch() behavior with regards to URL/URI\n", "commitParents": ["2416430527accf152b6af114f3099ed5182b2b24"], "commitHash": "166b4b9e47c58af437199f9e4fe8580b90dc12ce", "commitSpoonAstDiffStats": [{"spoonFilePath": "AsyncContextTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.AsyncContextTest.setUp()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.AsyncContextTest.testDispatchAsyncContext_SelfEncodedUrl()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.AsyncContextTest.SelfDispatchingServlet", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "166b4b9e47c58af437199f9e4fe8580b90dc12ce tags/jetty-10.0.0.alpha1~660^2~5", "commitUser": "joakime", "authoredDateTime": "2017-06-19 13:38:19", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 44, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/AsyncContextTest.java", "insertions": 43, "deletions": 1}], "commitDateTime": "2017-06-19 13:38:19", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "d22daadf4be185e252755dbfa23f8264e515973d", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1618 Async dispatch encoded passed URI\n", "commitParents": ["b81115dfbc1e0767af01c20fef50277af8b24554"], "commitHash": "c9a1395f08a06a523ac6654d1781f8f007a09cf9", "commitSpoonAstDiffStats": [{"spoonFilePath": "AsyncContextTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.AsyncContextTest.testDispatchAsyncContext_SelfEncodedUrl()", "DEL": 1, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.servlet.AsyncContextTest.testDispatch()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "Request.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Request.startAsync(javax.servlet.ServletRequest,javax.servlet.ServletResponse)", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 1, "TOT": 4}]}], "nameRev": "c9a1395f08a06a523ac6654d1781f8f007a09cf9 tags/jetty-9.4.7.RC0~116", "commitUser": "joakime", "authoredDateTime": "2017-06-21 10:28:26", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 6, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/AsyncContextTest.java", "insertions": 2, "deletions": 4}, {"lines": 10, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Request.java", "insertions": 9, "deletions": 1}], "commitDateTime": "2017-08-08 09:13:43", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1618 Async dispatch encoded passed URI\n", "commitParents": ["de976e8777d727cf6f7a0cbcfd283d63b6840c9c"], "commitHash": "90e5b5603be3a2efe558d7e6da92bee33ec90578", "commitSpoonAstDiffStats": [{"spoonFilePath": "AsyncContextTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.AsyncContextTest.testDispatchAsyncContext_SelfEncodedUrl()", "DEL": 1, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.servlet.AsyncContextTest.testDispatch()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "Request.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Request.startAsync(javax.servlet.ServletRequest,javax.servlet.ServletResponse)", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 1, "TOT": 4}]}], "nameRev": "90e5b5603be3a2efe558d7e6da92bee33ec90578 tags/jetty-10.0.0.alpha1~660^2~3", "commitUser": "gregw", "authoredDateTime": "2017-06-21 10:28:26", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 6, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/AsyncContextTest.java", "insertions": 2, "deletions": 4}, {"lines": 10, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Request.java", "insertions": 9, "deletions": 1}], "commitDateTime": "2017-06-21 10:28:26", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "88a951735c534d57b9be116658da414fd2c5e69e", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1618 - updating testcase expectations for getPathInfo to match javadoc\n", "commitParents": ["4556680ddb8dae48fb7c31e515ee7091918ae04d"], "commitHash": "8c96fdde4c8e11e9cde999a7fff3a63bde548d4e", "commitSpoonAstDiffStats": [{"spoonFilePath": "AsyncContextTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.AsyncContextTest.testDispatchAsyncContext_EncodedUrl()", "DEL": 1, "INS": 0, "UPD": 3, "MOV": 0, "TOT": 4}]}], "nameRev": "8c96fdde4c8e11e9cde999a7fff3a63bde548d4e tags/jetty-9.4.7.RC0~119", "commitUser": "joakime", "authoredDateTime": "2017-06-19 08:39:39", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 8, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/AsyncContextTest.java", "insertions": 3, "deletions": 5}], "commitDateTime": "2017-08-08 09:13:41", "spoonStatsSkippedReason": ""}], "title": "AsyncContext.dispatch() does not use raw/encoded URI", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0.0, "INS": 3.0, "UPD": 0.0, "MOV": 1.0, "TOT": 4.0, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 10.0, "insertions": 9.0, "gitFilesChange": 1, "deletions": 1.0}, "closed": "2018-03-13 02:31:39", "statsSkippedReason": "", "body": "The Servlet spec says this about the parameter-less dispatch:\r\n\r\n> If the AsyncContext was initialized via the startAsync(ServletRequest, ServletResponse) and the request passed is an instance of HttpServletRequest , then the dispatch is to the URI returned by HttpServletRequest.getRequestURI()\r\n\r\nYet given a URL with an encoded slash:\r\n`/foo/vv%2F1234/add/2` \r\n\r\nThe dispatch ends up going to:\r\n`/foo/vv/1234/add/2`", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.Request.startAsync(javax.servlet.ServletRequest,javax.servlet.ServletResponse)"], "ttf": 270.0002777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1618"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug", "Stale"], "user": "joakime", "filteredCommits": ["748d582994ddb68adf9113e377f773ce9a2a8cab"], "commits": {"748d582994ddb68adf9113e377f773ce9a2a8cab": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2017-06-14 21:19:30", "commitsDetails": [{"commitMessage": "Issue #1615 Moved test keystore and passwords to test-keystore module\n", "commitParents": ["1956087277ce53d6c583a04b926036a50f46defe"], "commitHash": "748d582994ddb68adf9113e377f773ce9a2a8cab", "commitSpoonAstDiffStats": [], "nameRev": "748d582994ddb68adf9113e377f773ce9a2a8cab tags/jetty-10.0.0.alpha1~654", "commitUser": "gregw", "authoredDateTime": "2017-07-18 14:57:59", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 9, "filePath": "jetty-server/src/main/config/modules/ssl.mod", "insertions": 3, "deletions": 6}, {"lines": 2, "filePath": "jetty-distribution/pom.xml", "insertions": 1, "deletions": 1}, {"lines": 0, "filePath": "jetty-server/src/main/config/modules/{ssl => test-keystore}/keystore", "insertions": 0, "deletions": 0}, {"lines": 21, "filePath": "jetty-server/src/main/config/modules/test-keystore.mod", "insertions": 21, "deletions": 0}], "commitDateTime": "2017-07-18 14:57:59", "spoonStatsSkippedReason": ""}], "title": "Password defaults in jetty-ssl-context.xml should be removed", "spoonStatsSummary": {}, "gitStatsSummary": {"lines": 30, "insertions": 24, "gitFilesChange": 3, "deletions": 6}, "closed": "2019-11-21 03:00:58", "statsSkippedReason": "", "body": "Currently the [etc/jetty-ssl-context.xml](https://github.com/eclipse/jetty.project/blob/jetty-9.4.6.v20170531/jetty-server/src/main/config/etc/jetty-ssl-context.xml) has defaults for some of the passwords for the keystore.\r\n\r\nThere should be no password defaults.\r\n\r\nAlso, the SslContextFactory should produce meaningful errors if the passwords are invalid/incorrect.\r\n", "changesInPackagesGIT": ["jetty-server/src/main/config/modules/ssl.mod", "jetty-server/src/main/config/modules/{ssl => test-keystore}/keystore", "jetty-server/src/main/config/modules/test-keystore.mod"], "ttf": 889.0002777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1615"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 4, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["caff2b932d29ace25e329ebcbeeaf9a72ebab725", "af4962f842d707a76b556539548e11239b24e4e9"], "commits": {"af4962f842d707a76b556539548e11239b24e4e9": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "67022482e581edf7618847cad3cc5d31067b27c4": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "caff2b932d29ace25e329ebcbeeaf9a72ebab725": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "738d728436c4ac442c36f9519716e51cd6017195": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "af13380dd2cf5b99ddfb9d97e155e5d6f3731725": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "0de3673132d6764e9a1ba4e7ec2d6dd42e673a04": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2017-06-07 15:33:14", "commitsDetails": [{"commitMessage": "Issue #1605 - common executor and bufferpool for jsr356 client\n", "commitParents": ["0de3673132d6764e9a1ba4e7ec2d6dd42e673a04"], "commitHash": "af4962f842d707a76b556539548e11239b24e4e9", "commitSpoonAstDiffStats": [{"spoonFilePath": "SimpleContainerScope.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.scopes.SimpleContainerScope", "DEL": 0, "INS": 7, "UPD": 0, "MOV": 12, "TOT": 19}]}, {"spoonFilePath": "JettyClientContainerProvider.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.JettyClientContainerProvider.getContainer()", "DEL": 0, "INS": 3, "UPD": 1, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.JettyClientContainerProvider", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "DelayedStartClientOnServerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.DelayedStartClientOnServerTest.testHttpClientThreads_AfterClientConnectTo()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "af4962f842d707a76b556539548e11239b24e4e9 tags/jetty-9.4.7.RC0~173", "commitUser": "joakime", "authoredDateTime": "2017-06-12 09:23:23", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 28, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/JettyClientContainerProvider.java", "insertions": 25, "deletions": 3}, {"lines": 2, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/DelayedStartClientOnServerTest.java", "insertions": 1, "deletions": 1}, {"lines": 41, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/scopes/SimpleContainerScope.java", "insertions": 31, "deletions": 10}], "commitDateTime": "2017-08-08 08:49:57", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1605 - common executor and bufferpool for jsr356 client\n", "commitParents": ["10a6e5fa5e37884a8e3321a8e2904caacc9761ba"], "commitHash": "67022482e581edf7618847cad3cc5d31067b27c4", "commitSpoonAstDiffStats": [{"spoonFilePath": "SimpleContainerScope.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.scopes.SimpleContainerScope", "DEL": 0, "INS": 7, "UPD": 0, "MOV": 12, "TOT": 19}]}, {"spoonFilePath": "JettyClientContainerProvider.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.JettyClientContainerProvider.getContainer()", "DEL": 0, "INS": 3, "UPD": 1, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.JettyClientContainerProvider", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "DelayedStartClientOnServerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.DelayedStartClientOnServerTest.testHttpClientThreads_AfterClientConnectTo()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "67022482e581edf7618847cad3cc5d31067b27c4 tags/jetty-10.0.0.alpha1~660^2~14", "commitUser": "joakime", "authoredDateTime": "2017-06-12 09:23:23", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 28, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/JettyClientContainerProvider.java", "insertions": 25, "deletions": 3}, {"lines": 2, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/DelayedStartClientOnServerTest.java", "insertions": 1, "deletions": 1}, {"lines": 41, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/scopes/SimpleContainerScope.java", "insertions": 31, "deletions": 10}], "commitDateTime": "2017-06-12 09:23:23", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1605 - restoring default behavior of ContainerProvider.getWebSocketContainer()\n\n+ Allowing users to reconfigure JettyClientContainerProvider to restore\n  the Jetty 9.4.x behavior for singletons and ServerContainer behaviors\n", "commitParents": ["c85e50a83c18ddbb67e2505dcb23fd092f99c3c6"], "commitHash": "caff2b932d29ace25e329ebcbeeaf9a72ebab725", "commitSpoonAstDiffStats": [{"spoonFilePath": "EndpointEchoTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.EndpointEchoTest.testAbstractEchoInstance()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.EndpointEchoTest.testBasicEchoClassref()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.EndpointEchoTest.testBasicEchoInstance()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.EndpointEchoTest.testAbstractEchoClassref()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "DelayedStartClientTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.DelayedStartClientTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.DelayedStartClientTest.getThreadNames()", "DEL": 2, "INS": 0, "UPD": 11, "MOV": 1, "TOT": 14}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.DelayedStartClientTest.testNoExtraHttpClientThreads()", "DEL": 3, "INS": 3, "UPD": 0, "MOV": 1, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.DelayedStartClientTest.getThreadNames(org.eclipse.jetty.util.component.ContainerLifeCycle[])", "DEL": 0, "INS": 5, "UPD": 0, "MOV": 0, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.DelayedStartClientTest.stopClientContainer()", "DEL": 1, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.DelayedStartClientTest.stopContainer()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.DelayedStartClientTest.findConfiguredThreadNames(java.util.Set,java.util.List,org.eclipse.jetty.util.component.ContainerLifeCycle)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "MessageReceivingTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.MessageReceivingTest.configureTest()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.MessageReceivingTest.stopClient()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "EncoderTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.EncoderTest.stopClient()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AnnotatedEndpointConfigTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.AnnotatedEndpointConfigTest.startEnv()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "DelayedStartClientOnServerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.DelayedStartClientOnServerTest.testHttpClientThreads_AfterServerConnectTo()", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.DelayedStartClientOnServerTest.testHttpClientThreads_AfterClientConfigure()", "DEL": 1, "INS": 2, "UPD": 1, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.DelayedStartClientOnServerTest.testHttpClientThreads_AfterClientConnectTo()", "DEL": 1, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.DelayedStartClientOnServerTest.testNoExtraHttpClientThreads()", "DEL": 2, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.DelayedStartClientOnServerTest.findConfiguredThreadNames(java.util.Set,java.util.List,org.eclipse.jetty.util.component.ContainerLifeCycle)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.DelayedStartClientOnServerTest.stopClientContainer()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.DelayedStartClientOnServerTest.getThreadNames()", "DEL": 2, "INS": 0, "UPD": 11, "MOV": 1, "TOT": 14}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.DelayedStartClientOnServerTest.getThreadNames(org.eclipse.jetty.util.component.ContainerLifeCycle[])", "DEL": 0, "INS": 5, "UPD": 0, "MOV": 0, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.DelayedStartClientOnServerTest.testHttpClientThreads_AfterServerConfigure()", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 3}]}, {"spoonFilePath": "CookiesTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.CookiesTest.testCookiesAreSentToServer()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.CookiesTest.testCookiesAreSentToClient()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.CookiesTest.resetClientContainer()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "DecoderReaderTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.DecoderReaderTest.stopClient()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "DecoderReaderManySmallTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.DecoderReaderManySmallTest.stopClient()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AnnotatedEchoTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.AnnotatedEchoTest.testEcho()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "JettyClientContainerProvider.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.JettyClientContainerProvider.getInstance()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.JettyClientContainerProvider.willUseSingleton()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.JettyClientContainerProvider", "DEL": 0, "INS": 4, "UPD": 1, "MOV": 2, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.JettyClientContainerProvider.willUseServerContainer()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.JettyClientContainerProvider.getContainer()", "DEL": 11, "INS": 19, "UPD": 10, "MOV": 16, "TOT": 56}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.JettyClientContainerProvider.stop()", "DEL": 1, "INS": 0, "UPD": 2, "MOV": 3, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.JettyClientContainerProvider.getContextHandler()", "DEL": 0, "INS": 2, "UPD": 3, "MOV": 0, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.JettyClientContainerProvider.useServerContainer(boolean)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ConfiguratorTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.ConfiguratorTest.testEndpointHandshakeInfo()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "MisbehavingClassTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.misbehaving.MisbehavingClassTest.testAnnotatedRuntimeOnOpen()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.misbehaving.MisbehavingClassTest.testEndpointRuntimeOnOpen()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "caff2b932d29ace25e329ebcbeeaf9a72ebab725 tags/jetty-10.0.0.alpha1~660^2~18", "commitUser": "joakime", "authoredDateTime": "2017-06-07 14:16:16", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 1, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/AnnotatedEndpointConfigTest.java", "insertions": 1, "deletions": 0}, {"lines": 4, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/EndpointEchoTest.java", "insertions": 4, "deletions": 0}, {"lines": 84, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/DelayedStartClientOnServerTest.java", "insertions": 57, "deletions": 27}, {"lines": 7, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/DecoderReaderManySmallTest.java", "insertions": 7, "deletions": 0}, {"lines": 167, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/JettyClientContainerProvider.java", "insertions": 121, "deletions": 46}, {"lines": 9, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/EncoderTest.java", "insertions": 8, "deletions": 1}, {"lines": 1, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/ConfiguratorTest.java", "insertions": 1, "deletions": 0}, {"lines": 9, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/DecoderReaderTest.java", "insertions": 8, "deletions": 1}, {"lines": 74, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/DelayedStartClientTest.java", "insertions": 58, "deletions": 16}, {"lines": 1, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/AnnotatedEchoTest.java", "insertions": 1, "deletions": 0}, {"lines": 9, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/CookiesTest.java", "insertions": 2, "deletions": 7}, {"lines": 2, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/misbehaving/MisbehavingClassTest.java", "insertions": 2, "deletions": 0}, {"lines": 12, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/MessageReceivingTest.java", "insertions": 10, "deletions": 2}], "commitDateTime": "2017-06-07 14:16:16", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "738d728436c4ac442c36f9519716e51cd6017195", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "af13380dd2cf5b99ddfb9d97e155e5d6f3731725", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1605 - restoring default behavior of ContainerProvider.getWebSocketContainer()\n\n+ Allowing users to reconfigure JettyClientContainerProvider to restore\n  the Jetty 9.4.x behavior for singletons and ServerContainer behaviors\n", "commitParents": ["5b72d8a7333b50f333c2d48ac7854481b479db7b"], "commitHash": "0de3673132d6764e9a1ba4e7ec2d6dd42e673a04", "commitSpoonAstDiffStats": [{"spoonFilePath": "EndpointEchoTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.EndpointEchoTest.testAbstractEchoInstance()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.EndpointEchoTest.testBasicEchoClassref()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.EndpointEchoTest.testBasicEchoInstance()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.EndpointEchoTest.testAbstractEchoClassref()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "DelayedStartClientTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.DelayedStartClientTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.DelayedStartClientTest.getThreadNames()", "DEL": 2, "INS": 0, "UPD": 11, "MOV": 1, "TOT": 14}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.DelayedStartClientTest.testNoExtraHttpClientThreads()", "DEL": 3, "INS": 3, "UPD": 0, "MOV": 1, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.DelayedStartClientTest.getThreadNames(org.eclipse.jetty.util.component.ContainerLifeCycle[])", "DEL": 0, "INS": 5, "UPD": 0, "MOV": 0, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.DelayedStartClientTest.stopClientContainer()", "DEL": 1, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.DelayedStartClientTest.stopContainer()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.DelayedStartClientTest.findConfiguredThreadNames(java.util.Set,java.util.List,org.eclipse.jetty.util.component.ContainerLifeCycle)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "MessageReceivingTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.MessageReceivingTest.configureTest()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.MessageReceivingTest.stopClient()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "EncoderTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.EncoderTest.stopClient()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AnnotatedEndpointConfigTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.AnnotatedEndpointConfigTest.startEnv()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "DelayedStartClientOnServerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.DelayedStartClientOnServerTest.testHttpClientThreads_AfterServerConnectTo()", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.DelayedStartClientOnServerTest.testHttpClientThreads_AfterClientConfigure()", "DEL": 1, "INS": 2, "UPD": 1, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.DelayedStartClientOnServerTest.testHttpClientThreads_AfterClientConnectTo()", "DEL": 1, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.DelayedStartClientOnServerTest.testNoExtraHttpClientThreads()", "DEL": 2, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.DelayedStartClientOnServerTest.findConfiguredThreadNames(java.util.Set,java.util.List,org.eclipse.jetty.util.component.ContainerLifeCycle)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.DelayedStartClientOnServerTest.stopClientContainer()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.DelayedStartClientOnServerTest.getThreadNames()", "DEL": 2, "INS": 0, "UPD": 11, "MOV": 1, "TOT": 14}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.DelayedStartClientOnServerTest.getThreadNames(org.eclipse.jetty.util.component.ContainerLifeCycle[])", "DEL": 0, "INS": 5, "UPD": 0, "MOV": 0, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.DelayedStartClientOnServerTest.testHttpClientThreads_AfterServerConfigure()", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 3}]}, {"spoonFilePath": "CookiesTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.CookiesTest.testCookiesAreSentToServer()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.CookiesTest.testCookiesAreSentToClient()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.CookiesTest.resetClientContainer()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "DecoderReaderTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.DecoderReaderTest.stopClient()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "DecoderReaderManySmallTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.DecoderReaderManySmallTest.stopClient()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AnnotatedEchoTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.AnnotatedEchoTest.testEcho()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "JettyClientContainerProvider.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.JettyClientContainerProvider.getInstance()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.JettyClientContainerProvider.willUseSingleton()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.JettyClientContainerProvider", "DEL": 0, "INS": 4, "UPD": 1, "MOV": 2, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.JettyClientContainerProvider.willUseServerContainer()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.JettyClientContainerProvider.getContainer()", "DEL": 11, "INS": 19, "UPD": 10, "MOV": 16, "TOT": 56}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.JettyClientContainerProvider.stop()", "DEL": 1, "INS": 0, "UPD": 2, "MOV": 3, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.JettyClientContainerProvider.getContextHandler()", "DEL": 0, "INS": 2, "UPD": 3, "MOV": 0, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.JettyClientContainerProvider.useServerContainer(boolean)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ConfiguratorTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.ConfiguratorTest.testEndpointHandshakeInfo()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "MisbehavingClassTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.misbehaving.MisbehavingClassTest.testAnnotatedRuntimeOnOpen()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.misbehaving.MisbehavingClassTest.testEndpointRuntimeOnOpen()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "0de3673132d6764e9a1ba4e7ec2d6dd42e673a04 tags/jetty-9.4.7.RC0~174", "commitUser": "joakime", "authoredDateTime": "2017-06-07 14:16:16", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 1, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/AnnotatedEndpointConfigTest.java", "insertions": 1, "deletions": 0}, {"lines": 4, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/EndpointEchoTest.java", "insertions": 4, "deletions": 0}, {"lines": 84, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/DelayedStartClientOnServerTest.java", "insertions": 57, "deletions": 27}, {"lines": 7, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/DecoderReaderManySmallTest.java", "insertions": 7, "deletions": 0}, {"lines": 167, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/JettyClientContainerProvider.java", "insertions": 121, "deletions": 46}, {"lines": 9, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/EncoderTest.java", "insertions": 8, "deletions": 1}, {"lines": 1, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/ConfiguratorTest.java", "insertions": 1, "deletions": 0}, {"lines": 9, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/DecoderReaderTest.java", "insertions": 8, "deletions": 1}, {"lines": 74, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/DelayedStartClientTest.java", "insertions": 58, "deletions": 16}, {"lines": 1, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/AnnotatedEchoTest.java", "insertions": 1, "deletions": 0}, {"lines": 9, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/CookiesTest.java", "insertions": 2, "deletions": 7}, {"lines": 2, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/misbehaving/MisbehavingClassTest.java", "insertions": 2, "deletions": 0}, {"lines": 12, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/MessageReceivingTest.java", "insertions": 10, "deletions": 2}], "commitDateTime": "2017-08-08 08:49:57", "spoonStatsSkippedReason": ""}], "title": "ContainerProvider.getWebSocketContainer() behavior is not to spec", "spoonStatsSummary": {"spoonMethodsChanged": 9, "DEL": 12.0, "INS": 40.0, "UPD": 19.0, "MOV": 34.0, "TOT": 105.0, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 236.0, "insertions": 177.0, "gitFilesChange": 2, "deletions": 59.0}, "closed": "2017-06-12 16:24:27", "statsSkippedReason": "", "body": "Per spec, the default behavior is to always create a new WebSocketContainer on each call to the .getWebSocketContainer() method.\r\n\r\nThis might be a performance issue though.\r\nSee javaee/websocket-spec open issues\r\n\r\n* javaee/websocket-spec#184\r\n* javaee/websocket-spec#212\r\n* javaee/websocket-spec#230\r\n", "changesInPackagesGIT": ["jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356", "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common"], "changesInPackagesSPOON": ["org.eclipse.jetty.websocket.jsr356.JettyClientContainerProvider.getInstance()", "org.eclipse.jetty.websocket.jsr356.JettyClientContainerProvider.willUseSingleton()", "org.eclipse.jetty.websocket.jsr356.JettyClientContainerProvider", "org.eclipse.jetty.websocket.jsr356.JettyClientContainerProvider.willUseServerContainer()", "org.eclipse.jetty.websocket.jsr356.JettyClientContainerProvider.getContainer()", "org.eclipse.jetty.websocket.jsr356.JettyClientContainerProvider.stop()", "org.eclipse.jetty.websocket.common.scopes.SimpleContainerScope", "org.eclipse.jetty.websocket.jsr356.JettyClientContainerProvider.useServerContainer(boolean)", "org.eclipse.jetty.websocket.jsr356.JettyClientContainerProvider.getContextHandler()"], "ttf": 5.000277777777778, "numCommits": 2, "url": "https://github.com/eclipse/jetty.project/issues/1605"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 2, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["064c1bc39ae01dd6989f85585fd9e4ab357c50f9"], "commits": {"064c1bc39ae01dd6989f85585fd9e4ab357c50f9": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "274968731944cd485e8dd9aa3fffcba97a546472": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "5b72d8a7333b50f333c2d48ac7854481b479db7b": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2017-06-07 15:04:45", "commitsDetails": [{"commitMessage": "Issue #1604 - WebSocketContainer stop is now smarter\n", "commitParents": ["c1143fcc909da523d649836ed5a41c1b08929b9f"], "commitHash": "064c1bc39ae01dd6989f85585fd9e4ab357c50f9", "commitSpoonAstDiffStats": [{"spoonFilePath": "JettyClientContainerProvider.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.JettyClientContainerProvider.getContainer()", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 4, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.JettyClientContainerProvider.getContextHandler()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ClientContainer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.ClientContainer", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "064c1bc39ae01dd6989f85585fd9e4ab357c50f9 tags/jetty-10.0.0.alpha1~660^2~20", "commitUser": "joakime", "authoredDateTime": "2017-06-07 11:48:36", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 59, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/JettyClientContainerProvider.java", "insertions": 49, "deletions": 10}, {"lines": 2, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/ClientContainer.java", "insertions": 0, "deletions": 2}], "commitDateTime": "2017-06-07 11:48:36", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "274968731944cd485e8dd9aa3fffcba97a546472", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1604 - WebSocketContainer stop is now smarter\n", "commitParents": ["ab98caafbb4f8874dc2e2c84ab440983fa0d70e1"], "commitHash": "5b72d8a7333b50f333c2d48ac7854481b479db7b", "commitSpoonAstDiffStats": [{"spoonFilePath": "JettyClientContainerProvider.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.JettyClientContainerProvider.getContainer()", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 4, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.JettyClientContainerProvider.getContextHandler()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ClientContainer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.ClientContainer", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "5b72d8a7333b50f333c2d48ac7854481b479db7b tags/jetty-9.4.7.RC0~175", "commitUser": "joakime", "authoredDateTime": "2017-06-07 11:48:36", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 59, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/JettyClientContainerProvider.java", "insertions": 49, "deletions": 10}, {"lines": 2, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/ClientContainer.java", "insertions": 0, "deletions": 2}], "commitDateTime": "2017-08-08 08:49:56", "spoonStatsSkippedReason": ""}], "title": "WebSocketContainer stop needs improvement", "spoonStatsSummary": {"spoonMethodsChanged": 3, "DEL": 2.0, "INS": 3.0, "UPD": 0.0, "MOV": 4.0, "TOT": 9.0, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 61.0, "insertions": 49.0, "gitFilesChange": 2, "deletions": 12.0}, "closed": "2017-06-07 19:08:01", "statsSkippedReason": "", "body": "Currently all instances of WebSocketContainer register the Shutdown hook.\r\n\r\nThe Shutdown hook should only register for the static instances from the ContainerProvider.getWebSocketContainer()", "changesInPackagesGIT": ["jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356"], "changesInPackagesSPOON": ["org.eclipse.jetty.websocket.jsr356.ClientContainer", "org.eclipse.jetty.websocket.jsr356.JettyClientContainerProvider.getContextHandler()", "org.eclipse.jetty.websocket.jsr356.JettyClientContainerProvider.getContainer()"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1604"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 2, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["ab98caafbb4f8874dc2e2c84ab440983fa0d70e1"], "commits": {"fef2c410539267a41f406b2dbd5ca2c673d742af": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "ab98caafbb4f8874dc2e2c84ab440983fa0d70e1": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "c1143fcc909da523d649836ed5a41c1b08929b9f": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2017-06-07 14:26:28", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "fef2c410539267a41f406b2dbd5ca2c673d742af", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1603 - fixing NPE in WebSocketServerFactory init\n", "commitParents": ["6a3c40e935545479b230a8f5e66d9d7e75f6cb5e"], "commitHash": "ab98caafbb4f8874dc2e2c84ab440983fa0d70e1", "commitSpoonAstDiffStats": [{"spoonFilePath": "WebSocketServerFactoryTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketServerFactoryTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "WebSocketServerFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketServerFactory", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 6, "TOT": 8}]}], "nameRev": "ab98caafbb4f8874dc2e2c84ab440983fa0d70e1 tags/jetty-9.4.7.RC0~176", "commitUser": "joakime", "authoredDateTime": "2017-06-07 09:56:58", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 18, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/WebSocketServerFactory.java", "insertions": 8, "deletions": 10}, {"lines": 77, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/WebSocketServerFactoryTest.java", "insertions": 77, "deletions": 0}], "commitDateTime": "2017-08-08 08:49:55", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1603 - fixing NPE in WebSocketServerFactory init\n", "commitParents": ["0f98e607e806d9d42f418e9985ea70765320dbab"], "commitHash": "c1143fcc909da523d649836ed5a41c1b08929b9f", "commitSpoonAstDiffStats": [{"spoonFilePath": "WebSocketServerFactoryTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketServerFactoryTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "WebSocketServerFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketServerFactory", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 6, "TOT": 8}]}], "nameRev": "c1143fcc909da523d649836ed5a41c1b08929b9f tags/jetty-10.0.0.alpha1~660^2~21", "commitUser": "joakime", "authoredDateTime": "2017-06-07 09:56:58", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 18, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/WebSocketServerFactory.java", "insertions": 8, "deletions": 10}, {"lines": 77, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/WebSocketServerFactoryTest.java", "insertions": 77, "deletions": 0}], "commitDateTime": "2017-06-07 09:56:58", "spoonStatsSkippedReason": ""}], "title": "WebSocketServerFactory NPE in toString()", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 1.0, "INS": 1.0, "UPD": 0.0, "MOV": 6.0, "TOT": 8.0, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 18.0, "insertions": 8.0, "gitFilesChange": 1, "deletions": 10.0}, "closed": "2017-06-07 19:07:41", "statsSkippedReason": "", "body": "The WebSocketServerFactory.toString() can throw a NPE during startup.", "changesInPackagesGIT": ["jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.websocket.server.WebSocketServerFactory"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1603"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "janbartel", "filteredCommits": ["235cc149f3c77098741077df9cdce1e175d03452", "48123eefc61b96869450bba653f79f8504eaa156", "1440b2d1fa3c9b9b387629177f9afc4fd7f0870d", "0fc78e49241a2bdda90007d9afad06b1a8aae32c", "4ba0277c37bb9a5c248f7b91b16df64a38e36163", "1998720719019cbfb38dcd568e7c67cc9695676b", "f3c36f804a314598f6406b172e1de262bd60c40e", "ce84ca35fb0c53e0e4c122560e14ce1fb20d058c", "3eb8b1d59b86d8227a9d8ed20a6ece46673a1a29"], "commits": {"ce84ca35fb0c53e0e4c122560e14ce1fb20d058c": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "c9dd17bf9a220a3d3327a186feadf8c9174e4f27": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "4ba0277c37bb9a5c248f7b91b16df64a38e36163": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "1998720719019cbfb38dcd568e7c67cc9695676b": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "1440b2d1fa3c9b9b387629177f9afc4fd7f0870d": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "235cc149f3c77098741077df9cdce1e175d03452": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "0fc78e49241a2bdda90007d9afad06b1a8aae32c": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "f3c36f804a314598f6406b172e1de262bd60c40e": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "3eb8b1d59b86d8227a9d8ed20a6ece46673a1a29": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "48123eefc61b96869450bba653f79f8504eaa156": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2017-06-07 13:00:15", "commitsDetails": [{"commitMessage": "Issue #1602 - LifeCycle FAILED fixes\n\n+ AbstractLifeCycle.setFailed(Throwable) is now protected, so\n  that the odd usages from WebAppContext.doStart() can be supported\n+ The AbstractLifeCycle.doStart() now checks for state == FAILED\n", "commitParents": ["235cc149f3c77098741077df9cdce1e175d03452"], "commitHash": "ce84ca35fb0c53e0e4c122560e14ce1fb20d058c", "commitSpoonAstDiffStats": [{"spoonFilePath": "WebAppContext.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.WebAppContext.doStart()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "DeploymentErrorTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.test.DeploymentErrorTest.testContextHandlerCollection()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.test.DeploymentErrorTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.test.DeploymentErrorTest.setUpServer()", "DEL": 3, "INS": 3, "UPD": 0, "MOV": 3, "TOT": 9}]}, {"spoonFilePath": "AbstractLifeCycle.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.component.AbstractLifeCycle.start()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.component.AbstractLifeCycle.setFailed(java.lang.Throwable)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "ce84ca35fb0c53e0e4c122560e14ce1fb20d058c tags/jetty-9.4.9.v20180320~141^2~5", "commitUser": "joakime", "authoredDateTime": "2018-01-11 09:36:05", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 1, "filePath": "jetty-webapp/src/main/java/org/eclipse/jetty/webapp/WebAppContext.java", "insertions": 1, "deletions": 0}, {"lines": 31, "filePath": "tests/test-integration/src/test/java/org/eclipse/jetty/test/DeploymentErrorTest.java", "insertions": 25, "deletions": 6}, {"lines": 4, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/component/AbstractLifeCycle.java", "insertions": 2, "deletions": 2}], "commitDateTime": "2018-01-11 09:36:05", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1602 - Requested fixes to StandardStarter and AbstractLifeCycle\n", "commitParents": ["ce84ca35fb0c53e0e4c122560e14ce1fb20d058c"], "commitHash": "4ba0277c37bb9a5c248f7b91b16df64a38e36163", "commitSpoonAstDiffStats": [{"spoonFilePath": "WebAppContext.java", "spoonMethods": []}, {"spoonFilePath": "AbstractLifeCycle.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.component.AbstractLifeCycle.start()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "StandardStarter.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.deploy.bindings.StandardStarter.processBinding(org.eclipse.jetty.deploy.graph.Node,org.eclipse.jetty.deploy.App)", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 3, "TOT": 6}]}], "nameRev": "4ba0277c37bb9a5c248f7b91b16df64a38e36163 tags/jetty-9.4.9.v20180320~141^2~4", "commitUser": "joakime", "authoredDateTime": "2018-01-11 10:00:39", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 18, "filePath": "jetty-deploy/src/main/java/org/eclipse/jetty/deploy/bindings/StandardStarter.java", "insertions": 12, "deletions": 6}, {"lines": 4, "filePath": "jetty-webapp/src/main/java/org/eclipse/jetty/webapp/WebAppContext.java", "insertions": 2, "deletions": 2}, {"lines": 2, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/component/AbstractLifeCycle.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2018-01-11 10:00:39", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1602 - more tests\n", "commitParents": ["f3c36f804a314598f6406b172e1de262bd60c40e"], "commitHash": "1998720719019cbfb38dcd568e7c67cc9695676b", "commitSpoonAstDiffStats": [{"spoonFilePath": "DeploymentErrorTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.test.DeploymentErrorTest.assertHttpState(java.lang.String,int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.test.DeploymentErrorTest.testErrorDeploy_ThrowUnavailableTrue()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.test.DeploymentErrorTest.testErrorDeploy_ThrowUnavailableFalse()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "1998720719019cbfb38dcd568e7c67cc9695676b tags/jetty-9.4.9.v20180320~141^2~2", "commitUser": "joakime", "authoredDateTime": "2018-01-11 16:17:05", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 25, "filePath": "tests/test-integration/src/test/java/org/eclipse/jetty/test/DeploymentErrorTest.java", "insertions": 25, "deletions": 0}], "commitDateTime": "2018-01-11 16:17:05", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1602 - WebAppContext Deployment fail should be on Throwable, not Exception\n", "commitParents": ["3eb8b1d59b86d8227a9d8ed20a6ece46673a1a29"], "commitHash": "1440b2d1fa3c9b9b387629177f9afc4fd7f0870d", "commitSpoonAstDiffStats": [{"spoonFilePath": "DeploymentErrorInitializer.java", "spoonMethods": []}, {"spoonFilePath": "DeploymentErrorTest.java", "spoonMethods": []}, {"spoonFilePath": "WebAppContext.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.WebAppContext.doStart()", "DEL": 0, "INS": 0, "UPD": 5, "MOV": 0, "TOT": 5}]}, {"spoonFilePath": "EnvConfiguration.java", "spoonMethods": []}], "nameRev": "1440b2d1fa3c9b9b387629177f9afc4fd7f0870d tags/jetty-9.4.9.v20180320~141^2~7", "commitUser": "joakime", "authoredDateTime": "2018-01-09 11:58:57", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 1, "filePath": "jetty-plus/src/main/java/org/eclipse/jetty/plus/webapp/EnvConfiguration.java", "insertions": 0, "deletions": 1}, {"lines": 2, "filePath": "tests/test-integration/src/test/java/org/eclipse/jetty/test/DeploymentErrorInitializer.java", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "tests/test-integration/src/test/java/org/eclipse/jetty/test/DeploymentErrorTest.java", "insertions": 1, "deletions": 1}, {"lines": 10, "filePath": "jetty-webapp/src/main/java/org/eclipse/jetty/webapp/WebAppContext.java", "insertions": 5, "deletions": 5}], "commitDateTime": "2018-01-09 11:58:57", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1602 - Adding more TestCases around throwUnavailableOnStartupException\n\n+ Reverting minor import change to EnvConfiguration\n+ Adding /badapp-uaf (throw unavailable fail = true) context\n+ Adding tests for throwUnavailableOnStartupException (true & false)\n", "commitParents": ["1440b2d1fa3c9b9b387629177f9afc4fd7f0870d"], "commitHash": "235cc149f3c77098741077df9cdce1e175d03452", "commitSpoonAstDiffStats": [{"spoonFilePath": "DeploymentErrorTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.test.DeploymentErrorTest", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.test.DeploymentErrorTest.TrackedConfiguration", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.test.DeploymentErrorTest.testErrorDeploy_ThrowUnavailableTrue()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.test.DeploymentErrorTest.testErrorDeploy()", "DEL": 1, "INS": 0, "UPD": 8, "MOV": 15, "TOT": 24}, {"spoonMethodName": "org.eclipse.jetty.test.DeploymentErrorTest.findApp(java.lang.String,java.util.List)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.test.DeploymentErrorTest.testErrorDeploy_ThrowUnavailableFalse()", "DEL": 0, "INS": 5, "UPD": 0, "MOV": 0, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.test.DeploymentErrorTest.setUpServer()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "235cc149f3c77098741077df9cdce1e175d03452 tags/jetty-9.4.9.v20180320~141^2~6", "commitUser": "joakime", "authoredDateTime": "2018-01-10 12:02:20", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 13, "filePath": "tests/test-integration/src/test/resources/docroots/deployerror/badapp-unavailable-false.xml", "insertions": 13, "deletions": 0}, {"lines": 1, "filePath": "tests/test-integration/src/test/resources/docroots/deployerror/badapp.xml", "insertions": 1, "deletions": 0}, {"lines": 114, "filePath": "tests/test-integration/src/test/java/org/eclipse/jetty/test/DeploymentErrorTest.java", "insertions": 103, "deletions": 11}], "commitDateTime": "2018-01-10 12:02:20", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1602 - Applying requested change\n", "commitParents": ["48123eefc61b96869450bba653f79f8504eaa156"], "commitHash": "0fc78e49241a2bdda90007d9afad06b1a8aae32c", "commitSpoonAstDiffStats": [{"spoonFilePath": "DeploymentManager.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.deploy.DeploymentManager.requestAppGoal(org.eclipse.jetty.deploy.DeploymentManager$AppEntry,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "0fc78e49241a2bdda90007d9afad06b1a8aae32c tags/jetty-9.4.9.v20180320~141^2", "commitUser": "joakime", "authoredDateTime": "2018-01-31 14:11:49", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 3, "filePath": "jetty-deploy/src/main/java/org/eclipse/jetty/deploy/DeploymentManager.java", "insertions": 2, "deletions": 1}], "commitDateTime": "2018-01-31 14:11:49", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1602 - Reverting AbstractLifeCycle changes per review\n", "commitParents": ["4ba0277c37bb9a5c248f7b91b16df64a38e36163"], "commitHash": "f3c36f804a314598f6406b172e1de262bd60c40e", "commitSpoonAstDiffStats": [{"spoonFilePath": "WebAppContext.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.WebAppContext.doStart()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AbstractLifeCycle.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.component.AbstractLifeCycle.setFailed(java.lang.Throwable)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "f3c36f804a314598f6406b172e1de262bd60c40e tags/jetty-9.4.9.v20180320~141^2~3", "commitUser": "joakime", "authoredDateTime": "2018-01-11 16:16:26", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 3, "filePath": "jetty-webapp/src/main/java/org/eclipse/jetty/webapp/WebAppContext.java", "insertions": 1, "deletions": 2}, {"lines": 2, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/component/AbstractLifeCycle.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2018-01-11 16:16:26", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1602 - Better tests for differences in deploy\n\n+ Testing deploy modes: [Initial, Delayed]\n  \"Initial\" is a deploy where the webapps exist\n  in the monitored directory at startup.\n  \"Delayed\" is a deploy where the Server is already\n  started when a new webapp is added to the monitored\n  deployment directory.\n+ Webapp types: [Unavailable: True, False]\n  This is the WebAppContext.isThrowUnavailableOnStartupException\n  setting.\n+ New DeploymentManager Node[FAILED] to assign to webapps that\n  fail the deployment during the \"Delayed\" deployment scenario.\n  Useful as a binding for hooking into failed deployments.\n", "commitParents": ["1998720719019cbfb38dcd568e7c67cc9695676b"], "commitHash": "48123eefc61b96869450bba653f79f8504eaa156", "commitSpoonAstDiffStats": [], "nameRev": "48123eefc61b96869450bba653f79f8504eaa156 tags/jetty-9.4.9.v20180320~141^2~1", "commitUser": "joakime", "authoredDateTime": "2018-01-30 14:23:50", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "tests/test-integration/src/test/resources/docroots/deployerror/badapp-unavailable-false.xml", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-deploy/src/main/java/org/eclipse/jetty/deploy/bindings/StandardStarter.java", "insertions": 1, "deletions": 1}, {"lines": 313, "filePath": "tests/test-integration/src/test/java/org/eclipse/jetty/test/DeploymentErrorTest.java", "insertions": 232, "deletions": 81}, {"lines": 11, "filePath": "jetty-deploy/src/main/java/org/eclipse/jetty/deploy/DeploymentManager.java", "insertions": 11, "deletions": 0}, {"lines": 2, "filePath": "tests/test-integration/src/test/resources/docroots/deployerror/badapp.xml", "insertions": 1, "deletions": 1}, {"lines": 4, "filePath": "jetty-deploy/src/main/java/org/eclipse/jetty/deploy/AppLifeCycle.java", "insertions": 4, "deletions": 0}], "commitDateTime": "2018-01-30 14:23:50", "spoonStatsSkippedReason": "tooManyChanges"}, {"commitMessage": "Issue #1602 - Attempting to add testcase.\n\n * Attempt to replicate reproduction case reported by @janbartel\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["4c26ba79988efbcb5e0442a7ed8cb2e8531bfc32"], "commitHash": "3eb8b1d59b86d8227a9d8ed20a6ece46673a1a29", "commitSpoonAstDiffStats": [{"spoonFilePath": "DeploymentErrorTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.test.DeploymentErrorTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "DeploymentErrorInitializer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.test.DeploymentErrorInitializer", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "3eb8b1d59b86d8227a9d8ed20a6ece46673a1a29 tags/jetty-9.4.9.v20180320~141^2~8", "commitUser": "joakime", "authoredDateTime": "2018-01-08 11:58:55", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 1, "filePath": "tests/test-integration/src/test/resources/docroots/deployerror/badapp/WEB-INF/classes/META-INF/services/javax.servlet.ServletContainerInitializer", "insertions": 1, "deletions": 0}, {"lines": 12, "filePath": "tests/test-integration/src/test/resources/docroots/deployerror/badapp.xml", "insertions": 12, "deletions": 0}, {"lines": 120, "filePath": "tests/test-integration/src/test/java/org/eclipse/jetty/test/DeploymentErrorTest.java", "insertions": 120, "deletions": 0}, {"lines": 38, "filePath": "tests/test-integration/src/test/java/org/eclipse/jetty/test/DeploymentErrorInitializer.java", "insertions": 38, "deletions": 0}, {"lines": 7, "filePath": "tests/test-integration/src/test/resources/docroots/deployerror/badapp/WEB-INF/web.xml", "insertions": 7, "deletions": 0}], "commitDateTime": "2018-01-08 11:58:55", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #2110 from eclipse/issue-1602-deployer-error\n\nIssue #1602 - Deployment Error should fail fast", "commitParents": ["6bbd89e5dba20149e6ccf38eaf360740ec192b0c", "0fc78e49241a2bdda90007d9afad06b1a8aae32c"], "commitHash": "c9dd17bf9a220a3d3327a186feadf8c9174e4f27", "commitSpoonAstDiffStats": [], "nameRev": "c9dd17bf9a220a3d3327a186feadf8c9174e4f27 tags/jetty-9.4.9.v20180320~141", "commitUser": "joakime", "authoredDateTime": "2018-02-08 08:44:19", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 13, "filePath": "tests/test-integration/src/test/resources/docroots/deployerror/badapp-unavailable-false.xml", "insertions": 13, "deletions": 0}, {"lines": 18, "filePath": "jetty-deploy/src/main/java/org/eclipse/jetty/deploy/bindings/StandardStarter.java", "insertions": 12, "deletions": 6}, {"lines": 1, "filePath": "jetty-plus/src/main/java/org/eclipse/jetty/plus/webapp/EnvConfiguration.java", "insertions": 0, "deletions": 1}, {"lines": 12, "filePath": "jetty-deploy/src/main/java/org/eclipse/jetty/deploy/DeploymentManager.java", "insertions": 12, "deletions": 0}, {"lines": 1, "filePath": "tests/test-integration/src/test/resources/docroots/deployerror/badapp/WEB-INF/classes/META-INF/services/javax.servlet.ServletContainerInitializer", "insertions": 1, "deletions": 0}, {"lines": 407, "filePath": "tests/test-integration/src/test/java/org/eclipse/jetty/test/DeploymentErrorTest.java", "insertions": 407, "deletions": 0}, {"lines": 13, "filePath": "tests/test-integration/src/test/resources/docroots/deployerror/badapp.xml", "insertions": 13, "deletions": 0}, {"lines": 38, "filePath": "tests/test-integration/src/test/java/org/eclipse/jetty/test/DeploymentErrorInitializer.java", "insertions": 38, "deletions": 0}, {"lines": 4, "filePath": "jetty-deploy/src/main/java/org/eclipse/jetty/deploy/AppLifeCycle.java", "insertions": 4, "deletions": 0}, {"lines": 12, "filePath": "jetty-webapp/src/main/java/org/eclipse/jetty/webapp/WebAppContext.java", "insertions": 6, "deletions": 6}, {"lines": 7, "filePath": "tests/test-integration/src/test/resources/docroots/deployerror/badapp/WEB-INF/web.xml", "insertions": 7, "deletions": 0}], "commitDateTime": "2018-02-08 08:44:19", "spoonStatsSkippedReason": "tooManyChanges"}], "title": "WebAppContext is started twice, once by deployer, again by lifecycle", "spoonStatsSummary": {"spoonMethodsChanged": 6, "DEL": 3.0, "INS": 6.0, "UPD": 7.0, "MOV": 5.0, "TOT": 21.0, "spoonFilesChanged": 5}, "gitStatsSummary": {"lines": 65, "insertions": 43, "gitFilesChange": 6, "deletions": 22}, "closed": "2018-03-14 20:26:39", "statsSkippedReason": "", "body": "If the deployment of a webapp using EnvConfiguration fails, the following exception is thrown some time later after the initial exception,  after all other webapps have been started . It looks like the Deployer is trying again to start the same failed deployment, but because the previous failed deployment was never stopped the destroy() steps of the Configurations have not been called and thus the deployment is left still partially set up. It just so happens that the EnvConfiguration will notice the partial setup.\r\n\r\n@joakime does the Deployer indeed try to restart failed deployments?\r\n\r\n", "changesInPackagesGIT": ["jetty-webapp/src/main/java/org/eclipse/jetty/webapp", "jetty-plus/src/main/java/org/eclipse/jetty/plus/webapp", "jetty-util/src/main/java/org/eclipse/jetty/util/component", "jetty-deploy/src/main/java/org/eclipse/jetty/deploy/bindings", "jetty-deploy/src/main/java/org/eclipse/jetty/deploy"], "changesInPackagesSPOON": ["org.eclipse.jetty.util.component.AbstractLifeCycle.start()", "org.eclipse.jetty.deploy.DeploymentManager.requestAppGoal(org.eclipse.jetty.deploy.DeploymentManager$AppEntry,java.lang.String)", "org.eclipse.jetty.webapp.WebAppContext.doStart()", "org.eclipse.jetty.deploy.bindings.StandardStarter.processBinding(org.eclipse.jetty.deploy.graph.Node,org.eclipse.jetty.deploy.App)", "org.eclipse.jetty.util.component.AbstractLifeCycle.setFailed(java.lang.Throwable)", "org.eclipse.jetty.test.DeploymentErrorInitializer"], "ttf": 280.0002777777778, "numCommits": 6, "url": "https://github.com/eclipse/jetty.project/issues/1602"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 2, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["c9732c53496c6bdd4047227dd17a3a4ab8a28b22"], "commits": {"2d5fa4d7c30e82b8ef553fa854ef8bf42ef3b1da": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "c9732c53496c6bdd4047227dd17a3a4ab8a28b22": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "806dff64f39ea24151a650ecacf9652162b869ba": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2017-06-02 17:04:46", "commitsDetails": [{"commitMessage": "Issue #1590 - Revert Java 8 class usage back to Java 7 limits\n", "commitParents": ["6d450bdc7ff47c2891881f5a6f7ea22d0d852268"], "commitHash": "c9732c53496c6bdd4047227dd17a3a4ab8a28b22", "commitSpoonAstDiffStats": [{"spoonFilePath": "RolloverFileOutputStream.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream.RollTask.run()", "DEL": 0, "INS": 0, "UPD": 4, "MOV": 1, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream.toMidnight(java.util.Calendar)", "DEL": 0, "INS": 9, "UPD": 0, "MOV": 0, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream.removeOldFiles(java.util.Calendar)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream.setFile(java.time.ZonedDateTime)", "DEL": 4, "INS": 0, "UPD": 3, "MOV": 2, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream.toMidnight(java.time.ZonedDateTime)", "DEL": 1, "INS": 0, "UPD": 9, "MOV": 4, "TOT": 14}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream", "DEL": 2, "INS": 5, "UPD": 3, "MOV": 1, "TOT": 11}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream.scheduleNextRollover(java.time.ZonedDateTime)", "DEL": 0, "INS": 0, "UPD": 4, "MOV": 2, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream.removeOldFiles(java.time.ZonedDateTime)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 2, "TOT": 4}]}, {"spoonFilePath": "RolloverFileOutputStreamTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStreamTest.toDateTime(java.lang.String,java.time.ZoneId)", "DEL": 1, "INS": 0, "UPD": 8, "MOV": 3, "TOT": 12}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStreamTest.assertSequence(java.time.ZonedDateTime,java.lang.Object[][])", "DEL": 0, "INS": 0, "UPD": 5, "MOV": 3, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStreamTest.toDateTime(java.lang.String,java.util.TimeZone)", "DEL": 0, "INS": 6, "UPD": 0, "MOV": 0, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStreamTest.testMidnightRolloverCalc_PST_DST_Start()", "DEL": 0, "INS": 1, "UPD": 3, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStreamTest.toString(java.time.temporal.TemporalAccessor)", "DEL": 1, "INS": 0, "UPD": 2, "MOV": 1, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStreamTest.testMidnightRolloverCalc_PST_DST_End()", "DEL": 0, "INS": 1, "UPD": 3, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStreamTest.testFilehandling()", "DEL": 3, "INS": 0, "UPD": 31, "MOV": 13, "TOT": 47}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStreamTest.toZoneId(java.lang.String)", "DEL": 1, "INS": 0, "UPD": 2, "MOV": 1, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStreamTest.testMidnightRolloverCalc_Sydney_DST_End()", "DEL": 0, "INS": 1, "UPD": 3, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStreamTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStreamTest.toString(java.util.Calendar)", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStreamTest.testFileHandling()", "DEL": 0, "INS": 6, "UPD": 0, "MOV": 0, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStreamTest.testRollover()", "DEL": 0, "INS": 0, "UPD": 9, "MOV": 0, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStreamTest.testMidnightRolloverCalc_Sydney_DST_Start()", "DEL": 0, "INS": 1, "UPD": 4, "MOV": 0, "TOT": 5}]}], "nameRev": "c9732c53496c6bdd4047227dd17a3a4ab8a28b22 tags/jetty-9.2.22.v20170606~1", "commitUser": "joakime", "authoredDateTime": "2017-06-02 11:33:42", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 67, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/RolloverFileOutputStream.java", "insertions": 38, "deletions": 29}, {"lines": 141, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/RolloverFileOutputStreamTest.java", "insertions": 76, "deletions": 65}], "commitDateTime": "2017-06-02 11:33:42", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "2d5fa4d7c30e82b8ef553fa854ef8bf42ef3b1da", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1590 - Revert Java 8 class usage back to Java 7 limits\n", "commitParents": ["c8cd6629d98951271217437ab0d0177301e0613c"], "commitHash": "806dff64f39ea24151a650ecacf9652162b869ba", "commitSpoonAstDiffStats": [{"spoonFilePath": "RolloverFileOutputStream.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream.RollTask.run()", "DEL": 0, "INS": 0, "UPD": 4, "MOV": 1, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream.toMidnight(java.util.Calendar)", "DEL": 0, "INS": 9, "UPD": 0, "MOV": 0, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream.removeOldFiles(java.util.Calendar)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream.setFile(java.time.ZonedDateTime)", "DEL": 4, "INS": 0, "UPD": 3, "MOV": 2, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream.toMidnight(java.time.ZonedDateTime)", "DEL": 1, "INS": 0, "UPD": 9, "MOV": 4, "TOT": 14}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream", "DEL": 2, "INS": 5, "UPD": 3, "MOV": 1, "TOT": 11}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream.scheduleNextRollover(java.time.ZonedDateTime)", "DEL": 0, "INS": 0, "UPD": 4, "MOV": 2, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream.removeOldFiles(java.time.ZonedDateTime)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 2, "TOT": 4}]}, {"spoonFilePath": "RolloverFileOutputStreamTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStreamTest.toDateTime(java.lang.String,java.time.ZoneId)", "DEL": 1, "INS": 0, "UPD": 8, "MOV": 3, "TOT": 12}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStreamTest.assertSequence(java.time.ZonedDateTime,java.lang.Object[][])", "DEL": 0, "INS": 0, "UPD": 5, "MOV": 3, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStreamTest.toDateTime(java.lang.String,java.util.TimeZone)", "DEL": 0, "INS": 6, "UPD": 0, "MOV": 0, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStreamTest.testMidnightRolloverCalc_PST_DST_Start()", "DEL": 0, "INS": 1, "UPD": 3, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStreamTest.toString(java.time.temporal.TemporalAccessor)", "DEL": 1, "INS": 0, "UPD": 2, "MOV": 1, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStreamTest.testMidnightRolloverCalc_PST_DST_End()", "DEL": 0, "INS": 1, "UPD": 3, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStreamTest.testFilehandling()", "DEL": 3, "INS": 0, "UPD": 31, "MOV": 13, "TOT": 47}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStreamTest.toZoneId(java.lang.String)", "DEL": 1, "INS": 0, "UPD": 2, "MOV": 1, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStreamTest.testMidnightRolloverCalc_Sydney_DST_End()", "DEL": 0, "INS": 1, "UPD": 3, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStreamTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStreamTest.toString(java.util.Calendar)", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStreamTest.testFileHandling()", "DEL": 0, "INS": 6, "UPD": 0, "MOV": 0, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStreamTest.testRollover()", "DEL": 0, "INS": 0, "UPD": 9, "MOV": 0, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStreamTest.testMidnightRolloverCalc_Sydney_DST_Start()", "DEL": 0, "INS": 1, "UPD": 4, "MOV": 0, "TOT": 5}]}], "nameRev": "806dff64f39ea24151a650ecacf9652162b869ba tags/jetty-9.4.7.RC0~158", "commitUser": "joakime", "authoredDateTime": "2017-06-02 11:33:42", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 67, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/RolloverFileOutputStream.java", "insertions": 38, "deletions": 29}, {"lines": 141, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/RolloverFileOutputStreamTest.java", "insertions": 76, "deletions": 65}], "commitDateTime": "2017-08-08 09:10:22", "spoonStatsSkippedReason": ""}], "title": "Improve RolloverFileOutputStream functionality with multiple TimeZones", "spoonStatsSummary": {"spoonMethodsChanged": 8, "DEL": 7.0, "INS": 15.0, "UPD": 25.0, "MOV": 12.0, "TOT": 59.0, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 67.0, "insertions": 38.0, "gitFilesChange": 1, "deletions": 29.0}, "closed": "2017-06-02 19:38:22", "statsSkippedReason": "", "body": "As reported in jetty-dev ...\r\n\r\nhttps://dev.eclipse.org/mhonarc/lists/jetty-dev/msg03020.html\r\n\r\nThe RolloverFileOutputStream is not rolling to new files at midnight anymore.\r\n\r\nI have confirmed this bug with an overnight test of the distribution.", "changesInPackagesGIT": ["jetty-util/src/main/java/org/eclipse/jetty/util"], "changesInPackagesSPOON": ["org.eclipse.jetty.util.RolloverFileOutputStream.RollTask.run()", "org.eclipse.jetty.util.RolloverFileOutputStream.removeOldFiles(java.time.ZonedDateTime)", "org.eclipse.jetty.util.RolloverFileOutputStream", "org.eclipse.jetty.util.RolloverFileOutputStream.setFile(java.time.ZonedDateTime)", "org.eclipse.jetty.util.RolloverFileOutputStream.toMidnight(java.time.ZonedDateTime)", "org.eclipse.jetty.util.RolloverFileOutputStream.removeOldFiles(java.util.Calendar)", "org.eclipse.jetty.util.RolloverFileOutputStream.scheduleNextRollover(java.time.ZonedDateTime)", "org.eclipse.jetty.util.RolloverFileOutputStream.toMidnight(java.util.Calendar)"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1590"}, {"labels": ["Bug"], "closed": "2017-06-05 17:50:00", "body": "```\r\nRunning org.eclipse.jetty.fcgi.server.HttpClientTest.testGZIPContentEncoding()\r\n2017-05-30 17:43:42.597:INFO:oejs.Server:main: jetty-9.4.6-SNAPSHOT\r\n2017-05-30 17:43:42.658:INFO:oejs.AbstractConnector:main: Started ServerConnector@66ad7bf0{fcgi/1.0,[fcgi/1.0]}{0.0.0.0:34466}\r\n2017-05-30 17:43:42.668:INFO:oejs.Server:main: Started @3407ms\r\n2017-05-30 17:43:42.740:WARN:oeji.LeakTrackingByteBufferPool:: ByteBuffer java.nio.HeapByteBuffer[pos=0 lim=0 cap=2048] leaked at:\r\njava.lang.Throwable\r\n\tat org.eclipse.jetty.util.LeakDetector$LeakInfo.<init>(LeakDetector.java:183)\r\n\tat org.eclipse.jetty.util.LeakDetector$LeakInfo.<init>(LeakDetector.java:172)\r\n\tat org.eclipse.jetty.util.LeakDetector.acquired(LeakDetector.java:79)\r\n\tat org.eclipse.jetty.io.LeakTrackingByteBufferPool.acquire(LeakTrackingByteBufferPool.java:66)\r\n\tat org.eclipse.jetty.http.GZIPContentDecoder.acquire(GZIPContentDecoder.java:408)\r\n\tat org.eclipse.jetty.http.GZIPContentDecoder.decodeChunks(GZIPContentDecoder.java:174)\r\n\tat org.eclipse.jetty.http.GZIPContentDecoder.decode(GZIPContentDecoder.java:71)\r\n\tat org.eclipse.jetty.client.HttpReceiver.responseContent(HttpReceiver.java:336)\r\n\tat org.eclipse.jetty.fcgi.client.http.HttpReceiverOverFCGI.responseContent(HttpReceiverOverFCGI.java:57)\r\n\tat org.eclipse.jetty.fcgi.client.http.HttpChannelOverFCGI.content(HttpChannelOverFCGI.java:121)\r\n\tat org.eclipse.jetty.fcgi.client.http.HttpConnectionOverFCGI$ResponseListener.onContent(HttpConnectionOverFCGI.java:408)\r\n\tat org.eclipse.jetty.fcgi.parser.ResponseContentParser$ResponseParser.notifyContent(ResponseContentParser.java:277)\r\n\tat org.eclipse.jetty.fcgi.parser.ResponseContentParser$ResponseParser.parse(ResponseContentParser.java:131)\r\n\tat org.eclipse.jetty.fcgi.parser.ResponseContentParser.onContent(ResponseContentParser.java:74)\r\n\tat org.eclipse.jetty.fcgi.parser.StreamContentParser.parse(StreamContentParser.java:69)\r\n\tat org.eclipse.jetty.fcgi.parser.Parser.parse(Parser.java:82)\r\n\tat org.eclipse.jetty.fcgi.client.http.HttpConnectionOverFCGI.parse(HttpConnectionOverFCGI.java:180)\r\n\tat org.eclipse.jetty.fcgi.client.http.HttpConnectionOverFCGI.process(HttpConnectionOverFCGI.java:150)\r\n\tat org.eclipse.jetty.fcgi.client.http.HttpConnectionOverFCGI.onFillable(HttpConnectionOverFCGI.java:114)\r\n\tat org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:279)\r\n\tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:110)\r\n\tat org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:124)\r\n\tat org.eclipse.jetty.util.thread.Invocable.invokePreferred(Invocable.java:128)\r\n\tat org.eclipse.jetty.util.thread.Invocable$InvocableExecutor.invoke(Invocable.java:222)\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:294)\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.produce(EatWhatYouKill.java:126)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:672)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:590)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\n```", "commits": {}, "title": "Leak detected during client tests", "created": "2017-05-30 15:45:16", "user": "gregw", "url": "https://github.com/eclipse/jetty.project/issues/1580", "commitsDetails": [], "ttf": 6.000277777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "Zalathar", "filteredCommits": ["296050dfc40b86770c4de5f98002335472b7866e", "4731470188db5a1ed5748aa336c18003c5023efa", "50500ac99d139cecfa8f34e0094866d8efd76423"], "commits": {"296050dfc40b86770c4de5f98002335472b7866e": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "78280d0595433157f1120a25c3275b981b78b48e": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "50500ac99d139cecfa8f34e0094866d8efd76423": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "4731470188db5a1ed5748aa336c18003c5023efa": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2017-05-23 05:15:13", "commitsDetails": [{"commitMessage": "Issue #1568 - Fixing improper query encoding in WebSocket ServletUpgradeRequest\n", "commitParents": ["79883c739dfb821f13de910864cc053e8c18fa03"], "commitHash": "296050dfc40b86770c4de5f98002335472b7866e", "commitSpoonAstDiffStats": [{"spoonFilePath": "ServletUpgradeRequest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.servlet.ServletUpgradeRequest", "DEL": 2, "INS": 5, "UPD": 2, "MOV": 4, "TOT": 13}, {"spoonMethodName": "org.eclipse.jetty.websocket.servlet.ServletUpgradeRequest.getQueryString()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "RequestHeadersTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.RequestHeadersTest.testAccessRequestCookies()", "DEL": 0, "INS": 0, "UPD": 5, "MOV": 0, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.RequestHeadersTest.testRequestURI()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "BlockheadClient.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.test.BlockheadClient.getRequestPath()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "296050dfc40b86770c4de5f98002335472b7866e tags/jetty-9.4.6.v20170531~13", "commitUser": "joakime", "authoredDateTime": "2017-05-23 10:32:22", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/test/BlockheadClient.java", "insertions": 1, "deletions": 1}, {"lines": 44, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/RequestHeadersTest.java", "insertions": 34, "deletions": 10}, {"lines": 19, "filePath": "jetty-websocket/websocket-servlet/src/main/java/org/eclipse/jetty/websocket/servlet/ServletUpgradeRequest.java", "insertions": 16, "deletions": 3}], "commitDateTime": "2017-05-23 10:32:22", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1568 - fixing accidental NPE with no query\n", "commitParents": ["296050dfc40b86770c4de5f98002335472b7866e"], "commitHash": "4731470188db5a1ed5748aa336c18003c5023efa", "commitSpoonAstDiffStats": [{"spoonFilePath": "ServletUpgradeRequest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.servlet.ServletUpgradeRequest", "DEL": 3, "INS": 3, "UPD": 3, "MOV": 6, "TOT": 15}]}], "nameRev": "4731470188db5a1ed5748aa336c18003c5023efa tags/jetty-9.4.6.v20170531~12", "commitUser": "joakime", "authoredDateTime": "2017-05-23 11:59:39", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 21, "filePath": "jetty-websocket/websocket-servlet/src/main/java/org/eclipse/jetty/websocket/servlet/ServletUpgradeRequest.java", "insertions": 12, "deletions": 9}], "commitDateTime": "2017-05-23 11:59:39", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1568 handle query strings with encoded characters\n", "commitParents": ["78280d0595433157f1120a25c3275b981b78b48e"], "commitHash": "50500ac99d139cecfa8f34e0094866d8efd76423", "commitSpoonAstDiffStats": [{"spoonFilePath": "WSURI.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.api.util.WSURI.toWebsocket(java.net.URI)", "DEL": 5, "INS": 5, "UPD": 1, "MOV": 8, "TOT": 19}, {"spoonMethodName": "org.eclipse.jetty.websocket.api.util.WSURI.toHttp(java.net.URI)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}]}], "nameRev": "50500ac99d139cecfa8f34e0094866d8efd76423 tags/jetty-9.4.6.v20170531~10", "commitUser": "gregw", "authoredDateTime": "2017-05-24 23:03:22", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 22, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/util/WSURI.java", "insertions": 10, "deletions": 12}], "commitDateTime": "2017-05-24 23:03:22", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1568 handle query strings with encoded characters\n", "commitParents": ["4731470188db5a1ed5748aa336c18003c5023efa"], "commitHash": "78280d0595433157f1120a25c3275b981b78b48e", "commitSpoonAstDiffStats": [{"spoonFilePath": "WSURI.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.api.util.WSURI.toHttp(java.net.URI)", "DEL": 5, "INS": 5, "UPD": 1, "MOV": 8, "TOT": 19}]}, {"spoonFilePath": "ServletUpgradeRequest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.servlet.ServletUpgradeRequest", "DEL": 7, "INS": 3, "UPD": 3, "MOV": 4, "TOT": 17}]}, {"spoonFilePath": "RequestHeadersTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.RequestHeadersTest.testRequestURI()", "DEL": 0, "INS": 0, "UPD": 6, "MOV": 2, "TOT": 8}]}], "nameRev": "78280d0595433157f1120a25c3275b981b78b48e tags/jetty-9.4.6.v20170531~11", "commitUser": "gregw", "authoredDateTime": "2017-05-24 09:22:16", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 21, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/util/WSURI.java", "insertions": 9, "deletions": 12}, {"lines": 10, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/RequestHeadersTest.java", "insertions": 5, "deletions": 5}, {"lines": 26, "filePath": "jetty-websocket/websocket-servlet/src/main/java/org/eclipse/jetty/websocket/servlet/ServletUpgradeRequest.java", "insertions": 7, "deletions": 19}], "commitDateTime": "2017-05-24 09:22:16", "spoonStatsSkippedReason": ""}], "title": "ServletUpgradeRequest mangles query strings containing percent-escapes by re-escaping them", "spoonStatsSummary": {"spoonMethodsChanged": 5, "DEL": 12, "INS": 15, "UPD": 7, "MOV": 18, "TOT": 52, "spoonFilesChanged": 3}, "gitStatsSummary": {"lines": 62, "insertions": 38, "gitFilesChange": 2, "deletions": 24}, "closed": "2017-05-31 17:46:04", "statsSkippedReason": "", "body": "(version 9.4.5)\r\n\r\nWhen a ServletUpgradeRequest instance is created, it creates a request URI by passing each of its URL components into one of URI's multi-argument constructors.\r\n\r\nHowever, if the request's query string contains percent-escaped characters, then the URI constructor will double-escape those percent-escape sequences by replacing `%` with `%25`. This ends up confusing any server-side code that was expecting to receive the actual query string sent by the client.\r\n\r\nFor example, this request URL:\r\n\r\n```\r\nwss://example.net/service?param=BL%26T\r\n```\r\n\r\nends up being changed to:\r\n\r\n```\r\nwss://example.net/service?param=BL%2526T\r\n```\r\n\r\n### Expected behaviour\r\n\r\nServletUpgradeRequest should create its URI instance in a way that preserves the raw percent-escapes present in the received query string, instead of re-escaping them.", "changesInPackagesGIT": ["jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api", "jetty-websocket/websocket-servlet/src/main/java/org/eclipse/jetty/websocket/servlet"], "changesInPackagesSPOON": ["org.eclipse.jetty.websocket.api.util.WSURI.toWebsocket(java.net.URI)", "org.eclipse.jetty.websocket.api.util.WSURI.toHttp(java.net.URI)", "org.eclipse.jetty.websocket.servlet.ServletUpgradeRequest", "org.eclipse.jetty.websocket.servlet.ServletUpgradeRequest.getQueryString()", "org.eclipse.jetty.websocket.common.test.BlockheadClient.getRequestPath()"], "ttf": 8.000277777777777, "numCommits": 3, "url": "https://github.com/eclipse/jetty.project/issues/1568"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 2, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug", "Security"], "user": "fredfeng", "filteredCommits": ["f3751d70787fd8ab93932a51c60514c2eb37cb58", "201a11a899c707d71aed00f2de6ca23811f22a3d", "042f325f1cd6e7891d72c7e668f5947b5457dc02"], "commits": {"f3751d70787fd8ab93932a51c60514c2eb37cb58": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "201a11a899c707d71aed00f2de6ca23811f22a3d": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "042f325f1cd6e7891d72c7e668f5947b5457dc02": {"commitUser": "sbordet", "commitGHEventType": "closed"}, "2baa1abe4b1c380a30deacca1ed367466a1a62ea": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "a7e8b4220a410b85c843bffcd13f07d70f1b3fe8": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2017-05-16 07:33:48", "commitsDetails": [{"commitMessage": "Issue #1556 - A timing channel in Password.java.\n\nFixed comparison logic, doh.\n", "commitParents": ["042f325f1cd6e7891d72c7e668f5947b5457dc02"], "commitHash": "f3751d70787fd8ab93932a51c60514c2eb37cb58", "commitSpoonAstDiffStats": [{"spoonFilePath": "Credential.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.security.Credential.byteEquals(byte[],byte[])", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.security.Credential.stringEquals(java.lang.String,java.lang.String)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "f3751d70787fd8ab93932a51c60514c2eb37cb58 tags/jetty-9.3.20.v20170531~2^2~4", "commitUser": "sbordet", "authoredDateTime": "2017-05-16 16:34:04", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 8, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/security/Credential.java", "insertions": 4, "deletions": 4}], "commitDateTime": "2017-05-16 16:34:04", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1556 Timing attack\n", "commitParents": ["be970de6db6b521876c8d092766f4fce60593fb5"], "commitHash": "201a11a899c707d71aed00f2de6ca23811f22a3d", "commitSpoonAstDiffStats": [{"spoonFilePath": "Credential.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.security.Credential.byteEquals(byte[],byte[])", "DEL": 4, "INS": 2, "UPD": 11, "MOV": 0, "TOT": 17}, {"spoonMethodName": "org.eclipse.jetty.util.security.Credential.stringEquals(java.lang.String,java.lang.String)", "DEL": 4, "INS": 2, "UPD": 11, "MOV": 0, "TOT": 17}]}], "nameRev": "201a11a899c707d71aed00f2de6ca23811f22a3d tags/jetty-9.4.7.v20170914~34^2~4^2", "commitUser": "gregw", "authoredDateTime": "2017-08-18 11:38:55", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 52, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/security/Credential.java", "insertions": 24, "deletions": 28}], "commitDateTime": "2017-08-19 12:02:43", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1556 Timing attack\n", "commitParents": ["643c3175a012170f6cc6aed37bd9fd30951dca02"], "commitHash": "a7e8b4220a410b85c843bffcd13f07d70f1b3fe8", "commitSpoonAstDiffStats": [{"spoonFilePath": "CredentialTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.security.CredentialTest.testStringEquals()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.security.CredentialTest.testBytesEquals()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "Credential.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.security.Credential.byteEquals(byte[],byte[])", "DEL": 4, "INS": 2, "UPD": 11, "MOV": 0, "TOT": 17}, {"spoonMethodName": "org.eclipse.jetty.util.security.Credential.stringEquals(java.lang.String,java.lang.String)", "DEL": 4, "INS": 2, "UPD": 11, "MOV": 0, "TOT": 17}]}], "nameRev": "a7e8b4220a410b85c843bffcd13f07d70f1b3fe8 tags/jetty-9.4.7.v20170914~65", "commitUser": "gregw", "authoredDateTime": "2017-08-18 11:38:55", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 18, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/security/CredentialTest.java", "insertions": 18, "deletions": 0}, {"lines": 52, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/security/Credential.java", "insertions": 24, "deletions": 28}], "commitDateTime": "2017-08-18 11:38:55", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1556 - A timing channel in Password.java.\n\nImproved logic to avoid timing attacks:\nnow the password length cannot be inferred.\n", "commitParents": ["f3751d70787fd8ab93932a51c60514c2eb37cb58"], "commitHash": "2baa1abe4b1c380a30deacca1ed367466a1a62ea", "commitSpoonAstDiffStats": [{"spoonFilePath": "Credential.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.security.Credential.byteEquals(byte[],byte[])", "DEL": 1, "INS": 5, "UPD": 1, "MOV": 3, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.util.security.Credential.stringEquals(java.lang.String,java.lang.String)", "DEL": 1, "INS": 5, "UPD": 1, "MOV": 3, "TOT": 10}]}], "nameRev": "2baa1abe4b1c380a30deacca1ed367466a1a62ea tags/jetty-9.3.20.v20170531~2^2~3", "commitUser": "sbordet", "authoredDateTime": "2017-05-18 21:09:16", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 18, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/security/Credential.java", "insertions": 14, "deletions": 4}], "commitDateTime": "2017-05-18 21:09:16", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #1556 - A timing channel in Password.java.\n", "commitParents": ["b1b94d870e0c8ac8d6fb9356ea4c455ddb56c20c"], "commitHash": "042f325f1cd6e7891d72c7e668f5947b5457dc02", "commitSpoonAstDiffStats": [{"spoonFilePath": "Credential.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.security.Credential.Crypt.check(java.lang.Object)", "DEL": 2, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.util.security.Credential.MD5.check(java.lang.Object)", "DEL": 8, "INS": 2, "UPD": 0, "MOV": 9, "TOT": 19}, {"spoonMethodName": "org.eclipse.jetty.util.security.Credential.byteEquals(byte[],byte[])", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.security.Credential.stringEquals(java.lang.String,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "Password.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.security.Password.equals(java.lang.Object)", "DEL": 2, "INS": 1, "UPD": 2, "MOV": 4, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.util.security.Password.check(java.lang.Object)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 1, "TOT": 3}]}, {"spoonFilePath": "DigestAuthenticator.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.security.authentication.DigestAuthenticator.Digest.check(java.lang.Object)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 2, "TOT": 4}]}, {"spoonFilePath": "DigestAuthModule.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.security.jaspi.modules.DigestAuthModule.Digest.check(java.lang.Object)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 2, "TOT": 4}]}], "nameRev": "042f325f1cd6e7891d72c7e668f5947b5457dc02 tags/jetty-9.3.20.v20170531~2^2~5", "commitUser": "sbordet", "authoredDateTime": "2017-05-16 10:41:08", "commitGHEventType": "closed", "commitGitStats": [{"lines": 57, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/security/Credential.java", "insertions": 43, "deletions": 14}, {"lines": 25, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/security/Password.java", "insertions": 12, "deletions": 13}, {"lines": 2, "filePath": "jetty-security/src/main/java/org/eclipse/jetty/security/authentication/DigestAuthenticator.java", "insertions": 1, "deletions": 1}, {"lines": 3, "filePath": "jetty-jaspi/src/main/java/org/eclipse/jetty/security/jaspi/modules/DigestAuthModule.java", "insertions": 1, "deletions": 2}], "commitDateTime": "2017-05-16 10:41:08", "spoonStatsSkippedReason": ""}], "title": "Remove a timing channel in Password matching", "spoonStatsSummary": {"spoonMethodsChanged": 8, "DEL": 20, "INS": 11, "UPD": 31, "MOV": 19, "TOT": 81, "spoonFilesChanged": 4}, "gitStatsSummary": {"lines": 147, "insertions": 85, "gitFilesChange": 4, "deletions": 62}, "closed": "2017-08-20 07:01:21", "statsSkippedReason": "", "body": "Hi, \r\n\r\nI found a timing channel in Password.java:\r\nhttps://github.com/eclipse/jetty.project/blob/jetty-9.4.x/jetty-util/src/main/java/org/eclipse/jetty/util/security/Password.java#L105\r\n\r\nBy using Arrays.equals, it actually violates the \"constant-time-implementation\" discipline.\r\n\r\nFor more information about timing attack:\r\nhttps://codahale.com/a-lesson-in-timing-attacks/", "changesInPackagesGIT": ["jetty-jaspi/src/main/java/org/eclipse/jetty/security/jaspi/modules", "jetty-util/src/main/java/org/eclipse/jetty/util/security", "jetty-security/src/main/java/org/eclipse/jetty/security/authentication"], "changesInPackagesSPOON": ["org.eclipse.jetty.security.jaspi.modules.DigestAuthModule.Digest.check(java.lang.Object)", "org.eclipse.jetty.security.authentication.DigestAuthenticator.Digest.check(java.lang.Object)", "org.eclipse.jetty.util.security.Password.equals(java.lang.Object)", "org.eclipse.jetty.util.security.Credential.Crypt.check(java.lang.Object)", "org.eclipse.jetty.util.security.Credential.MD5.check(java.lang.Object)", "org.eclipse.jetty.util.security.Credential.byteEquals(byte[],byte[])", "org.eclipse.jetty.util.security.Credential.stringEquals(java.lang.String,java.lang.String)", "org.eclipse.jetty.util.security.Password.check(java.lang.Object)"], "ttf": 95.00027777777778, "numCommits": 3, "url": "https://github.com/eclipse/jetty.project/issues/1556"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 2}, "labels": ["Bug"], "user": "TheJoeIaut", "filteredCommits": [], "commits": {"882deb00b413365aace9cd7bc5eb9c3263b2b0bc": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "ed51c4a9e68b2c24f9d7738cf955eec07a6c2a1e": {"commitUser": "sbordet", "commitGHEventType": "closed"}}, "created": "2017-05-15 18:14:21", "commitsDetails": [{"commitMessage": "Merge pull request #2426 from lachlan-roberts/jetty-9.4.x-1555-AuthenticationProtocolHandler\n\nIssue #1555 WWW-Authenticate realm header ordering", "commitParents": ["516f6d21c52d37ea826f7ad67170c58e317a0a2b", "497b87eb2ef0b21bdbb0414d22281b122117b8f6"], "commitHash": "882deb00b413365aace9cd7bc5eb9c3263b2b0bc", "commitSpoonAstDiffStats": [{"spoonFilePath": "AuthenticationProtocolHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.AuthenticationProtocolHandler.AuthenticationListener.parseAuthenticateHeader(org.eclipse.jetty.client.api.Response,org.eclipse.jetty.http.HttpHeader)", "DEL": 1, "INS": 2, "UPD": 2, "MOV": 7, "TOT": 12}, {"spoonMethodName": "org.eclipse.jetty.client.AuthenticationProtocolHandler", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "882deb00b413365aace9cd7bc5eb9c3263b2b0bc tags/jetty-9.4.10.RC1~39", "commitUser": "sbordet", "authoredDateTime": "2018-04-17 10:26:53", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 14, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/AuthenticationProtocolHandler.java", "insertions": 11, "deletions": 3}], "commitDateTime": "2018-04-17 10:26:53", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #2449 from lachlan-roberts/jetty-9.4.x-1555-wwwAuthenticate-Parsing\n\nFixes #1555 AuthenticationProtocolHandler unable to parse Digest WWW Header.", "commitParents": ["0ea704a29a5b0a7845a21be50a72611da4ae5385", "04ae33c4ac9821b49e071b4f25f843e56a2cb748"], "commitHash": "ed51c4a9e68b2c24f9d7738cf955eec07a6c2a1e", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpClientAuthenticationTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpClientAuthenticationTest.testTestHeaderInfoParsingUnusualCases()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.HttpClientAuthenticationTest.test_Authentication_ThrowsException().9.authenticate(org.eclipse.jetty.client.api.Request,org.eclipse.jetty.client.api.ContentResponse,org.eclipse.jetty.client.HeaderInfo,org.eclipse.jetty.util.Attributes)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.HttpClientAuthenticationTest.testTestHeaderInfoParsing()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "DigestAuthentication.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.util.DigestAuthentication.authenticate(org.eclipse.jetty.client.api.Request,org.eclipse.jetty.client.api.ContentResponse,org.eclipse.jetty.client.util.HeaderInfo,org.eclipse.jetty.util.Attributes)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.client.util.DigestAuthentication.splitParams(java.lang.String)", "DEL": 6, "INS": 0, "UPD": 6, "MOV": 6, "TOT": 18}, {"spoonMethodName": "org.eclipse.jetty.client.util.DigestAuthentication", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.util.DigestAuthentication.parseParameters(java.lang.String)", "DEL": 1, "INS": 0, "UPD": 3, "MOV": 3, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.client.util.DigestAuthentication.matches(java.lang.String,java.net.URI,java.lang.String)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "AuthenticationProtocolHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.AuthenticationProtocolHandler.getHeaderInfo(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.AuthenticationProtocolHandler.parseParameters(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.AuthenticationProtocolHandler.AuthenticationListener.parseAuthenticateHeader(org.eclipse.jetty.client.api.Response,org.eclipse.jetty.http.HttpHeader)", "DEL": 11, "INS": 3, "UPD": 2, "MOV": 6, "TOT": 22}, {"spoonMethodName": "org.eclipse.jetty.client.AuthenticationProtocolHandler", "DEL": 1, "INS": 3, "UPD": 2, "MOV": 1, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.client.AuthenticationProtocolHandler.newHeaderInfo(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "Authentication.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.api.HeaderInfo.getRealm()", "DEL": 1, "INS": 1, "UPD": 1, "MOV": 1, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.client.api.HeaderInfo.getBase64()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.api.HeaderInfo.getParameter(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.api.HeaderInfo", "DEL": 3, "INS": 0, "UPD": 2, "MOV": 3, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.client.api.HeaderInfo.getParameters()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "ed51c4a9e68b2c24f9d7738cf955eec07a6c2a1e tags/jetty-9.4.10.RC1~7", "commitUser": "sbordet", "authoredDateTime": "2018-04-26 00:02:54", "commitGHEventType": "closed", "commitGitStats": [{"lines": 37, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/api/Authentication.java", "insertions": 27, "deletions": 10}, {"lines": 119, "filePath": "jetty-client/src/test/java/org/eclipse/jetty/client/HttpClientAuthenticationTest.java", "insertions": 119, "deletions": 0}, {"lines": 72, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/util/DigestAuthentication.java", "insertions": 13, "deletions": 59}, {"lines": 110, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/AuthenticationProtocolHandler.java", "insertions": 92, "deletions": 18}], "commitDateTime": "2018-04-26 00:02:54", "spoonStatsSkippedReason": ""}], "title": "AuthenticationProtocolHandler unable to parse Digest WWW Header", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0, "insertions": 0, "gitFilesChange": 0, "deletions": 0}, "closed": "2018-04-25 22:02:58", "statsSkippedReason": "", "body": "Hey,\r\n\r\nI am having massive problems trying to authenticate against a digest auth endpoint.\r\n\r\nFor testing purposes i use http://httpbin.org/digest-auth/auth/user/passwd/MD5\r\n\r\nThat returns a WWW Header of:\r\n`Digest algorithm=MD5, qop=\"auth\", opaque=\"c0c3e9b6dfa9fcbcefe9a64e8a5d1c0e\", nonce=\"e3bcda70806caad3ebdf4e8078cbcf6b\", realm=\"me@kennethreitz.com\"`\r\n\r\nBut this results in the exception:\r\n\r\n`org.eclipse.jetty.client.HttpResponseException: HTTP protocol violation: Authentication challenge without WWW-Authenticate header`\r\n\r\nThe problem IMO is, that the regex parsing the WWW header in AuthenticationProtocolHandler won't match that header.\r\n\r\nWhat can i do and are there any known workarounds?\r\n\r\nFor completness here is my code:\r\n\r\n        HttpClient httpClient = new HttpClient();\r\n    \r\n     \thttpClient.start();\r\n    \r\n    \tString realm = \"me@kennethreitz.com\";\r\n    \tString user = \"user\";\r\n    \tString pass = \"passwd\";\r\n    \tURI uri =new URI(\"http://httpbin.org/digest-auth/auth/user/passwd/MD5\");\r\n    \tAuthenticationStore a = httpClient.getAuthenticationStore();\r\n    \ta.addAuthentication(\r\n    \t    new DigestAuthentication(uri, realm, user, pass));\r\n\r\n  \r\n    \t\r\n    \tContentResponse response = httpClient\r\n    \t        .newRequest(uri)\r\n    \t        .send();\r\n    \t        //.get(5, TimeUnit.SECONDS);\r\n    \t\r\n    \tSystem.out.println(response);\r\n\r\n\r\n\r\n\r\n\r\n", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 345.0002777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/1555"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["ca4e72ca5d9b9fdc03aa39e53ec3eca11f2aae86"], "commits": {"ca4e72ca5d9b9fdc03aa39e53ec3eca11f2aae86": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2017-05-15 17:12:11", "commitsDetails": [{"commitMessage": "Issue #1553 - Guard against X509.isCertSign AIOOBE\n", "commitParents": ["da5a783e8628e6affdc14a37e4b03101fd26656f"], "commitHash": "ca4e72ca5d9b9fdc03aa39e53ec3eca11f2aae86", "commitSpoonAstDiffStats": [{"spoonFilePath": "X509Test.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.ssl.X509Test", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "X509CertificateAdapter.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.ssl.X509CertificateAdapter", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "X509.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.ssl.X509.isCertSign(java.security.cert.X509Certificate)", "DEL": 1, "INS": 2, "UPD": 1, "MOV": 2, "TOT": 6}]}], "nameRev": "ca4e72ca5d9b9fdc03aa39e53ec3eca11f2aae86 tags/jetty-9.4.6.v20170531~31", "commitUser": "joakime", "authoredDateTime": "2017-05-15 10:23:22", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 126, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/ssl/X509Test.java", "insertions": 126, "deletions": 0}, {"lines": 8, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/ssl/X509.java", "insertions": 6, "deletions": 2}, {"lines": 192, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/ssl/X509CertificateAdapter.java", "insertions": 192, "deletions": 0}], "commitDateTime": "2017-05-15 10:23:22", "spoonStatsSkippedReason": ""}], "title": "X509.isCertSign() can throw ArrayIndexOutOfBoundsException on non-standard implementations", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 1, "INS": 3, "UPD": 1, "MOV": 2, "TOT": 7, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 8, "insertions": 6, "gitFilesChange": 1, "deletions": 2}, "closed": "2017-05-15 17:24:32", "statsSkippedReason": "", "body": "Some alternate implementations of X509Certificate.getKeyUsage() can produce invalid support arrays that will trigger an ArrayIndexOutOfBoundsException ", "changesInPackagesGIT": ["jetty-util/src/main/java/org/eclipse/jetty/util/ssl"], "changesInPackagesSPOON": ["org.eclipse.jetty.util.ssl.X509.isCertSign(java.security.cert.X509Certificate)", "org.eclipse.jetty.util.ssl.X509CertificateAdapter"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1553"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug", "Enhancement"], "user": "WalkerWatch", "filteredCommits": ["1fb8b2e4ad70202a14717e2faff2f4c2c13f51f4"], "commits": {"1fb8b2e4ad70202a14717e2faff2f4c2c13f51f4": {"commitUser": "WalkerWatch", "commitGHEventType": "closed"}}, "created": "2017-05-12 20:45:42", "commitsDetails": [{"commitMessage": "Updated documentation for Jetty Runner. Resolves #1550\n", "commitParents": ["440ebcb51396e4ef262843f9bb21e5fbd15ed7f6"], "commitHash": "1fb8b2e4ad70202a14717e2faff2f4c2c13f51f4", "commitSpoonAstDiffStats": [{"spoonFilePath": "Runner.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.runner.Runner.usage(java.lang.String)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}], "nameRev": "1fb8b2e4ad70202a14717e2faff2f4c2c13f51f4 tags/jetty-9.4.8.v20171121~19", "commitUser": "WalkerWatch", "authoredDateTime": "2017-11-09 13:01:24", "commitGHEventType": "closed", "commitGitStats": [{"lines": 4, "filePath": "jetty-runner/src/main/java/org/eclipse/jetty/runner/Runner.java", "insertions": 2, "deletions": 2}, {"lines": 9, "filePath": "jetty-documentation/src/main/asciidoc/administration/runner/jetty-runner.adoc", "insertions": 4, "deletions": 5}], "commitDateTime": "2017-11-09 13:01:24", "spoonStatsSkippedReason": ""}], "title": "Resolve inconsistent Shutdown configuration with Jetty Runner", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 13, "insertions": 6, "gitFilesChange": 2, "deletions": 7}, "closed": "2017-11-09 18:01:32", "statsSkippedReason": "", "body": "While preparing documentation for #1549 I noticed that the shutdown methodology for the Jetty distribution and jetty-runner conflict. That is, the way by which you define the stop port and stop key is different for both, which is a bit confusing. An example:\r\n\r\nStarting with an instance of Jetty-runner, I start up my server and define `--stop-key` and `--stop-port`:\r\n\r\n`> java -jar jetty-runner-9.4.5.v20170502.jar my.jar --stop-key dog --stop-port 8181`\r\n\r\nNow, if I want to stop it I need to navigate to a distribution and stop it from there, except that `--stop-key` and `--stop-port` are not valid for `start.jar` (though [the documentation states](https://www.eclipse.org/jetty/documentation/current/runner.html#jetty-runner) otherwise). `start.jar` does not parse spaces (or so it seems) so instead I have to do the following:\r\n\r\n`> java -jar start.jar -DSTOP.PORT=8181 -DSTOP.KEY=dog --stop`\r\n\r\nThe issue here then is two-fold. The documentation is currently incorrect (though maybe was correct at some point) in it's instructions for how to stop runner, at least using the distribution. Secondly, the method by which stop port and stop key is defined is divergent between runner and the distribution. Runner is not meant for production, obviously, but the two should have a common ground.\r\n\r\nAfter talking this over with @joakime, I think the best solution is to make `--stop-key=` and `stop-port=` valid in both jetty-runner and `start.jar` (the addition of the = sign is a bit cleaner). ", "changesInPackagesGIT": ["jetty-runner/src/main/java/org/eclipse/jetty/runner", "jetty-documentation/src/main/asciidoc/administration/runner/jetty-runner.adoc"], "changesInPackagesSPOON": ["org.eclipse.jetty.runner.Runner.usage(java.lang.String)"], "ttf": 180.00027777777777, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1550"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "gthelleloid", "filteredCommits": ["4ab08c0e80803e31b9b538d648cca80e52d3507b"], "commits": {"4ab08c0e80803e31b9b538d648cca80e52d3507b": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2017-05-10 03:02:55", "commitsDetails": [{"commitMessage": "Issue #1539 decode path in jar:file\n", "commitParents": ["9f5909b98b7c3b2ee0d60609eeeec3e92c86029c"], "commitHash": "4ab08c0e80803e31b9b538d648cca80e52d3507b", "commitSpoonAstDiffStats": [{"spoonFilePath": "JarFileResource.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.JarFileResource.newConnection()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "JarResourceTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.JarResourceTest.testEncodedFileName()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "4ab08c0e80803e31b9b538d648cca80e52d3507b tags/jetty-9.4.6.v20170531~48", "commitUser": "gregw", "authoredDateTime": "2017-05-10 14:23:52", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 0, "filePath": "jetty-util/src/test/resources/TestData/test.zip", "insertions": 0, "deletions": 0}, {"lines": 8, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/resource/JarResourceTest.java", "insertions": 8, "deletions": 0}, {"lines": 3, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/resource/JarFileResource.java", "insertions": 2, "deletions": 1}], "commitDateTime": "2017-05-10 14:24:10", "spoonStatsSkippedReason": ""}], "title": "JarFileResource mishandles paths with spaces", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 3, "insertions": 2, "gitFilesChange": 1, "deletions": 1}, "closed": "2017-05-11 09:49:41", "statsSkippedReason": "", "body": "Jetty 9.4.0.v20161208 will fail to serve any resource with a space in its name that is located in a jar file (more generally, any resource with a character in its name encoded by URIUtil.encodePath(String)). The problem arises in three steps:\r\n\r\n1. JarFileResource.addPath(String) (implemented in URLResource) encodes the path using URIUtils.encodePath(String). This causes a JarFileResource to be created with a (jar) url string in which the path is encoded.\r\n2. JarFileResource.newConnection() extracts the encoded path from the jar url string and assigns it to the _path field.\r\n3. JarFileResource.exists() uses the value of _path as the argument to JarFile.getJarEntry(String). This fails to find the resource because JarFile.getJarEntry(String) requires the unencoded path.\r\n\r\nI have attached a zip file with three files:\r\n\r\n1. test.jar, which contains two files named \"file1\" and \"file 2\" (note the space in the filename).\r\n2. JarFileWithSpaceTest.java, which shows that a Jetty server serving test.jar does not serve \"file 2\" successfully.\r\n3. JarFileWithSpaceTest2.java, which shows more directly that JarFileResource says that \"file 2\" does not exist even though it does.\r\n\r\nThe Java files were both compiled and run with a classpath including javax.servlet-api-3.1.0.jar, jetty-http-9.4.0.v20161208.jar, jetty-io-9.4.0.v20161208.jar, jetty-server-9.4.0.v20161208.jar, and jetty-util-9.4.0.v20161208.jar. (I apologize if a Maven project would have been preferable.)\r\n\r\nIt appears to me that the solution may be as simple as changing the path assignment line in JarFileResource.newConnection() from \r\n\r\n`_path=_urlString.substring(sep+2);`\r\n\r\nto\r\n\r\n`_path=URIUtil.decodePath(_urlString.substring(sep+2));`\r\n\r\nbut perhaps I am missing something.\r\n\r\nDue to the pervasive use of static Resource.newResource() methods to create JarResource and JarFileResource instances, the best workaround I have is to create a \"fixed\" version of JarFileResource that correctly decodes the path, create a subclass of JarResource that returns instances of the \"fixed\" JarFileResource subclass from addPath(String), and always explicitly instantiate JarResources in my code instead of letting Jetty classes do it (e.g., as done in the ResourceCollection(String[]) constructor).\r\n\r\n[test.zip](https://github.com/eclipse/jetty.project/files/988547/test.zip)\r\n", "changesInPackagesGIT": ["jetty-util/src/main/java/org/eclipse/jetty/util/resource"], "changesInPackagesSPOON": ["org.eclipse.jetty.util.resource.JarFileResource.newConnection()"], "ttf": 1.0002777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1539"}, {"labels": ["Bug"], "closed": "2017-07-19 17:22:05", "body": "Hi ,\r\n\r\nI am using Jetty 9.2.4 and on Network failures I have Observed couple of issues\r\n\r\n1. onClose/OnError is not triggered.\r\n2. Even setting the idleTimeout does not work as expected. It should basically timeout if there is no interaction from client side, but I don't see any timeout.\r\n3. After this the outgoing queue of socket for that client never de-queues resulting in out of memory exception.\r\n4. The server does not serve any new WebSocket connection, handshake timeout.", "commits": {}, "title": "WebSocket : Network failure not detected", "created": "2017-05-06 00:11:29", "user": "iamjamalkhan", "url": "https://github.com/eclipse/jetty.project/issues/1537", "commitsDetails": [], "ttf": 74.00027777777778}, {"labels": ["Bug"], "closed": "2017-05-03 18:21:33", "body": "```\r\n[ERROR] Tests run: 12, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 3.864 s <<< FAILURE! - in org.eclipse.jetty.servlet.AsyncServletIOTest\r\n[ERROR] testCompleteWhilePending(org.eclipse.jetty.servlet.AsyncServletIOTest)  Time elapsed: 0.362 s  <<< FAILURE!\r\njava.lang.AssertionError: \r\n\r\nExpected: (a string containing \"X\" or is \"\")\r\n     but: was \"10\"\r\n\tat org.eclipse.jetty.servlet.AsyncServletIOTest.testCompleteWhilePending(AsyncServletIOTest.java:685)\r\n\r\n[INFO] Running org.eclipse.jetty.servlet.DispatcherForwardTest\r\n```", "commits": {}, "title": "Intermittent test failure: AsyncServletIOTest", "created": "2017-05-03 18:20:57", "user": "gregw", "url": "https://github.com/eclipse/jetty.project/issues/1531", "commitsDetails": [], "ttf": 0.0002777777777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 2}, "labels": ["Bug"], "user": "bclozel", "filteredCommits": ["7f497e8720f07c145088f497fd60bb413aa80cab", "5066dd7d1371ec2577f5e4a3e34f94732008b592"], "commits": {"7f497e8720f07c145088f497fd60bb413aa80cab": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "30f3ece681949ac66abe9de5c39f978e844dc637": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "5066dd7d1371ec2577f5e4a3e34f94732008b592": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "237d925dd06656a94b9559fa51caefeb268e18c4": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2017-05-03 14:20:40", "commitsDetails": [{"commitMessage": "Issue #1527 - jetty-bom, breaking the build again\n", "commitParents": ["9c3e5c215029924969c9a9167f65ebf979a03d21"], "commitHash": "7f497e8720f07c145088f497fd60bb413aa80cab", "commitSpoonAstDiffStats": [], "nameRev": "7f497e8720f07c145088f497fd60bb413aa80cab tags/jetty-9.3.20.v20170531~5", "commitUser": "joakime", "authoredDateTime": "2017-05-18 15:48:01", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 112, "filePath": "jetty-bom/pom.xml", "insertions": 112, "deletions": 0}], "commitDateTime": "2017-05-18 15:48:01", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #1540 from olamy/bugfix/1527_jetty-9.3.x\n\nfix for #1527 9.3.x branch", "commitParents": ["9427aa95e8d23f90e16b420c54a46f18b0be1ebf", "6d92c4c93129c6dc9d58809074fa7fd520f55dfe"], "commitHash": "30f3ece681949ac66abe9de5c39f978e844dc637", "commitSpoonAstDiffStats": [], "nameRev": "30f3ece681949ac66abe9de5c39f978e844dc637 tags/jetty-9.3.20.v20170531~7", "commitUser": "joakime", "authoredDateTime": "2017-05-18 14:00:02", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 89, "filePath": "jetty-bom/pom.xml", "insertions": 45, "deletions": 44}], "commitDateTime": "2017-05-18 14:00:02", "spoonStatsSkippedReason": ""}, {"commitMessage": "update BOM to use ${project.version}\n", "commitParents": ["caff2b932d29ace25e329ebcbeeaf9a72ebab725"], "commitHash": "5066dd7d1371ec2577f5e4a3e34f94732008b592", "commitSpoonAstDiffStats": [], "nameRev": "5066dd7d1371ec2577f5e4a3e34f94732008b592 tags/jetty-10.0.0.alpha1~660^2~17", "commitUser": "joakime", "authoredDateTime": "2017-06-08 08:55:10", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 124, "filePath": "jetty-bom/pom.xml", "insertions": 62, "deletions": 62}], "commitDateTime": "2017-06-08 08:55:10", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #1541 from olamy/bugfix/1527_jetty-9.4.x\n\nfix for #1527 9.4.x branch", "commitParents": ["c09a78adae4998ddb64eba2b68152b7cc320d26f", "59a70a3cf5889dcb73673babbf96e1ecd46a8776"], "commitHash": "237d925dd06656a94b9559fa51caefeb268e18c4", "commitSpoonAstDiffStats": [], "nameRev": "237d925dd06656a94b9559fa51caefeb268e18c4 tags/jetty-9.4.6.v20170531~24^2", "commitUser": "joakime", "authoredDateTime": "2017-05-18 14:00:08", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 95, "filePath": "jetty-bom/pom.xml", "insertions": 48, "deletions": 47}], "commitDateTime": "2017-05-18 14:00:08", "spoonStatsSkippedReason": ""}], "title": "Jetty BOM should not depend on jetty-parent", "spoonStatsSummary": {}, "gitStatsSummary": {"lines": 0, "insertions": 0, "gitFilesChange": 0, "deletions": 0}, "closed": "2017-05-22 13:27:10", "statsSkippedReason": "", "body": "The BOM introduced in #1348 is using `jetty-parent` as a parent.\r\n\r\n`jetty-parent` is itself declaring quite a few dependencies in its `<dependencyManagement>` section, including: servlet, logging, hamcrest, junit. Those may override choices made in the applications; `jetty-bom` should only declare jetty artifacts.\r\n\r\nThis issue is actually quite similar to netty/netty#6674. Note that this one also mentions that using `${project.version}` in the BOM is bad practice (and I would trust St\u00e9phane on that one).", "changesInPackagesGIT": [], "ttf": 18.00027777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/1527"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["c75e3c19d9a6202a8ce90e1bbbae5cb19076a522", "753ed9e603b12b136c9b3273e5e79163c8de8408"], "commits": {"c75e3c19d9a6202a8ce90e1bbbae5cb19076a522": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "753ed9e603b12b136c9b3273e5e79163c8de8408": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2017-04-28 12:53:40", "commitsDetails": [{"commitMessage": "Issue #1516 - making WebSocket started thread pools have identifying names\n", "commitParents": ["2679715a301ce82b0feb6f8b7190a72f379dd82d"], "commitHash": "c75e3c19d9a6202a8ce90e1bbbae5cb19076a522", "commitSpoonAstDiffStats": [{"spoonFilePath": "DelayedStartClientTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.DelayedStartClientTest.testNoExtraHttpClientThreads()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "SimpleContainerScope.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.scopes.SimpleContainerScope", "DEL": 1, "INS": 1, "UPD": 1, "MOV": 2, "TOT": 5}]}, {"spoonFilePath": "DelayedStartClientOnServerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.DelayedStartClientOnServerTest.testHttpClientThreads_AfterServerConnectTo()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.DelayedStartClientOnServerTest.testHttpClientThreads_AfterClientConfigure()", "DEL": 0, "INS": 1, "UPD": 2, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.DelayedStartClientOnServerTest.testHttpClientThreads_AfterClientConnectTo()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.DelayedStartClientOnServerTest.testNoExtraHttpClientThreads()", "DEL": 0, "INS": 1, "UPD": 2, "MOV": 2, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.DelayedStartClientOnServerTest.assertNoHttpClientPoolThreads(java.util.List)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.DelayedStartClientOnServerTest.testHttpClientThreads_AfterServerConfigure()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "WebSocketClient.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketClient", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 1, "TOT": 4}]}], "nameRev": "c75e3c19d9a6202a8ce90e1bbbae5cb19076a522 tags/jetty-9.4.6.v20170531~43", "commitUser": "joakime", "authoredDateTime": "2017-05-11 09:52:02", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/DelayedStartClientTest.java", "insertions": 1, "deletions": 1}, {"lines": 36, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/DelayedStartClientOnServerTest.java", "insertions": 27, "deletions": 9}, {"lines": 2, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/scopes/SimpleContainerScope.java", "insertions": 1, "deletions": 1}, {"lines": 13, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/WebSocketClient.java", "insertions": 12, "deletions": 1}], "commitDateTime": "2017-05-11 09:52:02", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1516 - Delay starting of WebSocketClient\n", "commitParents": ["b0edf18ad976ec1908bdbbefd95d253beddff2b5"], "commitHash": "753ed9e603b12b136c9b3273e5e79163c8de8408", "commitSpoonAstDiffStats": [], "nameRev": "753ed9e603b12b136c9b3273e5e79163c8de8408 tags/jetty-9.4.6.v20170531~50", "commitUser": "joakime", "authoredDateTime": "2017-05-09 12:58:22", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 69, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/DelayedStartClientTest.java", "insertions": 69, "deletions": 0}, {"lines": 69, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/ClientContainer.java", "insertions": 60, "deletions": 9}, {"lines": 347, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/DelayedStartClientOnServerTest.java", "insertions": 347, "deletions": 0}, {"lines": 87, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/scopes/DelegatedContainerScope.java", "insertions": 87, "deletions": 0}, {"lines": 52, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/JettyClientContainerProvider.java", "insertions": 43, "deletions": 9}, {"lines": 43, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/WebSocketClient.java", "insertions": 32, "deletions": 11}], "commitDateTime": "2017-05-09 12:58:22", "spoonStatsSkippedReason": "tooManyChanges"}], "title": "Delay starting of WebSocketClient until an attempt to connect is made", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 1.0, "INS": 4.0, "UPD": 1.0, "MOV": 3.0, "TOT": 9.0, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 266, "insertions": 235, "gitFilesChange": 5, "deletions": 31}, "closed": "2017-05-10 00:18:16", "statsSkippedReason": "", "body": "Evaluate why enabling the Jetty Distribution's `websocket` module starts a bunch of Jetty HttpClient threads.", "changesInPackagesGIT": ["jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client", "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356", "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common"], "changesInPackagesSPOON": ["org.eclipse.jetty.websocket.client.WebSocketClient", "org.eclipse.jetty.websocket.common.scopes.SimpleContainerScope"], "ttf": 11.000277777777777, "numCommits": 2, "url": "https://github.com/eclipse/jetty.project/issues/1516"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "gregw", "filteredCommits": ["0f98e607e806d9d42f418e9985ea70765320dbab"], "commits": {"0f98e607e806d9d42f418e9985ea70765320dbab": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2017-04-28 11:05:40", "commitsDetails": [{"commitMessage": "Issue #1514 - fixing bad websocket dump output\n", "commitParents": ["8ca70c691c1c82fc7aa224761b7b2b24cc5356bb"], "commitHash": "0f98e607e806d9d42f418e9985ea70765320dbab", "commitSpoonAstDiffStats": [{"spoonFilePath": "NativeWebSocketConfiguration.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.NativeWebSocketConfiguration.dump(java.lang.Appendable,java.lang.String)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.NativeWebSocketConfiguration.dump()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.NativeWebSocketConfiguration", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ClientContainer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.ClientContainer", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "JsrBrowserDebugTool.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.browser.JsrBrowserDebugTool.setupServer(int)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.browser.JsrBrowserDebugTool.runForever()", "DEL": 1, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.browser.JsrBrowserDebugTool.main(java.lang.String[])", "DEL": 0, "INS": 3, "UPD": 1, "MOV": 0, "TOT": 4}]}, {"spoonFilePath": "WebSocketServerFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketServerFactory.toString()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "PathMappings.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.pathmap.PathMappings.dump(java.lang.Appendable,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ServerContainer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.ServerContainer", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "0f98e607e806d9d42f418e9985ea70765320dbab tags/jetty-9.4.6.v20170531~1", "commitUser": "joakime", "authoredDateTime": "2017-05-31 13:36:27", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 3, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/pathmap/PathMappings.java", "insertions": 2, "deletions": 1}, {"lines": 18, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/browser/JsrBrowserDebugTool.java", "insertions": 8, "deletions": 10}, {"lines": 11, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/WebSocketServerFactory.java", "insertions": 11, "deletions": 0}, {"lines": 2, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/ClientContainer.java", "insertions": 2, "deletions": 0}, {"lines": 2, "filePath": "jetty-websocket/javax-websocket-server-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/server/ServerContainer.java", "insertions": 2, "deletions": 0}, {"lines": 18, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/NativeWebSocketConfiguration.java", "insertions": 2, "deletions": 16}], "commitDateTime": "2017-05-31 13:36:27", "spoonStatsSkippedReason": ""}], "title": "websocket dump badly formatted", "spoonStatsSummary": {"spoonMethodsChanged": 10, "DEL": 3, "INS": 9, "UPD": 3, "MOV": 2, "TOT": 17, "spoonFilesChanged": 6}, "gitStatsSummary": {"lines": 36, "insertions": 19, "gitFilesChange": 5, "deletions": 17}, "closed": "2017-06-01 00:37:00", "statsSkippedReason": "", "body": "when running the websocket jsr server demo from embedded, the server dump contains:\r\n```\r\n += org.eclipse.jetty.websocket.jsr356.server.ServerContainer@6e1ec318 - STARTED\r\n |   += org.eclipse.jetty.websocket.client.WebSocketClient@3b22cdd0 - STARTED\r\n |   +=  |       +- MappedResource[pathSpec=UriTemplatePathSpec[\"/echo\",pathDepth=1,group=EXACT],resource=org.eclipse.jetty.websocket.jsr356.server.JsrCreator[metadata=AnnotatedServerEndpointMetadata[endpoint=@javax.websocket.server.ServerEndpoint(encoders=[], decoders=[], configurator=class javax.websocket.server.ServerEndpointConfig$Configurator, subprotocols=[], value=/echo),config=AnnotatedServerEndpointConfig[endpointClass=class org.eclipse.jetty.embedded.WebSocketJsrServer$EchoJsrSocket,path=/echo,decoders=[],encoders=[],subprotocols=[],extensions=[]]]]]\r\n |\r\n```\r\nSo the dump is not being correctly nested", "changesInPackagesGIT": ["jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356", "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server", "jetty-http/src/main/java/org/eclipse/jetty/http/pathmap", "jetty-websocket/javax-websocket-server-impl/src/main/java/org/eclipse/jetty/websocket/jsr356"], "changesInPackagesSPOON": ["org.eclipse.jetty.websocket.jsr356.server.browser.JsrBrowserDebugTool.main(java.lang.String[])", "org.eclipse.jetty.websocket.jsr356.server.browser.JsrBrowserDebugTool.setupServer(int)", "org.eclipse.jetty.http.pathmap.PathMappings.dump(java.lang.Appendable,java.lang.String)", "org.eclipse.jetty.websocket.jsr356.server.browser.JsrBrowserDebugTool.runForever()", "org.eclipse.jetty.websocket.jsr356.server.ServerContainer", "org.eclipse.jetty.websocket.server.NativeWebSocketConfiguration.dump(java.lang.Appendable,java.lang.String)", "org.eclipse.jetty.websocket.jsr356.ClientContainer", "org.eclipse.jetty.websocket.server.NativeWebSocketConfiguration.dump()", "org.eclipse.jetty.websocket.server.NativeWebSocketConfiguration", "org.eclipse.jetty.websocket.server.WebSocketServerFactory.toString()"], "ttf": 33.000277777777775, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1514"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "martin-g", "filteredCommits": ["4c5dd93b30f617bbf028405751327f3a2a0e51ac"], "commits": {"4c5dd93b30f617bbf028405751327f3a2a0e51ac": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2017-04-24 20:01:25", "commitsDetails": [{"commitMessage": "Issue #1502 - Changing WSUF target creation used by PathMappings match\n", "commitParents": ["5e4853e177abf5819f221c63a800edb36b4acc7d"], "commitHash": "4c5dd93b30f617bbf028405751327f3a2a0e51ac", "commitSpoonAstDiffStats": [{"spoonFilePath": "AltFilterTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.AltFilterTest.testEcho()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "WebSocketUpgradeFilter.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter.doFilter(javax.servlet.ServletRequest,javax.servlet.ServletResponse,javax.servlet.FilterChain)", "DEL": 3, "INS": 2, "UPD": 3, "MOV": 2, "TOT": 10}]}], "nameRev": "4c5dd93b30f617bbf028405751327f3a2a0e51ac tags/jetty-9.4.5.v20170502~30", "commitUser": "joakime", "authoredDateTime": "2017-04-24 16:08:37", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/AltFilterTest.java", "insertions": 1, "deletions": 1}, {"lines": 11, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/WebSocketUpgradeFilter.java", "insertions": 6, "deletions": 5}], "commitDateTime": "2017-04-24 16:08:37", "spoonStatsSkippedReason": ""}], "title": "WebSocket endpoints cannot be mapped when the session id is url encoded", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 3, "INS": 2, "UPD": 3, "MOV": 2, "TOT": 10, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 11, "insertions": 6, "gitFilesChange": 1, "deletions": 5}, "closed": "2017-05-09 15:49:11", "statsSkippedReason": "", "body": "Version: 9.4.4\r\n\r\nIf the session id is tracked in the url then making a request to `ws://.../my/endpoint;jsessionid=xyz` won't match because org.eclipse.jetty.websocket.server.NativeWebSocketConfiguration#getMatch() [1] does an `EXACT` match without stripping `;jsessionid=...` before doing this.\r\n\r\nWithout `;jsessionid=...` the mapping works but `javax.websocket.server.HandshakeRequest#getHttpSession()` returns `null` in `javax.websocket.server.ServerEndpointConfig.Configurator#modifyHandshake()`.\r\n\r\n1. https://github.com/eclipse/jetty.project/blob/5e4853e177abf5819f221c63a800edb36b4acc7d/jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/NativeWebSocketConfiguration.java#L100", "changesInPackagesGIT": ["jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter.doFilter(javax.servlet.ServletRequest,javax.servlet.ServletResponse,javax.servlet.FilterChain)"], "ttf": 14.000277777777777, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1502"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug", "Specification"], "user": "joakime", "filteredCommits": ["5e5d650b05ec2b0683dc1c9ce72487b373d77de7", "e5b5a3c4ee1103dde4e44805f8b6b60f18157866", "fe173454e1a12c1188eda107549042641f7b0147"], "commits": {"5e5d650b05ec2b0683dc1c9ce72487b373d77de7": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "fe173454e1a12c1188eda107549042641f7b0147": {"commitUser": "gregw", "commitGHEventType": "closed"}, "e5b5a3c4ee1103dde4e44805f8b6b60f18157866": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2017-04-24 17:42:59", "commitsDetails": [{"commitMessage": "Issue #1500\n", "commitParents": ["fe173454e1a12c1188eda107549042641f7b0147"], "commitHash": "5e5d650b05ec2b0683dc1c9ce72487b373d77de7", "commitSpoonAstDiffStats": [{"spoonFilePath": "Response.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Response.sendError(int,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "AsyncServletTest.java", "spoonMethods": []}, {"spoonFilePath": "HttpChannel.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannel.handle()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 3}]}], "nameRev": "5e5d650b05ec2b0683dc1c9ce72487b373d77de7 tags/jetty-9.4.5.v20170502~24", "commitUser": "gregw", "authoredDateTime": "2017-04-26 16:02:18", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 11, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannel.java", "insertions": 9, "deletions": 2}, {"lines": 3, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Response.java", "insertions": 2, "deletions": 1}, {"lines": 2, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/AsyncServletTest.java", "insertions": 0, "deletions": 2}], "commitDateTime": "2017-04-26 16:02:18", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixed #1500\n", "commitParents": ["9e65d1ebcb7ae5ac709f9dd2443ad80967a866f0"], "commitHash": "fe173454e1a12c1188eda107549042641f7b0147", "commitSpoonAstDiffStats": [{"spoonFilePath": "Response.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Response.sendError(int,java.lang.String)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.Response.closeOutput()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 2, "TOT": 4}]}], "nameRev": "fe173454e1a12c1188eda107549042641f7b0147 tags/jetty-9.4.5.v20170502~25", "commitUser": "gregw", "authoredDateTime": "2017-04-26 15:38:18", "commitGHEventType": "closed", "commitGitStats": [{"lines": 9, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Response.java", "insertions": 5, "deletions": 4}], "commitDateTime": "2017-04-26 15:38:18", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1500 - adding testcase\n", "commitParents": ["99e5b118bdc853610387d3b55c330e4178c39db1"], "commitHash": "e5b5a3c4ee1103dde4e44805f8b6b60f18157866", "commitSpoonAstDiffStats": [{"spoonFilePath": "ErrorPageTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.ErrorPageTest.ErrorServlet.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 4, "INS": 6, "UPD": 6, "MOV": 8, "TOT": 24}, {"spoonMethodName": "org.eclipse.jetty.servlet.ErrorPageTest.testSendErrorClosedResponse()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.ErrorPageTest.init()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.ErrorPageTest.FailClosedServlet", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "e5b5a3c4ee1103dde4e44805f8b6b60f18157866 tags/jetty-9.4.5.v20170502~32", "commitUser": "joakime", "authoredDateTime": "2017-04-24 12:42:57", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 60, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/ErrorPageTest.java", "insertions": 48, "deletions": 12}], "commitDateTime": "2017-04-24 12:42:57", "spoonStatsSkippedReason": ""}], "title": "HttpServletResponse.sendError() should commit and close per Servlet spec 5.6", "spoonStatsSummary": {"spoonMethodsChanged": 3, "DEL": 1, "INS": 4, "UPD": 0, "MOV": 6, "TOT": 11, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 23, "insertions": 16, "gitFilesChange": 2, "deletions": 7}, "closed": "2017-04-26 13:38:26", "statsSkippedReason": "", "body": "We have reports that its possible to continue to use the `HttpServletResponse` after using `.sendError()`\r\n\r\nPer the _Servlet Spec 5.6 Closure of Response Object_ the sendError() call should commit, flush, and close the response object.", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.HttpChannel.handle()", "org.eclipse.jetty.server.Response.sendError(int,java.lang.String)", "org.eclipse.jetty.server.Response.closeOutput()"], "ttf": 1.0002777777777778, "numCommits": 2, "url": "https://github.com/eclipse/jetty.project/issues/1500"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug", "Specification"], "user": "gregw", "filteredCommits": ["29a26c76a25f964eabd630d10b3f9357bdfb7a87"], "commits": {"29a26c76a25f964eabd630d10b3f9357bdfb7a87": {"commitUser": "gregw", "commitGHEventType": "closed"}}, "created": "2017-04-21 03:24:57", "commitsDetails": [{"commitMessage": "Fixes #1493\n", "commitParents": ["a654c7c9e56f6a160137853a1ad5e7b2f098c11d"], "commitHash": "29a26c76a25f964eabd630d10b3f9357bdfb7a87", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpChannel.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannel.handle()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannel.minimalErrorResponse(java.lang.Throwable)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "29a26c76a25f964eabd630d10b3f9357bdfb7a87 tags/jetty-9.4.5.v20170502~42", "commitUser": "gregw", "authoredDateTime": "2017-04-21 13:25:18", "commitGHEventType": "closed", "commitGitStats": [{"lines": 4, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannel.java", "insertions": 2, "deletions": 2}], "commitDateTime": "2017-04-21 13:25:18", "spoonStatsSkippedReason": ""}], "title": "HttpServletResponse.sendError should preserve Cookies per Servlet spec", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 4, "insertions": 2, "gitFilesChange": 1, "deletions": 2}, "closed": "2017-04-21 03:25:44", "statsSkippedReason": "", "body": "as specified in the javadoc. Currently only session cookie is preserved.", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.HttpChannel.handle()", "org.eclipse.jetty.server.HttpChannel.minimalErrorResponse(java.lang.Throwable)"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1493"}, {"labels": ["Bug", "Java 9"], "closed": "2017-11-28 10:06:15", "body": "The changes to the `WebAppContext` and `WebAppClassloader` in Jetty 9.4.x introduced a novel approach for checking the origin/location of a Class to know if its a Server or System class.\r\n\r\nAs a result of a review of `TypeUtil.getLoadedFrom()` in issue #1489 (due to a review in Issue #1448), its clear that location is not always available.\r\n\r\nThese checks in WebAppContext need to handle the case where the Class has no location.\r\nWhat does that mean for the `WebAppContext.isServerClass()` or `.isSystemClass()`?\r\n\r\nSome scenarios where this is true.\r\n\r\n * On some environments, fundamental java base classes, such as `java.lang.String`, have no location (either via ProtectionDomain.CodeSource.Location, or via ClassLoader resource lookup).\r\n * Where Custom ClassLoader prevent the lookup via Resource.\r\n * Where Classes that are dynamically created in memory.\r\n * Where Custom URLStreamHandler's change the behavior of how a class is loaded.\r\n * Java security constraints.\r\n * Java 9 and module use.\r\n * OSGi and non-jar \"bundle:\" use.\r\n * Android's JVM security for core classes.\r\n", "commits": {}, "title": "WebAppClassloader needs to handle Classes with no location", "created": "2017-04-20 17:26:49", "user": "joakime", "url": "https://github.com/eclipse/jetty.project/issues/1490", "commitsDetails": [], "ttf": 221.00027777777777}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 2, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug", "Java 9"], "user": "joakime", "filteredCommits": [], "commits": {"0f295081c8caff9803a62163eaa041fc1b2972f0": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "d7b20dadf5818582d5a205113c4748bd37a576b2": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2017-04-20 16:54:37", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "0f295081c8caff9803a62163eaa041fc1b2972f0", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "d7b20dadf5818582d5a205113c4748bd37a576b2", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "TypeUtil.getLoadedFrom(Class) should never check System ClassLoader", "spoonStatsSummary": {}, "closed": "2017-04-28 11:07:02", "statsSkippedReason": "", "body": "If the class instance handed to the `TypeUtil.getLoadedFrom(Class)` has no valid \r\n`class.ProtectionDomain.CodeSource.Location`, then an attempt is made to load the class via `ClassLoader.getResource()` to determine its location.\r\n\r\nIf the Class itself has no ClassLoader, then this check should stop there.\r\nAs using the System ClassLoader can return an invalid location for the actual provided class.\r\n\r\nClassLoaders that perform dynamic creation of classes, class proxies, bytecode manipulation, aop, etc, then the Class being handed to `.getLoadedFrom()` has no location, and should be treated as such.\r\n\r\nAlso, if the ClassLoader isn't null, and is of a type that does not implement `.getResource()` for Classes, then this should also be taken into account.\r\n", "ttf": 7.000277777777778, "url": "https://github.com/eclipse/jetty.project/issues/1489"}, {"labels": ["Bug"], "closed": "2017-04-18 23:25:39", "body": "Per **Section 10.9** of the `servlet-3_1-final.pdf`, the use of request, and response objects should never be from the wrapped objects, but always from the root container objects.\r\n\r\n> The error page mechanism operates on the original unwrapped/unfiltered request\r\n> and response objects created by the container. The mechanism described in\r\n> Section 6.2.5, \u201cFilters and the RequestDispatcher\u201d may be used to specify filters that\r\n> are applied before an error response is generated.", "commits": {}, "title": "ErrorHandler should use unwrapped Request/Response", "created": "2017-04-17 15:50:56", "user": "joakime", "url": "https://github.com/eclipse/jetty.project/issues/1477", "commitsDetails": [], "ttf": 1.0002777777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug", "High Priority"], "user": "joakime", "filteredCommits": ["ccfe579a55026be4a693b4ebe7c5f75dbdc33a11", "e598f5da14e77a6a7bab0140fd8304411c3fac95", "874662fe4a05954dab1ab77534f745aa322f7441", "19f28a5a8ccc268518ffe90f7ef580a74bb76194"], "commits": {"ccfe579a55026be4a693b4ebe7c5f75dbdc33a11": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "e598f5da14e77a6a7bab0140fd8304411c3fac95": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "874662fe4a05954dab1ab77534f745aa322f7441": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "19f28a5a8ccc268518ffe90f7ef580a74bb76194": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2017-04-14 18:02:44", "commitsDetails": [{"commitMessage": "Issue #1475 - SIOOBE in ContextHandler startup\n\n+ Fixed ContextHandler logname creation to be more resilient to\n  bad characters that are unsuitable for a log name\n+ Corrected AbstractLogger condensePackageString() to be\n  more resilient to bad characters and classname formatting\n", "commitParents": ["509f59c32d5fab33bf2ef21602fd1540d7a90a7a"], "commitHash": "ccfe579a55026be4a693b4ebe7c5f75dbdc33a11", "commitSpoonAstDiffStats": [{"spoonFilePath": "ContextHandlerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandlerTest.testLogName()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "LogTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.log.LogTest.testNamedLogNamed_StdErrLog()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.log.LogTest.testCondensePackage()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "StdErrLog.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.log.StdErrLog", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ContextHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.getLogName()", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.doStart()", "DEL": 5, "INS": 2, "UPD": 0, "MOV": 6, "TOT": 13}]}, {"spoonFilePath": "AbstractLogger.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.log.AbstractLogger.condensePackageString(java.lang.String)", "DEL": 1, "INS": 7, "UPD": 2, "MOV": 3, "TOT": 13}]}], "nameRev": "ccfe579a55026be4a693b4ebe7c5f75dbdc33a11 tags/jetty-9.4.4.v20170414~3", "commitUser": "joakime", "authoredDateTime": "2017-04-14 12:04:18", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 50, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/ContextHandler.java", "insertions": 38, "deletions": 12}, {"lines": 3, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/log/StdErrLog.java", "insertions": 1, "deletions": 2}, {"lines": 23, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/handler/ContextHandlerTest.java", "insertions": 22, "deletions": 1}, {"lines": 17, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/log/AbstractLogger.java", "insertions": 15, "deletions": 2}, {"lines": 28, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/log/LogTest.java", "insertions": 26, "deletions": 2}], "commitDateTime": "2017-04-14 12:04:18", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1475 - more tests for bad ContextHandler.logger creation\n", "commitParents": ["ccfe579a55026be4a693b4ebe7c5f75dbdc33a11"], "commitHash": "e598f5da14e77a6a7bab0140fd8304411c3fac95", "commitSpoonAstDiffStats": [{"spoonFilePath": "ContextHandlerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandlerTest.testLogNameFromContextPath_Deep()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandlerTest.testLogNameFromContextPath_Undefined()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandlerTest.testLogNameFromDisplayName()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandlerTest.testLogNameFromContextPath_Empty()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandlerTest.testLogNameFromContextPath_Root()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandlerTest.testLogName()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 1, "TOT": 3}]}, {"spoonFilePath": "ContextHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.getLogName()", "DEL": 1, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 3}]}], "nameRev": "e598f5da14e77a6a7bab0140fd8304411c3fac95 tags/jetty-9.4.4.v20170414~2", "commitUser": "joakime", "authoredDateTime": "2017-04-14 12:53:25", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 6, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/ContextHandler.java", "insertions": 3, "deletions": 3}, {"lines": 73, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/handler/ContextHandlerTest.java", "insertions": 70, "deletions": 3}], "commitDateTime": "2017-04-14 12:53:25", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1475 - retain encoded form of path\n", "commitParents": ["2f870b0923b81849d52ebf3b2e44155105fbf5f3"], "commitHash": "874662fe4a05954dab1ab77534f745aa322f7441", "commitSpoonAstDiffStats": [{"spoonFilePath": "URIUtil.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.URIUtil.getJarSource(java.net.URI)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "874662fe4a05954dab1ab77534f745aa322f7441 tags/jetty-9.4.5.v20170502~44", "commitUser": "joakime", "authoredDateTime": "2017-04-20 09:00:48", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 3, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/URIUtil.java", "insertions": 2, "deletions": 1}], "commitDateTime": "2017-04-20 09:00:48", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1475 - some code cleanup\n", "commitParents": ["e598f5da14e77a6a7bab0140fd8304411c3fac95"], "commitHash": "19f28a5a8ccc268518ffe90f7ef580a74bb76194", "commitSpoonAstDiffStats": [{"spoonFilePath": "ContextHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.getLogName()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.doStart()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "19f28a5a8ccc268518ffe90f7ef580a74bb76194 tags/jetty-9.4.4.v20170414~1", "commitUser": "joakime", "authoredDateTime": "2017-04-14 13:03:17", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 10, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/ContextHandler.java", "insertions": 2, "deletions": 8}], "commitDateTime": "2017-04-14 13:03:17", "spoonStatsSkippedReason": ""}], "title": "SIOOBE in ContextHandler startup", "spoonStatsSummary": {"spoonMethodsChanged": 5, "DEL": 7, "INS": 13, "UPD": 7, "MOV": 9, "TOT": 36, "spoonFilesChanged": 4}, "gitStatsSummary": {"lines": 89, "insertions": 61, "gitFilesChange": 4, "deletions": 28}, "closed": "2017-04-14 20:52:14", "statsSkippedReason": "", "body": "Seen in startup of Jetty 9.4.4 stage.\r\n\r\n```\r\njava.lang.StringIndexOutOfBoundsException: String index out of range: 0\r\n        at java.lang.String.charAt(String.java:658)\r\n        at org.eclipse.jetty.util.log.AbstractLogger.condensePackageString(AbstractLogger.java:207)\r\n        at org.eclipse.jetty.util.log.StdErrLog.<init>(StdErrLog.java:218)\r\n        at org.eclipse.jetty.util.log.StdErrLog.<init>(StdErrLog.java:202)\r\n        at org.eclipse.jetty.util.log.StdErrLog.newLogger(StdErrLog.java:636)\r\n        at org.eclipse.jetty.util.log.AbstractLogger.getLogger(AbstractLogger.java:48)\r\n        at org.eclipse.jetty.util.log.Log.getLogger(Log.java:317)\r\n        at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:768)\r\n```", "changesInPackagesGIT": ["jetty-util/src/main/java/org/eclipse/jetty/util", "jetty-util/src/main/java/org/eclipse/jetty/util/log", "jetty-server/src/main/java/org/eclipse/jetty/server/handler"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.handler.ContextHandler.getLogName()", "org.eclipse.jetty.server.handler.ContextHandler.doStart()", "org.eclipse.jetty.util.URIUtil.getJarSource(java.net.URI)", "org.eclipse.jetty.util.log.AbstractLogger.condensePackageString(java.lang.String)", "org.eclipse.jetty.util.log.StdErrLog"], "ttf": 0.0002777777777777778, "numCommits": 4, "url": "https://github.com/eclipse/jetty.project/issues/1475"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 2, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["1e46576bf4f888656271b0cbd6fd1605b1808730", "89a82ac8cde4ae3395a98a4e730560bb42a172c6"], "commits": {"89a82ac8cde4ae3395a98a4e730560bb42a172c6": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "2d24922383a7443bebe5043a3bfce8148aeb9498": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "1e46576bf4f888656271b0cbd6fd1605b1808730": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "399ff337c8458446496940abf86501ae00d2113c": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2017-04-13 14:00:20", "commitsDetails": [{"commitMessage": "Issue #1469 - conforming to java.util.Timer quirks\n", "commitParents": ["897d0264c98c64446da7fbd18161d139ed3a5f02"], "commitHash": "89a82ac8cde4ae3395a98a4e730560bb42a172c6", "commitSpoonAstDiffStats": [{"spoonFilePath": "RolloverFileOutputStream.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream.RollTask.run()", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream.close()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}], "nameRev": "89a82ac8cde4ae3395a98a4e730560bb42a172c6 tags/jetty-9.2.22.v20170606~8", "commitUser": "joakime", "authoredDateTime": "2017-04-13 09:07:26", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 17, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/RolloverFileOutputStream.java", "insertions": 8, "deletions": 9}], "commitDateTime": "2017-06-02 10:09:24", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1469 - conforming to java.util.Timer quirks\n", "commitParents": ["7b8e3bf47cc641d32c802ca6b83484bd0ccb0f83"], "commitHash": "2d24922383a7443bebe5043a3bfce8148aeb9498", "commitSpoonAstDiffStats": [{"spoonFilePath": "RolloverFileOutputStream.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}]}], "nameRev": "2d24922383a7443bebe5043a3bfce8148aeb9498 tags/jetty-9.4.7.RC0~165", "commitUser": "joakime", "authoredDateTime": "2017-04-13 09:07:26", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 6, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/RolloverFileOutputStream.java", "insertions": 1, "deletions": 5}], "commitDateTime": "2017-08-08 09:10:16", "spoonStatsSkippedReason": ""}, {"commitMessage": "Eliminate time creep in RFOS\n", "commitParents": ["196b2c384bfe3fef6841f1ddeae196ddc8227049"], "commitHash": "1e46576bf4f888656271b0cbd6fd1605b1808730", "commitSpoonAstDiffStats": [{"spoonFilePath": "RolloverFileOutputStream.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream.scheduleNextRollover()", "DEL": 2, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 3}]}], "nameRev": "1e46576bf4f888656271b0cbd6fd1605b1808730 tags/jetty-9.3.17.RC0~7", "commitUser": "joakime", "authoredDateTime": "2017-02-27 14:20:06", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 3, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/RolloverFileOutputStream.java", "insertions": 1, "deletions": 2}], "commitDateTime": "2017-02-27 14:20:06", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1469 - conforming to java.util.Timer quirks\n", "commitParents": ["6a10b4272bc2f0bb222c886166008363c6c81948"], "commitHash": "399ff337c8458446496940abf86501ae00d2113c", "commitSpoonAstDiffStats": [{"spoonFilePath": "RolloverFileOutputStream.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream.RollTask.run()", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream.close()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}], "nameRev": "399ff337c8458446496940abf86501ae00d2113c tags/jetty-9.4.4.v20170414~6^2", "commitUser": "joakime", "authoredDateTime": "2017-04-13 09:07:26", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 17, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/RolloverFileOutputStream.java", "insertions": 8, "deletions": 9}], "commitDateTime": "2017-04-13 09:07:26", "spoonStatsSkippedReason": ""}], "title": "RolloverFileOutputStream: IllegalStateException Task already scheduled", "spoonStatsSummary": {"spoonMethodsChanged": 4, "DEL": 2, "INS": 2, "UPD": 3, "MOV": 2, "TOT": 9, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 20, "insertions": 9, "gitFilesChange": 1, "deletions": 11}, "closed": "2017-04-13 16:08:25", "statsSkippedReason": "", "body": "Report at 1e46576bf4f888656271b0cbd6fd1605b1808730\r\n\r\n> BTW, scheduleNextRollover() is called from within RollTask.run()\r\n> so, __rollover.schedule(_rollTask, ***) leads to an exception\r\n> Exception in thread \"org.eclipse.jetty.util.RolloverFileOutputStream\" java.lang.IllegalStateException: Task already scheduled or cancelled\r\n> at java.util.Timer.sched(Timer.java:401)\r\n> at java.util.Timer.schedule(Timer.java:193)\r\n> at org.eclipse.jetty.util.RolloverFileOutputStream.scheduleNextRollover(RolloverFileOutputStream.java:216)\r\n> at org.eclipse.jetty.util.RolloverFileOutputStream.access$200(RolloverFileOutputStream.java:48)\r\n> at org.eclipse.jetty.util.RolloverFileOutputStream$RollTask.run(RolloverFileOutputStream.java:359)\r\n> at java.util.TimerThread.mainLoop(Timer.java:555)\r\n> at java.util.TimerThread.run(Timer.java:505)\r\n> As result, first midnight switches OutputStream out, throws this exception and stops scheduling _rollTask.\r\n> Suppose\r\n> _rollTask = new RollTask();\r\n> before\r\n> __rollover.schedule(_rollTask...\r\n> will fix that problem.", "changesInPackagesGIT": ["jetty-util/src/main/java/org/eclipse/jetty/util"], "changesInPackagesSPOON": ["org.eclipse.jetty.util.RolloverFileOutputStream", "org.eclipse.jetty.util.RolloverFileOutputStream.RollTask.run()", "org.eclipse.jetty.util.RolloverFileOutputStream.scheduleNextRollover()", "org.eclipse.jetty.util.RolloverFileOutputStream.close()"], "ttf": 0.0002777777777777778, "numCommits": 2, "url": "https://github.com/eclipse/jetty.project/issues/1469"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "janbartel", "filteredCommits": ["6f9495f5c13466fb2e730195f8e6d1802e6dacfe", "2ba44ac05889f685b16a088f31bfdbc527bc894c", "cc7b12571fa7de759f0d8789e9eb92e0c6d11b1e"], "commits": {"cc7b12571fa7de759f0d8789e9eb92e0c6d11b1e": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "6f9495f5c13466fb2e730195f8e6d1802e6dacfe": {"commitUser": "WalkerWatch", "commitGHEventType": "referenced"}, "2ba44ac05889f685b16a088f31bfdbc527bc894c": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2017-04-12 23:58:46", "commitsDetails": [{"commitMessage": "Issue #1466 Update documentation.\n\nSigned-off-by: Jan Bartel <janb@webtide.com>\n", "commitParents": ["71268ae687e5696ea2d37ae6093cfed2868e81a8"], "commitHash": "cc7b12571fa7de759f0d8789e9eb92e0c6d11b1e", "commitSpoonAstDiffStats": [], "nameRev": "cc7b12571fa7de759f0d8789e9eb92e0c6d11b1e tags/jetty-9.4.20.v20190813~45", "commitUser": "janbartel", "authoredDateTime": "2019-07-12 10:46:01", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 4, "filePath": "jetty-documentation/src/main/asciidoc/reference/upgrading/upgrading-9.3-to-9.4.adoc", "insertions": 4, "deletions": 0}], "commitDateTime": "2019-07-12 10:46:01", "spoonStatsSkippedReason": ""}, {"commitMessage": "Added additional note about SCIs and updating web.xml per #1466\n\nSigned-off-by: Chris Walker <WalkerWatch@users.noreply.github.com>\n", "commitParents": ["4d4a7dc10101576080631e3d38fe1830a9dce75c"], "commitHash": "6f9495f5c13466fb2e730195f8e6d1802e6dacfe", "commitSpoonAstDiffStats": [], "nameRev": "6f9495f5c13466fb2e730195f8e6d1802e6dacfe tags/jetty-9.4.20.v20190813~43", "commitUser": "WalkerWatch", "authoredDateTime": "2019-07-12 11:50:35", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 7, "filePath": "jetty-documentation/src/main/asciidoc/reference/upgrading/upgrading-9.3-to-9.4.adoc", "insertions": 5, "deletions": 2}, {"lines": 7, "filePath": "jetty-documentation/src/main/asciidoc/administration/annotations/using-annotations.adoc", "insertions": 7, "deletions": 0}], "commitDateTime": "2019-07-12 11:50:35", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1466\n", "commitParents": ["68ff657c0b7d931ae13c07c096457305c8fa26c3"], "commitHash": "2ba44ac05889f685b16a088f31bfdbc527bc894c", "commitSpoonAstDiffStats": [{"spoonFilePath": "AnnotationConfiguration.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.annotations.AnnotationConfiguration.getNonExcludedInitializers(org.eclipse.jetty.webapp.WebAppContext)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "TestAnnotationConfiguration.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.annotations.TestAnnotationConfiguration.testAnnotationScanControl()", "DEL": 0, "INS": 4, "UPD": 3, "MOV": 0, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.annotations.TestAnnotationConfiguration.testSCIControl()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ServerServletContainerInitializer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.annotations.ServerServletContainerInitializer", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "2ba44ac05889f685b16a088f31bfdbc527bc894c tags/jetty-9.4.4.v20170414~5", "commitUser": "janbartel", "authoredDateTime": "2017-04-14 14:07:36", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 1, "filePath": "jetty-annotations/src/test/resources/META-INF/services/javax.servlet.ServletContainerInitializer", "insertions": 1, "deletions": 0}, {"lines": 0, "filePath": "jetty-annotations/src/test/resources/{web31.xml => web31true.xml}", "insertions": 0, "deletions": 0}, {"lines": 54, "filePath": "jetty-annotations/src/test/java/org/eclipse/jetty/annotations/ServerServletContainerInitializer.java", "insertions": 54, "deletions": 0}, {"lines": 83, "filePath": "jetty-annotations/src/test/java/org/eclipse/jetty/annotations/TestAnnotationConfiguration.java", "insertions": 81, "deletions": 2}, {"lines": 0, "filePath": "jetty-annotations/src/test/jar/test-sci.jar", "insertions": 0, "deletions": 0}, {"lines": 6, "filePath": "tests/test-jmx/jmx-webapp/src/main/webapp/WEB-INF/web.xml", "insertions": 3, "deletions": 3}, {"lines": 22, "filePath": "jetty-annotations/src/main/java/org/eclipse/jetty/annotations/AnnotationConfiguration.java", "insertions": 21, "deletions": 1}], "commitDateTime": "2017-04-14 14:07:36", "spoonStatsSkippedReason": ""}], "title": "Only use ServletContainerInitializers from server path for web.xml < 3.0", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 0.0, "INS": 2.0, "UPD": 0.0, "MOV": 0.0, "TOT": 2.0, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 40, "insertions": 37, "gitFilesChange": 3, "deletions": 3}, "closed": "2017-04-14 04:09:24", "statsSkippedReason": "", "body": "ServletContainerInitializers are currently loaded from both the server path and the webapp's classpath. If a webapp includes a jar that happens to contain a ServletContainerInitializer, it will be applied, even if the webapp itself has a web.xml version < 3.0.  This might be considered unexpected behaviour.  We could apply ServletContainerInitializers only from the server's classpath in the case where web.xml < 3.0.", "changesInPackagesGIT": ["jetty-documentation/src/main/asciidoc/reference/upgrading/upgrading-9.3-to-9.4.adoc", "jetty-documentation/src/main/asciidoc/administration/annotations/using-annotations.adoc", "jetty-annotations/src/main/java/org/eclipse/jetty/annotations"], "changesInPackagesSPOON": ["org.eclipse.jetty.annotations.AnnotationConfiguration.getNonExcludedInitializers(org.eclipse.jetty.webapp.WebAppContext)", "org.eclipse.jetty.annotations.ServerServletContainerInitializer"], "ttf": 1.0002777777777778, "numCommits": 3, "url": "https://github.com/eclipse/jetty.project/issues/1466"}, {"labels": ["Bug"], "closed": "2017-04-11 00:23:40", "body": "Servlet Request forwarding is broken with async servlets.\r\n\r\nIf servlet A forwards request to servlet B, the request received inside the async context of servlet B is the original base request and not the expected forwarded request.\r\n\r\nUploading the test war below. It has the Java source as well.\r\n\r\nURL post deployment: http://localhost:8080/TestServletForward\r\n\r\n[TestServletForward.zip](https://github.com/eclipse/jetty.project/files/905476/TestServletForward.zip)", "commits": {}, "title": "For async servlet, request forwarding is broken", "created": "2017-04-07 12:03:55", "user": "ghost", "url": "https://github.com/eclipse/jetty.project/issues/1459", "commitsDetails": [], "ttf": 3.000277777777778}, {"labels": ["Bug"], "closed": "2017-04-17 15:59:01", "body": "", "commits": {}, "title": "Remove AbstractWebSocketConnection discard logic", "created": "2017-04-06 19:18:26", "user": "joakime", "url": "https://github.com/eclipse/jetty.project/issues/1457", "commitsDetails": [], "ttf": 10.000277777777777}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["9cdf8b046810e6c7c971b55254ccf8c030667f54"], "commits": {"9cdf8b046810e6c7c971b55254ccf8c030667f54": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2017-04-04 16:06:10", "commitsDetails": [{"commitMessage": "Issue #1449 - Removing unused / broken __jvmLib reference\n", "commitParents": ["f53776628f15b22899026f05fed00b9610d06c8d"], "commitHash": "9cdf8b046810e6c7c971b55254ccf8c030667f54", "commitSpoonAstDiffStats": [{"spoonFilePath": "WebAppContext.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.WebAppContext", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 2}]}], "nameRev": "9cdf8b046810e6c7c971b55254ccf8c030667f54 tags/jetty-9.4.4.v20170410~11", "commitUser": "joakime", "authoredDateTime": "2017-04-04 09:18:37", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 18, "filePath": "jetty-webapp/src/main/java/org/eclipse/jetty/webapp/WebAppContext.java", "insertions": 0, "deletions": 18}], "commitDateTime": "2017-04-04 09:18:37", "spoonStatsSkippedReason": ""}], "title": "Unable to find the JVM Lib directory in WebAppContext", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 2, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 2, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 18, "insertions": 0, "gitFilesChange": 1, "deletions": 18}, "closed": "2017-04-04 16:39:02", "statsSkippedReason": "", "body": "When running the WebAppClassLoaderTest, there is a WARN produced ...\r\n\r\n```\r\njava.lang.NullPointerException\r\n\tat org.eclipse.jetty.webapp.WebAppContext.<clinit>(WebAppContext.java:140)\r\n\tat org.eclipse.jetty.webapp.WebAppClassLoaderTest.init(WebAppClassLoaderTest.java:62)\r\n```", "changesInPackagesGIT": ["jetty-webapp/src/main/java/org/eclipse/jetty/webapp"], "changesInPackagesSPOON": ["org.eclipse.jetty.webapp.WebAppContext"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1449"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["f53776628f15b22899026f05fed00b9610d06c8d", "6ca9bacee6039483fa138c1cfbd29e26e744fdeb", "a3ace98a8dc56603daa755fee639b9510cfe1385"], "commits": {"f53776628f15b22899026f05fed00b9610d06c8d": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "6ca9bacee6039483fa138c1cfbd29e26e744fdeb": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "975f88b950151de7888b40a7d26e8695cfcc146d": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "a3ace98a8dc56603daa755fee639b9510cfe1385": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2017-04-04 13:42:12", "commitsDetails": [{"commitMessage": "Issue #1448 - Reduce unncessary URL creation\n", "commitParents": ["c285d6f8bbd839906e8c39d23db2f343be22c6ca"], "commitHash": "f53776628f15b22899026f05fed00b9610d06c8d", "commitSpoonAstDiffStats": [{"spoonFilePath": "WebAppClassLoaderTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.WebAppClassLoaderTest.testResources()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.webapp.WebAppClassLoaderTest", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "URLStreamHandlerUtil.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.URLStreamHandlerUtil", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "TypeUtil.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.TypeUtil.getLoadedFrom(java.lang.Class)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "WebAppClassLoaderUrlStreamTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.WebAppClassLoaderUrlStreamTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "f53776628f15b22899026f05fed00b9610d06c8d tags/jetty-9.4.4.v20170410~12", "commitUser": "joakime", "authoredDateTime": "2017-04-04 09:08:44", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 78, "filePath": "jetty-webapp/src/test/java/org/eclipse/jetty/webapp/URLStreamHandlerUtil.java", "insertions": 78, "deletions": 0}, {"lines": 113, "filePath": "jetty-webapp/src/test/java/org/eclipse/jetty/webapp/WebAppClassLoaderUrlStreamTest.java", "insertions": 113, "deletions": 0}, {"lines": 16, "filePath": "jetty-webapp/src/test/java/org/eclipse/jetty/webapp/WebAppClassLoaderTest.java", "insertions": 11, "deletions": 5}, {"lines": 4, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/TypeUtil.java", "insertions": 1, "deletions": 3}], "commitDateTime": "2017-04-04 09:08:44", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1448 - Eliminating Resource creation from TypeUtil.getLoadedFrom()\n\n+ Replaced with URI TypeUtil.getLocationOfClass(Class clazz)\n+ and File TypeUtil.getLocationOfClassAsFile(Class clazz)\n+ This is done to eliminate extraneous \"new URL\" and \"URI.toURL\" calls\n  that can trigger URL Stream Handler creation and initialization\n  which is the cause of the StackOverflowError\n", "commitParents": ["8c26eddbc642855d669d794625d6eb0411ce73c0"], "commitHash": "6ca9bacee6039483fa138c1cfbd29e26e744fdeb", "commitSpoonAstDiffStats": [{"spoonFilePath": "ClasspathPattern.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.ClasspathPattern.match(java.lang.Class)", "DEL": 3, "INS": 2, "UPD": 5, "MOV": 3, "TOT": 13}, {"spoonMethodName": "org.eclipse.jetty.webapp.ClasspathPattern.match(java.lang.String,java.net.URL)", "DEL": 2, "INS": 2, "UPD": 1, "MOV": 4, "TOT": 9}]}, {"spoonFilePath": "AnnotationConfiguration.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.annotations.AnnotationConfiguration.getJarFor(javax.servlet.ServletContainerInitializer)", "DEL": 0, "INS": 2, "UPD": 2, "MOV": 1, "TOT": 5}]}, {"spoonFilePath": "TypeUtilTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.TypeUtilTest.testGetLocationOfClass()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.TypeUtilTest.testLoadedFrom()", "DEL": 2, "INS": 0, "UPD": 5, "MOV": 8, "TOT": 15}, {"spoonMethodName": "org.eclipse.jetty.util.TypeUtilTest.testLoadedFrom9()", "DEL": 2, "INS": 0, "UPD": 3, "MOV": 3, "TOT": 8}]}, {"spoonFilePath": "TypeUtil.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.TypeUtil.getLocationOfClassAsFile(java.lang.Class)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.TypeUtil.getLoadedFrom(java.lang.Class)", "DEL": 1, "INS": 0, "UPD": 6, "MOV": 9, "TOT": 16}]}, {"spoonFilePath": "ClasspathPatternTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.ClasspathPatternTest.testIncludedLocations()", "DEL": 1, "INS": 0, "UPD": 10, "MOV": 1, "TOT": 12}, {"spoonMethodName": "org.eclipse.jetty.webapp.ClasspathPatternTest.testExcludeLocations()", "DEL": 1, "INS": 0, "UPD": 10, "MOV": 1, "TOT": 12}]}], "nameRev": "6ca9bacee6039483fa138c1cfbd29e26e744fdeb tags/jetty-9.4.5.v20170502~28", "commitUser": "gregw", "authoredDateTime": "2017-04-24 09:36:38", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 28, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/TypeUtilTest.java", "insertions": 13, "deletions": 15}, {"lines": 17, "filePath": "jetty-webapp/src/main/java/org/eclipse/jetty/webapp/ClasspathPattern.java", "insertions": 10, "deletions": 7}, {"lines": 27, "filePath": "jetty-webapp/src/test/java/org/eclipse/jetty/webapp/ClasspathPatternTest.java", "insertions": 14, "deletions": 13}, {"lines": 5, "filePath": "jetty-annotations/src/main/java/org/eclipse/jetty/annotations/AnnotationConfiguration.java", "insertions": 4, "deletions": 1}, {"lines": 62, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/TypeUtil.java", "insertions": 38, "deletions": 24}], "commitDateTime": "2017-04-26 13:43:35", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "975f88b950151de7888b40a7d26e8695cfcc146d", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1448\n\nOptimized excluded by name handling\n", "commitParents": ["6ca9bacee6039483fa138c1cfbd29e26e744fdeb"], "commitHash": "a3ace98a8dc56603daa755fee639b9510cfe1385", "commitSpoonAstDiffStats": [{"spoonFilePath": "ClasspathPattern.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.ClasspathPattern.match(java.lang.Class)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.webapp.ClasspathPattern.match(java.lang.String,java.net.URL)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "a3ace98a8dc56603daa755fee639b9510cfe1385 tags/jetty-9.4.5.v20170502~27", "commitUser": "gregw", "authoredDateTime": "2017-04-26 13:50:58", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 5, "filePath": "jetty-webapp/src/main/java/org/eclipse/jetty/webapp/ClasspathPattern.java", "insertions": 5, "deletions": 0}], "commitDateTime": "2017-04-26 13:50:58", "spoonStatsSkippedReason": ""}], "title": "StackOverflowError when using URLStreamHandlerFactory in WebAppClassloader", "spoonStatsSummary": {"spoonMethodsChanged": 6, "DEL": 6.0, "INS": 10.0, "UPD": 15.0, "MOV": 17.0, "TOT": 48.0, "spoonFilesChanged": 4}, "gitStatsSummary": {"lines": 93.0, "insertions": 58.0, "gitFilesChange": 3, "deletions": 35.0}, "closed": "2017-04-26 17:23:59", "statsSkippedReason": "", "body": "If an environment has a URLStreamHandler installed, its possible for a StackOverflowError to occur when in the WebAppClassloader ...\r\n\r\n```\r\nException in thread \"FelixStartLevel\" java.lang.StackOverflowError\r\n \tat org.apache.felix.framework.URLHandlers.createURLStreamHandler(URLHandlers.java:495)\r\n \tat java.net.URL.getURLStreamHandler(URL.java:1142)\r\n \tat java.net.URL.<init>(URL.java:599)\r\n \tat java.net.URL.<init>(URL.java:490)\r\n \tat java.net.URL.<init>(URL.java:439)\r\n \tat org.eclipse.jetty.util.resource.Resource.newResource(Resource.java:166)\r\n \tat org.eclipse.jetty.util.resource.Resource.newResource(Resource.java:149)\r\n \tat org.eclipse.jetty.util.TypeUtil.getLoadedFrom(TypeUtil.java:726)\r\n \tat org.eclipse.jetty.webapp.ClasspathPattern.match(ClasspathPattern.java:518)\r\n \tat org.eclipse.jetty.webapp.WebAppContext.isServerClass(WebAppContext.java:811)\r\n \tat org.eclipse.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:563)\r\n \tat java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n \tat org.apache.felix.framework.URLHandlers.createURLStreamHandler(URLHandlers.java:495)\r\n \tat java.net.URL.getURLStreamHandler(URL.java:1142)\r\n \tat java.net.URL.<init>(URL.java:599)\r\n \tat java.net.URL.<init>(URL.java:490)\r\n \tat java.net.URL.<init>(URL.java:439)\r\n \tat org.eclipse.jetty.util.resource.Resource.newResource(Resource.java:166)\r\n \tat org.eclipse.jetty.util.resource.Resource.newResource(Resource.java:149)\r\n \tat org.eclipse.jetty.util.TypeUtil.getLoadedFrom(TypeUtil.java:726)\r\n \tat org.eclipse.jetty.webapp.ClasspathPattern.match(ClasspathPattern.java:518)\r\n \tat org.eclipse.jetty.webapp.WebAppContext.isServerClass(WebAppContext.java:811)\r\n \tat org.eclipse.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:563)\r\n \tat java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n \tat org.apache.felix.framework.URLHandlers.createURLStreamHandler(URLHandlers.java:495)\r\n \tat java.net.URL.getURLStreamHandler(URL.java:1142)\r\n \tat java.net.URL.<init>(URL.java:599)\r\n \tat java.net.URL.<init>(URL.java:490)\r\n```", "changesInPackagesGIT": ["jetty-util/src/main/java/org/eclipse/jetty/util", "jetty-webapp/src/main/java/org/eclipse/jetty/webapp", "jetty-annotations/src/main/java/org/eclipse/jetty/annotations"], "changesInPackagesSPOON": ["org.eclipse.jetty.webapp.ClasspathPattern.match(java.lang.Class)", "org.eclipse.jetty.util.TypeUtil.getLocationOfClassAsFile(java.lang.Class)", "org.eclipse.jetty.util.TypeUtil.getLoadedFrom(java.lang.Class)", "org.eclipse.jetty.webapp.URLStreamHandlerUtil", "org.eclipse.jetty.annotations.AnnotationConfiguration.getJarFor(javax.servlet.ServletContainerInitializer)", "org.eclipse.jetty.webapp.ClasspathPattern.match(java.lang.String,java.net.URL)"], "ttf": 22.00027777777778, "numCommits": 3, "url": "https://github.com/eclipse/jetty.project/issues/1448"}, {"labels": ["Bug", "Microsoft Windows", "Unable To Replicate"], "closed": "2017-06-19 19:00:09", "body": "There is a Java web-app that is running by Jetty 9.4.3.v20170317\r\nAfter some minutes/hours of working, the web-app starts to use 100% CPU without any specific reason. **Even when it is idle**.\r\n\r\nAfter profiling and getting thread-dumps, it seems that Jetty is the source of high CPU consumption.\r\n\r\nSo what is wrong with Jetty? is this a bug? **_(Please pay attention to the second image)_**\r\n\r\nBelow I list some evidences after profiling (using VisualVM) when CPU consumption reaches to 100%:\r\n--------\r\n\r\n- Running threads (**CLICK to enlarge images**): \r\n![threads](https://cloud.githubusercontent.com/assets/11075737/24646571/bab0dec8-1931-11e7-95dd-980ee504398e.PNG)\r\n\r\n- CPU Sampler: \r\n![cpu-samples-cpusamples-after100cpu](https://cloud.githubusercontent.com/assets/11075737/24646603/d4d40fd2-1931-11e7-9427-03bb76c4ed75.PNG)\r\n\r\n- CPU Sampler-per thread: \r\n![cpu-samples-perthread-after100cpu](https://cloud.githubusercontent.com/assets/11075737/24646636/eec6da8c-1931-11e7-8d49-02746cc5b477.PNG)\r\n\r\n- Memory Sampler: \r\n![mem-samples-perthread-after100cpu](https://cloud.githubusercontent.com/assets/11075737/24646668/f9b0f3ec-1931-11e7-9478-435c62f8cc6d.PNG)\r\n\r\n- Process status (using processExplorer): \r\n![process](https://cloud.githubusercontent.com/assets/11075737/24646689/0675d962-1932-11e7-8dc1-f9b9cbdaa2d8.PNG)\r\n\r\n- Process performance (using processExplorer): \r\n![process-performance2](https://cloud.githubusercontent.com/assets/11075737/24646712/15d2adcc-1932-11e7-8b5f-57c0e478f7cd.PNG)\r\n", "commits": {}, "title": "100% CPU in selector on Windows", "created": "2017-04-04 08:03:15", "user": "amshf", "url": "https://github.com/eclipse/jetty.project/issues/1446", "commitsDetails": [], "ttf": 76.00027777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["be56ecc523b9363f85b97fdd140f82fba0244172"], "commits": {"be56ecc523b9363f85b97fdd140f82fba0244172": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2017-04-03 23:32:57", "commitsDetails": [{"commitMessage": "Issue #1444 - Deprecate Continuation\n", "commitParents": ["9cdf8b046810e6c7c971b55254ccf8c030667f54"], "commitHash": "be56ecc523b9363f85b97fdd140f82fba0244172", "commitSpoonAstDiffStats": [{"spoonFilePath": "ContinuationListener.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.continuation", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "Servlet3Continuation.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.continuation.Servlet3Continuation", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "Continuation.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.continuation", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "FauxContinuation.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.continuation.FauxContinuation", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ContinuationFilter.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.continuation.ContinuationFilter", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.continuation.ContinuationFilter.init(javax.servlet.FilterConfig)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ContinuationThrowable.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.continuation.ContinuationThrowable", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ContinuationSupport.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.continuation.ContinuationSupport", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "package-info.java", "spoonMethods": []}], "nameRev": "be56ecc523b9363f85b97fdd140f82fba0244172 tags/jetty-9.4.4.v20170410~6^2~3", "commitUser": "joakime", "authoredDateTime": "2017-04-05 08:42:58", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-continuation/src/main/java/org/eclipse/jetty/continuation/Servlet3Continuation.java", "insertions": 2, "deletions": 0}, {"lines": 5, "filePath": "jetty-continuation/src/main/java/org/eclipse/jetty/continuation/Continuation.java", "insertions": 3, "deletions": 2}, {"lines": 2, "filePath": "jetty-continuation/src/main/java/org/eclipse/jetty/continuation/ContinuationSupport.java", "insertions": 2, "deletions": 0}, {"lines": 3, "filePath": "jetty-continuation/src/main/java/org/eclipse/jetty/continuation/package-info.java", "insertions": 2, "deletions": 1}, {"lines": 2, "filePath": "jetty-continuation/src/main/java/org/eclipse/jetty/continuation/ContinuationThrowable.java", "insertions": 2, "deletions": 0}, {"lines": 3, "filePath": "jetty-continuation/src/main/java/org/eclipse/jetty/continuation/ContinuationFilter.java", "insertions": 3, "deletions": 0}, {"lines": 2, "filePath": "jetty-continuation/src/main/java/org/eclipse/jetty/continuation/ContinuationListener.java", "insertions": 2, "deletions": 0}, {"lines": 2, "filePath": "jetty-continuation/src/main/java/org/eclipse/jetty/continuation/FauxContinuation.java", "insertions": 2, "deletions": 0}], "commitDateTime": "2017-04-05 08:42:58", "spoonStatsSkippedReason": ""}], "title": "Deprecate Continuations", "spoonStatsSummary": {"spoonMethodsChanged": 7, "DEL": 0, "INS": 8, "UPD": 0, "MOV": 0, "TOT": 8, "spoonFilesChanged": 7}, "gitStatsSummary": {"lines": 21, "insertions": 18, "gitFilesChange": 8, "deletions": 3}, "closed": "2017-04-19 12:15:17", "statsSkippedReason": "", "body": "There exists a [`FauxContinuations`](https://github.com/eclipse/jetty.project/blob/jetty-9.4.3.v20170317/jetty-continuation/src/main/java/org/eclipse/jetty/continuation/FauxContinuation.java) in Jetty 9.4.3.\r\n\r\nHowever, the [`ContinuationsSupport`](https://github.com/eclipse/jetty.project/blob/jetty-9.4.3.v20170317/jetty-continuation/src/main/java/org/eclipse/jetty/continuation/ContinuationSupport.java) class never uses it, instead [it seems to want to use a `org.mortbay.util.ajax.WaitingContinuation`](https://github.com/eclipse/jetty.project/blob/jetty-9.4.3.v20170317/jetty-continuation/src/main/java/org/eclipse/jetty/continuation/ContinuationSupport.java#L63), which doesn't exist in the dependencies or source tree.", "changesInPackagesGIT": ["jetty-continuation/src/main/java/org/eclipse/jetty/continuation"], "changesInPackagesSPOON": ["org.eclipse.jetty.continuation", "org.eclipse.jetty.continuation.FauxContinuation", "org.eclipse.jetty.continuation.ContinuationSupport", "org.eclipse.jetty.continuation.Servlet3Continuation", "org.eclipse.jetty.continuation.ContinuationFilter", "org.eclipse.jetty.continuation.ContinuationFilter.init(javax.servlet.FilterConfig)", "org.eclipse.jetty.continuation.ContinuationThrowable"], "ttf": 15.000277777777777, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1444"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "joakime", "filteredCommits": [], "commits": {"e8f8e6a279723c3a3210c6f84015d3753a046083": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2017-03-31 18:16:39", "commitsDetails": [{"commitMessage": "Issue #1439 - Cleanup of PR #1438 to enable UNC support\n\n+ Uses Path.toRealPath() to satisfy requirements on both\n  Windows and Linux respectively\n", "commitParents": ["9a00c038ff1e59140e6de8392173752a14bd126a"], "commitHash": "e8f8e6a279723c3a3210c6f84015d3753a046083", "commitSpoonAstDiffStats": [{"spoonFilePath": "PathResource.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.PathResource.checkAliasPath()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 1, "TOT": 3}]}], "nameRev": "e8f8e6a279723c3a3210c6f84015d3753a046083 tags/jetty-9.3.18.v20170406~1^2", "commitUser": "joakime", "authoredDateTime": "2017-03-31 11:18:30", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 12, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/resource/PathResource.java", "insertions": 11, "deletions": 1}], "commitDateTime": "2017-03-31 11:18:30", "spoonStatsSkippedReason": ""}], "title": "Allow UNC paths to function as Resource bases", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0, "insertions": 0, "gitFilesChange": 0, "deletions": 0}, "closed": "2017-03-31 20:58:37", "statsSkippedReason": "", "body": "As pointed out in PR #1438, the security fix in issue #556 broke the ability of `PathResource` to use UNC paths as Resource Bases.", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 0.0002777777777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/1439"}, {"labels": ["Bug"], "closed": "2017-05-31 14:24:14", "body": "Used HttpClient with SslContextFactory and `-Dorg.eclipse.jetty.LEVEL=DEBUG`.\r\n\r\nHangs on GET and throws:\r\n```\r\n2017-03-23 12:42:28.717:DBUG:oejut.QueuedThreadPool:HttpClient@885284298-10: ran org.eclipse.jetty.io.ManagedSelector$$Lambda$5/597255128@3abbfa04\r\njava.util.concurrent.ExecutionException: java.lang.NullPointerException\r\n\tat org.eclipse.jetty.client.util.FutureResponseListener.getResult(FutureResponseListener.java:118)\r\n\tat org.eclipse.jetty.client.util.FutureResponseListener.get(FutureResponseListener.java:101)\r\n\tat org.eclipse.jetty.client.HttpRequest.send(HttpRequest.java:652)\r\n\tat org.eclipse.jetty.client.HttpClient.GET(HttpClient.java:342)\r\n\tat org.eclipse.jetty.client.HttpClient.GET(HttpClient.java:327)\r\n\tat com.esq.rmm.plugin.jetty9client.Application.main(Application.java:79)\r\nCaused by: java.lang.NullPointerException\r\n\tat org.eclipse.jetty.io.ssl.SslConnection.toConnectionString(SslConnection.java:315)\r\n\tat org.eclipse.jetty.io.AbstractEndPoint.toConnectionString(AbstractEndPoint.java:469)\r\n\tat org.eclipse.jetty.io.AbstractEndPoint.toString(AbstractEndPoint.java:438)\r\n\tat org.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.toString(SslConnection.java:1141)\r\n\tat java.util.Formatter$FormatSpecifier.printString(Formatter.java:2886)\r\n\tat java.util.Formatter$FormatSpecifier.print(Formatter.java:2763)\r\n\tat java.util.Formatter.format(Formatter.java:2520)\r\n\tat java.util.Formatter.format(Formatter.java:2455)\r\n\tat java.lang.String.format(String.java:2940)\r\n\tat org.eclipse.jetty.io.AbstractConnection.toString(AbstractConnection.java:264)\r\n\tat java.lang.String.valueOf(String.java:2994)\r\n\tat org.eclipse.jetty.util.log.StdErrLog.format(StdErrLog.java:553)\r\n\tat org.eclipse.jetty.util.log.StdErrLog.format(StdErrLog.java:442)\r\n\tat org.eclipse.jetty.util.log.StdErrLog.debug(StdErrLog.java:406)\r\n\tat org.eclipse.jetty.client.http.HttpClientTransportOverHTTP.newConnection(HttpClientTransportOverHTTP.java:59)\r\n\tat org.eclipse.jetty.io.ssl.SslClientConnectionFactory.newConnection(SslClientConnectionFactory.java:67)\r\n\tat org.eclipse.jetty.client.AbstractHttpClientTransport$ClientSelectorManager.newConnection(AbstractHttpClientTransport.java:191)\r\n\tat org.eclipse.jetty.io.ManagedSelector.createEndPoint(ManagedSelector.java:488)\r\n\tat org.eclipse.jetty.io.ManagedSelector.access$1700(ManagedSelector.java:60)\r\n\tat org.eclipse.jetty.io.ManagedSelector$CreateEndPoint.run(ManagedSelector.java:667)\r\n\tat org.eclipse.jetty.util.thread.Invocable.invokePreferred(Invocable.java:122)\r\n\tat org.eclipse.jetty.util.thread.strategy.ExecutingExecutionStrategy.invoke(ExecutingExecutionStrategy.java:58)\r\n\tat org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume(ExecuteProduceConsume.java:201)\r\n\tat org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produce(ExecuteProduceConsume.java:97)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:672)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:590)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\n```", "commits": {}, "title": "HttpClient hangs when logging level in DEBUG", "created": "2017-03-23 11:59:43", "user": "megaza", "url": "https://github.com/eclipse/jetty.project/issues/1419", "commitsDetails": [], "ttf": 69.00027777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug", "High Priority"], "user": "gregw", "filteredCommits": ["823cbe1cd4312d50b19d00c590e27997cdee592e", "ea39cbef57e5a31602e61920b056f46ffb847209", "00b42ca5eea15a84cfde07682344eadf10f708c8", "7a6f2860e161e39a9fe05ee4766e09283f8205c5"], "commits": {"ea39cbef57e5a31602e61920b056f46ffb847209": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "00b42ca5eea15a84cfde07682344eadf10f708c8": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "7a6f2860e161e39a9fe05ee4766e09283f8205c5": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "823cbe1cd4312d50b19d00c590e27997cdee592e": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "50c5e7c93e109efc7b2d254118410ec25d11ed6a": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2017-03-22 23:11:24", "commitsDetails": [{"commitMessage": "Issue #1418 update after review\n", "commitParents": ["dc759db0655e0453c0991d3f28d15e7ff927f2e8"], "commitHash": "ea39cbef57e5a31602e61920b056f46ffb847209", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpChannelState.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.unhandle()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.onReadPossible()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "ea39cbef57e5a31602e61920b056f46ffb847209 tags/jetty-9.4.4.v20170410~23", "commitUser": "gregw", "authoredDateTime": "2017-03-30 19:29:26", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 3, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannelState.java", "insertions": 2, "deletions": 1}], "commitDateTime": "2017-03-30 19:29:26", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1418\n\nImproved async handling to avoid race of setWriteListener->handle with async read callback.\nThe async read callback now calls into the HttpChannelState with a new onReadPossible() method.\nA more detailed state machine is now kept for async reads, with and additional state for using\nthe handler thread to produce more content.\n", "commitParents": ["08ee1b62d483637ce1dfac0c4248e1ab66696a86"], "commitHash": "00b42ca5eea15a84cfde07682344eadf10f708c8", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpInput.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpInput.failed(java.lang.Throwable)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInput.addContent(org.eclipse.jetty.server.HttpInput$Content)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInput.prependContent(org.eclipse.jetty.server.HttpInput$Content)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpConnection.AsyncReadCallback.succeeded()", "DEL": 1, "INS": 1, "UPD": 1, "MOV": 2, "TOT": 5}]}, {"spoonFilePath": "HttpChannelState.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState", "DEL": 1, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.onReadPossible()", "DEL": 2, "INS": 3, "UPD": 1, "MOV": 9, "TOT": 15}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.upgrade()", "DEL": 1, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.onReadEof()", "DEL": 2, "INS": 1, "UPD": 1, "MOV": 1, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.onReadReady()", "DEL": 3, "INS": 1, "UPD": 3, "MOV": 11, "TOT": 18}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.isReadPossible()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.onDataAvailable()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.AsyncRead", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.Action", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.unhandle()", "DEL": 2, "INS": 2, "UPD": 3, "MOV": 11, "TOT": 18}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.handling()", "DEL": 1, "INS": 1, "UPD": 2, "MOV": 6, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.toStringLocked()", "DEL": 1, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.recycle()", "DEL": 1, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.onReadUnready()", "DEL": 1, "INS": 1, "UPD": 2, "MOV": 6, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.Interest", "DEL": 1, "INS": 0, "UPD": 6, "MOV": 5, "TOT": 12}]}, {"spoonFilePath": "FileSessionManagerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.session.FileSessionManagerTest.testDeleteOfOlderFiles()", "DEL": 3, "INS": 0, "UPD": 3, "MOV": 3, "TOT": 9}]}, {"spoonFilePath": "HttpChannel.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannel.handle()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpInputTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpInputTest.before().2.onReadPossible()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInputTest.testAsyncRead()", "DEL": 0, "INS": 0, "UPD": 6, "MOV": 2, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInputTest.testAsyncError()", "DEL": 0, "INS": 0, "UPD": 4, "MOV": 2, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInputTest.before().2.onDataAvailable()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInputTest.before().2.onReadUnready()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInputTest.testAsyncEOF()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInputTest.testAsyncReadEOF()", "DEL": 0, "INS": 0, "UPD": 5, "MOV": 2, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInputTest.before().2.onReadReady()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInputTest.1.onAllDataRead()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInputTest.1.onDataAvailable()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInputTest.1.onError(java.lang.Throwable)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInputTest.testAsyncEmpty()", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 0, "TOT": 3}]}, {"spoonFilePath": "HttpInputAsyncStateTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpInputAsyncStateTest.before().2.onReadPossible()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}], "nameRev": "00b42ca5eea15a84cfde07682344eadf10f708c8 tags/jetty-9.4.4.v20170410~38", "commitUser": "gregw", "authoredDateTime": "2017-03-23 15:55:20", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 6, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpInput.java", "insertions": 3, "deletions": 3}, {"lines": 59, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/HttpInputTest.java", "insertions": 33, "deletions": 26}, {"lines": 4, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/HttpInputAsyncStateTest.java", "insertions": 2, "deletions": 2}, {"lines": 232, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannelState.java", "insertions": 154, "deletions": 78}, {"lines": 6, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannel.java", "insertions": 6, "deletions": 0}, {"lines": 4, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpConnection.java", "insertions": 1, "deletions": 3}, {"lines": 6, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/session/FileSessionManagerTest.java", "insertions": 3, "deletions": 3}], "commitDateTime": "2017-03-23 15:58:16", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1418 updates after review\n", "commitParents": ["ea39cbef57e5a31602e61920b056f46ffb847209"], "commitHash": "7a6f2860e161e39a9fe05ee4766e09283f8205c5", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpInput.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpInput.failed(java.lang.Throwable)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInput.addContent(org.eclipse.jetty.server.HttpInput$Content)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInput.prependContent(org.eclipse.jetty.server.HttpInput$Content)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInput.read(byte[],int,int)", "DEL": 1, "INS": 3, "UPD": 0, "MOV": 1, "TOT": 5}]}, {"spoonFilePath": "AsyncContextEvent.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.AsyncContextEvent.hasTimeoutTask()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpInputTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpInputTest.before().2.onDataAvailable()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "HttpChannelState.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.unhandle()", "DEL": 23, "INS": 14, "UPD": 3, "MOV": 14, "TOT": 54}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.handling()", "DEL": 0, "INS": 5, "UPD": 1, "MOV": 0, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.onReadUnready()", "DEL": 2, "INS": 1, "UPD": 3, "MOV": 4, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.recycle()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.upgrade()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.onRead(boolean)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.onContentAdded()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.onReadReady()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.AsyncRead", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.onDataAvailable()", "DEL": 3, "INS": 0, "UPD": 6, "MOV": 3, "TOT": 12}]}, {"spoonFilePath": "HttpInputAsyncStateTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpInputAsyncStateTest.before().2.onDataAvailable()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}], "nameRev": "7a6f2860e161e39a9fe05ee4766e09283f8205c5 tags/jetty-9.4.4.v20170410~22", "commitUser": "gregw", "authoredDateTime": "2017-03-30 21:59:23", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 4, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/HttpInputTest.java", "insertions": 2, "deletions": 2}, {"lines": 15, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpInput.java", "insertions": 9, "deletions": 6}, {"lines": 4, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/HttpInputAsyncStateTest.java", "insertions": 2, "deletions": 2}, {"lines": 132, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannelState.java", "insertions": 71, "deletions": 61}, {"lines": 5, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/AsyncContextEvent.java", "insertions": 5, "deletions": 0}], "commitDateTime": "2017-03-30 21:59:23", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1418 updates after review\n", "commitParents": ["7a6f2860e161e39a9fe05ee4766e09283f8205c5"], "commitHash": "50c5e7c93e109efc7b2d254118410ec25d11ed6a", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpInput.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpInput.read(byte[],int,int)", "DEL": 3, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 4}]}, {"spoonFilePath": "HttpChannelState.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.onReadUnready()", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 1, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.onRead(boolean)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "50c5e7c93e109efc7b2d254118410ec25d11ed6a tags/jetty-9.4.4.v20170410~21", "commitUser": "gregw", "authoredDateTime": "2017-03-31 08:43:15", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 5, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpInput.java", "insertions": 1, "deletions": 4}, {"lines": 17, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannelState.java", "insertions": 1, "deletions": 16}], "commitDateTime": "2017-03-31 08:43:15", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1418 simplification after review\n", "commitParents": ["927bf97546028cefabcd494ba702974445875491"], "commitHash": "823cbe1cd4312d50b19d00c590e27997cdee592e", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpChannelState.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.unhandle()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.handling()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.onReadUnready()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.onContentAdded()", "DEL": 3, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.onReadReady()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.AsyncRead", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "823cbe1cd4312d50b19d00c590e27997cdee592e tags/jetty-9.4.4.v20170410~19", "commitUser": "gregw", "authoredDateTime": "2017-03-31 11:10:10", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 11, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannelState.java", "insertions": 0, "deletions": 11}], "commitDateTime": "2017-03-31 11:53:37", "spoonStatsSkippedReason": ""}], "title": "setWriteListener causes race", "spoonStatsSummary": {"spoonMethodsChanged": 24, "DEL": 54, "INS": 42, "UPD": 51, "MOV": 74, "TOT": 221, "spoonFilesChanged": 5}, "gitStatsSummary": {"lines": 414, "insertions": 251, "gitFilesChange": 5, "deletions": 163}, "closed": "2017-04-05 00:25:17", "statsSkippedReason": "", "body": "Another variation of #1047 has been detected.\r\n\r\nIf `HttpInput.setReadListener` is first called from a container dispatched thread when there is no input available, then when the container dispatched thread eventually calls `unhandle`, interest in filling will be set with a call to `channel.asyncReadFillInterested()`\r\n\r\nThen is `HttpOutput.setWriteListener` is called from a **non** container dispatched thread, then because the channel is in `ASYNC_WAIT` state, it is woken up so that `onWritePossible` can be called for the first time. This is done by dispatching a thread to call `channel.handle`.\r\n\r\nWe now have a race between the actual execution of the `channel.handle` and possible arrival of a [succeeded callback](https://github.com/eclipse/jetty.project/blob/jetty-9.4.3.v20170317/jetty-server/src/main/java/org/eclipse/jetty/server/HttpConnection.java#L626-L632) for the `asyncReadFillInterested` call.\r\n\r\nThis race has at least two bad outcome.  Firstly the [succeeded callback](https://github.com/eclipse/jetty.project/blob/jetty-9.4.3.v20170317/jetty-server/src/main/java/org/eclipse/jetty/server/HttpConnection.java#L626-L632) does a call to `fillAndParseForContent`, which is not protected by mutual exclusion, so it may enter the parse together with the thread that calls the `handle` method and ends up doing a call to the application code that does a `read()`.  The parser is not reentrant, so this can result in arbitrary corruption while parsing.\r\n\r\nSecondly, if the call to `fillAndParseForContent` returns false, the succeeded callback does not know if this is because insufficient data has been received to be content or if the content was received but the app decided it does not yet need to read anymore.  So the callback may then call `channel.asyncReadFillInterested()` as it guesses it needs more data.    However, the other thread may have already called unhandle and registered fill interest, so a Pending read exception may be generated.\r\n\r\n\r\n\r\n\r\n\r\n\r\n", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.HttpChannelState.recycle()", "org.eclipse.jetty.server.HttpChannelState.upgrade()", "org.eclipse.jetty.server.HttpInput.failed(java.lang.Throwable)", "org.eclipse.jetty.server.HttpChannelState.onContentAdded()", "org.eclipse.jetty.server.HttpChannelState.onReadReady()", "org.eclipse.jetty.server.HttpChannelState.isReadPossible()", "org.eclipse.jetty.server.HttpChannel.handle()", "org.eclipse.jetty.server.HttpInput.addContent(org.eclipse.jetty.server.HttpInput$Content)", "org.eclipse.jetty.server.HttpChannelState.onReadUnready()", "org.eclipse.jetty.server.HttpChannelState.Action", "org.eclipse.jetty.server.AsyncContextEvent.hasTimeoutTask()", "org.eclipse.jetty.server.HttpChannelState.Interest", "org.eclipse.jetty.server.HttpChannelState", "org.eclipse.jetty.server.HttpConnection.AsyncReadCallback.succeeded()", "org.eclipse.jetty.server.HttpChannelState.onReadPossible()", "org.eclipse.jetty.server.HttpChannelState.onReadEof()", "org.eclipse.jetty.server.HttpInput.prependContent(org.eclipse.jetty.server.HttpInput$Content)", "org.eclipse.jetty.server.HttpChannelState.onDataAvailable()", "org.eclipse.jetty.server.HttpChannelState.AsyncRead", "org.eclipse.jetty.server.HttpChannelState.unhandle()", "org.eclipse.jetty.server.HttpChannelState.handling()", "org.eclipse.jetty.server.HttpChannelState.toStringLocked()", "org.eclipse.jetty.server.HttpChannelState.onRead(boolean)", "org.eclipse.jetty.server.HttpInput.read(byte[],int,int)"], "ttf": 13.000277777777777, "numCommits": 4, "url": "https://github.com/eclipse/jetty.project/issues/1418"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "blop", "filteredCommits": ["a9334560890aa20c5456a2071b7fd2d9603f6955", "57e86c5c415d79999af4db4e38ae72fa944d3487"], "commits": {"57e86c5c415d79999af4db4e38ae72fa944d3487": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "a9334560890aa20c5456a2071b7fd2d9603f6955": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2017-03-22 16:11:40", "commitsDetails": [{"commitMessage": "Issue #1416 GzipHandler If-Match\n", "commitParents": ["ca750cf582b9ad6cf9108a59862719eb2b77b947"], "commitHash": "57e86c5c415d79999af4db4e38ae72fa944d3487", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpFields.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.HttpFields.Itr.nextIndex()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.HttpFields.Itr.previousIndex()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.HttpFields.listIterator()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.HttpFields.Itr.previous()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.HttpFields.Itr.hasPrevious()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.HttpFields.Itr.add(org.eclipse.jetty.http.HttpField)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.HttpFields.Itr.set(org.eclipse.jetty.http.HttpField)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpFieldsTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.HttpFieldsTest.testIteration()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "GzipHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 2, "INS": 4, "UPD": 4, "MOV": 5, "TOT": 15}]}], "nameRev": "57e86c5c415d79999af4db4e38ae72fa944d3487 tags/jetty-9.4.7.v20170914~35", "commitUser": "gregw", "authoredDateTime": "2017-09-05 18:31:56", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 52, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/HttpFields.java", "insertions": 51, "deletions": 1}, {"lines": 67, "filePath": "jetty-http/src/test/java/org/eclipse/jetty/http/HttpFieldsTest.java", "insertions": 67, "deletions": 0}, {"lines": 28, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/gzip/GzipHandler.java", "insertions": 17, "deletions": 11}], "commitDateTime": "2017-09-05 18:31:56", "spoonStatsSkippedReason": ""}, {"commitMessage": "update etags for all methods #1416\n\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\n", "commitParents": ["74f5b9898fbb122867752a8bdb635a9e0e12a8f6"], "commitHash": "a9334560890aa20c5456a2071b7fd2d9603f6955", "commitSpoonAstDiffStats": [{"spoonFilePath": "GzipHandlerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.gzip.GzipHandlerTest", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "GzipHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}]}], "nameRev": "a9334560890aa20c5456a2071b7fd2d9603f6955 tags/jetty-9.4.9.v20180320~36^2~3", "commitUser": "gregw", "authoredDateTime": "2018-03-13 14:07:37", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 50, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/GzipHandlerTest.java", "insertions": 49, "deletions": 1}, {"lines": 44, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/gzip/GzipHandler.java", "insertions": 22, "deletions": 22}, {"lines": 42, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/handler/gzip/GzipHandlerTest.java", "insertions": 0, "deletions": 42}], "commitDateTime": "2018-03-13 14:07:37", "spoonStatsSkippedReason": ""}], "title": "GzipHandler generated ETag suffix has problems with If-Match header logic", "spoonStatsSummary": {"spoonMethodsChanged": 8, "DEL": 2, "INS": 11, "UPD": 4, "MOV": 6, "TOT": 23, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 124, "insertions": 90, "gitFilesChange": 2, "deletions": 34}, "closed": "2018-03-13 03:08:24", "statsSkippedReason": "", "body": "There is an issue in Jetty 9.4.3.v20170317.\r\n\r\nWhen using the GzipHandler, ETag are suffixed with a '--gzip'.\r\nWhen the client is using either If-Match or If-None-Match headers, GzipHandler should cut that suffix so that the ETag is back to it's original value further in the handling chain.\r\n\r\nIt's currently only handled for If-None-Match : \r\nhttps://github.com/eclipse/jetty.project/blob/jetty-9.4.x/jetty-server/src/main/java/org/eclipse/jetty/server/handler/gzip/GzipHandler.java#L538\r\n\r\nHandling should be added for If-Match as well, for the exact same reason.\r\n\r\nThanks", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server/handler/gzip", "jetty-http/src/main/java/org/eclipse/jetty/http"], "changesInPackagesSPOON": ["org.eclipse.jetty.http.HttpFields.Itr.nextIndex()", "org.eclipse.jetty.http.HttpFields.Itr.previousIndex()", "org.eclipse.jetty.http.HttpFields.listIterator()", "org.eclipse.jetty.http.HttpFields.Itr.set(org.eclipse.jetty.http.HttpField)", "org.eclipse.jetty.http.HttpFields.Itr.hasPrevious()", "org.eclipse.jetty.http.HttpFields.Itr.add(org.eclipse.jetty.http.HttpField)", "org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "org.eclipse.jetty.http.HttpFields.Itr.previous()"], "ttf": 355.0002777777778, "numCommits": 2, "url": "https://github.com/eclipse/jetty.project/issues/1416"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "mrossi975", "filteredCommits": ["f28a7776627a031b57fb83a614b6ee6a4c8afc67"], "commits": {"f28a7776627a031b57fb83a614b6ee6a4c8afc67": {"commitUser": "sbordet", "commitGHEventType": "closed"}}, "created": "2017-03-16 14:48:07", "commitsDetails": [{"commitMessage": "Fixes #1404 - Jetty 9.4.2 does not support constructors with varargs in XML config files.\n\nThe issue was caused by a missing @Name annotation on the \"protocols\" parameter.\n", "commitParents": ["63ff4af6b86a0abe12d5e9b6048a83efa1e1ced6"], "commitHash": "f28a7776627a031b57fb83a614b6ee6a4c8afc67", "commitSpoonAstDiffStats": [{"spoonFilePath": "HTTP2ServerConnectionFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.server.HTTP2ServerConnectionFactory", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HTTP2CServerConnectionFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.server.HTTP2CServerConnectionFactory", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AbstractHTTP2ServerConnectionFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.server.AbstractHTTP2ServerConnectionFactory", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "f28a7776627a031b57fb83a614b6ee6a4c8afc67 tags/jetty-9.4.5.v20170502~37", "commitUser": "sbordet", "authoredDateTime": "2017-04-21 11:06:49", "commitGHEventType": "closed", "commitGitStats": [{"lines": 2, "filePath": "jetty-http2/http2-server/src/main/java/org/eclipse/jetty/http2/server/AbstractHTTP2ServerConnectionFactory.java", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-http2/http2-server/src/main/java/org/eclipse/jetty/http2/server/HTTP2CServerConnectionFactory.java", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-http2/http2-server/src/main/java/org/eclipse/jetty/http2/server/HTTP2ServerConnectionFactory.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2017-04-21 11:06:49", "spoonStatsSkippedReason": ""}], "title": "Jetty 9.4.2 does not support constructors with varargs in XML config files", "spoonStatsSummary": {"spoonMethodsChanged": 3, "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3, "spoonFilesChanged": 3}, "gitStatsSummary": {"lines": 6, "insertions": 3, "gitFilesChange": 3, "deletions": 3}, "closed": "2017-04-21 09:07:08", "statsSkippedReason": "", "body": "if you try to put the following config in jetty-http2.xml:\r\n\r\nMy config looks like this:\r\n\r\n```xml\r\n<Configure id=\"sslConnector\" class=\"org.eclipse.jetty.server.ServerConnector\">\r\n  <Call name=\"addConnectionFactory\">\r\n    <Arg>\r\n      <New class=\"org.eclipse.jetty.http2.server.HTTP2ServerConnectionFactory\">\r\n        <Arg name=\"config\"><Ref refid=\"sslHttpConfig\"/></Arg>\r\n        <Arg>\r\n                        <Array type=\"String\">\r\n                        <Item>h2</Item>\r\n                        <Item>h2-17</Item>\r\n                        <Item>h2-16</Item>\r\n                        <Item>h2-15</Item>\r\n                        <Item>h2-14</Item>\r\n                </Array>\r\n                </Arg>\r\n        <Set name=\"maxConcurrentStreams\"><Property name=\"jetty.http2.maxConcurrentStreams\" deprecated=\"http2.maxConcurrentStreams\" default=\"1024\"/></Set>\r\n        <Set name=\"initialStreamRecvWindow\"><Property name=\"jetty.http2.initialStreamRecvWindow\" default=\"65535\"/></Set>\r\n      </New>\r\n    </Arg>\r\n  </Call>\r\n\r\n  <Ref refid=\"sslContextFactory\">\r\n    <Set name=\"CipherComparator\">\r\n      <Get class=\"org.eclipse.jetty.http2.HTTP2Cipher\" name=\"COMPARATOR\"/>\r\n    </Set>\r\n    <Set name=\"useCipherSuitesOrder\">true</Set>\r\n  </Ref>\r\n\r\n</Configure>\r\n```\r\n\r\nYou get the following stacktrace\r\n\r\n```\r\njava.security.PrivilegedActionException: null\r\n        at java.security.AccessController.doPrivileged(Native Method)\r\n        at org.eclipse.jetty.xml.XmlConfiguration.main(XmlConfiguration.java:1437)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.eclipse.jetty.start.Main.invokeMain(Main.java:222)\r\n        at org.eclipse.jetty.start.Main.start(Main.java:486)\r\n        at org.eclipse.jetty.start.Main.main(Main.java:79)\r\nCaused by: java.lang.reflect.InvocationTargetException: null\r\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n        at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n        at org.eclipse.jetty.util.TypeUtil.construct(TypeUtil.java:663)\r\n        at org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration.newObj(XmlConfiguration.java:784)\r\n        at org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration.itemValue(XmlConfiguration.java:1235)\r\n        at org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration.value(XmlConfiguration.java:1140)\r\n        at org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration.access$500(XmlConfiguration.java:274)\r\n        at org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration$AttrOrElementNode.getList(XmlConfiguration.java:1368)\r\n        at org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration$AttrOrElementNode.getList(XmlConfiguration.java:1343)\r\n        at org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration.call(XmlConfiguration.java:706)\r\n        at org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration.configure(XmlConfiguration.java:417)\r\n        at org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration.configure(XmlConfiguration.java:358)\r\n        at org.eclipse.jetty.xml.XmlConfiguration.configure(XmlConfiguration.java:259)\r\n        at org.eclipse.jetty.xml.XmlConfiguration$1.run(XmlConfiguration.java:1499)\r\n        at org.eclipse.jetty.xml.XmlConfiguration$1.run(XmlConfiguration.java:1438)\r\n        ... 9 common frames omitted\r\nCaused by: java.lang.NullPointerException: null\r\n        at org.eclipse.jetty.server.AbstractConnectionFactory.<init>(AbstractConnectionFactory.java:62)\r\n        at org.eclipse.jetty.http2.server.AbstractHTTP2ServerConnectionFactory.<init>(AbstractHTTP2ServerConnectionFactory.java:59)\r\n        at org.eclipse.jetty.http2.server.HTTP2ServerConnectionFactory.<init>(HTTP2ServerConnectionFactory.java:58)\r\n        ... 26 common frames omitted\r\n```\r\n\r\nCould it be that the problem is supporting constructors with varargs?\r\n\r\n```\r\npublic HTTP2ServerConnectionFactory(@Name(\"config\") HttpConfiguration httpConfiguration,String... protocols)\r\n```", "changesInPackagesGIT": ["jetty-http2/http2-server/src/main/java/org/eclipse/jetty/http2/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.http2.server.HTTP2CServerConnectionFactory", "org.eclipse.jetty.http2.server.HTTP2ServerConnectionFactory", "org.eclipse.jetty.http2.server.AbstractHTTP2ServerConnectionFactory"], "ttf": 35.000277777777775, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1404"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "bjorncs", "filteredCommits": ["44f9766ddcc9e10a4e25f5bc43c285850b80d425"], "commits": {"44f9766ddcc9e10a4e25f5bc43c285850b80d425": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2017-03-15 14:30:05", "commitsDetails": [{"commitMessage": "Issue #1401 recycle write listener\n", "commitParents": ["f775187538b6b4182055a747dbe692e2bb6082d6"], "commitHash": "44f9766ddcc9e10a4e25f5bc43c285850b80d425", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpOutput.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpOutput.recycle()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}]}], "nameRev": "44f9766ddcc9e10a4e25f5bc43c285850b80d425 tags/jetty-9.3.17.v20170317~2", "commitUser": "gregw", "authoredDateTime": "2017-03-17 09:22:27", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpOutput.java", "insertions": 2, "deletions": 0}], "commitDateTime": "2017-03-17 09:22:27", "spoonStatsSkippedReason": ""}], "title": "HttpOutput.recycle() does not clear the write listener", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 2, "insertions": 2, "gitFilesChange": 1, "deletions": 0}, "closed": "2017-03-16 22:22:53", "statsSkippedReason": "", "body": "During an investigation of a heap dump we discovered that old instances of `WriteListener` was kept alive by recycled/reset `HttpOutput` instances. The `HttpOutput` instances had `_state == OutputState.OPEN`.\r\n\r\nObserved in Jetty 9.4.2", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.HttpOutput.recycle()"], "ttf": 1.0002777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1401"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug", "Enhancement"], "user": "joakime", "filteredCommits": ["f293f637c8d5dc9bcda3c7dea4f378919f2759bb", "3168e2b1e5399b5a00a77c58d4a8ef86c4c48d61"], "commits": {"3168e2b1e5399b5a00a77c58d4a8ef86c4c48d61": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "f293f637c8d5dc9bcda3c7dea4f378919f2759bb": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2017-03-13 18:09:59", "commitsDetails": [{"commitMessage": "Issue #1394 - hardcoding locale in surefire testing too\n", "commitParents": ["f293f637c8d5dc9bcda3c7dea4f378919f2759bb"], "commitHash": "3168e2b1e5399b5a00a77c58d4a8ef86c4c48d61", "commitSpoonAstDiffStats": [], "nameRev": "3168e2b1e5399b5a00a77c58d4a8ef86c4c48d61 tags/jetty-9.3.17.v20170317~7", "commitUser": "joakime", "authoredDateTime": "2017-03-13 11:17:53", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "pom.xml", "insertions": 1, "deletions": 1}], "commitDateTime": "2017-03-13 11:17:53", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1394 - fix default character encoding for surefire testing\n", "commitParents": ["95feaa61984e02e521a470aa17c2b4129fb82cc0"], "commitHash": "f293f637c8d5dc9bcda3c7dea4f378919f2759bb", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpClientURITest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpClientURITest.testIDNRedirect()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "f293f637c8d5dc9bcda3c7dea4f378919f2759bb tags/jetty-9.3.17.v20170317~8", "commitUser": "joakime", "authoredDateTime": "2017-03-13 11:10:10", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "pom.xml", "insertions": 1, "deletions": 1}, {"lines": 3, "filePath": "jetty-client/src/test/java/org/eclipse/jetty/client/HttpClientURITest.java", "insertions": 2, "deletions": 1}], "commitDateTime": "2017-03-13 11:10:10", "spoonStatsSkippedReason": ""}], "title": "Default OS Locale/Encoding/Charset can cause test failures", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0, "insertions": 0, "gitFilesChange": 0, "deletions": 0}, "closed": "2017-03-13 19:41:13", "statsSkippedReason": "", "body": "An example, from Windows (CP1250 encoding) ...\r\n\r\norg.eclipse.jetty.client.HttpClientURITest.testIDNRedirect[0]\r\n  expected:<http://[\u00d0\u00bf\u00d1\u0080\u00d0\u00b8\u00d0\u00bc\u00d0\u00b5\u00d1\u0080.\u00d1\u0080\u00d1\u0084]> but was:<http://[??????.??]>\r\n\r\nWe should correct the surefire plugin argLine to hardcode the encoding (and locale if possible) to have a predictable set of encodings.", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 0.0002777777777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/1394"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["5f65f2916f449026ae1c07db96a32b4023b7ad50", "e25007cb7979041d3b0014c5909c2bdcb6e19e7b"], "commits": {"e25007cb7979041d3b0014c5909c2bdcb6e19e7b": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "5f65f2916f449026ae1c07db96a32b4023b7ad50": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2017-03-10 14:18:25", "commitsDetails": [{"commitMessage": "Issue #1390 - Addressing new File(URL) use in Windows\n\n+ Fixing HashLoginService to track its Config via File reference only\n  (dropping support for URL reference)\n+ Adding new `this.web-inf.path` property that jetty-web.xml can use\n", "commitParents": ["5933f70ae6204971b9e4cfead063e16723c59998"], "commitHash": "e25007cb7979041d3b0014c5909c2bdcb6e19e7b", "commitSpoonAstDiffStats": [{"spoonFilePath": "JettyWebXmlConfiguration.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.JettyWebXmlConfiguration", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.webapp.JettyWebXmlConfiguration.setupXmlConfiguration(org.eclipse.jetty.xml.XmlConfiguration,org.eclipse.jetty.util.resource.Resource)", "DEL": 1, "INS": 6, "UPD": 2, "MOV": 1, "TOT": 10}]}, {"spoonFilePath": "HashLoginService.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.security.HashLoginService.getConfig()", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 1, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.security.HashLoginService.setConfig(java.lang.String)", "DEL": 1, "INS": 2, "UPD": 1, "MOV": 2, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.security.HashLoginService.doStart()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.security.HashLoginService.loadRoleInfo(org.eclipse.jetty.security.MappedLoginService.KnownUser)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.security.HashLoginService", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.security.HashLoginService.HashKnownUser", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.security.HashLoginService.getConfig(java.lang.String)", "DEL": 2, "INS": 2, "UPD": 0, "MOV": 1, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.security.HashLoginService.loadUserInfo(java.lang.String)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "TestJettyOSGiBootWithJsp.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.osgi.test.TestJettyOSGiBootWithJsp.configureJettyHomeAndPort(boolean,java.lang.String)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.osgi.test.TestJettyOSGiBootWithJsp.configure()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "e25007cb7979041d3b0014c5909c2bdcb6e19e7b tags/jetty-9.3.17.v20170317~10", "commitUser": "joakime", "authoredDateTime": "2017-03-10 12:47:06", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 19, "filePath": "jetty-webapp/src/main/java/org/eclipse/jetty/webapp/JettyWebXmlConfiguration.java", "insertions": 10, "deletions": 9}, {"lines": 17, "filePath": "jetty-osgi/test-jetty-osgi/src/test/java/org/eclipse/jetty/osgi/test/TestJettyOSGiBootWithJsp.java", "insertions": 9, "deletions": 8}, {"lines": 35, "filePath": "jetty-security/src/main/java/org/eclipse/jetty/security/HashLoginService.java", "insertions": 23, "deletions": 12}, {"lines": 2, "filePath": "jetty-osgi/test-jetty-osgi/pom.xml", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-osgi/test-jetty-osgi/src/test/config/etc/jetty-testrealm.xml", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "tests/test-webapps/test-jetty-webapp/src/main/assembly/embedded-jetty-web-for-webbundle.xml", "insertions": 1, "deletions": 1}, {"lines": 9, "filePath": "jetty-osgi/test-jetty-osgi/src/test/resources/log4j.properties", "insertions": 6, "deletions": 3}], "commitDateTime": "2017-03-10 12:47:06", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1390\n\nRemove this.web_url.path\n", "commitParents": ["a4cfd8a7a59de15d9aea43c5fd73c64a934a93c2"], "commitHash": "5f65f2916f449026ae1c07db96a32b4023b7ad50", "commitSpoonAstDiffStats": [{"spoonFilePath": "PropertyUserStore.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.security.PropertyUserStore.setConfig(java.lang.String)", "DEL": 2, "INS": 1, "UPD": 2, "MOV": 2, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.security.PropertyUserStore.getConfig()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 1, "TOT": 3}]}, {"spoonFilePath": "JettyWebXmlConfiguration.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.JettyWebXmlConfiguration", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.webapp.JettyWebXmlConfiguration.setupXmlConfiguration(org.eclipse.jetty.xml.XmlConfiguration,org.eclipse.jetty.util.resource.Resource)", "DEL": 4, "INS": 3, "UPD": 4, "MOV": 4, "TOT": 15}]}, {"spoonFilePath": "HashLoginService.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.security.HashLoginService.getConfig()", "DEL": 2, "INS": 1, "UPD": 0, "MOV": 3, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.security.HashLoginService.setConfig(java.lang.String)", "DEL": 3, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.security.HashLoginService", "DEL": 1, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.security.HashLoginService.doStart()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.security.HashLoginService.getConfig(java.lang.String)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 2, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.security.HashLoginService.getConfigResource()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}]}], "nameRev": "5f65f2916f449026ae1c07db96a32b4023b7ad50 tags/jetty-9.4.5.v20170502~2^2~2", "commitUser": "janbartel", "authoredDateTime": "2017-05-01 17:37:05", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 17, "filePath": "jetty-webapp/src/main/java/org/eclipse/jetty/webapp/JettyWebXmlConfiguration.java", "insertions": 10, "deletions": 7}, {"lines": 34, "filePath": "jetty-security/src/main/java/org/eclipse/jetty/security/HashLoginService.java", "insertions": 9, "deletions": 25}, {"lines": 4, "filePath": "tests/test-webapps/test-jetty-webapp/src/main/assembly/embedded-jetty-web-for-webbundle.xml", "insertions": 3, "deletions": 1}, {"lines": 3, "filePath": "tests/test-webapps/test-jetty-webapp/src/main/assembly/web-bundle.xml", "insertions": 3, "deletions": 0}, {"lines": 25, "filePath": "jetty-security/src/main/java/org/eclipse/jetty/security/PropertyUserStore.java", "insertions": 19, "deletions": 6}], "commitDateTime": "2017-05-01 17:37:05", "spoonStatsSkippedReason": ""}], "title": "HashLoginService and \"this.web-inf.url\" property are incompatible", "spoonStatsSummary": {"spoonMethodsChanged": 13, "DEL": 20, "INS": 24, "UPD": 21, "MOV": 18, "TOT": 83, "spoonFilesChanged": 3}, "gitStatsSummary": {"lines": 130, "insertions": 71, "gitFilesChange": 3, "deletions": 59}, "closed": "2017-05-01 16:08:07", "statsSkippedReason": "", "body": "Looks like a funky URI is being passed into the HashLoginService.\r\nThis only shows up like this with `test-jetty-osgi`\r\n\r\n```\r\nRunning org.eclipse.jetty.osgi.test.TestJettyOSGiBootWithJsp\r\n\r\n2017-03-10 06:50:25.720:INFO::Start Level: Equinox Container: d30b2505-b0da-4433-a50e-33228b6c5c6a: Logging initialized @15625ms to org.eclipse.jetty.util.log.StdErrLog\r\n2017-03-10 06:50:26.848:WARN:oejw.WebAppContext:Start Level: Equinox Container: d30b2505-b0da-4433-a50e-33228b6c5c6a: Failed startup of context o.e.j.w.WebAppContext@404769fc{/,file:///C:/Users/joakim/AppData/Local/Temp/jetty-0.0.0.0-59801-bundleFile-_-any-5050212073621695063.dir/webapp/,UNAVAILABLE}{/test.war}\r\njava.nio.file.InvalidPathException: Illegal char <:> at index 4: file:\\C:\\Users\\joakim\\AppData\\Local\\Temp\\jetty-0.0.0.0-59801-bundleFile-_-any-5050212073621695063.dir\\webapp\\WEB-INF\\realm.properties\r\n        at sun.nio.fs.WindowsPathParser.normalize(WindowsPathParser.java:182)\r\n        at sun.nio.fs.WindowsPathParser.parse(WindowsPathParser.java:153)\r\n        at sun.nio.fs.WindowsPathParser.parse(WindowsPathParser.java:77)\r\n        at sun.nio.fs.WindowsPath.parse(WindowsPath.java:94)\r\n        at sun.nio.fs.WindowsFileSystem.getPath(WindowsFileSystem.java:255)\r\n        at java.io.File.toPath(File.java:2234)\r\n        at org.eclipse.jetty.security.PropertyUserStore.setConfigPath(PropertyUserStore.java:121)\r\n        at org.eclipse.jetty.security.HashLoginService.doStart(HashLoginService.java:189)\r\n        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n        at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:131)\r\n        at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:113)\r\n        at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113)\r\n        at org.eclipse.jetty.security.SecurityHandler.doStart(SecurityHandler.java:361)\r\n        at org.eclipse.jetty.security.ConstraintSecurityHandler.doStart(ConstraintSecurityHandler.java:448)\r\n        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n        at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:131)\r\n        at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:105)\r\n        at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113)\r\n        at org.eclipse.jetty.server.handler.ScopedHandler.doStart(ScopedHandler.java:120)\r\n        at org.eclipse.jetty.server.session.SessionHandler.doStart(SessionHandler.java:501)\r\n        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n        at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:131)\r\n        at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:105)\r\n        at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113)\r\n        at org.eclipse.jetty.server.handler.ScopedHandler.doStart(ScopedHandler.java:120)\r\n        at org.eclipse.jetty.server.handler.ContextHandler.startContext(ContextHandler.java:830)\r\n        at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:344)\r\n        at org.eclipse.jetty.webapp.WebAppContext.startWebapp(WebAppContext.java:1482)\r\n        at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1444)\r\n        at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:799)\r\n        at org.eclipse.jetty.servlet.ServletContextHandler.doStart(ServletContextHandler.java:261)\r\n        at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:542)\r\n        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n        at org.eclipse.jetty.deploy.bindings.StandardStarter.processBinding(StandardStarter.java:41)\r\n        at org.eclipse.jetty.deploy.AppLifeCycle.runBindings(AppLifeCycle.java:188)\r\n        at org.eclipse.jetty.deploy.DeploymentManager.requestAppGoal(DeploymentManager.java:499)\r\n        at org.eclipse.jetty.deploy.DeploymentManager.addApp(DeploymentManager.java:147)\r\n        at org.eclipse.jetty.osgi.boot.BundleWebAppProvider.bundleAdded(BundleWebAppProvider.java:211)\r\n        at org.eclipse.jetty.osgi.boot.BundleWebAppProvider$WebAppTracker.addingBundle(BundleWebAppProvider.java:80)\r\n        at org.osgi.util.tracker.BundleTracker$Tracked.customizerAdding(BundleTracker.java:469)\r\n        at org.osgi.util.tracker.BundleTracker$Tracked.customizerAdding(BundleTracker.java:1)\r\n        at org.osgi.util.tracker.AbstractTracked.trackAdding(AbstractTracked.java:256)\r\n        at org.osgi.util.tracker.AbstractTracked.track(AbstractTracked.java:229)\r\n        at org.osgi.util.tracker.BundleTracker$Tracked.bundleChanged(BundleTracker.java:444)\r\n        at org.eclipse.osgi.internal.framework.BundleContextImpl.dispatchEvent(BundleContextImpl.java:903)\r\n        at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)\r\n        at org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous(ListenerQueue.java:148)\r\n        at org.eclipse.osgi.internal.framework.EquinoxEventPublisher.publishBundleEventPrivileged(EquinoxEventPublisher.java:213)\r\n        at org.eclipse.osgi.internal.framework.EquinoxEventPublisher.publishBundleEvent(EquinoxEventPublisher.java:120)\r\n        at org.eclipse.osgi.internal.framework.EquinoxEventPublisher.publishBundleEvent(EquinoxEventPublisher.java:112)\r\n        at org.eclipse.osgi.internal.framework.EquinoxContainerAdaptor.publishModuleEvent(EquinoxContainerAdaptor.java:156)\r\n        at org.eclipse.osgi.container.Module.publishEvent(Module.java:476)\r\n        at org.eclipse.osgi.container.Module.start(Module.java:467)\r\n        at org.eclipse.osgi.container.ModuleContainer$ContainerStartLevel.incStartLevel(ModuleContainer.java:1620)\r\n        at org.eclipse.osgi.container.ModuleContainer$ContainerStartLevel.incStartLevel(ModuleContainer.java:1600)\r\n        at org.eclipse.osgi.container.ModuleContainer$ContainerStartLevel.doContainerStartLevel(ModuleContainer.java:1571)\r\n        at org.eclipse.osgi.container.ModuleContainer$ContainerStartLevel.dispatchEvent(ModuleContainer.java:1514)\r\n        at org.eclipse.osgi.container.ModuleContainer$ContainerStartLevel.dispatchEvent(ModuleContainer.java:1)\r\n        at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)\r\n        at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:340)\r\nDEFAULT_HTTP_PORT=59801\r\nDEFAULT_SSL_PORT=59802\r\n```", "changesInPackagesGIT": ["jetty-webapp/src/main/java/org/eclipse/jetty/webapp", "jetty-security/src/main/java/org/eclipse/jetty/security"], "changesInPackagesSPOON": ["org.eclipse.jetty.security.HashLoginService.getConfig()", "org.eclipse.jetty.security.PropertyUserStore.setConfig(java.lang.String)", "org.eclipse.jetty.security.HashLoginService.loadRoleInfo(org.eclipse.jetty.security.MappedLoginService.KnownUser)", "org.eclipse.jetty.security.HashLoginService", "org.eclipse.jetty.security.HashLoginService.doStart()", "org.eclipse.jetty.security.HashLoginService.getConfig(java.lang.String)", "org.eclipse.jetty.security.HashLoginService.getConfigResource()", "org.eclipse.jetty.security.HashLoginService.setConfig(java.lang.String)", "org.eclipse.jetty.security.HashLoginService.loadUserInfo(java.lang.String)", "org.eclipse.jetty.webapp.JettyWebXmlConfiguration.setupXmlConfiguration(org.eclipse.jetty.xml.XmlConfiguration,org.eclipse.jetty.util.resource.Resource)", "org.eclipse.jetty.security.HashLoginService.HashKnownUser", "org.eclipse.jetty.webapp.JettyWebXmlConfiguration", "org.eclipse.jetty.security.PropertyUserStore.getConfig()"], "ttf": 52.000277777777775, "numCommits": 2, "url": "https://github.com/eclipse/jetty.project/issues/1390"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["20c50424a3ae1b48cfb32c29b79498d92fe3c4fd"], "commits": {"20c50424a3ae1b48cfb32c29b79498d92fe3c4fd": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "7dc61365e4773b79acd0cf437e368657714bcd61": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2017-03-09 14:47:20", "commitsDetails": [{"commitMessage": "Issue #1387\n\nUpgraded paxexam and osgi container.\n", "commitParents": ["6102861755407813dc446f24638a4ad3a434976b"], "commitHash": "20c50424a3ae1b48cfb32c29b79498d92fe3c4fd", "commitSpoonAstDiffStats": [{"spoonFilePath": "TestJettyOSGiBootWebAppAsService.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.osgi.test.TestJettyOSGiBootWebAppAsService.configure()", "DEL": 3, "INS": 0, "UPD": 2, "MOV": 2, "TOT": 7}]}, {"spoonFilePath": "TestJettyOSGiBootContextAsService.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.osgi.test.TestJettyOSGiBootContextAsService.configure()", "DEL": 3, "INS": 0, "UPD": 2, "MOV": 2, "TOT": 7}]}, {"spoonFilePath": "TestJettyOSGiBootWithAnnotations.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.osgi.test.TestJettyOSGiBootWithAnnotations.configure()", "DEL": 2, "INS": 0, "UPD": 3, "MOV": 2, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.osgi.test.TestJettyOSGiBootWithAnnotations.assertAllBundlesActiveOrResolved()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "TestJettyOSGiBootHTTP2.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.osgi.test.TestJettyOSGiBootHTTP2", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.osgi.test.TestJettyOSGiBootHTTP2.config()", "DEL": 2, "INS": 0, "UPD": 3, "MOV": 2, "TOT": 7}]}, {"spoonFilePath": "TestJettyOSGiBootCore.java", "spoonMethods": []}, {"spoonFilePath": "TestJettyOSGiBootWithJsp.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.osgi.test.TestJettyOSGiBootWithJsp.configure()", "DEL": 4, "INS": 0, "UPD": 2, "MOV": 2, "TOT": 8}]}], "nameRev": "20c50424a3ae1b48cfb32c29b79498d92fe3c4fd tags/jetty-9.4.3.v20170317~24", "commitUser": "janbartel", "authoredDateTime": "2017-03-10 17:27:56", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 6, "filePath": "jetty-osgi/test-jetty-osgi/src/test/java/org/eclipse/jetty/osgi/test/TestJettyOSGiBootContextAsService.java", "insertions": 2, "deletions": 4}, {"lines": 8, "filePath": "jetty-osgi/test-jetty-osgi/src/test/java/org/eclipse/jetty/osgi/test/TestJettyOSGiBootHTTP2.java", "insertions": 5, "deletions": 3}, {"lines": 10, "filePath": "jetty-osgi/test-jetty-osgi/src/test/java/org/eclipse/jetty/osgi/test/TestJettyOSGiBootWithAnnotations.java", "insertions": 6, "deletions": 4}, {"lines": 2, "filePath": "jetty-osgi/test-jetty-osgi/src/test/java/org/eclipse/jetty/osgi/test/TestJettyOSGiBootCore.java", "insertions": 1, "deletions": 1}, {"lines": 28, "filePath": "jetty-osgi/test-jetty-osgi/pom.xml", "insertions": 7, "deletions": 21}, {"lines": 6, "filePath": "jetty-osgi/test-jetty-osgi/src/test/java/org/eclipse/jetty/osgi/test/TestJettyOSGiBootWithJsp.java", "insertions": 2, "deletions": 4}, {"lines": 6, "filePath": "jetty-osgi/test-jetty-osgi/src/test/resources/log4j.properties", "insertions": 3, "deletions": 3}, {"lines": 5, "filePath": "jetty-osgi/test-jetty-osgi/src/test/java/org/eclipse/jetty/osgi/test/TestJettyOSGiBootWebAppAsService.java", "insertions": 2, "deletions": 3}], "commitDateTime": "2017-03-10 17:28:42", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1387\n\nUpgraded paxexam and osgi container.\n", "commitParents": ["bd6e888be4587b2d02f991b37a255532a54e9b13"], "commitHash": "7dc61365e4773b79acd0cf437e368657714bcd61", "commitSpoonAstDiffStats": [{"spoonFilePath": "TestJettyOSGiBootWebAppAsService.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.osgi.test.TestJettyOSGiBootWebAppAsService.configure()", "DEL": 3, "INS": 0, "UPD": 2, "MOV": 2, "TOT": 7}]}, {"spoonFilePath": "TestJettyOSGiBootContextAsService.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.osgi.test.TestJettyOSGiBootContextAsService.configure()", "DEL": 3, "INS": 0, "UPD": 2, "MOV": 2, "TOT": 7}]}, {"spoonFilePath": "TestJettyOSGiBootWithAnnotations.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.osgi.test.TestJettyOSGiBootWithAnnotations.configure()", "DEL": 2, "INS": 0, "UPD": 3, "MOV": 2, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.osgi.test.TestJettyOSGiBootWithAnnotations.configureJettyHomeAndPort(java.lang.String)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.osgi.test.TestJettyOSGiBootWithAnnotations.assertAllBundlesActiveOrResolved()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "TestJettyOSGiBootHTTP2.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.osgi.test.TestJettyOSGiBootHTTP2", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.osgi.test.TestJettyOSGiBootHTTP2.config()", "DEL": 2, "INS": 0, "UPD": 3, "MOV": 2, "TOT": 7}]}, {"spoonFilePath": "TestJettyOSGiBootCore.java", "spoonMethods": []}, {"spoonFilePath": "TestJettyOSGiBootWithJsp.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.osgi.test.TestJettyOSGiBootWithJsp.configure()", "DEL": 4, "INS": 0, "UPD": 2, "MOV": 2, "TOT": 8}]}], "nameRev": "7dc61365e4773b79acd0cf437e368657714bcd61 tags/jetty-9.3.17.v20170317~15", "commitUser": "joakime", "authoredDateTime": "2017-03-10 17:27:56", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 6, "filePath": "jetty-osgi/test-jetty-osgi/src/test/java/org/eclipse/jetty/osgi/test/TestJettyOSGiBootContextAsService.java", "insertions": 2, "deletions": 4}, {"lines": 8, "filePath": "jetty-osgi/test-jetty-osgi/src/test/java/org/eclipse/jetty/osgi/test/TestJettyOSGiBootHTTP2.java", "insertions": 5, "deletions": 3}, {"lines": 12, "filePath": "jetty-osgi/test-jetty-osgi/src/test/java/org/eclipse/jetty/osgi/test/TestJettyOSGiBootWithAnnotations.java", "insertions": 7, "deletions": 5}, {"lines": 2, "filePath": "jetty-osgi/test-jetty-osgi/src/test/java/org/eclipse/jetty/osgi/test/TestJettyOSGiBootCore.java", "insertions": 1, "deletions": 1}, {"lines": 28, "filePath": "jetty-osgi/test-jetty-osgi/pom.xml", "insertions": 7, "deletions": 21}, {"lines": 6, "filePath": "jetty-osgi/test-jetty-osgi/src/test/java/org/eclipse/jetty/osgi/test/TestJettyOSGiBootWithJsp.java", "insertions": 2, "deletions": 4}, {"lines": 6, "filePath": "jetty-osgi/test-jetty-osgi/src/test/resources/log4j.properties", "insertions": 3, "deletions": 3}, {"lines": 5, "filePath": "jetty-osgi/test-jetty-osgi/src/test/java/org/eclipse/jetty/osgi/test/TestJettyOSGiBootWebAppAsService.java", "insertions": 2, "deletions": 3}], "commitDateTime": "2017-03-10 09:02:40", "spoonStatsSkippedReason": ""}], "title": "Windows and paxexam failure due to \"renaming bundle\"", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0, "insertions": 0, "gitFilesChange": 0, "deletions": 0}, "closed": "2017-03-10 14:20:33", "statsSkippedReason": "", "body": "On windows, the `test-jetty-osgi` project fails most of the time due to a \"renaming bundle\" issue.\r\n\r\n```\r\nTests run: 3, Failures: 0, Errors: 1, Skipped: 2, Time elapsed: 0.625 sec <<< FAILURE! - in org.eclipse.jetty.osgi.test.\r\nTestJettyOSGiBootWithJsp\r\ntestJspDump(org.eclipse.jetty.osgi.test.TestJettyOSGiBootWithJsp)  Time elapsed: 0.625 sec  <<< ERROR!\r\norg.osgi.framework.BundleException: Error while renaming bundle file to final location: C:\\code\\jetty\\jetty.project\\jett\r\ny-osgi\\test-jetty-osgi\\target\\1489070454311-0\\org.eclipse.osgi\\1\\0\\bundleFile\r\n        at org.eclipse.osgi.storage.Storage.getContentFile0(Storage.java:765)\r\n        at org.eclipse.osgi.storage.Storage.getContentFile(Storage.java:741)\r\n        at org.eclipse.osgi.storage.Storage.install(Storage.java:506)\r\n        at org.eclipse.osgi.internal.framework.BundleContextImpl.installBundle(BundleContextImpl.java:146)\r\n        at org.eclipse.osgi.internal.framework.BundleContextImpl.installBundle(BundleContextImpl.java:139)\r\n        at org.ops4j.pax.swissbox.framework.RemoteFrameworkImpl.installBundle(RemoteFrameworkImpl.java:130)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:346)\r\n        at sun.rmi.transport.Transport$1.run(Transport.java:200)\r\n        at sun.rmi.transport.Transport$1.run(Transport.java:197)\r\n        at java.security.AccessController.doPrivileged(Native Method)\r\n        at sun.rmi.transport.Transport.serviceCall(Transport.java:196)\r\n        at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:568)\r\n        at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:826)\r\n        at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:683)\r\n        at java.security.AccessController.doPrivileged(Native Method)\r\n        at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:682)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n        at java.lang.Thread.run(Thread.java:745)\r\n        at sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(StreamRemoteCall.java:276)\r\n        at sun.rmi.transport.StreamRemoteCall.executeCall(StreamRemoteCall.java:253)\r\n        at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:162)\r\n        at java.rmi.server.RemoteObjectInvocationHandler.invokeRemoteMethod(RemoteObjectInvocationHandler.java:227)\r\n        at java.rmi.server.RemoteObjectInvocationHandler.invoke(RemoteObjectInvocationHandler.java:179)\r\n        at com.sun.proxy.$Proxy10.installBundle(Unknown Source)\r\n        at org.ops4j.pax.exam.forked.ForkedTestContainer.installAndStartBundles(ForkedTestContainer.java:284)\r\n        at org.ops4j.pax.exam.forked.ForkedTestContainer.start(ForkedTestContainer.java:165)\r\n        at org.ops4j.pax.exam.spi.reactors.AllConfinedStagedReactor.invoke(AllConfinedStagedReactor.java:79)\r\n        at org.ops4j.pax.exam.junit.impl.ProbeRunner$2.evaluate(ProbeRunner.java:267)\r\n        at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\r\n        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\r\n        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\r\n        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n        at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n        at org.ops4j.pax.exam.junit.impl.ProbeRunner.run(ProbeRunner.java:98)\r\n        at org.ops4j.pax.exam.junit.PaxExam.run(PaxExam.java:93)\r\n        at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:283)\r\n        at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:173)\r\n        at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)\r\n        at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:128)\r\n        at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:203)\r\n        at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:155)\r\n        at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)\r\n```\r\n", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 0.0002777777777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/1387"}, {"labels": ["Bug"], "closed": "2017-11-23 10:27:59", "body": "This is not a major issue. I've configured my build to include and build source bundles. It currently fails for `org.eclipse.jetty.osgi.alpn.fragment_9.4.1.v20170120` because of missing source. It would be great if the Jetty project could publish a source bundle for the fragment in its p2 repo.", "commits": {}, "title": "Bundle o.e.j.alpn.server missing in p2 update site", "created": "2017-03-02 10:29:53", "user": "guw", "url": "https://github.com/eclipse/jetty.project/issues/1369", "commitsDetails": [], "ttf": 265.0002777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 2, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug", "High Priority"], "user": "cy6erGn0m", "filteredCommits": [], "commits": {"4a0dd14a81de1ba25e620c55e685ecd518fd379b": {"commitUser": "gregw", "commitGHEventType": "closed"}, "d07d43bed512d77dc0dac17907ac6585822f16a0": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "9d1d393b8931ff0a50c6e4738a7e18e1ddd52d1a": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2017-03-01 09:57:19", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "9d1d393b8931ff0a50c6e4738a7e18e1ddd52d1a", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "d07d43bed512d77dc0dac17907ac6585822f16a0", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Jetty 9.4.x 1363 (#1376)\n\n* Issue #1363\r\n\r\nThis is just some renaming withing HttpInput to improve it's understandability, plus a small\r\namount of refactoring for EOF handling.\r\n\r\nThis does not yet fix the deadlock, but is working towards better EOF handling so that state\r\ncan be pushed from HttpInput to HttpChannelState and avoid the need to query HttpInput state.\r\n\r\n* Issue #1363\r\n\r\nFixed #1363 deadlock by removing the call from HttpChannelState#unhandle to HttpInput This backed out the fix for #1317, which was fixed differently:\r\n + HttpChannelState#onReadEof now always sets _asyncReadPossible to true and _asyncRead to REGISTERED, so that the tests in both #handling and #unhandle will be true and return an Action.READ_CALLBACK\r\n + HttpInput#run now moves the state from AEOF to EOF if it directly consumes EOF from interceptedContent\r\n + HttpInput#run no longer calls onAllDataRead after a onDataAvailable, instead relying on the #onReadEof call to make #unhandle return Action.READ_CALLBACK\r\n so that onAllDataRead is called on a subsequent execution of #run\r\n", "commitParents": ["64c2529fb998ba09cb8338af9092ff0b00da5e53"], "commitHash": "4a0dd14a81de1ba25e620c55e685ecd518fd379b", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpInput.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpInput.isReady()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInput.addContent(org.eclipse.jetty.server.HttpInput$Content)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInput.skip(org.eclipse.jetty.server.HttpInput$Content,int)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInput.pollReadableContent()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInput.nextContent()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInput.nextNonSentinelContent()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInput.setReadListener(javax.servlet.ReadListener)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInput.nextReadable()", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInput.run()", "DEL": 8, "INS": 2, "UPD": 3, "MOV": 5, "TOT": 18}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInput.pollNonEmptyContent()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 4, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInput.read(byte[],int,int)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpChannelState.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.onReadEof()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 2, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.unhandle()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.handling()", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.onWritePossible()", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 0, "TOT": 3}]}], "nameRev": "4a0dd14a81de1ba25e620c55e685ecd518fd379b tags/jetty-9.4.3.v20170317~40", "commitUser": "gregw", "authoredDateTime": "2017-03-06 20:00:15", "commitGHEventType": "closed", "commitGitStats": [{"lines": 126, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpInput.java", "insertions": 59, "deletions": 67}, {"lines": 21, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannelState.java", "insertions": 11, "deletions": 10}], "commitDateTime": "2017-03-06 20:00:15", "spoonStatsSkippedReason": ""}], "title": "HttpInput.read deadlock (async mode)", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2017-03-06 11:00:18", "statsSkippedReason": "", "body": "Jetty 9.4.2 (currently latest)\r\n\r\nqtp thread is here stalled on the monitor (`_inputQ`'s)\r\n\r\n```\r\nat org.eclipse.jetty.server.HttpInput.isAsyncEOF(HttpInput.java:716)\r\n      at org.eclipse.jetty.server.HttpChannelState.unhandle(HttpChannelState.java:433)\r\n      at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:451)\r\n      at org.eclipse.jetty.server.HttpChannel.run(HttpChannel.java:267)\r\n```\r\n\r\nmy app's thread just checked servletInputStream.isReady, got true and called servletInputStream.read(buffer)\r\n```\r\nat sun.misc.Unsafe.park(Unsafe.java:-1)\r\n      at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\r\n      at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:836)\r\n      at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireQueued(AbstractQueuedSynchronizer.java:870)\r\n      at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(AbstractQueuedSynchronizer.java:1199)\r\n      at java.util.concurrent.locks.ReentrantLock$NonfairSync.lock(ReentrantLock.java:209)\r\n      at java.util.concurrent.locks.ReentrantLock.lock(ReentrantLock.java:285)\r\n      at org.eclipse.jetty.util.thread.Locker.lock(Locker.java:48)\r\n      at org.eclipse.jetty.server.HttpChannelState.onReadEof(HttpChannelState.java:1216)\r\n      at org.eclipse.jetty.server.HttpInput.read(HttpInput.java:311)\r\n```\r\n\r\nso it is a deadlock: mixed locks order: Locker vs inputQ monitor, see outlines below\r\n\r\nHttpChannelState.unhandle outline:\r\n```\r\ntry (locker.lock) {\r\n    switch (...) {\r\n        ....\r\n    }\r\n\r\n    switch(...) {\r\n        case STARTED:\r\n            input.isAsyncEOF:\r\n                synchronized(inputQ) { ... }\r\n    }\r\n}\r\n```\r\n\r\nHttpInput.read outline\r\n```\r\nsynchronized(inputQ) {\r\n    ...\r\n    while (true) {\r\n        if (...) _channelState.onReadEof():\r\n            try (locker.lock) { ... }\r\n    }\r\n}\r\n```", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 5.000277777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/1363"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 2, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "panchi", "filteredCommits": ["b0bead2bc0de39c57eb8e531d72bd3f201ce7018"], "commits": {"b0bead2bc0de39c57eb8e531d72bd3f201ce7018": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "196b2c384bfe3fef6841f1ddeae196ddc8227049": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "0d4fcd0cb4330e1895def6f5daa8996f8e23a6de": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2017-02-26 20:05:19", "commitsDetails": [{"commitMessage": "Fixes #1357 - Refactored date/time handling and added tests for RolloverFileOutputStream\n", "commitParents": ["189cc4e369a0238828bfe71c11a87ee15e3e7280"], "commitHash": "b0bead2bc0de39c57eb8e531d72bd3f201ce7018", "commitSpoonAstDiffStats": [{"spoonFilePath": "RolloverFileOutputStream.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream.scheduleNextRollover()", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream.nextMidnight(java.time.ZonedDateTime)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream.toMidnight(java.time.ZonedDateTime,java.time.ZoneId)", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream.toMidnight(java.time.ZonedDateTime)", "DEL": 1, "INS": 0, "UPD": 3, "MOV": 4, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream", "DEL": 2, "INS": 1, "UPD": 1, "MOV": 1, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream.scheduleNextRollover(java.time.ZonedDateTime)", "DEL": 3, "INS": 0, "UPD": 3, "MOV": 8, "TOT": 14}]}, {"spoonFilePath": "RolloverFileOutputStreamTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStreamTest.assertSequence(java.time.ZonedDateTime,java.lang.Object[][])", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 1, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStreamTest.testMidnightRolloverCalc_Sydney_DST_End()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStreamTest.testMidnightRolloverCalc_PST_DST_Start()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStreamTest.testMidnightRolloverCalc_PDT_Issue1507()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStreamTest.testRollover()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStreamTest.testMidnightRolloverCalc_PST_DST_End()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStreamTest.testFilehandling()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStreamTest.testMidnightRolloverCalc_Sydney_DST_Start()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}]}], "nameRev": "b0bead2bc0de39c57eb8e531d72bd3f201ce7018 tags/jetty-9.4.7.RC0~167", "commitUser": "joakime", "authoredDateTime": "2017-02-27 11:25:39", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 52, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/RolloverFileOutputStream.java", "insertions": 32, "deletions": 20}, {"lines": 204, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/RolloverFileOutputStreamTest.java", "insertions": 11, "deletions": 193}], "commitDateTime": "2017-08-08 09:10:15", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #1357 - Refactored date/time handling and added tests for RolloverFileOutputStream\n", "commitParents": ["5d6a1e3025958cdba1cfffa9f227b2c3dc59a3f0"], "commitHash": "196b2c384bfe3fef6841f1ddeae196ddc8227049", "commitSpoonAstDiffStats": [{"spoonFilePath": "RolloverFileOutputStream.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream.toMidnight(java.time.ZonedDateTime,java.time.ZoneId)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream.scheduleNextRollover()", "DEL": 2, "INS": 2, "UPD": 2, "MOV": 7, "TOT": 13}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream.nextMidnight(java.time.ZonedDateTime)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "RolloverFileOutputStreamTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStreamTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "196b2c384bfe3fef6841f1ddeae196ddc8227049 tags/jetty-9.3.17.RC0~8", "commitUser": "joakime", "authoredDateTime": "2017-02-27 11:25:39", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 33, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/RolloverFileOutputStream.java", "insertions": 29, "deletions": 4}, {"lines": 147, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/RolloverFileOutputStreamTest.java", "insertions": 147, "deletions": 0}], "commitDateTime": "2017-02-27 11:25:39", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #1357 - Refactored date/time handling and added tests for RolloverFileOutputStream\n", "commitParents": ["b318f1c6ddb8181f0f41e4416fc2a448fcd38355"], "commitHash": "0d4fcd0cb4330e1895def6f5daa8996f8e23a6de", "commitSpoonAstDiffStats": [{"spoonFilePath": "RolloverFileOutputStream.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream.toMidnight(java.time.ZonedDateTime,java.time.ZoneId)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream.nextMidnight(java.time.ZonedDateTime)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream.scheduleNextRollover()", "DEL": 1, "INS": 3, "UPD": 1, "MOV": 2, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream", "DEL": 6, "INS": 1, "UPD": 2, "MOV": 4, "TOT": 13}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream.removeOldFiles()", "DEL": 1, "INS": 1, "UPD": 2, "MOV": 0, "TOT": 4}]}, {"spoonFilePath": "RolloverFileOutputStreamTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStreamTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "0d4fcd0cb4330e1895def6f5daa8996f8e23a6de tags/jetty-9.2.22.v20170606~10", "commitUser": "joakime", "authoredDateTime": "2017-02-27 11:25:39", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 42, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/RolloverFileOutputStream.java", "insertions": 31, "deletions": 11}, {"lines": 147, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/RolloverFileOutputStreamTest.java", "insertions": 147, "deletions": 0}], "commitDateTime": "2017-06-02 10:08:44", "spoonStatsSkippedReason": ""}], "title": "RolloverFileOutputStream: No rollout performed at midnight", "spoonStatsSummary": {"spoonMethodsChanged": 6, "DEL": 6, "INS": 8, "UPD": 7, "MOV": 13, "TOT": 34, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 52, "insertions": 32, "gitFilesChange": 1, "deletions": 20}, "closed": "2017-02-27 18:41:19", "statsSkippedReason": "", "body": "Since [this commit](https://github.com/eclipse/jetty.project/commit/9f317dee94404f5ed4573b6109fcfe59bf3a5268) RolloverFileOutputStream.scheduleNextRollover() is wrongly calling Timer.schedule() and that results in the first rollout to be scheduled in more than 47 years rather than next midnight.\r\n\r\nI added [a comment](https://github.com/eclipse/jetty.project/commit/9f317dee94404f5ed4573b6109fcfe59bf3a5268#commitcomment-21057902) about that with a possible fix.\r\n\r\n", "changesInPackagesGIT": ["jetty-util/src/main/java/org/eclipse/jetty/util"], "changesInPackagesSPOON": ["org.eclipse.jetty.util.RolloverFileOutputStream.scheduleNextRollover()", "org.eclipse.jetty.util.RolloverFileOutputStream.nextMidnight(java.time.ZonedDateTime)", "org.eclipse.jetty.util.RolloverFileOutputStream.toMidnight(java.time.ZonedDateTime,java.time.ZoneId)", "org.eclipse.jetty.util.RolloverFileOutputStream.toMidnight(java.time.ZonedDateTime)", "org.eclipse.jetty.util.RolloverFileOutputStream", "org.eclipse.jetty.util.RolloverFileOutputStream.scheduleNextRollover(java.time.ZonedDateTime)"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1357"}, {"labels": ["Bug", "Low Priority"], "closed": "2017-04-19 03:49:12", "body": "Starting with 9.3.15.v20161220 jetty-maven-plugin throws NoClassDefError when running jetty:run twice and therefore port conflict occurs. It looks like when there's port conflict some sort of exception is thrown, but it can't be find in plugin binary.\r\n\r\nSteps to reproduce:\r\n- Create simple web app with maven using jetty-maven-plugin\r\n- Invoke mvn jetty:run - normal app startup is done\r\n- Invoke mvn jetty:run after previous step is completed\r\n\r\nExpected:\r\nSimple error message about port conflict:\r\n`[ERROR] Failed to execute goal org.eclipse.jetty:jetty-maven-plugin:9.3.2.v20150730:run (default-cli) on project registration: Failure: Address already in use -> [Help 1] `\r\n\r\nActual:\r\n```\r\n[ERROR] Failed to execute goal org.eclipse.jetty:jetty-maven-plugin:9.3.15.v20161220:run (default-cli) on project registration: Failure: Address already in use -> [Help 1]\r\n[ERROR] \r\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n[ERROR] \r\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\r\nException in thread \"Thread-1\" java.lang.BootstrapMethodError: java.lang.NoClassDefFoundError: org/eclipse/jetty/http/pathmap/MappedResource\r\n        at org.eclipse.jetty.websocket.server.NativeWebSocketConfiguration.doStop(NativeWebSocketConfiguration.java:63)\r\n        at org.eclipse.jetty.util.component.AbstractLifeCycle.stop(AbstractLifeCycle.java:89)\r\n        at org.eclipse.jetty.util.component.ContainerLifeCycle.stop(ContainerLifeCycle.java:142)\r\n        at org.eclipse.jetty.util.component.ContainerLifeCycle.doStop(ContainerLifeCycle.java:160)\r\n        at org.eclipse.jetty.websocket.jsr356.ClientContainer.doStop(ClientContainer.java:205)\r\n        at org.eclipse.jetty.util.component.AbstractLifeCycle.stop(AbstractLifeCycle.java:89)\r\n        at org.eclipse.jetty.util.thread.ShutdownThread.run(ShutdownThread.java:138)\r\nCaused by: java.lang.NoClassDefFoundError: org/eclipse/jetty/http/pathmap/MappedResource\r\n        ... 7 more\r\nCaused by: java.lang.ClassNotFoundException: org.eclipse.jetty.http.pathmap.MappedResource\r\n        at org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy.loadClass(SelfFirstStrategy.java:50)\r\n        at org.codehaus.plexus.classworlds.realm.ClassRealm.unsynchronizedLoadClass(ClassRealm.java:271)\r\n        at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:247)\r\n        at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:239)\r\n        ... 7 more\r\n```", "commits": {}, "title": "java.lang.NoClassDefFoundError: when having port conflict", "created": "2017-02-25 21:52:10", "user": "nano-bot", "url": "https://github.com/eclipse/jetty.project/issues/1356", "commitsDetails": [], "ttf": 52.000277777777775}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["1361b31beb71d3b0716fd9f9aa801b514b7d77a3"], "commits": {"1361b31beb71d3b0716fd9f9aa801b514b7d77a3": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2017-02-22 23:31:55", "commitsDetails": [{"commitMessage": "Issue #1353. fixed growable Trie\n", "commitParents": ["08f67ca434ac50d61b048db5983a04aa850b3645"], "commitHash": "1361b31beb71d3b0716fd9f9aa801b514b7d77a3", "commitSpoonAstDiffStats": [{"spoonFilePath": "ClasspathPattern.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.ClasspathPattern.ByPackage.add(org.eclipse.jetty.webapp.ClasspathPattern$Entry)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "ArrayTernaryTrie.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.ArrayTernaryTrie.Growing.put(java.lang.String,java.lang.Object)", "DEL": 1, "INS": 3, "UPD": 0, "MOV": 1, "TOT": 5}]}, {"spoonFilePath": "ClasspathPatternTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.ClasspathPatternTest.testLarge()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "1361b31beb71d3b0716fd9f9aa801b514b7d77a3 tags/jetty-9.4.3.v20170317~46", "commitUser": "gregw", "authoredDateTime": "2017-02-25 11:15:10", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 3, "filePath": "jetty-webapp/src/main/java/org/eclipse/jetty/webapp/ClasspathPattern.java", "insertions": 1, "deletions": 2}, {"lines": 17, "filePath": "jetty-webapp/src/test/java/org/eclipse/jetty/webapp/ClasspathPatternTest.java", "insertions": 17, "deletions": 0}, {"lines": 5, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/ArrayTernaryTrie.java", "insertions": 3, "deletions": 2}], "commitDateTime": "2017-02-25 11:15:10", "spoonStatsSkippedReason": ""}], "title": "A Large ClasspathPattern results in infinite loop", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 2, "INS": 3, "UPD": 0, "MOV": 2, "TOT": 7, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 8, "insertions": 4, "gitFilesChange": 2, "deletions": 4}, "closed": "2017-02-25 02:15:50", "statsSkippedReason": "", "body": "If you have a large enough ClasspathPattern where the ArrayTernaryTrie has to grow, the grow logic is broken an can go into an infinite loop.", "changesInPackagesGIT": ["jetty-util/src/main/java/org/eclipse/jetty/util", "jetty-webapp/src/main/java/org/eclipse/jetty/webapp"], "changesInPackagesSPOON": ["org.eclipse.jetty.util.ArrayTernaryTrie.Growing.put(java.lang.String,java.lang.Object)", "org.eclipse.jetty.webapp.ClasspathPattern.ByPackage.add(org.eclipse.jetty.webapp.ClasspathPattern$Entry)"], "ttf": 2.000277777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1353"}, {"labels": ["Bug"], "closed": "2017-03-09 05:12:37", "body": "The push cache filter does not use the query from the referrer field when creating a primary resource, but it does use it from a request when looking up the primary resource.", "commits": {}, "title": "PushCacheFilter query usage", "created": "2017-02-21 01:22:04", "user": "gregw", "url": "https://github.com/eclipse/jetty.project/issues/1346", "commitsDetails": [], "ttf": 16.00027777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug", "Microsoft Windows"], "user": "garypgithub", "filteredCommits": ["0cd8d21bfd54176c091267bfd7ac1165354b10f8"], "commits": {"0cd8d21bfd54176c091267bfd7ac1165354b10f8": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2017-02-15 04:57:36", "commitsDetails": [{"commitMessage": "Issue #1331 - replacing with ${jetty.base.uri} form\n", "commitParents": ["0cd12e9e97766831b27c7a7965a7e1812f7b7281"], "commitHash": "0cd8d21bfd54176c091267bfd7ac1165354b10f8", "commitSpoonAstDiffStats": [], "nameRev": "0cd8d21bfd54176c091267bfd7ac1165354b10f8 tags/jetty-9.4.2.v20170220~4", "commitUser": "joakime", "authoredDateTime": "2017-02-15 11:34:47", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-gcloud/jetty-gcloud-session-manager/src/main/config-template/modules/gcloud.mod", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-util/src/main/config/modules/logging-log4j.mod", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-util/src/main/config/modules/logging-slf4j.mod", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-util/src/main/config/modules/logging-log4j2.mod", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-util/src/main/config/modules/logging-jul.mod", "insertions": 1, "deletions": 1}, {"lines": 4, "filePath": "jetty-webapp/src/main/config/modules/webapp.mod", "insertions": 2, "deletions": 2}, {"lines": 2, "filePath": "jetty-util/src/main/config/modules/logging-logback.mod", "insertions": 1, "deletions": 1}], "commitDateTime": "2017-02-15 11:34:47", "spoonStatsSkippedReason": ""}], "title": "NPE in ClasspathPattern.add when using module logging-log4j2.mod and other logging modules", "spoonStatsSummary": {}, "gitStatsSummary": {"lines": 16, "insertions": 8, "gitFilesChange": 7, "deletions": 8}, "closed": "2017-02-15 18:36:30", "statsSkippedReason": "", "body": "I'm getting the stack trace shown below (on Windows) when I add module logging-log4j to my start.ini.  This seems to be caused by the following lines in logging-log4j.mod:\r\n\r\n```\r\n[ini]\r\njetty.webapp.addServerClasses+=,file:${jetty.base}/lib/slf4j/,file:${jetty.base}/lib/log4j2/\r\n```\r\n\r\nThese are not valid URIs.  Two slashes should follow the word \"file:\" so that the offending line looks like this;\r\n\r\n```\r\njetty.webapp.addServerClasses+=,file://${jetty.base}/lib/slf4j/,file://${jetty.base}/lib/log4j2/\r\n```\r\n\r\nThis same problem exists in other logging-xxxx.mod files.\r\n\r\nSteps to reproduce:\r\n1.  Add \"--module=logging-log4j2\" to start.ini.\r\n2.  Be sure you're deploying at least one web application or have that in the webapps directory.\r\n3.  Start jetty.\r\n\r\nThanks,\r\nGary\r\n\r\n```\r\n2017-02-14 20:15:01 WARN  Resource:121 - java.lang.IllegalArgumentException: URI is not hierarchical\r\n2017-02-14 20:15:01 WARN  WebAppContext:549 - Failed startup of context o.e.j.w.WebAppContext@3fa247d1{/pivselfreg,null,null}{C:\\Data\\USArmy\\jetty_base\\webapps\\pivselfreg.war}\r\njava.lang.IllegalArgumentException: java.lang.NullPointerException\r\n        at org.eclipse.jetty.webapp.ClasspathPattern.add(ClasspathPattern.java:417) ~[jetty-webapp-9.4.1.v20170120.jar:9.4.1.v20170120]\r\n        at org.eclipse.jetty.webapp.ClasspathPattern.add(ClasspathPattern.java:387) ~[jetty-webapp-9.4.1.v20170120.jar:9.4.1.v20170120]\r\n        at org.eclipse.jetty.webapp.ClasspathPattern.add(ClasspathPattern.java:60) ~[jetty-webapp-9.4.1.v20170120.jar:9.4.1.v20170120]\r\n        at java.util.AbstractCollection.addAll(Unknown Source) ~[?:1.8.0_121]\r\n        at org.eclipse.jetty.webapp.ClasspathPattern.addAll(ClasspathPattern.java:485) ~[jetty-webapp-9.4.1.v20170120.jar:9.4.1.v20170120]\r\n        at org.eclipse.jetty.webapp.ClasspathPattern.setAll(ClasspathPattern.java:476) ~[jetty-webapp-9.4.1.v20170120.jar:9.4.1.v20170120]\r\n        at org.eclipse.jetty.webapp.ClasspathPattern.<init>(ClasspathPattern.java:342) ~[jetty-webapp-9.4.1.v20170120.jar:9.4.1.v20170120]\r\n        at org.eclipse.jetty.webapp.WebAppContext.loadServerClasses(WebAppContext.java:893) ~[jetty-webapp-9.4.1.v20170120.jar:9.4.1.v20170120]\r\n        at org.eclipse.jetty.webapp.WebAppContext.preConfigure(WebAppContext.java:474) ~[jetty-webapp-9.4.1.v20170120.jar:9.4.1.v20170120]\r\n        at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:539) [jetty-webapp-9.4.1.v20170120.jar:9.4.1.v20170120]\r\n        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68) [jetty-util-9.4.1.v20170120.jar:9.4.1.v20170120]\r\n        at org.eclipse.jetty.deploy.bindings.StandardStarter.processBinding(StandardStarter.java:41) [jetty-deploy-9.4.1.v20170120.jar:9.4.1.v20170120]\r\n        at org.eclipse.jetty.deploy.AppLifeCycle.runBindings(AppLifeCycle.java:188) [jetty-deploy-9.4.1.v20170120.jar:9.4.1.v20170120]\r\n        at org.eclipse.jetty.deploy.DeploymentManager.requestAppGoal(DeploymentManager.java:499) [jetty-deploy-9.4.1.v20170120.jar:9.4.1.v20170120]\r\n        at org.eclipse.jetty.deploy.DeploymentManager.addApp(DeploymentManager.java:147) [jetty-deploy-9.4.1.v20170120.jar:9.4.1.v20170120]\r\n        at org.eclipse.jetty.deploy.providers.ScanningAppProvider.fileAdded(ScanningAppProvider.java:180) [jetty-deploy-9.4.1.v20170120.jar:9.4.1.v20170120]\r\n        at org.eclipse.jetty.deploy.providers.WebAppProvider.fileAdded(WebAppProvider.java:452) [jetty-deploy-9.4.1.v20170120.jar:9.4.1.v20170120]\r\n        at org.eclipse.jetty.deploy.providers.ScanningAppProvider$1.fileAdded(ScanningAppProvider.java:64) [jetty-deploy-9.4.1.v20170120.jar:9.4.1.v20170120]\r\n        at org.eclipse.jetty.util.Scanner.reportAddition(Scanner.java:610) [jetty-util-9.4.1.v20170120.jar:9.4.1.v20170120]\r\n        at org.eclipse.jetty.util.Scanner.reportDifferences(Scanner.java:529) [jetty-util-9.4.1.v20170120.jar:9.4.1.v20170120]\r\n        at org.eclipse.jetty.util.Scanner.scan(Scanner.java:392) [jetty-util-9.4.1.v20170120.jar:9.4.1.v20170120]\r\n        at org.eclipse.jetty.util.Scanner.doStart(Scanner.java:313) [jetty-util-9.4.1.v20170120.jar:9.4.1.v20170120]\r\n        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68) [jetty-util-9.4.1.v20170120.jar:9.4.1.v20170120]\r\n        at org.eclipse.jetty.deploy.providers.ScanningAppProvider.doStart(ScanningAppProvider.java:150) [jetty-deploy-9.4.1.v20170120.jar:9.4.1.v20170120]\r\n        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68) [jetty-util-9.4.1.v20170120.jar:9.4.1.v20170120]\r\n        at org.eclipse.jetty.deploy.DeploymentManager.startAppProvider(DeploymentManager.java:561) [jetty-deploy-9.4.1.v20170120.jar:9.4.1.v20170120]\r\n        at org.eclipse.jetty.deploy.DeploymentManager.doStart(DeploymentManager.java:236) [jetty-deploy-9.4.1.v20170120.jar:9.4.1.v20170120]\r\n        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68) [jetty-util-9.4.1.v20170120.jar:9.4.1.v20170120]\r\n        at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:131) [jetty-util-9.4.1.v20170120.jar:9.4.1.v20170120]\r\n        at org.eclipse.jetty.server.Server.start(Server.Listening for transport dt_socket at address: 1952\r\njava:452) [jetty-server-9.4.1.v20170120.jar:9.4.1.v20170120]\r\n        at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:113) [jetty-util-9.4.1.v20170120.jar:9.4.1.v20170120]\r\n        at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113) [jetty-server-9.4.1.v20170120.jar:9.4.1.v20170120]\r\n        at org.eclipse.jetty.server.Server.doStart(Server.java:419) [jetty-server-9.4.1.v20170120.jar:9.4.1.v20170120]\r\n        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68) [jetty-util-9.4.1.v20170120.jar:9.4.1.v20170120]\r\n        at org.eclipse.jetty.xml.XmlConfiguration$1.run(XmlConfiguration.java:1511) [jetty-xml-9.4.1.v20170120.jar:9.4.1.v20170120]\r\n        at org.eclipse.jetty.xml.XmlConfiguration$1.run(XmlConfiguration.java:1438) [jetty-xml-9.4.1.v20170120.jar:9.4.1.v20170120]\r\n        at java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_121]\r\n        at org.eclipse.jetty.xml.XmlConfiguration.main(XmlConfiguration.java:1437) [jetty-xml-9.4.1.v20170120.jar:9.4.1.v20170120]\r\nCaused by: java.lang.NullPointerException\r\n        at org.eclipse.jetty.webapp.ClasspathPattern.add(ClasspathPattern.java:409) ~[jetty-webapp-9.4.1.v20170120.jar:9.4.1.v20170120]\r\n        ... 37 more\r\n\r\n```", "changesInPackagesGIT": ["jetty-gcloud/jetty-gcloud-session-manager/src/main/config-template/modules/gcloud.mod", "jetty-util/src/main/config/modules/logging-log4j.mod", "jetty-util/src/main/config/modules/logging-slf4j.mod", "jetty-util/src/main/config/modules/logging-log4j2.mod", "jetty-util/src/main/config/modules/logging-jul.mod", "jetty-webapp/src/main/config/modules/webapp.mod", "jetty-util/src/main/config/modules/logging-logback.mod"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1331"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 2, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug", "High Priority"], "user": "gregw", "filteredCommits": ["ae0cef97c2650663084aa190da1d644d75612511", "e4028fa4d467c50cf29582eb838a7a0e5886b875", "e7c0e2b2884771a184bb7029df1a133d178bad69", "d2ada49bb285989d0dbcecaa18c050f162216a36", "509d3dc9615935e5bd3b24d094f4fb1f3454c6f8", "6b83a6c0a6e33559ea9c7c81f368d222e4b1d55c"], "commits": {"6b83a6c0a6e33559ea9c7c81f368d222e4b1d55c": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "e7c0e2b2884771a184bb7029df1a133d178bad69": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "e4028fa4d467c50cf29582eb838a7a0e5886b875": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "4a0dd14a81de1ba25e620c55e685ecd518fd379b": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "d07d43bed512d77dc0dac17907ac6585822f16a0": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "ae0cef97c2650663084aa190da1d644d75612511": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "d2ada49bb285989d0dbcecaa18c050f162216a36": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "046cbe4bc62d5f746a9b1c7371a85146c8f51198": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "509d3dc9615935e5bd3b24d094f4fb1f3454c6f8": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2017-02-09 04:24:25", "commitsDetails": [{"commitMessage": "Issue #1317 removed incorrect fix\n", "commitParents": ["509d3dc9615935e5bd3b24d094f4fb1f3454c6f8"], "commitHash": "6b83a6c0a6e33559ea9c7c81f368d222e4b1d55c", "commitSpoonAstDiffStats": [{"spoonFilePath": "AsyncProxyServlet.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.proxy.AsyncProxyServlet.StreamReader.process()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "6b83a6c0a6e33559ea9c7c81f368d222e4b1d55c tags/jetty-9.4.2.v20170220~3^2~9", "commitUser": "gregw", "authoredDateTime": "2017-02-09 21:42:28", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 1, "filePath": "jetty-proxy/src/main/java/org/eclipse/jetty/proxy/AsyncProxyServlet.java", "insertions": 0, "deletions": 1}], "commitDateTime": "2017-02-09 21:42:28", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1317 comment out failing proxy test\n", "commitParents": ["b020d927731ad7e1d3920042045598fc65f91dcf"], "commitHash": "ae0cef97c2650663084aa190da1d644d75612511", "commitSpoonAstDiffStats": [{"spoonFilePath": "AsyncProxyServletLoadTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.proxy.AsyncProxyServletLoadTest.ClientLoop.run()", "DEL": 1, "INS": 2, "UPD": 1, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.proxy.AsyncProxyServletLoadTest.data()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}]}], "nameRev": "ae0cef97c2650663084aa190da1d644d75612511 tags/jetty-9.4.2.v20170220~3^2~15", "commitUser": "gregw", "authoredDateTime": "2017-02-09 15:24:55", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 6, "filePath": "jetty-proxy/src/test/java/org/eclipse/jetty/proxy/AsyncProxyServletLoadTest.java", "insertions": 3, "deletions": 3}], "commitDateTime": "2017-02-09 15:24:55", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1317 cleanup\n", "commitParents": ["6b83a6c0a6e33559ea9c7c81f368d222e4b1d55c"], "commitHash": "e4028fa4d467c50cf29582eb838a7a0e5886b875", "commitSpoonAstDiffStats": [{"spoonFilePath": "AsyncProxyServlet.java", "spoonMethods": []}, {"spoonFilePath": "AsyncIOServletTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.client.AsyncIOServletTest.testAsyncIntercepted().22.service(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse).2.onDataAvailable()", "DEL": 2, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 4}]}], "nameRev": "e4028fa4d467c50cf29582eb838a7a0e5886b875 tags/jetty-9.4.2.v20170220~3^2~8", "commitUser": "gregw", "authoredDateTime": "2017-02-09 22:52:38", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 3, "filePath": "jetty-proxy/src/main/java/org/eclipse/jetty/proxy/AsyncProxyServlet.java", "insertions": 2, "deletions": 1}, {"lines": 6, "filePath": "tests/test-http-client-transport/src/test/java/org/eclipse/jetty/http/client/AsyncIOServletTest.java", "insertions": 3, "deletions": 3}], "commitDateTime": "2017-02-09 22:52:38", "spoonStatsSkippedReason": ""}, {"commitMessage": "Jetty 9.4.x 1363 (#1376)\n\n* Issue #1363\r\n\r\nThis is just some renaming withing HttpInput to improve it's understandability, plus a small\r\namount of refactoring for EOF handling.\r\n\r\nThis does not yet fix the deadlock, but is working towards better EOF handling so that state\r\ncan be pushed from HttpInput to HttpChannelState and avoid the need to query HttpInput state.\r\n\r\n* Issue #1363\r\n\r\nFixed #1363 deadlock by removing the call from HttpChannelState#unhandle to HttpInput This backed out the fix for #1317, which was fixed differently:\r\n + HttpChannelState#onReadEof now always sets _asyncReadPossible to true and _asyncRead to REGISTERED, so that the tests in both #handling and #unhandle will be true and return an Action.READ_CALLBACK\r\n + HttpInput#run now moves the state from AEOF to EOF if it directly consumes EOF from interceptedContent\r\n + HttpInput#run no longer calls onAllDataRead after a onDataAvailable, instead relying on the #onReadEof call to make #unhandle return Action.READ_CALLBACK\r\n so that onAllDataRead is called on a subsequent execution of #run\r\n", "commitParents": ["64c2529fb998ba09cb8338af9092ff0b00da5e53"], "commitHash": "4a0dd14a81de1ba25e620c55e685ecd518fd379b", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpInput.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpInput.isReady()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInput.addContent(org.eclipse.jetty.server.HttpInput$Content)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInput.skip(org.eclipse.jetty.server.HttpInput$Content,int)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInput.pollReadableContent()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInput.nextContent()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInput.nextNonSentinelContent()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInput.setReadListener(javax.servlet.ReadListener)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInput.nextReadable()", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInput.run()", "DEL": 8, "INS": 2, "UPD": 3, "MOV": 5, "TOT": 18}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInput.pollNonEmptyContent()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 4, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.server.HttpInput.read(byte[],int,int)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpChannelState.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.onReadEof()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 2, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.unhandle()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.handling()", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.onWritePossible()", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 0, "TOT": 3}]}], "nameRev": "4a0dd14a81de1ba25e620c55e685ecd518fd379b tags/jetty-9.4.3.v20170317~40", "commitUser": "gregw", "authoredDateTime": "2017-03-06 20:00:15", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 126, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpInput.java", "insertions": 59, "deletions": 67}, {"lines": 21, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannelState.java", "insertions": 11, "deletions": 10}], "commitDateTime": "2017-03-06 20:00:15", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "d07d43bed512d77dc0dac17907ac6585822f16a0", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1317\n\nFix by checking for the need to call onAllDataRead in unhandle\n", "commitParents": ["e4028fa4d467c50cf29582eb838a7a0e5886b875"], "commitHash": "e7c0e2b2884771a184bb7029df1a133d178bad69", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpInput.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpInput.isAsyncEOF()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpChannelState.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.unhandle()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}], "nameRev": "e7c0e2b2884771a184bb7029df1a133d178bad69 tags/jetty-9.4.2.v20170220~3^2~7", "commitUser": "gregw", "authoredDateTime": "2017-02-09 23:42:49", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 9, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpInput.java", "insertions": 9, "deletions": 0}, {"lines": 4, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannelState.java", "insertions": 3, "deletions": 1}], "commitDateTime": "2017-02-09 23:42:49", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1317 - AsyncProxyServletLoadTest fails.\n\nRemoved leftover code.\n", "commitParents": ["4a9ae6695e44f0141d0d0aa371ec729e9d0b7141"], "commitHash": "d2ada49bb285989d0dbcecaa18c050f162216a36", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpChannelState.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.onReadEof()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "d2ada49bb285989d0dbcecaa18c050f162216a36 tags/jetty-9.4.2.v20170220~3^2~3", "commitUser": "sbordet", "authoredDateTime": "2017-02-09 22:09:02", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 4, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannelState.java", "insertions": 0, "deletions": 4}], "commitDateTime": "2017-02-09 22:09:02", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1317\n\nCleaned up Interest enum\n", "commitParents": ["e7c0e2b2884771a184bb7029df1a133d178bad69"], "commitHash": "046cbe4bc62d5f746a9b1c7371a85146c8f51198", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpChannelState.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.unhandle()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.onReadUnready()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.onReadEof()", "DEL": 0, "INS": 2, "UPD": 1, "MOV": 1, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.onReadReady()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.Interest", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.Interest.notInterested()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "046cbe4bc62d5f746a9b1c7371a85146c8f51198 tags/jetty-9.4.2.v20170220~3^2~6", "commitUser": "gregw", "authoredDateTime": "2017-02-09 23:59:14", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 18, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannelState.java", "insertions": 10, "deletions": 8}], "commitDateTime": "2017-02-09 23:59:14", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1317 ProxyServlet\n\nAdded speculative fix with TODO about onAllDataRead\n", "commitParents": ["24e39cf944b648b7e7d01aa48e0025a1099b59bf"], "commitHash": "509d3dc9615935e5bd3b24d094f4fb1f3454c6f8", "commitSpoonAstDiffStats": [{"spoonFilePath": "AsyncProxyServlet.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.proxy.AsyncProxyServlet.StreamReader.process()", "DEL": 3, "INS": 1, "UPD": 0, "MOV": 7, "TOT": 11}]}, {"spoonFilePath": "ProxyServletLoadTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.proxy.AsyncProxyServletLoadTest.startClient()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.proxy.ProxyServletLoadTest.data()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.proxy.AsyncProxyServletLoadTest.dispose()", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.proxy.AsyncProxyServletLoadTest.ClientLoop.run()", "DEL": 0, "INS": 0, "UPD": 11, "MOV": 0, "TOT": 11}, {"spoonMethodName": "org.eclipse.jetty.proxy.AsyncProxyServletLoadTest.startProxy()", "DEL": 0, "INS": 0, "UPD": 8, "MOV": 0, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.proxy.AsyncProxyServletLoadTest", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.proxy.AsyncProxyServletLoadTest.test()", "DEL": 0, "INS": 0, "UPD": 7, "MOV": 0, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.proxy.AsyncProxyServletLoadTest.startServer(javax.servlet.http.HttpServlet)", "DEL": 0, "INS": 0, "UPD": 7, "MOV": 0, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.proxy.AsyncProxyServletLoadTest.data()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.proxy.AsyncProxyServletLoadTest.ClientLoop", "DEL": 0, "INS": 0, "UPD": 6, "MOV": 0, "TOT": 6}]}], "nameRev": "509d3dc9615935e5bd3b24d094f4fb1f3454c6f8 tags/jetty-9.4.2.v20170220~3^2~10", "commitUser": "gregw", "authoredDateTime": "2017-02-09 18:50:26", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 26, "filePath": "jetty-proxy/src/main/java/org/eclipse/jetty/proxy/AsyncProxyServlet.java", "insertions": 11, "deletions": 15}, {"lines": 9, "filePath": "jetty-proxy/src/test/java/org/eclipse/jetty/proxy/{AsyncProxyServletLoadTest.java => ProxyServletLoadTest.java}", "insertions": 5, "deletions": 4}], "commitDateTime": "2017-02-09 18:50:26", "spoonStatsSkippedReason": ""}], "title": "AsyncProxyServletLoadTest fails", "spoonStatsSummary": {"spoonMethodsChanged": 4, "DEL": 5.0, "INS": 3.0, "UPD": 0.0, "MOV": 8.0, "TOT": 16.0, "spoonFilesChanged": 3}, "gitStatsSummary": {"lines": 47.0, "insertions": 25.0, "gitFilesChange": 3, "deletions": 22.0}, "closed": "2017-02-09 15:30:46", "statsSkippedReason": "", "body": "The AsyncProxyServlet variant of the test fails about 1 in 10 runs with :+1: \r\n```\r\n2017-02-09 15:22:17.115:WARN:oejp.AsyncProxyServletLoadTest:client-3: Error processing request 932\r\njava.util.concurrent.TimeoutException\r\n\tat org.eclipse.jetty.client.util.FutureResponseListener.get(FutureResponseListener.java:109)\r\n\tat org.eclipse.jetty.client.HttpRequest.send(HttpRequest.java:654)\r\n\tat org.eclipse.jetty.proxy.AsyncProxyServletLoadTest$ClientLoop.run(AsyncProxyServletLoadTest.java:210)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\n2017-02-09 15:22:17.115:INFO:oejp.AsyncProxyServletLoadTest:client-3: Shutting down thread client-3\r\n```\r\n\r\nI have commented out the test for now to get a more  reliable build.", "changesInPackagesGIT": ["jetty-proxy/src/main/java/org/eclipse/jetty/proxy", "jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.HttpChannelState.onReadEof()", "org.eclipse.jetty.server.HttpChannelState.unhandle()", "org.eclipse.jetty.server.HttpInput.isAsyncEOF()", "org.eclipse.jetty.proxy.AsyncProxyServlet.StreamReader.process()"], "ttf": 0.0002777777777777778, "numCommits": 5, "url": "https://github.com/eclipse/jetty.project/issues/1317"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "nickbabcock", "filteredCommits": ["861432a334458b11fa056bd640e9875876e830ff", "3c2ff283a24d4fe4969c2e5e069b81eee3a6b1ef"], "commits": {"861432a334458b11fa056bd640e9875876e830ff": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "3c2ff283a24d4fe4969c2e5e069b81eee3a6b1ef": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2017-01-20 18:20:35", "commitsDetails": [{"commitMessage": "Debugging #1281\n", "commitParents": ["2679715a301ce82b0feb6f8b7190a72f379dd82d"], "commitHash": "861432a334458b11fa056bd640e9875876e830ff", "commitSpoonAstDiffStats": [{"spoonFilePath": "UnixSocketClient.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.unixsocket.UnixSocketClient.main(java.lang.String[])", "DEL": 3, "INS": 9, "UPD": 1, "MOV": 13, "TOT": 26}]}, {"spoonFilePath": "UnixSocketServer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.unixsocket.UnixSocketServer.main(java.lang.String[]).1.doNonErrorHandle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 1, "INS": 4, "UPD": 0, "MOV": 0, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.unixsocket.UnixSocketServer.main(java.lang.String[])", "DEL": 3, "INS": 5, "UPD": 4, "MOV": 2, "TOT": 14}]}, {"spoonFilePath": "UnixSocketProxyServer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.unixsocket.UnixSocketProxyServer", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "861432a334458b11fa056bd640e9875876e830ff tags/jetty-9.4.6.v20170531~42^2~1", "commitUser": "gregw", "authoredDateTime": "2017-05-11 12:33:37", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-unixsocket/pom.xml", "insertions": 1, "deletions": 1}, {"lines": 39, "filePath": "jetty-unixsocket/src/test/java/org/eclipse/jetty/unixsocket/UnixSocketServer.java", "insertions": 34, "deletions": 5}, {"lines": 6, "filePath": "jetty-unixsocket/src/test/resources/jetty-logging.properties", "insertions": 3, "deletions": 3}, {"lines": 54, "filePath": "jetty-unixsocket/src/test/java/org/eclipse/jetty/unixsocket/UnixSocketClient.java", "insertions": 42, "deletions": 12}, {"lines": 90, "filePath": "jetty-unixsocket/src/test/java/org/eclipse/jetty/unixsocket/UnixSocketProxyServer.java", "insertions": 90, "deletions": 0}], "commitDateTime": "2017-05-11 12:33:37", "spoonStatsSkippedReason": ""}, {"commitMessage": "work in progress #1281\n", "commitParents": ["861432a334458b11fa056bd640e9875876e830ff"], "commitHash": "3c2ff283a24d4fe4969c2e5e069b81eee3a6b1ef", "commitSpoonAstDiffStats": [{"spoonFilePath": "UnixSocketConnector.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.unixsocket.UnixSocketConnector.accept(int)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.unixsocket.UnixSocketConnector.open()", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 3, "TOT": 6}]}, {"spoonFilePath": "ManagedSelector.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.processAccept(java.nio.channels.SelectionKey)", "DEL": 1, "INS": 2, "UPD": 1, "MOV": 4, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.Acceptor.run()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "3c2ff283a24d4fe4969c2e5e069b81eee3a6b1ef tags/jetty-9.4.6.v20170531~42^2", "commitUser": "gregw", "authoredDateTime": "2017-05-11 15:40:02", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 9, "filePath": "jetty-unixsocket/src/main/java/org/eclipse/jetty/unixsocket/UnixSocketConnector.java", "insertions": 6, "deletions": 3}, {"lines": 10, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ManagedSelector.java", "insertions": 7, "deletions": 3}], "commitDateTime": "2017-05-11 15:40:02", "spoonStatsSkippedReason": ""}], "title": "Socket errors with unixsocket under load", "spoonStatsSummary": {"spoonMethodsChanged": 8, "DEL": 8, "INS": 24, "UPD": 9, "MOV": 22, "TOT": 63, "spoonFilesChanged": 5}, "gitStatsSummary": {"lines": 19, "insertions": 13, "gitFilesChange": 2, "deletions": 6}, "closed": "2018-05-07 21:36:42", "statsSkippedReason": "", "body": "Been experimenting with jetty's unix socket (using 9.4.0 and c7c183c370bb8)  support and have received a few errors when putting the setup under load (low volume works fine). For instance, in a jersey app I've seen this stack exception:\r\n\r\n```\r\norg.glassfish.jersey.server.ServerRuntime$Responder: An I/O error has occurred while writing a response message entity to the container output stream.\r\n! java.io.IOException: Broken pipe\r\n! at jnr.enxio.channels.NativeSocketChannel.write(NativeSocketChannel.java:93)\r\n! at org.eclipse.jetty.io.ChannelEndPoint.flush(ChannelEndPoint.java:279)\r\n```\r\n\r\nso I decided to isolate using just jetty code.\r\n\r\nGiven a simple echo server that uses unix sockets:\r\n\r\n```java\r\npublic class EchoApplication {\r\n    public static void main (String... args) throws Exception {\r\n        Server server = new Server();\r\n        UnixSocketConnector connector = new UnixSocketConnector(server);\r\n        connector.setUnixSocket(\"/var/lib/haproxy/jetty.sock\");\r\n        server.addConnector(connector);\r\n        server.setHandler(new EchoHandler());\r\n        server.start();\r\n        server.join();\r\n    }\r\n\r\n    public static class EchoHandler extends AbstractHandler {\r\n        @Override\r\n        public void handle(\r\n                String target,\r\n                Request baseRequest,\r\n                HttpServletRequest request,\r\n                HttpServletResponse response\r\n        ) throws IOException, ServletException {\r\n            response.setStatus(200);\r\n            ByteStreams.copy(request.getInputStream(), response.getOutputStream());\r\n            baseRequest.setHandled(true);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAnd given the partial config for an ssl terminating HAProxy setup:\r\n\r\n```\r\nfrontend ft_myapp\r\n bind 192.168.137.83:9443 ssl crt /etc/ssl/private/jetty_new.key.pem\r\n mode tcp\r\n option tcplog\r\n default_backend bk_myapp\r\n\r\nbackend bk_myapp\r\n server srv unix@jetty.sock\r\n```\r\n\r\nStress testing the setup from another box:\r\n\r\n```\r\nwrk -c 40 -d 60s -t 8 -s wrk1M.lua https://192.168.137.83:9443\r\n```\r\n\r\nwhere `wrk1M.lua` has contents\r\n\r\n```lua\r\nwrk.method = \"POST\"\r\nwrk.body   = string.rep(\"a\", 1024 * 1024)\r\n```\r\n\r\nwrk reports there are socket errors:\r\n\r\n```\r\nSocket errors: connect 0, read 6390, write 2844, timeout 0\r\n```\r\n\r\nAlso I see the following (single) warning in the jetty log:\r\n\r\n```\r\nWARN:oeju.SharedBlockingCallback:qtp834600351-35: Blocker not complete Blocker@3f29209e{null}\r\n```\r\n\r\nTo me there appears to be a few possibilities:\r\n\r\n- HAProxy has poor support for unix sockets (I personally never used them in HAProxy before, so I could be doing something wrong).\r\n- Fault lies somewhere in Jetty \r\n- Bug in the underlying `jnr` library", "changesInPackagesGIT": ["jetty-unixsocket/src/main/java/org/eclipse/jetty/unixsocket", "jetty-io/src/main/java/org/eclipse/jetty/io"], "changesInPackagesSPOON": ["org.eclipse.jetty.unixsocket.UnixSocketServer.main(java.lang.String[]).1.doNonErrorHandle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "org.eclipse.jetty.io.ManagedSelector.Acceptor.run()", "org.eclipse.jetty.unixsocket.UnixSocketProxyServer", "org.eclipse.jetty.unixsocket.UnixSocketServer.main(java.lang.String[])", "org.eclipse.jetty.unixsocket.UnixSocketConnector.open()", "org.eclipse.jetty.io.ManagedSelector.processAccept(java.nio.channels.SelectionKey)", "org.eclipse.jetty.unixsocket.UnixSocketConnector.accept(int)", "org.eclipse.jetty.unixsocket.UnixSocketClient.main(java.lang.String[])"], "ttf": 472.0002777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1281"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "ludoch", "filteredCommits": ["69afe33b820401cef1e08fcb5911a025b29a4487"], "commits": {"69afe33b820401cef1e08fcb5911a025b29a4487": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "edfd05dd9c9be4af1c61b30924d10725f8a7ec55": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2017-01-17 22:09:34", "commitsDetails": [{"commitMessage": "Issue #1268\n", "commitParents": ["70866690e427d50fa7a2232c8c971fffd8ad0416"], "commitHash": "69afe33b820401cef1e08fcb5911a025b29a4487", "commitSpoonAstDiffStats": [{"spoonFilePath": "ServletHolder.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.ServletHolder.doStart()", "DEL": 3, "INS": 3, "UPD": 0, "MOV": 5, "TOT": 11}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletHolder.getNameOfJspClass(java.lang.String)", "DEL": 3, "INS": 6, "UPD": 1, "MOV": 4, "TOT": 14}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletHolder.getClassNameForJsp(java.lang.String)", "DEL": 1, "INS": 7, "UPD": 1, "MOV": 3, "TOT": 12}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletHolder.appendPath(java.lang.StringBuffer,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletHolder.getPackageOfJspClass(java.lang.String)", "DEL": 1, "INS": 5, "UPD": 1, "MOV": 4, "TOT": 11}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletHolder.getJspPackagePrefix()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "69afe33b820401cef1e08fcb5911a025b29a4487 tags/jetty-9.3.16.v20170119~15", "commitUser": "janbartel", "authoredDateTime": "2017-01-18 15:16:16", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 89, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletHolder.java", "insertions": 67, "deletions": 22}], "commitDateTime": "2017-01-18 15:16:52", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1268\n\nAdd unit tests, tweak log and error messages, fix bug.\n", "commitParents": ["eeae3bfdadcd1154c89d7fa3178c4bb33e1306ac"], "commitHash": "edfd05dd9c9be4af1c61b30924d10725f8a7ec55", "commitSpoonAstDiffStats": [{"spoonFilePath": "ServletHolderTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.ServletHolderTest.testJspFileNameToClassName()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletHolderTest.testUnloadableClassName()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletHolderTest.testNoClassName()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "BaseHolder.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.BaseHolder.doStart()", "DEL": 2, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 4}]}, {"spoonFilePath": "ServletHolder.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.ServletHolder.doStart()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletHolder.getNameOfJspClass(java.lang.String)", "DEL": 2, "INS": 1, "UPD": 3, "MOV": 4, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletHolder.getClassNameForJsp(java.lang.String)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletHolder.getJspPackagePrefix()", "DEL": 0, "INS": 2, "UPD": 1, "MOV": 1, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletHolder.getPackageOfJspClass(java.lang.String)", "DEL": 3, "INS": 6, "UPD": 3, "MOV": 8, "TOT": 20}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletHolder.toString()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "TestJspFileNameToClass.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.jsp.TestJspFileNameToClass", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "edfd05dd9c9be4af1c61b30924d10725f8a7ec55 tags/jetty-9.3.16.v20170119~8", "commitUser": "janbartel", "authoredDateTime": "2017-01-19 13:49:50", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 91, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/ServletHolderTest.java", "insertions": 88, "deletions": 3}, {"lines": 58, "filePath": "apache-jsp/src/test/java/org/eclipse/jetty/jsp/TestJspFileNameToClass.java", "insertions": 58, "deletions": 0}, {"lines": 40, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletHolder.java", "insertions": 30, "deletions": 10}, {"lines": 4, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/BaseHolder.java", "insertions": 2, "deletions": 2}], "commitDateTime": "2017-01-19 13:49:50", "spoonStatsSkippedReason": ""}], "title": "<jsp-file>incorrectly handled when the jsp is at the top directory", "spoonStatsSummary": {"spoonMethodsChanged": 6, "DEL": 8, "INS": 22, "UPD": 4, "MOV": 16, "TOT": 50, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 89, "insertions": 67, "gitFilesChange": 1, "deletions": 22}, "closed": "2017-01-19 03:31:41", "statsSkippedReason": "", "body": "This does not seem to work:\r\n\r\n ```   \r\n    <servlet>\r\n        <servlet-name>ExportBeta</servlet-name>\r\n        <jsp-file>/index.jsp</jsp-file>\r\n    </servlet>\r\n    <servlet-mapping>\r\n        <servlet-name>ExportBeta</servlet-name>\r\n        <url-pattern>/app/export</url-pattern>\r\n    </servlet-mapping>\r\n```\r\nas the servlet class name used to map this jsp is \r\n\r\norg.apache.jsp..index_jsp\r\n\r\ninstead of\r\n\r\norg.apache.jsp.index_jsp\r\n\r\nin\r\n\r\nreturn getJspPackagePrefix() + \".\" +getPackageOfJspClass(jsp) + \".\" + getNameOfJspClass(jsp);\r\n\r\ngetPackageOfJspClass can be empty", "changesInPackagesGIT": ["jetty-servlet/src/main/java/org/eclipse/jetty/servlet"], "changesInPackagesSPOON": ["org.eclipse.jetty.servlet.ServletHolder.doStart()", "org.eclipse.jetty.servlet.ServletHolder.getNameOfJspClass(java.lang.String)", "org.eclipse.jetty.servlet.ServletHolder.getClassNameForJsp(java.lang.String)", "org.eclipse.jetty.servlet.ServletHolder.appendPath(java.lang.StringBuffer,java.lang.String)", "org.eclipse.jetty.servlet.ServletHolder.getPackageOfJspClass(java.lang.String)", "org.eclipse.jetty.servlet.ServletHolder.getJspPackagePrefix()"], "ttf": 1.0002777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1268"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug", "High Priority"], "user": "gregw", "filteredCommits": ["ce4c48a87707c61ff366fa417ce4b63b47777531"], "commits": {"ce4c48a87707c61ff366fa417ce4b63b47777531": {"commitUser": "sbordet", "commitGHEventType": "closed"}}, "created": "2017-01-13 07:17:35", "commitsDetails": [{"commitMessage": "Fixes #1261 - Intermittent H2C test failure AsyncIOServletTest.testAsyncReadEarlyEOF.\n\nDelayed abrupt output shutdown in case of HTTP/2, to allow to reply to\nSETTINGS frames exchanged during the preface.\n", "commitParents": ["a684c028b57ff3409ac746bcaaa5d55da1d2d24b"], "commitHash": "ce4c48a87707c61ff366fa417ce4b63b47777531", "commitSpoonAstDiffStats": [{"spoonFilePath": "AsyncIOServletTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.client.AsyncIOServletTest.testAsyncReadEarlyEOF()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "ce4c48a87707c61ff366fa417ce4b63b47777531 tags/jetty-9.3.16.v20170119~26", "commitUser": "sbordet", "authoredDateTime": "2017-01-16 12:13:05", "commitGHEventType": "closed", "commitGitStats": [{"lines": 4, "filePath": "tests/test-http-client-transport/src/test/java/org/eclipse/jetty/http/client/AsyncIOServletTest.java", "insertions": 4, "deletions": 0}], "commitDateTime": "2017-01-16 12:13:05", "spoonStatsSkippedReason": ""}], "title": "Intermittent H2C test failure AsyncIOServletTest.testAsyncReadEarlyEOF", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0, "insertions": 0, "gitFilesChange": 0, "deletions": 0}, "closed": "2017-01-16 11:14:21", "statsSkippedReason": "", "body": "Seen often if a full build but never when run directly.\r\n\r\n```\r\nRunning org.eclipse.jetty.http.client.AsyncIOServletTest.testAsyncReadEarlyEOF[transport: H2C]()\r\n2017-01-13 17:26:19.816:INFO:oejs.Server:main: jetty-9.4.1-SNAPSHOT\r\n2017-01-13 17:26:19.817:INFO:oejsh.ContextHandler:main: Started o.e.j.s.ServletContextHandler@47a05ad8{/,null,AVAILABLE}\r\n2017-01-13 17:26:19.817:INFO:oejs.AbstractConnector:main: Started ServerConnector@5b3427c4{h2c,[h2c]}{0.0.0.0:44508}\r\n2017-01-13 17:26:19.817:INFO:oejs.Server:main: Started @232554ms\r\n2017-01-13 17:26:19.817:INFO:oejus.SslContextFactory:main: x509=X509@6461c673(mykey,h=[],w=[]) for SslContextFactory@1e11d73c(file:///home/gregw/src/jetty-9.4.x/tests/test-http-client-transport/src/test/resources/keystore.jks,file:///home/gregw/src/jetty-9.4.x/tests/test-http-client-transport/src/test/resources/truststore.jks)\r\n2017-01-13 17:26:19.821:INFO:oejc.ResponseNotifier:client-5004: Exception while notifying listener org.eclipse.jetty.http.client.AsyncIOServletTest$$Lambda$61/946783101@6f6af677\r\njava.lang.AssertionError: |Expected: <204>|     but: was <0>\r\n\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n\tat org.junit.Assert.assertThat(Assert.java:956)\r\n\tat org.junit.Assert.assertThat(Assert.java:923)\r\n\tat org.eclipse.jetty.http.client.AsyncIOServletTest.lambda$testAsyncReadEarlyEOF$7(AsyncIOServletTest.java:1126)\r\n\tat org.eclipse.jetty.client.ResponseNotifier.notifyComplete(ResponseNotifier.java:193)\r\n\tat org.eclipse.jetty.client.ResponseNotifier.notifyComplete(ResponseNotifier.java:185)\r\n\tat org.eclipse.jetty.client.HttpReceiver.terminateResponse(HttpReceiver.java:459)\r\n\tat org.eclipse.jetty.client.HttpReceiver.abort(HttpReceiver.java:540)\r\n\tat org.eclipse.jetty.client.HttpChannel.abortResponse(HttpChannel.java:129)\r\n\tat org.eclipse.jetty.client.HttpChannel.abort(HttpChannel.java:122)\r\n\tat org.eclipse.jetty.http2.client.http.HttpChannelOverHTTP2.abort(HttpChannelOverHTTP2.java:99)\r\n\tat org.eclipse.jetty.client.HttpExchange.abort(HttpExchange.java:257)\r\n\tat org.eclipse.jetty.client.HttpConversation.abort(HttpConversation.java:141)\r\n\tat org.eclipse.jetty.client.HttpRequest.abort(HttpRequest.java:708)\r\n\tat org.eclipse.jetty.http2.client.http.HttpConnectionOverHTTP2.abort(HttpConnectionOverHTTP2.java:120)\r\n\tat org.eclipse.jetty.http2.client.http.HttpConnectionOverHTTP2.close(HttpConnectionOverHTTP2.java:102)\r\n\tat org.eclipse.jetty.http2.client.http.HttpClientTransportOverHTTP2$SessionListenerPromise.onFailure(HttpClientTransportOverHTTP2.java:230)\r\n\tat org.eclipse.jetty.http2.HTTP2Session.notifyFailure(HTTP2Session.java:1094)\r\n\tat org.eclipse.jetty.http2.HTTP2Session.abort(HTTP2Session.java:1002)\r\n\tat org.eclipse.jetty.http2.HTTP2Flusher.onCompleteFailure(HTTP2Flusher.java:272)\r\n\tat org.eclipse.jetty.util.IteratingCallback.failed(IteratingCallback.java:401)\r\n\tat org.eclipse.jetty.io.WriteFlusher.write(WriteFlusher.java:350)\r\n\tat org.eclipse.jetty.io.AbstractEndPoint.write(AbstractEndPoint.java:372)\r\n\tat org.eclipse.jetty.http2.HTTP2Flusher.process(HTTP2Flusher.java:198)\r\n\tat org.eclipse.jetty.util.IteratingCallback.processing(IteratingCallback.java:241)\r\n\tat org.eclipse.jetty.util.IteratingCallback.iterate(IteratingCallback.java:224)\r\n\tat org.eclipse.jetty.http2.HTTP2Session.frame(HTTP2Session.java:676)\r\n\tat org.eclipse.jetty.http2.HTTP2Session.frames(HTTP2Session.java:648)\r\n\tat org.eclipse.jetty.http2.HTTP2Session.control(HTTP2Session.java:634)\r\n\tat org.eclipse.jetty.http2.HTTP2Session.settings(HTTP2Session.java:550)\r\n\tat org.eclipse.jetty.http2.HTTP2Session.onSettings(HTTP2Session.java:377)\r\n\tat org.eclipse.jetty.http2.HTTP2Session.onSettings(HTTP2Session.java:292)\r\n\tat org.eclipse.jetty.http2.parser.BodyParser.notifySettings(BodyParser.java:151)\r\n\tat org.eclipse.jetty.http2.parser.SettingsBodyParser.onSettings(SettingsBodyParser.java:165)\r\n\tat org.eclipse.jetty.http2.parser.SettingsBodyParser.parse(SettingsBodyParser.java:123)\r\n\tat org.eclipse.jetty.http2.parser.Parser.parseBody(Parser.java:182)\r\n\tat org.eclipse.jetty.http2.parser.Parser.parse(Parser.java:110)\r\n\tat org.eclipse.jetty.http2.HTTP2Connection$HTTP2Producer.produce(HTTP2Connection.java:222)\r\n\tat org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume(ExecuteProduceConsume.java:147)\r\n\tat org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produce(ExecuteProduceConsume.java:97)\r\n\tat org.eclipse.jetty.http2.HTTP2Connection.onOpen(HTTP2Connection.java:99)\r\n\tat org.eclipse.jetty.http2.client.HTTP2ClientConnectionFactory$HTTP2ClientConnection.onOpen(HTTP2ClientConnectionFactory.java:129)\r\n\tat org.eclipse.jetty.io.SelectorManager.connectionOpened(SelectorManager.java:289)\r\n\tat org.eclipse.jetty.io.ManagedSelector.createEndPoint(ManagedSelector.java:491)\r\n\tat org.eclipse.jetty.io.ManagedSelector.access$1700(ManagedSelector.java:60)\r\n\tat org.eclipse.jetty.io.ManagedSelector$CreateEndPoint.run(ManagedSelector.java:667)\r\n\tat org.eclipse.jetty.util.thread.Invocable.invokePreferred(Invocable.java:122)\r\n\tat org.eclipse.jetty.util.thread.strategy.ExecutingExecutionStrategy.invoke(ExecutingExecutionStrategy.java:58)\r\n\tat org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume(ExecuteProduceConsume.java:201)\r\n\tat org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produce(ExecuteProduceConsume.java:97)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:672)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:590)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\n```", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 3.000277777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/1261"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug", "High Priority"], "user": "gregw", "filteredCommits": ["ddc63066fcf66e6a2b0541e02e3b5246571ac9ae", "217d7af3d55aa9a6b56071dd886fb489a7f65957"], "commits": {"ddc63066fcf66e6a2b0541e02e3b5246571ac9ae": {"commitUser": "sbordet", "commitGHEventType": "closed"}, "217d7af3d55aa9a6b56071dd886fb489a7f65957": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2017-01-13 04:21:26", "commitsDetails": [{"commitMessage": "Fixes #1259 - HostnameVerificationTest.simpleGetWithHostnameVerificationEnabledTest is broken.\n\nWhen a fill() triggered by a flush() throws, now the write flusher is\nfailed rather than completed.\nThis ensures that both the read and the write side see the same\nexception, rather than the write side seeing a ClosedChannelException.\n", "commitParents": ["ce4c48a87707c61ff366fa417ce4b63b47777531"], "commitHash": "ddc63066fcf66e6a2b0541e02e3b5246571ac9ae", "commitSpoonAstDiffStats": [{"spoonFilePath": "HostnameVerificationTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HostnameVerificationTest", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.HostnameVerificationTest.setUp()", "DEL": 1, "INS": 4, "UPD": 3, "MOV": 1, "TOT": 9}]}, {"spoonFilePath": "SslConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.FailFlusher", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.fill(java.nio.ByteBuffer)", "DEL": 0, "INS": 5, "UPD": 0, "MOV": 1, "TOT": 6}]}], "nameRev": "ddc63066fcf66e6a2b0541e02e3b5246571ac9ae tags/jetty-9.3.16.v20170119~25", "commitUser": "sbordet", "authoredDateTime": "2017-01-16 19:05:09", "commitGHEventType": "closed", "commitGitStats": [{"lines": 13, "filePath": "jetty-client/src/test/java/org/eclipse/jetty/client/HostnameVerificationTest.java", "insertions": 8, "deletions": 5}, {"lines": 26, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ssl/SslConnection.java", "insertions": 25, "deletions": 1}], "commitDateTime": "2017-01-16 19:05:09", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1259 ignoring broken test\n", "commitParents": ["df08f7fd4e552ebfd72d062a42aa0cc8fca24bd5"], "commitHash": "217d7af3d55aa9a6b56071dd886fb489a7f65957", "commitSpoonAstDiffStats": [{"spoonFilePath": "HostnameVerificationTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HostnameVerificationTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "217d7af3d55aa9a6b56071dd886fb489a7f65957 tags/jetty-9.4.1.v20170120~32", "commitUser": "gregw", "authoredDateTime": "2017-01-13 15:25:22", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-client/src/test/java/org/eclipse/jetty/client/HostnameVerificationTest.java", "insertions": 2, "deletions": 0}], "commitDateTime": "2017-01-13 15:25:22", "spoonStatsSkippedReason": ""}], "title": "HostnameVerificationTest.simpleGetWithHostnameVerificationEnabledTest is broken", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 0, "INS": 6, "UPD": 0, "MOV": 1, "TOT": 7, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 26, "insertions": 25, "gitFilesChange": 1, "deletions": 1}, "closed": "2017-01-16 18:20:44", "statsSkippedReason": "", "body": "Test has been failing consistently.  Having @Ignored if for now.\r\n\r\n```\r\n2017-01-13 15:15:57.305:INFO:oejs.Server:main: Started @230009ms\r\n2017-01-13 15:15:57.306:INFO:oejus.SslContextFactory:main: x509=X509@64836643(mykey,h=[],w=[]) for SslContextFactory@981d9d2(file:///home/gregw/src/jetty-9.4.x/jetty-client/src/test/resources/keystore.jks,null)\r\n2017-01-13 15:15:57.324:INFO:oejs.AbstractConnector:main: Stopped ServerConnector@4db45d{SSL,[ssl, http/1.1]}{0.0.0.0:0}\r\nTests run: 3, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.075 sec <<< FAILURE! - in org.eclipse.jetty.client.HostnameVerificationTest\r\nsimpleGetWithHostnameVerificationEnabledTest(org.eclipse.jetty.client.HostnameVerificationTest)  Time elapsed: 0.025 sec  <<< FAILURE!\r\njava.lang.AssertionError: \r\n\r\nExpected: an instance of javax.net.ssl.SSLHandshakeException\r\n     but: <java.nio.channels.ClosedChannelException> is a java.nio.channels.ClosedChannelException\r\n\tat org.eclipse.jetty.client.HostnameVerificationTest.simpleGetWithHostnameVerificationEnabledTest(HostnameVerificationTest.java:112)\r\n\r\nHeap\r\n PSYoungGen      total 342016K, used 89800K [0x00000000eab00000, 0x0000000100000000, 0x0000000100000000)\r\n  eden space 334848K, 26% used [0x00000000eab00000,0x00000000f0026fd8,0x00000000ff200000)\r\n  from space 7168K, 36% used [0x00000000ff200000,0x00000000ff48b360,0x00000000ff900000)\r\n  to   space 7168K, 0% used [0x00000000ff900000,0x00000000ff900000,0x0000000100000000)\r\n ParOldGen       total 699392K, used 6260K [0x00000000c0000000, 0x00000000eab00000, 0x00000000eab00000)\r\n  object space 699392K, 0% used [0x00000000c0000000,0x00000000c061d008,0x00000000eab00000)\r\n Metaspace       used 21583K, capacity 22308K, committed 22400K, reserved 1069056K\r\n  class space    used 2236K, capacity 2420K, committed 2432K, reserved 1048576K\r\n\r\nResults :\r\n\r\nFailed tests: \r\n  HostnameVerificationTest.simpleGetWithHostnameVerificationEnabledTest:112 \r\nExpected: an instance of javax.net.ssl.SSLHandshakeException\r\n     but: <java.nio.channels.ClosedChannelException> is a java.nio.channels.ClosedChannelException\r\n\r\nTests run: 485, Failures: 1, Errors: 0, Skipped: 8\r\n```", "changesInPackagesGIT": ["jetty-io/src/main/java/org/eclipse/jetty/io/ssl"], "changesInPackagesSPOON": ["org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.FailFlusher", "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.fill(java.nio.ByteBuffer)"], "ttf": 3.000277777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1259"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "gregw", "filteredCommits": ["36dcf47f189cc42708424591795efeaf783bfca8"], "commits": {"36dcf47f189cc42708424591795efeaf783bfca8": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2017-01-11 03:35:25", "commitsDetails": [{"commitMessage": "Issue #1234 onBadMessage\n\nAdded a boolean to determine if headerComplete has been called, and if so then earlyEOF is called\n", "commitParents": ["d2b898024353030c2840141ad7417dffe22bdce6"], "commitHash": "36dcf47f189cc42708424591795efeaf783bfca8", "commitSpoonAstDiffStats": [{"spoonFilePath": "PostServletTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.PostServletTest.testDeferredBadPost()", "DEL": 1, "INS": 4, "UPD": 2, "MOV": 15, "TOT": 22}, {"spoonMethodName": "org.eclipse.jetty.servlet.PostServletTest.testBadPost()", "DEL": 1, "INS": 1, "UPD": 3, "MOV": 4, "TOT": 9}]}, {"spoonFilePath": "HttpChannelOverHttp.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannelOverHttp.earlyEOF()", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 1, "TOT": 4}]}, {"spoonFilePath": "HttpServerTestFixture.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpServerTestFixture.ReadHandler", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AsyncRequestReadTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.AsyncRequestReadTest.testPartialReadThenShutdown()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpConnectionTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpConnectionTest.testBadURIencoding()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpServerTestBase.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpServerTestBase.testBlockingReadBadChunk()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpParser.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.HttpParser.badMessage()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.HttpParser.reset()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.HttpParser", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.HttpParser.parseHeaders(java.nio.ByteBuffer)", "DEL": 0, "INS": 4, "UPD": 0, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.http.HttpParser.parseNext(java.nio.ByteBuffer)", "DEL": 2, "INS": 2, "UPD": 0, "MOV": 4, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.http.HttpParser.parseLine(java.nio.ByteBuffer)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}]}], "nameRev": "36dcf47f189cc42708424591795efeaf783bfca8 tags/jetty-9.3.16.v20170119~34", "commitUser": "gregw", "authoredDateTime": "2017-01-11 17:36:04", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 6, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannelOverHttp.java", "insertions": 5, "deletions": 1}, {"lines": 1, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/AsyncRequestReadTest.java", "insertions": 1, "deletions": 0}, {"lines": 47, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/HttpParser.java", "insertions": 23, "deletions": 24}, {"lines": 21, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/HttpServerTestFixture.java", "insertions": 21, "deletions": 0}, {"lines": 2, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/HttpConnectionTest.java", "insertions": 1, "deletions": 1}, {"lines": 44, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/PostServletTest.java", "insertions": 18, "deletions": 26}, {"lines": 49, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/HttpServerTestBase.java", "insertions": 49, "deletions": 0}], "commitDateTime": "2017-01-11 17:36:04", "spoonStatsSkippedReason": ""}], "title": "onBadMessage called from with handled message", "spoonStatsSummary": {"spoonMethodsChanged": 7, "DEL": 2, "INS": 14, "UPD": 0, "MOV": 5, "TOT": 21, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 53, "insertions": 28, "gitFilesChange": 2, "deletions": 25}, "closed": "2017-02-09 05:25:55", "statsSkippedReason": "", "body": "The HttpParser can from a HttpInput read to produce more content.  However, if there is an error in that content (eg bad chunk), then the onBadMessage  callback can be called which tries to complete the message from within the read:\r\n```\r\n...\r\nat org.eclipse.jetty.server.HttpChannel.recycle(HttpChannel.java:248)\r\nat org.eclipse.jetty.server.HttpChannelOverHttp.recycle(HttpChannelOverHttp.java:82)\r\nat org.eclipse.jetty.server.HttpConnection.onCompleted(HttpConnection.java:425)\r\nat org.eclipse.jetty.server.HttpChannel.onCompleted(HttpChannel.java:611)\r\nat org.eclipse.jetty.server.HttpChannel.onBadMessage(HttpChannel.java:649)\r\nat org.eclipse.jetty.server.HttpChannelOverHttp.badMessage(HttpChannelOverHttp.java:257)\r\nat org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:1423)\r\nat org.eclipse.jetty.server.HttpConnection.parseRequestBuffer(HttpConnection.java:357)\r\nat org.eclipse.jetty.server.HttpConnection.fillAndParseForContent(HttpConnection.java:292)\r\nat org.eclipse.jetty.server.HttpInputOverHTTP.produceContent(HttpInputOverHTTP.java:33)\r\nat org.eclipse.jetty.server.HttpInput.nextContent(HttpInput.java:186)\r\nat org.eclipse.jetty.server.HttpInput.read(HttpInput.java:145)\r\n...\r\n```", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server", "jetty-http/src/main/java/org/eclipse/jetty/http"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.HttpChannelOverHttp.earlyEOF()", "org.eclipse.jetty.http.HttpParser.badMessage()", "org.eclipse.jetty.http.HttpParser.reset()", "org.eclipse.jetty.http.HttpParser", "org.eclipse.jetty.http.HttpParser.parseHeaders(java.nio.ByteBuffer)", "org.eclipse.jetty.http.HttpParser.parseNext(java.nio.ByteBuffer)", "org.eclipse.jetty.http.HttpParser.parseLine(java.nio.ByteBuffer)"], "ttf": 29.00027777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1234"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 3, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["25a1864de7036e0d09b5ce858e095926c80a78a5", "9653d74caee8bf8f3a7d032c313fe7d7c245a20a"], "commits": {"9653d74caee8bf8f3a7d032c313fe7d7c245a20a": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "cccc7e067ebcec6e45b1f8285d5b7f420a88e5f6": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "51f68dc57e06fb439ae690212bd93a4d6d451a16": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "832b98f11ead9ddeea33033a378ea2485c968cd8": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "25a1864de7036e0d09b5ce858e095926c80a78a5": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2017-01-10 15:11:23", "commitsDetails": [{"commitMessage": "Issue #1229 - ClassLoader constraint issue when using NativeWebSocketConfiguration with WEB-INF/lib/jetty-http.jar present.\n\nGuarded against NPE.\n", "commitParents": ["51f68dc57e06fb439ae690212bd93a4d6d451a16"], "commitHash": "9653d74caee8bf8f3a7d032c313fe7d7c245a20a", "commitSpoonAstDiffStats": [{"spoonFilePath": "ServletPathSpec.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.pathmap.ServletPathSpec", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "9653d74caee8bf8f3a7d032c313fe7d7c245a20a tags/jetty-9.3.16.v20170120~2^2", "commitUser": "sbordet", "authoredDateTime": "2017-01-20 15:41:41", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/pathmap/ServletPathSpec.java", "insertions": 2, "deletions": 0}], "commitDateTime": "2017-01-20 15:41:41", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "cccc7e067ebcec6e45b1f8285d5b7f420a88e5f6", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1229 - ClassLoader constraint issue when using NativeWebSocketConfiguration with WEB-INF/lib/jetty-http.jar present.\n\nIntroduced String-based APIs to specify mappings, to avoid the\nclassloader issue.\n", "commitParents": ["ce3e6dafec21fc341c270445e8d3fbffe324f09f"], "commitHash": "51f68dc57e06fb439ae690212bd93a4d6d451a16", "commitSpoonAstDiffStats": [{"spoonFilePath": "NativeWebSocketConfiguration.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.NativeWebSocketConfiguration.toPathSpec(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.NativeWebSocketConfiguration.addMapping(java.lang.String,java.lang.Class)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.NativeWebSocketConfiguration.getMapping(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.NativeWebSocketConfiguration.getMappings()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.NativeWebSocketConfiguration.removeMapping(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.NativeWebSocketConfiguration.addMapping(java.lang.String,org.eclipse.jetty.websocket.servlet.WebSocketCreator)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "InfoContextAttributeListener.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.InfoContextAttributeListener.contextInitialized(javax.servlet.ServletContextEvent)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "InfoServlet.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.InfoServlet.init(javax.servlet.ServletConfig)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "MappedWebSocketCreator.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.getMapping(java.lang.String)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.removeMapping(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.addMapping(java.lang.String,org.eclipse.jetty.websocket.servlet.WebSocketCreator)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "WebSocketUpgradeHandlerWrapper.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketUpgradeHandlerWrapper.getMapping(java.lang.String)", "DEL": 1, "INS": 1, "UPD": 2, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketUpgradeHandlerWrapper.removeMapping(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketUpgradeHandlerWrapper.addMapping(java.lang.String,org.eclipse.jetty.websocket.servlet.WebSocketCreator)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "WebSocketServerContainerInitializer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer.isEnabledViaContext(javax.servlet.ServletContext,java.lang.String,boolean)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer.onStartup(java.util.Set,javax.servlet.ServletContext)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer.configureContext(org.eclipse.jetty.servlet.ServletContextHandler)", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 4, "TOT": 7}]}, {"spoonFilePath": "ServerContainer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.ServerContainer.addEndpoint(org.eclipse.jetty.websocket.jsr356.server.ServerEndpointMetadata)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}]}, {"spoonFilePath": "RegexPathSpec.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.pathmap.RegexPathSpec", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "ServletPathSpec.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.pathmap.ServletPathSpec", "DEL": 2, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 4}]}, {"spoonFilePath": "InfoContextListener.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.InfoContextListener.contextInitialized(javax.servlet.ServletContextEvent)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "DummyCreator.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.DummyCreator.removeMapping(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.DummyCreator.getMapping(java.lang.String)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.DummyCreator.addMapping(java.lang.String,org.eclipse.jetty.websocket.servlet.WebSocketCreator)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "WebSocketUpgradeFilterTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketUpgradeFilterTest.data().3.newServer()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketUpgradeFilterTest.data().4.newServer()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketUpgradeFilterTest.data().2.newServer()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "WebSocketCloseTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketCloseTest.testFastFail()", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketCloseTest.testFastClose()", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 0, "TOT": 3}]}, {"spoonFilePath": "WebSocketUpgradeFilter.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter.addMapping(java.lang.String,org.eclipse.jetty.websocket.servlet.WebSocketCreator)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter.removeMapping(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter.getMapping(java.lang.String)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}], "nameRev": "51f68dc57e06fb439ae690212bd93a4d6d451a16 tags/jetty-9.3.16.v20170120~3^2", "commitUser": "sbordet", "authoredDateTime": "2017-01-20 11:34:29", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 40, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/MappedWebSocketCreator.java", "insertions": 32, "deletions": 8}, {"lines": 3, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/InfoContextAttributeListener.java", "insertions": 1, "deletions": 2}, {"lines": 3, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/InfoServlet.java", "insertions": 1, "deletions": 2}, {"lines": 18, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/WebSocketUpgradeHandlerWrapper.java", "insertions": 15, "deletions": 3}, {"lines": 3, "filePath": "jetty-websocket/javax-websocket-server-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/server/ServerContainer.java", "insertions": 1, "deletions": 2}, {"lines": 5, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/pathmap/ServletPathSpec.java", "insertions": 3, "deletions": 2}, {"lines": 4, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/pathmap/RegexPathSpec.java", "insertions": 3, "deletions": 1}, {"lines": 19, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/WebSocketCloseTest.java", "insertions": 10, "deletions": 9}, {"lines": 42, "filePath": "jetty-websocket/websocket-server/src/test/resources/wsuf-config-via-servlet-init.xml", "insertions": 23, "deletions": 19}, {"lines": 3, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/InfoContextListener.java", "insertions": 1, "deletions": 2}, {"lines": 38, "filePath": "jetty-websocket/websocket-server/src/test/resources/wsuf-config-via-listener.xml", "insertions": 21, "deletions": 17}, {"lines": 17, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/WebSocketUpgradeFilterTest.java", "insertions": 8, "deletions": 9}, {"lines": 18, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/WebSocketUpgradeFilter.java", "insertions": 15, "deletions": 3}, {"lines": 20, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/DummyCreator.java", "insertions": 15, "deletions": 5}, {"lines": 85, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/NativeWebSocketConfiguration.java", "insertions": 83, "deletions": 2}, {"lines": 5, "filePath": "jetty-websocket/javax-websocket-server-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/server/deploy/WebSocketServerContainerInitializer.java", "insertions": 4, "deletions": 1}], "commitDateTime": "2017-01-20 11:34:29", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "832b98f11ead9ddeea33033a378ea2485c968cd8", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1229 - Adding testcase for WAR (expanded) with WEB-INF/lib/jetty-http.jar\n", "commitParents": ["b8986d581266fea56fc20953d1460f6b01d1f5bc"], "commitHash": "25a1864de7036e0d09b5ce858e095926c80a78a5", "commitSpoonAstDiffStats": [{"spoonFilePath": "WebSocketUpgradeFilterTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketUpgradeFilterTest.data().8", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketUpgradeFilterTest.data()", "DEL": 0, "INS": 1, "UPD": 2, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketUpgradeFilterTest.data().9", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "WSServer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.WSServer.copyLib(java.lang.Class,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.WSServer.copyClass(java.lang.Class)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "25a1864de7036e0d09b5ce858e095926c80a78a5 tags/jetty-9.3.16.v20170119~33^2", "commitUser": "joakime", "authoredDateTime": "2017-01-10 11:12:14", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 27, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/WebSocketUpgradeFilterTest.java", "insertions": 27, "deletions": 0}, {"lines": 35, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/WSServer.java", "insertions": 31, "deletions": 4}], "commitDateTime": "2017-01-10 11:12:14", "spoonStatsSkippedReason": ""}], "title": "ClassLoader constraint issue when using NativeWebSocketConfiguration with WEB-INF/lib/jetty-http.jar present", "spoonStatsSummary": {"spoonMethodsChanged": 3, "DEL": 0.0, "INS": 2.0, "UPD": 1.0, "MOV": 0.0, "TOT": 3.0, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 2.0, "insertions": 2.0, "gitFilesChange": 1, "deletions": 0.0}, "closed": "2017-02-01 21:06:59", "statsSkippedReason": "", "body": "As reported in jetty-dev by Michele Rossi\r\nhttps://dev.eclipse.org/mhonarc/lists/jetty-dev/msg02862.html\r\n\r\n> I am getting the following exception when trying to start up the WebSockets transport using CometD 3.1.0 and Jetty 9.3.15:\r\n> \r\n> \r\n> 14:39:16.244|WARN |o.e.j.d.DeploymentManager||Unable to reach node goal: started\r\n> java.lang.LinkageError: loader constraint violation: when resolving method \"org.eclipse.jetty.websocket.server.NativeWebSocketConfiguration.addMapping(Lorg/eclipse/jetty/http/pathmap/PathSpec;Lorg/eclipse/jetty/websocket/servlet/WebSocketCreator;)V\" the class loader (instance of org/eclipse/jetty/webapp/WebAppClassLoader) of the current class, org/cometd/websocket/server/JettyWebSocketTransport, and the class loader (instance of org/eclipse/jetty/start/Classpath$Loader) for the method's defining class, org/eclipse/jetty/websocket/server/NativeWebSocketConfiguration, have different Class objects for the type org/eclipse/jetty/http/pathmap/PathSpec used in the signature\r\n>         at org.cometd.websocket.server.JettyWebSocketTransport.init(JettyWebSocketTransport.java:75)\r\n>         at org.cometd.server.BayeuxServerImpl.initializeServerTransports(BayeuxServerImpl.java:255)\r\n>         at org.cometd.server.BayeuxServerImpl.doStart(BayeuxServerImpl.java:135)\r\n>         at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n>         at org.cometd.server.CometDServlet.init(CometDServlet.java:64)\r\n\r\nNeed to introduce testcase where the WEB-INF/lib/jetty-http.jar is present in a WebAppContext based deployment (WAR file).", "changesInPackagesGIT": ["jetty-http/src/main/java/org/eclipse/jetty/http/pathmap"], "changesInPackagesSPOON": ["org.eclipse.jetty.http.pathmap.ServletPathSpec", "org.eclipse.jetty.websocket.server.WSServer.copyClass(java.lang.Class)", "org.eclipse.jetty.websocket.server.WSServer.copyLib(java.lang.Class,java.lang.String)"], "ttf": 22.00027777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1229"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "janbartel", "filteredCommits": ["9324971d2027aaea70e8becf7ac00ebedde140b7", "0fc897233a0a83720d7d353b98224b662f152463"], "commits": {"9324971d2027aaea70e8becf7ac00ebedde140b7": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "0fc897233a0a83720d7d353b98224b662f152463": {"commitUser": "joakime", "commitGHEventType": "closed"}}, "created": "2017-01-04 05:35:26", "commitsDetails": [{"commitMessage": "Issue #1216 improving init/destroy in WSUF\n", "commitParents": ["ecc3c57dd1f5624992c7e86ea31c5b9fec882ced"], "commitHash": "9324971d2027aaea70e8becf7ac00ebedde140b7", "commitSpoonAstDiffStats": [{"spoonFilePath": "WebSocketUpgradeFilter.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter.destroy()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter.init(javax.servlet.FilterConfig)", "DEL": 3, "INS": 7, "UPD": 1, "MOV": 3, "TOT": 14}]}], "nameRev": "9324971d2027aaea70e8becf7ac00ebedde140b7 tags/jetty-9.4.1.v20170120~65", "commitUser": "joakime", "authoredDateTime": "2017-01-04 10:42:51", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 16, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/WebSocketUpgradeFilter.java", "insertions": 12, "deletions": 4}], "commitDateTime": "2017-01-04 10:42:51", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #1216 to prevent duplicate SCI initialization of WSUF\n", "commitParents": ["9324971d2027aaea70e8becf7ac00ebedde140b7"], "commitHash": "0fc897233a0a83720d7d353b98224b662f152463", "commitSpoonAstDiffStats": [{"spoonFilePath": "WebSocketServerContainerInitializer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer.configureContext(org.eclipse.jetty.servlet.ServletContextHandler)", "DEL": 1, "INS": 3, "UPD": 0, "MOV": 3, "TOT": 7}]}, {"spoonFilePath": "WebSocketUpgradeFilter.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter.destroy()", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter.init(javax.servlet.FilterConfig)", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 2}]}], "nameRev": "0fc897233a0a83720d7d353b98224b662f152463 tags/jetty-9.4.1.v20170120~64", "commitUser": "joakime", "authoredDateTime": "2017-01-04 11:30:19", "commitGHEventType": "closed", "commitGitStats": [{"lines": 7, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/WebSocketUpgradeFilter.java", "insertions": 0, "deletions": 7}, {"lines": 7, "filePath": "jetty-websocket/javax-websocket-server-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/server/deploy/WebSocketServerContainerInitializer.java", "insertions": 6, "deletions": 1}], "commitDateTime": "2017-01-04 11:30:19", "spoonStatsSkippedReason": ""}], "title": "Can't stop/start a WebAppContext with websocket", "spoonStatsSummary": {"spoonMethodsChanged": 4, "DEL": 9, "INS": 14, "UPD": 1, "MOV": 6, "TOT": 30, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 30, "insertions": 18, "gitFilesChange": 2, "deletions": 12}, "closed": "2017-01-04 15:30:29", "statsSkippedReason": "", "body": "Modifying the OneWebAppWithJsp embedded example to include a thread that repetitively stops and starts the webapp context fails:\r\n\r\n```\r\njavax.servlet.ServletException: org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter is defined twice for the same context attribute key 'org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter'.  Make sure you have different init-param 'contextAttributeKey' values set\r\n\tat org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter.setToAttribute(WebSocketUpgradeFilter.java:380)\r\n\tat org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter.init(WebSocketUpgradeFilter.java:354)\r\n\tat org.eclipse.jetty.servlet.FilterHolder.initialize(FilterHolder.java:139)\r\n\tat org.eclipse.jetty.servlet.ServletHandler.initialize(ServletHandler.java:725)\r\n\tat org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:348)\r\n\tat org.eclipse.jetty.webapp.WebAppContext.startWebapp(WebAppContext.java:1486)\r\n\tat org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1443)\r\n\tat org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:788)\r\n\tat org.eclipse.jetty.servlet.ServletContextHandler.doStart(ServletContextHandler.java:261)\r\n\tat org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:541)\r\n\tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n\tat org.eclipse.jetty.embedded.OneWebAppWithJsp$1.run(OneWebAppWithJsp.java:129)\r\n\r\n```\r\n\r\nStopping and restarting the same webapp instance should work.\r\n\r\nThe code I inserted was just before the server.join():\r\n\r\n```java       \r\n        Thread t = new Thread() {\r\n\r\n            /** \r\n             * @see java.lang.Thread#run()\r\n             */\r\n            @Override\r\n            public void run()\r\n            {\r\n                while (true)\r\n                {\r\n                    try\r\n                    {\r\n                        Thread.currentThread().sleep(2000);\r\n\r\n                        webapp.stop();\r\n\r\n                        Thread.currentThread().sleep(2000);\r\n\r\n                        webapp.start();\r\n\r\n                    }\r\n                    catch (Exception e)\r\n                    {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n            }\r\n\r\n        };\r\n        t.setDaemon(true);\r\n        t.start();\r\n```\r\n\r\n", "changesInPackagesGIT": ["jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server", "jetty-websocket/javax-websocket-server-impl/src/main/java/org/eclipse/jetty/websocket/jsr356"], "changesInPackagesSPOON": ["org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter", "org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter.destroy()", "org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer.configureContext(org.eclipse.jetty.servlet.ServletContextHandler)", "org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter.init(javax.servlet.FilterConfig)"], "ttf": 0.0002777777777777778, "numCommits": 2, "url": "https://github.com/eclipse/jetty.project/issues/1216"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "sbordet", "filteredCommits": ["c018eb5b927c5f56ed3035504b7ab4adb9d21f77", "e2d70579885a61042d68da8474a8bfcbb32e2189"], "commits": {"e2d70579885a61042d68da8474a8bfcbb32e2189": {"commitUser": "sbordet", "commitGHEventType": "closed"}, "c018eb5b927c5f56ed3035504b7ab4adb9d21f77": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2016-12-31 10:26:02", "commitsDetails": [{"commitMessage": "Fixes #1209 - IllegalStateException when HTTP/2 push is disabled.\n\nAligned the behavior with Servlet 4.0, returning null if push is\nnot supported or disabled by the client.\n", "commitParents": ["8d0af35a5f55cbadf42032b53ffcac7c5f0fe983"], "commitHash": "e2d70579885a61042d68da8474a8bfcbb32e2189", "commitSpoonAstDiffStats": [{"spoonFilePath": "Request.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Request.getPushBuilder()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}]}], "nameRev": "e2d70579885a61042d68da8474a8bfcbb32e2189 tags/jetty-9.4.8.v20171121~115", "commitUser": "sbordet", "authoredDateTime": "2017-10-03 18:53:00", "commitGHEventType": "closed", "commitGitStats": [{"lines": 2, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Request.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2017-10-03 18:53:00", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1209 - IllegalStateException when HTTP/2 push is disabled.\n\nSkipping filter logic when HTTP/2 push is disabled.\n", "commitParents": ["e215b065dfb44ec501a6cfb13721c5d0f8f97c5c"], "commitHash": "c018eb5b927c5f56ed3035504b7ab4adb9d21f77", "commitSpoonAstDiffStats": [{"spoonFilePath": "PushCacheFilter.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlets.PushCacheFilter.doFilter(javax.servlet.ServletRequest,javax.servlet.ServletResponse,javax.servlet.FilterChain)", "DEL": 3, "INS": 1, "UPD": 2, "MOV": 4, "TOT": 10}]}, {"spoonFilePath": "PushCacheFilterTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.client.PushCacheFilterTest.testPushDisabled()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "c018eb5b927c5f56ed3035504b7ab4adb9d21f77 tags/jetty-9.4.1.v20170120~69", "commitUser": "sbordet", "authoredDateTime": "2016-12-31 12:19:46", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 11, "filePath": "jetty-servlets/src/main/java/org/eclipse/jetty/servlets/PushCacheFilter.java", "insertions": 6, "deletions": 5}, {"lines": 90, "filePath": "jetty-http2/http2-client/src/test/java/org/eclipse/jetty/http2/client/PushCacheFilterTest.java", "insertions": 90, "deletions": 0}], "commitDateTime": "2016-12-31 12:19:46", "spoonStatsSkippedReason": ""}], "title": "IllegalStateException when HTTP/2 push is disabled", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 4, "INS": 2, "UPD": 2, "MOV": 4, "TOT": 12, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 13, "insertions": 7, "gitFilesChange": 2, "deletions": 6}, "closed": "2017-10-03 16:54:10", "statsSkippedReason": "", "body": "The client sent a SETTINGS frame with push disabled on connection establishment:\r\n\r\n```\r\n2016-12-31 07:39:09.496:DBUG:oejh.HTTP2Session:qtp486994287-279: Received SettingsFrame@ad59ecd,reply=false:{2=0, 3=100}\r\n2016-12-31 07:39:09.496:DBUG:oejh.HTTP2Session:qtp486994287-279: Disable push for HTTP2ServerSession@50edb5e3{l:/<local>:443 <-> r:/<remote>:18510,queueSize=0,sendWindow=65535,recvWindow=65535,s\r\ntreams=0,NOT_CLOSED}\r\n```\r\n\r\nHowever, `PushCacheFilter` tries to push anyway. In Jetty 9.3.x this was silently ignored, but in 9.4.x we throw an `IllegalStateException`:\r\n\r\n```\r\njava.lang.IllegalStateException: Request(GET https://webtide.com/blogs/)@b0e464c,push=false,channel=ServerHttpChannelOverHTTP2@5517de55{r=3,c=false,a=DISPATCHED,uri=https://webtide.com/blogs/}#5\r\n        at org.eclipse.jetty.server.Request.getPushBuilder(Request.java:278)\r\n        at org.eclipse.jetty.servlets.PushCacheFilter.doFilter(PushCacheFilter.java:261)\r\n```\r\n\r\nThis is too aggressive, we must just ignore the attempt to push.", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server", "jetty-servlets/src/main/java/org/eclipse/jetty/servlets"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.Request.getPushBuilder()", "org.eclipse.jetty.servlets.PushCacheFilter.doFilter(javax.servlet.ServletRequest,javax.servlet.ServletResponse,javax.servlet.FilterChain)"], "ttf": 276.0002777777778, "numCommits": 2, "url": "https://github.com/eclipse/jetty.project/issues/1209"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "sbordet", "filteredCommits": ["487748cd8f305af9daafc59dd33c9c7d4d5fd832"], "commits": {"941f06312fd18610983180eb3184e2322977c7bd": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "487748cd8f305af9daafc59dd33c9c7d4d5fd832": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2016-12-30 16:57:12", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "941f06312fd18610983180eb3184e2322977c7bd", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1207 - Making EventDriver use WebSocketContainerScope instead\n", "commitParents": ["77b1617fdd925f67642e918bdd12bd4e61245942"], "commitHash": "487748cd8f305af9daafc59dd33c9c7d4d5fd832", "commitSpoonAstDiffStats": [{"spoonFilePath": "OnPartialTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.OnPartialTest.toEventDriver(java.lang.Object)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 2, "TOT": 3}]}, {"spoonFilePath": "EventDriverTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.events.EventDriverTest.wrap(java.lang.Object)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "ClientContainer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.ClientContainer", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "MessageOutputStreamTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.message.MessageOutputStreamTest.setupSession()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}]}, {"spoonFilePath": "EventDriverFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.events.EventDriverFactory", "DEL": 0, "INS": 0, "UPD": 6, "MOV": 0, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.events.EventDriverFactory.wrap(java.lang.Object)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 1, "TOT": 3}]}, {"spoonFilePath": "WebSocketServerFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketServerFactory", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "JsrEventDriverFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.endpoints.JsrEventDriverFactory", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 0, "TOT": 3}]}, {"spoonFilePath": "MessageWriterTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.message.MessageWriterTest.setupSession()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}]}, {"spoonFilePath": "EventDriverFactoryTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.events.EventDriverFactoryTest.testListenerBasicSocket()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.events.EventDriverFactoryTest.testBadNotASocket()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.events.EventDriverFactoryTest.testAdapterConnectCloseSocket()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "WebSocketClient.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketClient.getMaxBinaryMessageBufferSize()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketClient.setMaxBinaryMessageBufferSize(int)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketClient.setMaxTextMessageBufferSize(int)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketClient.setMaxIdleTimeout(long)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketClient.getOpenSessions()", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketClient.getAsyncWriteTimeout()", "DEL": 0, "INS": 1, "UPD": 2, "MOV": 1, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketClient.getPolicy()", "DEL": 0, "INS": 1, "UPD": 2, "MOV": 1, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketClient.getObjectFactory()", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 2, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketClient.getMaxIdleTimeout()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketClient.getMaxBinaryMessageSize()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketClient.setAsyncWriteTimeout(long)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketClient", "DEL": 4, "INS": 3, "UPD": 12, "MOV": 5, "TOT": 24}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketClient.getMaxTextMessageSize()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketClient.getMaxTextMessageBufferSize()", "DEL": 0, "INS": 1, "UPD": 2, "MOV": 2, "TOT": 5}]}], "nameRev": "487748cd8f305af9daafc59dd33c9c7d4d5fd832 tags/jetty-9.4.1.v20170120~51", "commitUser": "sbordet", "authoredDateTime": "2017-01-03 06:27:06", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 7, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/events/EventDriverFactoryTest.java", "insertions": 4, "deletions": 3}, {"lines": 8, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/message/MessageWriterTest.java", "insertions": 4, "deletions": 4}, {"lines": 2, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/ClientContainer.java", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/WebSocketServerFactory.java", "insertions": 1, "deletions": 1}, {"lines": 6, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/OnPartialTest.java", "insertions": 3, "deletions": 3}, {"lines": 10, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/events/EventDriverFactory.java", "insertions": 5, "deletions": 5}, {"lines": 2, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/events/EventDriverTest.java", "insertions": 1, "deletions": 1}, {"lines": 8, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/message/MessageOutputStreamTest.java", "insertions": 4, "deletions": 4}, {"lines": 6, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/endpoints/JsrEventDriverFactory.java", "insertions": 3, "deletions": 3}, {"lines": 56, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/WebSocketClient.java", "insertions": 26, "deletions": 30}], "commitDateTime": "2017-01-10 16:27:49", "spoonStatsSkippedReason": ""}], "title": "WebSocketPolicy configuration inconsistent when using JSR", "spoonStatsSummary": {"spoonMethodsChanged": 19, "DEL": 13.0, "INS": 16.0, "UPD": 32.0, "MOV": 21.0, "TOT": 82.0, "spoonFilesChanged": 5}, "gitStatsSummary": {"lines": 76.0, "insertions": 36.0, "gitFilesChange": 5, "deletions": 40.0}, "closed": "2017-01-10 21:28:58", "statsSkippedReason": "", "body": "Applications that use JSR 356 call `ContainerProvider.getWebSocketContainer()` that creates a `ClientContainer`.\r\n\r\n`ClientContainer` creates a `SimpleContainerScope`, which owns a `WebSocketPolicy` object.\r\n`ClientContainer` also creates a `WebSocketClient` that also owns a (different) `WebSocketPolicy` object.\r\n\r\nWhen applications call, for example, `WebSocketContainer.setDefaultMaxTextMessageBufferSize()`, the implementation delegates to `WebSocketClient`, modifying its `WebSocketPolicy`.\r\n\r\nWhen a connection is created by the client, `WebSocketUpgradeRequest` creates an `EventDriver` (field `localEndpoint` that uses a `WebSocketPolicy` from the `EventDriverFactory` which in turn received it from from the `SimpleContainerScope`.\r\n\r\nBecause there are 2 `WebSocketPolicy` instances, configurations made by the application onto `WebSocketClient` are \"lost\" because the wrong instance (that of the `SimpleContainerScope`) is being used.\r\n\r\nThere must be only one `WebSocketPolicy` object.", "changesInPackagesGIT": ["jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client", "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356", "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server", "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common"], "changesInPackagesSPOON": ["org.eclipse.jetty.websocket.client.WebSocketClient.getMaxBinaryMessageBufferSize()", "org.eclipse.jetty.websocket.client.WebSocketClient.setMaxBinaryMessageBufferSize(int)", "org.eclipse.jetty.websocket.common.events.EventDriverFactory.wrap(java.lang.Object)", "org.eclipse.jetty.websocket.client.WebSocketClient.getPolicy()", "org.eclipse.jetty.websocket.client.WebSocketClient.setMaxTextMessageBufferSize(int)", "org.eclipse.jetty.websocket.jsr356.endpoints.JsrEventDriverFactory", "org.eclipse.jetty.websocket.client.WebSocketClient.getOpenSessions()", "org.eclipse.jetty.websocket.client.WebSocketClient.setMaxIdleTimeout(long)", "org.eclipse.jetty.websocket.server.WebSocketServerFactory", "org.eclipse.jetty.websocket.client.WebSocketClient.getAsyncWriteTimeout()", "org.eclipse.jetty.websocket.client.WebSocketClient.getObjectFactory()", "org.eclipse.jetty.websocket.client.WebSocketClient.getMaxIdleTimeout()", "org.eclipse.jetty.websocket.jsr356.ClientContainer", "org.eclipse.jetty.websocket.common.events.EventDriverFactory", "org.eclipse.jetty.websocket.client.WebSocketClient.getMaxBinaryMessageSize()", "org.eclipse.jetty.websocket.client.WebSocketClient.setAsyncWriteTimeout(long)", "org.eclipse.jetty.websocket.client.WebSocketClient", "org.eclipse.jetty.websocket.client.WebSocketClient.getMaxTextMessageSize()", "org.eclipse.jetty.websocket.client.WebSocketClient.getMaxTextMessageBufferSize()"], "ttf": 11.000277777777777, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1207"}, {"labels": ["Bug"], "closed": "2017-01-18 04:40:26", "body": "As reported in jetty-dev : https://dev.eclipse.org/mhonarc/lists/jetty-dev/msg02857.html\r\n\r\nWhen a SecurityManager is active, the Apache Jasper implementation cannot load due to a missing class.\r\n\r\n```\r\norg.apache.jasper.runtime.JspRuntimeLibrary$PrivilegedIntrospectHelper\r\n```\r\n\r\nA check of our jar shows ...\r\n\r\n``` shell\r\n$ jar -tvf ~/.m2/repository/org/mortbay/jasper/apache-jsp/8.5.5/apache-jsp-8.5.5.jar | grep Privileged\r\n  1772 Thu Oct 27 16:03:32 MST 2016 org/apache/jasper/runtime/JspFactoryImpl$PrivilegedGetPageContext.class\r\n  1091 Thu Oct 27 16:03:32 MST 2016 org/apache/jasper/runtime/JspFactoryImpl$PrivilegedReleasePageContext.class\r\n   772 Thu Oct 27 16:03:32 MST 2016 org/apache/tomcat/util/security/PrivilegedGetTccl.class\r\n   868 Thu Oct 27 16:03:32 MST 2016 org/apache/tomcat/util/security/PrivilegedSetTccl.class\r\n```\r\n\r\nAnd a check of the official apache jasper jar shows ...\r\n\r\n``` shell\r\n$ jar -tvf ~/.m2/repository/org/apache/tomcat/tomcat-jasper/8.5.5/tomcat-jasper-8.5.5.jar | grep Privileged\r\n  1772 Wed Aug 31 20:51:46 MST 2016 org/apache/jasper/runtime/JspFactoryImpl$PrivilegedGetPageContext.class\r\n  1091 Wed Aug 31 20:51:46 MST 2016 org/apache/jasper/runtime/JspFactoryImpl$PrivilegedReleasePageContext.class\r\n```", "commits": {}, "title": "SecurityManager prevents JSP from loading", "created": "2016-12-29 20:11:27", "user": "joakime", "url": "https://github.com/eclipse/jetty.project/issues/1205", "commitsDetails": [], "ttf": 19.00027777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "silviobierman", "filteredCommits": ["8597fe57e666bc1cf858dda169e3691e6e7ef5e0"], "commits": {"8597fe57e666bc1cf858dda169e3691e6e7ef5e0": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2016-12-23 23:41:33", "commitsDetails": [{"commitMessage": "Issue #1203\n", "commitParents": ["b950a2e2e46395207f27990663120d365417f762"], "commitHash": "8597fe57e666bc1cf858dda169e3691e6e7ef5e0", "commitSpoonAstDiffStats": [{"spoonFilePath": "Session.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.session.Session.doInvalidate()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "SessionListenerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.session.SessionListenerTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "8597fe57e666bc1cf858dda169e3691e6e7ef5e0 tags/jetty-9.4.1.v20170120~77", "commitUser": "janbartel", "authoredDateTime": "2016-12-26 17:09:22", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 163, "filePath": "tests/test-sessions/test-hash-sessions/src/test/java/org/eclipse/jetty/server/session/SessionListenerTest.java", "insertions": 163, "deletions": 0}, {"lines": 4, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/session/Session.java", "insertions": 2, "deletions": 2}], "commitDateTime": "2016-12-26 17:09:22", "spoonStatsSkippedReason": ""}], "title": "HttpSessionBindingListener#valueUnbound not called consistently in 9.4.0", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 4, "insertions": 2, "gitFilesChange": 1, "deletions": 2}, "closed": "2016-12-26 06:10:10", "statsSkippedReason": "", "body": "After session creation an instance of a class that implements HttpSessionBindingListener is set as an attribute on the HttpSession instance.\r\nAfter porting my application from 9.3.13 to 9.4.0 valueUnbound is no longer called on the attribute when HttpSession#invalidate is called. It is however called when the session times out. Reverting to 9.3.13 solves the issue.\r\n", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server/session"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.session.Session.doInvalidate()"], "ttf": 2.000277777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1203"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "philwebb", "filteredCommits": ["bf80d822c045d4c27b9b8be5a860402dadab6114"], "commits": {"bf80d822c045d4c27b9b8be5a860402dadab6114": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2016-12-23 05:14:23", "commitsDetails": [{"commitMessage": "Issue #1202 - Adding testcase and fix for NPE in Sec-WebSocket-Extensions use\n", "commitParents": ["03a283235c54a1f9f50e0b2378824fb9bbff8833"], "commitHash": "bf80d822c045d4c27b9b8be5a860402dadab6114", "commitSpoonAstDiffStats": [{"spoonFilePath": "JsrSession.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.JsrSession.getNegotiatedExtensions()", "DEL": 2, "INS": 2, "UPD": 0, "MOV": 3, "TOT": 7}]}, {"spoonFilePath": "ConfiguratorTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.ConfiguratorTest.testNoExtensionsConfigurator()", "DEL": 0, "INS": 4, "UPD": 2, "MOV": 0, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.ConfiguratorTest.NoExtensionsSocket.echo(javax.websocket.Session,java.lang.String)", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.ConfiguratorTest.NoExtensionsSocket.echo(java.lang.String)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "bf80d822c045d4c27b9b8be5a860402dadab6114 tags/jetty-9.3.16.v20170119~37", "commitUser": "joakime", "authoredDateTime": "2016-12-27 14:06:33", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 25, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/ConfiguratorTest.java", "insertions": 21, "deletions": 4}, {"lines": 11, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/JsrSession.java", "insertions": 3, "deletions": 8}], "commitDateTime": "2016-12-27 14:06:33", "spoonStatsSkippedReason": ""}], "title": "NPE in JsrSession when dealing with a response missing the `Sec-WebSocket-Extensions` header", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 2, "INS": 2, "UPD": 0, "MOV": 3, "TOT": 7, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 11, "insertions": 3, "gitFilesChange": 1, "deletions": 8}, "closed": "2016-12-27 21:26:32", "statsSkippedReason": "", "body": "Using the JSR WebSocket client provided in Jetty 9.4.0.v20161208 the following NPE can be thrown:\r\n\r\n```\r\njava.lang.NullPointerException: null\r\n\tat org.eclipse.jetty.websocket.jsr356.JsrSession.getNegotiatedExtensions(JsrSession.java:247)\r\n\tat org.springframework.web.socket.adapter.standard.StandardWebSocketSession.initializeNativeSession(StandardWebSocketSession.java:184)\r\n\tat org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onOpen(StandardWebSocketHandlerAdapter.java:61)\r\n\tat org.eclipse.jetty.websocket.jsr356.endpoints.JsrEndpointEventDriver.onConnect(JsrEndpointEventDriver.java:140)\r\n\tat org.eclipse.jetty.websocket.common.events.AbstractEventDriver.openSession(AbstractEventDriver.java:233)\r\n\tat org.eclipse.jetty.websocket.jsr356.endpoints.AbstractJsrEventDriver.openSession(AbstractJsrEventDriver.java:104)\r\n\tat org.eclipse.jetty.websocket.common.WebSocketSession.open(WebSocketSession.java:504)\r\n\tat org.eclipse.jetty.websocket.common.WebSocketSession.onOpened(WebSocketSession.java:433)\r\n\tat org.eclipse.jetty.io.AbstractConnection.onOpen(AbstractConnection.java:200)\r\n\tat org.eclipse.jetty.websocket.common.io.AbstractWebSocketConnection.onOpen(AbstractWebSocketConnection.java:566)\r\n\tat org.eclipse.jetty.io.AbstractEndPoint.upgrade(AbstractEndPoint.java:432)\r\n\tat org.eclipse.jetty.websocket.client.WebSocketUpgradeRequest.upgrade(WebSocketUpgradeRequest.java:622)\r\n\tat org.eclipse.jetty.client.http.HttpChannelOverHTTP.exchangeTerminating(HttpChannelOverHTTP.java:116)\r\n\tat org.eclipse.jetty.client.HttpReceiver.terminateResponse(HttpReceiver.java:451)\r\n\tat org.eclipse.jetty.client.HttpReceiver.responseSuccess(HttpReceiver.java:405)\r\n\tat org.eclipse.jetty.client.http.HttpReceiverOverHTTP.messageComplete(HttpReceiverOverHTTP.java:281)\r\n\tat org.eclipse.jetty.http.HttpParser.parseHeaders(HttpParser.java:1071)\r\n\tat org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:1320)\r\n\tat org.eclipse.jetty.client.http.HttpReceiverOverHTTP.parse(HttpReceiverOverHTTP.java:170)\r\n\tat org.eclipse.jetty.client.http.HttpReceiverOverHTTP.process(HttpReceiverOverHTTP.java:131)\r\n\tat org.eclipse.jetty.client.http.HttpReceiverOverHTTP.receive(HttpReceiverOverHTTP.java:70)\r\n\tat org.eclipse.jetty.client.http.HttpChannelOverHTTP.receive(HttpChannelOverHTTP.java:130)\r\n\tat org.eclipse.jetty.client.http.HttpConnectionOverHTTP.onFillable(HttpConnectionOverHTTP.java:116)\r\n\tat org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:279)\r\n\tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:112)\r\n\tat org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:124)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:672)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:590)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\n```\r\n\r\nThis happens if the `ClientUpgradeResponse` does not contain a `Sec-WebSocket-Extensions` header.\r\n\r\nI believe that commit e0d353629f00bbebb83915ab88cf54fb2593b831 may have changed the behavior of `ClientUpgradeResponse` (specifically around [these lines](https://github.com/eclipse/jetty.project/blob/b950a2e2e46395207f27990663120d365417f762/jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/ClientUpgradeResponse.java#L53-L54)) meaning that `getExtensions()` now returns `null` rather than an empty list.", "changesInPackagesGIT": ["jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356"], "changesInPackagesSPOON": ["org.eclipse.jetty.websocket.jsr356.JsrSession.getNegotiatedExtensions()"], "ttf": 4.000277777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1202"}, {"labels": ["Bug"], "closed": "2019-02-01 11:37:24", "body": "#444 / #464 has regressed in Jetty 9.3.15. My unit test for a cert name mismatch is now failing with an uninformative ClosedChannelException what appears to be at least 2/3 of the time.\r\n\r\n```\r\njava.nio.channels.ClosedChannelException\r\n\tat org.eclipse.jetty.io.WriteFlusher.onClose(WriteFlusher.java:498)\r\n\tat org.eclipse.jetty.io.AbstractEndPoint.close(AbstractEndPoint.java:113)\r\n\tat org.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.close(SslConnection.java:1017)\r\n\tat org.eclipse.jetty.io.ssl.SslConnection.onFillable(SslConnection.java:217)\r\n\tat org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:283)\r\n\tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:110)\r\n\tat org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:93)\r\n\tat org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.executeProduceConsume(ExecuteProduceConsume.java:303)\r\n\tat org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume(ExecuteProduceConsume.java:148)\r\n\tat org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:136)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:671)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:589)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\n\r\n```", "commits": {}, "title": "Jetty 9.3.15 throwing ClosedChannelException on cert name mismatch error", "created": "2016-12-23 00:16:08", "user": "johngmyers", "url": "https://github.com/eclipse/jetty.project/issues/1199", "commitsDetails": [], "ttf": 770.0002777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "aiyanbo", "filteredCommits": ["03a283235c54a1f9f50e0b2378824fb9bbff8833", "f3c4424722b7124f2191b4296cac74a9fbac94bd"], "commits": {"f3c4424722b7124f2191b4296cac74a9fbac94bd": {"commitUser": "joakime", "commitGHEventType": "closed"}, "03a283235c54a1f9f50e0b2378824fb9bbff8833": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2016-12-22 07:23:06", "commitsDetails": [{"commitMessage": "Issue #1197 - adding testcase for Authorization use in WSClient\n", "commitParents": ["68f041cf03f5f80e6653a6352c789080423fb9d0"], "commitHash": "03a283235c54a1f9f50e0b2378824fb9bbff8833", "commitSpoonAstDiffStats": [{"spoonFilePath": "ClientConnectTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.client.ClientConnectTest.testUpgradeWithAuthorizationHeader()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.ClientConnectTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "03a283235c54a1f9f50e0b2378824fb9bbff8833 tags/jetty-9.3.16.v20170119~38", "commitUser": "joakime", "authoredDateTime": "2016-12-27 13:32:21", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 28, "filePath": "jetty-websocket/websocket-client/src/test/java/org/eclipse/jetty/websocket/client/ClientConnectTest.java", "insertions": 28, "deletions": 0}], "commitDateTime": "2016-12-27 13:32:21", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #1197 - Copying headers into upgrade facade more consistently\n", "commitParents": ["bfc21f23e03abef5b4f548d79b5541dadf6bbf80"], "commitHash": "f3c4424722b7124f2191b4296cac74a9fbac94bd", "commitSpoonAstDiffStats": [{"spoonFilePath": "WebSocketUpgradeRequest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketUpgradeRequest.ClientUpgradeRequestFacade.init(org.eclipse.jetty.websocket.client.ClientUpgradeRequest)", "DEL": 1, "INS": 1, "UPD": 3, "MOV": 3, "TOT": 8}]}], "nameRev": "f3c4424722b7124f2191b4296cac74a9fbac94bd tags/jetty-9.4.1.v20170120~75", "commitUser": "joakime", "authoredDateTime": "2016-12-27 13:41:45", "commitGHEventType": "closed", "commitGitStats": [{"lines": 8, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/WebSocketUpgradeRequest.java", "insertions": 4, "deletions": 4}], "commitDateTime": "2016-12-27 13:41:45", "spoonStatsSkippedReason": ""}], "title": "WebSocketClient not sending `Authorization` request header", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 1, "INS": 1, "UPD": 3, "MOV": 3, "TOT": 8, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 8, "insertions": 4, "gitFilesChange": 1, "deletions": 4}, "closed": "2016-12-27 20:42:13", "statsSkippedReason": "", "body": "```scala\r\nval request = new ClientUpgradeRequest()\r\nrequest.setHeader(HttpHeaders.AUTHORIZATION, s\"Sign SHA1 $sign\")\r\nclient.connect(endpoint, uri, request).get()\r\n```\r\nThe `AUTHORIZATION` header cannot send to server.\r\n\r\n`9.3.14.v20161028` is work", "changesInPackagesGIT": ["jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client"], "changesInPackagesSPOON": ["org.eclipse.jetty.websocket.client.WebSocketUpgradeRequest.ClientUpgradeRequestFacade.init(org.eclipse.jetty.websocket.client.ClientUpgradeRequest)"], "ttf": 5.000277777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1197"}, {"labels": ["Bug"], "closed": "2017-05-16 17:09:21", "body": "When verifying the fixes for #1146 on a recent Jetty 9.3.15-SNAPSHOT, am seeing threads that are blocked forever on ArrayDeque objects from org.eclipse.jetty.server.HttpInput.blockForContent(HttpInput.java:398). An lsof shows no remaining server-side connections.\r\n\r\nPer the other bug, the consumer of the request body reads slowly using the synchronous APIs. That it was previously able to trigger #1146 shows that it was able to get the interest registration to race with error closes of the connection.\r\n\r\nWe are able to reproduce this in a test environment and should be able to crank up logging or add additional instrumentation as required.\r\n\r\n```\r\norg.eclipse.jetty.server.Server@3111631d - STARTED\r\n += http-worker{STARTED,2<=5<=200,i=3,q=0} - STARTED\r\n |   +- 3101 http-worker-3101 7d728977-73e7-46f8-873b-d58e186070ac TIMED_WAITING @ sun.misc.Unsafe.park(Native Method) IDLE\r\n |   +- 3094 http-worker-3094 5e956a6b-ec5f-4b3f-9737-64b3bcebb6ba TIMED_WAITING @ sun.misc.Unsafe.park(Native Method) IDLE\r\n |   +- 84 http-worker-84-acceptor-0@126254ec-https@62e73ab6{SSL,[ssl, http/1.1]}{0.0.0.0:8443} RUNNABLE @ sun.nio.ch.ServerSocketChannelImpl.accept0(Native Method) prio=3\r\n |   +- 3102 http-worker-3102 009ee5cd-3945-4a78-896f-0e422aa37ed4 RUNNABLE @ sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)\r\n |   +- 3104 http-worker-3104 TIMED_WAITING @ sun.misc.Unsafe.park(Native Method) IDLE\r\n +- org.eclipse.jetty.jmx.MBeanContainer@e0d1dc4\r\n |   +- HttpConnectionFactory@2674d4f6[HTTP/1.1]=org.eclipse.jetty.server:context=SSL|HTTP/1.1@5d9d2119,type=httpconnectionfactory,id=0\r\n |   +- [/*]/[]==0=>com.proofpoint.http.server.QueryStringFilter-64a1116a=org.eclipse.jetty.servlet:context=\"ROOT@@admin\",type=filtermapping,name=com.proofpoint.http.server.QueryStringFilter-64a1116a,id=0\r\n |   +- [/*]/[]==0=>com.proofpoint.http.server.TraceTokenFilter-177ede17=org.eclipse.jetty.servlet:context=\"ROOT@@http\",type=filtermapping,name=com.proofpoint.http.server.TraceTokenFilter-177ede17,id=0\r\n |   +- admin@5d9d2119{SSL,[ssl, http/1.1]}{0.0.0.0:42278}=org.eclipse.jetty.server:context=SSL|HTTP/1.1@5d9d2119,type=serverconnector,id=0\r\n |   +- [/*]/[]==0=>com.proofpoint.http.server.TraceTokenFilter-11e17893=org.eclipse.jetty.servlet:context=\"ROOT@@admin\",type=filtermapping,name=com.proofpoint.http.server.TraceTokenFilter-11e17893,id=0\r\n |   +- com.proofpoint.http.server.AdminFilter-3751acd7=org.eclipse.jetty.servlet:context=\"ROOT@@http\",type=filterholder,name=com.proofpoint.http.server.AdminFilter-3751acd7,id=0\r\n |   +- SslConnectionFactory@410fc508{SSL->http/1.1}=org.eclipse.jetty.server:context=SSL|HTTP/1.1@62e73ab6,type=sslconnectionfactory,id=0\r\n |   +- [/*]=>org.glassfish.jersey.servlet.ServletContainer-16d41725=org.eclipse.jetty.servlet:context=\"ROOT@@http\",type=servletmapping,name=org.glassfish.jersey.servlet.ServletContainer-16d41725,id=0\r\n |   +- org.eclipse.jetty.server.Server@3111631d=org.eclipse.jetty.server:type=server,id=0\r\n |   +- [/*]/[]==0=>com.proofpoint.http.server.GZipRequestFilter-3dc39459=org.eclipse.jetty.servlet:context=\"ROOT@@http\",type=filtermapping,name=com.proofpoint.http.server.GZipRequestFilter-3dc39459,id=0\r\n |   +- http-worker-84-acceptor-0@126254ec-https@62e73ab6{SSL,[ssl, http/1.1]}{0.0.0.0:8443}=org.eclipse.jetty.server:context=SSL|HTTP/1.1@62e73ab6,type=abstractconnector$acceptor,id=0\r\n |   +- o.e.j.s.ServletContextHandler@1171ba7e{/,null,AVAILABLE,@http}=org.eclipse.jetty.servlet:context=\"ROOT@@http\",type=servletcontexthandler,id=0\r\n |   +- org.glassfish.jersey.servlet.ServletContainer-16d41725@913d222c==org.glassfish.jersey.servlet.ServletContainer,-1,true=org.eclipse.jetty.servlet:context=\"ROOT@@http\",type=servletholder,name=org.glassfish.jersey.servlet.ServletContainer-16d41725,id=0\r\n |   +- com.proofpoint.http.server.GZipRequestFilter-19eea77c=org.eclipse.jetty.servlet:context=\"ROOT@@admin\",type=filterholder,name=com.proofpoint.http.server.GZipRequestFilter-19eea77c,id=0\r\n |   +- org.eclipse.jetty.servlet.ServletHandler@41059616=org.eclipse.jetty.servlet:context=\"ROOT@@http\",type=servlethandler,id=0\r\n |   +- org.eclipse.jetty.servlet.ServletHandler$Default404Servlet-65f5cae3@eb7a2b6e==org.eclipse.jetty.servlet.ServletHandler$Default404Servlet,-1,false=org.eclipse.jetty.servlet:context=\"ROOT@@http\",type=servletholder,name=org.eclipse.jetty.servlet.ServletHandler$Default404Servlet-65f5cae3,id=0\r\n |   +- org.eclipse.jetty.servlet.ServletHandler@49e7e8f1=org.eclipse.jetty.servlet:context=\"ROOT@@admin\",type=servlethandler,id=0\r\n |   +- [/]=>org.eclipse.jetty.servlet.ServletHandler$Default404Servlet-65f5cae3=org.eclipse.jetty.servlet:context=\"ROOT@@http\",type=servletmapping,name=org.eclipse.jetty.servlet.ServletHandler$Default404Servlet-65f5cae3,id=0\r\n |   +- org.eclipse.jetty.server.handler.HandlerCollection@716ae973[o.e.j.s.ServletContextHandler@1171ba7e{/,null,AVAILABLE,@http}, org.eclipse.jetty.server.handler.RequestLogHandler@56872fcb, org.eclipse.jetty.server.handler.RequestLogHandler@7b3c2ae0]=org.eclipse.jetty.server.handler:type=handlercollection,id=0\r\n |   +- [/*]/[]==0=>com.proofpoint.http.server.AdminFilter-3751acd7=org.eclipse.jetty.servlet:context=\"ROOT@@http\",type=filtermapping,name=com.proofpoint.http.server.AdminFilter-3751acd7,id=0\r\n |   +- org.eclipse.jetty.server.handler.HandlerList@ac4915e[o.e.j.s.ServletContextHandler@23648d2d{/,null,AVAILABLE,@admin}, org.eclipse.jetty.server.handler.StatisticsHandler@3a38e4dc]=org.eclipse.jetty.server.handler:type=handlerlist,id=0\r\n |   +- com.proofpoint.http.server.GZipRequestFilter-3dc39459=org.eclipse.jetty.servlet:context=\"ROOT@@http\",type=filterholder,name=com.proofpoint.http.server.GZipRequestFilter-3dc39459,id=0\r\n |   +- org.eclipse.jetty.util.thread.ScheduledExecutorScheduler@33d230ce=org.eclipse.jetty.util.thread:context=SSL|HTTP/1.1@62e73ab6,type=scheduledexecutorscheduler,id=0\r\n |   +- com.proofpoint.http.server.StatsRecordingHandler@422ba9b7=com.proofpoint.http.server:type=statsrecordinghandler,id=0\r\n |   +- SslContextFactory@2a99fa07(file:///opt/proofpoint/attachment-store/etc/keystore.jks,null)=org.eclipse.jetty.util.ssl:context=SSL|HTTP/1.1@5d9d2119,type=sslcontextfactory,id=0\r\n |   +- SslConnectionFactory@2eb1c615{SSL->http/1.1}=org.eclipse.jetty.server:context=SSL|HTTP/1.1@5d9d2119,type=sslconnectionfactory,id=0\r\n |   +- org.eclipse.jetty.io.ManagedSelector@340fc1aa id=0 keys=0 selected=0=org.eclipse.jetty.io:context=SSL|HTTP/1.1@62e73ab6,type=managedselector,id=0\r\n |   +- sun.nio.ch.ServerSocketChannelImpl[/0:0:0:0:0:0:0:0:8443]=sun.nio.ch:context=SSL|HTTP/1.1@62e73ab6,type=serversocketchannelimpl,id=0\r\n |   +- [/*]=>org.glassfish.jersey.servlet.ServletContainer-6682e6a5=org.eclipse.jetty.servlet:context=\"ROOT@@admin\",type=servletmapping,name=org.glassfish.jersey.servlet.ServletContainer-6682e6a5,id=0\r\n |   +- org.eclipse.jetty.io.ArrayByteBufferPool@bfb93cf=org.eclipse.jetty.io:context=SSL|HTTP/1.1@62e73ab6,type=arraybytebufferpool,id=0\r\n |   +- [/*]/[]==0=>com.proofpoint.http.server.GZipRequestFilter-19eea77c=org.eclipse.jetty.servlet:context=\"ROOT@@admin\",type=filtermapping,name=com.proofpoint.http.server.GZipRequestFilter-19eea77c,id=0\r\n |   +- [/*]/[]==0=>com.proofpoint.http.server.QueryStringFilter-6d6039df=org.eclipse.jetty.servlet:context=\"ROOT@@http\",type=filtermapping,name=com.proofpoint.http.server.QueryStringFilter-6d6039df,id=0\r\n |   +- org.eclipse.jetty.server.ServerConnector$ServerConnectorManager@2a0963be=org.eclipse.jetty.server:context=SSL|HTTP/1.1@5d9d2119,type=serverconnector$serverconnectormanager,id=0\r\n |   +- HttpConnectionFactory@4e17442f[HTTP/1.1]=org.eclipse.jetty.server:context=SSL|HTTP/1.1@62e73ab6,type=httpconnectionfactory,id=0\r\n |   +- sun.nio.ch.ServerSocketChannelImpl[/0:0:0:0:0:0:0:0:42278]=sun.nio.ch:context=SSL|HTTP/1.1@5d9d2119,type=serversocketchannelimpl,id=0\r\n |   +- org.eclipse.jetty.server.ServerConnector$ServerConnectorManager@dd737ea=org.eclipse.jetty.server:context=SSL|HTTP/1.1@62e73ab6,type=serverconnector$serverconnectormanager,id=0\r\n |   +- HttpConfiguration@1df06ecd{32768/8192,8192/8192,https://:0,[SecureRequestCustomizer@20f0c96d]}=org.eclipse.jetty.server:context=SSL|HTTP/1.1@5d9d2119,type=httpconfiguration,id=0\r\n |   +- com.proofpoint.http.server.HackGzipHandler@5d3b6585=com.proofpoint.http.server:context=\"ROOT@@http\",type=hackgziphandler,id=0\r\n |   +- com.proofpoint.http.server.QueryStringFilter-6d6039df=org.eclipse.jetty.servlet:context=\"ROOT@@http\",type=filterholder,name=com.proofpoint.http.server.QueryStringFilter-6d6039df,id=0\r\n |   +- [/*]/[]==0=>com.proofpoint.http.server.TimingFilter-c5e69a5=org.eclipse.jetty.servlet:context=\"ROOT@@admin\",type=filtermapping,name=com.proofpoint.http.server.TimingFilter-c5e69a5,id=0\r\n |   +- org.eclipse.jetty.jmx.MBeanContainer@e0d1dc4=org.eclipse.jetty.jmx:type=mbeancontainer,id=0\r\n |   +- o.e.j.s.ServletContextHandler@23648d2d{/,null,AVAILABLE,@admin}=org.eclipse.jetty.servlet:context=\"ROOT@@admin\",type=servletcontexthandler,id=0\r\n |   +- http-admin-worker{STARTED,2<=3<=200,i=1,q=0}=org.eclipse.jetty.util.thread:context=SSL|HTTP/1.1@5d9d2119,type=queuedthreadpool,id=0\r\n |   +- com.proofpoint.http.server.QueryStringFilter-64a1116a=org.eclipse.jetty.servlet:context=\"ROOT@@admin\",type=filterholder,name=com.proofpoint.http.server.QueryStringFilter-64a1116a,id=0\r\n |   +- org.eclipse.jetty.server.handler.RequestLogHandler@56872fcb=org.eclipse.jetty.server.handler:type=requestloghandler,id=0\r\n |   +- org.eclipse.jetty.servlet.ServletHandler$Default404Servlet-1682e6a@b3f21dbd==org.eclipse.jetty.servlet.ServletHandler$Default404Servlet,-1,false=org.eclipse.jetty.servlet:context=\"ROOT@@admin\",type=servletholder,name=org.eclipse.jetty.servlet.ServletHandler$Default404Servlet-1682e6a,id=0\r\n |   +- com.proofpoint.http.server.DelimitedRequestLog@3f908bc0=com.proofpoint.http.server:type=delimitedrequestlog,id=0\r\n |   +- HttpConfiguration@4ff074a0{32768/8192,8192/8192,https://:0,[SecureRequestCustomizer@ba37647]}=org.eclipse.jetty.server:context=SSL|HTTP/1.1@62e73ab6,type=httpconfiguration,id=0\r\n |   +- https@62e73ab6{SSL,[ssl, http/1.1]}{0.0.0.0:8443}=org.eclipse.jetty.server:context=SSL|HTTP/1.1@62e73ab6,type=serverconnector,id=0\r\n |   +- SslContextFactory@d6d683e(file:///opt/proofpoint/attachment-store/etc/keystore.jks,null)=org.eclipse.jetty.util.ssl:context=SSL|HTTP/1.1@62e73ab6,type=sslcontextfactory,id=0\r\n |   +- org.eclipse.jetty.io.ArrayByteBufferPool@7bc2ae16=org.eclipse.jetty.io:context=SSL|HTTP/1.1@5d9d2119,type=arraybytebufferpool,id=0\r\n |   +- org.eclipse.jetty.io.ManagedSelector@57927bc9 id=0 keys=2 selected=0=org.eclipse.jetty.io:context=SSL|HTTP/1.1@5d9d2119,type=managedselector,id=0\r\n |   +- org.eclipse.jetty.server.handler.RequestLogHandler@7b3c2ae0=org.eclipse.jetty.server.handler:type=requestloghandler,id=1\r\n |   +- com.proofpoint.http.server.HackGzipHandler@7d3bf8db=com.proofpoint.http.server:context=\"ROOT@@admin\",type=hackgziphandler,id=0\r\n |   +- org.eclipse.jetty.util.thread.ScheduledExecutorScheduler@681de87f=org.eclipse.jetty.util.thread:context=SSL|HTTP/1.1@5d9d2119,type=scheduledexecutorscheduler,id=0\r\n |   +- org.eclipse.jetty.server.handler.StatisticsHandler@3a38e4dc=org.eclipse.jetty.server.handler:type=statisticshandler,id=0\r\n |   +- org.glassfish.jersey.servlet.ServletContainer-6682e6a5@4d893d6d==org.glassfish.jersey.servlet.ServletContainer,-1,true=org.eclipse.jetty.servlet:context=\"ROOT@@admin\",type=servletholder,name=org.glassfish.jersey.servlet.ServletContainer-6682e6a5,id=0\r\n |   +- com.proofpoint.http.server.TraceTokenFilter-177ede17=org.eclipse.jetty.servlet:context=\"ROOT@@http\",type=filterholder,name=com.proofpoint.http.server.TraceTokenFilter-177ede17,id=0\r\n |   +- [/*]/[]==0=>com.proofpoint.http.server.TimingFilter-4bf4680c=org.eclipse.jetty.servlet:context=\"ROOT@@http\",type=filtermapping,name=com.proofpoint.http.server.TimingFilter-4bf4680c,id=0\r\n |   +- [/]=>org.eclipse.jetty.servlet.ServletHandler$Default404Servlet-1682e6a=org.eclipse.jetty.servlet:context=\"ROOT@@admin\",type=servletmapping,name=org.eclipse.jetty.servlet.ServletHandler$Default404Servlet-1682e6a,id=0\r\n |   +- http-worker{STARTED,2<=5<=200,i=3,q=0}=com.proofpoint.http.server:type=httpserver$1,id=0\r\n |   +- com.proofpoint.http.server.TraceTokenFilter-11e17893=org.eclipse.jetty.servlet:context=\"ROOT@@admin\",type=filterholder,name=com.proofpoint.http.server.TraceTokenFilter-11e17893,id=0\r\n |   +- com.proofpoint.http.server.TimingFilter-4bf4680c=org.eclipse.jetty.servlet:context=\"ROOT@@http\",type=filterholder,name=com.proofpoint.http.server.TimingFilter-4bf4680c,id=0\r\n |   +- com.proofpoint.http.server.TimingFilter-c5e69a5=org.eclipse.jetty.servlet:context=\"ROOT@@admin\",type=filterholder,name=com.proofpoint.http.server.TimingFilter-c5e69a5,id=0\r\n += https@62e73ab6{SSL,[ssl, http/1.1]}{0.0.0.0:8443} - STARTED\r\n |   +~ org.eclipse.jetty.server.Server@3111631d - STARTED\r\n |   +~ http-worker{STARTED,2<=5<=200,i=3,q=0} - STARTED\r\n |   += org.eclipse.jetty.util.thread.ScheduledExecutorScheduler@33d230ce - STARTED\r\n |   |   +- sun.misc.Unsafe.park(Native Method)\r\n |   |   +- java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\r\n |   |   +- java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)\r\n |   |   +- java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)\r\n |   |   +- java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)\r\n |   |   +- java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1067)\r\n |   |   +- java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1127)\r\n |   |   +- java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n |   |   +- java.lang.Thread.run(Thread.java:745)\r\n |   +- org.eclipse.jetty.io.ArrayByteBufferPool@bfb93cf\r\n |   += SslConnectionFactory@410fc508{SSL->http/1.1} - STARTED\r\n |   |   += SslContextFactory@d6d683e(file:///opt/proofpoint/attachment-store/etc/keystore.jks,null) trustAll=false\r\n |   |   |   +- Protocol Selections\r\n |   |   |   |   +- Enabled (size=4)\r\n |   |   |   |   |   +- SSLv2Hello\r\n |   |   |   |   |   +- TLSv1\r\n |   |   |   |   |   +- TLSv1.1\r\n |   |   |   |   |   +- TLSv1.2\r\n |   |   |   |   +- Disabled (size=1)\r\n |   |   |   |       +- SSLv3 - JreDisabled:java.security, ConfigIncluded:NotSpecified\r\n |   |   |   +- Cipher Suite Selections\r\n |   |   |       +- Enabled (size=5)\r\n |   |   |       |   +- TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA\r\n |   |   |       |   +- TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256\r\n |   |   |       |   +- TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256\r\n |   |   |       |   +- TLS_EMPTY_RENEGOTIATION_INFO_SCSV\r\n |   |   |       |   +- TLS_RSA_WITH_AES_128_CBC_SHA\r\n |   |   |       +- Disabled (size=34)\r\n |   |   |           +- SSL_RSA_EXPORT_WITH_DES40_CBC_SHA - JreDisabled:java.security, ConfigIncluded:NotSpecified\r\n |   |   |           +- SSL_RSA_WITH_3DES_EDE_CBC_SHA - ConfigIncluded:NotSpecified\r\n |   |   |           +- SSL_RSA_WITH_DES_CBC_SHA - JreDisabled:java.security, ConfigIncluded:NotSpecified\r\n |   |   |           +- SSL_RSA_WITH_NULL_MD5 - JreDisabled:java.security, ConfigIncluded:NotSpecified\r\n |   |   |           +- SSL_RSA_WITH_NULL_SHA - JreDisabled:java.security, ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDHE_ECDSA_WITH_3DES_EDE_CBC_SHA - ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA - ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256 - ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256 - ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDHE_ECDSA_WITH_NULL_SHA - JreDisabled:java.security, ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA - ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDHE_RSA_WITH_NULL_SHA - JreDisabled:java.security, ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDH_ECDSA_WITH_3DES_EDE_CBC_SHA - ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA - ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256 - ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDH_ECDSA_WITH_AES_128_GCM_SHA256 - ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDH_ECDSA_WITH_NULL_SHA - JreDisabled:java.security, ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDH_RSA_WITH_3DES_EDE_CBC_SHA - ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDH_RSA_WITH_AES_128_CBC_SHA - ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256 - ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDH_RSA_WITH_AES_128_GCM_SHA256 - ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDH_RSA_WITH_NULL_SHA - JreDisabled:java.security, ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDH_anon_WITH_3DES_EDE_CBC_SHA - JreDisabled:java.security, ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDH_anon_WITH_AES_128_CBC_SHA - JreDisabled:java.security, ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDH_anon_WITH_NULL_SHA - JreDisabled:java.security, ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_KRB5_EXPORT_WITH_DES_CBC_40_MD5 - JreDisabled:java.security, ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_KRB5_EXPORT_WITH_DES_CBC_40_SHA - JreDisabled:java.security, ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_KRB5_WITH_3DES_EDE_CBC_MD5 - JreDisabled:java.security, ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_KRB5_WITH_3DES_EDE_CBC_SHA - JreDisabled:java.security, ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_KRB5_WITH_DES_CBC_MD5 - JreDisabled:java.security, ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_KRB5_WITH_DES_CBC_SHA - JreDisabled:java.security, ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_RSA_WITH_AES_128_CBC_SHA256 - ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_RSA_WITH_AES_128_GCM_SHA256 - ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_RSA_WITH_NULL_SHA256 - JreDisabled:java.security, ConfigIncluded:NotSpecified\r\n |   |   +~ org.eclipse.jetty.jmx.MBeanContainer@e0d1dc4\r\n |   += HttpConnectionFactory@4e17442f[HTTP/1.1] - STARTED\r\n |   |   +- HttpConfiguration@4ff074a0{32768/8192,8192/8192,https://:0,[SecureRequestCustomizer@ba37647]}\r\n |   |   +~ org.eclipse.jetty.jmx.MBeanContainer@e0d1dc4\r\n |   += org.eclipse.jetty.server.ServerConnector$ServerConnectorManager@dd737ea - STARTED\r\n |   |   +~ org.eclipse.jetty.jmx.MBeanContainer@e0d1dc4\r\n |   |   += org.eclipse.jetty.io.ManagedSelector@340fc1aa id=0 keys=0 selected=0 id=0\r\n |   |       +- sun.nio.ch.EPollSelectorImpl@6337d2fd keys=0\r\n |   +~ org.eclipse.jetty.jmx.MBeanContainer@e0d1dc4\r\n |   +- sun.nio.ch.ServerSocketChannelImpl[/0:0:0:0:0:0:0:0:8443]\r\n |   +- http-worker-84-acceptor-0@126254ec-https@62e73ab6{SSL,[ssl, http/1.1]}{0.0.0.0:8443}\r\n += admin@5d9d2119{SSL,[ssl, http/1.1]}{0.0.0.0:42278} - STARTED\r\n |   +~ org.eclipse.jetty.server.Server@3111631d - STARTED\r\n |   += http-admin-worker{STARTED,2<=3<=200,i=1,q=0} - STARTED\r\n |   |   +- 3105 http-admin-worker-3105 RUNNABLE @ sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)\r\n |   |   +- 3106 http-admin-worker-3106 7379a756-f40a-465c-ba68-1b2b9406db6f RUNNABLE @ java.lang.Thread.getStackTrace(Thread.java:1552)\r\n |   |   +- 108 http-admin-worker-108 TIMED_WAITING @ sun.misc.Unsafe.park(Native Method) IDLE\r\n |   += org.eclipse.jetty.util.thread.ScheduledExecutorScheduler@681de87f - STARTED\r\n |   |   +- sun.misc.Unsafe.park(Native Method)\r\n |   |   +- java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\r\n |   |   +- java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)\r\n |   |   +- java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)\r\n |   |   +- java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)\r\n |   |   +- java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1067)\r\n |   |   +- java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1127)\r\n |   |   +- java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n |   |   +- java.lang.Thread.run(Thread.java:745)\r\n |   +- org.eclipse.jetty.io.ArrayByteBufferPool@7bc2ae16\r\n |   += SslConnectionFactory@2eb1c615{SSL->http/1.1} - STARTED\r\n |   |   += SslContextFactory@2a99fa07(file:///opt/proofpoint/attachment-store/etc/keystore.jks,null) trustAll=false\r\n |   |   |   +- Protocol Selections\r\n |   |   |   |   +- Enabled (size=4)\r\n |   |   |   |   |   +- SSLv2Hello\r\n |   |   |   |   |   +- TLSv1\r\n |   |   |   |   |   +- TLSv1.1\r\n |   |   |   |   |   +- TLSv1.2\r\n |   |   |   |   +- Disabled (size=1)\r\n |   |   |   |       +- SSLv3 - JreDisabled:java.security, ConfigIncluded:NotSpecified\r\n |   |   |   +- Cipher Suite Selections\r\n |   |   |       +- Enabled (size=5)\r\n |   |   |       |   +- TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA\r\n |   |   |       |   +- TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256\r\n |   |   |       |   +- TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256\r\n |   |   |       |   +- TLS_EMPTY_RENEGOTIATION_INFO_SCSV\r\n |   |   |       |   +- TLS_RSA_WITH_AES_128_CBC_SHA\r\n |   |   |       +- Disabled (size=34)\r\n |   |   |           +- SSL_RSA_EXPORT_WITH_DES40_CBC_SHA - JreDisabled:java.security, ConfigIncluded:NotSpecified\r\n |   |   |           +- SSL_RSA_WITH_3DES_EDE_CBC_SHA - ConfigIncluded:NotSpecified\r\n |   |   |           +- SSL_RSA_WITH_DES_CBC_SHA - JreDisabled:java.security, ConfigIncluded:NotSpecified\r\n |   |   |           +- SSL_RSA_WITH_NULL_MD5 - JreDisabled:java.security, ConfigIncluded:NotSpecified\r\n |   |   |           +- SSL_RSA_WITH_NULL_SHA - JreDisabled:java.security, ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDHE_ECDSA_WITH_3DES_EDE_CBC_SHA - ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA - ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256 - ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256 - ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDHE_ECDSA_WITH_NULL_SHA - JreDisabled:java.security, ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA - ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDHE_RSA_WITH_NULL_SHA - JreDisabled:java.security, ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDH_ECDSA_WITH_3DES_EDE_CBC_SHA - ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA - ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256 - ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDH_ECDSA_WITH_AES_128_GCM_SHA256 - ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDH_ECDSA_WITH_NULL_SHA - JreDisabled:java.security, ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDH_RSA_WITH_3DES_EDE_CBC_SHA - ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDH_RSA_WITH_AES_128_CBC_SHA - ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256 - ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDH_RSA_WITH_AES_128_GCM_SHA256 - ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDH_RSA_WITH_NULL_SHA - JreDisabled:java.security, ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDH_anon_WITH_3DES_EDE_CBC_SHA - JreDisabled:java.security, ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDH_anon_WITH_AES_128_CBC_SHA - JreDisabled:java.security, ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_ECDH_anon_WITH_NULL_SHA - JreDisabled:java.security, ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_KRB5_EXPORT_WITH_DES_CBC_40_MD5 - JreDisabled:java.security, ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_KRB5_EXPORT_WITH_DES_CBC_40_SHA - JreDisabled:java.security, ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_KRB5_WITH_3DES_EDE_CBC_MD5 - JreDisabled:java.security, ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_KRB5_WITH_3DES_EDE_CBC_SHA - JreDisabled:java.security, ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_KRB5_WITH_DES_CBC_MD5 - JreDisabled:java.security, ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_KRB5_WITH_DES_CBC_SHA - JreDisabled:java.security, ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_RSA_WITH_AES_128_CBC_SHA256 - ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_RSA_WITH_AES_128_GCM_SHA256 - ConfigIncluded:NotSpecified\r\n |   |   |           +- TLS_RSA_WITH_NULL_SHA256 - JreDisabled:java.security, ConfigIncluded:NotSpecified\r\n |   |   +~ org.eclipse.jetty.jmx.MBeanContainer@e0d1dc4\r\n |   += HttpConnectionFactory@2674d4f6[HTTP/1.1] - STARTED\r\n |   |   +- HttpConfiguration@1df06ecd{32768/8192,8192/8192,https://:0,[SecureRequestCustomizer@20f0c96d]}\r\n |   |   +~ org.eclipse.jetty.jmx.MBeanContainer@e0d1dc4\r\n |   += org.eclipse.jetty.server.ServerConnector$ServerConnectorManager@2a0963be - STARTED\r\n |   |   +~ org.eclipse.jetty.jmx.MBeanContainer@e0d1dc4\r\n |   |   += org.eclipse.jetty.io.ManagedSelector@57927bc9 id=0 keys=2 selected=0 id=0\r\n |   |       +- sun.nio.ch.EPollSelectorImpl@450f2d20 keys=2\r\n |   |       +- SelectionKey@1764e2b0{i=16}->null\r\n |   |       +- SelectionKey@4ff74650{i=0}->SelectChannelEndPoint@af5d1ca{/0:0:0:0:0:0:0:1:57645<->42278,Open,in,out,-,-,110/200000,SslConnection@5dee9b60}{io=0/0,kio=0,kro=1}\r\n |   +~ org.eclipse.jetty.jmx.MBeanContainer@e0d1dc4\r\n |   +- sun.nio.ch.ServerSocketChannelImpl[/0:0:0:0:0:0:0:0:42278]\r\n += org.eclipse.jetty.server.handler.HandlerList@ac4915e[o.e.j.s.ServletContextHandler@23648d2d{/,null,AVAILABLE,@admin}, org.eclipse.jetty.server.handler.StatisticsHandler@3a38e4dc] - STARTED\r\n |   += o.e.j.s.ServletContextHandler@23648d2d{/,null,AVAILABLE,@admin} - STARTED\r\n |   |   += com.proofpoint.http.server.HackGzipHandler@7d3bf8db - STARTED\r\n |   |   |   += org.eclipse.jetty.servlet.ServletHandler@49e7e8f1 - STARTED\r\n |   |   |   |   += com.proofpoint.http.server.TimingFilter-c5e69a5 - STARTED\r\n |   |   |   |   +- [/*]/[]==0=>com.proofpoint.http.server.TimingFilter-c5e69a5\r\n |   |   |   |   += com.proofpoint.http.server.QueryStringFilter-64a1116a - STARTED\r\n |   |   |   |   +- [/*]/[]==0=>com.proofpoint.http.server.QueryStringFilter-64a1116a\r\n |   |   |   |   += com.proofpoint.http.server.TraceTokenFilter-11e17893 - STARTED\r\n |   |   |   |   +- [/*]/[]==0=>com.proofpoint.http.server.TraceTokenFilter-11e17893\r\n |   |   |   |   += com.proofpoint.http.server.GZipRequestFilter-19eea77c - STARTED\r\n |   |   |   |   +- [/*]/[]==0=>com.proofpoint.http.server.GZipRequestFilter-19eea77c\r\n |   |   |   |   += org.glassfish.jersey.servlet.ServletContainer-6682e6a5@4d893d6d==org.glassfish.jersey.servlet.ServletContainer,-1,true - STARTED\r\n |   |   |   |   +- [/*]=>org.glassfish.jersey.servlet.ServletContainer-6682e6a5\r\n |   |   |   |   +~ org.eclipse.jetty.jmx.MBeanContainer@e0d1dc4\r\n |   |   |   |   += org.eclipse.jetty.servlet.ServletHandler$Default404Servlet-1682e6a@b3f21dbd==org.eclipse.jetty.servlet.ServletHandler$Default404Servlet,-1,false - STARTED\r\n |   |   |   |   +- [/]=>org.eclipse.jetty.servlet.ServletHandler$Default404Servlet-1682e6a\r\n |   |   |   +~ org.eclipse.jetty.jmx.MBeanContainer@e0d1dc4\r\n |   |   +~ org.eclipse.jetty.jmx.MBeanContainer@e0d1dc4\r\n |   |   |\r\n |   |   +> No ClassLoader\r\n |   |   +> Handler attributes o.e.j.s.ServletContextHandler@23648d2d{/,null,AVAILABLE,@admin}\r\n |   |   |   +- org.eclipse.jetty.server.Executor=http-worker{STARTED,2<=5<=200,i=3,q=0}\r\n |   |   +> Context attributes o.e.j.s.ServletContextHandler@23648d2d{/,null,AVAILABLE,@admin}\r\n |   |   |   +- org.eclipse.jetty.util.DecoratedObjectFactory=org.eclipse.jetty.util.DecoratedObjectFactory[decorators=1]\r\n |   |   +> Initparams o.e.j.s.ServletContextHandler@23648d2d{/,null,AVAILABLE,@admin}\r\n |   += org.eclipse.jetty.server.handler.StatisticsHandler@3a38e4dc - STARTED\r\n |   |   += org.eclipse.jetty.server.handler.HandlerCollection@716ae973[o.e.j.s.ServletContextHandler@1171ba7e{/,null,AVAILABLE,@http}, org.eclipse.jetty.server.handler.RequestLogHandler@56872fcb, org.eclipse.jetty.server.handler.RequestLogHandler@7b3c2ae0] - STARTED\r\n |   |   |   += o.e.j.s.ServletContextHandler@1171ba7e{/,null,AVAILABLE,@http} - STARTED\r\n |   |   |   |   += com.proofpoint.http.server.HackGzipHandler@5d3b6585 - STARTED\r\n |   |   |   |   |   += org.eclipse.jetty.servlet.ServletHandler@41059616 - STARTED\r\n |   |   |   |   |   |   += com.proofpoint.http.server.AdminFilter-3751acd7 - STARTED\r\n |   |   |   |   |   |   +- [/*]/[]==0=>com.proofpoint.http.server.AdminFilter-3751acd7\r\n |   |   |   |   |   |   += com.proofpoint.http.server.TimingFilter-4bf4680c - STARTED\r\n |   |   |   |   |   |   +- [/*]/[]==0=>com.proofpoint.http.server.TimingFilter-4bf4680c\r\n |   |   |   |   |   |   += com.proofpoint.http.server.QueryStringFilter-6d6039df - STARTED\r\n |   |   |   |   |   |   +- [/*]/[]==0=>com.proofpoint.http.server.QueryStringFilter-6d6039df\r\n |   |   |   |   |   |   += com.proofpoint.http.server.TraceTokenFilter-177ede17 - STARTED\r\n |   |   |   |   |   |   +- [/*]/[]==0=>com.proofpoint.http.server.TraceTokenFilter-177ede17\r\n |   |   |   |   |   |   += com.proofpoint.http.server.GZipRequestFilter-3dc39459 - STARTED\r\n |   |   |   |   |   |   +- [/*]/[]==0=>com.proofpoint.http.server.GZipRequestFilter-3dc39459\r\n |   |   |   |   |   |   += org.glassfish.jersey.servlet.ServletContainer-16d41725@913d222c==org.glassfish.jersey.servlet.ServletContainer,-1,true - STARTED\r\n |   |   |   |   |   |   +- [/*]=>org.glassfish.jersey.servlet.ServletContainer-16d41725\r\n |   |   |   |   |   |   +~ org.eclipse.jetty.jmx.MBeanContainer@e0d1dc4\r\n |   |   |   |   |   |   += org.eclipse.jetty.servlet.ServletHandler$Default404Servlet-65f5cae3@eb7a2b6e==org.eclipse.jetty.servlet.ServletHandler$Default404Servlet,-1,false - STARTED\r\n |   |   |   |   |   |   +- [/]=>org.eclipse.jetty.servlet.ServletHandler$Default404Servlet-65f5cae3\r\n |   |   |   |   |   +~ org.eclipse.jetty.jmx.MBeanContainer@e0d1dc4\r\n |   |   |   |   +~ org.eclipse.jetty.jmx.MBeanContainer@e0d1dc4\r\n |   |   |   |   |\r\n |   |   |   |   +> No ClassLoader\r\n |   |   |   |   +> Handler attributes o.e.j.s.ServletContextHandler@1171ba7e{/,null,AVAILABLE,@http}\r\n |   |   |   |   |   +- org.eclipse.jetty.server.Executor=http-worker{STARTED,2<=5<=200,i=3,q=0}\r\n |   |   |   |   +> Context attributes o.e.j.s.ServletContextHandler@1171ba7e{/,null,AVAILABLE,@http}\r\n |   |   |   |   |   +- org.eclipse.jetty.util.DecoratedObjectFactory=org.eclipse.jetty.util.DecoratedObjectFactory[decorators=1]\r\n |   |   |   |   +> Initparams o.e.j.s.ServletContextHandler@1171ba7e{/,null,AVAILABLE,@http}\r\n |   |   |   += org.eclipse.jetty.server.handler.RequestLogHandler@56872fcb - STARTED\r\n |   |   |   |   +~ com.proofpoint.http.server.DelimitedRequestLog@3f908bc0 - STARTED\r\n |   |   |   |   +~ org.eclipse.jetty.jmx.MBeanContainer@e0d1dc4\r\n |   |   |   += org.eclipse.jetty.server.handler.RequestLogHandler@7b3c2ae0 - STARTED\r\n |   |   |   |   +- com.proofpoint.http.server.StatsRecordingHandler@422ba9b7\r\n |   |   |   |   +~ org.eclipse.jetty.jmx.MBeanContainer@e0d1dc4\r\n |   |   |   +~ org.eclipse.jetty.jmx.MBeanContainer@e0d1dc4\r\n |   |   +~ org.eclipse.jetty.jmx.MBeanContainer@e0d1dc4\r\n |   +~ org.eclipse.jetty.jmx.MBeanContainer@e0d1dc4\r\n |\r\n +> sun.misc.Launcher$AppClassLoader@18b4aac2\r\n     +- file:/opt/proofpoint/attachment-store/lib/launcher.jar\r\n     +- sun.misc.Launcher$ExtClassLoader@244418a\r\n```\r\n\r\n```\r\n\"http-client-transientstorage-1393\" #1393\r\n   state: WAITING on java.util.ArrayDeque@3c8cbec9\r\n\tat java.lang.Object.wait(Native Method)\r\n\tat java.lang.Object.wait(Object.java:502)\r\n\tat org.eclipse.jetty.server.HttpInput.blockForContent(HttpInput.java:398)\r\n\tat org.eclipse.jetty.server.HttpInputOverHTTP.blockForContent(HttpInputOverHTTP.java:42)\r\n\tat org.eclipse.jetty.server.HttpInput$1.blockForContent(HttpInput.java:846)\r\n\tat org.eclipse.jetty.server.HttpInput.read(HttpInput.java:188)\r\n\tat org.glassfish.jersey.message.internal.EntityInputStream.read(EntityInputStream.java:102)\r\n\tat java.io.FilterInputStream.read(FilterInputStream.java:133)\r\n\tat com.proofpoint.anomalytics.attachment.service.StorageService$TimedInputStream.read(StorageService.java:323)\r\n\tat java.io.FilterInputStream.read(FilterInputStream.java:107)\r\n\tat com.proofpoint.http.client.InputStreamBodySource$1.read(InputStreamBodySource.java:56)\r\n\tat com.proofpoint.http.client.jetty.JettyHttpClient$BodySourceInputStream.read(JettyHttpClient.java:976)\r\n\tat org.eclipse.jetty.client.util.InputStreamContentProvider$InputStreamContentProviderIterator.hasNext(InputStreamContentProvider.java:176)\r\n\tat org.eclipse.jetty.client.HttpContent.advance(HttpContent.java:144)\r\n\tat org.eclipse.jetty.client.HttpContent.advance(HttpContent.java:138)\r\n\tat org.eclipse.jetty.client.http.HttpSenderOverHTTP$HeadersCallback.<init>(HttpSenderOverHTTP.java:195)\r\n\tat org.eclipse.jetty.client.http.HttpSenderOverHTTP.sendHeaders(HttpSenderOverHTTP.java:59)\r\n\tat org.eclipse.jetty.client.HttpSender.send(HttpSender.java:204)\r\n\tat org.eclipse.jetty.client.http.HttpChannelOverHTTP.send(HttpChannelOverHTTP.java:79)\r\n\tat org.eclipse.jetty.client.HttpConnection.send(HttpConnection.java:203)\r\n\tat org.eclipse.jetty.client.http.HttpConnectionOverHTTP$Delegate.send(HttpConnectionOverHTTP.java:202)\r\n\tat org.eclipse.jetty.client.http.HttpConnectionOverHTTP.send(HttpConnectionOverHTTP.java:82)\r\n\tat org.eclipse.jetty.client.http.HttpDestinationOverHTTP.send(HttpDestinationOverHTTP.java:37)\r\n\tat org.eclipse.jetty.client.http.HttpDestinationOverHTTP.send(HttpDestinationOverHTTP.java:27)\r\n\tat org.eclipse.jetty.client.PoolingHttpDestination.process(PoolingHttpDestination.java:165)\r\n\tat org.eclipse.jetty.client.PoolingHttpDestination.process(PoolingHttpDestination.java:113)\r\n\tat org.eclipse.jetty.client.PoolingHttpDestination.send(PoolingHttpDestination.java:97)\r\n\tat org.eclipse.jetty.client.PoolingHttpDestination.succeeded(PoolingHttpDestination.java:84)\r\n\tat org.eclipse.jetty.client.DuplexConnectionPool.proceed(DuplexConnectionPool.java:171)\r\n\tat org.eclipse.jetty.client.DuplexConnectionPool$1.succeeded(DuplexConnectionPool.java:148)\r\n\tat org.eclipse.jetty.client.DuplexConnectionPool$1.succeeded(DuplexConnectionPool.java:139)\r\n\tat org.eclipse.jetty.util.Promise$Wrapper.succeeded(Promise.java:78)\r\n\tat org.eclipse.jetty.client.http.HttpConnectionOverHTTP.onOpen(HttpConnectionOverHTTP.java:90)\r\n\tat org.eclipse.jetty.io.ssl.SslConnection.onOpen(SslConnection.java:181)\r\n\tat org.eclipse.jetty.io.SelectorManager.connectionOpened(SelectorManager.java:324)\r\n\tat org.eclipse.jetty.io.ManagedSelector.createEndPoint(ManagedSelector.java:425)\r\n\tat org.eclipse.jetty.io.ManagedSelector.access$1600(ManagedSelector.java:56)\r\n\tat org.eclipse.jetty.io.ManagedSelector$CreateEndPoint.run(ManagedSelector.java:605)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:671)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:589)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\n```", "commits": {}, "title": "Threads blocked for content on closed server connections", "created": "2016-12-21 21:05:40", "user": "johngmyers", "url": "https://github.com/eclipse/jetty.project/issues/1196", "commitsDetails": [], "ttf": 145.00027777777777}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "sbordet", "filteredCommits": ["07c9bc5a5192ae2bbe79f62337bf1d2e9dbd576e"], "commits": {"07c9bc5a5192ae2bbe79f62337bf1d2e9dbd576e": {"commitUser": "sbordet", "commitGHEventType": "closed"}}, "created": "2016-12-13 16:03:18", "commitsDetails": [{"commitMessage": "Fixes #1169 - HTTP/2 reset on a stalled write does not unblock writer thread.\n\nThe fix notifies the transport when a reset frame is received,\nallowing the transport to fail the write callback which then notifies\nthe application, either by throwing (in case of blocking writes) or\nby calling error listeners.\n\nAlso added a guard, in HttpChannel.handle() for the ERROR_DISPATCH case,\nthat checks if the response is already committed, and if so, abort\nthe transport - similar to what's already there for 9.4.\n", "commitParents": ["9b609e0f6db8bb4cd19eb8565a5db1a3adb22d32"], "commitHash": "07c9bc5a5192ae2bbe79f62337bf1d2e9dbd576e", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpTransportOverHTTP2.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.server.HttpTransportOverHTTP2.TransportCallback.succeeded()", "DEL": 0, "INS": 1, "UPD": 2, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.http2.server.HttpTransportOverHTTP2.TransportCallback.failed(java.lang.Throwable)", "DEL": 0, "INS": 1, "UPD": 2, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.http2.server.HttpTransportOverHTTP2.TransportCallback.onIdleTimeout(java.lang.Throwable)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.server.HttpTransportOverHTTP2.onStreamFailure(java.lang.Throwable)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "StreamResetTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.client.StreamResetTest.testResetAfterAsyncRequestAsyncWriteStalledByFlowControl()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.client.StreamResetTest.testResetAfterAsyncRequestBlockingWriteStalledByFlowControl()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpChannel.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannel.handle()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 12, "TOT": 13}]}, {"spoonFilePath": "HttpChannelOverHTTP2.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.server.HttpChannelOverHTTP2.onFailure(java.lang.Throwable)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "07c9bc5a5192ae2bbe79f62337bf1d2e9dbd576e tags/jetty-9.3.15.v20161220~18", "commitUser": "sbordet", "authoredDateTime": "2016-12-14 11:07:00", "commitGHEventType": "closed", "commitGitStats": [{"lines": 68, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannel.java", "insertions": 37, "deletions": 31}, {"lines": 1, "filePath": "jetty-http2/http2-server/src/main/java/org/eclipse/jetty/http2/server/HttpChannelOverHTTP2.java", "insertions": 1, "deletions": 0}, {"lines": 140, "filePath": "jetty-http2/http2-client/src/test/java/org/eclipse/jetty/http2/client/StreamResetTest.java", "insertions": 140, "deletions": 0}, {"lines": 12, "filePath": "jetty-http2/http2-server/src/main/java/org/eclipse/jetty/http2/server/HttpTransportOverHTTP2.java", "insertions": 10, "deletions": 2}], "commitDateTime": "2016-12-14 11:07:00", "spoonStatsSkippedReason": ""}], "title": "HTTP/2 reset on a stalled write does not unblock writer thread", "spoonStatsSummary": {"spoonMethodsChanged": 6, "DEL": 0, "INS": 6, "UPD": 4, "MOV": 12, "TOT": 22, "spoonFilesChanged": 3}, "gitStatsSummary": {"lines": 81, "insertions": 48, "gitFilesChange": 3, "deletions": 33}, "closed": "2016-12-14 10:07:12", "statsSkippedReason": "", "body": "When an application is blocked by flow control in a blocking write, and the client sends a reset, the blocked thread is not woken up by throwing an exception.", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server", "jetty-http2/http2-server/src/main/java/org/eclipse/jetty/http2/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.http2.server.HttpTransportOverHTTP2.TransportCallback.succeeded()", "org.eclipse.jetty.server.HttpChannel.handle()", "org.eclipse.jetty.http2.server.HttpTransportOverHTTP2.onStreamFailure(java.lang.Throwable)", "org.eclipse.jetty.http2.server.HttpTransportOverHTTP2.TransportCallback.failed(java.lang.Throwable)", "org.eclipse.jetty.http2.server.HttpChannelOverHTTP2.onFailure(java.lang.Throwable)", "org.eclipse.jetty.http2.server.HttpTransportOverHTTP2.TransportCallback.onIdleTimeout(java.lang.Throwable)"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1169"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "sbordet", "filteredCommits": ["98fad34ca0334b3ca93038b0f52106d3b4048098"], "commits": {"98fad34ca0334b3ca93038b0f52106d3b4048098": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2016-12-13 10:29:35", "commitsDetails": [{"commitMessage": "Fixes  #1167 - NPE while completing a reset HTTP/2 stream.\n", "commitParents": ["3a3978f86bd048a1da84f41361ffacff97037175"], "commitHash": "98fad34ca0334b3ca93038b0f52106d3b4048098", "commitSpoonAstDiffStats": [{"spoonFilePath": "HTTP2Stream.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.HTTP2Stream.data(org.eclipse.jetty.http2.frames.DataFrame,org.eclipse.jetty.util.Callback)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.HTTP2Stream.succeeded()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.http2.HTTP2Stream.checkWrite(org.eclipse.jetty.util.Callback)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.HTTP2Stream.endWrite()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.HTTP2Stream.headers(org.eclipse.jetty.http2.frames.HeadersFrame,org.eclipse.jetty.util.Callback)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.HTTP2Stream.failed(java.lang.Throwable)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 2, "TOT": 4}]}], "nameRev": "98fad34ca0334b3ca93038b0f52106d3b4048098 tags/jetty-9.4.1.v20170120~99", "commitUser": "sbordet", "authoredDateTime": "2016-12-14 11:09:10", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 21, "filePath": "jetty-http2/http2-common/src/main/java/org/eclipse/jetty/http2/HTTP2Stream.java", "insertions": 14, "deletions": 7}], "commitDateTime": "2016-12-14 11:09:10", "spoonStatsSkippedReason": ""}], "title": "NPE while completing a reset HTTP/2 stream", "spoonStatsSummary": {"spoonMethodsChanged": 6, "DEL": 0, "INS": 4, "UPD": 4, "MOV": 3, "TOT": 11, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 21, "insertions": 14, "gitFilesChange": 1, "deletions": 7}, "closed": "2016-12-14 15:30:20", "statsSkippedReason": "", "body": "```\r\n2016-12-13 09:52:45.521:DBUG:oejhs.HttpTransportOverHTTP2:qtp1364335809-30: HTTP2 Response #13 failed to flush\r\norg.eclipse.jetty.io.EofException: reset\r\n\tat org.eclipse.jetty.http2.HTTP2Flusher$Entry.complete(HTTP2Flusher.java:317)\r\n\tat org.eclipse.jetty.http2.HTTP2Flusher$Entry.access$200(HTTP2Flusher.java:294)\r\n\tat org.eclipse.jetty.http2.HTTP2Flusher.lambda$complete$0(HTTP2Flusher.java:217)\r\n\tat java.util.ArrayList.forEach(ArrayList.java:1249)\r\n\tat org.eclipse.jetty.http2.HTTP2Flusher.complete(HTTP2Flusher.java:217)\r\n\tat org.eclipse.jetty.http2.HTTP2Flusher.process(HTTP2Flusher.java:192)\r\n\tat org.eclipse.jetty.util.IteratingCallback.processing(IteratingCallback.java:241)\r\n\tat org.eclipse.jetty.util.IteratingCallback.iterate(IteratingCallback.java:224)\r\n\tat org.eclipse.jetty.http2.HTTP2Flusher.window(HTTP2Flusher.java:67)\r\n\tat org.eclipse.jetty.http2.HTTP2Session.onWindowUpdate(HTTP2Session.java:828)\r\n\tat org.eclipse.jetty.http2.HTTP2Session.onWindowUpdate(HTTP2Session.java:464)\r\n\tat org.eclipse.jetty.http2.parser.BodyParser.notifyWindowUpdate(BodyParser.java:199)\r\n\tat org.eclipse.jetty.http2.parser.WindowUpdateBodyParser.onWindowUpdate(WindowUpdateBodyParser.java:98)\r\n\tat org.eclipse.jetty.http2.parser.WindowUpdateBodyParser.parse(WindowUpdateBodyParser.java:64)\r\n\tat org.eclipse.jetty.http2.parser.Parser.parseBody(Parser.java:182)\r\n\tat org.eclipse.jetty.http2.parser.Parser.parse(Parser.java:110)\r\n\tat org.eclipse.jetty.http2.parser.ServerParser.parse(ServerParser.java:115)\r\n\tat org.eclipse.jetty.http2.HTTP2Connection$HTTP2Producer.produce(HTTP2Connection.java:222)\r\n\tat org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume(ExecuteProduceConsume.java:147)\r\n\tat org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produce(ExecuteProduceConsume.java:97)\r\n\tat org.eclipse.jetty.http2.HTTP2Connection.onFillableBlocking(HTTP2Connection.java:120)\r\n\tat org.eclipse.jetty.http2.HTTP2Connection.access$1000(HTTP2Connection.java:41)\r\n\tat org.eclipse.jetty.http2.HTTP2Connection$FillableCallback.succeeded(HTTP2Connection.java:277)\r\n\tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:112)\r\n\tat org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:124)\r\n\tat org.eclipse.jetty.util.thread.Invocable.invokePreferred(Invocable.java:129)\r\n\tat org.eclipse.jetty.util.thread.strategy.ExecutingExecutionStrategy.invoke(ExecutingExecutionStrategy.java:58)\r\n\tat org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume(ExecuteProduceConsume.java:201)\r\n\tat org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:133)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:672)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:590)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\n2016-12-13 09:52:45.521:DBUG:oejhs.HttpTransportOverHTTP2:qtp1364335809-30: HTTP2 Response #13/1d43d93b aborted\r\n2016-12-13 09:52:45.522:DBUG:oejh.HTTP2Flusher:qtp1364335809-30: Failing, active/queued=1/0\r\n2016-12-13 09:52:45.522:INFO:oejhp.BodyParser:qtp1364335809-30: Failure while notifying listener HTTP2ServerSession@1d43d93b{l:/10.150.34.245:443 <-> r:/93.144.157.110:42886,queueSize=0,sendWindow=4194304,recvWindow=65535,streams=0,NOT_CLOSED}\r\njava.lang.NullPointerException\r\n\tat org.eclipse.jetty.http2.HTTP2Stream.failed(HTTP2Stream.java:392)\r\n\tat org.eclipse.jetty.util.Callback$Nested.failed(Callback.java:131)\r\n\tat org.eclipse.jetty.http2.HTTP2Flusher$Entry.failed(HTTP2Flusher.java:330)\r\n\tat org.eclipse.jetty.http2.HTTP2Flusher.lambda$onCompleteFailure$1(HTTP2Flusher.java:266)\r\n\tat java.util.ArrayList.forEach(ArrayList.java:1249)\r\n\tat org.eclipse.jetty.http2.HTTP2Flusher.onCompleteFailure(HTTP2Flusher.java:266)\r\n\tat org.eclipse.jetty.util.IteratingCallback.failed(IteratingCallback.java:401)\r\n\tat org.eclipse.jetty.util.IteratingCallback.processing(IteratingCallback.java:245)\r\n\tat org.eclipse.jetty.util.IteratingCallback.iterate(IteratingCallback.java:224)\r\n\tat org.eclipse.jetty.http2.HTTP2Flusher.window(HTTP2Flusher.java:67)\r\n\tat org.eclipse.jetty.http2.HTTP2Session.onWindowUpdate(HTTP2Session.java:828)\r\n\tat org.eclipse.jetty.http2.HTTP2Session.onWindowUpdate(HTTP2Session.java:464)\r\n\tat org.eclipse.jetty.http2.parser.BodyParser.notifyWindowUpdate(BodyParser.java:199)\r\n\tat org.eclipse.jetty.http2.parser.WindowUpdateBodyParser.onWindowUpdate(WindowUpdateBodyParser.java:98)\r\n\tat org.eclipse.jetty.http2.parser.WindowUpdateBodyParser.parse(WindowUpdateBodyParser.java:64)\r\n\tat org.eclipse.jetty.http2.parser.Parser.parseBody(Parser.java:182)\r\n\tat org.eclipse.jetty.http2.parser.Parser.parse(Parser.java:110)\r\n\tat org.eclipse.jetty.http2.parser.ServerParser.parse(ServerParser.java:115)\r\n\tat org.eclipse.jetty.http2.HTTP2Connection$HTTP2Producer.produce(HTTP2Connection.java:222)\r\n\tat org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume(ExecuteProduceConsume.java:147)\r\n\tat org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produce(ExecuteProduceConsume.java:97)\r\n\tat org.eclipse.jetty.http2.HTTP2Connection.onFillableBlocking(HTTP2Connection.java:120)\r\n\tat org.eclipse.jetty.http2.HTTP2Connection.access$1000(HTTP2Connection.java:41)\r\n\tat org.eclipse.jetty.http2.HTTP2Connection$FillableCallback.succeeded(HTTP2Connection.java:277)\r\n\tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:112)\r\n\tat org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:124)\r\n\tat org.eclipse.jetty.util.thread.Invocable.invokePreferred(Invocable.java:129)\r\n\tat org.eclipse.jetty.util.thread.strategy.ExecutingExecutionStrategy.invoke(ExecutingExecutionStrategy.java:58)\r\n\tat org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume(ExecuteProduceConsume.java:201)\r\n\tat org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:133)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:672)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:590)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\n```", "changesInPackagesGIT": ["jetty-http2/http2-common/src/main/java/org/eclipse/jetty/http2"], "changesInPackagesSPOON": ["org.eclipse.jetty.http2.HTTP2Stream.data(org.eclipse.jetty.http2.frames.DataFrame,org.eclipse.jetty.util.Callback)", "org.eclipse.jetty.http2.HTTP2Stream.succeeded()", "org.eclipse.jetty.http2.HTTP2Stream.checkWrite(org.eclipse.jetty.util.Callback)", "org.eclipse.jetty.http2.HTTP2Stream.endWrite()", "org.eclipse.jetty.http2.HTTP2Stream.headers(org.eclipse.jetty.http2.frames.HeadersFrame,org.eclipse.jetty.util.Callback)", "org.eclipse.jetty.http2.HTTP2Stream.failed(java.lang.Throwable)"], "ttf": 1.0002777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1167"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "gregw", "filteredCommits": ["dd50c9fa244c12b257e586c892cea164d9465cf0"], "commits": {"dd50c9fa244c12b257e586c892cea164d9465cf0": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2016-12-12 08:54:05", "commitsDetails": [{"commitMessage": "Fixes #1163\n", "commitParents": ["4f48d7aadf0db7e9391b2fdee38d17d41ae9f4c2"], "commitHash": "dd50c9fa244c12b257e586c892cea164d9465cf0", "commitSpoonAstDiffStats": [{"spoonFilePath": "Main.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.start.Main.start(org.eclipse.jetty.start.StartArgs)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.start.Main.init(java.lang.String[])", "DEL": 2, "INS": 2, "UPD": 1, "MOV": 0, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.start.Main.stop(java.lang.String,int,java.lang.String,int)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.start.Main.start()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.start.Main.stop()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.start.Main", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "dd50c9fa244c12b257e586c892cea164d9465cf0 tags/jetty-9.4.1.v20170120~103", "commitUser": "gregw", "authoredDateTime": "2016-12-12 19:55:29", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 24, "filePath": "jetty-start/src/main/java/org/eclipse/jetty/start/Main.java", "insertions": 15, "deletions": 9}], "commitDateTime": "2016-12-12 19:55:40", "spoonStatsSkippedReason": ""}], "title": "Start error results in NPE", "spoonStatsSummary": {"spoonMethodsChanged": 6, "DEL": 3, "INS": 3, "UPD": 6, "MOV": 2, "TOT": 14, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 24, "insertions": 15, "gitFilesChange": 1, "deletions": 9}, "closed": "2016-12-12 09:02:05", "statsSkippedReason": "", "body": "```\r\njava.security.PrivilegedActionException: java.net.BindException: Address already in use\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat org.eclipse.jetty.xml.XmlConfiguration.main(XmlConfiguration.java:1437)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.eclipse.jetty.start.Main.invokeMain(Main.java:220)\r\n\tat org.eclipse.jetty.start.Main.start(Main.java:484)\r\n\tat org.eclipse.jetty.start.Main.main(Main.java:77)\r\nCaused by: \r\njava.net.BindException: Address already in use\r\n\tat sun.nio.ch.Net.bind0(Native Method)\r\n\tat sun.nio.ch.Net.bind(Net.java:433)\r\n\tat sun.nio.ch.Net.bind(Net.java:425)\r\n\tat sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:223)\r\n\tat sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:74)\r\n\tat org.eclipse.jetty.server.ServerConnector.open(ServerConnector.java:298)\r\n\tat org.eclipse.jetty.server.AbstractNetworkConnector.doStart(AbstractNetworkConnector.java:80)\r\n\tat org.eclipse.jetty.server.ServerConnector.doStart(ServerConnector.java:236)\r\n\tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n\tat org.eclipse.jetty.server.Server.doStart(Server.java:431)\r\n\tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n\tat org.eclipse.jetty.xml.XmlConfiguration$1.run(XmlConfiguration.java:1511)\r\n\tat org.eclipse.jetty.xml.XmlConfiguration$1.run(XmlConfiguration.java:1438)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat org.eclipse.jetty.xml.XmlConfiguration.main(XmlConfiguration.java:1437)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.eclipse.jetty.start.Main.invokeMain(Main.java:220)\r\n\tat org.eclipse.jetty.start.Main.start(Main.java:484)\r\n\tat org.eclipse.jetty.start.Main.main(Main.java:77)\r\njava.lang.reflect.InvocationTargetException\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.eclipse.jetty.start.Main.invokeMain(Main.java:220)\r\n\tat org.eclipse.jetty.start.Main.start(Main.java:484)\r\n\tat org.eclipse.jetty.start.Main.main(Main.java:77)\r\nCaused by: java.security.PrivilegedActionException: java.net.BindException: Address already in use\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat org.eclipse.jetty.xml.XmlConfiguration.main(XmlConfiguration.java:1437)\r\n\t... 7 more\r\nCaused by: java.net.BindException: Address already in use\r\n\tat sun.nio.ch.Net.bind0(Native Method)\r\n\tat sun.nio.ch.Net.bind(Net.java:433)\r\n\tat sun.nio.ch.Net.bind(Net.java:425)\r\n\tat sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:223)\r\n\tat sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:74)\r\n\tat org.eclipse.jetty.server.ServerConnector.open(ServerConnector.java:298)\r\n\tat org.eclipse.jetty.server.AbstractNetworkConnector.doStart(AbstractNetworkConnector.java:80)\r\n\tat org.eclipse.jetty.server.ServerConnector.doStart(ServerConnector.java:236)\r\n\tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n\tat org.eclipse.jetty.server.Server.doStart(Server.java:431)\r\n\tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n\tat org.eclipse.jetty.xml.XmlConfiguration$1.run(XmlConfiguration.java:1511)\r\n\tat org.eclipse.jetty.xml.XmlConfiguration$1.run(XmlConfiguration.java:1438)\r\n\t... 9 more\r\njava.lang.NullPointerException\r\n\tat org.eclipse.jetty.start.Main.start(Main.java:489)\r\n\tat org.eclipse.jetty.start.Main.main(Main.java:77)\r\n\r\nUsage: java -jar $JETTY_HOME/start.jar [options] [properties] [configs]\r\n       java -jar $JETTY_HOME/start.jar --help  # for more information\r\n```", "changesInPackagesGIT": ["jetty-start/src/main/java/org/eclipse/jetty/start"], "changesInPackagesSPOON": ["org.eclipse.jetty.start.Main.start(org.eclipse.jetty.start.StartArgs)", "org.eclipse.jetty.start.Main.init(java.lang.String[])", "org.eclipse.jetty.start.Main.stop(java.lang.String,int,java.lang.String,int)", "org.eclipse.jetty.start.Main.start()", "org.eclipse.jetty.start.Main.stop()", "org.eclipse.jetty.start.Main"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1163"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "johngmyers", "filteredCommits": ["753aa5ca373661bdf607f6d426c464af93081120", "af5d27c2f74495f11eac95eecf1bb3d45a12d9f1"], "commits": {"af5d27c2f74495f11eac95eecf1bb3d45a12d9f1": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "753aa5ca373661bdf607f6d426c464af93081120": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2016-12-02 22:15:04", "commitsDetails": [{"commitMessage": "Issue #1146 DecryptedEndPoint deadlock\n", "commitParents": ["ec0b1ea847e9d664cf98ac2fa3da24e011e1ea28"], "commitHash": "af5d27c2f74495f11eac95eecf1bb3d45a12d9f1", "commitSpoonAstDiffStats": [{"spoonFilePath": "ProxyConnectionFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ProxyConnectionFactory.ProxyEndPoint.tryFillInterested(org.eclipse.jetty.util.Callback)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AbstractEndPoint.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.AbstractEndPoint.fillInterested(org.eclipse.jetty.util.Callback)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.AbstractEndPoint.tryFillInterested(org.eclipse.jetty.util.Callback)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "FillInterest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.FillInterest.tryRegister(org.eclipse.jetty.util.Callback)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.io.FillInterest.register(org.eclipse.jetty.util.Callback)", "DEL": 1, "INS": 1, "UPD": 2, "MOV": 5, "TOT": 9}]}, {"spoonFilePath": "AbstractConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.AbstractConnection.tryFillInterested()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.AbstractConnection.tryFillInterested(org.eclipse.jetty.util.Callback)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "SslConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.needsFillInterest()", "DEL": 1, "INS": 5, "UPD": 0, "MOV": 7, "TOT": 13}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.flush(java.nio.ByteBuffer[])", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.onFillable()", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 1, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.onIncompleteFlush()", "DEL": 0, "INS": 5, "UPD": 0, "MOV": 4, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.ensureFillInterested()", "DEL": 2, "INS": 1, "UPD": 2, "MOV": 5, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.shutdownOutput()", "DEL": 2, "INS": 8, "UPD": 1, "MOV": 4, "TOT": 15}]}, {"spoonFilePath": "EndPoint.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.tryFillInterested(org.eclipse.jetty.util.Callback)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "af5d27c2f74495f11eac95eecf1bb3d45a12d9f1 tags/jetty-9.4.0.v20161208~2^2~2^2~2", "commitUser": "gregw", "authoredDateTime": "2016-12-07 22:50:27", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 10, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/AbstractConnection.java", "insertions": 10, "deletions": 0}, {"lines": 8, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/EndPoint.java", "insertions": 8, "deletions": 0}, {"lines": 39, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/FillInterest.java", "insertions": 27, "deletions": 12}, {"lines": 9, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/AbstractEndPoint.java", "insertions": 8, "deletions": 1}, {"lines": 94, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ssl/SslConnection.java", "insertions": 56, "deletions": 38}, {"lines": 5, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/ProxyConnectionFactory.java", "insertions": 5, "deletions": 0}], "commitDateTime": "2016-12-07 22:50:27", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1146 - jetty.server.HttpInput deadlock.\n\nMoved calls to close(Throwable) outside synchronized blocks, since\nthey mail fail callbacks that reenter into caller code, causing\ndeadlocks.\n", "commitParents": ["3b73265331939eb6e511993c896a9f30e0df94f1"], "commitHash": "753aa5ca373661bdf607f6d426c464af93081120", "commitSpoonAstDiffStats": [], "nameRev": "753aa5ca373661bdf607f6d426c464af93081120 tags/jetty-9.3.15.v20161220~4", "commitUser": "sbordet", "authoredDateTime": "2016-12-20 10:39:36", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 631, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ssl/SslConnection.java", "insertions": 320, "deletions": 311}], "commitDateTime": "2016-12-20 11:40:27", "spoonStatsSkippedReason": "tooManyChanges"}], "title": "jetty.server.HttpInput deadlock", "spoonStatsSummary": {"spoonMethodsChanged": 14, "DEL": 8.0, "INS": 31.0, "UPD": 5.0, "MOV": 26.0, "TOT": 70.0, "spoonFilesChanged": 6}, "gitStatsSummary": {"lines": 796, "insertions": 434, "gitFilesChange": 6, "deletions": 362}, "closed": "2017-03-01 18:51:59", "statsSkippedReason": "", "body": "Jetty 9.3.12 embedded.\r\n\r\nThe JAX-RS resource hands off the InputStream to a different thread which does reads on it in order to stream the request body to a separate service. Inducing a particular failure in the destination service triggers the deadlock. I haven't tracked down the specific behavior the failure is inducing.\r\n\r\n```\r\nAttaching to process ID 8681, please wait...\r\nDebugger attached successfully.\r\nServer compiler detected.\r\nJVM version is 25.72-b15\r\nDeadlock Detection:\r\n\r\nFound one Java-level deadlock:\r\n=============================\r\n\r\n\"http-client-transientstorage-7626\":\r\n  waiting to lock Monitor@0x00007f35b86885d8 (Object@0x00000000e7657da8, a org/eclipse/jetty/io/ssl/SslConnection$DecryptedEndPoint),\r\n  which is held by \"http-worker-7401 b3381c9a-7b1d-4de4-ac62-40a89aaa992a\"\r\n\"http-worker-7401 b3381c9a-7b1d-4de4-ac62-40a89aaa992a\":\r\n  waiting to lock Monitor@0x00007f35b8e3f128 (Object@0x00000000ec5b6640, a java/util/ArrayDeque),\r\n  which is held by \"http-client-transientstorage-7626\"\r\n\r\nFound a total of 1 deadlock.\r\n\r\n....\r\n\r\nThread 28090: (state = BLOCKED)\r\n - org.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.needsFillInterest() @bci=3, line=429 (Compiled frame)\r\n - org.eclipse.jetty.io.AbstractEndPoint$1.needsFillInterest() @bci=4, line=45 (Compiled frame)\r\n - org.eclipse.jetty.io.FillInterest.register(org.eclipse.jetty.util.Callback) @bci=209, line=78 (Compiled frame)\r\n - org.eclipse.jetty.io.AbstractEndPoint.fillInterested(org.eclipse.jetty.util.Callback) @bci=9, line=128 (Compiled frame)\r\n - org.eclipse.jetty.server.HttpConnection.blockingReadFillInterested() @bci=8, line=554 (Compiled frame)\r\n - org.eclipse.jetty.server.HttpInputOverHTTP.blockForContent() @bci=18, line=39 (Compiled frame)\r\n - org.eclipse.jetty.server.HttpInput$1.blockForContent(org.eclipse.jetty.server.HttpInput) @bci=1, line=846 (Compiled frame)\r\n - org.eclipse.jetty.server.HttpInput.read(byte[], int, int) @bci=241, line=188 (Compiled frame)\r\n - org.glassfish.jersey.message.internal.EntityInputStream.read(byte[], int, int) @bci=7, line=102 (Compiled frame)\r\n - java.io.FilterInputStream.read(byte[], int, int) @bci=7, line=133 (Compiled frame)\r\n - com.proofpoint.anomalytics.attachment.service.StorageService$TimedInputStream.read(byte[], int, int) @bci=28, line=323 (Compiled frame)\r\n - java.io.FilterInputStream.read(byte[]) @bci=5, line=107 (Compiled frame)\r\n - com.proofpoint.http.client.InputStreamBodySource$1.read(byte[]) @bci=9, line=56 (Compiled frame)\r\n - com.proofpoint.http.client.jetty.JettyHttpClient$BodySourceInputStream.read(byte[]) @bci=5, line=975 (Compiled frame)\r\n - org.eclipse.jetty.client.util.InputStreamContentProvider$InputStreamContentProviderIterator.hasNext() @bci=33, line=176 (Compiled frame)\r\n - org.eclipse.jetty.client.HttpContent.advance(java.util.Iterator) @bci=1, line=144 (Compiled frame)\r\n - org.eclipse.jetty.client.HttpContent.advance() @bci=46, line=138 (Compiled frame)\r\n - org.eclipse.jetty.client.http.HttpSenderOverHTTP$HeadersCallback.<init>(org.eclipse.jetty.client.http.HttpSenderOverHTTP, org.eclipse.jetty.client.HttpExchange, org.eclipse.jetty.client.HttpContent, org.eclipse.jetty.util.Callback) @bci=159, line=189 (Compiled frame)\r\n - org.eclipse.jetty.client.http.HttpSenderOverHTTP.sendHeaders(org.eclipse.jetty.client.HttpExchange, org.eclipse.jetty.client.HttpContent, org.eclipse.jetty.util.Callback) @bci=8, line=58 (Compiled frame)\r\n - org.eclipse.jetty.client.HttpSender.send(org.eclipse.jetty.client.HttpExchange) @bci=174, line=204 (Compiled frame)\r\n - org.eclipse.jetty.client.http.HttpChannelOverHTTP.send() @bci=14, line=79 (Compiled frame)\r\n - org.eclipse.jetty.client.HttpConnection.send(org.eclipse.jetty.client.HttpChannel, org.eclipse.jetty.client.HttpExchange) @bci=65, line=205 (Compiled frame)\r\n - org.eclipse.jetty.client.http.HttpConnectionOverHTTP$Delegate.send(org.eclipse.jetty.client.HttpExchange) @bci=53, line=202 (Compiled frame)\r\n - org.eclipse.jetty.client.http.HttpConnectionOverHTTP.send(org.eclipse.jetty.client.HttpExchange) @bci=5, line=82 (Compiled frame)\r\n - org.eclipse.jetty.client.http.HttpDestinationOverHTTP.send(org.eclipse.jetty.client.http.HttpConnectionOverHTTP, org.eclipse.jetty.client.HttpExchange) @bci=2, line=37 (Compiled frame)\r\n - org.eclipse.jetty.client.http.HttpDestinationOverHTTP.send(org.eclipse.jetty.client.api.Connection, org.eclipse.jetty.client.HttpExchange) @bci=6, line=27 (Compiled frame)\r\n - org.eclipse.jetty.client.PoolingHttpDestination.process(org.eclipse.jetty.client.api.Connection) @bci=204, line=165 (Compiled frame)\r\n - org.eclipse.jetty.client.PoolingHttpDestination.process() @bci=14, line=113 (Compiled frame)\r\n - org.eclipse.jetty.client.PoolingHttpDestination.send() @bci=14, line=97 (Compiled frame)\r\n - org.eclipse.jetty.client.PoolingHttpDestination.succeeded() @bci=1, line=84 (Compiled frame)\r\n - org.eclipse.jetty.client.DuplexConnectionPool.proceed() @bci=4, line=171 (Compiled frame)\r\n - org.eclipse.jetty.client.DuplexConnectionPool$1.succeeded(org.eclipse.jetty.client.api.Connection) @bci=64, line=148 (Compiled frame)\r\n - org.eclipse.jetty.client.DuplexConnectionPool$1.succeeded(java.lang.Object) @bci=5, line=139 (Compiled frame)\r\n - org.eclipse.jetty.util.Promise$Wrapper.succeeded(java.lang.Object) @bci=5, line=78 (Compiled frame)\r\n - org.eclipse.jetty.client.http.HttpConnectionOverHTTP.onOpen() @bci=13, line=90 (Compiled frame)\r\n - org.eclipse.jetty.io.ssl.SslConnection.onOpen() @bci=11, line=162 (Compiled frame)\r\n - org.eclipse.jetty.io.SelectorManager.connectionOpened(org.eclipse.jetty.io.Connection) @bci=1, line=324 (Compiled frame)\r\n - org.eclipse.jetty.io.ManagedSelector.createEndPoint(java.nio.channels.SocketChannel, java.nio.channels.SelectionKey) @bci=54, line=425 (Compiled frame)\r\n - org.eclipse.jetty.io.ManagedSelector.access$1600(org.eclipse.jetty.io.ManagedSelector, java.nio.channels.SocketChannel, java.nio.channels.SelectionKey) @bci=3, line=56 (Compiled frame)\r\n - org.eclipse.jetty.io.ManagedSelector$CreateEndPoint.run() @bci=12, line=605 (Compiled frame)\r\n - org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.executeProduceConsume() @bci=401, line=303 (Compiled frame)\r\n - org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume() @bci=28, line=148 (Compiled frame)\r\n - org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run() @bci=148, line=136 (Compiled frame)\r\n - org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(java.lang.Runnable) @bci=1, line=671 (Compiled frame)\r\n - org.eclipse.jetty.util.thread.QueuedThreadPool$2.run() @bci=104, line=589 (Compiled frame)\r\n - java.lang.Thread.run() @bci=11, line=745 (Compiled frame)\r\n\r\n...\r\n\r\nThread 26927: (state = BLOCKED)\r\n - org.eclipse.jetty.server.HttpInput.failed(java.lang.Throwable) @bci=9, line=628 (Interpreted frame)\r\n - org.eclipse.jetty.server.HttpConnection$BlockingReadCallback.failed(java.lang.Throwable) @bci=8, line=605 (Interpreted frame)\r\n - org.eclipse.jetty.io.FillInterest.onFail(java.lang.Throwable) @bci=29, line=125 (Interpreted frame)\r\n - org.eclipse.jetty.io.AbstractEndPoint.close(java.lang.Throwable) @bci=18, line=121 (Compiled frame)\r\n - org.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.close(java.lang.Throwable) @bci=18, line=974 (Compiled frame)\r\n - org.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.flush(java.nio.ByteBuffer[]) @bci=1041, line=894 (Interpreted frame)\r\n - org.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.shutdownOutput() @bci=104, line=932 (Compiled frame)\r\n - org.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.close() @bci=1, line=964 (Compiled frame)\r\n - org.eclipse.jetty.io.AbstractConnection.close() @bci=4, line=220 (Compiled frame)\r\n - org.eclipse.jetty.server.HttpConnection.onFillable() @bci=113, line=244 (Compiled frame)\r\n - org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded() @bci=4, line=273 (Compiled frame)\r\n - org.eclipse.jetty.io.FillInterest.fillable() @bci=61, line=95 (Compiled frame)\r\n - org.eclipse.jetty.io.ssl.SslConnection.onFillable() @bci=56, line=202 (Compiled frame)\r\n - org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded() @bci=4, line=273 (Compiled frame)\r\n - org.eclipse.jetty.io.FillInterest.fillable() @bci=61, line=95 (Compiled frame)\r\n - org.eclipse.jetty.io.SelectChannelEndPoint$2.run() @bci=7, line=93 (Compiled frame)\r\n - org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(java.lang.Runnable) @bci=1, line=671 (Compiled frame)\r\n - com.proofpoint.http.server.HttpServer$1.runJob(java.lang.Runnable) @bci=13, line=141 (Compiled frame)\r\n - org.eclipse.jetty.util.thread.QueuedThreadPool$2.run() @bci=104, line=589 (Compiled frame)\r\n - java.lang.Thread.run() @bci=11, line=745 (Compiled frame)\r\n\r\n```", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server", "jetty-io/src/main/java/org/eclipse/jetty/io/ssl", "jetty-io/src/main/java/org/eclipse/jetty/io"], "changesInPackagesSPOON": ["org.eclipse.jetty.io.AbstractEndPoint.fillInterested(org.eclipse.jetty.util.Callback)", "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.flush(java.nio.ByteBuffer[])", "org.eclipse.jetty.io.FillInterest.register(org.eclipse.jetty.util.Callback)", "org.eclipse.jetty.io.AbstractEndPoint.tryFillInterested(org.eclipse.jetty.util.Callback)", "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.onIncompleteFlush()", "org.eclipse.jetty.server.ProxyConnectionFactory.ProxyEndPoint.tryFillInterested(org.eclipse.jetty.util.Callback)", "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.shutdownOutput()", "org.eclipse.jetty.io.tryFillInterested(org.eclipse.jetty.util.Callback)", "org.eclipse.jetty.io.FillInterest.tryRegister(org.eclipse.jetty.util.Callback)", "org.eclipse.jetty.io.ssl.SslConnection.onFillable()", "org.eclipse.jetty.io.AbstractConnection.tryFillInterested(org.eclipse.jetty.util.Callback)", "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.ensureFillInterested()", "org.eclipse.jetty.io.AbstractConnection.tryFillInterested()", "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.needsFillInterest()"], "ttf": 88.00027777777778, "numCommits": 2, "url": "https://github.com/eclipse/jetty.project/issues/1146"}, {"labels": ["Bug", "High Priority"], "closed": "2016-12-01 05:58:44", "body": "For request without a host specified, redirections have an empty host!\r\n\r\n```\r\n[2000] telnet www.webtide.com 80\r\nTrying 107.22.210.238...\r\nConnected to webtide.com.\r\nEscape character is '^]'.\r\nGET / HTTP/1.0\r\n\r\nHTTP/1.1 301 Moved Permanently\r\nContent-length: 0\r\nLocation: https:///\r\nConnection: close\r\n\r\nConnection closed by foreign host.\r\n```\r\n\r\n\r\n", "commits": {}, "title": "empty host in redirect", "created": "2016-11-25 00:26:20", "user": "gregw", "url": "https://github.com/eclipse/jetty.project/issues/1131", "commitsDetails": [], "ttf": 6.000277777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["d361786e436d10e02c034ac91034ca31e4c4fdb0"], "commits": {"d361786e436d10e02c034ac91034ca31e4c4fdb0": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2016-11-22 16:47:47", "commitsDetails": [{"commitMessage": "Issue #1118 - Eliminating .destroy() conflict\n\n+ extending from AbstractLifeCycle instead of ContainerLifeCycle\n", "commitParents": ["12c0663e6c2420bca3d14b90096b2679eae07dc5"], "commitHash": "d361786e436d10e02c034ac91034ca31e4c4fdb0", "commitSpoonAstDiffStats": [{"spoonFilePath": "WebSocketUpgradeFilter.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter.destroy()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter.init(javax.servlet.FilterConfig)", "DEL": 4, "INS": 3, "UPD": 3, "MOV": 4, "TOT": 14}]}], "nameRev": "d361786e436d10e02c034ac91034ca31e4c4fdb0 tags/jetty-9.4.0.RC3~10^2~9", "commitUser": "joakime", "authoredDateTime": "2016-11-22 09:48:01", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 24, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/WebSocketUpgradeFilter.java", "insertions": 14, "deletions": 10}], "commitDateTime": "2016-11-22 09:48:01", "spoonStatsSkippedReason": ""}], "title": "Filter.destroy() conflicts with ContainerLifeCycle.destroy() in WebSocketUpgradeFilter", "spoonStatsSummary": {"spoonMethodsChanged": 3, "DEL": 5, "INS": 5, "UPD": 4, "MOV": 5, "TOT": 19, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 24, "insertions": 14, "gitFilesChange": 1, "deletions": 10}, "closed": "2016-11-22 21:23:22", "statsSkippedReason": "", "body": "The `WebSocketUpgradeFilter.destroy()` misbehaves because of the dual meaning of the .destroy() method.\r\n\r\n* `javax.servlet.Filter.destroy()`\r\n* `org.eclipse.jetty.util.component.ContainerLifeCycle.destroy()`\r\n\r\nResolve this conflict to allow webapps that want to use `stop()`/`start()` on a context with websockets properly.", "changesInPackagesGIT": ["jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter", "org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter.destroy()", "org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter.init(javax.servlet.FilterConfig)"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1118"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug", "High Priority"], "user": "pschorf", "filteredCommits": ["afaa170cd98c050472396a8dadb4cdb20acf9d3d"], "commits": {"afaa170cd98c050472396a8dadb4cdb20acf9d3d": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "eb1320f56cd8b384e032875da10e1a655c4f057e": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2016-11-21 22:33:20", "commitsDetails": [{"commitMessage": "Issue #1116 Allow empty HTTP header value\n", "commitParents": ["165ca36f6bf2cd6cae13a6b20564d6ac5d4b3c47"], "commitHash": "afaa170cd98c050472396a8dadb4cdb20acf9d3d", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpGenerator.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.HttpGenerator.generateHeaders(org.eclipse.jetty.http.MetaData,java.nio.ByteBuffer,java.nio.ByteBuffer,boolean)", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 2}]}], "nameRev": "afaa170cd98c050472396a8dadb4cdb20acf9d3d tags/jetty-9.4.7.v20170914~34^2~2", "commitUser": "gregw", "authoredDateTime": "2017-08-30 16:40:58", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 4, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/HttpGenerator.java", "insertions": 0, "deletions": 4}], "commitDateTime": "2017-08-30 16:40:58", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1116 Allow empty HTTP header value\n", "commitParents": ["bd111264f574594c9cbb0a1f0151a2686f36f157"], "commitHash": "eb1320f56cd8b384e032875da10e1a655c4f057e", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpGeneratorClientTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.HttpGeneratorClientTest.testEmptyHeaders()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpGenerator.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.HttpGenerator.generateTrailers(java.nio.ByteBuffer,org.eclipse.jetty.http.HttpFields)", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 2}]}], "nameRev": "eb1320f56cd8b384e032875da10e1a655c4f057e tags/jetty-9.4.7.v20170914~45", "commitUser": "gregw", "authoredDateTime": "2017-08-30 16:42:47", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 41, "filePath": "jetty-http/src/test/java/org/eclipse/jetty/http/HttpGeneratorClientTest.java", "insertions": 41, "deletions": 0}, {"lines": 4, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/HttpGenerator.java", "insertions": 0, "deletions": 4}], "commitDateTime": "2017-08-30 16:42:47", "spoonStatsSkippedReason": ""}], "title": "Support empty HTTP header values", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 2, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 2, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 4, "insertions": 0, "gitFilesChange": 1, "deletions": 4}, "closed": "2017-09-14 11:24:38", "statsSkippedReason": "", "body": "As I understand it, RFC 7230 supports headers with empty values:\r\n\r\nfield-value    = *( field-content / obs-fold )\r\n\r\nBut HttpGenerator has the comment\r\n\r\n// rfc7230 does not allow no value\r\n\r\non line 605 which skips headers with no value. Am I misreading the spec? If not, would it be possible to update Jetty to support passing these headers?", "changesInPackagesGIT": ["jetty-http/src/main/java/org/eclipse/jetty/http"], "changesInPackagesSPOON": ["org.eclipse.jetty.http.HttpGenerator.generateHeaders(org.eclipse.jetty.http.MetaData,java.nio.ByteBuffer,java.nio.ByteBuffer,boolean)"], "ttf": 296.0002777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1116"}, {"labels": ["Bug"], "closed": "2017-04-28 11:21:29", "body": "When preforming some penetration testing of our web app, we discovered several NullPointerExceptions in the log with pages getting 500 errors. We are using Jetty 9.3.8\r\n\r\n`\r\njava.lang.NullPointerException\r\n\tat org.eclipse.jetty.server.Response.sendRedirect(Response.java:671)\r\n\tat org.eclipse.jetty.server.Response.sendRedirect(Response.java:691)\r\n\tat org.apache.wicket.protocol.http.servlet.ServletWebResponse.sendRedirect(ServletWebResponse.java:297)\r\n`\r\n\r\nThis was due to URIUtil.canonicalPath returning NULL for the path \"/foo/bar?10&5=../../../../../../../../../../../../../../../../etc/passwd\".\r\nI would have expected the path to be returned AS IS, as the ../ sequence are in the query parameters rather than the query info. For example\r\n\r\n- /foo/bar?10&5=../../../../../../../../../../../../../../../../etc/passwd => /foo/bar?10&5=../../../../../../../../../../../../../../../../etc/passwd\r\n- /foo/../bar?10&5=../../../../../../../../../../../../../../../../etc/passwd => /bar?10&5=../../../../../../../../../../../../../../../../etc/passwd\r\n", "commits": {}, "title": "URIUtil.canonicalPath incorrectly handles paths with query parameters containing '../'", "created": "2016-11-07 16:07:24", "user": "ontology-rory", "url": "https://github.com/eclipse/jetty.project/issues/1079", "commitsDetails": [], "ttf": 171.00027777777777}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "gregw", "filteredCommits": ["7e903cfc6b5ac27799481ce35f774dc654a3e8d5", "fba901d1564e84cc7d2f49b3c60e0fc3b25ef934"], "commits": {"7e903cfc6b5ac27799481ce35f774dc654a3e8d5": {"commitUser": "sbordet", "commitGHEventType": "closed"}, "fba901d1564e84cc7d2f49b3c60e0fc3b25ef934": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2016-11-03 03:03:16", "commitsDetails": [{"commitMessage": "Fixes #1064 - HttpClient sets chunked transfer-encoding.\n\nReplaced the hint that there is a body by setting the Content-Type\nheader rather than the Transfer-Encoding header.\n", "commitParents": ["bbc21e8648db598114d50e1ad0ba64c08400a966"], "commitHash": "7e903cfc6b5ac27799481ce35f774dc654a3e8d5", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpConnection.normalizeRequest(org.eclipse.jetty.client.api.Request)", "DEL": 2, "INS": 4, "UPD": 0, "MOV": 4, "TOT": 10}]}], "nameRev": "7e903cfc6b5ac27799481ce35f774dc654a3e8d5 tags/jetty-9.4.0.RC2~1^2~25", "commitUser": "sbordet", "authoredDateTime": "2016-11-03 11:40:21", "commitGHEventType": "closed", "commitGitStats": [{"lines": 20, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpConnection.java", "insertions": 8, "deletions": 12}], "commitDateTime": "2016-11-03 11:40:45", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1064 - HttpClient sets chunked transfer-encoding.\n\nFixed test assertion.\n", "commitParents": ["7e903cfc6b5ac27799481ce35f774dc654a3e8d5"], "commitHash": "fba901d1564e84cc7d2f49b3c60e0fc3b25ef934", "commitSpoonAstDiffStats": [{"spoonFilePath": "TypedContentProviderTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.util.TypedContentProviderTest.testTypedContentProviderWithNoContentType().3.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "fba901d1564e84cc7d2f49b3c60e0fc3b25ef934 tags/jetty-9.4.0.RC2~1^2~24", "commitUser": "sbordet", "authoredDateTime": "2016-11-03 14:21:40", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-client/src/test/java/org/eclipse/jetty/client/util/TypedContentProviderTest.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2016-11-03 14:21:40", "spoonStatsSkippedReason": ""}], "title": "HttpClient sets chunked transfer-encoding", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 2, "INS": 4, "UPD": 0, "MOV": 4, "TOT": 10, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 20, "insertions": 8, "gitFilesChange": 1, "deletions": 12}, "closed": "2016-11-03 10:40:52", "statsSkippedReason": "", "body": "Currently the HttpClient may [set a chunked transfer-encoding](https://github.com/eclipse/jetty.project/blob/jetty-9.3.x/jetty-client/src/main/java/org/eclipse/jetty/client/HttpConnection.java#L142).\r\n\r\nThis is not correct as there is no guarantee the transport can support chunking and even if it can, it is up to the HTTP Generator to decide if chunking should be used.\r\n\r\nFor this use case, it is sufficient for the HttpClient to tell the transport that body should be expected. This can be done by setting a content-type, which if not set can be set to `application/octet-stream` instead of trying to force chunking.  The presence of a content-type should be sufficient for the HTTP generator to turn on chunking if the content length cannot be determined.", "changesInPackagesGIT": ["jetty-client/src/main/java/org/eclipse/jetty/client"], "changesInPackagesSPOON": ["org.eclipse.jetty.client.HttpConnection.normalizeRequest(org.eclipse.jetty.client.api.Request)"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1064"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["3dc2637d21ba2ef09f666bd9c2628dc274916f85"], "commits": {"3dc2637d21ba2ef09f666bd9c2628dc274916f85": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2016-11-02 22:42:50", "commitsDetails": [{"commitMessage": "Issue #1063 Accept empty host\n", "commitParents": ["f3f31d163c4f04d5c8f1bc2e4ae38f8c88583e77"], "commitHash": "3dc2637d21ba2ef09f666bd9c2628dc274916f85", "commitSpoonAstDiffStats": [{"spoonFilePath": "HostPort.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.HostPort", "DEL": 2, "INS": 2, "UPD": 0, "MOV": 3, "TOT": 7}]}, {"spoonFilePath": "HostPortTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.HostPortTest.test()", "DEL": 0, "INS": 5, "UPD": 0, "MOV": 0, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.util.HostPortTest.testCases()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 2, "TOT": 4}]}], "nameRev": "3dc2637d21ba2ef09f666bd9c2628dc274916f85 tags/jetty-9.4.0.RC2~1^2~27", "commitUser": "gregw", "authoredDateTime": "2016-11-03 14:51:31", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 14, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/HostPortTest.java", "insertions": 8, "deletions": 6}, {"lines": 3, "filePath": "jetty-http/src/test/resources/jetty-logging.properties", "insertions": 3, "deletions": 0}, {"lines": 11, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/HostPort.java", "insertions": 8, "deletions": 3}], "commitDateTime": "2016-11-03 15:06:32", "spoonStatsSkippedReason": ""}], "title": "HostPortHttpField should handle port-only values", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 2, "INS": 2, "UPD": 0, "MOV": 3, "TOT": 7, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 11, "insertions": 8, "gitFilesChange": 1, "deletions": 3}, "closed": "2016-11-03 04:37:26", "statsSkippedReason": "", "body": "As identified in issue #1062 the syntax of the `Host` header in jmeter is like this ...\r\n\r\n    Host: :8080\r\n\r\nThis format results in an illegal request format in Jetty ...\r\n\r\n```\r\n2016-11-02 14:52:29.900:WARN:oejh.HttpParser:qtp359037866-40: bad HTTP parsed: 400 Bad HostPort for HttpChannelOverHttp@f64c140{r=0,c=false,a=IDLE,uri=null}\r\norg.eclipse.jetty.http.BadMessageException: 400: Bad HostPort\r\n    at org.eclipse.jetty.http.HostPortHttpField.<init>(HostPortHttpField.java:48)\r\n    at org.eclipse.jetty.http.HttpParser.parsedHeader(HttpParser.java:914)\r\n    at org.eclipse.jetty.http.HttpParser.parseHeaders(HttpParser.java:1088)\r\n    at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:1320)\r\n    at org.eclipse.jetty.server.HttpConnection.parseRequestBuffer(HttpConnection.java:350)\r\n    at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:234)\r\n    at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:273)\r\n    at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)\r\n    at org.eclipse.jetty.io.ssl.SslConnection.onFillable(SslConnection.java:202)\r\n    at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:273)\r\n    at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)\r\n    at org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:93)\r\n    at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.executeProduceConsume(ExecuteProduceConsume.java:303)\r\n    at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume(ExecuteProduceConsume.java:148)\r\n    at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:136)\r\n    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:671)\r\n    at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:589)\r\n    at java.lang.Thread.run(Thread.java:745)\r\nCaused by: \r\njava.lang.IllegalArgumentException: Bad host\r\n    at org.eclipse.jetty.util.HostPort.<init>(HostPort.java:82)\r\n    at org.eclipse.jetty.http.HostPortHttpField.<init>(HostPortHttpField.java:44)\r\n    at org.eclipse.jetty.http.HttpParser.parsedHeader(HttpParser.java:914)\r\n    at org.eclipse.jetty.http.HttpParser.parseHeaders(HttpParser.java:1088)\r\n    at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:1320)\r\n    at org.eclipse.jetty.server.HttpConnection.parseRequestBuffer(HttpConnection.java:350)\r\n    at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:234)\r\n    at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:273)\r\n    at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)\r\n    at org.eclipse.jetty.io.ssl.SslConnection.onFillable(SslConnection.java:202)\r\n    at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:273)\r\n    at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)\r\n```", "changesInPackagesGIT": ["jetty-util/src/main/java/org/eclipse/jetty/util"], "changesInPackagesSPOON": ["org.eclipse.jetty.util.HostPort"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1063"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "sklock", "filteredCommits": ["3b36b13d3153498c4f32a314b002236cd071ccc1", "fd20d466594d3a5d133441962934b6d2972382f5", "1eb4e3b4e38dc57585f2072f1ea0932a13c308c4"], "commits": {"3b36b13d3153498c4f32a314b002236cd071ccc1": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "fd20d466594d3a5d133441962934b6d2972382f5": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "1eb4e3b4e38dc57585f2072f1ea0932a13c308c4": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2016-11-02 21:19:17", "commitsDetails": [{"commitMessage": "Issue #1062 Ssl Nonblocking read callback\n", "commitParents": ["c499ec68f7d824fea420b10b504fbfedc7b94b0b"], "commitHash": "3b36b13d3153498c4f32a314b002236cd071ccc1", "commitSpoonAstDiffStats": [{"spoonFilePath": "SslConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.ensureFillInterested()", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 3, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "3b36b13d3153498c4f32a314b002236cd071ccc1 tags/jetty-9.4.0.RC2~1^2~10", "commitUser": "gregw", "authoredDateTime": "2016-11-10 09:56:57", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 34, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ssl/SslConnection.java", "insertions": 32, "deletions": 2}], "commitDateTime": "2016-11-10 09:57:15", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1062 - adding https/ssl/tls test varient to ThreadStarvationTest\n", "commitParents": ["9f317dee94404f5ed4573b6109fcfe59bf3a5268"], "commitHash": "fd20d466594d3a5d133441962934b6d2972382f5", "commitSpoonAstDiffStats": [{"spoonFilePath": "ThreadStarvationTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ThreadStarvationTest.testEPCExitsLowThreadsMode()", "DEL": 1, "INS": 1, "UPD": 1, "MOV": 2, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.server.ThreadStarvationTest.params()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ThreadStarvationTest.prepareServer(org.eclipse.jetty.server.Handler)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.ThreadStarvationTest", "DEL": 0, "INS": 6, "UPD": 0, "MOV": 0, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.server.ThreadStarvationTest.testReadInput()", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 1, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.server.ThreadStarvationTest.testStarvation(org.eclipse.jetty.util.thread.ExecutionStrategy$Factory)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}]}], "nameRev": "fd20d466594d3a5d133441962934b6d2972382f5 tags/jetty-9.4.0.RC3~10^2~12", "commitUser": "joakime", "authoredDateTime": "2016-11-17 16:42:37", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 113, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ThreadStarvationTest.java", "insertions": 102, "deletions": 11}], "commitDateTime": "2016-11-17 16:42:37", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1062 Ssl Thread Starvation\n", "commitParents": ["a6ce2d7821561a072519f42b946a8c55635f9dc5"], "commitHash": "1eb4e3b4e38dc57585f2072f1ea0932a13c308c4", "commitSpoonAstDiffStats": [{"spoonFilePath": "SslConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.ensureFillInterested()", "DEL": 1, "INS": 2, "UPD": 3, "MOV": 4, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.3.getInvocationType()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.3", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "1eb4e3b4e38dc57585f2072f1ea0932a13c308c4 tags/jetty-9.4.0.RC2~18", "commitUser": "gregw", "authoredDateTime": "2016-11-10 10:17:46", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 21, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ssl/SslConnection.java", "insertions": 11, "deletions": 10}], "commitDateTime": "2016-11-10 10:17:46", "spoonStatsSkippedReason": ""}], "title": "Jetty allows requests to hang under PUT load", "spoonStatsSummary": {"spoonMethodsChanged": 4, "DEL": 2, "INS": 6, "UPD": 6, "MOV": 7, "TOT": 21, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 55, "insertions": 43, "gitFilesChange": 1, "deletions": 12}, "closed": "2016-11-18 00:20:26", "statsSkippedReason": "", "body": "Using the `ServerConnector` backed by an `SslConnectionFactory` and an `HttpConnectionFactory`, we've observed Jetty go into a state where requests hang when subjected to `PUT` load.  In particular, the requests hang until the socket idle timeout is reached, whereupon Jetty terminates them.\r\n\r\nI'm attaching [an archive](https://github.com/eclipse/jetty.project/files/567708/test-project.zip) containing a Maven project with a server and a JMeter test plan that seem to reproduce the issue.  We've been able to reproduce the issue with the server and test plan executed on different hosts (both running some flavor of Linux); we have not been able to reproduce it if the server and plan are executed on the same host.\r\n\r\nSome additional details:\r\n\r\n* We ran into this issue in the context of trying to upgrade from Jetty 8 to 9.  Through some experimentation, we've determined that the behavior was introduced in 9.3.0.M2.  We haven't tested every release since, but we have observed it in the most recent release.\r\n** In previous versions of Jetty, with the same client, the test server would fully read each request and send a canned response.  No requests would hang.\r\n* We know that Jetty is closing the connection due to the idle timeout because of the following logging output:\r\n```\r\njava.io.IOException: java.util.concurrent.TimeoutException: Idle timeout expired: 300000/300000 ms\r\n\tat org.eclipse.jetty.server.HttpInput$ErrorState.noContent(HttpInput.java:831)\r\n\tat org.eclipse.jetty.server.HttpInput.read(HttpInput.java:189)\r\n\tat sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:284)\r\n\tat sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:326)\r\n\tat sun.nio.cs.StreamDecoder.read(StreamDecoder.java:178)\r\n\tat java.io.InputStreamReader.read(InputStreamReader.java:184)\r\n\tat java.io.BufferedReader.read1(BufferedReader.java:210)\r\n\tat java.io.BufferedReader.read(BufferedReader.java:286)\r\n\tat SimpleHandler$HelloHandler.read_data(SimpleHandler.java:97)\r\n\tat SimpleHandler$HelloHandler.handle(SimpleHandler.java:84)\r\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:134)\r\n\tat org.eclipse.jetty.server.Server.handle(Server.java:523)\r\n\tat org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:320)\r\n\tat org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:251)\r\n\tat org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:273)\r\n\tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)\r\n\tat org.eclipse.jetty.io.ssl.SslConnection.onFillable(SslConnection.java:202)\r\n\tat org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:273)\r\n\tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)\r\n\tat org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:93)\r\n\tat org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.executeProduceConsume(ExecuteProduceConsume.java:303)\r\n\tat org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume(ExecuteProduceConsume.java:148)\r\n\tat org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:136)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:671)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:589)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\nCaused by: java.util.concurrent.TimeoutException: Idle timeout expired: 300000/300000 ms\r\n\tat org.eclipse.jetty.io.IdleTimeout.checkIdleTimeout(IdleTimeout.java:166)\r\n\tat org.eclipse.jetty.io.IdleTimeout$1.run(IdleTimeout.java:50)\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n\t... 1 more\r\n```\r\n* We've also observed log records like these in some tests, but we don't know what they mean:\r\n```\r\n2016-11-02 11:43:42.979:WARN:oejut.QueuedThreadPool:qtp1324119927-136: Unexpected thread death: org.eclipse.jetty.util.thread.QueuedThreadPool$2@1daee9ab in qtp1324119927{STARTED,8<=200<=200,i=0,q=128}\r\n2016-11-02 11:43:43.011:WARN:oejut.QueuedThreadPool:qtp1324119927-52: Unexpected thread death: org.eclipse.jetty.util.thread.QueuedThreadPool$2@1daee9ab in qtp1324119927{STARTED,8<=200<=200,i=177,q=0}\r\n2016-11-02 11:43:43.009:WARN:oejut.QueuedThreadPool:qtp1324119927-62: Unexpected thread death: org.eclipse.jetty.util.thread.QueuedThreadPool$2@1daee9ab in qtp1324119927{STARTED,8<=200<=200,i=174,q=0}\r\n2016-11-02 11:43:43.007:WARN:oejut.QueuedThreadPool:qtp1324119927-119: Unexpected thread death: org.eclipse.jetty.util.thread.QueuedThreadPool$2@1daee9ab in qtp1324119927{STARTED,8<=200<=200,i=167,q=0}\r\n2016-11-02 11:43:43.004:WARN:oejut.QueuedThreadPool:qtp1324119927-211: Unexpected thread death: org.eclipse.jetty.util.thread.QueuedThreadPool$2@1daee9ab in qtp1324119927{STARTED,8<=200<=200,i=116,q=0}\r\n2016-11-02 11:43:43.011:WARN:oejut.QueuedThreadPool:qtp1324119927-133: Unexpected thread death: org.eclipse.jetty.util.thread.QueuedThreadPool$2@1daee9ab in qtp1324119927{STARTED,8<=200<=200,i=177,q=0}\r\n```\r\n* To reproduce the issue, we sometimes have to run the test plan a couple times in succession (is this a race condition?).\r\n\r\n", "changesInPackagesGIT": ["jetty-io/src/main/java/org/eclipse/jetty/io/ssl"], "changesInPackagesSPOON": ["org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.ensureFillInterested()", "org.eclipse.jetty.io.ssl.SslConnection", "org.eclipse.jetty.io.ssl.SslConnection.3.getInvocationType()", "org.eclipse.jetty.io.ssl.SslConnection.3"], "ttf": 15.000277777777777, "numCommits": 2, "url": "https://github.com/eclipse/jetty.project/issues/1062"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "Tanex", "filteredCommits": ["bc679691357de39bb0713fd1e1ebe6a9b0260c98"], "commits": {"bc679691357de39bb0713fd1e1ebe6a9b0260c98": {"commitUser": "joakime", "commitGHEventType": "closed"}}, "created": "2016-11-02 12:06:26", "commitsDetails": [{"commitMessage": "Fixes #1054 - NPE in Jetty WebSocketListener on PING frame with empty payload\n", "commitParents": ["846d560b44abafc5defbf79f58521d7ce532797b"], "commitHash": "bc679691357de39bb0713fd1e1ebe6a9b0260c98", "commitSpoonAstDiffStats": [{"spoonFilePath": "EventDriverTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.events.EventDriverTest.testListenerPingPong()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.events.EventDriverTest.testListenerEmptyPingPong()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ControlFrame.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.frames.ControlFrame.getPayload()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "bc679691357de39bb0713fd1e1ebe6a9b0260c98 tags/jetty-9.4.0.RC2~1^2~21", "commitUser": "joakime", "authoredDateTime": "2016-11-04 10:24:06", "commitGHEventType": "closed", "commitGitStats": [{"lines": 46, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/events/EventDriverTest.java", "insertions": 46, "deletions": 0}, {"lines": 11, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/frames/ControlFrame.java", "insertions": 11, "deletions": 0}], "commitDateTime": "2016-11-04 10:24:06", "spoonStatsSkippedReason": ""}], "title": "Using WebSocketPingPongListener with empty PING payload results in NullPointerException", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 11, "insertions": 11, "gitFilesChange": 1, "deletions": 0}, "closed": "2016-11-04 17:26:57", "statsSkippedReason": "", "body": "**Version**: 9.3.13.v20161014\r\n\r\n**Problem**:Encountering a NullPointerException when receiving a Ping packet that does not have a payload attached to it and the WebSocketAdapter in use implements WebSocketPingPongListener.\r\n\r\n**Stacktrace**:\r\n```\r\njava.lang.NullPointerException\r\n    at org.eclipse.jetty.websocket.common.events.JettyListenerEventDriver.onFrame(JettyListenerEventDriver.java:127)\r\n    at org.eclipse.jetty.websocket.common.events.AbstractEventDriver.incomingFrame(AbstractEventDriver.java:109)\r\n    at org.eclipse.jetty.websocket.common.WebSocketSession.incomingFrame(WebSocketSession.java:376)\r\n    at org.eclipse.jetty.websocket.common.extensions.ExtensionStack.incomingFrame(ExtensionStack.java:220)\r\n    at org.eclipse.jetty.websocket.common.Parser.notifyFrame(Parser.java:220)\r\n    at org.eclipse.jetty.websocket.common.Parser.parse(Parser.java:256)\r\n    at org.eclipse.jetty.websocket.common.io.AbstractWebSocketConnection.readParse(AbstractWebSocketConnection.java:679)\r\n    at org.eclipse.jetty.websocket.common.io.AbstractWebSocketConnection.onFillable(AbstractWebSocketConnection.java:511)\r\n    at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:273)\r\n    at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)\r\n    at org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:93)\r\n    at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.executeProduceConsume(ExecuteProduceConsume.java:303)\r\n    at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume(ExecuteProduceConsume.java:148)\r\n    at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:136)\r\n    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:671)\r\n    at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:589)\r\n    at java.lang.Thread.run(Thread.java:745)\r\n```", "changesInPackagesGIT": ["jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common"], "changesInPackagesSPOON": ["org.eclipse.jetty.websocket.common.frames.ControlFrame.getPayload()"], "ttf": 2.000277777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1054"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug", "Help Wanted"], "user": "kaaveland", "filteredCommits": ["de18e4540bb9fd2cbc78ef392da2a4a3374301ee", "9f317dee94404f5ed4573b6109fcfe59bf3a5268"], "commits": {"de18e4540bb9fd2cbc78ef392da2a4a3374301ee": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "9f317dee94404f5ed4573b6109fcfe59bf3a5268": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2016-10-31 14:09:26", "commitsDetails": [{"commitMessage": "Issue #1051 - RolloverFileOutputStream doesn't handle DST properly\n", "commitParents": ["c665106fc57955a8f87abf8cc54114d174267cca"], "commitHash": "de18e4540bb9fd2cbc78ef392da2a4a3374301ee", "commitSpoonAstDiffStats": [{"spoonFilePath": "RolloverFileOutputStream.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream.RollTask.run()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream.scheduleNextRollover()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream", "DEL": 3, "INS": 3, "UPD": 4, "MOV": 34, "TOT": 44}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream.removeOldFiles()", "DEL": 1, "INS": 1, "UPD": 4, "MOV": 3, "TOT": 9}]}], "nameRev": "de18e4540bb9fd2cbc78ef392da2a4a3374301ee tags/jetty-9.4.0.RC3~10^2~6^2~4", "commitUser": "joakime", "authoredDateTime": "2016-11-07 09:55:09", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 62, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/RolloverFileOutputStream.java", "insertions": 35, "deletions": 27}], "commitDateTime": "2016-11-07 09:55:09", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1051 - Using java.time.ZonedDateTime instead of java.util.Calendar for Java 1.8+\n", "commitParents": ["7930a3dac8ccf8ee669e0625ecd9984df9666e3b"], "commitHash": "9f317dee94404f5ed4573b6109fcfe59bf3a5268", "commitSpoonAstDiffStats": [{"spoonFilePath": "RolloverFileOutputStream.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream.scheduleNextRollover()", "DEL": 1, "INS": 2, "UPD": 3, "MOV": 2, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream", "DEL": 6, "INS": 1, "UPD": 2, "MOV": 5, "TOT": 14}, {"spoonMethodName": "org.eclipse.jetty.util.RolloverFileOutputStream.removeOldFiles()", "DEL": 1, "INS": 1, "UPD": 5, "MOV": 2, "TOT": 9}]}], "nameRev": "9f317dee94404f5ed4573b6109fcfe59bf3a5268 tags/jetty-9.4.0.RC3~10^2~13", "commitUser": "joakime", "authoredDateTime": "2016-11-17 14:44:58", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 23, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/RolloverFileOutputStream.java", "insertions": 9, "deletions": 14}], "commitDateTime": "2016-11-17 14:44:58", "spoonStatsSkippedReason": ""}], "title": "NCSARequestLog/RolloverFileOutputStream does not roll day after DST ends", "spoonStatsSummary": {"spoonMethodsChanged": 4, "DEL": 12, "INS": 12, "UPD": 18, "MOV": 46, "TOT": 88, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 85, "insertions": 44, "gitFilesChange": 1, "deletions": 41}, "closed": "2017-04-28 12:34:19", "statsSkippedReason": "", "body": "Hey,\r\n\r\nThis line makes the assumption that a day is always 24 hours long, which is right almost every day of the year:\r\nhttps://github.com/eclipse/jetty.project/blob/jetty-9.3.x/jetty-util/src/main/java/org/eclipse/jetty/util/RolloverFileOutputStream.java#L185 \r\n\r\nIn its constructor, this class calculates the next midnight (eg. 00:00 Saturday October 29th) and schedules a `setFile` call to happen at that time and every 24 hours thereafter (00:00 Sunday October 30th). However, when DST ends, there's a 25 hour day, so `setFile` will happen 1 hour before midnight (23:00 Sunday October 30th). This causes `RolloverFileOutputStream` to calculate the same filename as it had already opened (https://github.com/eclipse/jetty.project/blob/jetty-9.3.x/jetty-util/src/main/java/org/eclipse/jetty/util/RolloverFileOutputStream.java#L230) and decide to not do a rollover.\r\n\r\nFor us, that was problematic because the logrotate script compressed and deleted that file a few hours later, but jetty was still writing access-log to it through NCSARequestLog. Apparently, writing to a file that is gone is fine, what happens on our linux-system is that jetty successfully writes, but the log ends up nowhere (I might be able to retrieve it with some lsof and /proc hackery if I really wanted to). If we had restarted our application yesterday, everything would've been fine as RolloverFileOutputStream would recalculate midnight instead of just ticking on a fixed 24 hour schedule.\r\n\r\nAs far as I can tell, it would be safe to have this task on a 1-hour schedule (instead of the 24 hour one), which would fix the issue. Another option would be for each \"tick\" of the task to calculate the next midnight, instead of just assuming that there are always 24 hours between each midnight (which is wrong twice a year in our timezone).\r\n\r\nI'll work around this in our logrotate setup, but we'll still end up with log files containing \"the wrong\" data, eg. next year, when DST ends, we'll have one log file containing two days worth of log (which I can live with). So it would be nice to have a fix for this.\r\n", "changesInPackagesGIT": ["jetty-util/src/main/java/org/eclipse/jetty/util"], "changesInPackagesSPOON": ["org.eclipse.jetty.util.RolloverFileOutputStream", "org.eclipse.jetty.util.RolloverFileOutputStream.RollTask.run()", "org.eclipse.jetty.util.RolloverFileOutputStream.scheduleNextRollover()", "org.eclipse.jetty.util.RolloverFileOutputStream.removeOldFiles()"], "ttf": 178.00027777777777, "numCommits": 2, "url": "https://github.com/eclipse/jetty.project/issues/1051"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 2, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "baldersheim", "filteredCommits": ["369c73ab4538a8fddca646335bca8879699bcc03"], "commits": {"369c73ab4538a8fddca646335bca8879699bcc03": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "10b7326c3c99c394a6586b741c5e551e87ba83d1": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "8ecfbab79f1fd8dba6bf107ddd7d359475b63f8d": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2016-10-27 22:46:52", "commitsDetails": [{"commitMessage": "Issue #1047 - ReadPendingException and then thread death.\n\nFixed by calling tryFillInterested() rather than fillInterested() to\ncope with the race between reads scheduling read interest and\nsetWriteListener() that also executes code in\nHttpChannelState.unhandle() that wants to schedule read interest.\n", "commitParents": ["c0d261d7aaf497a159bfc965548583353c29ca97"], "commitHash": "369c73ab4538a8fddca646335bca8879699bcc03", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpConnection.AsyncReadCallback.succeeded()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.HttpConnection.asyncReadFillInterested()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpConnection.onCompleted()", "DEL": 2, "INS": 0, "UPD": 2, "MOV": 2, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.server.HttpConnection.fillAndParseForContent()", "DEL": 1, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 3}]}, {"spoonFilePath": "AsyncIOServletTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.client.AsyncIOServletTest.testWriteListenerFromOtherThread()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.client.AsyncIOServletTest.Listener.onWritePossible()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.client.AsyncIOServletTest.sleep(long)", "DEL": 0, "INS": 1, "UPD": 2, "MOV": 6, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.http.client.AsyncIOServletTest.Listener", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "369c73ab4538a8fddca646335bca8879699bcc03 tags/jetty-9.4.2.v20170220~2^2~5", "commitUser": "sbordet", "authoredDateTime": "2017-02-07 22:23:27", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 143, "filePath": "tests/test-http-client-transport/src/test/java/org/eclipse/jetty/http/client/AsyncIOServletTest.java", "insertions": 141, "deletions": 2}, {"lines": 10, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpConnection.java", "insertions": 5, "deletions": 5}], "commitDateTime": "2017-02-07 22:23:52", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1047 - ReadPendingException and then thread death.\n\nTidy up write side.\nIt cannot be the same as the read side as there is no registration for write interest.  There is only write operations and the\ncallbacks associated with them.\n", "commitParents": ["8ecfbab79f1fd8dba6bf107ddd7d359475b63f8d"], "commitHash": "10b7326c3c99c394a6586b741c5e551e87ba83d1", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpChannelState.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.unhandle()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.handling()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.recycle()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.upgrade()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.toString()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.onWritePossible()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "10b7326c3c99c394a6586b741c5e551e87ba83d1 tags/jetty-9.4.2.v20170220~2^2~2", "commitUser": "gregw", "authoredDateTime": "2017-02-08 15:53:30", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 22, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannelState.java", "insertions": 11, "deletions": 11}], "commitDateTime": "2017-02-08 15:58:35", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #1047 - ReadPendingException and then thread death.\n\nAlternate fix. Tracking needed vs interested state within HttpChannelState rather\nthat ignoring duplicate interest registrations.\n", "commitParents": ["5920e14c9bf2446e3802991ff0cc64f64258f539"], "commitHash": "8ecfbab79f1fd8dba6bf107ddd7d359475b63f8d", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpConnection.asyncReadFillInterested()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AsyncIOServletTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.client.AsyncIOServletTest.testAsyncReadEarlyEOF().18.service(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse).1.onDataAvailable()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpChannelState.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.unhandle()", "DEL": 3, "INS": 4, "UPD": 1, "MOV": 2, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.handling()", "DEL": 1, "INS": 2, "UPD": 1, "MOV": 1, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.onReadUnready()", "DEL": 3, "INS": 3, "UPD": 1, "MOV": 4, "TOT": 11}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.recycle()", "DEL": 1, "INS": 2, "UPD": 1, "MOV": 2, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.upgrade()", "DEL": 1, "INS": 2, "UPD": 1, "MOV": 2, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.Interest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.onReadReady()", "DEL": 1, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.toString()", "DEL": 1, "INS": 1, "UPD": 1, "MOV": 2, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.onReadPossible()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}]}], "nameRev": "8ecfbab79f1fd8dba6bf107ddd7d359475b63f8d tags/jetty-9.4.2.v20170220~2^2~3", "commitUser": "gregw", "authoredDateTime": "2017-02-08 11:39:03", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 62, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannelState.java", "insertions": 47, "deletions": 15}, {"lines": 2, "filePath": "tests/test-http-client-transport/src/test/java/org/eclipse/jetty/http/client/AsyncIOServletTest.java", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpConnection.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2017-02-08 15:58:35", "spoonStatsSkippedReason": ""}], "title": "ReadPendingException and then thread death", "spoonStatsSummary": {"spoonMethodsChanged": 4, "DEL": 3, "INS": 1, "UPD": 4, "MOV": 4, "TOT": 12, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 10, "insertions": 5, "gitFilesChange": 1, "deletions": 5}, "closed": "2017-02-09 16:18:30", "statsSkippedReason": "", "body": "We are using ASYNC.\r\nCurrently we are on jetty-9.3.13.\r\nWhen we run benchmarks we see a significant amount of ReadPendingException. So far I have seen 3 different stacktraces where 2 are originating from a jetty thread pool while one are from our threads. The stacktraces also come together with warnings from HttpConnection about \"fill with unconsumed content!\".\r\n\r\nStacktrace 1:\r\n```\r\n Thu Oct 27 21:00:18 +0000 2016 perf7.head.factory.vespa.corp.bf1.yahoo.com 84492/710   container   Container.org.eclipse.jetty.server.HttpConnection   warning HttpConnection@4087bb37[SelectChannelEndPoint@2f7fdaec{/10.74.209.80:34198<->4080,Open,in,out,-,W,1/180000,HttpConnection@4087bb37}{io=0/0,kio=1,kro=1}][p=HttpParser{s=CHUNK,8171 of 0},g=HttpGenerator@743b970f{s=COMMITTED},c=HttpChannelOverHttp@49f90ea3{r=1,c=true,a=ASYNC_IO,uri=//perf7.head.factory.vespa.corp.bf1.yahoo.com:4080/reserved-for-internal-use/feedapi?&dataformat=XML_UTF8}] fill with unconsumed content!\r\nThu Oct 27 21:00:18 +0000 2016  perf8.head.factory.vespa.corp.bf1.yahoo.com 63713/710   container   Container.org.eclipse.jetty.server.HttpConnection   warning HttpConnection@26e190bb[SelectChannelEndPoint@5deb35b{/10.74.209.80:37036<->4080,Open,in,out,-,-,1/180000,HttpConnection@26e190bb}{io=0/0,kio=0,kro=1}][p=HttpParser{s=END,51562 of 0},g=HttpGenerator@3902c1bc{s=COMPLETING},c=HttpChannelOverHttp@4d84ceab{r=1,c=true,a=ASYNC_WAIT,uri=//perf8.head.factory.vespa.corp.bf1.yahoo.com:4080/reserved-for-internal-use/feedapi?&dataformat=XML_UTF8}] fill with unconsumed content!\r\nThu Oct 27 21:00:18 +0000 2016  perf8.head.factory.vespa.corp.bf1.yahoo.com 63713/710   container   Container.org.eclipse.jetty.io.FillInterest warning Read pending for AC.ReadCB@26e190bb{HttpConnection@26e190bb[SelectChannelEndPoint@5deb35b{/10.74.209.80:37036<->4080,CLOSED,ISHUT,OSHUT,-,-,0/180000,HttpConnection@26e190bb}{io=0/0,kio=-1,kro=-1}][p=HttpParser{s=CLOSED,0 of -1},g=HttpGenerator@3902c1bc{s=START},c=HttpChannelOverHttp@4d84ceab{r=1,c=false,a=IDLE,uri=null}]} prevented org.eclipse.jetty.server.HttpConnection$AsyncReadCallback@495a71ba\r\nThu Oct 27 21:00:18 +0000 2016  perf8.head.factory.vespa.corp.bf1.yahoo.com 63713/710   container   Container.org.eclipse.jetty.util.thread.QueuedThreadPool    warning \r\nexception=\r\njava.nio.channels.ReadPendingException\r\n\\tat org.eclipse.jetty.io.FillInterest.register(FillInterest.java:72)\r\n\\tat org.eclipse.jetty.io.AbstractEndPoint.fillInterested(AbstractEndPoint.java:128)\r\n\\tat org.eclipse.jetty.server.HttpConnection.asyncReadFillInterested(HttpConnection.java:549)\r\n\\tat org.eclipse.jetty.server.HttpConnection$AsyncReadCallback.succeeded(HttpConnection.java:625)\r\n\\tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)\r\n\\tat org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:93)\r\n\\tat org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.executeProduceConsume(ExecuteProduceConsume.java:303)\r\n\\tat org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume(ExecuteProduceConsume.java:148)\r\n\\tat org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:136)\r\n\\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:671)\r\n\\tat org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:589)\r\n\\tat java.lang.Thread.run(Thread.java:745)\r\nThu Oct 27 21:00:18 +0000 2016  perf8.head.factory.vespa.corp.bf1.yahoo.com 63713/710   container   Container.org.eclipse.jetty.util.thread.QueuedThreadPool    warning Unexpected thread death: org.eclipse.jetty.util.thread.QueuedThreadPool$2@6ec1c07f in qtp1678557259{STARTED,8<=19<=200,i=7,q=0}\r\n```", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.HttpConnection.AsyncReadCallback.succeeded()", "org.eclipse.jetty.server.HttpConnection.asyncReadFillInterested()", "org.eclipse.jetty.server.HttpConnection.onCompleted()", "org.eclipse.jetty.server.HttpConnection.fillAndParseForContent()"], "ttf": 104.00027777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/1047"}, {"labels": ["Bug"], "closed": "2018-03-19 17:15:51", "body": "I have a stress test applied to my web app running in jetty container,the jetty throws some exceptions like follow:\n\n```\n2016-10-27 16:29:20.532:WARN:oejs.HttpChannel:qtp314357161-104: Could not send response error 500: java.io.IOException: org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException\n2016-10-27 16:29:20.682:WARN:oejs.ServletHandler:qtp314357161-245: /api3/new_square/recommend\njava.io.IOException: org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException\n        at org.eclipse.jetty.util.SharedBlockingCallback$Blocker.block(SharedBlockingCallback.java:234)\n        at org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:141)\n        at org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:383)\n        at java.io.OutputStream.write(OutputStream.java:75) \n```\n", "commits": {}, "title": "Could not send response error 500", "created": "2016-10-27 08:38:40", "user": "rocky-peng", "url": "https://github.com/eclipse/jetty.project/issues/1043", "commitsDetails": [], "ttf": 508.0002777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["706042e131d502a3cf2150d4678949006064f698"], "commits": {"706042e131d502a3cf2150d4678949006064f698": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2016-10-19 17:14:45", "commitsDetails": [{"commitMessage": "Issue #1015 - excluding files not intended from distribution\n", "commitParents": ["98cc1f7ee1fc7ae6da4b8ffc0c5a9732a8fb3188"], "commitHash": "706042e131d502a3cf2150d4678949006064f698", "commitSpoonAstDiffStats": [], "nameRev": "706042e131d502a3cf2150d4678949006064f698 tags/jetty-9.3.17.v20170317~4", "commitUser": "joakime", "authoredDateTime": "2017-03-15 15:35:18", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 30, "filePath": "jetty-distribution/src/main/assembly/jetty-assembly.xml", "insertions": 30, "deletions": 0}, {"lines": 30, "filePath": "jetty-distribution/src/main/assembly/jetty-src.xml", "insertions": 30, "deletions": 0}], "commitDateTime": "2017-03-15 15:35:18", "spoonStatsSkippedReason": ""}], "title": "Ensure jetty-distribution excludes git / temp files", "spoonStatsSummary": {}, "gitStatsSummary": {"lines": 0, "insertions": 0, "gitFilesChange": 0, "deletions": 0}, "closed": "2017-03-16 14:38:16", "statsSkippedReason": "", "body": "It is currently possible for the jetty-distribution to contain files like `*.orig` (a merge temp file).\n\nThese should always be excluded from the jetty-distribution creation.\n", "changesInPackagesGIT": [], "ttf": 147.00027777777777, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/1015"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "sbordet", "filteredCommits": ["a1a132a601371f55cd5544f88bf16ed20389033c"], "commits": {"a1a132a601371f55cd5544f88bf16ed20389033c": {"commitUser": "sbordet", "commitGHEventType": "closed"}}, "created": "2016-09-26 08:01:43", "commitsDetails": [{"commitMessage": "Fixes #959 - CompleteListener invoked twice for HTTP/2 transport and response content.\n", "commitParents": ["f3751da475dedbc44874fb83bd8f0cc8682fcd5b"], "commitHash": "a1a132a601371f55cd5544f88bf16ed20389033c", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpReceiverOverHTTP2.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.client.http.HttpReceiverOverHTTP2.ContentNotifier.succeeded()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.http2.client.http.HttpReceiverOverHTTP2.ContentNotifier.process()", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 3, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.http2.client.http.HttpReceiverOverHTTP2.ContentNotifier.onCompleteSuccess()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpClientTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.client.HttpClientTest.testResponseWithContentCompleteListenerInvokedOnce()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "a1a132a601371f55cd5544f88bf16ed20389033c tags/jetty-9.3.13.v20161014~30", "commitUser": "sbordet", "authoredDateTime": "2016-09-26 10:16:31", "commitGHEventType": "closed", "commitGitStats": [{"lines": 14, "filePath": "jetty-http2/http2-http-client-transport/src/main/java/org/eclipse/jetty/http2/client/http/HttpReceiverOverHTTP2.java", "insertions": 12, "deletions": 2}, {"lines": 22, "filePath": "tests/test-http-client-transport/src/test/java/org/eclipse/jetty/http/client/HttpClientTest.java", "insertions": 22, "deletions": 0}], "commitDateTime": "2016-09-26 10:16:31", "spoonStatsSkippedReason": ""}], "title": "CompleteListener invoked twice for HTTP/2 transport and response content", "spoonStatsSummary": {"spoonMethodsChanged": 3, "DEL": 2, "INS": 3, "UPD": 0, "MOV": 4, "TOT": 9, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 14, "insertions": 12, "gitFilesChange": 1, "deletions": 2}, "closed": "2016-09-26 10:06:09", "statsSkippedReason": "", "body": "A `CompleteListener` passed to `Request.send(CompleteListener)` is invoked twice in case there is a response content with the HTTP/2 transport.\n", "changesInPackagesGIT": ["jetty-http2/http2-http-client-transport/src/main/java/org/eclipse/jetty/http2/client"], "changesInPackagesSPOON": ["org.eclipse.jetty.http2.client.http.HttpReceiverOverHTTP2.ContentNotifier.succeeded()", "org.eclipse.jetty.http2.client.http.HttpReceiverOverHTTP2.ContentNotifier.process()", "org.eclipse.jetty.http2.client.http.HttpReceiverOverHTTP2.ContentNotifier.onCompleteSuccess()"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/959"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "sbordet", "filteredCommits": ["f3751da475dedbc44874fb83bd8f0cc8682fcd5b"], "commits": {"f3751da475dedbc44874fb83bd8f0cc8682fcd5b": {"commitUser": "sbordet", "commitGHEventType": "closed"}}, "created": "2016-09-23 14:56:49", "commitsDetails": [{"commitMessage": "Fixes #955 - Response listeners not invoked when using Connection.send().\n", "commitParents": ["4edc50b59f442aeb455d7a97adc347d602182c97"], "commitHash": "f3751da475dedbc44874fb83bd8f0cc8682fcd5b", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpConnection.send(org.eclipse.jetty.client.api.Request,org.eclipse.jetty.client.api.Response$CompleteListener)", "DEL": 0, "INS": 1, "UPD": 5, "MOV": 0, "TOT": 6}]}, {"spoonFilePath": "HttpRequest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpRequest.getResponseListeners()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpClientExplicitConnectionTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpClientExplicitConnectionTest.testExplicitConnectionResponseListeners()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.HttpClientExplicitConnectionTest.testExplicitConnectionIsClosedOnRemoteClose()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "f3751da475dedbc44874fb83bd8f0cc8682fcd5b tags/jetty-9.3.13.v20161014~31", "commitUser": "sbordet", "authoredDateTime": "2016-09-23 17:04:11", "commitGHEventType": "closed", "commitGitStats": [{"lines": 26, "filePath": "jetty-client/src/test/java/org/eclipse/jetty/client/HttpClientExplicitConnectionTest.java", "insertions": 24, "deletions": 2}, {"lines": 5, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpRequest.java", "insertions": 5, "deletions": 0}, {"lines": 12, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpConnection.java", "insertions": 7, "deletions": 5}], "commitDateTime": "2016-09-23 17:04:11", "spoonStatsSkippedReason": ""}], "title": "Response listeners not invoked when using Connection.send()", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 0, "INS": 2, "UPD": 5, "MOV": 0, "TOT": 7, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 17, "insertions": 12, "gitFilesChange": 2, "deletions": 5}, "closed": "2016-09-26 10:06:09", "statsSkippedReason": "", "body": "When using `Connection.send(Request, Response.CompleteListener)` to send a request, response listeners previously set on the request (for example via `Request.onResponseSuccess(...)`) are not invoked.\n", "changesInPackagesGIT": ["jetty-client/src/main/java/org/eclipse/jetty/client"], "changesInPackagesSPOON": ["org.eclipse.jetty.client.HttpRequest.getResponseListeners()", "org.eclipse.jetty.client.HttpConnection.send(org.eclipse.jetty.client.api.Request,org.eclipse.jetty.client.api.Response$CompleteListener)"], "ttf": 2.000277777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/955"}, {"labels": ["Bug"], "closed": "2016-11-01 20:22:29", "body": "It seems that not replace the placeholder `${jetty.version}` with real value.\n\nMy module file `nosql.mod` with the following content\n\n``` ini\n#\n# Jetty NoSql module\n#\n[name]\nnosql\n\n[depend]\nwebapp\n\n[lib]\nlib/jetty-nosql-${jetty.version}.jar\nlib/nosql/*.jar\n\n[xml]\netc/jetty-nosql.xml\n\n[files]\nhttps://repo1.maven.org/maven2/org/eclipse/jetty/jetty-nosql/${jetty.version}/jetty-nosql-${jetty.version}.jar|lib/jetty-nosql-${jetty.version}.jar\n```\n\nbut when I start jetty with `--create-files` command line para, output the following\n\n```\n$ java -jar $JETTY_HOME/start.jar --create-files\nDOWNLOAD: https://repo1.maven.org/maven2/org/eclipse/jetty/jetty-nosql/${jetty.version}/jetty-nosql-${jetty.version}.jar to lib/jetty-nosql-${jetty.version}.jar\nWARNING: ERROR: processing DownloadArg [uri=https://repo1.maven.org/maven2/org/eclipse/jetty/jetty-nosql/${jetty.version}/jetty-nosql-${jetty.version}.jar, location=lib/jetty-nosql-${jetty.version}.jar]\njava.io.FileNotFoundException: https://repo1.maven.org/maven2/org/eclipse/jetty/jetty-nosql/${jetty.version}/jetty-nosql-${jetty.version}.jar\njava.io.FileNotFoundException: https://repo1.maven.org/maven2/org/eclipse/jetty/jetty-nosql/${jetty.version}/jetty-nosql-${jetty.version}.jar\n    at sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1836)\n    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1441)\n    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:254)\n    at java.net.URL.openStream(URL.java:1045)\n    at org.eclipse.jetty.start.Main.initFile(Main.java:203)\n    at org.eclipse.jetty.start.Main.start(Main.java:739)\n    at org.eclipse.jetty.start.Main.main(Main.java:112)\n\nUsage: java -jar start.jar [options] [properties] [configs]\n       java -jar start.jar --help  # for more information\n```\n", "commits": {}, "title": "Problem with --create-files command line para on version 9.2.x", "created": "2016-09-18 04:14:05", "user": "shauway", "url": "https://github.com/eclipse/jetty.project/issues/936", "commitsDetails": [], "ttf": 44.000277777777775}, {"labels": ["Bug", "Stale"], "closed": "2019-12-20 18:27:07", "body": "In jetty-9.3.11 if hotReload is enabled on the HashLoginService, the contents of the realm file is re-uploaded, however the HashLoginService ignores the new password.\n", "commits": {}, "title": "Problem with hotReload and HashLoginService in jetty-9.3.11", "created": "2016-09-16 03:09:23", "user": "janbartel", "url": "https://github.com/eclipse/jetty.project/issues/934", "commitsDetails": [], "ttf": 1190.0002777777777}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "petr-n", "filteredCommits": [], "commits": {"0540d7eaa707c8a68fb0e059c3322654465692fa": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2016-09-12 14:27:52", "commitsDetails": [{"commitMessage": "Merge pull request #1370 from olamy/bugfix/920\n\nBugfix for #920 (disable bundle plugin)", "commitParents": ["e695fc80d691fcc0aec9bea5123a3d30d033968f", "d5aa619f1bf95af41e4373a2e431540c2423c995"], "commitHash": "0540d7eaa707c8a68fb0e059c3322654465692fa", "commitSpoonAstDiffStats": [], "nameRev": "0540d7eaa707c8a68fb0e059c3322654465692fa tags/jetty-9.4.5.v20170502~1^2^2~1", "commitUser": "janbartel", "authoredDateTime": "2017-03-15 11:02:50", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 21, "filePath": "jetty-runner/pom.xml", "insertions": 14, "deletions": 7}], "commitDateTime": "2017-03-15 11:02:50", "spoonStatsSkippedReason": ""}], "title": "no main manifest attribute, in jetty-runner-9.2.19.v20160908.jar", "spoonStatsSummary": {}, "gitStatsSummary": {"lines": 0, "insertions": 0, "gitFilesChange": 0, "deletions": 0}, "closed": "2017-03-15 00:03:49", "statsSkippedReason": "", "body": "Today I have used latest 9.2.\\* version - jetty-runner-9.2.19.v20160908.jar and I have got this error:\n\npene@petr-ThinkPad-T410:~/run$ sudo java -jar -Dabra.basicstorage.home=basicstorage jetty-runner-9.2.19.v20160908.jar --port 80 igate.war\n[sudo] heslo pro pene: \nno main manifest attribute, in jetty-runner-9.2.19.v20160908.jar\n\nI have seen there is fix for version 9.3.*. Is it possible to merge the fix to version 9.2?\n", "changesInPackagesGIT": [], "ttf": 183.00027777777777, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/920"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "karlmdavis", "filteredCommits": ["9848b33ec9c7efd897d6faa89aed214f1f8feb7c"], "commits": {"9848b33ec9c7efd897d6faa89aed214f1f8feb7c": {"commitUser": "sbordet", "commitGHEventType": "closed"}}, "created": "2016-09-09 14:41:06", "commitsDetails": [{"commitMessage": "Fixes #915 - The jetty-maven-plugin:stop goal doesn't stop everything completely.\n\nClosing the serverSocket when exiting ShutdownMonitorRunnable.\n", "commitParents": ["1bf87b317b0b4024eac58ae268db064a8c00bc83"], "commitHash": "9848b33ec9c7efd897d6faa89aed214f1f8feb7c", "commitSpoonAstDiffStats": [{"spoonFilePath": "ShutdownMonitorTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ShutdownMonitorTest.testStartStopSamePortDifferentKey()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ShutdownMonitorTest.testStartStopDifferentPortDifferentKey()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ShutdownMonitorTest.testOldStopCommandWithStopOnShutdownFalse()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.ShutdownMonitorTest.testStatus()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ShutdownMonitorTest.afterClass()", "DEL": 1, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.ShutdownMonitorTest.testForceStopCommand()", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.ShutdownMonitorTest.testOldStopCommandWithStopOnShutdownTrue()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.ShutdownMonitorTest.testShutdownMonitor()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 2, "TOT": 3}]}, {"spoonFilePath": "ShutdownMonitor.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ShutdownMonitor.ShutdownMonitorRunnable.run()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "9848b33ec9c7efd897d6faa89aed214f1f8feb7c tags/jetty-9.3.13.v20161014~42", "commitUser": "sbordet", "authoredDateTime": "2016-09-16 11:33:21", "commitGHEventType": "closed", "commitGitStats": [{"lines": 3, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/ShutdownMonitor.java", "insertions": 2, "deletions": 1}, {"lines": 77, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ShutdownMonitorTest.java", "insertions": 64, "deletions": 13}], "commitDateTime": "2016-09-16 11:33:21", "spoonStatsSkippedReason": ""}], "title": "The jetty-maven-plugin:stop goal doesn't stop everything completely", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 3, "insertions": 2, "gitFilesChange": 1, "deletions": 1}, "closed": "2016-09-16 09:35:22", "statsSkippedReason": "", "body": "I've got a multi-module Maven build, with two separate modules that need Jetty to run a WAR that my application under test has a dependency on. During the build for whichever module is built second, Jetty fails to bind the shutdown monitor, and so also fails to stop in the module's `post-integration-test` phase.\n\nHere's some sample Maven output that illustrates the problem, picking up at the `stop` in the first module:\n\n```\n[INFO] --- jetty-maven-plugin:9.3.11.v20160721:stop (jetty-stop) @ bluebutton-data-pipeline-fhir-load ---\n[INFO] Waiting 120 seconds for jetty to stop\n[INFO] Stopped ServerConnector@3b4fcd02{SSL,[ssl, http/1.1]}{0.0.0.0:9094}\n[INFO] Destroying Spring FrameworkServlet 'spring'\n2016-09-07 17:54:35.514 [ShutdownMonitor] INFO  o.s.w.c.s.AnnotationConfigWebApplicationContext [AbstractApplicationContext.java:960] Closing WebApplicationContext for namespace 'spring-servlet': startup date [Wed Sep 07 17:42:54 UTC 2016]; parent: Root WebApplicationContext\n[INFO] Closing Spring root WebApplicationContext\n2016-09-07 17:54:35.518 [ShutdownMonitor] INFO  o.s.w.c.s.AnnotationConfigWebApplicationContext [AbstractApplicationContext.java:960] Closing Root WebApplicationContext: startup date [Wed Sep 07 17:42:39 UTC 2016]; root of context hierarchy\n2016-09-07 17:54:35.520 [ShutdownMonitor] INFO  o.s.s.c.ThreadPoolTaskScheduler [ExecutorConfigurationSupport.java:203] Shutting down ExecutorService 'taskScheduler'\n2016-09-07 17:54:35.565 [ShutdownMonitor] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean [AbstractEntityManagerFactoryBean.java:462] Closing JPA EntityManagerFactory for persistence unit 'HAPI_PU'\n[INFO] Stopped o.e.j.m.p.JettyWebAppContext@1693d505{/,file:///var/lib/jenkins/workspace/HHSIDEAlab/bluebutton-data-pipeline/cbbd-125-jetty-stop-race/bluebutton-data-pipeline-fhir-load/target/tmp/webapp/,UNAVAILABLE}{/var/lib/jenkins/workspace/HHSIDEAlab/bluebutton-data-pipeline/cbbd-125-jetty-stop-race/bluebutton-data-pipeline-fhir-load/target/bbonfhir-server/bbonfhir-server-app-0.1.0-44.war}\n[INFO] Server reports itself as stopped\n\n...\n\n[INFO] --- jetty-maven-plugin:9.3.11.v20160721:deploy-war (jetty-start) @ bluebutton-data-pipeline-app ---\n[INFO] Configuring Jetty for project: bluebutton-data-pipeline-app\n[INFO] Configuring Jetty from xml configuration file = /var/lib/jenkins/workspace/HHSIDEAlab/bluebutton-data-pipeline/cbbd-125-jetty-stop-race/bluebutton-data-pipeline-app/target/bbonfhir-server/bbonfhir-server-app-0.1.0-44-jetty-config.xml\n[INFO] Context path = /\n[INFO] Tmp directory = /var/lib/jenkins/workspace/HHSIDEAlab/bluebutton-data-pipeline/cbbd-125-jetty-stop-race/bluebutton-data-pipeline-app/target/tmp\n[INFO] Web defaults = org/eclipse/jetty/webapp/webdefault.xml\n[INFO] Web overrides =  none\nError binding ShutdownMonitor to port 9966: java.net.BindException: Address already in use\n[INFO] jetty-9.3.11.v20160721\n\n...\n\n[INFO] --- jetty-maven-plugin:9.3.11.v20160721:stop (jetty-stop) @ bluebutton-data-pipeline-app ---\n[INFO] Jetty not running!\n```\n\nThe \"`Error binding ShutdownMonitor to port 9966: java.net.BindException: Address already in use`\" message/error indicates to me that Jetty didn't _really_ stop that first time.\n", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.ShutdownMonitor.ShutdownMonitorRunnable.run()"], "ttf": 6.000277777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/915"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 5, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "tadayosi", "filteredCommits": ["b408786b9acaf7b6a6737c26164690d26ce6ffad", "ea08a6db728954f59402976b0ce7c76aea9e2859"], "commits": {"b408786b9acaf7b6a6737c26164690d26ce6ffad": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "f7d017ca1a523a764c5804e3271392e06b4bfcb5": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "4312995d891766bbed9440084976604b1b39ed96": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "68340a94d003ebd79a8a8e21f5e3207b5bc16fec": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "ea08a6db728954f59402976b0ce7c76aea9e2859": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "1247380976027d98d71c699e93ffd8bcc6c73a05": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "ab579d542bc6cbbe129ae886011e8e0595db1462": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2016-09-08 03:40:23", "commitsDetails": [{"commitMessage": "Issue #911 encode requestURI in startAsync(req,res)\n", "commitParents": ["ebec811427a7b9f00adc78c325d3ec24061ca478"], "commitHash": "b408786b9acaf7b6a6737c26164690d26ce6ffad", "commitSpoonAstDiffStats": [{"spoonFilePath": "EncodedURITest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.EncodedURITest.testTestServlet()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 2, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.servlet.EncodedURITest.testAsyncFilterWrapTestServlet()", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.EncodedURITest.testAsyncFilterTestServlet()", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.EncodedURITest.testAsyncServletTestServlet()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "b408786b9acaf7b6a6737c26164690d26ce6ffad tags/jetty-9.4.0.RC0~21", "commitUser": "gregw", "authoredDateTime": "2016-09-09 09:20:24", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 21, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/EncodedURITest.java", "insertions": 17, "deletions": 4}], "commitDateTime": "2016-09-09 09:20:24", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #911 encode requestURI in startAsync(req,res)\n", "commitParents": ["09da3248e59bfb1198d815110a0b8feab77ecc34"], "commitHash": "f7d017ca1a523a764c5804e3271392e06b4bfcb5", "commitSpoonAstDiffStats": [{"spoonFilePath": "EncodedURITest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.EncodedURITest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "Request.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Request.startAsync(javax.servlet.ServletRequest,javax.servlet.ServletResponse)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 1, "TOT": 3}]}], "nameRev": "f7d017ca1a523a764c5804e3271392e06b4bfcb5 tags/jetty-9.3.12.v20160915~14", "commitUser": "gregw", "authoredDateTime": "2016-09-08 15:00:13", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 206, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/EncodedURITest.java", "insertions": 206, "deletions": 0}, {"lines": 2, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Request.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2016-09-08 15:00:54", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #911 encode requestURI in startAsync(req,res)\n", "commitParents": ["1247380976027d98d71c699e93ffd8bcc6c73a05"], "commitHash": "4312995d891766bbed9440084976604b1b39ed96", "commitSpoonAstDiffStats": [{"spoonFilePath": "EncodedURITest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.EncodedURITest.testTestServlet()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 2, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.servlet.EncodedURITest.testAsyncFilterWrapTestServlet()", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.EncodedURITest.testAsyncFilterTestServlet()", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.EncodedURITest.testAsyncServletTestServlet()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "Server.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Server.handleAsync(org.eclipse.jetty.server.HttpChannel)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 4}]}, {"spoonFilePath": "Request.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Request.startAsync(javax.servlet.ServletRequest,javax.servlet.ServletResponse)", "DEL": 1, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 3}]}], "nameRev": "4312995d891766bbed9440084976604b1b39ed96 tags/jetty-9.3.12.v20160915~12", "commitUser": "gregw", "authoredDateTime": "2016-09-09 09:19:01", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 21, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/EncodedURITest.java", "insertions": 17, "deletions": 4}, {"lines": 2, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Request.java", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Server.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2016-09-09 09:19:01", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #911 encode requestURI in startAsync(req,res)\n", "commitParents": ["ab579d542bc6cbbe129ae886011e8e0595db1462"], "commitHash": "68340a94d003ebd79a8a8e21f5e3207b5bc16fec", "commitSpoonAstDiffStats": [{"spoonFilePath": "EncodedURITest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.EncodedURITest.testAsyncServletTestServletEncoded()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.EncodedURITest.AsyncServlet.service(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlet.EncodedURITest.testAsyncServletTestServlet()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "AsyncContextEvent.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.AsyncContextEvent.setDispatchPath(java.lang.String)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "Server.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Server.handleAsync(org.eclipse.jetty.server.HttpChannel)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 4}]}, {"spoonFilePath": "Request.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Request.startAsync(javax.servlet.ServletRequest,javax.servlet.ServletResponse)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.Request.getRequestDispatcher(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "ContextHandler.java", "spoonMethods": []}], "nameRev": "68340a94d003ebd79a8a8e21f5e3207b5bc16fec tags/jetty-9.3.12.v20160915~9", "commitUser": "gregw", "authoredDateTime": "2016-09-09 10:11:06", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Server.java", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/ContextHandler.java", "insertions": 2, "deletions": 0}, {"lines": 16, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/EncodedURITest.java", "insertions": 13, "deletions": 3}, {"lines": 6, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Request.java", "insertions": 4, "deletions": 2}, {"lines": 7, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/AsyncContextEvent.java", "insertions": 5, "deletions": 2}], "commitDateTime": "2016-09-09 10:12:08", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #911\n\nFix spec compliance, return HttpServletRequest.getContextPath as encoded.\n", "commitParents": ["9ebdd7a28514b634e29f8b26eada2fb56e4fb3ab"], "commitHash": "ea08a6db728954f59402976b0ce7c76aea9e2859", "commitSpoonAstDiffStats": [{"spoonFilePath": "EncodedURITest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.EncodedURITest.testTestServlet()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.EncodedURITest", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.EncodedURITest.testAsyncFilterWrapTestServlet()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.EncodedURITest.testAsyncServletTestServletEncoded()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.EncodedURITest.testAsyncFilterTestServlet()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.EncodedURITest.testAsyncServletTestServlet()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ContextHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.doScope(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.setContextPath(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.getContextPathEncoded()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "ea08a6db728954f59402976b0ce7c76aea9e2859 tags/jetty-9.4.0.RC0~10", "commitUser": "gregw", "authoredDateTime": "2016-09-14 18:28:02", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 17, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/ContextHandler.java", "insertions": 13, "deletions": 4}, {"lines": 33, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/EncodedURITest.java", "insertions": 5, "deletions": 28}], "commitDateTime": "2016-09-14 18:28:02", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #911 encode requestURI in startAsync(req,res)\n", "commitParents": ["f7d017ca1a523a764c5804e3271392e06b4bfcb5"], "commitHash": "1247380976027d98d71c699e93ffd8bcc6c73a05", "commitSpoonAstDiffStats": [{"spoonFilePath": "EncodedURITest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.EncodedURITest.testAsyncFilterWrapTestServlet()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "Server.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Server.handleAsync(org.eclipse.jetty.server.HttpChannel)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}], "nameRev": "1247380976027d98d71c699e93ffd8bcc6c73a05 tags/jetty-9.3.12.v20160915~13", "commitUser": "gregw", "authoredDateTime": "2016-09-09 09:09:51", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 3, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/EncodedURITest.java", "insertions": 1, "deletions": 2}, {"lines": 2, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Server.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2016-09-09 09:09:51", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #911 encode requestURI in startAsync(req,res)\n", "commitParents": ["a97665da3e6ea498ebcdbb7fa21335e3f366da21"], "commitHash": "ab579d542bc6cbbe129ae886011e8e0595db1462", "commitSpoonAstDiffStats": [{"spoonFilePath": "AsyncContextEvent.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.AsyncContextEvent.setDispatchPath(java.lang.String)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}]}], "nameRev": "ab579d542bc6cbbe129ae886011e8e0595db1462 tags/jetty-9.3.12.v20160915~10", "commitUser": "gregw", "authoredDateTime": "2016-09-09 09:45:02", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 3, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/AsyncContextEvent.java", "insertions": 2, "deletions": 1}], "commitDateTime": "2016-09-09 10:12:08", "spoonStatsSkippedReason": ""}], "title": "Request.getRequestURI() gets decoded after startAsync(req, resp) is invoked", "spoonStatsSummary": {"spoonMethodsChanged": 4, "DEL": 0, "INS": 3, "UPD": 1, "MOV": 0, "TOT": 4, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 17, "insertions": 13, "gitFilesChange": 1, "deletions": 4}, "closed": "2016-09-09 03:27:55", "statsSkippedReason": "", "body": "If you use Servlet 3.0 Asynchronous API invoking `HttpServletRequest.startAsync(req, resp)` with a request URL that includes encoded path, e.g.:\n\n```\nhttp://localhost:8080/hello/jetty%20project\n```\n\nboth `HttpServletRequest.getRequestURI()` and `HttpServletRequest.getRequestURL()` unexpectedly get decoded, e.g.:\n\n```\nhttp://localhost:8080/hello/jetty project\n```\n\n after the async context is dispatched and is resumed in the servlet.\n\nNote this issue doesn't happen with the no-arg `HttpServletRequest.startAsync()` method; the request keeps the encoded path (i.e. `http://localhost:8080/hello/jetty%20project`) as expected even after the async context is dispatched.\n\nThis issue causes problems with handling the request URI / URL of the asynchronous request such as `java.net.URISyntaxException` when trying to parse it in an application.\n", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server/handler"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.handler.ContextHandler", "org.eclipse.jetty.server.handler.ContextHandler.doScope(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "org.eclipse.jetty.server.handler.ContextHandler.setContextPath(java.lang.String)", "org.eclipse.jetty.server.handler.ContextHandler.getContextPathEncoded()"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/911"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "chuckdumont", "filteredCommits": ["846d560b44abafc5defbf79f58521d7ce532797b"], "commits": {"846d560b44abafc5defbf79f58521d7ce532797b": {"commitUser": "sbordet", "commitGHEventType": "closed"}}, "created": "2016-09-06 22:09:37", "commitsDetails": [{"commitMessage": "Fixes #905 - Jetty terminates SSL connections too early with Connection: close.\n\nRequests with \"Connection: close\" are now closed only after the\nrequest/response exchange has been terminated.\n", "commitParents": ["d18b900b75139ccc219e03f99eb4daa9c9570911"], "commitHash": "846d560b44abafc5defbf79f58521d7ce532797b", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpSenderOverHTTP.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.http.HttpSenderOverHTTP.isShutdown()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.http.HttpSenderOverHTTP", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.http.HttpSenderOverHTTP.shutdownOutput()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "ClientConnectionCloseTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.ClientConnectionCloseTest.testClientConnectionCloseShutdownOutput(org.eclipse.jetty.client.api.ContentProvider).2.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 2, "INS": 0, "UPD": 3, "MOV": 11, "TOT": 16}, {"spoonMethodName": "org.eclipse.jetty.client.ClientConnectionCloseTest.testClientConnectionCloseShutdownOutputWithChunkedRequestContent()", "DEL": 0, "INS": 0, "UPD": 9, "MOV": 6, "TOT": 15}, {"spoonMethodName": "org.eclipse.jetty.client.ClientConnectionCloseTest.testClientConnectionCloseShutdownOutput(org.eclipse.jetty.client.api.ContentProvider).2", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.client.ClientConnectionCloseTest.test_ClientConnectionClose_ServerPartialResponse_ClientIdleTimeout().3.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 11, "UPD": 0, "MOV": 0, "TOT": 11}, {"spoonMethodName": "org.eclipse.jetty.client.ClientConnectionCloseTest.testClientConnectionCloseShutdownOutputWithRequestContent()", "DEL": 1, "INS": 0, "UPD": 4, "MOV": 6, "TOT": 11}, {"spoonMethodName": "org.eclipse.jetty.client.ClientConnectionCloseTest.testClientConnectionCloseShutdownOutputWithoutRequestContent()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 5, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.client.ClientConnectionCloseTest.testClientConnectionCloseShutdownOutput(org.eclipse.jetty.client.api.ContentProvider)", "DEL": 4, "INS": 0, "UPD": 12, "MOV": 20, "TOT": 36}, {"spoonMethodName": "org.eclipse.jetty.client.ClientConnectionCloseTest.testClientConnectionCloseShutdownOutputWithChunkedRequestContent().1", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.client.ClientConnectionCloseTest.test_ClientConnectionClose_ServerNoConnectionClose_ClientCloses()", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.client.ClientConnectionCloseTest.test_ClientConnectionClose_ServerPartialResponse_ClientIdleTimeout()", "DEL": 0, "INS": 4, "UPD": 0, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.client.ClientConnectionCloseTest.test_ClientConnectionClose_ServerConnectionClose_ClientClosesAfterExchange()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.ClientConnectionCloseTest.testClientConnectionCloseShutdownOutputWithChunkedRequestContent().1.getLength()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 1, "TOT": 3}]}, {"spoonFilePath": "HttpChannelOverHTTP.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.http.HttpChannelOverHTTP.exchangeTerminated(org.eclipse.jetty.client.HttpExchange,org.eclipse.jetty.client.api.Result)", "DEL": 1, "INS": 3, "UPD": 0, "MOV": 5, "TOT": 9}]}], "nameRev": "846d560b44abafc5defbf79f58521d7ce532797b tags/jetty-9.4.0.RC2~1^2~22", "commitUser": "sbordet", "authoredDateTime": "2016-11-04 12:09:44", "commitGHEventType": "closed", "commitGitStats": [{"lines": 8, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/http/HttpSenderOverHTTP.java", "insertions": 7, "deletions": 1}, {"lines": 4, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/http/HttpChannelOverHTTP.java", "insertions": 3, "deletions": 1}, {"lines": 207, "filePath": "jetty-client/src/test/java/org/eclipse/jetty/client/ClientConnectionCloseTest.java", "insertions": 171, "deletions": 36}], "commitDateTime": "2016-11-04 12:09:44", "spoonStatsSkippedReason": ""}], "title": "Jetty terminates SSL connections too early with Connection: close", "spoonStatsSummary": {"spoonMethodsChanged": 4, "DEL": 2, "INS": 6, "UPD": 0, "MOV": 5, "TOT": 13, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 12, "insertions": 10, "gitFilesChange": 2, "deletions": 2}, "closed": "2016-11-04 11:09:58", "statsSkippedReason": "", "body": "This is similar to  #359, but with TLS1.2 connections.  Closing the outbound side of the connection appears to cause the TLS layer to issue an Encrypted Alert, followed by a FIN/ACK.  The server responds by returning a FIN/ACK with no response data.  The Encrypted Alert effectively closes the connections for both outbound and inbound data since, were the connection not being closed, it would require SSL renegotiation to take place.  Not sure if this is because the outbound connections is being closed improperly, or if it needs to be kept open until the response has been received.\n\nEither way, this new behavior (closing the outbound connection without waiting for the response) should at least be configurable so that it could be disabled when it causes problems.\n\n![wireshark](https://cloud.githubusercontent.com/assets/273476/18292299/7903ec9e-745a-11e6-893c-649b1c4fe7fe.png)\n", "changesInPackagesGIT": ["jetty-client/src/main/java/org/eclipse/jetty/client/http"], "changesInPackagesSPOON": ["org.eclipse.jetty.client.http.HttpChannelOverHTTP.exchangeTerminated(org.eclipse.jetty.client.HttpExchange,org.eclipse.jetty.client.api.Result)", "org.eclipse.jetty.client.http.HttpSenderOverHTTP.isShutdown()", "org.eclipse.jetty.client.http.HttpSenderOverHTTP", "org.eclipse.jetty.client.http.HttpSenderOverHTTP.shutdownOutput()"], "ttf": 58.000277777777775, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/905"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "janbartel", "filteredCommits": ["55a81fd7c65d6898f5529418f8ba56b88c54249d"], "commits": {"55a81fd7c65d6898f5529418f8ba56b88c54249d": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2016-09-02 07:24:17", "commitsDetails": [{"commitMessage": "Issue #899\n", "commitParents": ["0d6667dc9f434b59b67772c4adda13b97553d9a4"], "commitHash": "55a81fd7c65d6898f5529418f8ba56b88c54249d", "commitSpoonAstDiffStats": [{"spoonFilePath": "PathFinderTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.start.PathFinderTest.testFindInis()", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}]}], "nameRev": "55a81fd7c65d6898f5529418f8ba56b88c54249d tags/jetty-9.2.19.v20160908~2", "commitUser": "janbartel", "authoredDateTime": "2016-09-02 17:24:28", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 7, "filePath": "jetty-start/src/test/java/org/eclipse/jetty/start/PathFinderTest.java", "insertions": 5, "deletions": 2}], "commitDateTime": "2016-09-02 17:24:28", "spoonStatsSkippedReason": ""}], "title": "PathFinderTest fails in jetty-9.2.x", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0, "insertions": 0, "gitFilesChange": 0, "deletions": 0}, "closed": "2016-09-02 07:29:31", "statsSkippedReason": "", "body": "Building locally PathFinderTest fails consistently. Same test seems to work in jenkins.\n\nTest success is order dependent. Fault traced to lack of setting of jetty.base in PathFinderTest. Another test must set that system property correctly, hence the order dependent success.\n", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 0.0002777777777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/899"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "janbartel", "filteredCommits": ["0c6c11d79d55d21ee1b838886cb55f706038d168"], "commits": {"0c6c11d79d55d21ee1b838886cb55f706038d168": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2016-09-02 01:56:13", "commitsDetails": [{"commitMessage": "Issue #897\n\nIf a request is not handled within the scope of the GzipHandler, the gzip interceptor is removed so it cannot be used by any subsequent handlers.\nIf the request is handled, it is left in place to be used by any async handling.\n", "commitParents": ["00fe5d032e1143b368a97e882944f633c0b7a211"], "commitHash": "0c6c11d79d55d21ee1b838886cb55f706038d168", "commitSpoonAstDiffStats": [{"spoonFilePath": "GzipHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 3, "TOT": 6}]}], "nameRev": "0c6c11d79d55d21ee1b838886cb55f706038d168 tags/jetty-9.3.12.v20160915~28", "commitUser": "gregw", "authoredDateTime": "2016-09-02 12:14:23", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 18, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/gzip/GzipHandler.java", "insertions": 14, "deletions": 4}], "commitDateTime": "2016-09-02 12:14:23", "spoonStatsSkippedReason": ""}], "title": "Remove GzipHandler interceptor when out of scope", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0, "INS": 3, "UPD": 0, "MOV": 3, "TOT": 6, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 18, "insertions": 14, "gitFilesChange": 1, "deletions": 4}, "closed": "2016-09-02 02:15:03", "statsSkippedReason": "", "body": "If the GzipHandler is incorrectly configured it should not work. \n\nEg, following is incorrect setup:\n\nHandlerList handlers = new HandlerList();\nGzipHandler gzipHandler = new GzipHandler();\nhandlers.addHandler(gzipHandler);\nhandlers.addHandler(new WebAppContext());  \nserver.setHandler(handlers);\n", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server/handler/gzip"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/897"}, {"labels": ["Bug", "Enhancement"], "closed": "2018-08-18 04:48:28", "body": "If the client doesn't specify `Connection: close` and the the servlet (or filter, or error-handler) uses HttpServletResponse.sendRedirect() that connection should remain open.\n\nHowever, in Jetty 9.3.x that connection gets closed.\n", "commits": {}, "title": "HttpServletResponse.sendRedirect() should not close the connection", "created": "2016-08-30 23:24:34", "user": "joakime", "url": "https://github.com/eclipse/jetty.project/issues/887", "commitsDetails": [], "ttf": 717.0002777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug", "Enhancement"], "user": "joakime", "filteredCommits": [], "commits": {"0155ae761c12164bc27f3c6d20223ed4c29fde7f": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2016-08-30 20:08:28", "commitsDetails": [{"commitMessage": "Issue #880 Improve IPv6 support\n\nFor #880 added the HostPort class, which was used to fix #878, #879, #884 and #886\n", "commitParents": ["c07d842f0694d88ff6eb4fe33e65bac78c8a9896"], "commitHash": "0155ae761c12164bc27f3c6d20223ed4c29fde7f", "commitSpoonAstDiffStats": [{"spoonFilePath": "ConnectHandlerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.proxy.ConnectHandlerTest.testCONNECTwithIPv6()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ConnectHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.proxy.ConnectHandler.handleConnect(org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse,java.lang.String)", "DEL": 1, "INS": 0, "UPD": 8, "MOV": 0, "TOT": 9}]}, {"spoonFilePath": "IPAddressMap.java", "spoonMethods": []}, {"spoonFilePath": "ProxyConfigurationTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.ProxyConfigurationTest.testProxyMatchesWithIncludesAndExcludesIPv6()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HostPortTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.HostPortTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ConnectorServer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.jmx.ConnectorServer.startRegistry(java.lang.String)", "DEL": 2, "INS": 2, "UPD": 6, "MOV": 1, "TOT": 11}]}, {"spoonFilePath": "HttpClientTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpClientTest.test_IPv6_Host()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HostPort.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.HostPort", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpParserTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.HttpParserTest.testBadIPv6Host()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "URIUtil.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.URIUtil.appendSchemeHostPort(java.lang.StringBuilder,java.lang.String,java.lang.String,int)", "DEL": 1, "INS": 1, "UPD": 1, "MOV": 2, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.util.URIUtil.appendSchemeHostPort(java.lang.StringBuffer,java.lang.String,java.lang.String,int)", "DEL": 1, "INS": 1, "UPD": 1, "MOV": 2, "TOT": 5}]}, {"spoonFilePath": "HttpDestination.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpDestination", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "ProxyConfiguration.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.ProxyConfiguration.Proxy.matches(org.eclipse.jetty.client.Origin$Address,java.lang.String)", "DEL": 2, "INS": 1, "UPD": 7, "MOV": 1, "TOT": 11}]}, {"spoonFilePath": "StringUtil.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.StringUtil.toInt(java.lang.String)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.StringUtil.toInt(java.lang.String,int)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "HttpParser.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.HttpParser.handleKnownHeaders(java.nio.ByteBuffer)", "DEL": 11, "INS": 4, "UPD": 4, "MOV": 10, "TOT": 29}]}, {"spoonFilePath": "Request.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Request.getServerName()", "DEL": 3, "INS": 1, "UPD": 6, "MOV": 6, "TOT": 16}]}], "nameRev": "0155ae761c12164bc27f3c6d20223ed4c29fde7f tags/jetty-9.2.19.v20160908~6", "commitUser": "gregw", "authoredDateTime": "2016-08-31 16:43:42", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 3, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpDestination.java", "insertions": 2, "deletions": 1}, {"lines": 45, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/HttpParser.java", "insertions": 9, "deletions": 36}, {"lines": 24, "filePath": "jetty-proxy/src/test/java/org/eclipse/jetty/proxy/ConnectHandlerTest.java", "insertions": 23, "deletions": 1}, {"lines": 12, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/ProxyConfiguration.java", "insertions": 6, "deletions": 6}, {"lines": 12, "filePath": "jetty-proxy/src/main/java/org/eclipse/jetty/proxy/ConnectHandler.java", "insertions": 4, "deletions": 8}, {"lines": 10, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/URIUtil.java", "insertions": 2, "deletions": 8}, {"lines": 9, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/StringUtil.java", "insertions": 4, "deletions": 5}, {"lines": 14, "filePath": "jetty-jmx/src/main/java/org/eclipse/jetty/jmx/ConnectorServer.java", "insertions": 5, "deletions": 9}, {"lines": 2, "filePath": "jetty-http/src/test/java/org/eclipse/jetty/http/HttpParserTest.java", "insertions": 1, "deletions": 1}, {"lines": 46, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Request.java", "insertions": 10, "deletions": 36}, {"lines": 92, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/HostPortTest.java", "insertions": 92, "deletions": 0}, {"lines": 28, "filePath": "jetty-client/src/test/java/org/eclipse/jetty/client/HttpClientTest.java", "insertions": 28, "deletions": 0}, {"lines": 1, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/IPAddressMap.java", "insertions": 1, "deletions": 0}, {"lines": 129, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/HostPort.java", "insertions": 129, "deletions": 0}, {"lines": 12, "filePath": "jetty-client/src/test/java/org/eclipse/jetty/client/ProxyConfigurationTest.java", "insertions": 12, "deletions": 0}], "commitDateTime": "2016-08-31 16:46:11", "spoonStatsSkippedReason": ""}], "title": "Jetty Client should use bracketed form of IPv6 in `Host` header", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0, "insertions": 0, "gitFilesChange": 0, "deletions": 0}, "closed": "2016-08-31 06:47:57", "statsSkippedReason": "", "body": "An enhancement request for Jetty Client to be better aligned with other User-Agents such as Chrome and curl\n\nCurrently, the Jetty Client represents IPv6 hosts as\n\n```\nHost: aaaa:1111:bbbb:2222:cccc:0:27:0:8080\n```\n\nWhen it could include brackets to be more in alignment with those other User-Agents.\n\n```\nHost: [aaaa:1111:bbbb:2222:cccc:0:27:0]:8080\n```\n\nHowever, the specs don't make it clear if the brackets are important or not.\n- [RFC7230: Section 5.4](https://tools.ietf.org/html/rfc7230#section-5.4) - defines the Host header syntax as `Host = uri-host [ \":\" port ]`\n- [RFC7230: Section 2.7.1](https://tools.ietf.org/html/rfc7230#section-2.7.1) - states that `uri-host` is defined in RFC3986\n- [RFC3986: Section 3.2.2](https://tools.ietf.org/html/rfc3986#section-3.2.2) - has no syntax definition that states that for IPv6 you should include brackets.\n", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 0.0002777777777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/878"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 2, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug", "More Info Required"], "user": "Antibrumm", "filteredCommits": ["daafc8fed1ec86fb39814267bf628f36a0dcc3b6"], "commits": {"daafc8fed1ec86fb39814267bf628f36a0dcc3b6": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "976ffb7ecd3c91286c9941f7a03eaacb196f994e": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "ce6054391cb00124dd225a6d83a756628916d5e5": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2016-08-30 17:13:50", "commitsDetails": [{"commitMessage": "Issue #877\n\nAdd test case\n", "commitParents": ["9e2aeda0527898d28013f2b6179aa7fc46bd62a5"], "commitHash": "daafc8fed1ec86fb39814267bf628f36a0dcc3b6", "commitSpoonAstDiffStats": [{"spoonFilePath": "TestQuickStart.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.quickstart.TestQuickStart", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "FooServlet.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.quickstart.FooServlet", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "FooContextListener.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.quickstart.FooContextListener", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "daafc8fed1ec86fb39814267bf628f36a0dcc3b6 tags/jetty-9.4.4.v20170414~6^2~3", "commitUser": "janbartel", "authoredDateTime": "2017-04-12 11:08:07", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 57, "filePath": "jetty-quickstart/src/test/java/org/eclipse/jetty/quickstart/FooContextListener.java", "insertions": 57, "deletions": 0}, {"lines": 42, "filePath": "jetty-quickstart/src/test/java/org/eclipse/jetty/quickstart/FooServlet.java", "insertions": 42, "deletions": 0}, {"lines": 5, "filePath": "jetty-quickstart/pom.xml", "insertions": 5, "deletions": 0}, {"lines": 99, "filePath": "jetty-quickstart/src/test/java/org/eclipse/jetty/quickstart/TestQuickStart.java", "insertions": 99, "deletions": 0}], "commitDateTime": "2017-04-12 11:08:07", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #877\n\nAnd also #1117\n", "commitParents": ["ee59b4232166c064096b98cc394ef145dd5c7b4e"], "commitHash": "976ffb7ecd3c91286c9941f7a03eaacb196f994e", "commitSpoonAstDiffStats": [{"spoonFilePath": "QuickStartWebApp.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.quickstart.QuickStartWebApp.setGenerateOrigin(boolean)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.quickstart.QuickStartWebApp", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.quickstart.QuickStartWebApp.generateQuickstartWebXml(java.lang.String)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.quickstart.QuickStartWebApp.getGenerateOrigin()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.quickstart.QuickStartWebApp.setOriginAttribute(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.quickstart.QuickStartWebApp.getOriginAttribute()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "QuickStartDescriptorGenerator.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.quickstart.QuickStartDescriptorGenerator", "DEL": 0, "INS": 10, "UPD": 0, "MOV": 0, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.quickstart.QuickStartDescriptorGenerator.origin(org.eclipse.jetty.webapp.MetaData,java.lang.String)", "DEL": 1, "INS": 3, "UPD": 0, "MOV": 2, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.quickstart.QuickStartDescriptorGenerator.generateQuickStartWebXml(java.io.OutputStream)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "JettyEffectiveWebXml.java", "spoonMethods": []}, {"spoonFilePath": "QuickStartDescriptorProcessor.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.quickstart.QuickStartDescriptorProcessor.end(org.eclipse.jetty.webapp.WebAppContext,org.eclipse.jetty.webapp.Descriptor)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 3, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.quickstart.QuickStartDescriptorProcessor.visitServletMapping(org.eclipse.jetty.webapp.WebAppContext,org.eclipse.jetty.webapp.Descriptor,org.eclipse.jetty.xml.XmlParser$Node)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.quickstart.QuickStartDescriptorProcessor.visitContextParam(org.eclipse.jetty.webapp.WebAppContext,org.eclipse.jetty.webapp.Descriptor,org.eclipse.jetty.xml.XmlParser$Node)", "DEL": 0, "INS": 5, "UPD": 0, "MOV": 1, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.quickstart.QuickStartDescriptorProcessor", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.quickstart.QuickStartDescriptorProcessor.start(org.eclipse.jetty.webapp.WebAppContext,org.eclipse.jetty.webapp.Descriptor)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 3, "TOT": 4}]}, {"spoonFilePath": "MetaData.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.MetaData.OriginInfo.toString()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 1, "TOT": 3}]}, {"spoonFilePath": "JettyWebAppContext.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.maven.plugin.JettyWebAppContext.startWebapp()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.maven.plugin.JettyWebAppContext", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.maven.plugin.JettyWebAppContext.setOriginAttribute(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.maven.plugin.JettyWebAppContext.isGenerateOrigin()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.maven.plugin.JettyWebAppContext.getOriginAttribute()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.maven.plugin.JettyWebAppContext.setGenerateOrigin(boolean)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "976ffb7ecd3c91286c9941f7a03eaacb196f994e tags/jetty-9.3.18.v20170406~7", "commitUser": "janbartel", "authoredDateTime": "2017-03-23 11:24:22", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 67, "filePath": "jetty-quickstart/src/main/java/org/eclipse/jetty/quickstart/QuickStartDescriptorProcessor.java", "insertions": 65, "deletions": 2}, {"lines": 2, "filePath": "jetty-webapp/src/main/java/org/eclipse/jetty/webapp/MetaData.java", "insertions": 1, "deletions": 1}, {"lines": 34, "filePath": "jetty-quickstart/src/main/java/org/eclipse/jetty/quickstart/QuickStartWebApp.java", "insertions": 33, "deletions": 1}, {"lines": 5, "filePath": "jetty-maven-plugin/src/main/java/org/eclipse/jetty/maven/plugin/JettyEffectiveWebXml.java", "insertions": 3, "deletions": 2}, {"lines": 25, "filePath": "jetty-quickstart/src/main/java/org/eclipse/jetty/quickstart/QuickStartDescriptorGenerator.java", "insertions": 22, "deletions": 3}, {"lines": 36, "filePath": "jetty-maven-plugin/src/main/java/org/eclipse/jetty/maven/plugin/JettyWebAppContext.java", "insertions": 35, "deletions": 1}], "commitDateTime": "2017-03-23 11:24:22", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #877\n", "commitParents": ["47fd7e1bd272632d7db3adcc8efd143abf582328"], "commitHash": "ce6054391cb00124dd225a6d83a756628916d5e5", "commitSpoonAstDiffStats": [{"spoonFilePath": "QuickStartDescriptorGenerator.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.quickstart.QuickStartDescriptorGenerator", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.quickstart.QuickStartDescriptorGenerator.generateQuickStartWebXml(java.io.OutputStream)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "QuickStartDescriptorProcessor.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.quickstart.QuickStartDescriptorProcessor.end(org.eclipse.jetty.webapp.WebAppContext,org.eclipse.jetty.webapp.Descriptor)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 3, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.quickstart.QuickStartDescriptorProcessor.visitServletMapping(org.eclipse.jetty.webapp.WebAppContext,org.eclipse.jetty.webapp.Descriptor,org.eclipse.jetty.xml.XmlParser$Node)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.quickstart.QuickStartDescriptorProcessor.visitContextParam(org.eclipse.jetty.webapp.WebAppContext,org.eclipse.jetty.webapp.Descriptor,org.eclipse.jetty.xml.XmlParser$Node)", "DEL": 0, "INS": 5, "UPD": 0, "MOV": 1, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.quickstart.QuickStartDescriptorProcessor", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.quickstart.QuickStartDescriptorProcessor.start(org.eclipse.jetty.webapp.WebAppContext,org.eclipse.jetty.webapp.Descriptor)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 3, "TOT": 4}]}], "nameRev": "ce6054391cb00124dd225a6d83a756628916d5e5 tags/jetty-9.4.0.RC3~13^2~5", "commitUser": "janbartel", "authoredDateTime": "2016-12-01 11:57:05", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 67, "filePath": "jetty-quickstart/src/main/java/org/eclipse/jetty/quickstart/QuickStartDescriptorProcessor.java", "insertions": 65, "deletions": 2}, {"lines": 11, "filePath": "jetty-quickstart/src/main/java/org/eclipse/jetty/quickstart/QuickStartDescriptorGenerator.java", "insertions": 11, "deletions": 0}], "commitDateTime": "2016-12-01 11:57:54", "spoonStatsSkippedReason": ""}], "title": "Programmatic servlet mappings cannot override mappings from webdefault.xml using quickstart", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 0, "insertions": 0, "gitFilesChange": 0, "deletions": 0}, "closed": "2016-12-01 01:08:11", "statsSkippedReason": "", "body": "Hi\nI don't know which information I would need to provide to identify the problem so just let me know.\n\nI have a multi-module maven project where one of the modules is an intergration-test module simulating the web application. This web application is started upfront the protractor tests and then shutdown again with the help of the jetty-maven-plugin. No this is all running well when using the `start` and `stop` goals. \n\nFinally I wanted to try using `run-forked` to activate the jacoco javaagent, but this does not seem to produce a running application. \n\nAs a test I tried using the `run` goal and to my surprise this produced a working web application.\n\nI activated some debug logging for both and could verify that the application is started in both cases: My logs from the application startup show that the system is actually booting fine, but in the end, for the `run-forked` goal there is only a \"browse directory\" screen, while with the `run` goal the context is setup correctly and I can access the pages.\n\nWhat i found out until now is that the `JettyWebAppContext` look different.\n- While with the `run`goal the context uses absolute file uris, this is not the case with the `run-forked` goal.\n- Also the context looks a lot bigger in the second case, which i cannot explain.\n\n```\nStarted o.e.j.m.p.JettyWebAppContext@a357c3e {/webapp,[file:///jd/ws/texelia/webapp/webapp/base/ui-angular/tests/src/test/webapp/, jar:file:///Users/mfrey/.m2/repository/org/webjars/jQuery-slimScroll/1.3.3/jQuery-slimScroll-1.3.3.jar!/META-INF/resources, jar:file:///Users/mfrey/.m2/repository/org/webjars/angularjs/1.5.5/angularjs-1.5.5.jar!/META-INF/resources, jar:file:///Users/mfrey/.m2/repository/org/webjars/angular-ui-bootstrap/1.3.2/angular-ui-bootstrap-1.3.2.jar!/META-INF/resources, jar:file:///Users/mfrey/.m2/repository/org/webjars/toastr/2.1.0/toastr-2.1.0.jar!/META-INF/resources, jar:file:///Users/mfrey/.m2/repository/org/webjars/jquery/2.2.4/jquery-2.2.4.jar!/META-INF/resources, jar:file:///Users/mfrey/.m2/repository/org/webjars/bootstrap/3.3.6/bootstrap-3.3.6.jar!/META-INF/resources, jar:file:///Users/mfrey/.m2/repository/org/webjars/jquery-easing/1.3-1/jquery-easing-1.3-1.jar!/META-INF/resources, jar:file:///Users/mfrey/.m2/repository/org/webjars/dropzone/3.12.0/dropzone-3.12.0.jar!/META-INF/resources, jar:file:///Users/mfrey/.m2/repository/org/webjars/jquery.fileDownload/50171edfab/jquery.fileDownload-50171edfab.jar!/META-INF/resources, jar:file:///Users/mfrey/.m2/repository/org/webjars/jasmine/2.0.0/jasmine-2.0.0.jar!/META-INF/resources],AVAILABLE}{file:///jd/ws/texelia/webapp/webapp/base/ui-angular/tests/src/test/webapp/}\n```\n\n```\nStarted o.e.j.m.p.JettyWebAppContext@400d912a{/webapp,[file:///jd/ws/texelia/webapp/webapp/base/ui-angular/tests/src/test/webapp/, jar:file:/Users/mfrey/.m2/repository/org/webjars/jQuery-slimScroll/1.3.3/jQuery-slimScroll-1.3.3.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/angularjs/1.5.5/angularjs-1.5.5.jar!/META-INF/resources,   jar:file:/Users/mfrey/.m2/repository/org/webjars/jQuery-slimScroll/1.3.3/jQuery-slimScroll-1.3.3.jar!/META-INF/resources,  jar:file:/Users/mfrey/.m2/repository/org/webjars/angular-ui-bootstrap/1.3.2/angular-ui-bootstrap-1.3.2.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/angularjs/1.5.5/angularjs-1.5.5.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/jQuery-slimScroll/1.3.3/jQuery-slimScroll-1.3.3.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/angular-ui-bootstrap/1.3.2/angular-ui-bootstrap-1.3.2.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/toastr/2.1.0/toastr-2.1.0.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/angularjs/1.5.5/angularjs-1.5.5.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/jQuery-slimScroll/1.3.3/jQuery-slimScroll-1.3.3.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/angular-ui-bootstrap/1.3.2/angular-ui-bootstrap-1.3.2.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/toastr/2.1.0/toastr-2.1.0.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/angularjs/1.5.5/angularjs-1.5.5.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/jquery/2.2.4/jquery-2.2.4.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/jQuery-slimScroll/1.3.3/jQuery-slimScroll-1.3.3.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/angular-ui-bootstrap/1.3.2/angular-ui-bootstrap-1.3.2.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/toastr/2.1.0/toastr-2.1.0.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/angularjs/1.5.5/angularjs-1.5.5.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/jquery/2.2.4/jquery-2.2.4.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/bootstrap/3.3.6/bootstrap-3.3.6.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/jQuery-slimScroll/1.3.3/jQuery-slimScroll-1.3.3.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/angular-ui-bootstrap/1.3.2/angular-ui-bootstrap-1.3.2.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/toastr/2.1.0/toastr-2.1.0.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/angularjs/1.5.5/angularjs-1.5.5.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/jquery-easing/1.3-1/jquery-easing-1.3-1.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/jquery/2.2.4/jquery-2.2.4.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/bootstrap/3.3.6/bootstrap-3.3.6.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/jQuery-slimScroll/1.3.3/jQuery-slimScroll-1.3.3.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/angular-ui-bootstrap/1.3.2/angular-ui-bootstrap-1.3.2.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/toastr/2.1.0/toastr-2.1.0.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/angularjs/1.5.5/angularjs-1.5.5.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/jquery-easing/1.3-1/jquery-easing-1.3-1.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/jquery/2.2.4/jquery-2.2.4.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/bootstrap/3.3.6/bootstrap-3.3.6.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/dropzone/3.12.0/dropzone-3.12.0.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/jQuery-slimScroll/1.3.3/jQuery-slimScroll-1.3.3.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/angular-ui-bootstrap/1.3.2/angular-ui-bootstrap-1.3.2.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/toastr/2.1.0/toastr-2.1.0.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/angularjs/1.5.5/angularjs-1.5.5.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/jquery-easing/1.3-1/jquery-easing-1.3-1.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/jquery/2.2.4/jquery-2.2.4.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/bootstrap/3.3.6/bootstrap-3.3.6.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/jquery.fileDownload/50171edfab/jquery.fileDownload-50171edfab.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/dropzone/3.12.0/dropzone-3.12.0.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/jQuery-slimScroll/1.3.3/jQuery-slimScroll-1.3.3.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/angular-ui-bootstrap/1.3.2/angular-ui-bootstrap-1.3.2.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/toastr/2.1.0/toastr-2.1.0.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/jasmine/2.0.0/jasmine-2.0.0.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/angularjs/1.5.5/angularjs-1.5.5.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/jquery-easing/1.3-1/jquery-easing-1.3-1.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/jquery/2.2.4/jquery-2.2.4.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/bootstrap/3.3.6/bootstrap-3.3.6.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/jquery.fileDownload/50171edfab/jquery.fileDownload-50171edfab.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/dropzone/3.12.0/dropzone-3.12.0.jar!/META-INF/resources, jar:file:/Users/mfrey/.m2/repository/org/webjars/jQuery-slimScroll/1.3.3/jQuery-slimScroll-1.3.3.jar!/META-INF/resources],AVAILABLE}\n```\n", "changesInPackagesGIT": [], "changesInPackagesSPOON": ["org.eclipse.jetty.quickstart.FooContextListener", "org.eclipse.jetty.quickstart.FooServlet"], "ttf": 92.00027777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/877"}, {"labels": ["Bug"], "closed": "2016-11-01 20:25:46", "body": "This code:\n\n```\nnew HttpURI(\"http://www.example.com/#?\").getQuery()\n```\n\nWill throw an exception:\n\n```\njava.lang.StringIndexOutOfBoundsException: String index out of range: -2\n    at java.lang.String.checkBounds(String.java:381)\n    at java.lang.String.<init>(String.java:462)\n    at org.eclipse.jetty.http.HttpURI.getQuery(HttpURI.java:709)\n```\n\nThe actual problem is when you get such invalid request in Jetty, the `HttpServletRequest#getQueryString` throws an exception, which is unexpected.\n", "commits": {}, "title": "StringIndexOutofBoundsException on malformed url in org.eclipse.jetty.http.HttpURI", "created": "2016-08-30 15:00:53", "user": "dkomanov", "url": "https://github.com/eclipse/jetty.project/issues/876", "commitsDetails": [], "ttf": 63.000277777777775}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["01e29aa45a6b59333e090ad52fc449289456ab01"], "commits": {"01e29aa45a6b59333e090ad52fc449289456ab01": {"commitUser": "sbordet", "commitGHEventType": "closed"}}, "created": "2016-08-25 12:51:18", "commitsDetails": [{"commitMessage": "Fixes #870 - TLS protocol exclusion broken for SslContextFactory(String).\n\nIntroduced a private constructor that performs the correct\ninitialization, and have the other constructors delegate to it.\n", "commitParents": ["9e015653446b9c5cec3ffc9387217bfaf9cd8f4d"], "commitHash": "01e29aa45a6b59333e090ad52fc449289456ab01", "commitSpoonAstDiffStats": [{"spoonFilePath": "SslContextFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.ssl.SslContextFactory", "DEL": 0, "INS": 5, "UPD": 0, "MOV": 6, "TOT": 11}]}], "nameRev": "01e29aa45a6b59333e090ad52fc449289456ab01 tags/jetty-9.4.0.RC0~2^2", "commitUser": "sbordet", "authoredDateTime": "2016-09-15 12:10:52", "commitGHEventType": "closed", "commitGitStats": [{"lines": 15, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/ssl/SslContextFactory.java", "insertions": 11, "deletions": 4}], "commitDateTime": "2016-09-15 12:11:11", "spoonStatsSkippedReason": ""}], "title": "TLS protocol exclusion broken for SslContextFactory(String)", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0, "INS": 5, "UPD": 0, "MOV": 6, "TOT": 11, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 15, "insertions": 11, "gitFilesChange": 1, "deletions": 4}, "closed": "2016-09-15 10:11:20", "statsSkippedReason": "", "body": "When the internal in SslContextFactory implementation was changed from using SSLEngine to using SSLContext for protocol / cipher lists apparently broke the Protocol Exclusion behavior.\n\nSee Issue #866 \n", "changesInPackagesGIT": ["jetty-util/src/main/java/org/eclipse/jetty/util/ssl"], "changesInPackagesSPOON": ["org.eclipse.jetty.util.ssl.SslContextFactory"], "ttf": 20.00027777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/870"}, {"labels": ["Bug"], "closed": "2016-08-25 13:29:56", "body": "My Jetty embedded code creates an HTTPS server with a `SslContextFactory` obtained from the `SslContextFactory(String)` constructor. In 9.3.10 and previous, the SSLv2Hello protocol would be enabled per the JSSE default for servers. As of 9.3.11, the SSLv2Hello protocol is disabled.\n\nInitial diagnosis shows that this is because the 9.3.10 `SslConextFactory.doStart()` method obtains the enabled protocols from the SSLEngine, whereas 9.3.11 obtains it from the SSLContext. There is no way for the SSLContext to represent JSSE's differing protocol enable defaults for client versus server.\n", "commits": {}, "title": "Jetty 9.3.11 disables the SSLv2Hello protocol", "created": "2016-08-24 19:15:31", "user": "johngmyers", "url": "https://github.com/eclipse/jetty.project/issues/866", "commitsDetails": [], "ttf": 0.0002777777777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug", "More Info Required", "Unable To Replicate"], "user": "prakashnandihal", "filteredCommits": ["20db6700c0912c421adc6c612cece2051d204a7d"], "commits": {"20db6700c0912c421adc6c612cece2051d204a7d": {"commitUser": "sbordet", "commitGHEventType": "closed"}, "a056695687fdd064df88afc14b41317e7a6567fd": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2016-08-21 14:58:12", "commitsDetails": [{"commitMessage": "Fixes #859 - Stack overflow error in jetty high level API.\n\nNow executing the call to abort() so that the stack overflow is avoided.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["9d37feba3c6c9982883c51a2380cf1330b2125ce"], "commitHash": "20db6700c0912c421adc6c612cece2051d204a7d", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpSender.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpSender.executeAbort(org.eclipse.jetty.client.HttpExchange,java.lang.Throwable)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.HttpSender.anyToFailure(java.lang.Throwable)", "DEL": 3, "INS": 1, "UPD": 2, "MOV": 1, "TOT": 7}]}], "nameRev": "20db6700c0912c421adc6c612cece2051d204a7d tags/jetty-9.4.13.v20181111~62^2", "commitUser": "sbordet", "authoredDateTime": "2018-10-03 18:24:59", "commitGHEventType": "closed", "commitGitStats": [{"lines": 23, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpSender.java", "insertions": 19, "deletions": 4}], "commitDateTime": "2018-10-03 18:24:59", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #2953 from eclipse/jetty-9.4.x-859-httpclient_stack_overflow\n\nFixes #859 - Stack overflow error in jetty high level API.", "commitParents": ["64dc93050049c2f21a7b5af1092a22a0cc10801b", "20db6700c0912c421adc6c612cece2051d204a7d"], "commitHash": "a056695687fdd064df88afc14b41317e7a6567fd", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpSender.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpSender.executeAbort(org.eclipse.jetty.client.HttpExchange,java.lang.Throwable)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.HttpSender.anyToFailure(java.lang.Throwable)", "DEL": 3, "INS": 1, "UPD": 2, "MOV": 1, "TOT": 7}]}], "nameRev": "a056695687fdd064df88afc14b41317e7a6567fd tags/jetty-9.4.13.v20181111~62", "commitUser": "sbordet", "authoredDateTime": "2018-10-05 08:10:35", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 23, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpSender.java", "insertions": 19, "deletions": 4}], "commitDateTime": "2018-10-05 08:10:35", "spoonStatsSkippedReason": ""}], "title": "Stack overflow error in jetty high level API", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 3, "INS": 2, "UPD": 2, "MOV": 1, "TOT": 8, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 23, "insertions": 19, "gitFilesChange": 1, "deletions": 4}, "closed": "2018-10-05 06:10:40", "statsSkippedReason": "", "body": "I am doing POC on jetty http2 client,i am using jetty version\r\n9.3.7.v20160115. Below is my code snippet.I am doing test with 1 million records and posting 200  requests per second using below code snippet.I am seeing Stack over flow error randomly while doing tests and i tried by  increasing  -Xss jvm argument value still ,i see this error some times. Below is the stack trace of Stack over flow.\r\n\r\n``` java\r\n public class Test{\r\n\r\n\r\n          public static void main(String args[]){\r\n \r\n      ALPN.debug = true;\r\n     HTTP2Client http2Client = new HTTP2Client();\r\n     http2Client.start();\r\n \r\n     SslContextFactory ssl = new SslContextFactory(true);\r\n     ssl.setKeyStore(getKeyStore());\r\n     ssl.setKeyStorePassword(\"\");\r\n \r\n     HttpClient client = new HttpClient(new\r\n \r\n HttpClientTransportOverHTTP2(http2Client), ssl);\r\n \r\n System.out.println(\"-----Max request per destination\"\r\n + client.getMaxRequestsQueuedPerDestination());\r\n       client.setMaxRequestsQueuedPerDestination(1000000);\r\n \r\n System.out.println(\"client.getMaxRequestsQueuedPerDestination()\"\r\n + client.getMaxRequestsQueuedPerDestination());\r\n   \r\n   client.start();\r\n   \r\n   \r\n   long start =System.currentTimeMillis();\r\n    for (int i=0;i<1000000;i++){\r\n       System.out.println(\"Sending\" + i);\r\n       Request req = client.POST(\"https://test.com\").path(\"/123\");\r\n       req.send(new ResponseListener(i)); \r\n        }\r\n }\r\n }\r\n```\r\n\r\nStack Over Flow Error Trace:\r\n\r\n```\r\n2016-08-21 09:19:35,341) WARN  [-::qtp1060545875-100]  [org.eclipse.jetty.util.thread.QueuedThreadPool:629] \r\njava.lang.StackOverflowError\r\n    at java.net.URI$Parser.parseAuthority(URI.java:3136)\r\n    at java.net.URI$Parser.parseHierarchical(URI.java:3097)\r\n    at java.net.URI$Parser.parse(URI.java:3053)\r\n    at java.net.URI.<init>(URI.java:588)\r\n    at java.net.URI.create(URI.java:850)\r\n    at org.eclipse.jetty.client.HttpRequest.buildURI(HttpRequest.java:792)\r\n    at org.eclipse.jetty.client.HttpRequest.getURI(HttpRequest.java:202)\r\n    at org.eclipse.jetty.client.HttpConnection.normalizeRequest(HttpConnection.java:145)\r\n    at org.eclipse.jetty.http2.client.http.HttpConnectionOverHTTP2.send(HttpConnectionOverHTTP2.java:53)\r\n    at org.eclipse.jetty.http2.client.http.HttpDestinationOverHTTP2.send(HttpDestinationOverHTTP2.java:37)\r\n    at org.eclipse.jetty.http2.client.http.HttpDestinationOverHTTP2.send(HttpDestinationOverHTTP2.java:27)\r\n    at org.eclipse.jetty.client.MultiplexHttpDestination.process(MultiplexHttpDestination.java:143)\r\n    at org.eclipse.jetty.client.MultiplexHttpDestination.send(MultiplexHttpDestination.java:72)\r\n    at org.eclipse.jetty.client.MultiplexHttpDestination.release(MultiplexHttpDestination.java:166)\r\n    at org.eclipse.jetty.http2.client.http.HttpConnectionOverHTTP2.release(HttpConnectionOverHTTP2.java:70)\r\n    at org.eclipse.jetty.http2.client.http.HttpChannelOverHTTP2.release(HttpChannelOverHTTP2.java:79)\r\n    at org.eclipse.jetty.http2.client.http.HttpChannelOverHTTP2.exchangeTerminated(HttpChannelOverHTTP2.java:86)\r\n    at org.eclipse.jetty.client.HttpReceiver.terminateResponse(HttpReceiver.java:449)\r\n    at org.eclipse.jetty.client.HttpReceiver.abort(HttpReceiver.java:525)\r\n    at org.eclipse.jetty.client.HttpChannel.abortResponse(HttpChannel.java:129)\r\n    at org.eclipse.jetty.client.HttpSender.terminateRequest(HttpSender.java:373)\r\n    at org.eclipse.jetty.client.HttpSender.abort(HttpSender.java:548)\r\n    at org.eclipse.jetty.client.HttpSender.anyToFailure(HttpSender.java:342)\r\n    at org.eclipse.jetty.client.HttpSender$CommitCallback.failed(HttpSender.java:706)\r\n    at org.eclipse.jetty.http2.client.http.HttpSenderOverHTTP2$1.failed(HttpSenderOverHTTP2.java:82)\r\n    at org.eclipse.jetty.http2.HTTP2Session$PromiseCallback.failed(HTTP2Session.java:1251)\r\n    at org.eclipse.jetty.http2.HTTP2Flusher$Entry.failed(HTTP2Flusher.java:366)\r\n    at org.eclipse.jetty.http2.HTTP2Flusher.closed(HTTP2Flusher.java:327)\r\n    at org.eclipse.jetty.http2.HTTP2Flusher.append(HTTP2Flusher.java:110)\r\n    at org.eclipse.jetty.http2.HTTP2Session.newStream(HTTP2Session.java:449)\r\n    at org.eclipse.jetty.http2.client.http.HttpSenderOverHTTP2.sendHeaders(HttpSenderOverHTTP2.java:86)\r\n    at org.eclipse.jetty.client.HttpSender.send(HttpSender.java:204)\r\n    at org.eclipse.jetty.http2.client.http.HttpChannelOverHTTP2.send(HttpChannelOverHTTP2.java:73)\r\n    at org.eclipse.jetty.client.HttpConnection.send(HttpConnection.java:202)\r\n    at org.eclipse.jetty.http2.client.http.HttpConnectionOverHTTP2.send(HttpConnectionOverHTTP2.java:59)\r\n    at org.eclipse.jetty.http2.client.http.HttpDestinationOverHTTP2.send(HttpDestinationOverHTTP2.java:37)\r\n    at org.eclipse.jetty.http2.client.http.HttpDestinationOverHTTP2.send(HttpDestinationOverHTTP2.java:27)\r\n    at org.eclipse.jetty.client.MultiplexHttpDestination.process(MultiplexHttpDestination.java:143)\r\n    at org.eclipse.jetty.client.MultiplexHttpDestination.send(MultiplexHttpDestination.java:72)\r\n    at org.eclipse.jetty.client.MultiplexHttpDestination.release(MultiplexHttpDestination.java:166)\r\n    at org.eclipse.jetty.http2.client.http.HttpConnectionOverHTTP2.release(HttpConnectionOverHTTP2.java:70)\r\n    at org.eclipse.jetty.http2.client.http.HttpChannelOverHTTP2.release(HttpChannelOverHTTP2.java:79)\r\n    at org.eclipse.jetty.http2.client.http.HttpChannelOverHTTP2.exchangeTerminated(HttpChannelOverHTTP2.java:86)\r\n    at org.eclipse.jetty.client.HttpReceiver.terminateResponse(HttpReceiver.java:449)\r\n    at org.eclipse.jetty.client.HttpReceiver.abort(HttpReceiver.java:525)\r\n    at org.eclipse.jetty.client.HttpChannel.abortResponse(HttpChannel.java:129)\r\n    at org.eclipse.jetty.client.HttpSender.terminateRequest(HttpSender.java:373)\r\n    at org.eclipse.jetty.client.HttpSender.abort(HttpSender.java:548)\r\n    at org.eclipse.jetty.client.HttpSender.anyToFailure(HttpSender.java:342)\r\n    at org.eclipse.jetty.client.HttpSender$CommitCallback.failed(HttpSender.java:706)\r\n    at org.eclipse.jetty.http2.client.http.HttpSenderOverHTTP2$1.failed(HttpSenderOverHTTP2.java:82)\r\n    at org.eclipse.jetty.http2.HTTP2Session$PromiseCallback.failed(HTTP2Session.java:1251)\r\n    at org.eclipse.jetty.http2.HTTP2Flusher$Entry.failed(HTTP2Flusher.java:366)\r\n    at org.eclipse.jetty.http2.HTTP2Flusher.closed(HTTP2Flusher.java:327)\r\n    at org.eclipse.jetty.http2.HTTP2Flusher.append(HTTP2Flusher.java:110)\r\n    at org.eclipse.jetty.http2.HTTP2Session.newStream(HTTP2Session.java:449)\r\n    at org.eclipse.jetty.http2.client.http.HttpSenderOverHTTP2.sendHeaders(HttpSenderOverHTTP2.java:86)\r\n    at org.eclipse.jetty.client.HttpSender.send(HttpSender.java:204)\r\n    at org.eclipse.jetty.http2.client.http.HttpChannelOverHTTP2.send(HttpChannelOverHTTP2.java:73)\r\n    at org.eclipse.jetty.client.HttpConnection.send(HttpConnection.java:202)\r\n    at org.eclipse.jetty.http2.client.http.HttpConnectionOverHTTP2.send(HttpConnectionOverHTTP2.java:59)\r\n    at org.eclipse.jetty.http2.client.http.HttpDestinationOverHTTP2.send(HttpDestinationOverHTTP2.java:37)\r\n    at org.eclipse.jetty.http2.client.http.HttpDestinationOverHTTP2.send(HttpDestinationOverHTTP2.java:27)\r\n    at org.eclipse.jetty.client.MultiplexHttpDestination.process(MultiplexHttpDestination.java:143)\r\n    at org.eclipse.jetty.client.MultiplexHttpDestination.send(MultiplexHttpDestination.java:72)\r\n    at org.eclipse.jetty.client.MultiplexHttpDestination.release(MultiplexHttpDestination.java:166)\r\n    at org.eclipse.jetty.http2.client.http.HttpConnectionOverHTTP2.release(HttpConnectionOverHTTP2.java:70)\r\n    at org.eclipse.jetty.http2.client.http.HttpChannelOverHTTP2.release(HttpChannelOverHTTP2.java:79)\r\n    at org.eclipse.jetty.http2.client.http.HttpChannelOverHTTP2.exchangeTerminated(HttpChannelOverHTTP2.java:86)\r\n    at org.eclipse.jetty.client.HttpReceiver.terminateResponse(HttpReceiver.java:449)\r\n    at org.eclipse.jetty.client.HttpReceiver.abort(HttpReceiver.java:525)\r\n    at org.eclipse.jetty.client.HttpChannel.abortResponse(HttpChannel.java:129)\r\n    at org.eclipse.jetty.client.HttpSender.terminateRequest(HttpSender.java:373)\r\n    at org.eclipse.jetty.client.HttpSender.abort(HttpSender.java:548)\r\n    at org.eclipse.jetty.client.HttpSender.anyToFailure(HttpSender.java:342)\r\n    at org.eclipse.jetty.client.HttpSender$CommitCallback.failed(HttpSender.java:706)\r\n    at org.eclipse.jetty.http2.client.http.HttpSenderOverHTTP2$1.failed(HttpSenderOverHTTP2.java:82)\r\n    at org.eclipse.jetty.http2.HTTP2Session$PromiseCallback.failed(HTTP2Session.java:1251)\r\n    at org.eclipse.jetty.http2.HTTP2Flusher$Entry.failed(HTTP2Flusher.java:366)\r\n    at org.eclipse.jetty.http2.HTTP2Flusher.closed(HTTP2Flusher.java:327)\r\n    at org.eclipse.jetty.http2.HTTP2Flusher.append(HTTP2Flusher.java:110)\r\n    at org.eclipse.jetty.http2.HTTP2Session.newStream(HTTP2Session.java:449)\r\n    at org.eclipse.jetty.http2.client.http.HttpSenderOverHTTP2.sendHeaders(HttpSenderOverHTTP2.java:86)\r\n    at org.eclipse.jetty.client.HttpSender.send(HttpSender.java:204)\r\n    at org.eclipse.jetty.http2.client.http.HttpChannelOverHTTP2.send(HttpChannelOverHTTP2.java:73)\r\n    at org.eclipse.jetty.client.HttpConnection.send(HttpConnection.java:202)\r\n    at org.eclipse.jetty.http2.client.http.HttpConnectionOverHTTP2.send(HttpConnectionOverHTTP2.java:59)\r\n    at org.eclipse.jetty.http2.client.http.HttpDestinationOverHTTP2.send(HttpDestinationOverHTTP2.java:37)\r\n    at org.eclipse.jetty.http2.client.http.HttpDestinationOverHTTP2.send(HttpDestinationOverHTTP2.java:27)\r\n    at org.eclipse.jetty.client.MultiplexHttpDestination.process(MultiplexHttpDestination.java:143)\r\n    at org.eclipse.jetty.client.MultiplexHttpDestination.send(MultiplexHttpDestination.java:72)\r\n    at org.eclipse.jetty.client.MultiplexHttpDestination.release(MultiplexHttpDestination.java:166)\r\n    at org.eclipse.jetty.http2.client.http.HttpConnectionOverHTTP2.release(HttpConnectionOverHTTP2.java:70)\r\n    at org.eclipse.jetty.http2.client.http.HttpChannelOverHTTP2.release(HttpChannelOverHTTP2.java:79)\r\n    at org.eclipse.jetty.http2.client.http.HttpChannelOverHTTP2.exchangeTerminated(HttpChannelOverHTTP2.java:86)\r\n    at org.eclipse.jetty.client.HttpReceiver.terminateResponse(HttpReceiver.java:449)\r\n    at org.eclipse.jetty.client.HttpReceiver.abort(HttpReceiver.java:525)\r\n    at org.eclipse.jetty.client.HttpChannel.abortResponse(HttpChannel.java:129)\r\n    at org.eclipse.jetty.client.HttpSender.terminateRequest(HttpSender.java:373)\r\n    at org.eclipse.jetty.client.HttpSender.abort(HttpSender.java:548)\r\n    at org.eclipse.jetty.client.HttpSender.anyToFailure(HttpSender.java:342)\r\n    at org.eclipse.jetty.client.HttpSender$CommitCallback.failed(HttpSender.java:706)\r\n    at org.eclipse.jetty.http2.client.http.HttpSenderOverHTTP2$1.failed(HttpSenderOverHTTP2.java:82)\r\n    at org.eclipse.jetty.http2.HTTP2Session$PromiseCallback.failed(HTTP2Session.java:1251)\r\n    at org.eclipse.jetty.http2.HTTP2Flusher$Entry.failed(HTTP2Flusher.java:366)\r\n    at org.eclipse.jetty.http2.HTTP2Flusher.closed(HTTP2Flusher.java:327)\r\n    at org.eclipse.jetty.http2.HTTP2Flusher.append(HTTP2Flusher.java:110)\r\n    at org.eclipse.jetty.http2.HTTP2Session.newStream(HTTP2Session.java:449)\r\n    at org.eclipse.jetty.http2.client.http.HttpSenderOverHTTP2.sendHeaders(HttpSenderOverHTTP2.java:86)\r\n    at org.eclipse.jetty.client.HttpSender.send(HttpSender.java:204)\r\n    at org.eclipse.jetty.http2.client.http.HttpChannelOverHTTP2.send(HttpChannelOverHTTP2.java:73)\r\n    at org.eclipse.jetty.client.HttpConnection.send(HttpConnection.java:202)\r\n    at org.eclipse.jetty.http2.client.http.HttpConnectionOverHTTP2.send(HttpConnectionOverHTTP2.java:59)\r\n    at org.eclipse.jetty.http2.client.http.HttpDestinationOverHTTP2.send(HttpDestinationOverHTTP2.java:37)\r\n    at org.eclipse.jetty.http2.client.http.HttpDestinationOverHTTP2.send(HttpDestinationOverHTTP2.java:27)\r\n    at org.eclipse.jetty.client.MultiplexHttpDestination.process(MultiplexHttpDestination.java:143)\r\n    at org.eclipse.jetty.client.MultiplexHttpDestination.send(MultiplexHttpDestination.java:72)\r\n    at org.eclipse.jetty.client.MultiplexHttpDestination.release(MultiplexHttpDestination.java:166)\r\n    at org.eclipse.jetty.http2.client.http.HttpConnectionOverHTTP2.release(HttpConnectionOverHTTP2.java:70)\r\n    at org.eclipse.jetty.http2.client.http.HttpChannelOverHTTP2.release(HttpChannelOverHTTP2.java:79)\r\n    at org.eclipse.jetty.http2.client.http.HttpChannelOverHTTP2.exchangeTerminated(HttpChannelOverHTTP2.java:86)\r\n```", "changesInPackagesGIT": ["jetty-client/src/main/java/org/eclipse/jetty/client"], "changesInPackagesSPOON": ["org.eclipse.jetty.client.HttpSender.executeAbort(org.eclipse.jetty.client.HttpExchange,java.lang.Throwable)", "org.eclipse.jetty.client.HttpSender.anyToFailure(java.lang.Throwable)"], "ttf": 774.0002777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/859"}, {"labels": ["Bug"], "closed": "2016-08-18 00:34:40", "body": "See discussion at http://stackoverflow.com/questions/28170244/jetty-throws-noclassdeffounderror-org-eclipse-jetty-util-futurecallback-on-shut\n\nIt appears that if you have a maven project with `<packaging>war</packaging>`, and it has no java classes (no `src/main/java` directory), no `target/classes` directory exist (which is correct).\n\nHowever, this lack of `target/classes` can result in `doStop()` failure (according to the comments on that stackoverflow)\n", "commits": {}, "title": "jetty-maven-plugin doStop fails if target/classes does not exist", "created": "2016-08-17 16:45:34", "user": "joakime", "url": "https://github.com/eclipse/jetty.project/issues/853", "commitsDetails": [], "ttf": 0.0002777777777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 2, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "grgrzybek", "filteredCommits": ["9c9da42129ceca6334662cc783f952e0eaadf627"], "commits": {"9c9da42129ceca6334662cc783f952e0eaadf627": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "fe038c5a87401e2d853a802a5c128f125d91dc0b": {"commitUser": "sbordet", "commitGHEventType": "closed"}, "d71c927ea539ac826b95e560f076f3aca1b17114": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2016-08-17 14:23:04", "commitsDetails": [{"commitMessage": "Fixes #851 - MBeanContainer no longer unregisters MBeans when \"stopped\".\n\nMBeanContainer now implements Destroyable, so calling Server.destroy()\nunregisters the MBeans.\n", "commitParents": ["526d1415a491b406a1ab63cbb340de759ecae8da"], "commitHash": "9c9da42129ceca6334662cc783f952e0eaadf627", "commitSpoonAstDiffStats": [{"spoonFilePath": "MBeanContainer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.jmx.MBeanContainer.destroy()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "9c9da42129ceca6334662cc783f952e0eaadf627 tags/jetty-9.2.19.v20160908~8", "commitUser": "gregw", "authoredDateTime": "2016-08-18 15:58:25", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 4, "filePath": "jetty-jmx/src/main/java/org/eclipse/jetty/jmx/MBeanContainer.java", "insertions": 3, "deletions": 1}], "commitDateTime": "2016-08-18 15:58:25", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #851 - MBeanContainer no longer unregisters MBeans when \"stopped\".\n\nMBeanContainer now implements Destroyable, so calling Server.destroy()\nunregisters the MBeans.\n", "commitParents": ["988e34489bc17b6d2b1f95a357158bd8a6ebe46b"], "commitHash": "fe038c5a87401e2d853a802a5c128f125d91dc0b", "commitSpoonAstDiffStats": [{"spoonFilePath": "MBeanContainer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.jmx.MBeanContainer.destroy()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "MBeanContainerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.jmx.MBeanContainerTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "fe038c5a87401e2d853a802a5c128f125d91dc0b tags/jetty-9.3.12.v20160915~50", "commitUser": "sbordet", "authoredDateTime": "2016-08-17 19:00:41", "commitGHEventType": "closed", "commitGitStats": [{"lines": 116, "filePath": "jetty-jmx/src/test/java/org/eclipse/jetty/jmx/MBeanContainerTest.java", "insertions": 116, "deletions": 0}, {"lines": 4, "filePath": "jetty-jmx/src/main/java/org/eclipse/jetty/jmx/MBeanContainer.java", "insertions": 3, "deletions": 1}], "commitDateTime": "2016-08-17 21:28:19", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #851 - MBeanContainer no longer unregisters MBeans when \"stopped\".\n\nMBeanContainer now implements Destroyable, so calling Server.destroy()\nunregisters the MBeans.\n", "commitParents": ["9a8ed0340c73371bdb179740192a6a507b62de77"], "commitHash": "d71c927ea539ac826b95e560f076f3aca1b17114", "commitSpoonAstDiffStats": [{"spoonFilePath": "MBeanContainerLifeCycleTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.jmx.MBeanContainerLifeCycleTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "MBeanContainer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.jmx.MBeanContainer.destroy()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "d71c927ea539ac826b95e560f076f3aca1b17114 tags/jetty-9.4.0.RC0~63", "commitUser": "sbordet", "authoredDateTime": "2016-08-17 19:00:41", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 116, "filePath": "jetty-jmx/src/test/java/org/eclipse/jetty/jmx/MBeanContainerLifeCycleTest.java", "insertions": 116, "deletions": 0}, {"lines": 4, "filePath": "jetty-jmx/src/main/java/org/eclipse/jetty/jmx/MBeanContainer.java", "insertions": 3, "deletions": 1}], "commitDateTime": "2016-08-17 21:44:35", "spoonStatsSkippedReason": ""}], "title": "MBeanContainer no longer unregisters MBeans when \"stopped\"", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 4, "insertions": 3, "gitFilesChange": 1, "deletions": 1}, "closed": "2016-08-17 19:28:54", "statsSkippedReason": "", "body": "In jetty 8, `org.eclipse.jetty.jmx.MBeanContainer` extended `org.eclipse.jetty.util.component.AbstractLifeCycle`, so this bean was unregistering MBeans on server stop.\n\nIn jetty 9, after 68ee346, only `Container.InheritedListener` is implemented and `destroy()` method doesn't seem to be called anywhere.\n\npax-web 4.2.x stops Jetty server, but `MBeanContainer` isn't explicitly destroyed() - we may add this call, but maybe `MBeanContainer`'s lifecycle should be again managed by server?\n", "changesInPackagesGIT": ["jetty-jmx/src/main/java/org/eclipse/jetty/jmx"], "changesInPackagesSPOON": ["org.eclipse.jetty.jmx.MBeanContainer.destroy()"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/851"}, {"labels": ["Bug"], "closed": "2019-03-06 20:45:14", "body": "Thread 1: This thread is blocked because because the LOG message queue is full.\nName: main\nState: WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@7bb0e8ce\nTotal blocked: 12  Total waited: 22\n\norg.eclipse.jetty.util.log.Slf4jLog.debug(Slf4jLog.java:89)\norg.eclipse.jetty.server.HttpChannelState.handling(HttpChannelState.java:174)\n- locked org.eclipse.jetty.server.HttpChannelState@165aed7e\n  org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:283)\n  org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:257)\n\nThread 2: This thread is the consumer thread and is blocked while writing HttpChannel.toString....\n\nName: ASYNC_LOGGER\nState: BLOCKED on org.eclipse.jetty.server.HttpChannelState@165aed7e owned by: pjetty0 - /service/chars?nrBytes=13\nTotal blocked: 24  Total waited: 46\n\nStack trace: \norg.eclipse.jetty.server.HttpChannelState.getState(HttpChannelState.java:111)\norg.eclipse.jetty.server.HttpChannel.toString(HttpChannel.java:510)\norg.spf4j.io.ObjectAppender$1.append(ObjectAppender.java:37)\norg.spf4j.base.Slf4jMessageFormatter.safeObjectAppend(Slf4jMessageFormatter.java:219)\n\nOne way to resolve this is to get all logging statements outside of the synchronized blocks since a log statement can potentially block... another way is to have aHttpChannel.toString that cannot potentially block...\n", "commits": {}, "title": "Jetty 9.2.17 deadlocks in HttpChannelState when using Async loggger.", "created": "2016-08-16 17:23:38", "user": "zolyfarkas", "url": "https://github.com/eclipse/jetty.project/issues/848", "commitsDetails": [], "ttf": 932.0002777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "gregw", "filteredCommits": ["5c9a637d4ff77174bb56ca51e3f2c1d2acb135bf"], "commits": {"5c9a637d4ff77174bb56ca51e3f2c1d2acb135bf": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2016-08-10 22:02:27", "commitsDetails": [{"commitMessage": "UnitTest #833\n", "commitParents": ["7041e5102d35de472f2427273c85bb038a8c2b90"], "commitHash": "5c9a637d4ff77174bb56ca51e3f2c1d2acb135bf", "commitSpoonAstDiffStats": [{"spoonFilePath": "ConnectorTimeoutTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ConnectorTimeoutTest", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.ConnectorTimeoutTest.testMaxIdleWithDelayedDispatch()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "5c9a637d4ff77174bb56ca51e3f2c1d2acb135bf tags/jetty-9.4.0.M1~10^2~1", "commitUser": "gregw", "authoredDateTime": "2016-08-12 10:29:38", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 39, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ConnectorTimeoutTest.java", "insertions": 37, "deletions": 2}], "commitDateTime": "2016-08-12 10:29:38", "spoonStatsSkippedReason": ""}], "title": "Handle idleTimeout when in delayed dispatch", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0, "insertions": 0, "gitFilesChange": 0, "deletions": 0}, "closed": "2016-08-12 13:01:15", "statsSkippedReason": "", "body": "handle for http1 and http2 delayed dispatch\n", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 1.0002777777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/833"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "brettwooldridge", "filteredCommits": ["7041e5102d35de472f2427273c85bb038a8c2b90"], "commits": {"7041e5102d35de472f2427273c85bb038a8c2b90": {"commitUser": "sbordet", "commitGHEventType": "closed"}, "2eec2251ee11d41506b99ab18b99eeb90f2e535f": {"commitUser": "sbordet", "commitGHEventType": "closed"}}, "created": "2016-08-09 15:01:24", "commitsDetails": [{"commitMessage": "Fixes #827 - HTTPClient fails connecting to HTTPS host through an HTTP proxy w/authentication.\n\nUsing https scheme in CONNECT request if the proxy is secure.\nA Proxy must not match its own address.\nResolved correctly request URI in case of CONNECT requests.\n", "commitParents": ["b45af1a3c99fea756539f81f085a33667e7f64c1"], "commitHash": "7041e5102d35de472f2427273c85bb038a8c2b90", "commitSpoonAstDiffStats": [{"spoonFilePath": "ProxyConfiguration.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.ProxyConfiguration.Proxy.matches(org.eclipse.jetty.client.Origin)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpProxy.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpProxy.CreateTunnelPromise.tunnel(org.eclipse.jetty.client.HttpDestination,org.eclipse.jetty.client.api.Connection)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "ForwardProxyTLSServerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.proxy.ForwardProxyTLSServerTest.testProxyAuthenticationWithIncludedAddressWithResponseContent()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.proxy.ForwardProxyTLSServerTest.testProxyAuthentication(java.lang.String,org.eclipse.jetty.proxy.ConnectHandler)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.proxy.ForwardProxyTLSServerTest.testProxyAuthentication(java.lang.String,org.eclipse.jetty.proxy.ConnectHandler,boolean)", "DEL": 0, "INS": 4, "UPD": 0, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.proxy.ForwardProxyTLSServerTest.testProxyAuthenticationClosesConnection().5", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AuthenticationProtocolHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.AuthenticationProtocolHandler.AuthenticationListener.onComplete(org.eclipse.jetty.client.api.Result)", "DEL": 0, "INS": 1, "UPD": 5, "MOV": 4, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.client.AuthenticationProtocolHandler.AuthenticationListener.resolveURI(org.eclipse.jetty.client.HttpRequest,java.net.URI)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "7041e5102d35de472f2427273c85bb038a8c2b90 tags/jetty-9.4.0.M1~12^2", "commitUser": "sbordet", "authoredDateTime": "2016-08-11 19:25:31", "commitGHEventType": "closed", "commitGitStats": [{"lines": 3, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/ProxyConfiguration.java", "insertions": 3, "deletions": 0}, {"lines": 33, "filePath": "jetty-proxy/src/test/java/org/eclipse/jetty/proxy/ForwardProxyTLSServerTest.java", "insertions": 32, "deletions": 1}, {"lines": 19, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/AuthenticationProtocolHandler.java", "insertions": 13, "deletions": 6}, {"lines": 3, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpProxy.java", "insertions": 3, "deletions": 0}], "commitDateTime": "2016-08-11 19:25:41", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #827 - HTTPClient fails connecting to HTTPS host through an HTTP proxy w/authentication.\n\nOnly successful (200) responses to a CONNECT behave like HEAD and\nimplicitly have no body.\n", "commitParents": ["1bff5c0d6a7f11f752a73eb36843d0e55660be49"], "commitHash": "2eec2251ee11d41506b99ab18b99eeb90f2e535f", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpReceiverOverHTTP.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.http.HttpReceiverOverHTTP.startResponse(org.eclipse.jetty.http.HttpVersion,int,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "ForwardProxyTLSServerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.proxy.ForwardProxyTLSServerTest.testProxyAuthenticationClosesConnection().4", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.proxy.ForwardProxyTLSServerTest.testProxyAuthenticationWithResponseContent()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "2eec2251ee11d41506b99ab18b99eeb90f2e535f tags/jetty-9.4.0.M1~13^2~3", "commitUser": "sbordet", "authoredDateTime": "2016-08-10 18:36:16", "commitGHEventType": "closed", "commitGitStats": [{"lines": 23, "filePath": "jetty-proxy/src/test/java/org/eclipse/jetty/proxy/ForwardProxyTLSServerTest.java", "insertions": 23, "deletions": 0}, {"lines": 3, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/http/HttpReceiverOverHTTP.java", "insertions": 2, "deletions": 1}], "commitDateTime": "2016-08-10 18:36:27", "spoonStatsSkippedReason": ""}], "title": "HTTPClient fails connecting to HTTPS host through an HTTP proxy w/authentication", "spoonStatsSummary": {"spoonMethodsChanged": 4, "DEL": 0, "INS": 5, "UPD": 5, "MOV": 4, "TOT": 14, "spoonFilesChanged": 3}, "gitStatsSummary": {"lines": 25, "insertions": 19, "gitFilesChange": 3, "deletions": 6}, "closed": "2016-08-11 17:25:51", "statsSkippedReason": "", "body": "I have an authenticating HTTP proxy (Squid), and I am trying to connect to a remote server that is running HTTPS.  I've burned a day on it and can't get it to work.\n\nHere is a simple reproduction (added to `HttpClientProxyTest.java`):\n\n``` java\n    @Test\n    public void testMyProxyAuthentication() throws Exception\n    {\n        final String user = \"cent\";\n        final String password = \"lvi\";\n        final String serverHost = \"https://www.gmail.com\";\n        final String realm = \"Squid Basic Authentication\";\n\n        // Squid proxy with authentication\n        String proxyHost = \"192.168.1.11\";\n        int proxyPort = 3128;\n\n        sslContextFactory = new SslContextFactory();\n        sslContextFactory.setTrustAll(true);\n\n        startClient();\n\n        HttpProxy proxy = new HttpProxy(proxyHost, proxyPort);\n        proxy.getIncludedAddresses().add(\"www.gmail.com\");\n        proxy.getIncludedAddresses().add(\"www.gmail.com:443\");\n\n        client.getProxyConfiguration().getProxies().add(proxy);\n\n        // Add authentication...\n        URI uri = URI.create(\"http://\" + proxyHost + \":\" + proxyPort);\n        client.getAuthenticationStore().addAuthentication(new BasicAuthentication(uri, realm, user, password));\n\n        ContentResponse response = null;\n        try {\n            response = client.newRequest(serverHost)\n                    .timeout(5, TimeUnit.SECONDS)\n                    .send();\n\n            Log.getLogger(this.getClass()).info(\"Status: \" + response.getStatus());\n        }\n        catch (Exception e) {\n            Log.getLogger(this.getClass()).warn(e);\n            throw e;\n        }\n    }\n\n```\n\nThe exceptions vary, depending on whether I remove the `proxy.getIncludedAddresses().add(...)` calls or not ... but it fails nonetheless.\n\nIf I set the squid to non-authenticating, it works without issue.  If I connect to a non-HTTPS target, with proxy authentication, it also works without issue.\n", "changesInPackagesGIT": ["jetty-client/src/main/java/org/eclipse/jetty/client"], "changesInPackagesSPOON": ["org.eclipse.jetty.client.HttpProxy.CreateTunnelPromise.tunnel(org.eclipse.jetty.client.HttpDestination,org.eclipse.jetty.client.api.Connection)", "org.eclipse.jetty.client.AuthenticationProtocolHandler.AuthenticationListener.onComplete(org.eclipse.jetty.client.api.Result)", "org.eclipse.jetty.client.ProxyConfiguration.Proxy.matches(org.eclipse.jetty.client.Origin)", "org.eclipse.jetty.client.AuthenticationProtocolHandler.AuthenticationListener.resolveURI(org.eclipse.jetty.client.HttpRequest,java.net.URI)"], "ttf": 2.000277777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/827"}, {"labels": ["Bug", "More Info Required"], "closed": "2016-11-01 20:30:16", "body": "Dear Team\n\nIn my application I am jetty websocket-client 9.2.18.v20160721 for websocket client implementation in my web application that is deployed over jboss.\nMy websocket server is running on tomcat-8.0.36.\nI close connection every 5 minute and create a new connection. \nEventually within 20 minutes all memory get consumed and gives me out of memory issue.\nI face this problem only with jetty and with other implementations(like tyrus, tomcat) this is not an issue.\nCan you please consider that defect and please provide some fix.\nI have tried other versions as well(e.g. 9.3.11.v20160721) but those are also having same issue.\n\nRegards\nNakul Vashishth\nSoftware Architect \n", "commits": {}, "title": "jetty websocket-client 9.2.18.v20160721 causing OutOfMemory", "created": "2016-08-04 13:54:49", "user": "nakulsir", "url": "https://github.com/eclipse/jetty.project/issues/813", "commitsDetails": [], "ttf": 89.00027777777778}, {"labels": ["Bug"], "closed": "2016-11-01 20:32:50", "body": "Project: jetty-server\nAffected versions: starting with Jetty 9.0.0\nContext: SSL termination proxy\n\n**Problem**:\nThe ForwardedRequestCustomizer sets the javax.servlet.request.cipher_suite attribute on the request, based on the forwarded cipher suite header, but does not set the key size attribute as well, as per servlet spec, 'SSL Attributes' section. \n\nFor example, in case of a forwarded request which contains the headers X-Forwarded-Proto = https, the cipher suite header and the ssl session id header, the request will be set to secure, will contain the cipher suite attribute and the ssl session id attribute, BUT not the key size attribute.\n\n**Possible fix**: in ForwardedRequestCustomizer, after the cipher suite attribute is set on the request, set also the key size attribute using: org.eclipse.jetty.util.ssl.SslContextFactory.deduceKeyLength(valueOfCipherSuiteHeader)\n", "commits": {}, "title": "The javax.servlet.request.key_size attribute is not set on the request by the ForwardedRequestCustomizer, as per servlet specification", "created": "2016-08-04 07:51:57", "user": "mariapetridean", "url": "https://github.com/eclipse/jetty.project/issues/810", "commitsDetails": [], "ttf": 89.00027777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "janbartel", "filteredCommits": ["144ac3dceaa9af573a87758ec0d5ccbb99c37a00"], "commits": {"144ac3dceaa9af573a87758ec0d5ccbb99c37a00": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2016-08-04 05:25:17", "commitsDetails": [{"commitMessage": "fix #809 avoid ignored NPE\n", "commitParents": ["ee3163bad810637aa1c7f76234302d24ac7fee37"], "commitHash": "144ac3dceaa9af573a87758ec0d5ccbb99c37a00", "commitSpoonAstDiffStats": [{"spoonFilePath": "WebInfConfiguration.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.WebInfConfiguration.getCanonicalNameForWebAppTmpDir(org.eclipse.jetty.webapp.WebAppContext)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 5, "TOT": 7}]}], "nameRev": "144ac3dceaa9af573a87758ec0d5ccbb99c37a00 tags/jetty-10.0.0.alpha1~705^2~257", "commitUser": "gregw", "authoredDateTime": "2016-08-05 11:46:19", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 59, "filePath": "jetty-webapp/src/main/java/org/eclipse/jetty/webapp/WebInfConfiguration.java", "insertions": 30, "deletions": 29}], "commitDateTime": "2016-08-05 11:46:19", "spoonStatsSkippedReason": ""}], "title": "NPE in WebInfConfiguration for webapp deploy in osgi", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0, "INS": 1, "UPD": 1, "MOV": 5, "TOT": 7, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 59, "insertions": 30, "gitFilesChange": 1, "deletions": 29}, "closed": "2016-08-05 07:02:04", "statsSkippedReason": "", "body": "Affects master only. Involves a bundle that contains 2 webapps. See TestJettyOSGiBootWebAppAsService.\n\njava.lang.NullPointerException\n    at org.eclipse.jetty.util.URIUtil.decodePath(URIUtil.java:320)\n    at org.eclipse.jetty.webapp.WebInfConfiguration.getCanonicalNameForWebAppTmpDir(WebInfConfiguration.java:516)\n    at org.eclipse.jetty.webapp.WebInfConfiguration.makeTempDirectory(WebInfConfiguration.java:239)\n    at org.eclipse.jetty.webapp.WebInfConfiguration.resolveTempDirectory(WebInfConfiguration.java:204)\n    at org.eclipse.jetty.webapp.WebInfConfiguration.preConfigure(WebInfConfiguration.java:59)\n    at org.eclipse.jetty.webapp.Configurations.preConfigure(Configurations.java:432)\n    at org.eclipse.jetty.webapp.WebAppContext.preConfigure(WebAppContext.java:511)\n    at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:536)\n    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\n    at org.eclipse.jetty.deploy.bindings.StandardStarter.processBinding(StandardStarter.java:41)\n    at org.eclipse.jetty.deploy.AppLifeCycle.runBindings(AppLifeCycle.java:188)\n    at org.eclipse.jetty.deploy.DeploymentManager.requestAppGoal(DeploymentManager.java:499)\n    at org.eclipse.jetty.deploy.DeploymentManager.addApp(DeploymentManager.java:147)\n    at org.eclipse.jetty.osgi.boot.ServiceWebAppProvider.serviceAdded(ServiceWebAppProvider.java:227)\n    at org.eclipse.jetty.osgi.boot.ServiceWebAppProvider$WebAppTracker.addingService(ServiceWebAppProvider.java:86)\n    at org.osgi.util.tracker.ServiceTracker$Tracked.customizerAdding(ServiceTracker.java:941)\n    at org.osgi.util.tracker.ServiceTracker$Tracked.customizerAdding(ServiceTracker.java:1)\n", "changesInPackagesGIT": ["jetty-webapp/src/main/java/org/eclipse/jetty/webapp"], "changesInPackagesSPOON": ["org.eclipse.jetty.webapp.WebInfConfiguration.getCanonicalNameForWebAppTmpDir(org.eclipse.jetty.webapp.WebAppContext)"], "ttf": 1.0002777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/809"}, {"labels": ["Bug"], "closed": "2016-08-10 22:01:12", "body": "", "commits": {}, "title": "Import statements for javax.servlet 4.0.0 broken in master", "created": "2016-08-03 09:40:42", "user": "janbartel", "url": "https://github.com/eclipse/jetty.project/issues/807", "commitsDetails": [], "ttf": 7.000277777777778}, {"labels": ["Bug"], "closed": "2016-08-12 03:24:55", "body": "When Jetty is doing chunked encoding and the client sets the request header `Connection: close`, Jetty writes out the response data and terminates the connection, but it fails to write the final empty chunk to signal the termination of the chunked response.\n\nThe missing data in hex is `30 0d 0a 0d 0a` for the terminating `0\\r\\n\\r\\n`\n\nSome clients (e.g. curl) appear to be okay with this and simply assume that whatever content they have received until the closed connection is the complete response. However, a client should not accept such a response: it has no way of knowing if the response completed successfully or if the connection was prematurely terminated.\n\nI discovered this issue on Jetty 9.2.15.v20160210\n", "commits": {}, "title": "Missing final empty chunk when closing connection", "created": "2016-08-03 00:24:32", "user": "cconroy", "url": "https://github.com/eclipse/jetty.project/issues/805", "commitsDetails": [], "ttf": 9.000277777777777}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug", "Documentation"], "user": "WalkerWatch", "filteredCommits": [], "commits": {"cdb00e81cbce7d48d9e8cd1cf8d6e80e2e2cb12a": {"commitUser": "jmcc0nn3ll", "commitGHEventType": "referenced"}}, "created": "2016-08-02 16:48:12", "commitsDetails": [{"commitMessage": "Merge pull request #803 from WalkerWatch/issues/802\n\nResolves #802", "commitParents": ["a7a52e04c9dd1ebbf5f470d897470cb5ca5bd6c7", "be54198b72644d7bf2ee004a734093c7a80c134c"], "commitHash": "cdb00e81cbce7d48d9e8cd1cf8d6e80e2e2cb12a", "commitSpoonAstDiffStats": [{"spoonFilePath": "StartArgs.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.start.StartArgs.parse(java.lang.String,java.lang.String,boolean)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "cdb00e81cbce7d48d9e8cd1cf8d6e80e2e2cb12a tags/jetty-9.4.0.M1~20^2~8", "commitUser": "jmcc0nn3ll", "authoredDateTime": "2016-08-02 14:47:52", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-start/src/main/java/org/eclipse/jetty/start/StartArgs.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2016-08-02 14:47:52", "spoonStatsSkippedReason": ""}], "title": "Warning for --add-to-startd is not complete in 9.4.x", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0, "insertions": 0, "gitFilesChange": 0, "deletions": 0}, "closed": "2016-08-03 00:37:57", "statsSkippedReason": "", "body": "Users are warned in 9.4.x that --add-to-startd is deprecated. The warning says to use \"     <module name>\", but does not tell them what command to actually use (--add-to-start).\n", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 0.0002777777777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/802"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "arhimondr", "filteredCommits": ["d57a11668dd8998c4fb38a58e4f1354fb2526d0f"], "commits": {"d57a11668dd8998c4fb38a58e4f1354fb2526d0f": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2016-08-01 18:46:11", "commitsDetails": [{"commitMessage": "Issue #798 Sporadic async IO failure\n", "commitParents": ["a1885afff8745fd4b7131616bb0a6dd55426125d"], "commitHash": "d57a11668dd8998c4fb38a58e4f1354fb2526d0f", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpOutput.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpOutput.AsyncWrite", "DEL": 3, "INS": 2, "UPD": 2, "MOV": 0, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.server.HttpOutput.AsyncWrite.process()", "DEL": 0, "INS": 0, "UPD": 5, "MOV": 0, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.server.HttpOutput.write(java.nio.ByteBuffer)", "DEL": 1, "INS": 1, "UPD": 7, "MOV": 2, "TOT": 11}, {"spoonMethodName": "org.eclipse.jetty.server.HttpOutput.AsyncFlush", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpOutput.isLastContentToWrite(int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpOutput.AsyncWrite.onCompleteSuccess()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpOutput.AsyncICB", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.HttpOutput.write(byte[],int,int)", "DEL": 0, "INS": 1, "UPD": 9, "MOV": 3, "TOT": 13}, {"spoonMethodName": "org.eclipse.jetty.server.HttpOutput.AsyncICB.onCompleteSuccess()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "d57a11668dd8998c4fb38a58e4f1354fb2526d0f tags/jetty-9.4.0.M1~13^2~20", "commitUser": "gregw", "authoredDateTime": "2016-08-03 17:22:31", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 79, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpOutput.java", "insertions": 42, "deletions": 37}], "commitDateTime": "2016-08-03 17:22:31", "spoonStatsSkippedReason": ""}], "title": "async IO Write closed race", "spoonStatsSummary": {"spoonMethodsChanged": 9, "DEL": 5, "INS": 9, "UPD": 23, "MOV": 5, "TOT": 42, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 79, "insertions": 42, "gitFilesChange": 1, "deletions": 37}, "closed": "2016-08-03 13:40:22", "statsSkippedReason": "", "body": "1. `IllegalStateException` when setting write listener. `HttpOutput` is closed.\n   \n   ```\n   javax.servlet.ServletException: Error setting write listener on response: HttpOutput@7a697036{CLOSED}\n       at Main$AsyncServlet.doGet(Main.java:247)\n       at javax.servlet.http.HttpServlet.service(HttpServlet.java:687)\n       at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)\n       at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:845)\n       at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1689)\n       at Main$ErrorLogger.doFilter(Main.java:362)\n       at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1676)\n       at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:581)\n       at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1174)\n       at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:511)\n       at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1106)\n       at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\n       at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:134)\n       at org.eclipse.jetty.server.Server.handle(Server.java:518)\n       at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:314)\n       at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:253)\n       at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:273)\n       at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)\n       at org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:93)\n       at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceAndRun(ExecuteProduceConsume.java:246)\n       at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:156)\n       at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:654)\n       at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n       at java.lang.Thread.run(Thread.java:745)\n   Caused by: java.lang.IllegalStateException\n       at org.eclipse.jetty.server.HttpOutput.setWriteListener(HttpOutput.java:844)\n       at Main$AsyncServlet.doGet(Main.java:244)\n   ```\n2. `EofException`: Async closed.\n   \n   ```\n   On server:\n   \n   org.eclipse.jetty.io.EofException: Async closed\n       at org.eclipse.jetty.server.HttpOutput.closed(HttpOutput.java:248)\n       at org.eclipse.jetty.server.HttpOutput$AsyncWrite.onCompleteSuccess(HttpOutput.java:1131)\n       at org.eclipse.jetty.util.IteratingCallback.processing(IteratingCallback.java:325)\n       at org.eclipse.jetty.util.IteratingCallback.succeeded(IteratingCallback.java:365)\n       at org.eclipse.jetty.server.HttpConnection$SendCallback.onCompleteSuccess(HttpConnection.java:788)\n       at org.eclipse.jetty.util.IteratingCallback.processing(IteratingCallback.java:325)\n       at org.eclipse.jetty.util.IteratingCallback.succeeded(IteratingCallback.java:365)\n       at org.eclipse.jetty.io.WriteFlusher$PendingState.complete(WriteFlusher.java:269)\n       at org.eclipse.jetty.io.WriteFlusher.completeWrite(WriteFlusher.java:394)\n       at org.eclipse.jetty.io.SelectChannelEndPoint$3.run(SelectChannelEndPoint.java:107)\n       at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceAndRun(ExecuteProduceConsume.java:246)\n       at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:156)\n       at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:654)\n       at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n       at java.lang.Thread.run(Thread.java:745)\n   ```\n   \n   ```\n   On client:\n   \n   java.io.EOFException: reached end of stream after reading 5000075 bytes; 10000150 bytes expected\n       at com.google.common.io.ByteStreams.readFully(ByteStreams.java:643)\n       at com.google.common.io.ByteStreams.readFully(ByteStreams.java:622)\n       at Main.executeGet(Main.java:116)\n       at Main.access$100(Main.java:57)\n       at Main$ExecuteRequestTask.call(Main.java:177)\n       at Main$ExecuteRequestTask.call(Main.java:146)\n       at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n       at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n       at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n       at java.lang.Thread.run(Thread.java:745)\n   ```\n3. Read timeouts on the client side. Seems that server just stops to send response.\n   \n   ```\n   Request failed: /async?584054021 60120ms\n   java.net.SocketTimeoutException: Read timed out\n       at java.net.SocketInputStream.socketRead0(Native Method)\n       at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)\n       at java.net.SocketInputStream.read(SocketInputStream.java:170)\n       at java.net.SocketInputStream.read(SocketInputStream.java:141)\n       at java.io.BufferedInputStream.read1(BufferedInputStream.java:284)\n       at java.io.BufferedInputStream.read(BufferedInputStream.java:345)\n       at sun.net.www.MeteredStream.read(MeteredStream.java:134)\n       at java.io.FilterInputStream.read(FilterInputStream.java:133)\n       at sun.net.www.protocol.http.HttpURLConnection$HttpInputStream.read(HttpURLConnection.java:3336)\n       at com.google.common.io.ByteStreams.read(ByteStreams.java:733)\n       at com.google.common.io.ByteStreams.readFully(ByteStreams.java:641)\n       at com.google.common.io.ByteStreams.readFully(ByteStreams.java:622)\n       at Main.executeGet(Main.java:116)\n       at Main.access$100(Main.java:57)\n       at Main$ExecuteRequestTask.call(Main.java:177)\n       at Main$ExecuteRequestTask.call(Main.java:146)\n       at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n       at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n       at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n       at java.lang.Thread.run(Thread.java:745)\n   ```\n4. Sometimes server returns 500 with no stacktrace on the server side\n   \n   ```\n   Request failed: /async?953102103 7ms\n   java.io.IOException: Server returned HTTP response code: 500 for URL: http://127.0.0.1:8989/async?953102103\n       at sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1840)\n       at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1441)\n       at Main.executeGet(Main.java:112)\n       at Main.access$100(Main.java:57)\n       at Main$ExecuteRequestTask.call(Main.java:177)\n       at Main$ExecuteRequestTask.call(Main.java:146)\n       at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n       at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n       at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n       at java.lang.Thread.run(Thread.java:745)\n   ```\n5. Request lifecycle violation\n   \n   ```\n   org.eclipse.jetty.io.EofException: request lifecycle violation\n   at org.eclipse.jetty.server.HttpConnection$SendCallback.process(HttpConnection.java:703)\n   at org.eclipse.jetty.util.IteratingCallback.processing(IteratingCallback.java:241)\n   at org.eclipse.jetty.util.IteratingCallback.iterate(IteratingCallback.java:224)\n   at org.eclipse.jetty.server.HttpConnection.send(HttpConnection.java:521)\n   at org.eclipse.jetty.server.HttpChannel.sendResponse(HttpChannel.java:706)\n   at org.eclipse.jetty.server.HttpChannel.write(HttpChannel.java:755)\n   at org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:179)\n   at org.eclipse.jetty.server.HttpOutput$AsyncWrite.process(HttpOutput.java:1076)\n   at org.eclipse.jetty.util.IteratingCallback.processing(IteratingCallback.java:241)\n   at org.eclipse.jetty.util.IteratingCallback.iterate(IteratingCallback.java:224)\n   at org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:372)\n   at Main$AsyncWriteListener.onWritePossible(Main.java:274)\n   at org.eclipse.jetty.server.HttpOutput.run(HttpOutput.java:934)\n   at org.eclipse.jetty.server.handler.ContextHandler.handle(ContextHandler.java:1286)\n   at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:427)\n   at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:253)\n   at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:273)\n   at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)\n   at org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:93)\n   at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.executeProduceConsume(ExecuteProduceConsume.java:303)\n   at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume(ExecuteProduceConsume.java:148)\n   at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:136)\n   at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:671)\n   at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:589)\n   at java.lang.Thread.run(Thread.java:745)\n   ```\n6. `IllegalStateException`, `onCompleteSuccess`\n   \n   ```\n   2016-08-01 20:58:40.959:WARN:oejut.QueuedThreadPool:http-worker-21: \n   java.lang.IllegalStateException\n   at org.eclipse.jetty.server.HttpOutput$AsyncICB.onCompleteSuccess(HttpOutput.java:993)\n   at org.eclipse.jetty.server.HttpOutput$AsyncWrite.onCompleteSuccess(HttpOutput.java:1129)\n   at org.eclipse.jetty.util.IteratingCallback.processing(IteratingCallback.java:325)\n   at org.eclipse.jetty.util.IteratingCallback.succeeded(IteratingCallback.java:365)\n   at org.eclipse.jetty.server.HttpConnection$SendCallback.onCompleteSuccess(HttpConnection.java:788)\n   at org.eclipse.jetty.util.IteratingCallback.processing(IteratingCallback.java:325)\n   at org.eclipse.jetty.util.IteratingCallback.succeeded(IteratingCallback.java:365)\n   at org.eclipse.jetty.io.WriteFlusher$PendingState.complete(WriteFlusher.java:269)\n   at org.eclipse.jetty.io.WriteFlusher.completeWrite(WriteFlusher.java:394)\n   at org.eclipse.jetty.io.SelectChannelEndPoint$3.run(SelectChannelEndPoint.java:107)\n   at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.executeProduceConsume(ExecuteProduceConsume.java:303)\n   at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume(ExecuteProduceConsume.java:148)\n   at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:136)\n   at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:671)\n   at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:589)\n   at java.lang.Thread.run(Thread.java:745)\n   2016-08-01 20:58:40.960:WARN:oejut.QueuedThreadPool:http-worker-21: Unexpected thread death: org.eclipse.jetty.util.thread.QueuedThreadPool$2@72ab6156 in http-worker{STARTED,20<=20<=200,i=11,q=2}\n   ```\n\nTested on:\n- Jetty:  `9.3.9.M1`, `9.3.11.M0`, `9.3.11.v20160721`\n- Java:\n  `\n  java -version\n  java version \"1.8.0_101\"\n  Java(TM) SE Runtime Environment (build 1.8.0_101-b13)\n  Java HotSpot(TM) 64-Bit Server VM (build 25.101-b13, mixed mode)\n  `\n\nStress test source: https://github.com/arhimondr/jetty-async-io/blob/master/src/main/java/Main.java\n\nWhen using synchronous IO in the same test  - everything works fine.\n", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.HttpOutput.AsyncWrite", "org.eclipse.jetty.server.HttpOutput.AsyncWrite.process()", "org.eclipse.jetty.server.HttpOutput.write(java.nio.ByteBuffer)", "org.eclipse.jetty.server.HttpOutput.AsyncFlush", "org.eclipse.jetty.server.HttpOutput.isLastContentToWrite(int)", "org.eclipse.jetty.server.HttpOutput.AsyncWrite.onCompleteSuccess()", "org.eclipse.jetty.server.HttpOutput.AsyncICB", "org.eclipse.jetty.server.HttpOutput.write(byte[],int,int)", "org.eclipse.jetty.server.HttpOutput.AsyncICB.onCompleteSuccess()"], "ttf": 1.0002777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/798"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "mbechler", "filteredCommits": ["53a1b8f995ba95a3f4e2de2eb904ad46776c7fba", "4b920622d5c54da508c7d6473f29e6854a6f7669"], "commits": {"4b920622d5c54da508c7d6473f29e6854a6f7669": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "53a1b8f995ba95a3f4e2de2eb904ad46776c7fba": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "a9653e2f49e96374cc0ae5188c7b27a47d03f229": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2016-08-01 11:55:37", "commitsDetails": [{"commitMessage": "Issue #797\n", "commitParents": ["d57a11668dd8998c4fb38a58e4f1354fb2526d0f"], "commitHash": "4b920622d5c54da508c7d6473f29e6854a6f7669", "commitSpoonAstDiffStats": [{"spoonFilePath": "TestJettyOSGiBootWebAppAsService.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.osgi.test.TestJettyOSGiBootWebAppAsService.testBundle()", "DEL": 0, "INS": 4, "UPD": 0, "MOV": 0, "TOT": 4}]}, {"spoonFilePath": "Activator.java", "spoonMethods": [{"spoonMethodName": "com.acme.osgi.Activator.start(org.osgi.framework.BundleContext)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "com.acme.osgi.Activator.TestServlet", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "MimeTypes.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.MimeTypes", "DEL": 6, "INS": 7, "UPD": 28, "MOV": 19, "TOT": 60}]}], "nameRev": "4b920622d5c54da508c7d6473f29e6854a6f7669 tags/jetty-9.4.0.M1~13^2~19", "commitUser": "janbartel", "authoredDateTime": "2016-08-03 18:33:53", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 49, "filePath": "jetty-osgi/test-jetty-osgi-webapp/src/main/java/com/acme/osgi/Activator.java", "insertions": 32, "deletions": 17}, {"lines": 5, "filePath": "jetty-osgi/test-jetty-osgi/src/test/java/org/eclipse/jetty/osgi/test/TestJettyOSGiBootWebAppAsService.java", "insertions": 5, "deletions": 0}, {"lines": 85, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/MimeTypes.java", "insertions": 29, "deletions": 56}, {"lines": 1, "filePath": "jetty-osgi/test-jetty-osgi-webapp/pom.xml", "insertions": 1, "deletions": 0}], "commitDateTime": "2016-08-03 18:33:53", "spoonStatsSkippedReason": ""}, {"commitMessage": "OSGI MimeTypes resource #797\n\nPass MimeTypes.class as the classloader source.  \nNo unit test to confirm the fix.", "commitParents": ["6516ee12661e2702e9b7ad96c6e3c4988ebf3c2c"], "commitHash": "53a1b8f995ba95a3f4e2de2eb904ad46776c7fba", "commitSpoonAstDiffStats": [{"spoonFilePath": "MimeTypes.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.MimeTypes", "DEL": 2, "INS": 0, "UPD": 2, "MOV": 2, "TOT": 6}]}], "nameRev": "53a1b8f995ba95a3f4e2de2eb904ad46776c7fba tags/jetty-9.4.0.M1~13^2~25", "commitUser": "gregw", "authoredDateTime": "2016-08-02 12:48:50", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 4, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/MimeTypes.java", "insertions": 2, "deletions": 2}], "commitDateTime": "2016-08-02 12:48:50", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #797\n\nUse MimeTypes.class.getClassLoader to load properties.\n", "commitParents": ["c1694ba9c377b8f648071375875a957b19bca3ba"], "commitHash": "a9653e2f49e96374cc0ae5188c7b27a47d03f229", "commitSpoonAstDiffStats": [{"spoonFilePath": "MimeTypes.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.MimeTypes", "DEL": 2, "INS": 2, "UPD": 18, "MOV": 18, "TOT": 40}]}], "nameRev": "a9653e2f49e96374cc0ae5188c7b27a47d03f229 tags/jetty-9.4.0.M1~13^2~9", "commitUser": "janbartel", "authoredDateTime": "2016-08-10 12:07:29", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 95, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/MimeTypes.java", "insertions": 64, "deletions": 31}], "commitDateTime": "2016-08-10 12:07:29", "spoonStatsSkippedReason": ""}], "title": "MimeTypes resource loading incorrect on OSGi", "spoonStatsSummary": {"spoonMethodsChanged": 3, "DEL": 8, "INS": 9, "UPD": 30, "MOV": 21, "TOT": 68, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 138, "insertions": 63, "gitFilesChange": 2, "deletions": 75}, "closed": "2016-08-10 02:17:44", "statsSkippedReason": "", "body": "Starting with 9.3.11 (#723) fails to load the bundled mime type resources in OSGI and logs two warnings.\n\nThe new code seems to load the resources through HashMap's (== bootstrap, with Loader falling back to system) classloader with is quite obviously wrong and should be MimeTypes.class or something like that.\n", "changesInPackagesGIT": ["jetty-osgi/test-jetty-osgi-webapp/src/main/java/com/acme/osgi", "jetty-http/src/main/java/org/eclipse/jetty/http"], "changesInPackagesSPOON": ["com.acme.osgi.Activator.TestServlet", "org.eclipse.jetty.http.MimeTypes", "com.acme.osgi.Activator.start(org.osgi.framework.BundleContext)"], "ttf": 8.000277777777777, "numCommits": 2, "url": "https://github.com/eclipse/jetty.project/issues/797"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "janbartel", "filteredCommits": ["6a17019235ec20df169ecafd652b1f016b5051af"], "commits": {"6a17019235ec20df169ecafd652b1f016b5051af": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2016-07-28 02:15:01", "commitsDetails": [{"commitMessage": "Issue  #785\n", "commitParents": ["c9842c7794d0594cd445cf1279438b21f844ab15"], "commitHash": "6a17019235ec20df169ecafd652b1f016b5051af", "commitSpoonAstDiffStats": [{"spoonFilePath": "JettyRunWarExplodedMojo.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.maven.plugin.JettyRunWarExplodedMojo.configureScanner()", "DEL": 3, "INS": 9, "UPD": 0, "MOV": 13, "TOT": 25}]}, {"spoonFilePath": "JettyRunMojo.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.maven.plugin.JettyRunMojo.gatherScannables()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 2, "TOT": 4}]}], "nameRev": "6a17019235ec20df169ecafd652b1f016b5051af tags/jetty-9.4.0.M1~35^2~5", "commitUser": "janbartel", "authoredDateTime": "2016-07-28 15:36:02", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 28, "filePath": "jetty-maven-plugin/src/main/java/org/eclipse/jetty/maven/plugin/JettyRunWarExplodedMojo.java", "insertions": 19, "deletions": 9}, {"lines": 4, "filePath": "jetty-maven-plugin/src/main/java/org/eclipse/jetty/maven/plugin/JettyRunMojo.java", "insertions": 2, "deletions": 2}], "commitDateTime": "2016-07-28 15:36:02", "spoonStatsSkippedReason": ""}], "title": "jetty-maven-plugin requires target/classes", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 3, "INS": 11, "UPD": 0, "MOV": 15, "TOT": 29, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 32, "insertions": 21, "gitFilesChange": 2, "deletions": 11}, "closed": "2016-07-28 05:39:38", "statsSkippedReason": "", "body": "This is a regression. The jetty-maven-plugin needs target/classes to exist to put it on the watch list for changes, however it is perfectly acceptable to have a webapp that contains only static content and thus no classes.  The regression was introduced when switching from the o.e.j.util.Scanner class to the o.e.j.u.PathWatcher class.\n", "changesInPackagesGIT": ["jetty-maven-plugin/src/main/java/org/eclipse/jetty/maven/plugin"], "changesInPackagesSPOON": ["org.eclipse.jetty.maven.plugin.JettyRunMojo.gatherScannables()", "org.eclipse.jetty.maven.plugin.JettyRunWarExplodedMojo.configureScanner()"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/785"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug", "More Info Required"], "user": "joakime", "filteredCommits": ["c9842c7794d0594cd445cf1279438b21f844ab15"], "commits": {"c9842c7794d0594cd445cf1279438b21f844ab15": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2016-07-27 22:33:06", "commitsDetails": [{"commitMessage": "Issue #784\n\nAdd a unit test to try to reproduce.\n", "commitParents": ["44f64419d81c91a5c6fa741df94e84b03ba0edbb"], "commitHash": "c9842c7794d0594cd445cf1279438b21f844ab15", "commitSpoonAstDiffStats": [{"spoonFilePath": "RedirectSessionTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.session.RedirectSessionTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "c9842c7794d0594cd445cf1279438b21f844ab15 tags/jetty-9.4.0.M1~35^2~6", "commitUser": "janbartel", "authoredDateTime": "2016-07-28 15:04:40", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 114, "filePath": "tests/test-sessions/test-hash-sessions/src/test/java/org/eclipse/jetty/server/session/RedirectSessionTest.java", "insertions": 114, "deletions": 0}], "commitDateTime": "2016-07-28 15:04:40", "spoonStatsSkippedReason": ""}], "title": "JSP Session updated before sendRedirect() lose their information", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0, "insertions": 0, "gitFilesChange": 0, "deletions": 0}, "closed": "2016-08-10 21:59:25", "statsSkippedReason": "", "body": "Take the following example:\n\n**initial.jsp**\n\n``` jsp\n<%\n    session.setAttribute(\"foo\", \"hello\");\n    response.sendRedirect(\"/alt.jsp\");\n%>\n```\n\n**alt.jsp**\n\n``` jsp\n<%@page contentType=\"text/plain\" %>\nsess[\"foo\"]=<%=session.getAttribute(\"foo\")%>\n```\n\nSome facts:\n- When you hit `/initial.jsp` a 302 redirect is issued to `/alt.jsp`.\n- When `alt.jsp` is executed, the session attribute `\"foo\"` is `<null>`.\n- The 302 redirect response is missing the `jsessionid` cookie\n", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 13.000277777777777, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/784"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug", "Enhancement"], "user": "Artur-", "filteredCommits": ["c033a3734b6c50270f6dff2fcf6a98d1c7712bf7"], "commits": {"c033a3734b6c50270f6dff2fcf6a98d1c7712bf7": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2016-07-27 20:12:23", "commitsDetails": [{"commitMessage": "Issue #783\n\nAdd loggable exception; remove unused code\n", "commitParents": ["5ef8d50bfbcef85cd97419831ff8beda2b537a81"], "commitHash": "c033a3734b6c50270f6dff2fcf6a98d1c7712bf7", "commitSpoonAstDiffStats": [{"spoonFilePath": "AnnotationParser.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.annotations.AnnotationParser.parseJar(java.util.Set,org.eclipse.jetty.util.resource.Resource,org.eclipse.jetty.annotations.ClassNameResolver)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "c033a3734b6c50270f6dff2fcf6a98d1c7712bf7 tags/jetty-9.4.0.M1~13^2~1", "commitUser": "janbartel", "authoredDateTime": "2016-08-11 08:15:45", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 38, "filePath": "jetty-annotations/src/main/java/org/eclipse/jetty/annotations/AnnotationParser.java", "insertions": 6, "deletions": 32}], "commitDateTime": "2016-08-11 08:15:45", "spoonStatsSkippedReason": ""}], "title": "Report name of broken jar file", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 38, "insertions": 6, "gitFilesChange": 1, "deletions": 32}, "closed": "2016-08-10 22:17:47", "statsSkippedReason": "", "body": "If you have corrupt jar file in your project, Jetty will fail to start with e.g.\n\n```\njava.util.zip.ZipException: invalid distance too far back\n    at java.util.zip.InflaterInputStream.read(InflaterInputStream.java:164)\n    at java.util.zip.ZipInputStream.read(ZipInputStream.java:194)\n    at java.util.jar.JarInputStream.read(JarInputStream.java:207)\n    at java.util.zip.ZipInputStream.closeEntry(ZipInputStream.java:140)\n    at java.util.zip.ZipInputStream.getNextEntry(ZipInputStream.java:118)\n    at java.util.jar.JarInputStream.getNextEntry(JarInputStream.java:142)\n    at java.util.jar.JarInputStream.getNextJarEntry(JarInputStream.java:179)\n    at org.eclipse.jetty.annotations.AnnotationParser.parseJar(AnnotationParser.java:939)\n    at org.eclipse.jetty.annotations.AnnotationParser.parse(AnnotationParser.java:851)\n```\n\nIf this exception message contained also the invalid JAR file, it would help a lot when trying to hunt it down.\n\nTested with 9.3.11.v20160721\n", "changesInPackagesGIT": ["jetty-annotations/src/main/java/org/eclipse/jetty/annotations"], "changesInPackagesSPOON": ["org.eclipse.jetty.annotations.AnnotationParser.parseJar(java.util.Set,org.eclipse.jetty.util.resource.Resource,org.eclipse.jetty.annotations.ClassNameResolver)"], "ttf": 14.000277777777777, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/783"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "janbartel", "filteredCommits": ["2f1d2dac729d1d08258fe67ecc7a8af22be221ec"], "commits": {"2f1d2dac729d1d08258fe67ecc7a8af22be221ec": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "a415e72e2d24af2bcd4be77a73fcd298897a4dd2": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2016-07-21 07:18:51", "commitsDetails": [{"commitMessage": "Fixed Debug NPE #754\n", "commitParents": ["4cd51c43a179a26d918bbe96bdb2acb055ba1327"], "commitHash": "2f1d2dac729d1d08258fe67ecc7a8af22be221ec", "commitSpoonAstDiffStats": [{"spoonFilePath": "CachedContentFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.CachedContentFactory.CachedHttpContent", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.CachedContentFactory.CachedHttpContent.toString()", "DEL": 1, "INS": 0, "UPD": 2, "MOV": 1, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.server.CachedContentFactory", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "2f1d2dac729d1d08258fe67ecc7a8af22be221ec tags/jetty-9.4.0.M1~44", "commitUser": "gregw", "authoredDateTime": "2016-07-27 17:46:41", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 6, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/CachedContentFactory.java", "insertions": 4, "deletions": 2}], "commitDateTime": "2016-07-27 17:46:41", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixed Debug NPE #754\n\nFixed the fix\n", "commitParents": ["1f949d509bd0a9f253724c1567f37108774eb050"], "commitHash": "a415e72e2d24af2bcd4be77a73fcd298897a4dd2", "commitSpoonAstDiffStats": [{"spoonFilePath": "ResourceService.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ResourceService.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "DefaultServletTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.DefaultServletTest.testListingProperUrlEncoding()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlet.DefaultServletTest.testBrotli()", "DEL": 0, "INS": 0, "UPD": 8, "MOV": 0, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.servlet.DefaultServletTest.testListingContextBreakout()", "DEL": 1, "INS": 1, "UPD": 18, "MOV": 2, "TOT": 22}, {"spoonMethodName": "org.eclipse.jetty.servlet.DefaultServletTest.testWelcomeExactServlet()", "DEL": 0, "INS": 0, "UPD": 5, "MOV": 0, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.servlet.DefaultServletTest.testGzip()", "DEL": 0, "INS": 0, "UPD": 8, "MOV": 0, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.servlet.DefaultServletTest.testWelcome()", "DEL": 0, "INS": 0, "UPD": 5, "MOV": 0, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.servlet.DefaultServletTest.testCachedBrotli()", "DEL": 0, "INS": 0, "UPD": 7, "MOV": 0, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.servlet.DefaultServletTest.testIfModified(java.lang.String)", "DEL": 0, "INS": 0, "UPD": 7, "MOV": 0, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.servlet.DefaultServletTest.testCustomCompressionFormats()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.DefaultServletTest.testListingXSS()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.DefaultServletTest.testWelcomeServlet()", "DEL": 0, "INS": 0, "UPD": 5, "MOV": 0, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.servlet.DefaultServletTest.testDirectFromResourceHttpContent()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.DefaultServletTest.testCachedGzip()", "DEL": 0, "INS": 1, "UPD": 7, "MOV": 0, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.servlet.DefaultServletTest.testListingWithSession()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.DefaultServletTest.testSymLinks()", "DEL": 0, "INS": 0, "UPD": 13, "MOV": 0, "TOT": 13}, {"spoonMethodName": "org.eclipse.jetty.servlet.DefaultServletTest.testFiltered()", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.servlet.DefaultServletTest.testRangeRequests()", "DEL": 0, "INS": 0, "UPD": 9, "MOV": 0, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.servlet.DefaultServletTest.testDefaultBrotliOverGzip()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlet.DefaultServletTest.testIfETag(java.lang.String)", "DEL": 0, "INS": 0, "UPD": 9, "MOV": 0, "TOT": 9}]}, {"spoonFilePath": "CachedContentFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.CachedContentFactory.CachedHttpContent.getPrecompressedContents()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 1, "TOT": 3}]}], "nameRev": "a415e72e2d24af2bcd4be77a73fcd298897a4dd2 tags/jetty-9.4.0.M1~38", "commitUser": "gregw", "authoredDateTime": "2016-07-28 18:29:21", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/ResourceService.java", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/CachedContentFactory.java", "insertions": 1, "deletions": 1}, {"lines": 227, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/DefaultServletTest.java", "insertions": 114, "deletions": 113}], "commitDateTime": "2016-07-28 18:29:21", "spoonStatsSkippedReason": ""}], "title": "NPE in CachedContentFactory if DEBUG enabled", "spoonStatsSummary": {"spoonMethodsChanged": 3, "DEL": 2, "INS": 2, "UPD": 2, "MOV": 1, "TOT": 7, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 6, "insertions": 4, "gitFilesChange": 1, "deletions": 2}, "closed": "2016-07-27 07:50:16", "statsSkippedReason": "", "body": "if DEBUG log level is enabled, and there is no precompressed content for a static resource line the CachedContentFactory.toString() method throws a NullPointerException (because _precompressed is null).\n", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.CachedContentFactory.CachedHttpContent.toString()", "org.eclipse.jetty.server.CachedContentFactory.CachedHttpContent", "org.eclipse.jetty.server.CachedContentFactory"], "ttf": 6.000277777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/754"}, {"labels": ["Bug"], "closed": "2016-07-21 03:02:35", "body": "Using java 1.8.0_77-b03 :\n\n```\ngregw@Tile440: ~/src/jetty-9.3.x/jetty-http2/http2-alpn-tests (jetty-9.3.x)\n[2105] mvn\n[INFO] Scanning for projects...\n[INFO]                                                                         \n[INFO] ------------------------------------------------------------------------\n[INFO] Building Jetty :: HTTP2 :: ALPN Tests 9.3.11-SNAPSHOT\n[INFO] ------------------------------------------------------------------------\n[INFO] \n[INFO] --- build-helper-maven-plugin:1.5:parse-version (set-osgi-version) @ http2-alpn-tests ---\n[INFO] \n[INFO] --- maven-enforcer-plugin:1.1:enforce (enforce-java) @ http2-alpn-tests ---\n[INFO] \n[INFO] --- maven-enforcer-plugin:1.1:enforce (ban-junit-dep.jar) @ http2-alpn-tests ---\n[INFO] \n[INFO] --- maven-remote-resources-plugin:1.2:process (default) @ http2-alpn-tests ---\n[INFO] Setting property: classpath.resource.loader.class => 'org.codehaus.plexus.velocity.ContextClassLoaderResourceLoader'.\n[INFO] Setting property: velocimacro.messages.on => 'false'.\n[INFO] Setting property: resource.loader => 'classpath'.\n[INFO] Setting property: resource.manager.logwhenfound => 'false'.\n[INFO] \n[INFO] --- maven-dependency-plugin:2.2:copy (copy) @ http2-alpn-tests ---\n[INFO] Configured Artifact: org.mortbay.jetty.alpn:alpn-boot:8.1.7.v20160121:jar\n[INFO] org.mortbay.jetty.alpn:alpn-boot:8.1.7.v20160121:jar already exists in /home/gregw/src/jetty-9.3.x/jetty-http2/http2-alpn-tests/target/alpn\n[INFO] \n[INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ http2-alpn-tests ---\n[debug] execute contextualize\n[INFO] Using 'UTF-8' encoding to copy filtered resources.\n[INFO] skip non existing resourceDirectory /home/gregw/src/jetty-9.3.x/jetty-http2/http2-alpn-tests/src/main/resources\n[INFO] Copying 1 resource\n[INFO] \n[INFO] --- jetty-version-maven-plugin:2.1:attach-version-text (attach-version) @ http2-alpn-tests ---\n[INFO] \n[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ http2-alpn-tests ---\n[INFO] No sources to compile\n[INFO] \n[INFO] >>> maven-pmd-plugin:3.4:check (named-logging-enforcement) > :pmd @ http2-alpn-tests >>>\n[INFO] \n[INFO] --- maven-pmd-plugin:3.4:pmd (pmd) @ http2-alpn-tests ---\n[INFO] \n[INFO] <<< maven-pmd-plugin:3.4:check (named-logging-enforcement) < :pmd @ http2-alpn-tests <<<\n[INFO] \n[INFO] --- maven-pmd-plugin:3.4:check (named-logging-enforcement) @ http2-alpn-tests ---\n[INFO] \n[INFO] \n[INFO] >>> maven-source-plugin:2.1.2:jar (attach-sources) > generate-sources @ http2-alpn-tests >>>\n[INFO] \n[INFO] --- build-helper-maven-plugin:1.5:parse-version (set-osgi-version) @ http2-alpn-tests ---\n[INFO] \n[INFO] --- maven-enforcer-plugin:1.1:enforce (enforce-java) @ http2-alpn-tests ---\n[INFO] \n[INFO] --- maven-enforcer-plugin:1.1:enforce (ban-junit-dep.jar) @ http2-alpn-tests ---\n[INFO] \n[INFO] <<< maven-source-plugin:2.1.2:jar (attach-sources) < generate-sources @ http2-alpn-tests <<<\n[INFO] \n[INFO] --- maven-source-plugin:2.1.2:jar (attach-sources) @ http2-alpn-tests ---\n[INFO] about.html already added, skipping\n[INFO] Building jar: /home/gregw/src/jetty-9.3.x/jetty-http2/http2-alpn-tests/target/http2-alpn-tests-9.3.11-SNAPSHOT-sources.jar\n[INFO] about.html already added, skipping\n[INFO] \n[INFO] >>> maven-bundle-plugin:2.5.4:manifest (default) > process-classes @ http2-alpn-tests >>>\n[INFO] \n[INFO] --- build-helper-maven-plugin:1.5:parse-version (set-osgi-version) @ http2-alpn-tests ---\n[INFO] \n[INFO] --- maven-enforcer-plugin:1.1:enforce (enforce-java) @ http2-alpn-tests ---\n[INFO] \n[INFO] --- maven-enforcer-plugin:1.1:enforce (ban-junit-dep.jar) @ http2-alpn-tests ---\n[INFO] \n[INFO] --- maven-remote-resources-plugin:1.2:process (default) @ http2-alpn-tests ---\n[INFO] \n[INFO] --- maven-dependency-plugin:2.2:copy (copy) @ http2-alpn-tests ---\n[INFO] Configured Artifact: org.mortbay.jetty.alpn:alpn-boot:8.1.7.v20160121:jar\n[INFO] org.mortbay.jetty.alpn:alpn-boot:8.1.7.v20160121:jar already exists in /home/gregw/src/jetty-9.3.x/jetty-http2/http2-alpn-tests/target/alpn\n[INFO] \n[INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ http2-alpn-tests ---\n[debug] execute contextualize\n[INFO] Using 'UTF-8' encoding to copy filtered resources.\n[INFO] skip non existing resourceDirectory /home/gregw/src/jetty-9.3.x/jetty-http2/http2-alpn-tests/src/main/resources\n[INFO] Copying 1 resource\n[INFO] Copying 1 resource\n[INFO] \n[INFO] --- jetty-version-maven-plugin:2.1:attach-version-text (attach-version) @ http2-alpn-tests ---\n[INFO] \n[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ http2-alpn-tests ---\n[INFO] No sources to compile\n[INFO] \n[INFO] >>> maven-pmd-plugin:3.4:check (named-logging-enforcement) > :pmd @ http2-alpn-tests >>>\n[INFO] \n[INFO] --- maven-pmd-plugin:3.4:pmd (pmd) @ http2-alpn-tests ---\n[INFO] \n[INFO] <<< maven-pmd-plugin:3.4:check (named-logging-enforcement) < :pmd @ http2-alpn-tests <<<\n[INFO] \n[INFO] --- maven-pmd-plugin:3.4:check (named-logging-enforcement) @ http2-alpn-tests ---\n[INFO] \n[INFO] \n[INFO] >>> maven-source-plugin:2.1.2:jar (attach-sources) > generate-sources @ http2-alpn-tests >>>\n[INFO] \n[INFO] --- build-helper-maven-plugin:1.5:parse-version (set-osgi-version) @ http2-alpn-tests ---\n[INFO] \n[INFO] --- maven-enforcer-plugin:1.1:enforce (enforce-java) @ http2-alpn-tests ---\n[INFO] \n[INFO] --- maven-enforcer-plugin:1.1:enforce (ban-junit-dep.jar) @ http2-alpn-tests ---\n[INFO] \n[INFO] <<< maven-source-plugin:2.1.2:jar (attach-sources) < generate-sources @ http2-alpn-tests <<<\n[INFO] \n[INFO] --- maven-source-plugin:2.1.2:jar (attach-sources) @ http2-alpn-tests ---\n[INFO] about.html already added, skipping\n[INFO] about.html already added, skipping\n[INFO] about.html already added, skipping\n[INFO] \n[INFO] <<< maven-bundle-plugin:2.5.4:manifest (default) < process-classes @ http2-alpn-tests <<<\n[INFO] \n[INFO] --- maven-bundle-plugin:2.5.4:manifest (default) @ http2-alpn-tests ---\n[WARNING] Manifest org.eclipse.jetty.http2:http2-alpn-tests:jar:9.3.11-SNAPSHOT : Unused Export-Package instructions: [org.eclipse.jetty.http2.alpn.tests.*] \n[WARNING] Manifest org.eclipse.jetty.http2:http2-alpn-tests:jar:9.3.11-SNAPSHOT : Unused Import-Package instructions: [javax.servlet*, javax.transaction*, org.eclipse.jetty*] \n[INFO] \n[INFO] --- maven-resources-plugin:2.5:testResources (default-testResources) @ http2-alpn-tests ---\n[debug] execute contextualize\n[INFO] Using 'UTF-8' encoding to copy filtered resources.\n[INFO] Copying 3 resources\n[INFO] Copying 1 resource\n[INFO] \n[INFO] --- maven-compiler-plugin:3.3:testCompile (default-testCompile) @ http2-alpn-tests ---\n[INFO] Nothing to compile - all classes are up to date\n[INFO] \n[INFO] --- maven-surefire-plugin:2.18.1:test (default-test) @ http2-alpn-tests ---\n[INFO] Surefire report directory: /home/gregw/src/jetty-9.3.x/jetty-http2/http2-alpn-tests/target/surefire-reports\n\n-------------------------------------------------------\n T E S T S\n-------------------------------------------------------\nRunning org.eclipse.jetty.http2.alpn.tests.ALPNNegotiationTest\nRunning org.eclipse.jetty.http2.alpn.tests.ALPNNegotiationTest.testAbruptCloseDuringHandshake()\n2016-07-21 11:19:37.422:INFO::main: Logging initialized @449ms\n2016-07-21 11:19:37.594:INFO:oejs.Server:main: jetty-9.3.11-SNAPSHOT\n2016-07-21 11:19:37.695:INFO:oejus.SslContextFactory:main: x509=X509@5c7fa833(mykey,h=[],w=[]) for SslContextFactory@39aeed2f(file:///home/gregw/src/jetty-9.3.x/jetty-http2/http2-alpn-tests/src/test/resources/keystore.jks,file:///home/gregw/src/jetty-9.3.x/jetty-http2/http2-alpn-tests/src/test/resources/truststore.jks)\n2016-07-21 11:19:37.963:INFO:oejs.AbstractConnector:main: Started ServerConnector@76aa9eb3{SSL,[ssl, alpn, http/1.1, h2, h2-17, h2-16, h2-15, h2-14]}{0.0.0.0:37029}\n2016-07-21 11:19:37.963:INFO:oejs.Server:main: Started @991ms\n2016-07-21 11:19:37.966:INFO:oejus.SslContextFactory:main: x509=X509@140e5a13(mykey,h=[],w=[]) for SslContextFactory@3439f68d(file:///home/gregw/src/jetty-9.3.x/jetty-http2/http2-alpn-tests/src/test/resources/keystore.jks,file:///home/gregw/src/jetty-9.3.x/jetty-http2/http2-alpn-tests/src/test/resources/truststore.jks)\n[C] ALPN protocols [h2] for dbd940d[SSLEngine[hostname=127.0.0.1 port=37029] SSL_NULL_WITH_NULL_NULL]\n[S] ALPN protocols [h2] received from client for 1afb5592[SSLEngine[hostname=127.0.0.1 port=50384] SSL_NULL_WITH_NULL_NULL]\n2016-07-21 11:19:38.114:DBUG:oejhs.HTTP2ServerConnectionFactory:qtp110456297-10: proto=h2 tls=TLSv1.2 cipher=TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256 9.2.2-acceptable=true\n2016-07-21 11:19:38.115:DBUG:oejas.ALPNServerConnection:qtp110456297-10: ALPNServerConnection@60cf6f6f[DecryptedEndPoint@3019d377{/127.0.0.1:50384<->37029,Open,in,out,-,-,53/30000,ALPNServerConnection@60cf6f6f}->SelectChannelEndPoint@510b1d64{/127.0.0.1:50384<->37029,Open,in,out,-,-,54/30000,SslConnection@7951466b}{io=0/0,kio=0,kro=1}] protocol selected h2\n[S] ALPN protocol 'h2' selected for 1afb5592[SSLEngine[hostname=127.0.0.1 port=50384] SSL_NULL_WITH_NULL_NULL]\n2016-07-21 11:19:38.195:INFO:oejs.AbstractConnector:main: Stopped ServerConnector@76aa9eb3{SSL,[ssl, alpn, http/1.1, h2, h2-17, h2-16, h2-15, h2-14]}{0.0.0.0:0}\nRunning org.eclipse.jetty.http2.alpn.tests.ALPNNegotiationTest.testClientAdvertisingMultipleProtocolsServerSpeaksHTTPWhenNegotiated()\n2016-07-21 11:19:38.202:INFO:oejs.Server:main: jetty-9.3.11-SNAPSHOT\n2016-07-21 11:19:38.207:INFO:oejus.SslContextFactory:main: x509=X509@517cd4b(mykey,h=[],w=[]) for SslContextFactory@6cc7b4de(file:///home/gregw/src/jetty-9.3.x/jetty-http2/http2-alpn-tests/src/test/resources/keystore.jks,file:///home/gregw/src/jetty-9.3.x/jetty-http2/http2-alpn-tests/src/test/resources/truststore.jks)\n2016-07-21 11:19:38.234:INFO:oejs.AbstractConnector:main: Started ServerConnector@6356e82c{SSL,[ssl, alpn, http/1.1, h2, h2-17, h2-16, h2-15, h2-14]}{0.0.0.0:45724}\n2016-07-21 11:19:38.235:INFO:oejs.Server:main: Started @1263ms\n2016-07-21 11:19:38.237:INFO:oejus.SslContextFactory:main: x509=X509@679b62af(mykey,h=[],w=[]) for SslContextFactory@5cdd8682(file:///home/gregw/src/jetty-9.3.x/jetty-http2/http2-alpn-tests/src/test/resources/keystore.jks,file:///home/gregw/src/jetty-9.3.x/jetty-http2/http2-alpn-tests/src/test/resources/truststore.jks)\n[C] ALPN protocols [unknown/1.0, http/1.1] for 49c43f4e[SSL_NULL_WITH_NULL_NULL: Socket[addr=localhost/127.0.0.1,port=45724,localport=52888]]\n[S] ALPN protocols [unknown/1.0, http/1.1] received from client for 6f2d3408[SSLEngine[hostname=127.0.0.1 port=52888] SSL_NULL_WITH_NULL_NULL]\n2016-07-21 11:19:38.263:DBUG:oejas.ALPNServerConnection:qtp270397815-21: ALPNServerConnection@6d3d6aef[DecryptedEndPoint@63fa8938{/127.0.0.1:52888<->45724,Open,in,out,-,-,8/30000,ALPNServerConnection@6d3d6aef}->SelectChannelEndPoint@2a2fbf29{/127.0.0.1:52888<->45724,Open,in,out,-,-,4/30000,SslConnection@67c5019f}{io=0/0,kio=0,kro=1}] could not negotiate protocol: C[unknown/1.0, http/1.1] | S[HTTP/1.1, h2, h2, h2, h2, h2]\n2016-07-21 11:19:38.265:WARN:oejut.QueuedThreadPool:qtp270397815-21: \njava.lang.RuntimeException: Delegated task threw Exception/Error\n    at sun.security.ssl.Handshaker.checkThrown(Handshaker.java:1429)\n    at sun.security.ssl.SSLEngineImpl.checkTaskThrown(SSLEngineImpl.java:535)\n    at sun.security.ssl.SSLEngineImpl.readNetRecord(SSLEngineImpl.java:813)\n    at sun.security.ssl.SSLEngineImpl.unwrap(SSLEngineImpl.java:781)\n    at javax.net.ssl.SSLEngine.unwrap(SSLEngine.java:624)\n    at org.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.fill(SslConnection.java:525)\n    at org.eclipse.jetty.server.NegotiatingServerConnection.fill(NegotiatingServerConnection.java:153)\n    at org.eclipse.jetty.server.NegotiatingServerConnection.onFillable(NegotiatingServerConnection.java:98)\n    at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:273)\n    at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)\n    at org.eclipse.jetty.io.ssl.SslConnection.onFillable(SslConnection.java:202)\n    at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:273)\n    at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)\n    at org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:93)\n    at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.executeProduceConsume(ExecuteProduceConsume.java:303)\n    at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume(ExecuteProduceConsume.java:148)\n    at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:136)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:671)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool$1.run(QueuedThreadPool.java:589)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: \njava.lang.IllegalStateException\n    at org.eclipse.jetty.alpn.server.ALPNServerConnection.select(ALPNServerConnection.java:87)\n    at sun.security.ssl.ServerHandshaker.clientHello(ServerHandshaker.java:805)\n    at sun.security.ssl.ServerHandshaker.processMessage(ServerHandshaker.java:225)\n    at sun.security.ssl.Handshaker.processLoop(Handshaker.java:979)\n    at sun.security.ssl.Handshaker$1.run(Handshaker.java:919)\n    at sun.security.ssl.Handshaker$1.run(Handshaker.java:916)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at sun.security.ssl.Handshaker$DelegatedTask.run(Handshaker.java:1369)\n    at org.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.fill(SslConnection.java:630)\n    at org.eclipse.jetty.server.NegotiatingServerConnection.fill(NegotiatingServerConnection.java:153)\n    at org.eclipse.jetty.server.NegotiatingServerConnection.onFillable(NegotiatingServerConnection.java:98)\n    at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:273)\n    at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)\n    at org.eclipse.jetty.io.ssl.SslConnection.onFillable(SslConnection.java:202)\n    at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:273)\n    at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)\n    at org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:93)\n    at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.executeProduceConsume(ExecuteProduceConsume.java:303)\n    at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume(ExecuteProduceConsume.java:148)\n    at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:136)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:671)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool$1.run(QueuedThreadPool.java:589)\n    at java.lang.Thread.run(Thread.java:745)\n2016-07-21 11:19:38.279:WARN:oejut.QueuedThreadPool:qtp270397815-21: Unexpected thread death: org.eclipse.jetty.util.thread.QueuedThreadPool$1@22c78303 in qtp270397815{STARTED,8<=8<=200,i=4,q=0}\n2016-07-21 11:19:38.286:INFO:oejs.AbstractConnector:main: Stopped ServerConnector@6356e82c{SSL,[ssl, alpn, http/1.1, h2, h2-17, h2-16, h2-15, h2-14]}{0.0.0.0:0}\nRunning org.eclipse.jetty.http2.alpn.tests.ALPNNegotiationTest.testClientNotSupportingALPNServerSpeaksDefaultProtocol()\n2016-07-21 11:19:38.299:INFO:oejs.Server:main: jetty-9.3.11-SNAPSHOT\n2016-07-21 11:19:38.301:INFO:oejus.SslContextFactory:main: x509=X509@120d6fe6(mykey,h=[],w=[]) for SslContextFactory@4ba2ca36(file:///home/gregw/src/jetty-9.3.x/jetty-http2/http2-alpn-tests/src/test/resources/keystore.jks,file:///home/gregw/src/jetty-9.3.x/jetty-http2/http2-alpn-tests/src/test/resources/truststore.jks)\n2016-07-21 11:19:38.322:INFO:oejs.AbstractConnector:main: Started ServerConnector@13f7169d{SSL,[ssl, alpn, http/1.1, h2, h2-17, h2-16, h2-15, h2-14]}{0.0.0.0:39648}\n2016-07-21 11:19:38.323:INFO:oejs.Server:main: Started @1351ms\n2016-07-21 11:19:38.325:INFO:oejus.SslContextFactory:main: x509=X509@3444d69d(mykey,h=[],w=[]) for SslContextFactory@1372ed45(file:///home/gregw/src/jetty-9.3.x/jetty-http2/http2-alpn-tests/src/test/resources/keystore.jks,file:///home/gregw/src/jetty-9.3.x/jetty-http2/http2-alpn-tests/src/test/resources/truststore.jks)\n[C] ALPN not supported, no protocols for 6a79c292[SSL_NULL_WITH_NULL_NULL: Socket[addr=localhost/127.0.0.1,port=39648,localport=37688]]\n[S] ALPN not received for 5f165bf4[SSLEngine[hostname=127.0.0.1 port=37688] SSL_NULL_WITH_NULL_NULL]\n2016-07-21 11:19:38.416:DBUG:oejas.ALPNServerConnection:qtp673186785-33: ALPNServerConnection@3c7fc2f[DecryptedEndPoint@d001227{/127.0.0.1:37688<->39648,Open,in,out,-,-,72/30000,ALPNServerConnection@3c7fc2f}->SelectChannelEndPoint@1a14c6d2{/127.0.0.1:37688<->39648,Open,in,out,-,-,7/30000,SslConnection@93f975f}{io=0/0,kio=0,kro=1}] protocol selected HTTP/1.1\n[C] ALPN not supported by server for 6a79c292[SSL_NULL_WITH_NULL_NULL: Socket[addr=localhost/127.0.0.1,port=39648,localport=37688]]\n2016-07-21 11:19:38.507:INFO:oejs.AbstractConnector:main: Stopped ServerConnector@13f7169d{SSL,[ssl, alpn, http/1.1, h2, h2-17, h2-16, h2-15, h2-14]}{0.0.0.0:0}\nRunning org.eclipse.jetty.http2.alpn.tests.ALPNNegotiationTest.testClientAdvertisingHTTPServerSpeaksHTTP()\n2016-07-21 11:19:38.510:INFO:oejs.Server:main: jetty-9.3.11-SNAPSHOT\n2016-07-21 11:19:38.511:INFO:oejus.SslContextFactory:main: x509=X509@28c4711c(mykey,h=[],w=[]) for SslContextFactory@59717824(file:///home/gregw/src/jetty-9.3.x/jetty-http2/http2-alpn-tests/src/test/resources/keystore.jks,file:///home/gregw/src/jetty-9.3.x/jetty-http2/http2-alpn-tests/src/test/resources/truststore.jks)\n2016-07-21 11:19:38.515:INFO:oejs.AbstractConnector:main: Started ServerConnector@146044d7{SSL,[ssl, alpn, http/1.1, h2, h2-17, h2-16, h2-15, h2-14]}{0.0.0.0:36045}\n2016-07-21 11:19:38.516:INFO:oejs.Server:main: Started @1544ms\n2016-07-21 11:19:38.518:INFO:oejus.SslContextFactory:main: x509=X509@473b46c3(mykey,h=[],w=[]) for SslContextFactory@516be40f(file:///home/gregw/src/jetty-9.3.x/jetty-http2/http2-alpn-tests/src/test/resources/keystore.jks,file:///home/gregw/src/jetty-9.3.x/jetty-http2/http2-alpn-tests/src/test/resources/truststore.jks)\n[C] ALPN protocols [http/1.1] for 3c0a50da[SSL_NULL_WITH_NULL_NULL: Socket[addr=localhost/127.0.0.1,port=36045,localport=44894]]\n[S] ALPN protocols [http/1.1] received from client for 1a05821b[SSLEngine[hostname=127.0.0.1 port=44894] SSL_NULL_WITH_NULL_NULL]\n2016-07-21 11:19:38.526:DBUG:oejas.ALPNServerConnection:qtp1161667116-43: ALPNServerConnection@65163335[DecryptedEndPoint@6bd1c1e7{/127.0.0.1:44894<->36045,Open,in,out,-,-,2/30000,ALPNServerConnection@65163335}->SelectChannelEndPoint@5f07179f{/127.0.0.1:44894<->36045,Open,in,out,-,-,2/30000,SslConnection@6fee5845}{io=1/0,kio=1,kro=1}] could not negotiate protocol: C[http/1.1] | S[HTTP/1.1, h2, h2, h2, h2, h2]\n2016-07-21 11:19:38.527:WARN:oejut.QueuedThreadPool:qtp1161667116-43: \njava.lang.RuntimeException: Delegated task threw Exception/Error\n    at sun.security.ssl.Handshaker.checkThrown(Handshaker.java:1429)\n    at sun.security.ssl.SSLEngineImpl.checkTaskThrown(SSLEngineImpl.java:535)\n    at sun.security.ssl.SSLEngineImpl.readNetRecord(SSLEngineImpl.java:813)\n    at sun.security.ssl.SSLEngineImpl.unwrap(SSLEngineImpl.java:781)\n    at javax.net.ssl.SSLEngine.unwrap(SSLEngine.java:624)\n    at org.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.fill(SslConnection.java:525)\n    at org.eclipse.jetty.server.NegotiatingServerConnection.fill(NegotiatingServerConnection.java:153)\n    at org.eclipse.jetty.server.NegotiatingServerConnection.onFillable(NegotiatingServerConnection.java:98)\n    at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:273)\n    at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)\n    at org.eclipse.jetty.io.ssl.SslConnection.onFillable(SslConnection.java:202)\n    at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:273)\n    at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)\n    at org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:93)\n    at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.executeProduceConsume(ExecuteProduceConsume.java:303)\n    at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume(ExecuteProduceConsume.java:148)\n    at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:136)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:671)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool$1.run(QueuedThreadPool.java:589)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: \njava.lang.IllegalStateException\n    at org.eclipse.jetty.alpn.server.ALPNServerConnection.select(ALPNServerConnection.java:87)\n    at sun.security.ssl.ServerHandshaker.clientHello(ServerHandshaker.java:805)\n    at sun.security.ssl.ServerHandshaker.processMessage(ServerHandshaker.java:225)\n    at sun.security.ssl.Handshaker.processLoop(Handshaker.java:979)\n    at sun.security.ssl.Handshaker$1.run(Handshaker.java:919)\n    at sun.security.ssl.Handshaker$1.run(Handshaker.java:916)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at sun.security.ssl.Handshaker$DelegatedTask.run(Handshaker.java:1369)\n    at org.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.fill(SslConnection.java:630)\n    at org.eclipse.jetty.server.NegotiatingServerConnection.fill(NegotiatingServerConnection.java:153)\n    at org.eclipse.jetty.server.NegotiatingServerConnection.onFillable(NegotiatingServerConnection.java:98)\n    at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:273)\n    at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)\n    at org.eclipse.jetty.io.ssl.SslConnection.onFillable(SslConnection.java:202)\n    at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:273)\n    at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)\n    at org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:93)\n    at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.executeProduceConsume(ExecuteProduceConsume.java:303)\n    at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume(ExecuteProduceConsume.java:148)\n    at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:136)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:671)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool$1.run(QueuedThreadPool.java:589)\n    at java.lang.Thread.run(Thread.java:745)\n2016-07-21 11:19:38.528:WARN:oejut.QueuedThreadPool:qtp1161667116-43: Unexpected thread death: org.eclipse.jetty.util.thread.QueuedThreadPool$1@2aeccbdc in qtp1161667116{STARTED,8<=8<=200,i=4,q=0}\n2016-07-21 11:19:38.532:INFO:oejs.AbstractConnector:main: Stopped ServerConnector@146044d7{SSL,[ssl, alpn, http/1.1, h2, h2-17, h2-16, h2-15, h2-14]}{0.0.0.0:0}\nRunning org.eclipse.jetty.http2.alpn.tests.ALPNNegotiationTest.testGentleCloseDuringHandshake()\n2016-07-21 11:19:38.540:INFO:oejs.Server:main: jetty-9.3.11-SNAPSHOT\n2016-07-21 11:19:38.542:INFO:oejus.SslContextFactory:main: x509=X509@7364985f(mykey,h=[],w=[]) for SslContextFactory@5d20e46(file:///home/gregw/src/jetty-9.3.x/jetty-http2/http2-alpn-tests/src/test/resources/keystore.jks,file:///home/gregw/src/jetty-9.3.x/jetty-http2/http2-alpn-tests/src/test/resources/truststore.jks)\n2016-07-21 11:19:38.547:INFO:oejs.AbstractConnector:main: Started ServerConnector@5e05f7f4{SSL,[ssl, alpn, http/1.1, h2, h2-17, h2-16, h2-15, h2-14]}{0.0.0.0:38555}\n2016-07-21 11:19:38.547:INFO:oejs.Server:main: Started @1575ms\n2016-07-21 11:19:38.549:INFO:oejus.SslContextFactory:main: x509=X509@709ba3fb(mykey,h=[],w=[]) for SslContextFactory@3d36e4cd(file:///home/gregw/src/jetty-9.3.x/jetty-http2/http2-alpn-tests/src/test/resources/keystore.jks,file:///home/gregw/src/jetty-9.3.x/jetty-http2/http2-alpn-tests/src/test/resources/truststore.jks)\n[C] ALPN protocols [h2] for 6a472554[SSLEngine[hostname=127.0.0.1 port=38555] SSL_NULL_WITH_NULL_NULL]\n[S] ALPN protocols [h2] received from client for 4813f5c4[SSLEngine[hostname=127.0.0.1 port=41490] SSL_NULL_WITH_NULL_NULL]\n2016-07-21 11:19:38.570:DBUG:oejhs.HTTP2ServerConnectionFactory:qtp1684792003-54: proto=h2 tls=TLSv1.2 cipher=TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256 9.2.2-acceptable=true\n2016-07-21 11:19:38.571:DBUG:oejas.ALPNServerConnection:qtp1684792003-54: ALPNServerConnection@7f7e8817[DecryptedEndPoint@71b96988{/127.0.0.1:41490<->38555,Open,in,out,-,-,7/30000,ALPNServerConnection@7f7e8817}->SelectChannelEndPoint@d116a02{/127.0.0.1:41490<->38555,Open,in,out,-,-,7/30000,SslConnection@7586e367}{io=0/0,kio=0,kro=1}] protocol selected h2\n[S] ALPN protocol 'h2' selected for 4813f5c4[SSLEngine[hostname=127.0.0.1 port=41490] SSL_NULL_WITH_NULL_NULL]\n2016-07-21 11:19:38.583:INFO:oejs.AbstractConnector:main: Stopped ServerConnector@5e05f7f4{SSL,[ssl, alpn, http/1.1, h2, h2-17, h2-16, h2-15, h2-14]}{0.0.0.0:0}\nTests run: 5, Failures: 0, Errors: 2, Skipped: 0, Time elapsed: 1.187 sec <<< FAILURE! - in org.eclipse.jetty.http2.alpn.tests.ALPNNegotiationTest\ntestClientAdvertisingMultipleProtocolsServerSpeaksHTTPWhenNegotiated(org.eclipse.jetty.http2.alpn.tests.ALPNNegotiationTest)  Time elapsed: 0.094 sec  <<< ERROR!\njavax.net.ssl.SSLHandshakeException: Received fatal alert: no_application_protocol\n    at sun.security.ssl.Alerts.getSSLException(Alerts.java:203)\n    at sun.security.ssl.Alerts.getSSLException(Alerts.java:162)\n    at sun.security.ssl.SSLSocketImpl.recvAlert(SSLSocketImpl.java:2023)\n    at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:1125)\n    at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1375)\n    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1403)\n    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1387)\n    at org.eclipse.jetty.http2.alpn.tests.ALPNNegotiationTest.testClientAdvertisingMultipleProtocolsServerSpeaksHTTPWhenNegotiated(ALPNNegotiationTest.java:245)\n\ntestClientAdvertisingHTTPServerSpeaksHTTP(org.eclipse.jetty.http2.alpn.tests.ALPNNegotiationTest)  Time elapsed: 0.026 sec  <<< ERROR!\njavax.net.ssl.SSLHandshakeException: Received fatal alert: no_application_protocol\n    at sun.security.ssl.Alerts.getSSLException(Alerts.java:203)\n    at sun.security.ssl.Alerts.getSSLException(Alerts.java:162)\n    at sun.security.ssl.SSLSocketImpl.recvAlert(SSLSocketImpl.java:2023)\n    at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:1125)\n    at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1375)\n    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1403)\n    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1387)\n    at org.eclipse.jetty.http2.alpn.tests.ALPNNegotiationTest.testClientAdvertisingHTTPServerSpeaksHTTP(ALPNNegotiationTest.java:193)\n\n\nResults :\n\nTests in error: \n  ALPNNegotiationTest.testClientAdvertisingHTTPServerSpeaksHTTP:193 \u00bb SSLHandshake\n  ALPNNegotiationTest.testClientAdvertisingMultipleProtocolsServerSpeaksHTTPWhenNegotiated:245 \u00bb SSLHandshake\n\nTests run: 5, Failures: 0, Errors: 2, Skipped: 0\n```\n", "commits": {}, "title": "ALPN tests failing", "created": "2016-07-21 01:22:17", "user": "gregw", "url": "https://github.com/eclipse/jetty.project/issues/753", "commitsDetails": [], "ttf": 0.0002777777777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["3ea5c29ea633e1081ff1f7dc73e71737bce18523"], "commits": {"3ea5c29ea633e1081ff1f7dc73e71737bce18523": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2016-07-20 21:32:17", "commitsDetails": [{"commitMessage": "Fixes #749 - Invalid WebSocket Upgrade should result in error 400, not 405\n", "commitParents": ["0ecc8caff6fa7fd20c86d349b0f3d50dab13a841"], "commitHash": "3ea5c29ea633e1081ff1f7dc73e71737bce18523", "commitSpoonAstDiffStats": [{"spoonFilePath": "ServletUpgradeResponse.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse.sendForbidden(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse.complete()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse.sendError(int,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse.commitHeaders()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "3ea5c29ea633e1081ff1f7dc73e71737bce18523 tags/jetty-9.4.0.M1~32", "commitUser": "joakime", "authoredDateTime": "2016-08-01 10:06:22", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 10, "filePath": "jetty-websocket/websocket-servlet/src/main/java/org/eclipse/jetty/websocket/servlet/ServletUpgradeResponse.java", "insertions": 6, "deletions": 4}], "commitDateTime": "2016-08-01 10:06:22", "spoonStatsSkippedReason": ""}], "title": "Invalid WebSocket Upgrade should result in error 400, not 405", "spoonStatsSummary": {"spoonMethodsChanged": 4, "DEL": 0, "INS": 2, "UPD": 4, "MOV": 0, "TOT": 6, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 10, "insertions": 6, "gitFilesChange": 1, "deletions": 4}, "closed": "2016-08-01 17:09:14", "statsSkippedReason": "", "body": "java.lang.AssertionError: \nResponse Status Code\nExpected: is <400>\n     but: was <405>\n    at org.eclipse.jetty.websocket.server.WebSocketInvalidVersionTest.testRequestVersion29(WebSocketInvalidVersionTest.java:64)\n", "changesInPackagesGIT": ["jetty-websocket/websocket-servlet/src/main/java/org/eclipse/jetty/websocket/servlet"], "changesInPackagesSPOON": ["org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse.sendForbidden(java.lang.String)", "org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse.sendError(int,java.lang.String)", "org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse.complete()", "org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse.commitHeaders()"], "ttf": 11.000277777777777, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/749"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "poutsma", "filteredCommits": ["25341e9ac4f333d3b7342a94ba01ba1b3828fe51", "0433a8ca73f3178713c446bc0e8e9eeccc90e9f0"], "commits": {"25341e9ac4f333d3b7342a94ba01ba1b3828fe51": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "0433a8ca73f3178713c446bc0e8e9eeccc90e9f0": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2016-07-15 10:18:42", "commitsDetails": [{"commitMessage": "Calling onWritePossible in race with write #730\n\nThis commit cleans up the combination of the prior fix to #730 in 0433a8c\nand the prior cleanup in 86ff9f9.   More comments have been added to explain.\n", "commitParents": ["9071456f8fe76d91f3daa450640d8d06ffc9db86"], "commitHash": "25341e9ac4f333d3b7342a94ba01ba1b3828fe51", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpOutput.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpOutput.run()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.HttpOutput.close()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}]}], "nameRev": "25341e9ac4f333d3b7342a94ba01ba1b3828fe51 tags/jetty-9.4.0.M1~71", "commitUser": "gregw", "authoredDateTime": "2016-07-20 11:08:42", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 64, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpOutput.java", "insertions": 41, "deletions": 23}], "commitDateTime": "2016-07-20 11:10:52", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #730 - \"Slow\" client causes IllegalStateException.\n\nFixed by allowing state ASYNC to call onWritePossible().\n", "commitParents": ["a38e819907abcb78bcca6ebd4f6dce27ccc8bf50"], "commitHash": "0433a8ca73f3178713c446bc0e8e9eeccc90e9f0", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpOutput.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpOutput.run()", "DEL": 0, "INS": 1, "UPD": 2, "MOV": 0, "TOT": 3}]}, {"spoonFilePath": "AsyncIOServletTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.AsyncIOServletTest.testWriteFromOnDataAvailable()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "0433a8ca73f3178713c446bc0e8e9eeccc90e9f0 tags/jetty-9.3.11.v20160721~29", "commitUser": "sbordet", "authoredDateTime": "2016-07-15 18:11:28", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 12, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpOutput.java", "insertions": 6, "deletions": 6}, {"lines": 113, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/AsyncIOServletTest.java", "insertions": 106, "deletions": 7}], "commitDateTime": "2016-07-15 18:11:28", "spoonStatsSkippedReason": ""}], "title": "\"Slow\" client causes IllegalStateException", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 1, "INS": 3, "UPD": 2, "MOV": 1, "TOT": 7, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 76, "insertions": 47, "gitFilesChange": 1, "deletions": 29}, "closed": "2016-11-01 20:36:16", "statsSkippedReason": "", "body": "We have come across an issue with the Servlet 3.1 async support in Jetty 9.3.10.v20160621. When a (non-Jetty) HTTP client is \"slow\" in sending the request body, Jetty will end up in an illegal state, with the following exception:\n\n```\njava.lang.IllegalStateException: state=ASYNC\n    at org.eclipse.jetty.server.HttpOutput.run(HttpOutput.java:944)\n    at org.eclipse.jetty.server.handler.ContextHandler.handle(ContextHandler.java:1286)\n    at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:427)\n    at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:253)\n    at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:273)\n    at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)\n    at org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:93)\n    at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.executeProduceConsume(ExecuteProduceConsume.java:303)\n    at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume(ExecuteProduceConsume.java:148)\n    at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:136)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:671)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:589)\n    at java.lang.Thread.run(Thread.java:745)\n```\n\nIt seems a bit strange that a slow client has effect on the servlet output, but the issue is 100% reproducible in our tests, on both Mac OS and Linux.\n\nHere is a sample project that demonstrates the issue: https://github.com/poutsma/jetty-async-issue.\n\nThat project contains a `ServerDriver` that starts a Jetty Server with the `AsyncIssueServlet`, which uses the `ReadListener` and `WriteListener` API to consume the input. It also contains a `ClientDriver` which uses `HttpURLConnection` to send data. The only thing non-standard in both is the `Thread.sleep` statement [in the client](https://github.com/poutsma/jetty-async-issue/blob/master/src/main/java/org/example/ClientDriver.java#L60), making it slower in sending out its request. Both driver classes have a `main` method that starts them up.\n\nLet me know if you need any further information.\n", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.HttpOutput.run()", "org.eclipse.jetty.server.HttpOutput.close()"], "ttf": 109.00027777777778, "numCommits": 2, "url": "https://github.com/eclipse/jetty.project/issues/730"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug", "Invalid"], "user": "joakime", "filteredCommits": ["d08d5b949c521bd1aaf0ec95d1a2a0a0f5df463b", "30f8f32594cd7bc575b57a2e7ad04f68d4cb2657"], "commits": {"30f8f32594cd7bc575b57a2e7ad04f68d4cb2657": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "d08d5b949c521bd1aaf0ec95d1a2a0a0f5df463b": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2016-07-12 19:03:34", "commitsDetails": [{"commitMessage": "Issue #717 - Adding Transfer-Encoding: chunked testcase\n", "commitParents": ["d08d5b949c521bd1aaf0ec95d1a2a0a0f5df463b"], "commitHash": "30f8f32594cd7bc575b57a2e7ad04f68d4cb2657", "commitSpoonAstDiffStats": [{"spoonFilePath": "GzipHandlerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.GzipHandlerTest.testGzipNotMicroChunked()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.GzipHandlerTest.init()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.GzipHandlerTest.MicroChunkedServlet", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "30f8f32594cd7bc575b57a2e7ad04f68d4cb2657 tags/jetty-9.3.11.v20160721~55", "commitUser": "joakime", "authoredDateTime": "2016-07-12 17:47:53", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 42, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/GzipHandlerTest.java", "insertions": 42, "deletions": 0}], "commitDateTime": "2016-07-12 17:47:53", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #717 - Adding testcase for GzipHandler.minGzipSize\n", "commitParents": ["4cce4846c2f12f3901913c58d049626be6d35146"], "commitHash": "d08d5b949c521bd1aaf0ec95d1a2a0a0f5df463b", "commitSpoonAstDiffStats": [{"spoonFilePath": "GzipHandlerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.GzipHandlerTest.init()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlet.GzipHandlerTest.MicroServlet", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.GzipHandlerTest", "DEL": 0, "INS": 5, "UPD": 0, "MOV": 0, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.servlet.GzipHandlerTest.testGzipNotMicro()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "d08d5b949c521bd1aaf0ec95d1a2a0a0f5df463b tags/jetty-9.3.11.v20160721~56", "commitUser": "joakime", "authoredDateTime": "2016-07-12 12:04:49", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 57, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/GzipHandlerTest.java", "insertions": 52, "deletions": 5}], "commitDateTime": "2016-07-12 12:04:49", "spoonStatsSkippedReason": ""}], "title": "GzipHandler.minGzipSize still compresses small responses", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0, "insertions": 0, "gitFilesChange": 0, "deletions": 0}, "closed": "2016-07-12 19:13:34", "statsSkippedReason": "", "body": "When content is generated which is smaller then minGzipSize, then the response should not contain a `Content-Encoding: gzip` and the content itself should not be compressed.\n", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 0.0002777777777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/717"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["adf3281ba8f916437e2336636567b0dbc0fff04e"], "commits": {"adf3281ba8f916437e2336636567b0dbc0fff04e": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2016-07-07 15:57:48", "commitsDetails": [{"commitMessage": "Issue #696 Improve testing of LocalConnector\n\nFixed some races in the implementation\n", "commitParents": ["0d74658ab6af7371f9458d37b401743f6abadea4"], "commitHash": "adf3281ba8f916437e2336636567b0dbc0fff04e", "commitSpoonAstDiffStats": [{"spoonFilePath": "DumpHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.DumpHandler.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}]}, {"spoonFilePath": "HttpInput.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpInput.toString()", "DEL": 0, "INS": 9, "UPD": 1, "MOV": 2, "TOT": 12}]}, {"spoonFilePath": "ByteArrayEndPoint.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.ByteArrayEndPoint.toString()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ByteArrayEndPoint.waitForOutput(long,java.util.concurrent.TimeUnit)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 4}]}, {"spoonFilePath": "LocalConnectorTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.LocalConnectorTest.testOneResponse_11_chunked()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.LocalConnectorTest.testThreeResponse_11()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.LocalConnectorTest.testGETandGET()", "DEL": 0, "INS": 5, "UPD": 2, "MOV": 5, "TOT": 12}, {"spoonMethodName": "org.eclipse.jetty.server.LocalConnectorTest.testOneResponse_10_keep_alive_empty()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.LocalConnectorTest.testThreeResponseClosed_11()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.LocalConnectorTest.testExpectContinues()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.LocalConnectorTest.testThreeResponsePipeline_11()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.LocalConnectorTest.testExpectContinuesAvailable()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.LocalConnectorTest.testOneResponse_11_empty()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.LocalConnectorTest.testOneResponse_11_close()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "LocalConnector.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.LocalConnector.connect()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.LocalConnector.LocalEndPoint.waitForResponse(boolean,long,java.util.concurrent.TimeUnit)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "adf3281ba8f916437e2336636567b0dbc0fff04e tags/jetty-9.3.11.v20160721~63", "commitUser": "gregw", "authoredDateTime": "2016-07-08 21:15:36", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 20, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ByteArrayEndPoint.java", "insertions": 18, "deletions": 2}, {"lines": 19, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpInput.java", "insertions": 16, "deletions": 3}, {"lines": 10, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/LocalConnector.java", "insertions": 10, "deletions": 0}, {"lines": 11, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/DumpHandler.java", "insertions": 11, "deletions": 0}, {"lines": 184, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/LocalConnectorTest.java", "insertions": 180, "deletions": 4}], "commitDateTime": "2016-07-08 21:15:36", "spoonStatsSkippedReason": ""}], "title": "LocalConnector.getResponse() doesn't find close if using HTTP/1.1 w/Connection: close", "spoonStatsSummary": {"spoonMethodsChanged": 6, "DEL": 1, "INS": 16, "UPD": 1, "MOV": 4, "TOT": 22, "spoonFilesChanged": 4}, "gitStatsSummary": {"lines": 49, "insertions": 44, "gitFilesChange": 3, "deletions": 5}, "closed": "2016-07-12 23:40:34", "statsSkippedReason": "", "body": "In the following testing example ...\n\n``` java\nHttpTester.Request request = HttpTester.newRequest();\n\nrequest.setMethod(\"GET\");\nrequest.setVersion(HttpVersion.HTTP_1_1);\nrequest.setHeader(\"Host\", \"tester\");\nrequest.setHeader(\"Connection\", \"close\");\nrequest.setURI(\"/testdir/\");\n\nString response = localConnector.getResponse(BufferUtil.toString(request.generate()));\n```\n\nThe `localConnector.getResponse()` never returns, as its waiting on the connection close at ...\n\n```\n    at sun.misc.Unsafe.park(Native Method)\n    at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2163)\n    at org.eclipse.jetty.io.ByteArrayEndPoint.waitForOutput(ByteArrayEndPoint.java:286)\n    at org.eclipse.jetty.server.LocalConnector$LocalEndPoint.waitForResponse(LocalConnector.java:403)\n    at org.eclipse.jetty.server.LocalConnector.getResponse(LocalConnector.java:244)\n    at org.eclipse.jetty.server.LocalConnector.getResponse(LocalConnector.java:226)\n    at org.eclipse.jetty.server.handler.AllowSymLinkAliasCheckerTest.testAccessTestDir(AllowSymLinkAliasCheckerTest.java:149)\n```\n\nRemoving the two lines ...\n\n``` java\nrequest.setVersion(HttpVersion.HTTP_1_1);\nrequest.setHeader(\"Connection\", \"close\");\n```\n\nallows the test to continue, but this seems like a bug in `LocalConnector`\n", "changesInPackagesGIT": ["jetty-io/src/main/java/org/eclipse/jetty/io", "jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.HttpInput.toString()", "org.eclipse.jetty.server.LocalConnector.LocalEndPoint.waitForResponse(boolean,long,java.util.concurrent.TimeUnit)", "org.eclipse.jetty.io.ByteArrayEndPoint.waitForOutput(long,java.util.concurrent.TimeUnit)", "org.eclipse.jetty.io.ByteArrayEndPoint.toString()", "org.eclipse.jetty.server.LocalConnector.connect()", "org.eclipse.jetty.server.DumpHandler.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)"], "ttf": 5.000277777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/696"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "gregw", "filteredCommits": ["650db59e69e9068635c372631c11deec2435b7e0"], "commits": {"650db59e69e9068635c372631c11deec2435b7e0": {"commitUser": "joakime", "commitGHEventType": "closed"}}, "created": "2016-07-06 22:42:55", "commitsDetails": [{"commitMessage": "Fixes #693 - QoSFilterTest failures are not capture by junit\n\n+ Switching from Workers from Runnables to Callables\n+ Using ExecutorService to execute Workers\n+ Using Futures to report exceptions in Workers to the junit\n  Test Runner\n", "commitParents": ["322fe73869304dd0e6143e811b95a6ae99ee352a"], "commitHash": "650db59e69e9068635c372631c11deec2435b7e0", "commitSpoonAstDiffStats": [{"spoonFilePath": "QoSFilterTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlets.QoSFilterTest.rethrowExceptions(java.util.List)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlets.QoSFilterTest.Worker.call()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlets.QoSFilterTest.testQosFilter()", "DEL": 1, "INS": 4, "UPD": 2, "MOV": 4, "TOT": 11}, {"spoonMethodName": "org.eclipse.jetty.servlets.QoSFilterTest.Worker2.run()", "DEL": 1, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.servlets.QoSFilterTest.Worker.run()", "DEL": 1, "INS": 0, "UPD": 5, "MOV": 4, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.servlets.QoSFilterTest", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlets.QoSFilterTest.testBlockingQosFilter()", "DEL": 1, "INS": 4, "UPD": 2, "MOV": 4, "TOT": 11}, {"spoonMethodName": "org.eclipse.jetty.servlets.QoSFilterTest.setUp()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlets.QoSFilterTest.testNoFilter()", "DEL": 1, "INS": 4, "UPD": 2, "MOV": 3, "TOT": 10}]}], "nameRev": "650db59e69e9068635c372631c11deec2435b7e0 tags/jetty-9.3.11.v20160721~69", "commitUser": "joakime", "authoredDateTime": "2016-07-06 16:27:31", "commitGHEventType": "closed", "commitGitStats": [{"lines": 78, "filePath": "jetty-servlets/src/test/java/org/eclipse/jetty/servlets/QoSFilterTest.java", "insertions": 50, "deletions": 28}], "commitDateTime": "2016-07-06 16:27:31", "spoonStatsSkippedReason": ""}], "title": "QoSFilterTest failures are not capture by junit", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0, "insertions": 0, "gitFilesChange": 0, "deletions": 0}, "closed": "2016-07-06 23:29:40", "statsSkippedReason": "", "body": "```\nRunning org.eclipse.jetty.servlets.QoSFilterTest\n2016-07-07 08:39:44.700:INFO:oejs.Server:main: jetty-9.3.11-SNAPSHOT\n2016-07-07 08:39:44.700:INFO:oejsh.ContextHandler:main: Started o.e.j.s.ServletContextHandler@4b8ee4de{/context,null,AVAILABLE}\n2016-07-07 08:39:44.701:INFO:oejs.AbstractConnector:main: Started LocalConnector@27f981c6{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:44.701:INFO:oejs.AbstractConnector:main: Started LocalConnector@1b11171f{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:44.701:INFO:oejs.AbstractConnector:main: Started LocalConnector@1151e434{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:44.701:INFO:oejs.AbstractConnector:main: Started LocalConnector@2dc54ad4{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:44.701:INFO:oejs.AbstractConnector:main: Started LocalConnector@4659191b{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:44.701:INFO:oejs.AbstractConnector:main: Started LocalConnector@55634720{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:44.701:INFO:oejs.AbstractConnector:main: Started LocalConnector@4b0d79fc{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:44.701:INFO:oejs.AbstractConnector:main: Started LocalConnector@4c1909a3{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:44.701:INFO:oejs.AbstractConnector:main: Started LocalConnector@428640fa{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:44.701:INFO:oejs.Server:main: Started @33783ms\n2016-07-07 08:39:44.704:INFO:oejs.AbstractConnector:Thread-543: Started ServerConnector@47418ebe{HTTP/1.1,[http/1.1]}{127.0.0.1:41648}\n2016-07-07 08:39:44.704:INFO:oejs.AbstractConnector:Thread-544: Started ServerConnector@670f04fd{HTTP/1.1,[http/1.1]}{127.0.0.1:35566}\n2016-07-07 08:39:44.708:INFO:oejs.AbstractConnector:Thread-545: Started ServerConnector@121ef15c{HTTP/1.1,[http/1.1]}{127.0.0.1:44413}\n2016-07-07 08:39:44.714:INFO:oejs.AbstractConnector:Thread-547: Started ServerConnector@4ce1e6dc{HTTP/1.1,[http/1.1]}{127.0.0.1:35690}\n2016-07-07 08:39:44.715:INFO:oejs.AbstractConnector:Thread-549: Started ServerConnector@6c1c0c68{HTTP/1.1,[http/1.1]}{127.0.0.1:40418}\n2016-07-07 08:39:44.715:INFO:oejs.AbstractConnector:Thread-551: Started ServerConnector@bde7576{HTTP/1.1,[http/1.1]}{127.0.0.1:43486}\n2016-07-07 08:39:44.716:INFO:oejs.AbstractConnector:Thread-550: Started ServerConnector@5f54a565{HTTP/1.1,[http/1.1]}{127.0.0.1:44949}\n2016-07-07 08:39:44.716:INFO:oejs.AbstractConnector:Thread-552: Started ServerConnector@f67e3a5{HTTP/1.1,[http/1.1]}{127.0.0.1:35723}\n2016-07-07 08:39:45.333:INFO:oejs.AbstractConnector:main: Stopped LocalConnector@27f981c6{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:45.333:INFO:oejs.AbstractConnector:main: Stopped LocalConnector@1b11171f{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:45.333:INFO:oejs.AbstractConnector:main: Stopped LocalConnector@1151e434{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:45.334:INFO:oejs.AbstractConnector:main: Stopped LocalConnector@2dc54ad4{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:45.334:INFO:oejs.AbstractConnector:main: Stopped LocalConnector@4659191b{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:45.334:INFO:oejs.AbstractConnector:main: Stopped LocalConnector@55634720{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:45.334:INFO:oejs.AbstractConnector:main: Stopped LocalConnector@4b0d79fc{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:45.334:INFO:oejs.AbstractConnector:main: Stopped LocalConnector@4c1909a3{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:45.334:INFO:oejs.AbstractConnector:main: Stopped LocalConnector@428640fa{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:45.335:INFO:oejs.AbstractConnector:main: Stopped ServerConnector@47418ebe{HTTP/1.1,[http/1.1]}{127.0.0.1:0}\n2016-07-07 08:39:45.336:INFO:oejs.AbstractConnector:main: Stopped ServerConnector@670f04fd{HTTP/1.1,[http/1.1]}{127.0.0.1:0}\n2016-07-07 08:39:45.337:INFO:oejs.AbstractConnector:main: Stopped ServerConnector@121ef15c{HTTP/1.1,[http/1.1]}{127.0.0.1:0}\n2016-07-07 08:39:45.337:INFO:oejs.AbstractConnector:main: Stopped ServerConnector@4ce1e6dc{HTTP/1.1,[http/1.1]}{127.0.0.1:0}\n2016-07-07 08:39:45.338:INFO:oejs.AbstractConnector:main: Stopped ServerConnector@6c1c0c68{HTTP/1.1,[http/1.1]}{127.0.0.1:0}\n2016-07-07 08:39:45.339:INFO:oejs.AbstractConnector:main: Stopped ServerConnector@bde7576{HTTP/1.1,[http/1.1]}{127.0.0.1:0}\n2016-07-07 08:39:45.339:INFO:oejs.AbstractConnector:main: Stopped ServerConnector@5f54a565{HTTP/1.1,[http/1.1]}{127.0.0.1:0}\n2016-07-07 08:39:45.340:INFO:oejs.AbstractConnector:main: Stopped ServerConnector@f67e3a5{HTTP/1.1,[http/1.1]}{127.0.0.1:0}\n2016-07-07 08:39:45.340:INFO:oejsh.ContextHandler:main: Stopped o.e.j.s.ServletContextHandler@4b8ee4de{/context,null,UNAVAILABLE}\n2016-07-07 08:39:45.344:INFO:oejs.Server:main: jetty-9.3.11-SNAPSHOT\n2016-07-07 08:39:45.345:INFO:oejsh.ContextHandler:main: Started o.e.j.s.ServletContextHandler@2e3967ea{/context,null,AVAILABLE}\n2016-07-07 08:39:45.345:INFO:oejs.AbstractConnector:main: Started LocalConnector@70e9c95d{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:45.345:INFO:oejs.AbstractConnector:main: Started LocalConnector@4d5650ae{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:45.345:INFO:oejs.AbstractConnector:main: Started LocalConnector@a38c7fe{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:45.345:INFO:oejs.AbstractConnector:main: Started LocalConnector@6fdbe764{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:45.345:INFO:oejs.AbstractConnector:main: Started LocalConnector@51c668e3{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:45.346:INFO:oejs.AbstractConnector:main: Started LocalConnector@2e6a8155{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:45.346:INFO:oejs.AbstractConnector:main: Started LocalConnector@6221a451{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:45.346:INFO:oejs.AbstractConnector:main: Started LocalConnector@52719fb6{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:45.346:INFO:oejs.AbstractConnector:main: Started LocalConnector@3012646b{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:45.346:INFO:oejs.Server:main: Started @34427ms\n2016-07-07 08:39:55.351:INFO:oejs.AbstractConnector:main: Stopped LocalConnector@70e9c95d{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:55.351:INFO:oejs.AbstractConnector:main: Stopped LocalConnector@4d5650ae{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:55.351:INFO:oejs.AbstractConnector:main: Stopped LocalConnector@a38c7fe{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:55.351:INFO:oejs.AbstractConnector:main: Stopped LocalConnector@6fdbe764{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:55.352:INFO:oejs.AbstractConnector:main: Stopped LocalConnector@51c668e3{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:55.352:INFO:oejs.AbstractConnector:main: Stopped LocalConnector@2e6a8155{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:55.352:INFO:oejs.AbstractConnector:main: Stopped LocalConnector@6221a451{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:55.352:INFO:oejs.AbstractConnector:main: Stopped LocalConnector@52719fb6{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:55.352:INFO:oejs.AbstractConnector:main: Stopped LocalConnector@3012646b{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:55.352:INFO:oejsh.ContextHandler:main: Stopped o.e.j.s.ServletContextHandler@2e3967ea{/context,null,UNAVAILABLE}\n2016-07-07 08:39:55.402:INFO:oejs.Server:main: jetty-9.3.11-SNAPSHOT\n2016-07-07 08:39:55.403:INFO:oejsh.ContextHandler:main: Started o.e.j.s.ServletContextHandler@63376bed{/context,null,AVAILABLE}\n2016-07-07 08:39:55.403:INFO:oejs.AbstractConnector:main: Started LocalConnector@4145bad8{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:55.403:INFO:oejs.AbstractConnector:main: Started LocalConnector@d86a6f{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:55.403:INFO:oejs.AbstractConnector:main: Started LocalConnector@2892d68{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:55.403:INFO:oejs.AbstractConnector:main: Started LocalConnector@5ab956d7{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:55.403:INFO:oejs.AbstractConnector:main: Started LocalConnector@3646a422{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:55.403:INFO:oejs.AbstractConnector:main: Started LocalConnector@750e2b97{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:55.403:INFO:oejs.AbstractConnector:main: Started LocalConnector@3e27aa33{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:55.403:INFO:oejs.AbstractConnector:main: Started LocalConnector@2e385cce{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:55.403:INFO:oejs.AbstractConnector:main: Started LocalConnector@2ddc9a9f{HTTP/1.1,[http/1.1]}\n2016-07-07 08:39:55.404:INFO:oejs.Server:main: Started @44485ms\nException in thread \"Thread-598\" java.lang.AssertionError\n    at org.junit.Assert.fail(Assert.java:86)\n    at org.junit.Assert.assertTrue(Assert.java:41)\n    at org.junit.Assert.assertTrue(Assert.java:52)\n    at org.eclipse.jetty.servlets.QoSFilterTest$Worker.run(QoSFilterTest.java:168)\n    at java.lang.Thread.run(Thread.java:745)\nException in thread \"Thread-591\" java.lang.AssertionError\n    at org.junit.Assert.fail(Assert.java:86)\n    at org.junit.Assert.assertTrue(Assert.java:41)\n    at org.junit.Assert.assertTrue(Assert.java:52)\n    at org.eclipse.jetty.servlets.QoSFilterTest$Worker.run(QoSFilterTest.java:168)\n    at java.lang.Thread.run(Thread.java:745)\nException in thread \"Thread-595\" Exception in thread \"Thread-594\" java.lang.AssertionError\n    at org.junit.Assert.fail(Assert.java:86)\n    at org.junit.Assert.assertTrue(Assert.java:41)\n    at org.junit.Assert.assertTrue(Assert.java:52)\n    at org.eclipse.jetty.servlets.QoSFilterTest$Worker.run(QoSFilterTest.java:168)\n    at java.lang.Thread.run(Thread.java:745)\nException in thread \"Thread-596\" java.lang.AssertionError\n    at org.junit.Assert.fail(Assert.java:86)\n    at org.junit.Assert.assertTrue(Assert.java:41)\n    at org.junit.Assert.assertTrue(Assert.java:52)\n    at org.eclipse.jetty.servlets.QoSFilterTest$Worker.run(QoSFilterTest.java:168)\n    at java.lang.Thread.run(Thread.java:745)\nException in thread \"Thread-593\" java.lang.AssertionError\n    at org.junit.Assert.fail(Assert.java:86)\n    at org.junit.Assert.assertTrue(Assert.java:41)\n    at org.junit.Assert.assertTrue(Assert.java:52)\n    at org.eclipse.jetty.servlets.QoSFilterTest$Worker.run(QoSFilterTest.java:168)\n    at java.lang.Thread.run(Thread.java:745)\njava.lang.AssertionError\n    at org.junit.Assert.fail(Assert.java:86)\n    at org.junit.Assert.assertTrue(Assert.java:41)\n    at org.junit.Assert.assertTrue(Assert.java:52)\n    at org.eclipse.jetty.servlets.QoSFilterTest$Worker.run(QoSFilterTest.java:168)\n    at java.lang.Thread.run(Thread.java:745)\nException in thread \"Thread-597\" Exception in thread \"Thread-592\" java.lang.AssertionError\n    at org.junit.Assert.fail(Assert.java:86)\n    at org.junit.Assert.assertTrue(Assert.java:41)\n    at org.junit.Assert.assertTrue(Assert.java:52)\n    at org.eclipse.jetty.servlets.QoSFilterTest$Worker.run(QoSFilterTest.java:168)\n    at java.lang.Thread.run(Thread.java:745)\njava.lang.AssertionError\n    at org.junit.Assert.fail(Assert.java:86)\n    at org.junit.Assert.assertTrue(Assert.java:41)\n    at org.junit.Assert.assertTrue(Assert.java:52)\n    at org.eclipse.jetty.servlets.QoSFilterTest$Worker.run(QoSFilterTest.java:168)\n    at java.lang.Thread.run(Thread.java:745)\n2016-07-07 08:40:05.406:INFO:oejs.AbstractConnector:main: Stopped LocalConnector@4145bad8{HTTP/1.1,[http/1.1]}\n2016-07-07 08:40:05.406:INFO:oejs.AbstractConnector:main: Stopped LocalConnector@d86a6f{HTTP/1.1,[http/1.1]}\nException in thread \"Thread-618\" java.lang.AssertionError\n    at org.junit.Assert.fail(Assert.java:86)\n    at org.junit.Assert.assertTrue(Assert.java:41)\n    at org.junit.Assert.assertTrue(Assert.java:52)\n    at org.eclipse.jetty.servlets.QoSFilterTest$Worker.run(QoSFilterTest.java:168)\n    at java.lang.Thread.run(Thread.java:745)\n2016-07-07 08:40:05.407:INFO:oejs.AbstractConnector:main: Stopped LocalConnector@2892d68{HTTP/1.1,[http/1.1]}\n2016-07-07 08:40:05.407:INFO:oejs.AbstractConnector:main: Stopped LocalConnector@5ab956d7{HTTP/1.1,[http/1.1]}\n2016-07-07 08:40:05.407:INFO:oejs.AbstractConnector:main: Stopped LocalConnector@3646a422{HTTP/1.1,[http/1.1]}\n2016-07-07 08:40:05.407:INFO:oejs.AbstractConnector:main: Stopped LocalConnector@750e2b97{HTTP/1.1,[http/1.1]}\n2016-07-07 08:40:05.407:INFO:oejs.AbstractConnector:main: Stopped LocalConnector@3e27aa33{HTTP/1.1,[http/1.1]}\n2016-07-07 08:40:05.408:INFO:oejs.AbstractConnector:main: Stopped LocalConnector@2e385cce{HTTP/1.1,[http/1.1]}\n2016-07-07 08:40:05.408:INFO:oejs.AbstractConnector:main: Stopped LocalConnector@2ddc9a9f{HTTP/1.1,[http/1.1]}\n2016-07-07 08:40:05.408:INFO:oejsh.ContextHandler:main: Stopped o.e.j.s.ServletContextHandler@63376bed{/context,null,UNAVAILABLE}\nTests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 20.712 sec - in org.eclipse.jetty.servlets.QoSFilterTest\nRunning org.eclipse.jetty.servlets.DoSFilterTest\n2016-07-07 08:40:05.409:INFO:oejs.Server:main: jetty-9.3.11-SNAPSHOT\n2016-07-07 08:40:05.410:INFO:oejsh.ContextHandler:main: Started o.e.j.s.ServletContextHandler@4b741d6d{/ctx,null,AVAILABLE}\n2016-07-07 08:40:05.410:INFO:oejs.AbstractConnector:main: Started LocalConnector@2eae8e6e{HTTP/1.1,[http/1.1]}\n2016-07-07 08:40:05.411:INFO:oejs.AbstractConnector:main: Started ServerConnector@8f2ef19{HTTP/1.1,[http/1.1]}{127.0.0.1:46642}\n2016-07-07 08:40:05.411:INFO:oejs.Server:main: Started @54492ms\n2016-07-07 08:40:05.411:INFO:oejs.AbstractConnector:main: Stopped LocalConnector@2eae8e6e{HTTP/1.1,[http/1.1]}\n2016-07-07 08:40:05.412:INFO:oejs.AbstractConnector:main: Stopped ServerConnector@8f2ef19{HTTP/1.1,[http/1.1]}{127.0.0.1:0}\n2016-07-07 08:40:05.412:INFO:oejsh.ContextHandler:main: Stopped o.e.j.s.ServletContextHandler@4b741d6d{/ctx,null,UNAVAILABLE}\n2016-07-07 08:40:05.413:INFO:oejs.Server:main: jetty-9.3.11-SNAPSHOT\n2016-07-07 08:40:05.414:INFO:oejsh.ContextHandler:main: Started o.e.j.s.ServletContextHandler@75d3a5e0{/ctx,null,AVAILABLE}\n2016-07-07 08:40:05.414:INFO:oejs.AbstractConnector:main: Started LocalConnector@17236143{HTTP/1.1,[http/1.1]}\n2016-07-07 08:40:05.414:INFO:oejs.AbstractConnector:main: Started ServerConnector@74d1dc36{HTTP/1.1,[http/1.1]}{127.0.0.1:33099}\n2016-07-07 08:40:05.414:INFO:oejs.Server:main: Started @54496ms\n2016-07-07 08:40:05.616:INFO:oejs.AbstractConnector:main: Stopped LocalConnector@17236143{HTTP/1.1,[http/1.1]}\n2016-07-07 08:40:05.618:INFO:oejs.AbstractConnector:main: Stopped ServerConnector@74d1dc36{HTTP/1.1,[http/1.1]}{127.0.0.1:0}\n2016-07-07 08:40:05.618:INFO:oejsh.ContextHandler:main: Stopped o.e.j.s.ServletContextHandler@75d3a5e0{/ctx,null,UNAVAILABLE}\n2016-07-07 08:40:05.619:INFO:oejs.Server:main: jetty-9.3.11-SNAPSHOT\n2016-07-07 08:40:05.619:INFO:oejsh.ContextHandler:main: Started o.e.j.s.ServletContextHandler@15043a2f{/ctx,null,AVAILABLE}\n2016-07-07 08:40:05.619:INFO:oejs.AbstractConnector:main: Started LocalConnector@4a83a74a{HTTP/1.1,[http/1.1]}\n2016-07-07 08:40:05.620:INFO:oejs.AbstractConnector:main: Started ServerConnector@1349883{HTTP/1.1,[http/1.1]}{127.0.0.1:37464}\n2016-07-07 08:40:05.620:INFO:oejs.Server:main: Started @54701ms\n2016-07-07 08:40:06.871:INFO:oejs.AbstractConnector:main: Stopped LocalConnector@4a83a74a{HTTP/1.1,[http/1.1]}\n2016-07-07 08:40:06.871:INFO:oejs.AbstractConnector:main: Stopped ServerConnector@1349883{HTTP/1.1,[http/1.1]}{127.0.0.1:0}\n2016-07-07 08:40:06.871:INFO:oejsh.ContextHandler:main: Stopped o.e.j.s.ServletContextHandler@15043a2f{/ctx,null,UNAVAILABLE}\n2016-07-07 08:40:06.873:INFO:oejs.Server:main: jetty-9.3.11-SNAPSHOT\n2016-07-07 08:40:06.873:INFO:oejsh.ContextHandler:main: Started o.e.j.s.ServletContextHandler@16eb3ea3{/ctx,null,AVAILABLE}\n2016-07-07 08:40:06.873:INFO:oejs.AbstractConnector:main: Started LocalConnector@273444fe{HTTP/1.1,[http/1.1]}\n2016-07-07 08:40:06.873:INFO:oejs.AbstractConnector:main: Started ServerConnector@33bc72d1{HTTP/1.1,[http/1.1]}{127.0.0.1:45086}\n2016-07-07 08:40:06.874:INFO:oejs.Server:main: Started @55955ms\n2016-07-07 08:40:06.875:WARN:oejs.DoSFilter:qtp2135449562-834: DOS ALERT: Request delayed=200ms, ip=127.0.0.1, session=null, user=null\n2016-07-07 08:40:07.375:WARN:oejs.DoSFilter:qtp2135449562-837: DOS ALERT: Request delayed=200ms, ip=127.0.0.1, session=null, user=null\nException in thread \"Thread-622\" Exception in thread \"Thread-620\" Exception in thread \"Thread-624\" java.lang.AssertionError\n    at org.junit.Assert.fail(Assert.java:86)\n    at org.junit.Assert.assertTrue(Assert.java:41)\n    at org.junit.Assert.assertTrue(Assert.java:52)\n    at org.eclipse.jetty.servlets.QoSFilterTest$Worker.run(QoSFilterTest.java:168)\n    at java.lang.Thread.run(Thread.java:745)\njava.lang.AssertionError\n    at org.junit.Assert.fail(Assert.java:86)\n    at org.junit.Assert.assertTrue(Assert.java:41)\n    at org.junit.Assert.assertTrue(Assert.java:52)\n    at org.eclipse.jetty.servlets.QoSFilterTest$Worker.run(QoSFilterTest.java:168)\n    at java.lang.Thread.run(Thread.java:745)\njava.lang.AssertionError\n    at org.junit.Assert.fail(Assert.java:86)\n    at org.junit.Assert.assertTrue(Assert.java:41)\n    at org.junit.Assert.assertTrue(Assert.java:52)\n    at org.eclipse.jetty.servlets.QoSFilterTest$Worker.run(QoSFilterTest.java:168)\n    at java.lang.Thread.run(Thread.java:745)\n2016-07-07 08:40:12.076:INFO:oejs.AbstractConnector:main: Stopped LocalConnector@273444fe{HTTP/1.1,[http/1.1]}\n2016-07-07 08:40:12.077:INFO:oejs.AbstractConnector:main: Stopped ServerConnector@33bc72d1{HTTP/1.1,[http/1.1]}{127.0.0.1:0}\n2016-07-07 08:40:12.077:INFO:oejsh.ContextHandler:main: Stopped o.e.j.s.ServletContextHandler@16eb3ea3{/ctx,null,UNAVAILABLE}\n2016-07-07 08:40:12.078:INFO:oejs.Server:main: jetty-9.3.11-SNAPSHOT\n2016-07-07 08:40:12.080:INFO:oejsh.ContextHandler:main: Started o.e.j.s.ServletContextHandler@231f98ef{/ctx,null,AVAILABLE}\n2016-07-07 08:40:12.080:INFO:oejs.AbstractConnector:main: Started LocalConnector@7c137fd5{HTTP/1.1,[http/1.1]}\n2016-07-07 08:40:12.080:INFO:oejs.AbstractConnector:main: Started ServerConnector@183ec003{HTTP/1.1,[http/1.1]}{127.0.0.1:34288}\n2016-07-07 08:40:12.080:INFO:oejs.Server:main: Started @61162ms\nException in thread \"Thread-623\" java.lang.AssertionError\n    at org.junit.Assert.fail(Assert.java:86)\n    at org.junit.Assert.assertTrue(Assert.java:41)\n    at org.junit.Assert.assertTrue(Assert.java:52)\n    at org.eclipse.jetty.servlets.QoSFilterTest$Worker.run(QoSFilterTest.java:168)\n    at java.lang.Thread.run(Thread.java:745)\nException in thread \"Thread-626\" Exception in thread \"Thread-627\" java.lang.AssertionError\n    at org.junit.Assert.fail(Assert.java:86)\n    at org.junit.Assert.assertTrue(Assert.java:41)\n    at org.junit.Assert.assertTrue(Assert.java:52)\n    at org.eclipse.jetty.servlets.QoSFilterTest$Worker.run(QoSFilterTest.java:168)\n    at java.lang.Thread.run(Thread.java:745)\nException in thread \"Thread-629\" java.lang.AssertionError\n    at org.junit.Assert.fail(Assert.java:86)\n    at org.junit.Assert.assertTrue(Assert.java:41)\n    at org.junit.Assert.assertTrue(Assert.java:52)\n    at org.eclipse.jetty.servlets.QoSFilterTest$Worker.run(QoSFilterTest.java:168)\n    at java.lang.Thread.run(Thread.java:745)\njava.lang.AssertionError\n    at org.junit.Assert.fail(Assert.java:86)\n    at org.junit.Assert.assertTrue(Assert.java:41)\n    at org.junit.Assert.assertTrue(Assert.java:52)\n    at org.eclipse.jetty.servlets.QoSFilterTest$Worker.run(QoSFilterTest.java:168)\n    at java.lang.Thread.run(Thread.java:745)\n2016-07-07 08:40:16.641:WARN:oejs.DoSFilter:qtp443934570-844: DOS ALERT: Request delayed=200ms, ip=127.0.0.1, session=jk8fvl3zwws2yg18m1wxxrtm, user=null\n2016-07-07 08:40:16.842:WARN:oejs.DoSFilter:qtp443934570-847: DOS ALERT: Request delayed=200ms, ip=127.0.0.1, session=167w7zvhs9o1c18huo9cgjcfgh, user=null\n2016-07-07 08:40:17.043:WARN:oejs.DoSFilter:qtp443934570-848: DOS ALERT: Request delayed=200ms, ip=127.0.0.1, session=jk8fvl3zwws2yg18m1wxxrtm, user=null\n2016-07-07 08:40:17.244:WARN:oejs.DoSFilter:qtp443934570-849: DOS ALERT: Request delayed=200ms, ip=127.0.0.1, session=167w7zvhs9o1c18huo9cgjcfgh, user=null\n2016-07-07 08:40:17.445:INFO:oejs.AbstractConnector:main: Stopped LocalConnector@7c137fd5{HTTP/1.1,[http/1.1]}\n2016-07-07 08:40:17.446:INFO:oejs.AbstractConnector:main: Stopped ServerConnector@183ec003{HTTP/1.1,[http/1.1]}{127.0.0.1:0}\n2016-07-07 08:40:17.446:INFO:oejsh.ContextHandler:main: Stopped o.e.j.s.ServletContextHandler@231f98ef{/ctx,null,UNAVAILABLE}\n2016-07-07 08:40:17.450:INFO:oejs.Server:main: jetty-9.3.11-SNAPSHOT\n2016-07-07 08:40:17.452:INFO:oejsh.ContextHandler:main: Started o.e.j.s.ServletContextHandler@6d60fe40{/ctx,null,AVAILABLE}\n2016-07-07 08:40:17.452:INFO:oejs.AbstractConnector:main: Started LocalConnector@792b749c{HTTP/1.1,[http/1.1]}\n2016-07-07 08:40:17.452:INFO:oejs.AbstractConnector:main: Started ServerConnector@23e84203{HTTP/1.1,[http/1.1]}{127.0.0.1:39092}\n2016-07-07 08:40:17.452:INFO:oejs.Server:main: Started @66534ms\n2016-07-07 08:40:17.654:INFO:oejs.AbstractConnector:main: Stopped LocalConnector@792b749c{HTTP/1.1,[http/1.1]}\n2016-07-07 08:40:17.654:INFO:oejs.AbstractConnector:main: Stopped ServerConnector@23e84203{HTTP/1.1,[http/1.1]}{127.0.0.1:0}\n2016-07-07 08:40:17.655:INFO:oejsh.ContextHandler:main: Stopped o.e.j.s.ServletContextHandler@6d60fe40{/ctx,null,UNAVAILABLE}\n2016-07-07 08:40:17.656:INFO:oejs.Server:main: jetty-9.3.11-SNAPSHOT\n2016-07-07 08:40:17.656:INFO:oejsh.ContextHandler:main: Started o.e.j.s.ServletContextHandler@c430e6c{/ctx,null,AVAILABLE}\n2016-07-07 08:40:17.657:INFO:oejs.AbstractConnector:main: Started LocalConnector@312aa7c{HTTP/1.1,[http/1.1]}\n2016-07-07 08:40:17.657:INFO:oejs.AbstractConnector:main: Started ServerConnector@536f2a7e{HTTP/1.1,[http/1.1]}{127.0.0.1:37598}\n2016-07-07 08:40:17.657:INFO:oejs.Server:main: Started @66738ms\n2016-07-07 08:40:20.960:INFO:oejs.AbstractConnector:main: Stopped LocalConnector@312aa7c{HTTP/1.1,[http/1.1]}\n2016-07-07 08:40:20.961:INFO:oejs.AbstractConnector:main: Stopped ServerConnector@536f2a7e{HTTP/1.1,[http/1.1]}{127.0.0.1:0}\n2016-07-07 08:40:20.961:INFO:oejsh.ContextHandler:main: Stopped o.e.j.s.ServletContextHandler@c430e6c{/ctx,null,UNAVAILABLE}\n2016-07-07 08:40:20.963:INFO:oejs.Server:main: jetty-9.3.11-SNAPSHOT\nSUREFIRE-859: [GC (Allocation Failure) [PSYoungGen: 267475K->7146K(305664K)] 267579K->7258K(1005056K), 0.0187235 secs] [Times: user=0.04 sys=0.00, real=0.02 secs] \n2016-07-07 08:40:20.984:INFO:oejsh.ContextHandler:main: Started o.e.j.s.ServletContextHandler@eadd4fb{/ctx,null,AVAILABLE}\n2016-07-07 08:40:20.984:INFO:oejs.AbstractConnector:main: Started LocalConnector@740fb309{HTTP/1.1,[http/1.1]}\n2016-07-07 08:40:20.984:INFO:oejs.AbstractConnector:main: Started ServerConnector@7bd7d6d6{HTTP/1.1,[http/1.1]}{127.0.0.1:38121}\n2016-07-07 08:40:20.984:INFO:oejs.Server:main: Started @70066ms\n2016-07-07 08:40:20.990:WARN:oejs.DoSFilter:qtp1924949331-879: DOS ALERT: Request delayed=200ms, ip=127.0.0.1, session=null, user=null\n2016-07-07 08:40:22.086:WARN:oejs.DoSFilter:qtp1924949331-880: DOS ALERT: Request delayed=200ms, ip=127.0.0.1, session=null, user=null\n2016-07-07 08:40:23.186:INFO:oejs.AbstractConnector:main: Stopped LocalConnector@740fb309{HTTP/1.1,[http/1.1]}\n2016-07-07 08:40:23.186:INFO:oejs.AbstractConnector:main: Stopped ServerConnector@7bd7d6d6{HTTP/1.1,[http/1.1]}{127.0.0.1:0}\n2016-07-07 08:40:23.187:INFO:oejsh.ContextHandler:main: Stopped o.e.j.s.ServletContextHandler@eadd4fb{/ctx,null,UNAVAILABLE}\n2016-07-07 08:40:23.187:INFO:oejs.Server:main: jetty-9.3.11-SNAPSHOT\n2016-07-07 08:40:23.188:INFO:oejsh.ContextHandler:main: Started o.e.j.s.ServletContextHandler@790da477{/ctx,null,AVAILABLE}\n2016-07-07 08:40:23.188:INFO:oejs.AbstractConnector:main: Started LocalConnector@5c7933ad{HTTP/1.1,[http/1.1]}\n2016-07-07 08:40:23.188:INFO:oejs.AbstractConnector:main: Started ServerConnector@57bc27f5{HTTP/1.1,[http/1.1]}{127.0.0.1:36554}\n2016-07-07 08:40:23.188:INFO:oejs.Server:main: Started @72270ms\n2016-07-07 08:40:23.194:WARN:oejs.DoSFilter:qtp597307515-894: DOS ALERT: Request delayed=200ms, ip=127.0.0.1, session=vgab2sgf1t36m7o6wpmlkmp2, user=null\n2016-07-07 08:40:24.291:WARN:oejs.DoSFilter:qtp597307515-890: DOS ALERT: Request delayed=200ms, ip=127.0.0.1, session=vgab2sgf1t36m7o6wpmlkmp2, user=null\n2016-07-07 08:40:25.392:INFO:oejs.AbstractConnector:main: Stopped LocalConnector@5c7933ad{HTTP/1.1,[http/1.1]}\n2016-07-07 08:40:25.393:INFO:oejs.AbstractConnector:main: Stopped ServerConnector@57bc27f5{HTTP/1.1,[http/1.1]}{127.0.0.1:0}\n2016-07-07 08:40:25.394:INFO:oejsh.ContextHandler:main: Stopped o.e.j.s.ServletContextHandler@790da477{/ctx,null,UNAVAILABLE}\n2016-07-07 08:40:25.397:INFO:oejs.Server:main: jetty-9.3.11-SNAPSHOT\n2016-07-07 08:40:25.399:INFO:oejsh.ContextHandler:main: Started o.e.j.s.ServletContextHandler@60f00693{/ctx,null,AVAILABLE}\n2016-07-07 08:40:25.399:INFO:oejs.AbstractConnector:main: Started LocalConnector@79207381{HTTP/1.1,[http/1.1]}\n2016-07-07 08:40:25.400:INFO:oejs.AbstractConnector:main: Started ServerConnector@491b9b8{HTTP/1.1,[http/1.1]}{127.0.0.1:34318}\n2016-07-07 08:40:25.400:INFO:oejs.Server:main: Started @74481ms\n2016-07-07 08:40:25.407:WARN:oejs.DoSFilter:qtp1605851606-902: DOS ALERT: Request delayed=200ms, ip=127.0.0.1, session=null, user=null\n2016-07-07 08:40:26.902:WARN:oejs.DoSFilter:qtp1605851606-905: DOS ALERT: Request delayed=200ms, ip=127.0.0.1, session=null, user=null\n2016-07-07 08:40:27.610:INFO:oejs.AbstractConnector:main: Stopped LocalConnector@79207381{HTTP/1.1,[http/1.1]}\n2016-07-07 08:40:27.610:INFO:oejs.AbstractConnector:main: Stopped ServerConnector@491b9b8{HTTP/1.1,[http/1.1]}{127.0.0.1:0}\n2016-07-07 08:40:27.610:INFO:oejsh.ContextHandler:main: Stopped o.e.j.s.ServletContextHandler@60f00693{/ctx,null,UNAVAILABLE}\n2016-07-07 08:40:27.611:INFO:oejs.Server:main: jetty-9.3.11-SNAPSHOT\n2016-07-07 08:40:27.613:INFO:oejsh.ContextHandler:main: Started o.e.j.s.ServletContextHandler@2657d4dd{/ctx,null,AVAILABLE}\n2016-07-07 08:40:27.613:INFO:oejs.AbstractConnector:main: Started LocalConnector@5340477f{HTTP/1.1,[http/1.1]}\n2016-07-07 08:40:27.614:INFO:oejs.AbstractConnector:main: Started ServerConnector@47caedad{HTTP/1.1,[http/1.1]}{127.0.0.1:38185}\n2016-07-07 08:40:27.614:INFO:oejs.Server:main: Started @76696ms\n2016-07-07 08:40:29.816:INFO:oejs.AbstractConnector:main: Stopped LocalConnector@5340477f{HTTP/1.1,[http/1.1]}\n2016-07-07 08:40:29.817:INFO:oejs.AbstractConnector:main: Stopped ServerConnector@47caedad{HTTP/1.1,[http/1.1]}{127.0.0.1:0}\n2016-07-07 08:40:29.817:INFO:oejsh.ContextHandler:main: Stopped o.e.j.s.ServletContextHandler@2657d4dd{/ctx,null,UNAVAILABLE}\nTests run: 11, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 24.408 sec - in org.eclipse.jetty.servlets.DoSFilterTest\n\n```\n", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 0.0002777777777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/693"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "janbartel", "filteredCommits": ["c913bc7150a0d227dbe8ff8601b25f429af26ba1"], "commits": {"c913bc7150a0d227dbe8ff8601b25f429af26ba1": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2016-07-06 03:39:19", "commitsDetails": [{"commitMessage": "Issue #690\n", "commitParents": ["0d0b1ace5c0859d8cf680f994280e481033be514"], "commitHash": "c913bc7150a0d227dbe8ff8601b25f429af26ba1", "commitSpoonAstDiffStats": [{"spoonFilePath": "JettyEffectiveWebXml.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.maven.plugin.JettyEffectiveWebXml.startJetty()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "c913bc7150a0d227dbe8ff8601b25f429af26ba1 tags/jetty-9.3.11.v20160721~75", "commitUser": "janbartel", "authoredDateTime": "2016-07-06 13:41:59", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 1, "filePath": "jetty-maven-plugin/src/main/java/org/eclipse/jetty/maven/plugin/JettyEffectiveWebXml.java", "insertions": 1, "deletions": 0}], "commitDateTime": "2016-07-06 13:41:59", "spoonStatsSkippedReason": ""}], "title": "jetty-maven-plugin does not configure AnnotationConfiguration for jetty:effective-web-xml goal", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 1, "insertions": 1, "gitFilesChange": 1, "deletions": 0}, "closed": "2016-07-06 03:44:36", "statsSkippedReason": "", "body": "The change for bug 481203 did not re-instate the correct set of Configurations if the effective-web-xml goal is used.\n", "changesInPackagesGIT": ["jetty-maven-plugin/src/main/java/org/eclipse/jetty/maven/plugin"], "changesInPackagesSPOON": ["org.eclipse.jetty.maven.plugin.JettyEffectiveWebXml.startJetty()"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/690"}, {"labels": ["Bug"], "closed": "2016-07-06 04:08:05", "body": "We use the following code:\n\n```\nResourceHandler fileResourceHandler = new ResourceHandler();\nfileResourceHandler.setDirectoriesListed(false);\nfileResourceHandler.setWelcomeFiles(new String[]{ \"index.html\" });\nfileResourceHandler.setResourceBase(\"./resources/website\");\nfileResourceHandler.setEtags(true);\n\nContextHandler fileResourceContext = new ContextHandler();\nfileResourceContext.setContextPath(\"/\");\nfileResourceContext.setAllowNullPathInfo(true);\nfileResourceContext.setHandler(fileResourceHandler);\n\n// Allow to follow symlinks\nfileResourceContext.addAliasCheck(new AllowSymLinkAliasChecker());\n```\n\nNow we updated jetty9 to the from 9.2.2 to the latest release (9.3.9) and at the same time we moved to openjdk-8 (7 before).\nAll of a sudden all symlinks do not work anymore. If I replace the symlink with the actual content, it works.\nIf I replace the last line of code above with\n\n```\nfileResourceContext.addAliasCheck(new ContextHandler.ApproveAliases());\n```\n\nit works too (even though `ApproveAliases` seems too permissive for following symlinks).\n\nSo it seems like the `AllowSymLinkAliasChecker` does not work anymore.\nOS is Ubuntu xenial.\n", "commits": {}, "title": "AllowSymLinkAliasChecker not working?", "created": "2016-07-05 23:49:19", "user": "gregw", "url": "https://github.com/eclipse/jetty.project/issues/688", "commitsDetails": [], "ttf": 0.0002777777777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "clauso", "filteredCommits": ["596e372c7a412f4a64e9b6c563292527531fcbc5", "0e6833b7707d677c9991e5b30dad4f0a68bab8dd", "a6276c30177c61965a4bcf6daa86e0e3cbbef9f1", "5b50e41e7e4af09df68ac4fec28197d36a06a80e"], "commits": {"a6276c30177c61965a4bcf6daa86e0e3cbbef9f1": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "5b50e41e7e4af09df68ac4fec28197d36a06a80e": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "596e372c7a412f4a64e9b6c563292527531fcbc5": {"commitUser": "joakime", "commitGHEventType": "closed"}, "461adb8dd358581c26c8ce164187e4f950554452": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "0e6833b7707d677c9991e5b30dad4f0a68bab8dd": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2016-07-05 14:05:21", "commitsDetails": [{"commitMessage": "Issue #687 - Adding AllowSymLinkAliasCheckerTest\n\n+ Replicated, in test case form, the example present in the\n  filed issue.  All tests pass.\n", "commitParents": ["650db59e69e9068635c372631c11deec2435b7e0"], "commitHash": "a6276c30177c61965a4bcf6daa86e0e3cbbef9f1", "commitSpoonAstDiffStats": [{"spoonFilePath": "AllowSymLinkAliasCheckerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.AllowSymLinkAliasCheckerTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "a6276c30177c61965a4bcf6daa86e0e3cbbef9f1 tags/jetty-9.3.11.v20160721~68", "commitUser": "joakime", "authoredDateTime": "2016-07-07 09:11:19", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 182, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/handler/AllowSymLinkAliasCheckerTest.java", "insertions": 182, "deletions": 0}, {"lines": 17, "filePath": "jetty-server/pom.xml", "insertions": 12, "deletions": 5}], "commitDateTime": "2016-07-07 09:11:19", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #687\n\nAlias should be absolute not relative\n", "commitParents": ["c913bc7150a0d227dbe8ff8601b25f429af26ba1"], "commitHash": "5b50e41e7e4af09df68ac4fec28197d36a06a80e", "commitSpoonAstDiffStats": [{"spoonFilePath": "PathResource.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.PathResource.checkAliasPath()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}], "nameRev": "5b50e41e7e4af09df68ac4fec28197d36a06a80e tags/jetty-9.3.11.v20160721~74", "commitUser": "gregw", "authoredDateTime": "2016-07-06 15:30:39", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/resource/PathResource.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2016-07-06 16:46:22", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #699 from WalkerWatch/jetty-9.3.x\n\nUpdates to Intro, Chapter 5 and ResourceHandler example for #687.", "commitParents": ["172ee4266ccb8bf72331ad14f1fb875caba8716e", "db9a8dc9626d5b6b057295552783f2a7d5e946a0"], "commitHash": "461adb8dd358581c26c8ce164187e4f950554452", "commitSpoonAstDiffStats": [{"spoonFilePath": "SplitFileServer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.embedded.SplitFileServer.main(java.lang.String[])", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 2, "TOT": 4}]}], "nameRev": "461adb8dd358581c26c8ce164187e4f950554452 tags/jetty-9.3.11.v20160721~65", "commitUser": "joakime", "authoredDateTime": "2016-07-07 15:18:38", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 1, "filePath": "jetty-documentation/src/main/asciidoc/development/part.adoc", "insertions": 1, "deletions": 0}, {"lines": 18, "filePath": "jetty-documentation/src/main/asciidoc/configuring/contexts/configuring-virtual-hosts.adoc", "insertions": 9, "deletions": 9}, {"lines": 1, "filePath": "jetty-documentation/src/main/asciidoc/configuring/part.adoc", "insertions": 1, "deletions": 0}, {"lines": 8, "filePath": "jetty-documentation/src/main/asciidoc/configuring/contexts/setting-form-size.adoc", "insertions": 4, "deletions": 4}, {"lines": 23, "filePath": "jetty-documentation/src/main/asciidoc/quick-start/introduction/what-is-jetty.adoc", "insertions": 20, "deletions": 3}, {"lines": 20, "filePath": "jetty-documentation/src/main/asciidoc/configuring/contexts/temporary-directories.adoc", "insertions": 10, "deletions": 10}, {"lines": 1, "filePath": "jetty-documentation/src/main/asciidoc/administration/part.adoc", "insertions": 1, "deletions": 0}, {"lines": 8, "filePath": "jetty-documentation/src/main/asciidoc/administration/extras/resource-handler.adoc", "insertions": 4, "deletions": 4}, {"lines": 10, "filePath": "examples/embedded/src/main/java/org/eclipse/jetty/embedded/SplitFileServer.java", "insertions": 6, "deletions": 4}, {"lines": 24, "filePath": "jetty-documentation/src/main/asciidoc/configuring/contexts/custom-error-pages.adoc", "insertions": 12, "deletions": 12}, {"lines": 28, "filePath": "jetty-documentation/src/main/asciidoc/configuring/contexts/serving-webapp-from-particular-port.adoc", "insertions": 20, "deletions": 8}, {"lines": 1, "filePath": "jetty-documentation/src/main/asciidoc/reference/part.adoc", "insertions": 1, "deletions": 0}, {"lines": 1, "filePath": "jetty-documentation/src/main/asciidoc/quick-start/part.adoc", "insertions": 1, "deletions": 0}], "commitDateTime": "2016-07-07 15:18:38", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #687 - Normalizing resolved symlinks\n", "commitParents": ["8c918526cb432190455365f9b29f9f12141cf3a7"], "commitHash": "596e372c7a412f4a64e9b6c563292527531fcbc5", "commitSpoonAstDiffStats": [{"spoonFilePath": "AllowSymLinkAliasChecker.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.AllowSymLinkAliasChecker.check(java.lang.String,org.eclipse.jetty.util.resource.Resource)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "AllowSymLinkAliasCheckerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.AllowSymLinkAliasCheckerTest.setupRoot()", "DEL": 0, "INS": 3, "UPD": 2, "MOV": 4, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.server.handler.AllowSymLinkAliasCheckerTest.params()", "DEL": 11, "INS": 7, "UPD": 5, "MOV": 13, "TOT": 36}]}], "nameRev": "596e372c7a412f4a64e9b6c563292527531fcbc5 tags/jetty-9.3.11.v20160721~60", "commitUser": "joakime", "authoredDateTime": "2016-07-11 10:31:07", "commitGHEventType": "closed", "commitGitStats": [{"lines": 2, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/AllowSymLinkAliasChecker.java", "insertions": 1, "deletions": 1}, {"lines": 47, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/handler/AllowSymLinkAliasCheckerTest.java", "insertions": 36, "deletions": 11}], "commitDateTime": "2016-07-11 10:31:07", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #687 - Simplifying AllowSymLinkAliasChecker logic\n", "commitParents": ["8efc07ae1d870d7798dbd09891cc1403e40fd28e"], "commitHash": "0e6833b7707d677c9991e5b30dad4f0a68bab8dd", "commitSpoonAstDiffStats": [{"spoonFilePath": "AllowSymLinkAliasChecker.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.AllowSymLinkAliasChecker.check(java.lang.String,org.eclipse.jetty.util.resource.Resource)", "DEL": 2, "INS": 2, "UPD": 8, "MOV": 24, "TOT": 36}, {"spoonMethodName": "org.eclipse.jetty.server.handler.AllowSymLinkAliasChecker.hasSymbolicLink(java.nio.file.Path)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "0e6833b7707d677c9991e5b30dad4f0a68bab8dd tags/jetty-9.3.11.v20160721~58", "commitUser": "joakime", "authoredDateTime": "2016-07-12 11:39:58", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 84, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/AllowSymLinkAliasChecker.java", "insertions": 30, "deletions": 54}], "commitDateTime": "2016-07-12 11:39:58", "spoonStatsSkippedReason": ""}], "title": "AllowSymLinkAliasChecker not normalizing relative symlinks properly", "spoonStatsSummary": {"spoonMethodsChanged": 3, "DEL": 2, "INS": 5, "UPD": 8, "MOV": 26, "TOT": 41, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 88, "insertions": 32, "gitFilesChange": 2, "deletions": 56}, "closed": "2016-07-11 17:32:21", "statsSkippedReason": "", "body": "We use the following code:\n\n``` java\nResourceHandler fileResourceHandler = new ResourceHandler();\nfileResourceHandler.setDirectoriesListed(false);\nfileResourceHandler.setWelcomeFiles(new String[]{ \"index.html\" });\nfileResourceHandler.setResourceBase(\"./resources/website\");\nfileResourceHandler.setEtags(true);\n\nContextHandler fileResourceContext = new ContextHandler();\nfileResourceContext.setContextPath(\"/\");\nfileResourceContext.setAllowNullPathInfo(true);\nfileResourceContext.setHandler(fileResourceHandler);\n\n// Allow to follow symlinks\nfileResourceContext.addAliasCheck(new AllowSymLinkAliasChecker());\n```\n\nNow we updated jetty9 to the from 9.2.2 to the latest release (9.3.9) and at the same time we moved to openjdk-8 (7 before).\nAll of a sudden all symlinks do not work anymore. If I replace the symlink with the actual content, it works.\nIf I replace the last line of code above with\n\n``` java\nfileResourceContext.addAliasCheck(new ContextHandler.ApproveAliases());\n```\n\nit works too (even though ApproveAliases seems too permissive for following symlinks).\n\nSo it seems like the AllowSymLinkAliasChecker does not work anymore.\nOS is Ubuntu xenial.\n", "changesInPackagesGIT": ["jetty-util/src/main/java/org/eclipse/jetty/util/resource", "jetty-server/src/main/java/org/eclipse/jetty/server/handler"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.handler.AllowSymLinkAliasChecker.check(java.lang.String,org.eclipse.jetty.util.resource.Resource)", "org.eclipse.jetty.server.handler.AllowSymLinkAliasChecker.hasSymbolicLink(java.nio.file.Path)", "org.eclipse.jetty.util.resource.PathResource.checkAliasPath()"], "ttf": 6.000277777777778, "numCommits": 3, "url": "https://github.com/eclipse/jetty.project/issues/687"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "Zalathar", "filteredCommits": ["5af61cfc389987ac420e8b5af1b4cbafa4de0b1e"], "commits": {"5af61cfc389987ac420e8b5af1b4cbafa4de0b1e": {"commitUser": "gregw", "commitGHEventType": "closed"}}, "created": "2016-07-05 01:56:33", "commitsDetails": [{"commitMessage": "fix #685 SecureRequestCustomizer SslSession attribute\n", "commitParents": ["afcec96a2357f591c7a60bdbffb902ae2869550e"], "commitHash": "5af61cfc389987ac420e8b5af1b4cbafa4de0b1e", "commitSpoonAstDiffStats": [{"spoonFilePath": "SelectChannelServerSslTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ssl.SelectChannelServerSslTest.SecureRequestHandler", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.ssl.SelectChannelServerSslTest.init()", "DEL": 1, "INS": 5, "UPD": 0, "MOV": 0, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.server.ssl.SelectChannelServerSslTest.testSecureRequestCustomizer()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "SecureRequestCustomizer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.SecureRequestCustomizer.customize(javax.net.ssl.SSLEngine,org.eclipse.jetty.server.Request)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "HttpServerTestFixture.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpServerTestFixture.startServer(org.eclipse.jetty.server.ServerConnector)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpServerTestFixture.configureServer(org.eclipse.jetty.server.Handler)", "DEL": 1, "INS": 0, "UPD": 4, "MOV": 0, "TOT": 5}]}], "nameRev": "5af61cfc389987ac420e8b5af1b4cbafa4de0b1e tags/jetty-9.3.11.v20160721~77", "commitUser": "gregw", "authoredDateTime": "2016-07-06 11:55:41", "commitGHEventType": "closed", "commitGitStats": [{"lines": 2, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/SecureRequestCustomizer.java", "insertions": 1, "deletions": 1}, {"lines": 89, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ssl/SelectChannelServerSslTest.java", "insertions": 86, "deletions": 3}, {"lines": 10, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/HttpServerTestFixture.java", "insertions": 5, "deletions": 5}], "commitDateTime": "2016-07-06 11:55:41", "spoonStatsSkippedReason": ""}], "title": "SecureRequestCustomizer SSLSession attribute not set", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 2, "insertions": 1, "gitFilesChange": 1, "deletions": 1}, "closed": "2016-07-06 01:55:52", "statsSkippedReason": "", "body": "It looks like the code in [SecureRequestCustomizer](https://github.com/eclipse/jetty.project/blob/jetty-9.3.10.v20160621/jetty-server/src/main/java/org/eclipse/jetty/server/SecureRequestCustomizer.java) is trying to set the SSLSession attribute only if an attribute name is available, but instead it ends up setting the attribute only if the attribute name is empty.\n", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.SecureRequestCustomizer.customize(javax.net.ssl.SSLEngine,org.eclipse.jetty.server.Request)"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/685"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "janbartel", "filteredCommits": ["29e6c6c4a487e99d8f1fa1474b2a1cfe96eefb21"], "commits": {"29e6c6c4a487e99d8f1fa1474b2a1cfe96eefb21": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2016-07-01 07:47:37", "commitsDetails": [{"commitMessage": "Issue #682\n", "commitParents": ["3a52b461154042e194d2543e1448328076079434"], "commitHash": "29e6c6c4a487e99d8f1fa1474b2a1cfe96eefb21", "commitSpoonAstDiffStats": [{"spoonFilePath": "QuickStartWebApp.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.quickstart.QuickStartWebApp", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "29e6c6c4a487e99d8f1fa1474b2a1cfe96eefb21 tags/jetty-9.3.11.v20160721~80", "commitUser": "janbartel", "authoredDateTime": "2016-07-01 17:48:32", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 6, "filePath": "jetty-quickstart/README.txt", "insertions": 0, "deletions": 6}, {"lines": 1, "filePath": "jetty-quickstart/src/main/java/org/eclipse/jetty/quickstart/QuickStartWebApp.java", "insertions": 0, "deletions": 1}], "commitDateTime": "2016-07-01 17:48:32", "spoonStatsSkippedReason": ""}], "title": "Quickstart should not scan all container path jars", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 1, "insertions": 0, "gitFilesChange": 1, "deletions": 1}, "closed": "2016-07-06 03:56:06", "statsSkippedReason": "", "body": "QuickStartWebApp constructor sets a ContainerIncludeJarPattern that is too permissive (of *.jar)  and results in scanning of every jar in the container's classpath hierarchy.  The QuickStartWebApp should not set any ContainerIncludeJarPattern at all and leave it to a provided context xml file (or the jetty Deployer) to set the ContainerIncludeJarPattern.\n", "changesInPackagesGIT": ["jetty-quickstart/src/main/java/org/eclipse/jetty/quickstart"], "changesInPackagesSPOON": ["org.eclipse.jetty.quickstart.QuickStartWebApp"], "ttf": 4.000277777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/682"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug", "High Priority"], "user": "gregw", "filteredCommits": ["3a52b461154042e194d2543e1448328076079434"], "commits": {"3a52b461154042e194d2543e1448328076079434": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2016-06-30 23:25:19", "commitsDetails": [{"commitMessage": "Provisional fix for #681\n", "commitParents": ["77b91038dbcf770af2cbec2745c0c00c792a6c65"], "commitHash": "3a52b461154042e194d2543e1448328076079434", "commitSpoonAstDiffStats": [{"spoonFilePath": "SslConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.shutdownOutput()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 5, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "3a52b461154042e194d2543e1448328076079434 tags/jetty-9.3.11.v20160721~81", "commitUser": "gregw", "authoredDateTime": "2016-07-01 15:05:27", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 19, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ssl/SslConnection.java", "insertions": 12, "deletions": 7}], "commitDateTime": "2016-07-01 15:05:27", "spoonStatsSkippedReason": ""}], "title": "Infinite recursion in SslConnection", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 0, "INS": 2, "UPD": 0, "MOV": 5, "TOT": 7, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 19, "insertions": 12, "gitFilesChange": 1, "deletions": 7}, "closed": "2016-07-06 22:15:56", "statsSkippedReason": "", "body": "Please forgive the gigantic stack trace but I believe a bug very similar to \n\nhttps://bugs.eclipse.org/bugs/show_bug.cgi?id=441756\n\nis still present in the Jetty 9.3.10\n\nI can reproduce it always on my local system by simply pointing an older system (which uses an old Java HTTP client) to interact with my Jetty server, specifically to download some static files served by the default servlet.\n\nThe bug causes the Jetty server to die within seconds with an OutOfMemory error.\n\nI have managed to capture the heap dump and thanks to that the stacktrace that you see below:\n\n Stacks at the moment of snapshot capture Threads shown: 1 of 223\n\n```\n qtp1061804750-44741 tid=44741 [RUNNABLE] <--- OutOfMemoryError happened in this thread\njava.lang.OutOfMemoryError.<init>() OutOfMemoryError.java:48\njava.lang.Throwable.fillInStackTrace(int) Throwable.java\njava.lang.Throwable.fillInStackTrace() Throwable.java:783\njava.lang.Throwable.<init>(String) Throwable.java:265\njava.lang.Exception.<init>(String) Exception.java:66\njava.io.IOException.<init>(String) IOException.java:58\nsun.nio.ch.FileDispatcherImpl.write0(FileDescriptor, long, int) FileDispatcherImpl.java\nsun.nio.ch.SocketDispatcher.write(FileDescriptor, long, int) SocketDispatcher.java:47\nsun.nio.ch.IOUtil.writeFromNativeBuffer(FileDescriptor, ByteBuffer, long, NativeDispatcher) IOUtil.java:93\nsun.nio.ch.IOUtil.write(FileDescriptor, ByteBuffer, long, NativeDispatcher) IOUtil.java:51\nsun.nio.ch.SocketChannelImpl.write(ByteBuffer) SocketChannelImpl.java:471\norg.eclipse.jetty.io.ChannelEndPoint.flush(ByteBuffer[]) ChannelEndPoint.java:175\norg.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.flush(ByteBuffer[]) SslConnection.java:839\norg.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.shutdownOutput() SslConnection.java:928\norg.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.close(Throwable) SslConnection.java:967\norg.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.flush(ByteBuffer[]) SslConnection.java:893\norg.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.shutdownOutput() SslConnection.java:928\norg.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.close(Throwable) SslConnection.java:967\norg.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.flush(ByteBuffer[]) SslConnection.java:893\norg.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.shutdownOutput() SslConnection.java:928\norg.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.close(Throwable) SslConnection.java:967\norg.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.flush(ByteBuffer[]) SslConnection.java:893\norg.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.shutdownOutput() SslConnection.java:928\norg.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.close(Throwable) SslConnection.java:967\n\n[ =======  removed ==========] \n\n\norg.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.flush(ByteBuffer[]) SslConnection.java:893\norg.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.shutdownOutput() SslConnection.java:928\norg.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.close(Throwable) SslConnection.java:967\norg.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.flush(ByteBuffer[]) SslConnection.java:893\norg.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.shutdownOutput() SslConnection.java:928\norg.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.close(Throwable) SslConnection.java:967\norg.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.flush(ByteBuffer[]) SslConnection.java:893\norg.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.shutdownOutput() SslConnection.java:928\norg.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.close(Throwable) SslConnection.java:967\norg.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.flush(ByteBuffer[]) SslConnection.java:893\norg.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.shutdownOutput() SslConnection.java:928\norg.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.close(Throwable) SslConnection.java:967\norg.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.flush(ByteBuffer[]) SslConnection.java:893\norg.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.shutdownOutput() SslConnection.java:928\norg.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.close(Throwable) SslConnection.java:967\norg.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.flush(ByteBuffer[]) SslConnection.java:893\norg.eclipse.jetty.io.WriteFlusher.flush(ByteBuffer[]) WriteFlusher.java:420\norg.eclipse.jetty.io.WriteFlusher.write(Callback, ByteBuffer[]) WriteFlusher.java:313\norg.eclipse.jetty.io.AbstractEndPoint.write(Callback, ByteBuffer[]) AbstractEndPoint.java:140\norg.eclipse.jetty.server.HttpConnection$SendCallback.process() HttpConnection.java:733\norg.eclipse.jetty.util.IteratingCallback.processing() IteratingCallback.java:241\norg.eclipse.jetty.util.IteratingCallback.iterate() IteratingCallback.java:224\norg.eclipse.jetty.server.HttpConnection.send(MetaData$Response, boolean, ByteBuffer, boolean, Callback) HttpConnection.java:521\norg.eclipse.jetty.server.HttpChannel.sendResponse(MetaData$Response, ByteBuffer, boolean, Callback) HttpChannel.java:692\norg.eclipse.jetty.server.HttpChannel.write(ByteBuffer, boolean, Callback) HttpChannel.java:746\norg.eclipse.jetty.server.HttpOutput.write(ByteBuffer, boolean, Callback) HttpOutput.java:179\norg.eclipse.jetty.server.HttpOutput.sendContent(ByteBuffer, Callback) HttpOutput.java:676\norg.eclipse.jetty.server.HttpOutput.sendContent(HttpContent, Callback) HttpOutput.java:776\norg.eclipse.jetty.server.HttpOutput.sendContent(HttpContent) HttpOutput.java:654\norg.eclipse.jetty.servlet.DefaultServlet.sendData(HttpServletRequest, HttpServletResponse, boolean, HttpContent, Enumeration) DefaultServlet.java:970\norg.eclipse.jetty.servlet.DefaultServlet.doGet(HttpServletRequest, HttpServletResponse) DefaultServlet.java:525\njavax.servlet.http.HttpServlet.service(HttpServletRequest, HttpServletResponse) HttpServlet.java:687\njavax.servlet.http.HttpServlet.service(ServletRequest, ServletResponse) HttpServlet.java:790\norg.eclipse.jetty.servlet.ServletHolder.handle(Request, ServletRequest, ServletResponse) ServletHolder.java:837\norg.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletRequest, ServletResponse) ServletHandler.java:1689\norg.eclipse.jetty.servlets.PushCacheFilter.doFilter(ServletRequest, ServletResponse, FilterChain) PushCacheFilter.java:120\norg.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletRequest, ServletResponse) ServletHandler.java:1676\norg.eclipse.jetty.servlet.ServletHandler.doHandle(String, Request, HttpServletRequest, HttpServletResponse) ServletHandler.java:581\norg.eclipse.jetty.server.handler.ScopedHandler.handle(String, Request, HttpServletRequest, HttpServletResponse) ScopedHandler.java:143\norg.eclipse.jetty.security.SecurityHandler.handle(String, Request, HttpServletRequest, HttpServletResponse) SecurityHandler.java:548\norg.eclipse.jetty.server.session.SessionHandler.doHandle(String, Request, HttpServletRequest, HttpServletResponse) SessionHandler.java:226\norg.eclipse.jetty.server.handler.ContextHandler.doHandle(String, Request, HttpServletRequest, HttpServletResponse) ContextHandler.java:1180\norg.eclipse.jetty.servlet.ServletHandler.doScope(String, Request, HttpServletRequest, HttpServletResponse) ServletHandler.java:511\norg.eclipse.jetty.server.session.SessionHandler.doScope(String, Request, HttpServletRequest, HttpServletResponse) SessionHandler.java:185\norg.eclipse.jetty.server.handler.ContextHandler.doScope(String, Request, HttpServletRequest, HttpServletResponse) ContextHandler.java:1112\norg.eclipse.jetty.server.handler.ScopedHandler.handle(String, Request, HttpServletRequest, HttpServletResponse) ScopedHandler.java:141\norg.eclipse.jetty.server.handler.ContextHandlerCollection.handle(String, Request, HttpServletRequest, HttpServletResponse) ContextHandlerCollection.java:213\norg.eclipse.jetty.server.handler.HandlerCollection.handle(String, Request, HttpServletRequest, HttpServletResponse) HandlerCollection.java:119\norg.eclipse.jetty.server.handler.HandlerWrapper.handle(String, Request, HttpServletRequest, HttpServletResponse) HandlerWrapper.java:134\norg.eclipse.jetty.webapp.logging.ContextLogHandler.handle(String, Request, HttpServletRequest, HttpServletResponse) ContextLogHandler.java:62\norg.eclipse.jetty.server.handler.HandlerWrapper.handle(String, Request, HttpServletRequest, HttpServletResponse) HandlerWrapper.java:134\norg.eclipse.jetty.server.Server.handle(HttpChannel) Server.java:524\norg.eclipse.jetty.server.HttpChannel.handle() HttpChannel.java:319\norg.eclipse.jetty.server.HttpConnection.onFillable() HttpConnection.java:253\norg.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded() AbstractConnection.java:273\norg.eclipse.jetty.io.FillInterest.fillable() FillInterest.java:95\norg.eclipse.jetty.io.ssl.SslConnection.onFillable() SslConnection.java:201\norg.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded() AbstractConnection.java:273\norg.eclipse.jetty.io.FillInterest.fillable() FillInterest.java:95\norg.eclipse.jetty.io.SelectChannelEndPoint$2.run() SelectChannelEndPoint.java:93\norg.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.executeProduceConsume() ExecuteProduceConsume.java:303\norg.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume() ExecuteProduceConsume.java:148\norg.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run() ExecuteProduceConsume.java:136\norg.eclipse.jetty.util.thread.QueuedThreadPool.runJob(Runnable) QueuedThreadPool.java:671\norg.eclipse.jetty.util.thread.QueuedThreadPool$2.run() QueuedThreadPool.java:589\njava.lang.Thread.run() Thread.java:745\n```\n\nThis is definitely a bug with the code and I would think a very serious one.\n\nI can confirm that it did not occur with the previous Jetty release, 9.3.8.\n\nIf I can help in any ways to get this fixed please let me know.\n", "changesInPackagesGIT": ["jetty-io/src/main/java/org/eclipse/jetty/io/ssl"], "changesInPackagesSPOON": ["org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.shutdownOutput()", "org.eclipse.jetty.io.ssl.SslConnection"], "ttf": 5.000277777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/681"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "UnsungHero97", "filteredCommits": ["5718726a8c7ed7cf85d65d4d199ffb46eaa12131", "e82ed5afb960b03b0347094f137fc6b93890213c", "4055146dcdd954c62f482c70fa16c2bc0aec03fd"], "commits": {"5718726a8c7ed7cf85d65d4d199ffb46eaa12131": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "4055146dcdd954c62f482c70fa16c2bc0aec03fd": {"commitUser": "gregw", "commitGHEventType": "closed"}, "e82ed5afb960b03b0347094f137fc6b93890213c": {"commitUser": "gregw", "commitGHEventType": "closed"}}, "created": "2016-06-28 17:16:24", "commitsDetails": [{"commitMessage": "Incorrect default ALPN protocol #671\n\nCorrectly handle protocol aliases\n", "commitParents": ["21a618e6a863e13c11a1c776e995ec29d25967f7"], "commitHash": "5718726a8c7ed7cf85d65d4d199ffb46eaa12131", "commitSpoonAstDiffStats": [{"spoonFilePath": "NegotiatingServerConnectionFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.NegotiatingServerConnectionFactory.newConnection(org.eclipse.jetty.server.Connector,org.eclipse.jetty.io.EndPoint)", "DEL": 3, "INS": 2, "UPD": 1, "MOV": 5, "TOT": 11}]}], "nameRev": "5718726a8c7ed7cf85d65d4d199ffb46eaa12131 tags/jetty-9.3.11.v20160721~9", "commitUser": "gregw", "authoredDateTime": "2016-07-21 13:01:25", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 10, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/NegotiatingServerConnectionFactory.java", "insertions": 6, "deletions": 4}], "commitDateTime": "2016-07-21 13:01:25", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fix #671 Incorrect default SLPN protocol\n", "commitParents": ["14b71eaff4d3872c2ac280babf8a5eca0dba79a3"], "commitHash": "4055146dcdd954c62f482c70fa16c2bc0aec03fd", "commitSpoonAstDiffStats": [{"spoonFilePath": "ALPNNegotiationTest.java", "spoonMethods": []}, {"spoonFilePath": "NegotiatingServerConnectionFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.NegotiatingServerConnectionFactory.newConnection(org.eclipse.jetty.server.Connector,org.eclipse.jetty.io.EndPoint)", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 3, "TOT": 6}]}], "nameRev": "4055146dcdd954c62f482c70fa16c2bc0aec03fd tags/jetty-9.3.11.v20160721~52", "commitUser": "gregw", "authoredDateTime": "2016-07-13 11:09:33", "commitGHEventType": "closed", "commitGitStats": [{"lines": 1, "filePath": "jetty-http2/http2-alpn-tests/src/test/java/org/eclipse/jetty/http2/alpn/tests/ALPNNegotiationTest.java", "insertions": 0, "deletions": 1}, {"lines": 8, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/NegotiatingServerConnectionFactory.java", "insertions": 7, "deletions": 1}], "commitDateTime": "2016-07-13 11:09:53", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fix #671 Incorrect default ALPN protocol\n", "commitParents": ["c09251fbaf41efaff401b3175d06711723a91096"], "commitHash": "e82ed5afb960b03b0347094f137fc6b93890213c", "commitSpoonAstDiffStats": [{"spoonFilePath": "NegotiatingServerConnectionFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.NegotiatingServerConnectionFactory.newConnection(org.eclipse.jetty.server.Connector,org.eclipse.jetty.io.EndPoint)", "DEL": 2, "INS": 2, "UPD": 3, "MOV": 9, "TOT": 16}]}], "nameRev": "e82ed5afb960b03b0347094f137fc6b93890213c tags/jetty-9.3.11.v20160721~14", "commitUser": "gregw", "authoredDateTime": "2016-07-20 23:16:50", "commitGHEventType": "closed", "commitGitStats": [{"lines": 22, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/NegotiatingServerConnectionFactory.java", "insertions": 8, "deletions": 14}], "commitDateTime": "2016-07-20 23:16:50", "spoonStatsSkippedReason": ""}], "title": "Incorrect ALPN default protocol", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 6, "INS": 6, "UPD": 4, "MOV": 17, "TOT": 33, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 40, "insertions": 21, "gitFilesChange": 1, "deletions": 19}, "closed": "2016-11-07 14:28:09", "statsSkippedReason": "", "body": "I've set up Jetty 9.3.10.v20160621 with SSL support, and SSL Labs gives my server an A. However, I'm running into a strange problem when I try to enable `HTTP/2`. With it disabled, SSL Labs reports that my server supports `HSTS`, but with it enabled, the `HSTS` section shows `failed HTTP request`, and Jetty logs the following errors:\n\n```\n2016-06-28 12:50:07.626:WARN:oejut.QueuedThreadPool:qtp1851691492-18: \njava.lang.IllegalStateException: Internal error\n    at sun.security.ssl.SSLEngineImpl.initHandshaker(SSLEngineImpl.java:470)\n    at sun.security.ssl.SSLEngineImpl.readRecord(SSLEngineImpl.java:1007)\n    at sun.security.ssl.SSLEngineImpl.readNetRecord(SSLEngineImpl.java:907)\n    at sun.security.ssl.SSLEngineImpl.unwrap(SSLEngineImpl.java:781)\n    at javax.net.ssl.SSLEngine.unwrap(SSLEngine.java:624)\n    at org.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.fill(SslConnection.java:524)\n    at org.eclipse.jetty.http2.HTTP2Connection.fill(HTTP2Connection.java:106)\n    at org.eclipse.jetty.http2.HTTP2Connection.access$600(HTTP2Connection.java:37)\n    at org.eclipse.jetty.http2.HTTP2Connection$HTTP2Producer.produce(HTTP2Connection.java:179)\n    at org.eclipse.jetty.util.thread.strategy.ProduceExecuteConsume.execute(ProduceExecuteConsume.java:69)\n    at org.eclipse.jetty.http2.HTTP2Connection.onFillable(HTTP2Connection.java:97)\n    at org.eclipse.jetty.http2.HTTP2Connection$FillCallback.succeeded(HTTP2Connection.java:215)\n    at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)\n    at org.eclipse.jetty.io.ssl.SslConnection.onFillable(SslConnection.java:201)\n    at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:273)\n    at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)\n    at org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:93)\n    at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.executeProduceConsume(ExecuteProduceConsume.java:303)\n    at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume(ExecuteProduceConsume.java:148)\n    at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:136)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:671)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:589)\n    at java.lang.Thread.run(Thread.java:745)\n2016-06-28 12:50:07.628:WARN:oejut.QueuedThreadPool:qtp1851691492-18: Unexpected thread death: org.eclipse.jetty.util.thread.QueuedThreadPool$2@504bdcb8 in qtp1851691492{STARTED,10<=10<=200,i=5,q=0}\n2016-06-28 12:50:07.727:WARN:oejut.QueuedThreadPool:qtp1851691492-10: \njava.lang.IllegalStateException: Internal error\n    at sun.security.ssl.SSLEngineImpl.initHandshaker(SSLEngineImpl.java:470)\n    at sun.security.ssl.SSLEngineImpl.readRecord(SSLEngineImpl.java:1007)\n    at sun.security.ssl.SSLEngineImpl.readNetRecord(SSLEngineImpl.java:907)\n    at sun.security.ssl.SSLEngineImpl.unwrap(SSLEngineImpl.java:781)\n    at javax.net.ssl.SSLEngine.unwrap(SSLEngine.java:624)\n    at org.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.fill(SslConnection.java:524)\n    at org.eclipse.jetty.http2.HTTP2Connection.fill(HTTP2Connection.java:106)\n    at org.eclipse.jetty.http2.HTTP2Connection.access$600(HTTP2Connection.java:37)\n    at org.eclipse.jetty.http2.HTTP2Connection$HTTP2Producer.produce(HTTP2Connection.java:179)\n    at org.eclipse.jetty.util.thread.strategy.ProduceExecuteConsume.execute(ProduceExecuteConsume.java:69)\n    at org.eclipse.jetty.http2.HTTP2Connection.onFillable(HTTP2Connection.java:97)\n    at org.eclipse.jetty.http2.HTTP2Connection$FillCallback.succeeded(HTTP2Connection.java:215)\n    at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)\n    at org.eclipse.jetty.io.ssl.SslConnection.onFillable(SslConnection.java:201)\n    at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:273)\n    at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)\n    at org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:93)\n    at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.executeProduceConsume(ExecuteProduceConsume.java:303)\n    at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume(ExecuteProduceConsume.java:148)\n    at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:136)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:671)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:589)\n    at java.lang.Thread.run(Thread.java:745)\n2016-06-28 12:50:07.739:WARN:oejut.QueuedThreadPool:qtp1851691492-10: Unexpected thread death: org.eclipse.jetty.util.thread.QueuedThreadPool$2@504bdcb8 in qtp1851691492{STARTED,10<=10<=200,i=4,q=0}\n```\n\nWhat could be going wrong when I enable `HTTP/2`?\n\nI'm pretty confident that I've configured Jetty with SSL correctly since SSL Labs gives me an A when it tests my server, but I'm not sure how `HTTP/2` affects things. I'm happy to provide more details and config files if needed.\n\n**Environment Details**\n\n```\n$ java -version\nopenjdk version \"1.8.0_91\"\nOpenJDK Runtime Environment (build 1.8.0_91-8u91-b14-0ubuntu4~15.10.1-b14)\nOpenJDK 64-Bit Server VM (build 25.91-b14, mixed mode)\n```\n", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.NegotiatingServerConnectionFactory.newConnection(org.eclipse.jetty.server.Connector,org.eclipse.jetty.io.EndPoint)"], "ttf": 131.00027777777777, "numCommits": 3, "url": "https://github.com/eclipse/jetty.project/issues/671"}, {"labels": ["Bug"], "closed": "2017-03-01 16:59:14", "body": "In the class JsrEndpointEventDriver, the method \"onPing(ByteBuffer buffer)\" delegates to onPongMessage(Byteuffer buffer).\nBecause of that it is not possible for a user of the javax websocket api to differentiate between Pongs received in response to a Ping and incoming Ping messages, that the Endpoint responds to automatically (and therefore do not need to be handled manually). \nThe JSR-356 API does not include any way to handle pings manually.\n", "commits": {}, "title": "Javax websocket api: Pong message handler called upon receipt of Ping message", "created": "2016-06-23 15:23:57", "user": "dereszet", "url": "https://github.com/eclipse/jetty.project/issues/662", "commitsDetails": [], "ttf": 251.00027777777777}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["b2d6d06b48ebe2007a808f46b15b18d6d6da2ad0"], "commits": {"b2d6d06b48ebe2007a808f46b15b18d6d6da2ad0": {"commitUser": "joakime", "commitGHEventType": "closed"}}, "created": "2016-06-22 17:42:01", "commitsDetails": [{"commitMessage": "Fixes #661 -JsrExtension is missing hashCode() and equals()\n", "commitParents": ["2731ac1752ea1785934bb53f998002725e99552c"], "commitHash": "b2d6d06b48ebe2007a808f46b15b18d6d6da2ad0", "commitSpoonAstDiffStats": [{"spoonFilePath": "JsrExtension.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.JsrExtension.hashCode()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.JsrExtension.equals(java.lang.Object)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "b2d6d06b48ebe2007a808f46b15b18d6d6da2ad0 tags/jetty-9.3.11.M0~2^2^2", "commitUser": "joakime", "authoredDateTime": "2016-06-22 10:42:31", "commitGHEventType": "closed", "commitGitStats": [{"lines": 17, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/JsrExtension.java", "insertions": 17, "deletions": 0}], "commitDateTime": "2016-06-22 10:42:31", "spoonStatsSkippedReason": ""}], "title": "JsrExtension is missing hashCode() and equals()", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 17, "insertions": 17, "gitFilesChange": 1, "deletions": 0}, "closed": "2016-06-22 17:43:34", "statsSkippedReason": "", "body": "The JsrExtension implementation is missing the hashCode and equals methods.\n\nThese should only test the extension name.\n", "changesInPackagesGIT": ["jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356"], "changesInPackagesSPOON": ["org.eclipse.jetty.websocket.jsr356.JsrExtension.hashCode()", "org.eclipse.jetty.websocket.jsr356.JsrExtension.equals(java.lang.Object)"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/661"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "oyvindhorneland", "filteredCommits": ["c3173932f01fef85c88e81b6f696007d304199b3", "cfe5abf8e65c8f5b9ce5228fc2f76c1a6d3a3db0", "ecea486d0795299a3ef04538a62c64e71f5d66c3"], "commits": {"cfe5abf8e65c8f5b9ce5228fc2f76c1a6d3a3db0": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "ecea486d0795299a3ef04538a62c64e71f5d66c3": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "c3173932f01fef85c88e81b6f696007d304199b3": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2016-06-22 12:55:36", "commitsDetails": [{"commitMessage": "Revert \"Issue #660 - simplifying parameter extraction to prevent NPE\"\n\nThis reverts commit ecea486d0795299a3ef04538a62c64e71f5d66c3.\n", "commitParents": ["67f8a96eee91b4786808d9ad77d0f8fd03cf7df3"], "commitHash": "c3173932f01fef85c88e81b6f696007d304199b3", "commitSpoonAstDiffStats": [{"spoonFilePath": "Request.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Request.restoreParameters()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 3, "TOT": 4}]}], "nameRev": "c3173932f01fef85c88e81b6f696007d304199b3 tags/jetty-9.3.11.v20160721~95", "commitUser": "gregw", "authoredDateTime": "2016-06-23 12:43:29", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 13, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Request.java", "insertions": 10, "deletions": 3}], "commitDateTime": "2016-06-23 12:43:29", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #660 - simplifying parameter extraction to prevent NPE\n\n+ The checks in Request.restoreParameters() seem superfluous\n  as MultiMap.addAllValues() is null and empty set safe\n", "commitParents": ["cce7837e641718be1ea5a589ad229ef7bcce82fd"], "commitHash": "ecea486d0795299a3ef04538a62c64e71f5d66c3", "commitSpoonAstDiffStats": [{"spoonFilePath": "Request.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Request.restoreParameters()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 3, "TOT": 4}]}], "nameRev": "ecea486d0795299a3ef04538a62c64e71f5d66c3 tags/jetty-9.3.11.M0~2^2~1", "commitUser": "joakime", "authoredDateTime": "2016-06-22 09:53:24", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 13, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Request.java", "insertions": 3, "deletions": 10}], "commitDateTime": "2016-06-22 09:53:24", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #660 NPE in Request\n\nMade request more robust for calls after reset.\n", "commitParents": ["0e0fc77771598d11addba5c6e35236ec0ac7386f"], "commitHash": "cfe5abf8e65c8f5b9ce5228fc2f76c1a6d3a3db0", "commitSpoonAstDiffStats": [], "nameRev": "cfe5abf8e65c8f5b9ce5228fc2f76c1a6d3a3db0 tags/jetty-9.3.11.v20160721~91", "commitUser": "gregw", "authoredDateTime": "2016-06-24 13:35:04", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 4, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/LocalConnector.java", "insertions": 2, "deletions": 2}, {"lines": 262, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Request.java", "insertions": 145, "deletions": 117}], "commitDateTime": "2016-06-24 14:33:18", "spoonStatsSkippedReason": "tooManyChanges"}], "title": "NullPointerException in Request.getParameter: _parameters is null", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 1.0, "INS": 1.0, "UPD": 0.0, "MOV": 6.0, "TOT": 8.0, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 292, "insertions": 160, "gitFilesChange": 2, "deletions": 132}, "closed": "2016-06-28 13:29:05", "statsSkippedReason": "", "body": "**Version**: 9.3.9.v20160517 and 9.3.10.v20160621\n\n**Problem**: Encountering a NullPointerException when the first servlet filter tries to invoke request.getParameter for a POST request. \n\nDebug in Request class shows that \n- `_parameters` is null in Request.java:961. \n- `_queryParameters` is an empty list\n- `_contentParameters` is null\n\nSince `_queryParameters` is an empty list, `restoreParameters()` assigns `_parameters=_contentParameters`, which is in this case is null. If I manually in debug mode execute `extractContentParameters()`, `_contentParameters` is populated and the NullPointer is then avoided.\n\n**Stacktrace**:\n\n```\njava.lang.NullPointerException\n    at org.eclipse.jetty.server.Request.getParameter(Request.java:961)\n    at com.iknowbase.logging.http.RequestEntryFilter.getConversationId(RequestEntryFilter.java:131)\n    at com.iknowbase.logging.http.RequestEntryFilter.doFilterInternal(RequestEntryFilter.java:70)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1676)\n    at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:581)\n    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)\n    at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:548)\n    at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226)\n    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1180)\n    at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:511)\n    at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185)\n    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1112)\n    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\n    at org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(GzipHandler.java:397)\n    at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:119)\n    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:134)\n    at org.eclipse.jetty.server.Server.handle(Server.java:524)\n    at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:319)\n    at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:253)\n    at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:273)\n    at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)\n    at org.eclipse.jetty.io.ssl.SslConnection.onFillable(SslConnection.java:201)\n    at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:273)\n    at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)\n    at org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:93)\n    at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.executeProduceConsume(ExecuteProduceConsume.java:303)\n    at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume(ExecuteProduceConsume.java:148)\n    at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:136)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:671)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:589)\n    at java.lang.Thread.run(Thread.java:745)\n```\n", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.Request.restoreParameters()"], "ttf": 6.000277777777778, "numCommits": 3, "url": "https://github.com/eclipse/jetty.project/issues/660"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "sbordet", "filteredCommits": ["72393bc6665a3ff237d53c1741d2c11772a15b17"], "commits": {"72393bc6665a3ff237d53c1741d2c11772a15b17": {"commitUser": "sbordet", "commitGHEventType": "closed"}}, "created": "2016-06-22 09:21:02", "commitsDetails": [{"commitMessage": "Fixes #659 - CONNECT request fails spuriously.\n\nFixed by properly returning true from messageComplete() in case of\na 101 response or a 200 CONNECT response.\n", "commitParents": ["a07461f4bdf12cb4edf186b5b7ad66f26cc9aa61"], "commitHash": "72393bc6665a3ff237d53c1741d2c11772a15b17", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpReceiverOverHTTP.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.http.HttpReceiverOverHTTP.messageComplete()", "DEL": 1, "INS": 6, "UPD": 0, "MOV": 1, "TOT": 8}]}, {"spoonFilePath": "HttpProxy.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpProxy.CreateTunnelPromise.tunnelSucceeded(org.eclipse.jetty.io.EndPoint)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpClientTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpClientTest.testCONNECTWithHTTP10()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "72393bc6665a3ff237d53c1741d2c11772a15b17 tags/jetty-9.3.11.M0~6^2", "commitUser": "sbordet", "authoredDateTime": "2016-06-22 11:27:13", "commitGHEventType": "closed", "commitGitStats": [{"lines": 6, "filePath": "jetty-client/src/test/java/org/eclipse/jetty/client/HttpClientTest.java", "insertions": 6, "deletions": 0}, {"lines": 15, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/http/HttpReceiverOverHTTP.java", "insertions": 14, "deletions": 1}, {"lines": 3, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpProxy.java", "insertions": 3, "deletions": 0}], "commitDateTime": "2016-06-22 11:27:28", "spoonStatsSkippedReason": ""}], "title": "CONNECT request fails spuriously", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 1, "INS": 7, "UPD": 0, "MOV": 1, "TOT": 9, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 18, "insertions": 17, "gitFilesChange": 2, "deletions": 1}, "closed": "2016-06-22 09:27:35", "statsSkippedReason": "", "body": "HTTP `CONNECT` request may fail spuriously when the response finishes before the request.\n\nThe upgrade of the connection is triggered by a `CompleteListener`, which may be invoked either from the response side when the request is already finished, or from the request side when the response finishes before the request.\n\nIn the latter case, the connection is not upgraded yet, so `HttpReceiver` reads `0` and sets fill interest.\nLater, the `CONNECT` exchange terminates and now TLS bytes are exchanged; the connection becomes readable but without an associated exchange, leading to wrongly closing the connection.\n", "changesInPackagesGIT": ["jetty-client/src/main/java/org/eclipse/jetty/client/http", "jetty-client/src/main/java/org/eclipse/jetty/client"], "changesInPackagesSPOON": ["org.eclipse.jetty.client.http.HttpReceiverOverHTTP.messageComplete()", "org.eclipse.jetty.client.HttpProxy.CreateTunnelPromise.tunnelSucceeded(org.eclipse.jetty.io.EndPoint)"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/659"}, {"labels": ["Bug"], "closed": "2016-06-15 08:10:22", "body": "Reproduceable on jetty-9.3.x and master, so I assume also jetty-9.4.x too.\n\nHere's the log trace showing the problem from jetty-9.3.x:\n\n[1146] java -jar ../start.jar\n2016-06-10 17:51:15.694:INFO::main: Logging initialized @224ms\n2016-06-10 17:51:15.858:INFO:oejs.Server:main: jetty-9.3.10-SNAPSHOT\n2016-06-10 17:51:15.871:INFO:oejdp.ScanningAppProvider:main: Deployment monitor [file:///home/janb/src/jetty-eclipse/jetty-9.3.x/jetty-distribution/target/distribution/janb-base/webapps/] at interval 1\n2016-06-10 17:51:16.093:WARN::main: test webapp is deployed. DO NOT USE IN PRODUCTION!\n2016-06-10 17:51:16.097:INFO:oejw.StandardDescriptorProcessor:main: NO JSP Support for /test, did not find org.eclipse.jetty.jsp.JettyJspServlet\n2016-06-10 17:51:16.291:INFO:oejsh.ManagedAttributeListener:main: update PushFilter null->org.eclipse.jetty.servlets.PushCacheFilter@305b7c14 on o.e.j.w.WebAppContext@5b87ed94{/test,file:///tmp/jetty-test.war-_test-any-7997797429805663963.dir/webapp/,STARTING}{/test.war}\n2016-06-10 17:51:16.292:INFO:oejsh.ManagedAttributeListener:main: update QoSFilter null->org.eclipse.jetty.servlets.QoSFilter@bccb269 on o.e.j.w.WebAppContext@5b87ed94{/test,file:///tmp/jetty-test.war-_test-any-7997797429805663963.dir/webapp/,STARTING}{/test.war}\n2016-06-10 17:51:16.293:WARN:oeju.DeprecationWarning:main: Using @Deprecated Class org.eclipse.jetty.servlets.MultiPartFilter\n2016-06-10 17:51:16.294:WARN:oejs.ServletHolder:main: Unable to make package for jsp /jsp/foo/foo.jsp trying jsp.foo.foo.jsp instead\n2016-06-10 17:51:16.294:WARN:oejs.ServletHolder:main: Unable to make identifier for jsp foo.jsp trying foo_jsp instead\n2016-06-10 17:51:16.309:INFO:oejsh.ContextHandler:main: Started o.e.j.w.WebAppContext@5b87ed94{/test,file:///tmp/jetty-test.war-_test-any-7997797429805663963.dir/webapp/,AVAILABLE}{/test.war}\n2016-06-10 17:51:16.336:INFO:oejs.Server:main: Started @866ms\n\n2016-06-10 17:51:55.733:WARN:oejd.DeploymentManager:Scanner-0: Unable to reach node goal: undeployed\njava.lang.NullPointerException\n    at java.util.concurrent.ConcurrentHashMap.replaceNode(ConcurrentHashMap.java:1106)\n    at java.util.concurrent.ConcurrentHashMap.remove(ConcurrentHashMap.java:1097)\n    at org.eclipse.jetty.jmx.MBeanContainer.beanRemoved(MBeanContainer.java:221)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.removeEventListener(ContainerLifeCycle.java:565)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.remove(ContainerLifeCycle.java:534)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.removeBean(ContainerLifeCycle.java:519)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.removeEventListener(ContainerLifeCycle.java:568)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.remove(ContainerLifeCycle.java:534)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.removeBean(ContainerLifeCycle.java:519)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.removeEventListener(ContainerLifeCycle.java:568)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.remove(ContainerLifeCycle.java:534)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.removeBean(ContainerLifeCycle.java:519)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.unmanage(ContainerLifeCycle.java:453)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.unmanage(ContainerLifeCycle.java:437)\n    at org.eclipse.jetty.deploy.bindings.StandardStopper.processBinding(StandardStopper.java:41)\n    at org.eclipse.jetty.deploy.AppLifeCycle.runBindings(AppLifeCycle.java:188)\n    at org.eclipse.jetty.deploy.DeploymentManager.requestAppGoal(DeploymentManager.java:499)\n    at org.eclipse.jetty.deploy.DeploymentManager.requestAppGoal(DeploymentManager.java:459)\n    at org.eclipse.jetty.deploy.DeploymentManager.removeApp(DeploymentManager.java:410)\n    at org.eclipse.jetty.deploy.providers.ScanningAppProvider.fileChanged(ScanningAppProvider.java:192)\n    at org.eclipse.jetty.deploy.providers.WebAppProvider.fileChanged(WebAppProvider.java:415)\n    at org.eclipse.jetty.deploy.providers.ScanningAppProvider$1.fileChanged(ScanningAppProvider.java:70)\n    at org.eclipse.jetty.util.Scanner.reportChange(Scanner.java:664)\n    at org.eclipse.jetty.util.Scanner.reportDifferences(Scanner.java:532)\n    at org.eclipse.jetty.util.Scanner.scan(Scanner.java:392)\n    at org.eclipse.jetty.util.Scanner$1.run(Scanner.java:329)\n    at java.util.TimerThread.mainLoop(Timer.java:555)\n    at java.util.TimerThread.run(Timer.java:505)\n2016-06-10 17:51:55.844:WARN::Scanner-0: test webapp is deployed. DO NOT USE IN PRODUCTION!\n2016-06-10 17:51:55.845:INFO:oejw.StandardDescriptorProcessor:Scanner-0: NO JSP Support for /test, did not find org.eclipse.jetty.jsp.JettyJspServlet\n2016-06-10 17:51:55.878:INFO:oejsh.ManagedAttributeListener:Scanner-0: update PushFilter null->org.eclipse.jetty.servlets.PushCacheFilter@2fe36b7c on o.e.j.w.WebAppContext@46e5620b{/test,file:///tmp/jetty-test.war-_test-any-1236960566626231429.dir/webapp/,STARTING}{/test.war}\n2016-06-10 17:51:55.880:INFO:oejsh.ManagedAttributeListener:Scanner-0: update QoSFilter null->org.eclipse.jetty.servlets.QoSFilter@67a01fdd on o.e.j.w.WebAppContext@46e5620b{/test,file:///tmp/jetty-test.war-_test-any-1236960566626231429.dir/webapp/,STARTING}{/test.war}\n2016-06-10 17:51:55.881:WARN:oeju.DeprecationWarning:Scanner-0: Using @Deprecated Class org.eclipse.jetty.servlets.MultiPartFilter\n2016-06-10 17:51:55.881:WARN:oejs.ServletHolder:Scanner-0: Unable to make package for jsp /jsp/foo/foo.jsp trying jsp.foo.foo.jsp instead\n2016-06-10 17:51:55.882:WARN:oejs.ServletHolder:Scanner-0: Unable to make identifier for jsp foo.jsp trying foo_jsp instead\n2016-06-10 17:51:55.892:INFO:oejsh.ContextHandler:Scanner-0: Started o.e.j.w.WebAppContext@46e5620b{/test,file:///tmp/jetty-test.war-_test-any-1236960566626231429.dir/webapp/,AVAILABLE}{/test.war}\n^C2016-06-10 17:52:35.663:INFO:oejsh.ManagedAttributeListener:Thread-1: update PushFilter org.eclipse.jetty.servlets.PushCacheFilter@2fe36b7c->null on o.e.j.w.WebAppContext@46e5620b{/test,file:///tmp/jetty-test.war-_test-any-1236960566626231429.dir/webapp/,UNAVAILABLE}{/test.war}\n2016-06-10 17:52:35.664:INFO:oejsh.ManagedAttributeListener:Thread-1: update QoSFilter org.eclipse.jetty.servlets.QoSFilter@67a01fdd->null on o.e.j.w.WebAppContext@46e5620b{/test,file:///tmp/jetty-test.war-_test-any-1236960566626231429.dir/webapp/,UNAVAILABLE}{/test.war}\n2016-06-10 17:52:35.664:INFO:oejsh.ContextHandler:Thread-1: Stopped o.e.j.w.WebAppContext@46e5620b{/test,file:///tmp/jetty-test.war-_test-any-1236960566626231429.dir/webapp/,UNAVAILABLE}{/test.war}\n", "commits": {}, "title": "If jmx and websocket is enabled, redploying a context produces a NullPointerException", "created": "2016-06-10 07:56:34", "user": "janbartel", "url": "https://github.com/eclipse/jetty.project/issues/633", "commitsDetails": [], "ttf": 5.000277777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug", "Test"], "user": "janbartel", "filteredCommits": ["27ed0480b91ebf910a19f79911975f86dd2da9ec", "a6cfff85738e339d35c8cf7e0dd4f36aa54cfdb5"], "commits": {"a6cfff85738e339d35c8cf7e0dd4f36aa54cfdb5": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "27ed0480b91ebf910a19f79911975f86dd2da9ec": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "29fcd5035451809f35e05a0740b165d1a71153c7": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2016-06-10 00:59:52", "commitsDetails": [{"commitMessage": "Issue #632 fix jmx tests to use random jetty server port\n", "commitParents": ["7e3db100ab34eaebddf6c98827392e7d01c1e5c7"], "commitHash": "a6cfff85738e339d35c8cf7e0dd4f36aa54cfdb5", "commitSpoonAstDiffStats": [{"spoonFilePath": "JmxIT.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.test.jmx.JmxIT.testObtainRunningServerVersion()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.test.jmx.JmxIT", "DEL": 0, "INS": 2, "UPD": 2, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.test.jmx.JmxIT.getStringAttribute(javax.management.ObjectName,java.lang.String)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.test.jmx.JmxIT.disconnectFromMBeanServer()", "DEL": 0, "INS": 1, "UPD": 2, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.test.jmx.JmxIT.connectToMBeanServer()", "DEL": 0, "INS": 1, "UPD": 4, "MOV": 0, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.test.jmx.JmxIT.stopJetty()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.test.jmx.JmxIT.testAccessToEchoerMBean()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.test.jmx.JmxIT.getIntegerAttribute(javax.management.ObjectName,java.lang.String)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.test.jmx.JmxIT.testAccessToPingerMBean()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.test.jmx.JmxIT.startJetty()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.test.jmx.JmxIT.testBasic()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "PingIT.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.test.jmx.PingIT", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "a6cfff85738e339d35c8cf7e0dd4f36aa54cfdb5 tags/jetty-9.3.10.v20160621~41", "commitUser": "janbartel", "authoredDateTime": "2016-06-10 11:00:50", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 95, "filePath": "tests/test-jmx/jmx-webapp-it/src/test/java/org/eclipse/jetty/test/jmx/JmxIT.java", "insertions": 82, "deletions": 13}, {"lines": 41, "filePath": "tests/test-jmx/jmx-webapp-it/src/test/java/org/eclipse/jetty/test/jmx/PingIT.java", "insertions": 0, "deletions": 41}, {"lines": 87, "filePath": "tests/test-jmx/jmx-webapp-it/pom.xml", "insertions": 6, "deletions": 81}], "commitDateTime": "2016-06-10 11:46:15", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #632\n\nRemove unneeded scripts\n", "commitParents": ["a6cfff85738e339d35c8cf7e0dd4f36aa54cfdb5"], "commitHash": "27ed0480b91ebf910a19f79911975f86dd2da9ec", "commitSpoonAstDiffStats": [], "nameRev": "27ed0480b91ebf910a19f79911975f86dd2da9ec tags/jetty-9.3.10.v20160621~40", "commitUser": "janbartel", "authoredDateTime": "2016-06-10 11:52:32", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 19, "filePath": "tests/test-jmx/jmx-webapp-it/src/test/scripts/setup-jetty.sh", "insertions": 0, "deletions": 19}, {"lines": 11, "filePath": "tests/test-jmx/jmx-webapp-it/src/test/scripts/stop-jetty.sh", "insertions": 0, "deletions": 11}, {"lines": 17, "filePath": "tests/test-jmx/jmx-webapp-it/src/test/scripts/start-jetty.sh", "insertions": 0, "deletions": 17}, {"lines": 33, "filePath": "tests/test-jmx/jmx-webapp-it/pom.xml", "insertions": 0, "deletions": 33}], "commitDateTime": "2016-06-10 11:52:32", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #632\n\nFix jetty version number\n", "commitParents": ["d05865d555c81ab10aa2e775edad057dcb9dd7bf"], "commitHash": "29fcd5035451809f35e05a0740b165d1a71153c7", "commitSpoonAstDiffStats": [{"spoonFilePath": "Jetty.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.Jetty", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "JmxIT.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.test.jmx.JmxIT.startJetty()", "DEL": 1, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 3}]}], "nameRev": "29fcd5035451809f35e05a0740b165d1a71153c7 tags/jetty-10.0.0.alpha1~705^2~383", "commitUser": "janbartel", "authoredDateTime": "2016-06-10 16:53:52", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/Jetty.java", "insertions": 1, "deletions": 1}, {"lines": 6, "filePath": "tests/test-jmx/jmx-webapp-it/src/test/java/org/eclipse/jetty/test/jmx/JmxIT.java", "insertions": 2, "deletions": 4}], "commitDateTime": "2016-06-10 16:53:52", "spoonStatsSkippedReason": ""}], "title": "JMX tests rely on fixed port", "spoonStatsSummary": {"spoonMethodsChanged": 12, "DEL": 2.0, "INS": 7.0, "UPD": 12.0, "MOV": 0.0, "TOT": 21.0, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 0, "insertions": 0, "gitFilesChange": 0, "deletions": 0}, "closed": "2016-06-15 07:04:43", "statsSkippedReason": "", "body": "The jmx-webapp-it integration tests rely on starting a jetty distro on a fixed port. This can conflict with the local environment. Test needs to use a random available port.\n", "changesInPackagesGIT": [], "changesInPackagesSPOON": ["org.eclipse.jetty.test.jmx.JmxIT.testObtainRunningServerVersion()", "org.eclipse.jetty.test.jmx.JmxIT.testBasic()", "org.eclipse.jetty.test.jmx.JmxIT.connectToMBeanServer()", "org.eclipse.jetty.test.jmx.JmxIT", "org.eclipse.jetty.test.jmx.JmxIT.getStringAttribute(javax.management.ObjectName,java.lang.String)", "org.eclipse.jetty.test.jmx.JmxIT.disconnectFromMBeanServer()", "org.eclipse.jetty.test.jmx.JmxIT.getIntegerAttribute(javax.management.ObjectName,java.lang.String)", "org.eclipse.jetty.test.jmx.JmxIT.stopJetty()", "org.eclipse.jetty.test.jmx.PingIT", "org.eclipse.jetty.test.jmx.JmxIT.testAccessToEchoerMBean()", "org.eclipse.jetty.test.jmx.JmxIT.testAccessToPingerMBean()", "org.eclipse.jetty.test.jmx.JmxIT.startJetty()"], "ttf": 5.000277777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/632"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug", "High Priority"], "user": "gregw", "filteredCommits": ["b40c2ae66fe223b29d490b2993c6e919bc56ea3b", "bc87cf0ab422eec436944866de4e280d9730d516", "59540f552cfc459785f2a5f946ac7bcce42b020d", "d4c1bec34073d47a3cb55b200a0448fa37c0f126", "2609c89d2230191383203f93e26fcec5f5cb0dce", "f724d36646af3fc53bf6da3415ad77a83a5cdeba"], "commits": {"d4c1bec34073d47a3cb55b200a0448fa37c0f126": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "bc87cf0ab422eec436944866de4e280d9730d516": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "b40c2ae66fe223b29d490b2993c6e919bc56ea3b": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "2609c89d2230191383203f93e26fcec5f5cb0dce": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "126e58c7cca4596b16be45f61e6d009deb23aadf": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "f724d36646af3fc53bf6da3415ad77a83a5cdeba": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "59540f552cfc459785f2a5f946ac7bcce42b020d": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2016-06-08 05:38:02", "commitsDetails": [{"commitMessage": "Fixes #624 cleanup\n", "commitParents": ["126e58c7cca4596b16be45f61e6d009deb23aadf"], "commitHash": "d4c1bec34073d47a3cb55b200a0448fa37c0f126", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpChannelState.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.unhandle()", "DEL": 2, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 5}]}], "nameRev": "d4c1bec34073d47a3cb55b200a0448fa37c0f126 tags/jetty-9.3.11.M0~6^2~2", "commitUser": "gregw", "authoredDateTime": "2016-06-22 18:58:31", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 7, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannelState.java", "insertions": 3, "deletions": 4}], "commitDateTime": "2016-06-22 18:58:31", "spoonStatsSkippedReason": ""}, {"commitMessage": "Revert \"Debug #624\"\n\nThis reverts commit b40c2ae66fe223b29d490b2993c6e919bc56ea3b.\n", "commitParents": ["35077c9803f6d5aecf4a8d5f3d0a5b92298c8f27"], "commitHash": "bc87cf0ab422eec436944866de4e280d9730d516", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpOutput.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpOutput.AsyncICB.onCompleteFailure(java.lang.Throwable)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.HttpOutput.setWriteListener(javax.servlet.WriteListener)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.HttpOutput.AsyncICB.onCompleteSuccess()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "HttpInput.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpInput.wake()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "HttpChannel.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannel.getDispatchedFrom()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannel.getRunnable()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannel", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpChannelState.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.complete()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.scheduleDispatch()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}]}], "nameRev": "bc87cf0ab422eec436944866de4e280d9730d516 tags/jetty-9.3.10.v20160621~21", "commitUser": "gregw", "authoredDateTime": "2016-06-15 10:32:10", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpInput.java", "insertions": 1, "deletions": 1}, {"lines": 6, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpOutput.java", "insertions": 3, "deletions": 3}, {"lines": 4, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannelState.java", "insertions": 2, "deletions": 2}, {"lines": 25, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannel.java", "insertions": 0, "deletions": 25}], "commitDateTime": "2016-06-15 10:32:10", "spoonStatsSkippedReason": ""}, {"commitMessage": "Debug #624\n\nThis commit is instrumentation to be executed in the CI system to debug #624\nThis commit should be reverted once the test has failed again!\n", "commitParents": ["19e52ab9c48edfe1590603a95637457afa32cfc6"], "commitHash": "b40c2ae66fe223b29d490b2993c6e919bc56ea3b", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpOutput.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpOutput.AsyncICB.onCompleteFailure(java.lang.Throwable)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.HttpOutput.setWriteListener(javax.servlet.WriteListener)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.HttpOutput.AsyncICB.onCompleteSuccess()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "HttpInput.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpInput.wake()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "HttpChannel.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannel.getDispatchedFrom()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannel.getRunnable()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannel", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpChannelState.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.scheduleDispatch()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.complete()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "LocalAsyncContextTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.LocalAsyncContextTest.init()", "DEL": 1, "INS": 1, "UPD": 1, "MOV": 1, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.server.LocalAsyncContextTest.testSuspendTimeout()", "DEL": 2, "INS": 2, "UPD": 0, "MOV": 1, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.server.LocalAsyncContextTest", "DEL": 0, "INS": 2, "UPD": 3, "MOV": 0, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.server.LocalAsyncContextTest.testTwoCycles()", "DEL": 2, "INS": 2, "UPD": 0, "MOV": 1, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.server.LocalAsyncContextTest.1.onComplete(javax.servlet.AsyncEvent)", "DEL": 2, "INS": 2, "UPD": 1, "MOV": 7, "TOT": 12}, {"spoonMethodName": "org.eclipse.jetty.server.LocalAsyncContextTest.1.onError(javax.servlet.AsyncEvent)", "DEL": 2, "INS": 2, "UPD": 1, "MOV": 7, "TOT": 12}]}], "nameRev": "b40c2ae66fe223b29d490b2993c6e919bc56ea3b tags/jetty-9.3.10.v20160621~37", "commitUser": "gregw", "authoredDateTime": "2016-06-11 10:33:48", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpInput.java", "insertions": 1, "deletions": 1}, {"lines": 6, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpOutput.java", "insertions": 3, "deletions": 3}, {"lines": 4, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannelState.java", "insertions": 2, "deletions": 2}, {"lines": 25, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannel.java", "insertions": 25, "deletions": 0}, {"lines": 77, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/LocalAsyncContextTest.java", "insertions": 62, "deletions": 15}], "commitDateTime": "2016-06-11 10:33:48", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #624 Fix onCompleted race\n", "commitParents": ["f4c13e5f544a581e9489f2531f532b63a6d4b9fd"], "commitHash": "2609c89d2230191383203f93e26fcec5f5cb0dce", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpChannelState.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.handling()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "2609c89d2230191383203f93e26fcec5f5cb0dce tags/jetty-9.3.10.v20160621~45", "commitUser": "gregw", "authoredDateTime": "2016-06-08 16:22:53", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannelState.java", "insertions": 0, "deletions": 2}], "commitDateTime": "2016-06-08 16:22:53", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #624 cleanup\n", "commitParents": ["59540f552cfc459785f2a5f946ac7bcce42b020d"], "commitHash": "126e58c7cca4596b16be45f61e6d009deb23aadf", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpChannelState.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.unhandle()", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.scheduleTimeout()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 2, "TOT": 3}]}], "nameRev": "126e58c7cca4596b16be45f61e6d009deb23aadf tags/jetty-9.3.11.M0~6^2~3", "commitUser": "gregw", "authoredDateTime": "2016-06-22 16:47:00", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 14, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannelState.java", "insertions": 3, "deletions": 11}], "commitDateTime": "2016-06-22 16:47:00", "spoonStatsSkippedReason": ""}, {"commitMessage": "Cleanup #624\n\nremoved excess test code\n", "commitParents": ["bc87cf0ab422eec436944866de4e280d9730d516"], "commitHash": "f724d36646af3fc53bf6da3415ad77a83a5cdeba", "commitSpoonAstDiffStats": [{"spoonFilePath": "LocalAsyncContextTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.LocalAsyncContextTest.init()", "DEL": 1, "INS": 1, "UPD": 2, "MOV": 1, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.server.LocalAsyncContextTest.2.onError(javax.servlet.AsyncEvent)", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 5, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.server.LocalAsyncContextTest.2.onComplete(javax.servlet.AsyncEvent)", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 5, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.server.LocalAsyncContextTest.testSuspendTimeout()", "DEL": 2, "INS": 2, "UPD": 1, "MOV": 4, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.server.LocalAsyncContextTest", "DEL": 2, "INS": 0, "UPD": 4, "MOV": 0, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.server.LocalAsyncContextTest.testTwoCycles()", "DEL": 2, "INS": 2, "UPD": 1, "MOV": 4, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.server.LocalAsyncContextTest.1.onError(javax.servlet.AsyncEvent)", "DEL": 2, "INS": 2, "UPD": 3, "MOV": 12, "TOT": 19}, {"spoonMethodName": "org.eclipse.jetty.server.LocalAsyncContextTest.1.onComplete(javax.servlet.AsyncEvent)", "DEL": 2, "INS": 2, "UPD": 3, "MOV": 12, "TOT": 19}]}], "nameRev": "f724d36646af3fc53bf6da3415ad77a83a5cdeba tags/jetty-9.3.10.v20160621~20", "commitUser": "gregw", "authoredDateTime": "2016-06-15 10:38:40", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 105, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/LocalAsyncContextTest.java", "insertions": 31, "deletions": 74}], "commitDateTime": "2016-06-15 10:38:40", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #624\n", "commitParents": ["baae86fcefd5b5c1689b35f299749022da446ffb"], "commitHash": "59540f552cfc459785f2a5f946ac7bcce42b020d", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpChannelState.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.scheduleTimeout(org.eclipse.jetty.server.AsyncContextEvent)", "DEL": 3, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.unhandle()", "DEL": 4, "INS": 2, "UPD": 0, "MOV": 2, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannelState.scheduleTimeout()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "59540f552cfc459785f2a5f946ac7bcce42b020d tags/jetty-9.3.11.M0~6^2~4", "commitUser": "gregw", "authoredDateTime": "2016-06-22 16:31:25", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 13, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannelState.java", "insertions": 6, "deletions": 7}], "commitDateTime": "2016-06-22 16:31:25", "spoonStatsSkippedReason": ""}], "title": "AsyncContext.onCompleted called twice", "spoonStatsSummary": {"spoonMethodsChanged": 13, "DEL": 19, "INS": 13, "UPD": 0, "MOV": 16, "TOT": 48, "spoonFilesChanged": 4}, "gitStatsSummary": {"lines": 96, "insertions": 46, "gitFilesChange": 4, "deletions": 50}, "closed": "2016-06-17 02:41:58", "statsSkippedReason": "", "body": "at [this point in the 9.3.x branch](https://github.com/eclipse/jetty.project/tree/f4c13e5f544a581e9489f2531f532b63a6d4b9fd) the CI system gave the following error:\n\n```\nError Message\n\nexpected:<0> but was:<1>\nStacktrace\n\njava.lang.AssertionError: expected:<0> but was:<1>\n    at org.junit.Assert.fail(Assert.java:88)\n    at org.junit.Assert.failNotEquals(Assert.java:834)\n    at org.junit.Assert.assertEquals(Assert.java:118)\n    at org.junit.Assert.assertEquals(Assert.java:144)\n    at org.eclipse.jetty.server.LocalAsyncContextTest.spinAssertEquals(LocalAsyncContextTest.java:657)\n    at org.eclipse.jetty.server.LocalAsyncContextTest.spinAssertEquals(LocalAsyncContextTest.java:633)\n    at org.eclipse.jetty.server.LocalAsyncContextTest.testTwoCycles(LocalAsyncContextTest.java:224)\nStandard Error\n\n2016-06-08 02:05:08.730:INFO:oejs.Server:main: jetty-9.3.10-SNAPSHOT\n2016-06-08 02:05:08.736:INFO:oejs.AbstractConnector:main: Started LocalConnector@33cb5951{HTTP/1.1,[http/1.1]}\n2016-06-08 02:05:08.736:INFO:oejs.Server:main: Started @46163ms\njava.lang.Throwable\n    at org.eclipse.jetty.server.LocalAsyncContextTest$1.onComplete(LocalAsyncContextTest.java:553)\n    at org.eclipse.jetty.server.HttpChannelState$3.run(HttpChannelState.java:680)\n    at org.eclipse.jetty.server.HttpChannelState.runInContext(HttpChannelState.java:897)\n    at org.eclipse.jetty.server.HttpChannelState.onComplete(HttpChannelState.java:695)\n    at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:451)\n    at org.eclipse.jetty.server.HttpChannel.run(HttpChannel.java:266)\n    at org.eclipse.jetty.server.HttpChannelState.runInContext(HttpChannelState.java:897)\n    at org.eclipse.jetty.server.HttpChannelState.complete(HttpChannelState.java:597)\n    at org.eclipse.jetty.server.AsyncContextState.complete(AsyncContextState.java:99)\n    at org.eclipse.jetty.server.LocalAsyncContextTest$SuspendHandler$1.run(LocalAsyncContextTest.java:420)\njava.lang.Throwable\n    at org.eclipse.jetty.server.LocalAsyncContextTest$1.onComplete(LocalAsyncContextTest.java:553)\n    at org.eclipse.jetty.server.HttpChannelState$3.run(HttpChannelState.java:680)\n    at org.eclipse.jetty.server.HttpChannelState.runInContext(HttpChannelState.java:897)\n    at org.eclipse.jetty.server.HttpChannelState.onComplete(HttpChannelState.java:695)\n    at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:451)\n    at org.eclipse.jetty.server.HttpChannel.run(HttpChannel.java:266)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:671)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:589)\n    at java.lang.Thread.run(Thread.java:745)\n2016-06-08 02:05:09.053:WARN:oejs.HttpChannelState:qtp225290371-418: \njava.lang.IllegalStateException\n    at org.eclipse.jetty.server.LocalAsyncContextTest$1.onComplete(LocalAsyncContextTest.java:559)\n    at org.eclipse.jetty.server.HttpChannelState$3.run(HttpChannelState.java:680)\n    at org.eclipse.jetty.server.HttpChannelState.runInContext(HttpChannelState.java:897)\n    at org.eclipse.jetty.server.HttpChannelState.onComplete(HttpChannelState.java:695)\n    at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:451)\n    at org.eclipse.jetty.server.HttpChannel.run(HttpChannel.java:266)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:671)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:589)\n    at java.lang.Thread.run(Thread.java:745)\n2016-06-08 02:05:19.050:INFO:oejs.AbstractConnector:main: Stopped LocalConnector@33cb5951{HTTP/1.1,[http/1.1]}\n```\n\nThis indicates that onComplete has been called twice!      It is strange that the HttpChannel.run has been called twice, but even if it has been, the atomic state should protect against the double invocation.\n", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.HttpChannelState.complete()", "org.eclipse.jetty.server.HttpChannelState.scheduleTimeout(org.eclipse.jetty.server.AsyncContextEvent)", "org.eclipse.jetty.server.HttpChannel.getRunnable()", "org.eclipse.jetty.server.HttpOutput.setWriteListener(javax.servlet.WriteListener)", "org.eclipse.jetty.server.HttpChannelState.scheduleTimeout()", "org.eclipse.jetty.server.HttpChannel.getDispatchedFrom()", "org.eclipse.jetty.server.HttpChannelState.unhandle()", "org.eclipse.jetty.server.HttpChannelState.handling()", "org.eclipse.jetty.server.HttpChannel", "org.eclipse.jetty.server.HttpOutput.AsyncICB.onCompleteSuccess()", "org.eclipse.jetty.server.HttpChannelState.scheduleDispatch()", "org.eclipse.jetty.server.HttpOutput.AsyncICB.onCompleteFailure(java.lang.Throwable)", "org.eclipse.jetty.server.HttpInput.wake()"], "ttf": 8.000277777777777, "numCommits": 5, "url": "https://github.com/eclipse/jetty.project/issues/624"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "gregw", "filteredCommits": ["f4c13e5f544a581e9489f2531f532b63a6d4b9fd"], "commits": {"f4c13e5f544a581e9489f2531f532b63a6d4b9fd": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2016-06-08 00:57:22", "commitsDetails": [{"commitMessage": "Issue #623 Add gzip suffix to etags in 304 response\n", "commitParents": ["f86d72696a2dd314233003a76f443f8abed16abf"], "commitHash": "f4c13e5f544a581e9489f2531f532b63a6d4b9fd", "commitSpoonAstDiffStats": [{"spoonFilePath": "GzipHandlerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.GzipHandlerTest.testETagNotGzipHandler()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.GzipHandlerTest.testETagGzipHandler()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.GzipHandlerTest.testIncludeGzipHandler()", "DEL": 0, "INS": 2, "UPD": 4, "MOV": 3, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.servlet.GzipHandlerTest.TestServlet.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 2, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.servlet.GzipHandlerTest.init()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.GzipHandlerTest.testGzipHandler()", "DEL": 0, "INS": 12, "UPD": 4, "MOV": 13, "TOT": 29}, {"spoonMethodName": "org.eclipse.jetty.servlet.GzipHandlerTest.testNotGzipHandler()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.GzipHandlerTest", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlet.GzipHandlerTest.testForwardGzipHandler()", "DEL": 0, "INS": 2, "UPD": 4, "MOV": 3, "TOT": 9}]}, {"spoonFilePath": "GzipHttpOutputInterceptor.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.gzip.GzipHttpOutputInterceptor.commit(java.nio.ByteBuffer,boolean,org.eclipse.jetty.util.Callback)", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 3, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.server.handler.gzip.GzipHttpOutputInterceptor.etagGzip(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "GzipHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "f4c13e5f544a581e9489f2531f532b63a6d4b9fd tags/jetty-9.3.10.v20160621~46", "commitUser": "gregw", "authoredDateTime": "2016-06-08 14:33:31", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 111, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/GzipHandlerTest.java", "insertions": 100, "deletions": 11}, {"lines": 25, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/gzip/GzipHttpOutputInterceptor.java", "insertions": 20, "deletions": 5}, {"lines": 2, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/gzip/GzipHandler.java", "insertions": 2, "deletions": 0}], "commitDateTime": "2016-06-08 14:33:49", "spoonStatsSkippedReason": ""}], "title": "Add --gzip suffix to 304 responses with ETAGs", "spoonStatsSummary": {"spoonMethodsChanged": 3, "DEL": 1, "INS": 4, "UPD": 0, "MOV": 3, "TOT": 8, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 27, "insertions": 22, "gitFilesChange": 2, "deletions": 5}, "closed": "2016-06-08 06:09:07", "statsSkippedReason": "", "body": "The Etag sent with a 304 response does not have the --gzip suffix even if the gtag that matched was for a gzipped resource.\n", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server/handler/gzip"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.handler.gzip.GzipHttpOutputInterceptor.commit(java.nio.ByteBuffer,boolean,org.eclipse.jetty.util.Callback)", "org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "org.eclipse.jetty.server.handler.gzip.GzipHttpOutputInterceptor.etagGzip(java.lang.String)"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/623"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "janbartel", "filteredCommits": ["f86d72696a2dd314233003a76f443f8abed16abf"], "commits": {"f86d72696a2dd314233003a76f443f8abed16abf": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2016-06-08 00:23:13", "commitsDetails": [{"commitMessage": "Issue #622\n", "commitParents": ["c8c4677e4db97dcce4b921f4f9c8979772bd63d9"], "commitHash": "f86d72696a2dd314233003a76f443f8abed16abf", "commitSpoonAstDiffStats": [{"spoonFilePath": "NoSqlSessionManager.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.nosql.NoSqlSessionManager.getSession(java.lang.String)", "DEL": 2, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 4}]}, {"spoonFilePath": "SessionExpiryTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.SessionExpiryTest.testRequestForSessionWithChangedTimeout()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.SessionExpiryTest.ChangeTimeoutServlet.doGet(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "f86d72696a2dd314233003a76f443f8abed16abf tags/jetty-9.3.10.v20160621~47", "commitUser": "janbartel", "authoredDateTime": "2016-06-08 10:23:36", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 69, "filePath": "tests/test-sessions/test-mongodb-sessions/src/test/java/org/eclipse/jetty/nosql/mongodb/SessionExpiryTest.java", "insertions": 69, "deletions": 0}, {"lines": 2, "filePath": "jetty-nosql/src/main/java/org/eclipse/jetty/nosql/NoSqlSessionManager.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2016-06-08 10:23:36", "spoonStatsSkippedReason": ""}], "title": "NoSqlSessionManager test for expired session does not use session.maxInactiveInterval", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 2, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 4, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 2, "insertions": 1, "gitFilesChange": 1, "deletions": 1}, "closed": "2016-06-08 01:09:21", "statsSkippedReason": "", "body": "NoSqlSessionManager line 105: the test for whether a newly loaded session is expired tests the session manager's inactive interval, not that of the session.\n", "changesInPackagesGIT": ["jetty-nosql/src/main/java/org/eclipse/jetty/nosql"], "changesInPackagesSPOON": ["org.eclipse.jetty.nosql.NoSqlSessionManager.getSession(java.lang.String)"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/622"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "gregw", "filteredCommits": ["7d6c05b5c08309d71bef5d3604b0226645ae12f9"], "commits": {"7d6c05b5c08309d71bef5d3604b0226645ae12f9": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2016-06-01 07:45:04", "commitsDetails": [{"commitMessage": "Issue #610 Ignore failing test\n", "commitParents": ["e9bb364eb2ca14633b76dfecd8b25cd1cda42165"], "commitHash": "7d6c05b5c08309d71bef5d3604b0226645ae12f9", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpClientRedirectTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpClientRedirectTest.testRedirectWithWrongScheme()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "7d6c05b5c08309d71bef5d3604b0226645ae12f9 tags/jetty-9.4.0.M0~3^2~5", "commitUser": "gregw", "authoredDateTime": "2016-06-01 17:46:04", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 1, "filePath": "jetty-client/src/test/java/org/eclipse/jetty/client/HttpClientRedirectTest.java", "insertions": 1, "deletions": 0}], "commitDateTime": "2016-06-01 17:46:04", "spoonStatsSkippedReason": ""}], "title": "HttpClientRedirectTest/testRedirectWithWrongScheme test failing in CI", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0, "insertions": 0, "gitFilesChange": 0, "deletions": 0}, "closed": "2016-10-17 16:21:16", "statsSkippedReason": "", "body": "[CI failure 0](http://ci.webtide.net:9099/job/jetty-9.4.x/org.eclipse.jetty$jetty-client/47/testReport/junit/org.eclipse.jetty.client/HttpClientRedirectTest/testRedirectWithWrongScheme_0_/)\n\n[CI failure 1](http://ci.webtide.net:9099/job/jetty-9.4.x/org.eclipse.jetty$jetty-client/47/testReport/junit/org.eclipse.jetty.client/HttpClientRedirectTest/testRedirectWithWrongScheme_1_/)\n", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 138.00027777777777, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/610"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "gregw", "filteredCommits": ["11b6e8ab49f5e17ed17158b77e05ac0338a8671b", "e9bb364eb2ca14633b76dfecd8b25cd1cda42165"], "commits": {"e9bb364eb2ca14633b76dfecd8b25cd1cda42165": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "11b6e8ab49f5e17ed17158b77e05ac0338a8671b": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2016-06-01 06:16:11", "commitsDetails": [{"commitMessage": "Issue #609 ignore failing test\n", "commitParents": ["c2831bf09ccc346436157f34452d7addc82d7870"], "commitHash": "e9bb364eb2ca14633b76dfecd8b25cd1cda42165", "commitSpoonAstDiffStats": [{"spoonFilePath": "ClientCloseTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.client.ClientCloseTest.testServerNoCloseHandshake()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "e9bb364eb2ca14633b76dfecd8b25cd1cda42165 tags/jetty-9.4.0.M0~3^2~6", "commitUser": "gregw", "authoredDateTime": "2016-06-01 16:16:39", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 3, "filePath": "jetty-websocket/websocket-client/src/test/java/org/eclipse/jetty/websocket/client/ClientCloseTest.java", "insertions": 3, "deletions": 0}], "commitDateTime": "2016-06-01 16:16:39", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #609 - fixing testcase\n", "commitParents": ["1e46576bf4f888656271b0cbd6fd1605b1808730"], "commitHash": "11b6e8ab49f5e17ed17158b77e05ac0338a8671b", "commitSpoonAstDiffStats": [{"spoonFilePath": "ClientCloseTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.client.ClientCloseTest.testNetworkCongestion()", "DEL": 0, "INS": 1, "UPD": 4, "MOV": 1, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.ClientCloseTest.CloseTrackingSocket", "DEL": 0, "INS": 1, "UPD": 3, "MOV": 1, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.ClientCloseTest.testServerNoCloseHandshake()", "DEL": 2, "INS": 3, "UPD": 2, "MOV": 2, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.ClientCloseTest.testProtocolException()", "DEL": 0, "INS": 2, "UPD": 1, "MOV": 2, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.ClientCloseTest.CloseTrackingSocket.clearQueues()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.ClientCloseTest.CloseTrackingSocket.onWebSocketError(java.lang.Throwable)", "DEL": 0, "INS": 1, "UPD": 4, "MOV": 0, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.ClientCloseTest.confirmConnection(org.eclipse.jetty.websocket.client.ClientCloseTest$CloseTrackingSocket,java.util.concurrent.Future,org.eclipse.jetty.websocket.common.test.IBlockheadServerConnection)", "DEL": 0, "INS": 1, "UPD": 7, "MOV": 1, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.ClientCloseTest.confirmServerReceivedCloseFrame(org.eclipse.jetty.websocket.common.test.IBlockheadServerConnection,int,org.hamcrest.Matcher)", "DEL": 0, "INS": 0, "UPD": 4, "MOV": 2, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.ClientCloseTest.testWriteException()", "DEL": 0, "INS": 1, "UPD": 2, "MOV": 2, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.ClientCloseTest.CloseTrackingSocket.getEndPoint()", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.ClientCloseTest.CloseTrackingSocket.assertNoCloseEvent()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.ClientCloseTest.CloseTrackingSocket.assertReceivedCloseEvent(int,org.hamcrest.Matcher,org.hamcrest.Matcher)", "DEL": 0, "INS": 0, "UPD": 5, "MOV": 2, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.ClientCloseTest.CloseTrackingSocket.assertReceivedError(java.lang.Class,org.hamcrest.Matcher)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.client.ClientCloseTest.testHalfClose()", "DEL": 0, "INS": 1, "UPD": 5, "MOV": 1, "TOT": 7}]}], "nameRev": "11b6e8ab49f5e17ed17158b77e05ac0338a8671b tags/jetty-9.3.17.RC0~6", "commitUser": "joakime", "authoredDateTime": "2017-03-01 09:57:23", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 99, "filePath": "jetty-websocket/websocket-client/src/test/java/org/eclipse/jetty/websocket/client/ClientCloseTest.java", "insertions": 47, "deletions": 52}], "commitDateTime": "2017-03-01 09:57:23", "spoonStatsSkippedReason": ""}], "title": "websocket ClientCloseTest testServerNoCloseHandshake is failing", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0, "insertions": 0, "gitFilesChange": 0, "deletions": 0}, "closed": "2017-03-01 16:57:56", "statsSkippedReason": "", "body": "Test ignored for now\n\n```\njava.lang.AssertionError: Client Close Event Occurred\nExpected: is <true>\n     but: was <false>\n    at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\n    at org.junit.Assert.assertThat(Assert.java:956)\n    at org.eclipse.jetty.websocket.client.ClientCloseTest$CloseTrackingSocket.assertReceivedCloseEvent(ClientCloseTest.java:99)\n    at org.eclipse.jetty.websocket.client.ClientCloseTest.testServerNoCloseHandshake(ClientCloseTest.java:555)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:497)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\n    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\n    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\n    at org.junit.rules.TestWatcher$1.evaluate(TestWatcher.java:55)\n    at org.junit.rules.RunRules.evaluate(RunRules.java:20)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:86)\n    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)\n```\n", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 273.0002777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/609"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "sbordet", "filteredCommits": ["89232a62072e7c550f31fbc1dd711dc5f2b6fede"], "commits": {"89232a62072e7c550f31fbc1dd711dc5f2b6fede": {"commitUser": "sbordet", "commitGHEventType": "closed"}}, "created": "2016-05-31 15:36:02", "commitsDetails": [{"commitMessage": "Fixes #605 - Guard concurrent calls to WebSocketSession.close().\n\nIntroduced an AtomicBoolean to guard AbstractWebSocketConnection.close().\nMade IOState code more robust with respect to synchronization.\n", "commitParents": ["2e212343283aab7418b53170de6f54a91c38201d"], "commitHash": "89232a62072e7c550f31fbc1dd711dc5f2b6fede", "commitSpoonAstDiffStats": [{"spoonFilePath": "WebSocketSession.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.WebSocketSession.close(org.eclipse.jetty.websocket.api.CloseStatus)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.WebSocketSession.close()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.WebSocketSession.doStop()", "DEL": 2, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 5}]}, {"spoonFilePath": "IOState.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.io.IOState.onCloseLocal(org.eclipse.jetty.websocket.common.CloseInfo)", "DEL": 9, "INS": 3, "UPD": 6, "MOV": 18, "TOT": 36}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.io.IOState.isClosed()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.io.IOState.onCloseRemote(org.eclipse.jetty.websocket.common.CloseInfo)", "DEL": 6, "INS": 3, "UPD": 3, "MOV": 5, "TOT": 17}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.io.IOState.isOpen()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.io.IOState.closeLocal(org.eclipse.jetty.websocket.common.CloseInfo)", "DEL": 0, "INS": 5, "UPD": 0, "MOV": 0, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.io.IOState.openAndCloseLocal(org.eclipse.jetty.websocket.common.CloseInfo)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AbstractWebSocketConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.io.AbstractWebSocketConnection.close(org.eclipse.jetty.websocket.common.CloseInfo)", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.io.AbstractWebSocketConnection.isOpen()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.io.AbstractWebSocketConnection", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.io.AbstractWebSocketConnection.close(int,java.lang.String)", "DEL": 3, "INS": 1, "UPD": 2, "MOV": 8, "TOT": 14}, {"spoonMethodName": "org.eclipse.jetty.websocket.common.io.AbstractWebSocketConnection.close()", "DEL": 1, "INS": 0, "UPD": 3, "MOV": 0, "TOT": 4}]}], "nameRev": "89232a62072e7c550f31fbc1dd711dc5f2b6fede tags/jetty-9.4.0.M0~3^2~9", "commitUser": "sbordet", "authoredDateTime": "2016-05-31 18:28:12", "commitGHEventType": "closed", "commitGitStats": [{"lines": 22, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/io/AbstractWebSocketConnection.java", "insertions": 14, "deletions": 8}, {"lines": 20, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/WebSocketSession.java", "insertions": 8, "deletions": 12}, {"lines": 116, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/io/IOState.java", "insertions": 67, "deletions": 49}], "commitDateTime": "2016-05-31 18:28:12", "spoonStatsSkippedReason": ""}], "title": "Guard concurrent calls to WebSocketSession.close()", "spoonStatsSummary": {"spoonMethodsChanged": 14, "DEL": 26, "INS": 23, "UPD": 14, "MOV": 34, "TOT": 97, "spoonFilesChanged": 3}, "gitStatsSummary": {"lines": 158, "insertions": 89, "gitFilesChange": 3, "deletions": 69}, "closed": "2016-05-31 16:28:31", "statsSkippedReason": "", "body": "Concurrent calls to `WebSocketSession.close()` can result in multiple close frames to be sent to the other peer.\n\nThe code that performs close needs a review to make it atomic in sending close frames only once, and notifying listeners only once, etc.\n", "changesInPackagesGIT": ["jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common"], "changesInPackagesSPOON": ["org.eclipse.jetty.websocket.common.io.AbstractWebSocketConnection.close(org.eclipse.jetty.websocket.common.CloseInfo)", "org.eclipse.jetty.websocket.common.io.IOState.openAndCloseLocal(org.eclipse.jetty.websocket.common.CloseInfo)", "org.eclipse.jetty.websocket.common.io.AbstractWebSocketConnection", "org.eclipse.jetty.websocket.common.io.IOState.onCloseRemote(org.eclipse.jetty.websocket.common.CloseInfo)", "org.eclipse.jetty.websocket.common.io.IOState.onCloseLocal(org.eclipse.jetty.websocket.common.CloseInfo)", "org.eclipse.jetty.websocket.common.io.IOState.isOpen()", "org.eclipse.jetty.websocket.common.io.IOState.closeLocal(org.eclipse.jetty.websocket.common.CloseInfo)", "org.eclipse.jetty.websocket.common.io.AbstractWebSocketConnection.close()", "org.eclipse.jetty.websocket.common.WebSocketSession.close()", "org.eclipse.jetty.websocket.common.WebSocketSession.close(org.eclipse.jetty.websocket.api.CloseStatus)", "org.eclipse.jetty.websocket.common.WebSocketSession.doStop()", "org.eclipse.jetty.websocket.common.io.AbstractWebSocketConnection.close(int,java.lang.String)", "org.eclipse.jetty.websocket.common.io.AbstractWebSocketConnection.isOpen()", "org.eclipse.jetty.websocket.common.io.IOState.isClosed()"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/605"}, {"labels": ["Bug"], "closed": "2016-05-26 23:42:36", "body": "When expiring a session and an InvalidClassException occured, the session cannot be invalidated. In general jetty should always be able to invalidate a session regardless of any error reading it so broken (or simply old) sessions can be cleaned up.\n\n```\n09:47:06.350 WARN  (JDBCSessionManager.java:865) Problem expiring sessions [Scheduler-1444066154] []\njava.io.InvalidClassException: org.apache.wicket.Session; incompatible types for field pageId\n    at java.io.ObjectStreamClass.matchFields(ObjectStreamClass.java:2299) ~[na:1.8.0_73]\n    at java.io.ObjectStreamClass.getReflector(ObjectStreamClass.java:2193) ~[na:1.8.0_73]\n    at java.io.ObjectStreamClass.initNonProxy(ObjectStreamClass.java:669) ~[na:1.8.0_73]\n    at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1623) ~[na:1.8.0_73]\n    at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1518) ~[na:1.8.0_73]\n    at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1623) ~[na:1.8.0_73]\n    at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1518) ~[na:1.8.0_73]\n    at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1623) ~[na:1.8.0_73]\n    at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1518) ~[na:1.8.0_73]\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1774) ~[na:1.8.0_73]\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1351) ~[na:1.8.0_73]\n    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2000) ~[na:1.8.0_73]\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1924) ~[na:1.8.0_73]\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1801) ~[na:1.8.0_73]\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1351) ~[na:1.8.0_73]\n    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:371) ~[na:1.8.0_73]\n    at java.util.HashMap.readObject(HashMap.java:1396) ~[na:1.8.0_73]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_73]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_73]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_73]\n    at java.lang.reflect.Method.invoke(Method.java:497) ~[na:1.8.0_73]\n    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1058) ~[na:1.8.0_73]\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1900) ~[na:1.8.0_73]\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1801) ~[na:1.8.0_73]\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1351) ~[na:1.8.0_73]\n    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:371) ~[na:1.8.0_73]\n    at org.eclipse.jetty.server.session.JDBCSessionManager$1.run(JDBCSessionManager.java:970) ~[org.eclipse.jetty.server_9.3.8.v20160314.jar:9.3.8.v20160314]\n    at org.eclipse.jetty.server.handler.ContextHandler.handle(ContextHandler.java:1266) ~[org.eclipse.jetty.server_9.3.8.v20160314.jar:9.3.8.v20160314]\n    at org.eclipse.jetty.server.session.JDBCSessionManager.loadSession(JDBCSessionManager.java:992) ~[org.eclipse.jetty.server_9.3.8.v20160314.jar:9.3.8.v20160314]\n    at org.eclipse.jetty.server.session.JDBCSessionManager.expire(JDBCSessionManager.java:840) ~[org.eclipse.jetty.server_9.3.8.v20160314.jar:9.3.8.v20160314]\n    at org.eclipse.jetty.server.session.JDBCSessionIdManager.scavengeSessions(JDBCSessionIdManager.java:1378) [org.eclipse.jetty.server_9.3.8.v20160314.jar:9.3.8.v20160314]\n    at org.eclipse.jetty.server.session.JDBCSessionIdManager.scavenge(JDBCSessionIdManager.java:1288) [org.eclipse.jetty.server_9.3.8.v20160314.jar:9.3.8.v20160314]\n    at org.eclipse.jetty.server.session.JDBCSessionIdManager.access$000(JDBCSessionIdManager.java:60) [org.eclipse.jetty.server_9.3.8.v20160314.jar:9.3.8.v20160314]\n    at org.eclipse.jetty.server.session.JDBCSessionIdManager$Scavenger.run(JDBCSessionIdManager.java:606) [org.eclipse.jetty.server_9.3.8.v20160314.jar:9.3.8.v20160314]\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [na:1.8.0_73]\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266) [na:1.8.0_73]\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180) [na:1.8.0_73]\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293) [na:1.8.0_73]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0_73]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_73]\n    at java.lang.Thread.run(Thread.java:745) [na:1.8.0_73]\n```\n", "commits": {}, "title": "[JDBCSessionManager] Problem expiring sessions on class changes", "created": "2016-05-26 07:55:18", "user": "laeubi", "url": "https://github.com/eclipse/jetty.project/issues/593", "commitsDetails": [], "ttf": 0.0002777777777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "sbordet", "filteredCommits": ["c8c74da50ae68844e7ed245c01aa4ccfe7cb4db5"], "commits": {"c8c74da50ae68844e7ed245c01aa4ccfe7cb4db5": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2016-05-20 09:15:57", "commitsDetails": [{"commitMessage": "Issue #581 - Initial session recv window setting not working.\n\nUpdating the local session receive window before sending it to the client.\n", "commitParents": ["d73bf085158210a97125708d177030f8418059d3"], "commitHash": "c8c74da50ae68844e7ed245c01aa4ccfe7cb4db5", "commitSpoonAstDiffStats": [{"spoonFilePath": "SmallThreadPoolLoadTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.client.SmallThreadPoolLoadTest.customizeContext(org.eclipse.jetty.servlet.ServletContextHandler)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "HTTP2ServerSession.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.server.HTTP2ServerSession.onPreface()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "c8c74da50ae68844e7ed245c01aa4ccfe7cb4db5 tags/jetty-9.3.10.M0~14", "commitUser": "sbordet", "authoredDateTime": "2016-05-20 11:17:36", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 4, "filePath": "jetty-http2/http2-client/src/test/java/org/eclipse/jetty/http2/client/SmallThreadPoolLoadTest.java", "insertions": 4, "deletions": 0}, {"lines": 3, "filePath": "jetty-http2/http2-server/src/main/java/org/eclipse/jetty/http2/server/HTTP2ServerSession.java", "insertions": 3, "deletions": 0}], "commitDateTime": "2016-05-20 11:17:50", "spoonStatsSkippedReason": ""}], "title": "Initial session recv window setting not working", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 3, "insertions": 3, "gitFilesChange": 1, "deletions": 0}, "closed": "2016-05-20 09:56:28", "statsSkippedReason": "", "body": "`AbstractHTTP2ServerConnectionFactory.setInitialSessionRecvWindow()` allows peer to enlarge the session receive window by sending to the other peer a session window update at connection establishment.\n\nHowever, the sender does not update the local session receive window, so now the peers disagree on the window size.\n", "changesInPackagesGIT": ["jetty-http2/http2-server/src/main/java/org/eclipse/jetty/http2/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.http2.server.HTTP2ServerSession.onPreface()"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/581"}, {"labels": ["Bug", "Enhancement"], "closed": "2016-11-01 20:50:06", "body": "The VERSION.txt generation for 9.3.9 contained too many issues, probably due to the prior release being a 9.2 release.\n\nThere were also numerous empty messages and duplicated entries.\nThe list could also be sorted for better readability.\n", "commits": {}, "title": "VERSION.txt generation isses", "created": "2016-05-20 02:36:54", "user": "gregw", "url": "https://github.com/eclipse/jetty.project/issues/580", "commitsDetails": [], "ttf": 165.00027777777777}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 2, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug", "High Priority"], "user": "sbordet", "filteredCommits": ["3cd52fda04607422a4372c95edb7f912a7fefdbd", "dee3331ffbc0ee9e45c5a535a1872d1745c69f85", "2ef23a672504cec68b2c194527750c19e8caf42b", "66ce47923e1efe7b9191a1df886ee3d8e1384481"], "commits": {"68097007e696f1ed5b842fb05b1a7e9149ab7965": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "dee3331ffbc0ee9e45c5a535a1872d1745c69f85": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "66ce47923e1efe7b9191a1df886ee3d8e1384481": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "993dd3cbe13e503758eaf23e62b1e5caf1823dcf": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "2ef23a672504cec68b2c194527750c19e8caf42b": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "3cd52fda04607422a4372c95edb7f912a7fefdbd": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "98c328fb23493025036665ac1ad82849e01c8f70": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2016-05-12 23:01:06", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "68097007e696f1ed5b842fb05b1a7e9149ab7965", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #572 - Don't reject HTTP/2 requests without body in low threads mode.\n\n* Made ProduceExecuteConsume the default ExecutionFactory for HTTP/2.\n* Made the HTTP/2 fillable callback non-blocking.\n* Introduced configuration for the server initial session recv window.\n* Sending a WINDOW_UPDATE frame at session setup to inform the client\n about the server session recv window.\n", "commitParents": ["67ea8db5aa9c368175f65ae1deecc6303f5a2ed4"], "commitHash": "dee3331ffbc0ee9e45c5a535a1872d1745c69f85", "commitSpoonAstDiffStats": [{"spoonFilePath": "HTTP2ServerConnectionFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.server.HTTP2ServerConnectionFactory.HTTPServerSessionListener.onPreface(org.eclipse.jetty.http2.api.Session)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HTTP2Connection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.HTTP2Connection.FillCallback", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.HTTP2Connection.HTTP2Producer.produce()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.http2.HTTP2Connection.HTTP2Producer", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HTTP2Session.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.HTTP2Session.setInitialSessionRecvWindow(int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.HTTP2Session.getInitialSessionRecvWindow()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.HTTP2Session", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HTTP2ServerSession.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.server.HTTP2ServerSession.onPreface()", "DEL": 1, "INS": 4, "UPD": 2, "MOV": 5, "TOT": 12}]}, {"spoonFilePath": "AbstractHTTP2ServerConnectionFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.server.AbstractHTTP2ServerConnectionFactory.getInitialSessionRecvWindow()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.server.AbstractHTTP2ServerConnectionFactory.setInitialStreamRecvWindow(int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.server.AbstractHTTP2ServerConnectionFactory", "DEL": 1, "INS": 2, "UPD": 1, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.http2.server.AbstractHTTP2ServerConnectionFactory.setInitialSessionRecvWindow(int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.server.AbstractHTTP2ServerConnectionFactory.setInitialStreamSendWindow(int)", "DEL": 0, "INS": 2, "UPD": 2, "MOV": 1, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.http2.server.AbstractHTTP2ServerConnectionFactory.newConnection(org.eclipse.jetty.server.Connector,org.eclipse.jetty.io.EndPoint)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.server.AbstractHTTP2ServerConnectionFactory.getInitialStreamSendWindow()", "DEL": 0, "INS": 1, "UPD": 3, "MOV": 1, "TOT": 5}]}], "nameRev": "dee3331ffbc0ee9e45c5a535a1872d1745c69f85 tags/jetty-9.3.9.v20160517~4", "commitUser": "sbordet", "authoredDateTime": "2016-05-16 11:31:09", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 44, "filePath": "jetty-http2/http2-server/src/main/java/org/eclipse/jetty/http2/server/AbstractHTTP2ServerConnectionFactory.java", "insertions": 39, "deletions": 5}, {"lines": 15, "filePath": "jetty-http2/http2-server/src/main/java/org/eclipse/jetty/http2/server/HTTP2ServerSession.java", "insertions": 12, "deletions": 3}, {"lines": 4, "filePath": "jetty-http2/http2-server/src/main/java/org/eclipse/jetty/http2/server/HTTP2ServerConnectionFactory.java", "insertions": 2, "deletions": 2}, {"lines": 3, "filePath": "jetty-http2/http2-server/src/test/resources/jetty-logging.properties", "insertions": 2, "deletions": 1}, {"lines": 18, "filePath": "jetty-http2/http2-common/src/main/java/org/eclipse/jetty/http2/HTTP2Connection.java", "insertions": 17, "deletions": 1}, {"lines": 12, "filePath": "jetty-http2/http2-common/src/main/java/org/eclipse/jetty/http2/HTTP2Session.java", "insertions": 12, "deletions": 0}], "commitDateTime": "2016-05-16 15:01:08", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #572\n\nImproved to the toString and dump output of connections, endpoints and channel to assist with debugging\nmade the SSL callbacks and runnables Invocable to avoid thread starvation.\n", "commitParents": ["b839f40721623a91b11ec8d37089c393a6cef98b"], "commitHash": "2ef23a672504cec68b2c194527750c19e8caf42b", "commitSpoonAstDiffStats": [{"spoonFilePath": "ThreadStarvationTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ThreadStarvationTest", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpConnectionOverFCGI.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.fcgi.client.http.HttpConnectionOverFCGI.toConnectionString()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.fcgi.client.http.HttpConnectionOverFCGI.toString()", "DEL": 1, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 3}]}, {"spoonFilePath": "HttpConnectionOverHTTP.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.http.HttpConnectionOverHTTP.toConnectionString()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.http.HttpConnectionOverHTTP.toString()", "DEL": 1, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 3}]}, {"spoonFilePath": "SslConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.1.failed(java.lang.Throwable)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.2", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.WriteCallBack", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.1.succeeded()", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 1, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.1.failed(java.lang.Throwable).1.failed(java.lang.Throwable)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.RunnableTask", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.toString()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.1", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.fill(java.nio.ByteBuffer)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.onFillable()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.toConnectionString()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.onIncompleteFlush()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.1.getInvocationType()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection.2.getInvocationType()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ssl.SslConnection", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 0, "TOT": 3}]}, {"spoonFilePath": "WriteFlusher.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.WriteFlusher.toString()", "DEL": 0, "INS": 3, "UPD": 1, "MOV": 1, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.io.WriteFlusher.PendingState.getCallback()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AbstractWebSocketConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.common.io.AbstractWebSocketConnection.toString()", "DEL": 1, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 3}]}, {"spoonFilePath": "ManagedSelector.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.ManagedSelector.getSelector()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ChannelEndPoint.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.ChannelEndPoint.3.toString()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ChannelEndPoint.RunnableTask", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.ChannelEndPoint.toString()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.io.ChannelEndPoint.RunnableTask.toString()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 4}]}, {"spoonFilePath": "HttpConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpConnection.toString()", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 1, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.server.HttpConnection.toConnectionString()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "AbstractEndPoint.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.AbstractEndPoint.toEndPointString()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.AbstractEndPoint.toConnectionString()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.AbstractEndPoint.toString()", "DEL": 1, "INS": 1, "UPD": 1, "MOV": 20, "TOT": 23}]}, {"spoonFilePath": "ProxyConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.proxy.ProxyConnection.toConnectionString()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.proxy.ProxyConnection.toString()", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 1, "TOT": 4}]}, {"spoonFilePath": "AbstractConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.AbstractConnection.toString()", "DEL": 1, "INS": 2, "UPD": 2, "MOV": 2, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.io.AbstractConnection.toConnectionString()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.io.AbstractConnection.ReadCallback.toString()", "DEL": 1, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 3}]}], "nameRev": "2ef23a672504cec68b2c194527750c19e8caf42b tags/jetty-9.4.0.RC3~33", "commitUser": "gregw", "authoredDateTime": "2016-11-23 16:56:58", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 5, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ManagedSelector.java", "insertions": 5, "deletions": 0}, {"lines": 23, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/AbstractEndPoint.java", "insertions": 17, "deletions": 6}, {"lines": 4, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ThreadStarvationTest.java", "insertions": 3, "deletions": 1}, {"lines": 7, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpConnection.java", "insertions": 4, "deletions": 3}, {"lines": 17, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/AbstractConnection.java", "insertions": 11, "deletions": 6}, {"lines": 18, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/http/HttpConnectionOverHTTP.java", "insertions": 9, "deletions": 9}, {"lines": 15, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ChannelEndPoint.java", "insertions": 11, "deletions": 4}, {"lines": 14, "filePath": "jetty-fcgi/fcgi-client/src/main/java/org/eclipse/jetty/fcgi/client/http/HttpConnectionOverFCGI.java", "insertions": 7, "deletions": 7}, {"lines": 11, "filePath": "jetty-proxy/src/main/java/org/eclipse/jetty/proxy/ProxyConnection.java", "insertions": 6, "deletions": 5}, {"lines": 9, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/io/AbstractWebSocketConnection.java", "insertions": 6, "deletions": 3}, {"lines": 8, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/WriteFlusher.java", "insertions": 7, "deletions": 1}, {"lines": 83, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ssl/SslConnection.java", "insertions": 65, "deletions": 18}], "commitDateTime": "2016-11-23 16:58:35", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "993dd3cbe13e503758eaf23e62b1e5caf1823dcf", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #572 Ignore failing test pending further analysis\n", "commitParents": ["98c328fb23493025036665ac1ad82849e01c8f70"], "commitHash": "66ce47923e1efe7b9191a1df886ee3d8e1384481", "commitSpoonAstDiffStats": [{"spoonFilePath": "SmallThreadPoolLoadTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.client.SmallThreadPoolLoadTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "66ce47923e1efe7b9191a1df886ee3d8e1384481 tags/jetty-9.4.0.M0~4", "commitUser": "gregw", "authoredDateTime": "2016-06-03 09:08:44", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-http2/http2-client/src/test/java/org/eclipse/jetty/http2/client/SmallThreadPoolLoadTest.java", "insertions": 2, "deletions": 0}], "commitDateTime": "2016-06-03 09:08:44", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #572 Javadoc\n", "commitParents": ["b6a39cf7d3ac1e5061aeaf6efe6aa28d342304b6"], "commitHash": "3cd52fda04607422a4372c95edb7f912a7fefdbd", "commitSpoonAstDiffStats": [{"spoonFilePath": "Invocable.java", "spoonMethods": []}], "nameRev": "3cd52fda04607422a4372c95edb7f912a7fefdbd tags/jetty-9.4.0.RC0~17", "commitUser": "gregw", "authoredDateTime": "2016-09-09 14:11:16", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 52, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/thread/Invocable.java", "insertions": 52, "deletions": 0}], "commitDateTime": "2016-09-09 14:11:16", "spoonStatsSkippedReason": ""}, {"commitMessage": "Jetty 9.4.x 572 (#614)\n\n* Issue #572 Scheduling Strategy Deadlocks\r\n\r\nImplemented dual strategy idea from #572 discussion\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n\r\n* fixed http2 strategy choice\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n\r\n* code cleanups\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n\r\n* clean up seelctor actions/products\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n\r\n* cleanups\r\n", "commitParents": ["0578d15813c5a985aa2a1c425625d643c6b9003b"], "commitHash": "98c328fb23493025036665ac1ad82849e01c8f70", "commitSpoonAstDiffStats": [], "nameRev": "98c328fb23493025036665ac1ad82849e01c8f70 tags/jetty-9.4.0.M0~5", "commitUser": "gregw", "authoredDateTime": "2016-06-03 09:07:00", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 6, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpInput.java", "insertions": 3, "deletions": 3}, {"lines": 9, "filePath": "jetty-http2/http2-server/src/main/java/org/eclipse/jetty/http2/server/HTTP2ServerConnection.java", "insertions": 5, "deletions": 4}, {"lines": 160, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/thread/Invocable.java", "insertions": 160, "deletions": 0}, {"lines": 100, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/BlockingCallback.java", "insertions": 0, "deletions": 100}, {"lines": 6, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/FillInterest.java", "insertions": 4, "deletions": 2}, {"lines": 19, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/thread/ExecutionStrategy.java", "insertions": 6, "deletions": 13}, {"lines": 123, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/BlockingCallbackTest.java", "insertions": 0, "deletions": 123}, {"lines": 3, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/thread/QueuedThreadPool.java", "insertions": 2, "deletions": 1}, {"lines": 132, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/thread/strategy/ExecuteProduceConsume.java", "insertions": 15, "deletions": 117}, {"lines": 21, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/thread/strategy/ExecutingExecutionStrategy.java", "insertions": 19, "deletions": 2}, {"lines": 8, "filePath": "jetty-http2/http2-client/src/test/java/org/eclipse/jetty/http2/client/IdleTimeoutTest.java", "insertions": 7, "deletions": 1}, {"lines": 23, "filePath": "jetty-io/src/test/java/org/eclipse/jetty/io/WriteFlusherTest.java", "insertions": 13, "deletions": 10}, {"lines": 75, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ChannelEndPoint.java", "insertions": 47, "deletions": 28}, {"lines": 18, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/thread/strategy/ExecuteProduceConsumeTest.java", "insertions": 9, "deletions": 9}, {"lines": 2, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/AbstractConnector.java", "insertions": 1, "deletions": 1}, {"lines": 25, "filePath": "jetty-http2/http2-client/src/test/java/org/eclipse/jetty/http2/client/FlowControlStrategyTest.java", "insertions": 22, "deletions": 3}, {"lines": 5, "filePath": "jetty-http2/http2-server/src/main/java/org/eclipse/jetty/http2/server/HttpChannelOverHTTP2.java", "insertions": 3, "deletions": 2}, {"lines": 12, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/WriteFlusher.java", "insertions": 8, "deletions": 4}, {"lines": 12, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/thread/strategy/ProduceExecuteConsume.java", "insertions": 9, "deletions": 3}, {"lines": 40, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/SelectorManager.java", "insertions": 1, "deletions": 39}, {"lines": 50, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/Callback.java", "insertions": 16, "deletions": 34}, {"lines": 18, "filePath": "jetty-http2/http2-client/src/test/java/org/eclipse/jetty/http2/client/SmallThreadPoolLoadTest.java", "insertions": 11, "deletions": 7}, {"lines": 12, "filePath": "jetty-http2/http2-server/src/main/java/org/eclipse/jetty/http2/server/AbstractHTTP2ServerConnectionFactory.java", "insertions": 1, "deletions": 11}, {"lines": 5, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/IteratingNestedCallback.java", "insertions": 3, "deletions": 2}, {"lines": 163, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/ManagedSelector.java", "insertions": 114, "deletions": 49}, {"lines": 9, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpSender.java", "insertions": 5, "deletions": 4}, {"lines": 62, "filePath": "jetty-http2/http2-common/src/main/java/org/eclipse/jetty/http2/HTTP2Connection.java", "insertions": 48, "deletions": 14}, {"lines": 7, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/thread/strategy/ProduceConsume.java", "insertions": 4, "deletions": 3}, {"lines": 10, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/BlockingWriteCallback.java", "insertions": 9, "deletions": 1}, {"lines": 9, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpConnection.java", "insertions": 5, "deletions": 4}, {"lines": 5, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/util/OutputStreamContentProvider.java", "insertions": 3, "deletions": 2}, {"lines": 9, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/SharedBlockingCallback.java", "insertions": 8, "deletions": 1}, {"lines": 70, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/AbstractConnection.java", "insertions": 33, "deletions": 37}, {"lines": 10, "filePath": "jetty-http2/http2-server/src/main/java/org/eclipse/jetty/http2/server/HttpTransportOverHTTP2.java", "insertions": 9, "deletions": 1}, {"lines": 285, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ThreadStarvationTest.java", "insertions": 166, "deletions": 119}, {"lines": 36, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/ServerConnector.java", "insertions": 0, "deletions": 36}, {"lines": 10, "filePath": "jetty-http2/http2-client/src/main/java/org/eclipse/jetty/http2/client/HTTP2Client.java", "insertions": 0, "deletions": 10}, {"lines": 6, "filePath": "jetty-http2/http2-client/src/main/java/org/eclipse/jetty/http2/client/HTTP2ClientConnectionFactory.java", "insertions": 3, "deletions": 3}], "commitDateTime": "2016-06-03 09:07:00", "spoonStatsSkippedReason": "tooManyFiles"}], "title": "Don't reject HTTP/2 requests without body in low threads mode", "spoonStatsSummary": {"spoonMethodsChanged": 53, "DEL": 11.0, "INS": 52.0, "UPD": 43.0, "MOV": 40.0, "TOT": 146.0, "spoonFilesChanged": 16}, "gitStatsSummary": {"lines": 355.0, "insertions": 282.0, "gitFilesChange": 17, "deletions": 73.0}, "closed": "2016-11-23 05:59:05", "statsSkippedReason": "", "body": "After the work done in #558, the possibility to avoid to reject HTTP/2 requests without a body (those whose `HEADERS` frame has `endStream=true`) came up.\n\nBecause this kind of requests does not need to consume `DATA` frames and therefore never block in reads, they are somehow \"lighter\" to handle when in low threads mode.\n\nHowever, such requests may block writing leading again to a scenario where the server hangs:\n- the selector thread dispatches to HTTP/2's `onFillable()`\n- the last thread invokes `onFillable`, reads the request and because it is in low threads mode it may dispatch it (rather than rejecting it), queuing it into the thread pool\n- the `onFillable()` thread reads 0 and returns\n- the request has now a free thread and gets executed, invoking the application\n- the application writes, but the session send flow control window is zero, so it blocks\n- in order to unblock writes we would need to read `WINDOW_UPDATE` frames from the client, but we are now out of threads: while the selector thread detects a read ready event, there are no threads to call `onFillable()` (because HTTP/2's fillable callback `isNonBlocking()=false`)\n\nIn the end, a lot of care needs to be taken, since for HTTP/2 we need more threads than HTTP/1 because we have to guarantee that both the NIO selection and the HTTP/2 fill _for each connection_ can always run. \n\nAfter #558, this is guaranteed by rejecting unconditionally every request when in low threads mode, but rejecting less requests may be really tricky.\n", "changesInPackagesGIT": ["jetty-proxy/src/main/java/org/eclipse/jetty/proxy", "jetty-client/src/main/java/org/eclipse/jetty/client/http", "jetty-io/src/main/java/org/eclipse/jetty/io/ssl", "jetty-util/src/main/java/org/eclipse/jetty/util/thread", "jetty-http2/http2-common/src/main/java/org/eclipse/jetty/http2", "jetty-http2/http2-server/src/main/java/org/eclipse/jetty/http2/server", "jetty-server/src/main/java/org/eclipse/jetty/server", "jetty-fcgi/fcgi-client/src/main/java/org/eclipse/jetty/fcgi/client", "jetty-io/src/main/java/org/eclipse/jetty/io", "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common"], "changesInPackagesSPOON": ["org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.1.failed(java.lang.Throwable)", "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.WriteCallBack", "org.eclipse.jetty.http2.HTTP2Connection.HTTP2Producer", "org.eclipse.jetty.io.ssl.SslConnection.1", "org.eclipse.jetty.http2.server.AbstractHTTP2ServerConnectionFactory.newConnection(org.eclipse.jetty.server.Connector,org.eclipse.jetty.io.EndPoint)", "org.eclipse.jetty.io.ChannelEndPoint.toString()", "org.eclipse.jetty.io.WriteFlusher.PendingState.getCallback()", "org.eclipse.jetty.websocket.common.io.AbstractWebSocketConnection.toString()", "org.eclipse.jetty.io.ssl.SslConnection.onFillable()", "org.eclipse.jetty.proxy.ProxyConnection.toString()", "org.eclipse.jetty.http2.server.AbstractHTTP2ServerConnectionFactory.setInitialStreamSendWindow(int)", "org.eclipse.jetty.io.AbstractConnection.toConnectionString()", "org.eclipse.jetty.io.ChannelEndPoint.RunnableTask.toString()", "org.eclipse.jetty.http2.server.AbstractHTTP2ServerConnectionFactory.setInitialStreamRecvWindow(int)", "org.eclipse.jetty.http2.server.AbstractHTTP2ServerConnectionFactory.getInitialStreamSendWindow()", "org.eclipse.jetty.http2.server.AbstractHTTP2ServerConnectionFactory", "org.eclipse.jetty.client.http.HttpConnectionOverHTTP.toConnectionString()", "org.eclipse.jetty.http2.server.AbstractHTTP2ServerConnectionFactory.setInitialSessionRecvWindow(int)", "org.eclipse.jetty.client.http.HttpConnectionOverHTTP.toString()", "org.eclipse.jetty.io.ssl.SslConnection.1.getInvocationType()", "org.eclipse.jetty.io.WriteFlusher.toString()", "org.eclipse.jetty.io.ssl.SslConnection.toConnectionString()", "org.eclipse.jetty.http2.HTTP2Connection.FillCallback", "org.eclipse.jetty.http2.HTTP2Session.setInitialSessionRecvWindow(int)", "org.eclipse.jetty.io.ChannelEndPoint.RunnableTask", "org.eclipse.jetty.http2.HTTP2Session.getInitialSessionRecvWindow()", "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint", "org.eclipse.jetty.fcgi.client.http.HttpConnectionOverFCGI.toConnectionString()", "org.eclipse.jetty.io.ssl.SslConnection.2", "org.eclipse.jetty.proxy.ProxyConnection.toConnectionString()", "org.eclipse.jetty.server.HttpConnection.toString()", "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.1.failed(java.lang.Throwable).1.failed(java.lang.Throwable)", "org.eclipse.jetty.io.ManagedSelector.getSelector()", "org.eclipse.jetty.io.AbstractEndPoint.toConnectionString()", "org.eclipse.jetty.http2.HTTP2Session", "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.fill(java.nio.ByteBuffer)", "org.eclipse.jetty.fcgi.client.http.HttpConnectionOverFCGI.toString()", "org.eclipse.jetty.io.ssl.SslConnection", "org.eclipse.jetty.io.AbstractEndPoint.toString()", "org.eclipse.jetty.server.HttpConnection.toConnectionString()", "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.onIncompleteFlush()", "org.eclipse.jetty.http2.HTTP2Connection.HTTP2Producer.produce()", "org.eclipse.jetty.io.AbstractConnection.ReadCallback.toString()", "org.eclipse.jetty.io.ssl.SslConnection.2.getInvocationType()", "org.eclipse.jetty.io.ChannelEndPoint.3.toString()", "org.eclipse.jetty.io.ssl.SslConnection.toString()", "org.eclipse.jetty.io.ssl.SslConnection.DecryptedEndPoint.1.succeeded()", "org.eclipse.jetty.io.AbstractConnection.toString()", "org.eclipse.jetty.io.ssl.SslConnection.RunnableTask", "org.eclipse.jetty.http2.server.HTTP2ServerConnectionFactory.HTTPServerSessionListener.onPreface(org.eclipse.jetty.http2.api.Session)", "org.eclipse.jetty.http2.server.AbstractHTTP2ServerConnectionFactory.getInitialSessionRecvWindow()", "org.eclipse.jetty.http2.server.HTTP2ServerSession.onPreface()", "org.eclipse.jetty.io.AbstractEndPoint.toEndPointString()"], "ttf": 194.00027777777777, "numCommits": 3, "url": "https://github.com/eclipse/jetty.project/issues/572"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["9cf8f2965aabca76c213095350ca088a74227403"], "commits": {"9cf8f2965aabca76c213095350ca088a74227403": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "e5062a74dd30fc19f0ce29445c0c30cb9759ba10": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2016-05-11 00:00:53", "commitsDetails": [{"commitMessage": "Fixes #567 - NPE in ErrorPageErrorHandler debug\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["bdafea3e968b7d5ba62ba549506b6ee3c6a5e9e5"], "commitHash": "9cf8f2965aabca76c213095350ca088a74227403", "commitSpoonAstDiffStats": [{"spoonFilePath": "ErrorPageErrorHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.ErrorPageErrorHandler.getErrorPage(javax.servlet.http.HttpServletRequest)", "DEL": 0, "INS": 5, "UPD": 2, "MOV": 0, "TOT": 7}]}], "nameRev": "9cf8f2965aabca76c213095350ca088a74227403 tags/jetty-9.3.9.v20160517~6^2", "commitUser": "joakime", "authoredDateTime": "2016-05-10 17:28:34", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 17, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ErrorPageErrorHandler.java", "insertions": 12, "deletions": 5}], "commitDateTime": "2016-05-10 17:28:34", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #569 from eclipse/bugs/567\n\nFixes #567 - NPE in ErrorPageErrorHandler debug", "commitParents": ["97af3d663fd22343129e8364d601640649d9eaea", "9cf8f2965aabca76c213095350ca088a74227403"], "commitHash": "e5062a74dd30fc19f0ce29445c0c30cb9759ba10", "commitSpoonAstDiffStats": [{"spoonFilePath": "ErrorPageErrorHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.ErrorPageErrorHandler.getErrorPage(javax.servlet.http.HttpServletRequest)", "DEL": 0, "INS": 5, "UPD": 2, "MOV": 0, "TOT": 7}]}], "nameRev": "e5062a74dd30fc19f0ce29445c0c30cb9759ba10 tags/jetty-9.3.9.v20160517~6", "commitUser": "joakime", "authoredDateTime": "2016-05-13 15:47:36", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 17, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ErrorPageErrorHandler.java", "insertions": 12, "deletions": 5}], "commitDateTime": "2016-05-13 15:47:36", "spoonStatsSkippedReason": ""}], "title": "NPE in ErrorPageErrorHandler while in debug", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0, "INS": 5, "UPD": 2, "MOV": 0, "TOT": 7, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 17, "insertions": 12, "gitFilesChange": 1, "deletions": 5}, "closed": "2016-05-13 16:31:53", "statsSkippedReason": "", "body": "The debug output of ErrorPageErrorHandler can throw a NPE.\n", "changesInPackagesGIT": ["jetty-servlet/src/main/java/org/eclipse/jetty/servlet"], "changesInPackagesSPOON": ["org.eclipse.jetty.servlet.ErrorPageErrorHandler.getErrorPage(javax.servlet.http.HttpServletRequest)"], "ttf": 2.000277777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/567"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 5, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "joakime", "filteredCommits": [], "commits": {"f595d35672b5dd9069a04b3b4d80fc169e82dbea": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "e85fb0d598634077f5d93400592960ff83a80ca1": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "838655ce116151d5fb3b43036602ea983bf021ad": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "53936c451a07c9ce025b23dbb04cf8f33b726585": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "1d7b597d96745d0f395ee5da86395dd9c097154f": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2016-05-10 23:00:19", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "f595d35672b5dd9069a04b3b4d80fc169e82dbea", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "e85fb0d598634077f5d93400592960ff83a80ca1", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "838655ce116151d5fb3b43036602ea983bf021ad", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "53936c451a07c9ce025b23dbb04cf8f33b726585", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "1d7b597d96745d0f395ee5da86395dd9c097154f", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "ErrorPageErrorHandler does not unwrap nested ServletException properly", "spoonStatsSummary": {}, "closed": "2016-05-11 00:00:12", "statsSkippedReason": "", "body": "The ErrorPageErrorHandler does not properly unwrap nested ServletExceptions.\n\nTake this example:\n\n**triggered.jsp**\n\n``` jsp\n<%@ page import=\"com.company.CustomException\" %>\n<%  throw new CustomException(\"Oops\"); %>\n```\n\nThis will be caught by JSP implementation and:\n1. wrapped in a `ServletException` first\n2. then wrapped again in a `JasperException` \n3. then tossed out of the JSP servlets for `ErrorPageErrorHandler` to process.\n\nThe end result is a stacktrace like this ...\n\n`JasperException` -> `ServletException` -> `CustomException`\n\n> Note: `JasperException` extends from `ServletException`, so it is also an instance of `ServletException`\n\nWhen the exception flows out of JSP, you'd have to have the following `<error-page>` mappings ...\n\n``` xml\n    <error-page>\n        <exception-type>com.company.CustomException</exception-type>\n        <location>/custom-handler</location>\n    </error-page>\n\n    <error-page>\n        <exception-type>org.apache.jasper.JasperException</exception-type>\n        <location>/unwrap-servletexception</location>\n    </error-page>\n\n    <error-page>\n        <exception-type>javax.servlet.ServletException</exception-type>\n        <location>/unwrap-servletexception</location>\n    </error-page>\n```\n\nwhere `/unwrap-servletexception` is a servlet that unwraps JasperException and/or ServletException again and throws it.\n\nalso of note: with the current Jetty 9.3.8, the `/unwrap-servletexception` is called because of `JasperException`, but by the time it reaches the `/unwrap-servletexception` its been unwrapped to simply a `ServletException`\n", "ttf": 0.0002777777777777778, "url": "https://github.com/eclipse/jetty.project/issues/562"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "dhirajsb", "filteredCommits": ["cd2c2a6b98f9176959d0782f19daa7a42368b237"], "commits": {"cd2c2a6b98f9176959d0782f19daa7a42368b237": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "f3675dbad7b273256634b2b1d8aac12b169d8623": {"commitUser": "sbordet", "commitGHEventType": "closed"}}, "created": "2016-05-10 18:17:35", "commitsDetails": [{"commitMessage": "Issue #560 -  Jetty Client Proxy Authentication does not work with HTTP Proxy tunneling.\n\nSmall refactoring.\n", "commitParents": ["f3675dbad7b273256634b2b1d8aac12b169d8623"], "commitHash": "cd2c2a6b98f9176959d0782f19daa7a42368b237", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpProxy.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpProxy.CreateTunnelPromise.tunnelFailed(org.eclipse.jetty.io.EndPoint,java.lang.Throwable)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.HttpProxy.CreateTunnelPromise.failed(java.lang.Throwable)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 2}]}], "nameRev": "cd2c2a6b98f9176959d0782f19daa7a42368b237 tags/jetty-9.2.17.v20160517~3", "commitUser": "sbordet", "authoredDateTime": "2016-05-12 19:03:18", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 4, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpProxy.java", "insertions": 2, "deletions": 2}], "commitDateTime": "2016-05-12 19:03:18", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #560 - Jetty Client Proxy Authentication does not work with HTTP Proxy tunneling.\n\nThe issue was related to the fact that the proxy responded 407 with a\nConnection: close header.\n\nBecause the endPoint underlying the original connection was closed,\nit should not have been used as a tunnel.\nRather, the endPoint of the new CONNECT attempt (with the proxy\ncredentials) must be used for the tunnel.\n\nAlso partially backported the fix for #408.\n", "commitParents": ["2d3d71ea2381d84f368846dfb77e49792f392bd5"], "commitHash": "f3675dbad7b273256634b2b1d8aac12b169d8623", "commitSpoonAstDiffStats": [], "nameRev": "f3675dbad7b273256634b2b1d8aac12b169d8623 tags/jetty-9.2.17.v20160517~4", "commitUser": "sbordet", "authoredDateTime": "2016-05-12 17:19:04", "commitGHEventType": "closed", "commitGitStats": [{"lines": 7, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/http/HttpConnectionOverHTTP.java", "insertions": 7, "deletions": 0}, {"lines": 157, "filePath": "jetty-proxy/src/test/java/org/eclipse/jetty/proxy/ProxyTunnellingTest.java", "insertions": 89, "deletions": 68}, {"lines": 12, "filePath": "jetty-fcgi/fcgi-client/src/main/java/org/eclipse/jetty/fcgi/client/http/HttpConnectionOverFCGI.java", "insertions": 12, "deletions": 0}, {"lines": 6, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/api/Connection.java", "insertions": 6, "deletions": 0}, {"lines": 287, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpProxy.java", "insertions": 191, "deletions": 96}, {"lines": 21, "filePath": "jetty-spdy/spdy-http-client-transport/src/main/java/org/eclipse/jetty/spdy/client/http/HttpConnectionOverSPDY.java", "insertions": 16, "deletions": 5}, {"lines": 33, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/AuthenticationProtocolHandler.java", "insertions": 28, "deletions": 5}, {"lines": 4, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/PoolingHttpDestination.java", "insertions": 2, "deletions": 2}], "commitDateTime": "2016-05-12 17:19:04", "spoonStatsSkippedReason": "tooManyChanges"}], "title": "Jetty Client Proxy Authentication does not work with HTTP Proxy tunneling", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 1.0, "INS": 0.0, "UPD": 1.0, "MOV": 1.0, "TOT": 3.0, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 4, "insertions": 2, "gitFilesChange": 1, "deletions": 2}, "closed": "2016-05-12 17:31:39", "statsSkippedReason": "", "body": "Proxy authentication when using HTTP tunnel causes issues when copying request to send auth headers in [AuthenticationProcolHandler.java](https://github.com/eclipse/jetty.project/blob/jetty-9.2.x/jetty-client/src/main/java/org/eclipse/jetty/client/AuthenticationProtocolHandler.java#L151)\n\nIncluded a test case in PR https://github.com/eclipse/jetty.project/pull/568 , which fails with:\n\n```\njava.util.concurrent.ExecutionException: java.lang.NullPointerException\n\n    at org.eclipse.jetty.client.util.FutureResponseListener.getResult(FutureResponseListener.java:118)\n    at org.eclipse.jetty.client.util.FutureResponseListener.get(FutureResponseListener.java:101)\n    at org.eclipse.jetty.client.HttpRequest.send(HttpRequest.java:653)\n    at org.eclipse.jetty.proxy.ProxyTunnellingTest.testProxyAuth(ProxyTunnellingTest.java:325)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:483)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\n    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\n    at org.junit.rules.TestWatcher$1.evaluate(TestWatcher.java:55)\n    at org.junit.rules.RunRules.evaluate(RunRules.java:20)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n    at org.junit.runner.JUnitCore.run(JUnitCore.java:137)\n    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:119)\n    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:42)\n    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:234)\n    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:74)\nCaused by: java.lang.NullPointerException\n    at org.eclipse.jetty.client.HttpRequest.<init>(HttpRequest.java:89)\n    at org.eclipse.jetty.client.HttpClient.newHttpRequest(HttpClient.java:456)\n    at org.eclipse.jetty.client.HttpClient.copyRequest(HttpClient.java:420)\n    at org.eclipse.jetty.client.AuthenticationProtocolHandler$AuthenticationListener.onComplete(AuthenticationProtocolHandler.java:151)\n    at org.eclipse.jetty.client.ResponseNotifier.notifyComplete(ResponseNotifier.java:193)\n    at org.eclipse.jetty.client.ResponseNotifier.notifyComplete(ResponseNotifier.java:185)\n    at org.eclipse.jetty.client.HttpReceiver.terminateResponse(HttpReceiver.java:453)\n    at org.eclipse.jetty.client.HttpReceiver.responseSuccess(HttpReceiver.java:400)\n    at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.messageComplete(HttpReceiverOverHTTP.java:266)\n    at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:1268)\n    at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.parse(HttpReceiverOverHTTP.java:156)\n    at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.process(HttpReceiverOverHTTP.java:117)\n    at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.receive(HttpReceiverOverHTTP.java:69)\n    at org.eclipse.jetty.client.http.HttpChannelOverHTTP.receive(HttpChannelOverHTTP.java:89)\n    at org.eclipse.jetty.client.http.HttpConnectionOverHTTP.onFillable(HttpConnectionOverHTTP.java:122)\n    at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:544)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:635)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:555)\n    at java.lang.Thread.run(Thread.java:745)\n```\n", "changesInPackagesGIT": ["jetty-client/src/main/java/org/eclipse/jetty/client"], "changesInPackagesSPOON": ["org.eclipse.jetty.client.HttpProxy.CreateTunnelPromise.tunnelFailed(org.eclipse.jetty.io.EndPoint,java.lang.Throwable)", "org.eclipse.jetty.client.HttpProxy.CreateTunnelPromise.failed(java.lang.Throwable)"], "ttf": 1.0002777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/560"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 6, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug", "Security"], "user": "joakime", "filteredCommits": ["97af3d663fd22343129e8364d601640649d9eaea"], "commits": {"8137d8874904ed6d40c592507acec77f302b3f26": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "f9429242b7cdcb62b73df754d9e50be4717b2064": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "cecabfa3a7e86c89460caa7d45bae7f945f4f89d": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "8d237efa0ca36732d1bf2a56de4f569bc31fb9bd": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "3d2240c6afd2a0e5bb0805a1396f398604bb49c6": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "97af3d663fd22343129e8364d601640649d9eaea": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "b0627f5ece196ef892ef0694a8c02719426259d4": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2016-05-10 01:20:39", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "8137d8874904ed6d40c592507acec77f302b3f26", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "f9429242b7cdcb62b73df754d9e50be4717b2064", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "cecabfa3a7e86c89460caa7d45bae7f945f4f89d", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "8d237efa0ca36732d1bf2a56de4f569bc31fb9bd", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "3d2240c6afd2a0e5bb0805a1396f398604bb49c6", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #556 - Improve Resource.getAlias() checks on Windows\n\n+ Reworks PathResource and FileResource alias checking to\n  use originally passed paths, before Windows JVM has a\n  chance to normalize and \"correct\" the bad paths.\n", "commitParents": ["0a1f4ac98c8ae614e0bf1a33936627161258dbe1"], "commitHash": "97af3d663fd22343129e8364d601640649d9eaea", "commitSpoonAstDiffStats": [{"spoonFilePath": "PathResource.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.PathResource.addPath(java.lang.String)", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 2, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.util.resource.PathResource", "DEL": 2, "INS": 4, "UPD": 0, "MOV": 1, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.util.resource.PathResource.checkAliasPath()", "DEL": 0, "INS": 6, "UPD": 0, "MOV": 0, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.util.resource.PathResource.checkAliasPath(java.nio.file.Path)", "DEL": 8, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 8}]}, {"spoonFilePath": "URIUtil.java", "spoonMethods": []}, {"spoonFilePath": "GracefulStopTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.GracefulStopTest.testGracefulComplete()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AllowSymLinkAliasChecker.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.AllowSymLinkAliasChecker.check(java.lang.String,org.eclipse.jetty.util.resource.Resource)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "FileSystemResourceTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.FileSystemResourceTest.testAddPath_WindowsSlash()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.FileSystemResourceTest.testAddDoubleSlash()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.FileSystemResourceTest.testAddInitialSlash()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.FileSystemResourceTest.testAddPath_WindowsExtensionLess()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.FileSystemResourceTest.testAddInitialDoubleSlash()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.FileSystemResourceTest.findRootDir(java.nio.file.FileSystem)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 1, "TOT": 3}]}, {"spoonFilePath": "ContextHandlerGetResourceTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandlerGetResourceTest.testSlashSlash()", "DEL": 2, "INS": 0, "UPD": 4, "MOV": 2, "TOT": 8}]}, {"spoonFilePath": "FileResource.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.FileResource.normalizeURI(java.io.File,java.net.URI)", "DEL": 1, "INS": 2, "UPD": 1, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.util.resource.FileResource.getURL()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.util.resource.FileResource.getURI()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 2, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.util.resource.FileResource.addPath(java.lang.String)", "DEL": 3, "INS": 1, "UPD": 4, "MOV": 17, "TOT": 25}, {"spoonMethodName": "org.eclipse.jetty.util.resource.FileResource.checkFileAlias(java.net.URI,java.io.File)", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.util.resource.FileResource", "DEL": 1, "INS": 13, "UPD": 3, "MOV": 10, "TOT": 27}, {"spoonMethodName": "org.eclipse.jetty.util.resource.FileResource.isDirectory()", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.util.resource.FileResource.toString()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.util.resource.FileResource.checkFileAlias(java.io.File)", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 3}]}, {"spoonFilePath": "AsyncMiddleManServletTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.proxy.AsyncMiddleManServletTest.testAfterContentTransformerOverflowingToDisk()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}], "nameRev": "97af3d663fd22343129e8364d601640649d9eaea tags/jetty-9.3.9.v20160517~7", "commitUser": "joakime", "authoredDateTime": "2016-05-13 11:57:23", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 163, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/resource/FileResource.java", "insertions": 100, "deletions": 63}, {"lines": 5, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/AllowSymLinkAliasChecker.java", "insertions": 4, "deletions": 1}, {"lines": 66, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/resource/PathResource.java", "insertions": 53, "deletions": 13}, {"lines": 213, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/resource/FileSystemResourceTest.java", "insertions": 198, "deletions": 15}, {"lines": 3, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/URIUtil.java", "insertions": 0, "deletions": 3}, {"lines": 10, "filePath": "jetty-proxy/src/test/java/org/eclipse/jetty/proxy/AsyncMiddleManServletTest.java", "insertions": 8, "deletions": 2}, {"lines": 14, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/handler/ContextHandlerGetResourceTest.java", "insertions": 7, "deletions": 7}, {"lines": 3, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/GracefulStopTest.java", "insertions": 3, "deletions": 0}], "commitDateTime": "2016-05-13 11:57:23", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "b0627f5ece196ef892ef0694a8c02719426259d4", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "gregw", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "Improve Resource.getAlias() checks on Windows", "spoonStatsSummary": {"spoonMethodsChanged": 14, "DEL": 19.0, "INS": 33.0, "UPD": 12.0, "MOV": 37.0, "TOT": 101.0, "spoonFilesChanged": 3}, "gitStatsSummary": {"lines": 237.0, "insertions": 157.0, "gitFilesChange": 4, "deletions": 80.0}, "closed": "2016-05-13 18:58:51", "statsSkippedReason": "", "body": "There are a few improvements for Resource.getAlias() on windows identified during a code walk thru.\n", "changesInPackagesGIT": ["jetty-util/src/main/java/org/eclipse/jetty/util", "jetty-util/src/main/java/org/eclipse/jetty/util/resource", "jetty-server/src/main/java/org/eclipse/jetty/server/handler"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.handler.AllowSymLinkAliasChecker.check(java.lang.String,org.eclipse.jetty.util.resource.Resource)", "org.eclipse.jetty.util.resource.PathResource.checkAliasPath(java.nio.file.Path)", "org.eclipse.jetty.util.resource.FileResource.normalizeURI(java.io.File,java.net.URI)", "org.eclipse.jetty.util.resource.FileResource.getURI()", "org.eclipse.jetty.util.resource.PathResource.addPath(java.lang.String)", "org.eclipse.jetty.util.resource.FileResource.addPath(java.lang.String)", "org.eclipse.jetty.util.resource.PathResource", "org.eclipse.jetty.util.resource.FileResource.checkFileAlias(java.io.File)", "org.eclipse.jetty.util.resource.FileResource.toString()", "org.eclipse.jetty.util.resource.FileResource.getURL()", "org.eclipse.jetty.util.resource.FileResource.checkFileAlias(java.net.URI,java.io.File)", "org.eclipse.jetty.util.resource.FileResource", "org.eclipse.jetty.util.resource.FileResource.isDirectory()", "org.eclipse.jetty.util.resource.PathResource.checkAliasPath()"], "ttf": 3.000277777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/556"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "sbordet", "filteredCommits": ["a0bd9d38876765161ae95883b9f19d41d67cc315"], "commits": {"a0bd9d38876765161ae95883b9f19d41d67cc315": {"commitUser": "sbordet", "commitGHEventType": "closed"}}, "created": "2016-05-04 09:32:28", "commitsDetails": [{"commitMessage": "Fixes #546 (Guard concurrent calls to ExecutionStrategy.execute())\n\nGuarded invocations to execute() with a state change.\n", "commitParents": ["49a19abd71b234090b9595adb6744c73292df145"], "commitHash": "a0bd9d38876765161ae95883b9f19d41d67cc315", "commitSpoonAstDiffStats": [{"spoonFilePath": "ProduceExecuteConsume.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.thread.strategy.ProduceExecuteConsume", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.thread.strategy.ProduceExecuteConsume.State", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.thread.strategy.ProduceExecuteConsume.execute()", "DEL": 2, "INS": 3, "UPD": 0, "MOV": 2, "TOT": 7}]}, {"spoonFilePath": "ProduceConsume.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.thread.strategy.ProduceConsume.State", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.thread.strategy.ProduceConsume", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.thread.strategy.ProduceConsume.execute()", "DEL": 2, "INS": 4, "UPD": 0, "MOV": 3, "TOT": 9}]}], "nameRev": "a0bd9d38876765161ae95883b9f19d41d67cc315 tags/jetty-9.3.9.v20160517~42", "commitUser": "sbordet", "authoredDateTime": "2016-05-04 11:43:50", "commitGHEventType": "closed", "commitGitStats": [{"lines": 25, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/thread/strategy/ProduceConsume.java", "insertions": 23, "deletions": 2}, {"lines": 23, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/thread/strategy/ProduceExecuteConsume.java", "insertions": 22, "deletions": 1}], "commitDateTime": "2016-05-04 11:43:50", "spoonStatsSkippedReason": ""}], "title": "Guard concurrent calls to ExecutionStrategy.execute()", "spoonStatsSummary": {"spoonMethodsChanged": 6, "DEL": 4, "INS": 11, "UPD": 0, "MOV": 5, "TOT": 20, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 48, "insertions": 45, "gitFilesChange": 2, "deletions": 3}, "closed": "2016-05-04 09:49:10", "statsSkippedReason": "", "body": "The contract of `ExecutionStrategy.execute()` is that when called concurrently by multiple threads, only one thread should start producing.\n\nWhile this holds for `ExecuteProduceConsume`, it does not hold for `ProduceConsume` nor for `ProduceExecuteConsume`.\n", "changesInPackagesGIT": ["jetty-util/src/main/java/org/eclipse/jetty/util/thread/strategy"], "changesInPackagesSPOON": ["org.eclipse.jetty.util.thread.strategy.ProduceConsume.State", "org.eclipse.jetty.util.thread.strategy.ProduceExecuteConsume.State", "org.eclipse.jetty.util.thread.strategy.ProduceConsume", "org.eclipse.jetty.util.thread.strategy.ProduceExecuteConsume", "org.eclipse.jetty.util.thread.strategy.ProduceExecuteConsume.execute()", "org.eclipse.jetty.util.thread.strategy.ProduceConsume.execute()"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/546"}, {"labels": ["Bug"], "closed": "2016-05-03 18:56:24", "body": "Investigate cause (and possibly fix) a NPE reported at Atmosphere/atmosphere#2154 which is holding up Jetty 9.3 integration at Atmosphere/atmosphere#1998\n\n```\nCaused by: java.lang.NullPointerException\n    at org.eclipse.jetty.server.HttpConnection$Content.succeeded(HttpConnection.java:586)\n    at org.eclipse.jetty.server.HttpInput.pollContent(HttpInput.java:205)\n    at org.eclipse.jetty.server.HttpInput.nextContent(HttpInput.java:183)\n    at org.eclipse.jetty.server.HttpInput.read(HttpInput.java:145)\n    at org.eclipse.jetty.server.HttpInput.read(HttpInput.java:129)\n    at org.eclipse.jetty.util.UrlEncoded.decodeUtf8To(UrlEncoded.java:538)\n    at org.eclipse.jetty.util.UrlEncoded.decodeTo(UrlEncoded.java:674)\n    at org.eclipse.jetty.server.Request.extractFormParameters(Request.java:480)\n    at org.eclipse.jetty.server.Request.extractContentParameters(Request.java:412)\n    at org.eclipse.jetty.server.Request.extractParameters(Request.java:364)\n    at org.eclipse.jetty.server.Request.getParameter(Request.java:958)\n    at javax.servlet.ServletRequestWrapper.getParameter(ServletRequestWrapper.java:194)\n    at com.vaadin.server.communication.ServletUIInitHandler.isUIInitRequest(ServletUIInitHandler.java:30)\n```\n", "commits": {}, "title": "NPE during HttpConnection$Content.succeeded()", "created": "2016-05-03 11:40:11", "user": "joakime", "url": "https://github.com/eclipse/jetty.project/issues/543", "commitsDetails": [], "ttf": 0.0002777777777777778}, {"labels": ["Bug", "Unable To Replicate"], "closed": "2018-03-19 15:58:46", "body": "```\n[INFO] --- maven-dependency-plugin:2.2:unpack-dependencies (unpack-config-deps) @ jetty-distribution ---\nDownloading: https://repo.maven.apache.org/maven2/org/eclipse/jetty/orbit/javax.security.auth.message/1.0.0.v201108011116/javax.security.auth.message-1.0.0.v201108011116-config.jar\n```\n", "commits": {}, "title": "Build hangs on non existent config jars", "created": "2016-04-29 05:49:22", "user": "gregw", "url": "https://github.com/eclipse/jetty.project/issues/535", "commitsDetails": [], "ttf": 689.0002777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug", "High Priority"], "user": "janbartel", "filteredCommits": ["480aa4d8747ab6032c004e0a75c0090a42ca4c13"], "commits": {"480aa4d8747ab6032c004e0a75c0090a42ca4c13": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2016-04-29 00:21:47", "commitsDetails": [{"commitMessage": "Issue #534\n\nRemove synchronization around session iteration when checking for idle sessions.\n", "commitParents": ["c74dd571fac8977bf0a81489df5fa2f9abd613d1"], "commitHash": "480aa4d8747ab6032c004e0a75c0090a42ca4c13", "commitSpoonAstDiffStats": [{"spoonFilePath": "MongoSessionManager.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.MongoSessionManager.idle()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}]}], "nameRev": "480aa4d8747ab6032c004e0a75c0090a42ca4c13 tags/jetty-9.3.9.v20160517~51", "commitUser": "janbartel", "authoredDateTime": "2016-04-29 10:22:09", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 14, "filePath": "jetty-nosql/src/main/java/org/eclipse/jetty/nosql/mongodb/MongoSessionManager.java", "insertions": 6, "deletions": 8}], "commitDateTime": "2016-04-29 14:38:34", "spoonStatsSkippedReason": ""}], "title": "Deadlock in MongoSessionManager", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 14, "insertions": 6, "gitFilesChange": 1, "deletions": 8}, "closed": "2016-06-10 05:46:26", "statsSkippedReason": "", "body": "Deadlock situation in mongo sessions with session idle passivation enabled:\n\n\"qtp1365202186-1034\":\n        at org.eclipse.jetty.server.session.AbstractSessionIdManager.newSessionId(AbstractSessionIdManager.java:127)\n        - waiting to lock <0x00000000e3293928> (a org.eclipse.jetty.nosql.mongodb.MongoSessionIdManager)\n        at org.eclipse.jetty.server.session.AbstractSession.<init>(AbstractSession.java:73)\n\n\"qtp1365202186-28\":\n        at org.eclipse.jetty.nosql.mongodb.MongoSessionManager.save(MongoSessionManager.java:223)\n        - waiting to lock <0x00000000e349c448> (a org.eclipse.jetty.nosql.mongodb.MongoSessionManager)\n        at org.eclipse.jetty.nosql.NoSqlSession.save(NoSqlSession.java:182)\n        - locked <0x00000000e6670798> (a org.eclipse.jetty.nosql.NoSqlSession)\n        at org.eclipse.jetty.nosql.NoSqlSessionManager.addSession(NoSqlSessionManager.java:73)\n        at org.eclipse.jetty.server.session.AbstractSessionManager.addSession(AbstractSessionManager.java:692)\n        - locked <0x00000000e3293928> (a org.eclipse.jetty.nosql.mongodb.MongoSessionIdManager)\n        at org.eclipse.jetty.server.session.AbstractSessionManager.newHttpSession(AbstractSessionManager.java:576)\n\n\"Scheduler-1552787810\":\n        at org.eclipse.jetty.server.session.AbstractSession.getAccessed(AbstractSession.java:131)\n        - waiting to lock <0x00000000e6b6b078> (a org.eclipse.jetty.nosql.NoSqlSession)\n        at org.eclipse.jetty.nosql.mongodb.MongoSessionManager.idle(MongoSessionManager.java:597)\n        - locked <0x00000000e349c448> (a org.eclipse.jetty.nosql.mongodb.MongoSessionManager)\n        at org.eclipse.jetty.nosql.mongodb.MongoSessionIdManager.idle(MongoSessionIdManager.java:705)\n\n\"qtp1365202186-62\":\n        at org.eclipse.jetty.nosql.mongodb.MongoSessionManager.save(MongoSessionManager.java:223)\n        - waiting to lock <0x00000000e349c448> (a org.eclipse.jetty.nosql.mongodb.MongoSessionManager)\n        at org.eclipse.jetty.nosql.NoSqlSession.save(NoSqlSession.java:182)\n        - locked <0x00000000e6b6b078> (a org.eclipse.jetty.nosql.NoSqlSession)\n        at org.eclipse.jetty.nosql.NoSqlSession.complete(NoSqlSession.java:157)\n", "changesInPackagesGIT": ["jetty-nosql/src/main/java/org/eclipse/jetty/nosql/mongodb"], "changesInPackagesSPOON": ["org.eclipse.jetty.nosql.mongodb.MongoSessionManager.idle()"], "ttf": 42.000277777777775, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/534"}, {"labels": ["Bug"], "closed": "2017-03-01 14:59:31", "body": "Hi all,\n\nI'm using CometD through web socket connections and on Google Chrome I can see that frames larger than 8 KB are truncated (I used the network debug tool of Chrome to analyze the content of the decompressed frames).\nI configured ws.maxMessageSize to 1 MB to stress this case.\nThe same configuration doesn't create any problem on Internet Explorer or using the Java client.\n\nDisabling server side PerMessageDeflateExtension all works perfectly.\n\nI investigated a bit in the Jetty PerMessageDeflateExtension (CompressExtension) code and I found several buffers limited to 8 KB.\nCan this be the root cause of the issue that I'm experiencing?\n\nI'm using a branch based on Jetty 9.3.7: https://github.com/eclipse/jetty.project/tree/bugs/388\nChrome version 49.0.2623.112 m\n\nMarco\n", "commits": {}, "title": "Websocket - PerMessageDeflateExtension Limit to 8KBytes", "created": "2016-04-28 17:29:48", "user": "Marco85Li", "url": "https://github.com/eclipse/jetty.project/issues/533", "commitsDetails": [], "ttf": 306.0002777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 3, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "wpedot", "filteredCommits": ["44fa2b0de193a5b1ef1a3aecf3171084aea935e6", "2a5b120fc3f0f04b044c3024efde49d7b6a60380", "9dbd94485007490692e0f35c97862fd572232344", "7c6786a050bdd546079fadd70a7c99d283ed67c0"], "commits": {"7c6786a050bdd546079fadd70a7c99d283ed67c0": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "2a5b120fc3f0f04b044c3024efde49d7b6a60380": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "44fa2b0de193a5b1ef1a3aecf3171084aea935e6": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "9dbd94485007490692e0f35c97862fd572232344": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "9800c3c1286bd3d0c6da3ea9bcd4970579e048e7": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "695b63fc78febf4ab219f74dead29b21ba30937a": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "49ec41f60047248b23dac5140ad583c1c1efd7e0": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2016-04-26 14:05:33", "commitsDetails": [{"commitMessage": "Issue #525\n\nfixed bad merge\n", "commitParents": ["298a340851ad09d92965c2be0e1a961681443efb"], "commitHash": "7c6786a050bdd546079fadd70a7c99d283ed67c0", "commitSpoonAstDiffStats": [{"spoonFilePath": "PostServletTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.PostServletTest.testBadPost()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "7c6786a050bdd546079fadd70a7c99d283ed67c0 tags/jetty-9.3.9.v20160517~12", "commitUser": "gregw", "authoredDateTime": "2016-05-12 13:42:46", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 4, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/PostServletTest.java", "insertions": 2, "deletions": 2}], "commitDateTime": "2016-05-12 13:42:46", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #525 Looping on malformed request\n\nFixed unit test for 9.4 error handling\n", "commitParents": ["879afebfba49771279ddf0538ce5591e8834a773"], "commitHash": "9dbd94485007490692e0f35c97862fd572232344", "commitSpoonAstDiffStats": [{"spoonFilePath": "PostServletTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.PostServletTest.testBadSplitPost()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.PostServletTest.testBadFlushedPost()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.PostServletTest.BasicReadPostServlet.doPost(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlet.PostServletTest.testBadPost()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "9dbd94485007490692e0f35c97862fd572232344 tags/jetty-9.4.0.M0~90", "commitUser": "gregw", "authoredDateTime": "2016-04-29 15:05:19", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 77, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/PostServletTest.java", "insertions": 73, "deletions": 4}], "commitDateTime": "2016-04-29 15:05:19", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #525 fix blockForContent spin\n\nabort request in bad request handling\n", "commitParents": ["bb4b3ef1a94925d34da6a01f6577754ba13e556a"], "commitHash": "2a5b120fc3f0f04b044c3024efde49d7b6a60380", "commitSpoonAstDiffStats": [], "nameRev": "2a5b120fc3f0f04b044c3024efde49d7b6a60380 tags/jetty-9.3.9.v20160517~33", "commitUser": "gregw", "authoredDateTime": "2016-05-06 20:31:55", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 1, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannelOverHttp.java", "insertions": 1, "deletions": 0}, {"lines": 285, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/PostServletTest.java", "insertions": 140, "deletions": 145}, {"lines": 1, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannel.java", "insertions": 1, "deletions": 0}], "commitDateTime": "2016-05-06 20:31:55", "spoonStatsSkippedReason": "tooManyChanges"}, {"commitMessage": "Issue #525 - Possible 100% CPU Consumption in HttpInputOverHttp.blockForContent with malformed HTTP-Request\n\n+ Adding testcase to attempt to replicate\n  (Does not cause spin loop, so set to @Ignore for now)\n", "commitParents": ["f1c34cb10ffdcd27bd532944b74bef4e7efafa99"], "commitHash": "44fa2b0de193a5b1ef1a3aecf3171084aea935e6", "commitSpoonAstDiffStats": [{"spoonFilePath": "PostServletTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.PostServletTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "44fa2b0de193a5b1ef1a3aecf3171084aea935e6 tags/jetty-9.3.9.v20160517~59", "commitUser": "joakime", "authoredDateTime": "2016-04-26 14:31:08", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 111, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/PostServletTest.java", "insertions": 111, "deletions": 0}], "commitDateTime": "2016-04-26 14:31:08", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #525\n\nRemoved deprecated \"name\"\n", "commitParents": ["f63bdda05c123ab8518a675c15682312e325a6d0"], "commitHash": "9800c3c1286bd3d0c6da3ea9bcd4970579e048e7", "commitSpoonAstDiffStats": [], "nameRev": "9800c3c1286bd3d0c6da3ea9bcd4970579e048e7 tags/jetty-9.4.0.M0~93", "commitUser": "janbartel", "authoredDateTime": "2016-04-28 17:38:05", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 3, "filePath": "jetty-start/src/test/resources/usecases/dynamic/modules/impl/dynamic-1.8.0_05.mod", "insertions": 0, "deletions": 3}, {"lines": 3, "filePath": "jetty-start/src/test/resources/usecases/dynamic/modules/impl/dynamic-1.7.0_31.mod", "insertions": 0, "deletions": 3}], "commitDateTime": "2016-04-28 17:38:05", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #525 Looping on malformed request\n\nImproved onBadMessage handling so that it better handles ISE thrown when a bad message is detected while dispatched to the servlet.\n", "commitParents": ["a1eab9d9a43e6f69d330be4dd3971bceb9761fe1"], "commitHash": "695b63fc78febf4ab219f74dead29b21ba30937a", "commitSpoonAstDiffStats": [{"spoonFilePath": "PostServletTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.PostServletTest", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.PostServletTest.testGoodPost()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.PostServletTest.BasicReadPostServlet.doPost(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 3, "INS": 4, "UPD": 2, "MOV": 3, "TOT": 12}, {"spoonMethodName": "org.eclipse.jetty.servlet.PostServletTest.testBadPost()", "DEL": 2, "INS": 7, "UPD": 3, "MOV": 7, "TOT": 19}]}, {"spoonFilePath": "HttpChannel.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannel.onBadMessage(int,java.lang.String)", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 1, "TOT": 4}]}, {"spoonFilePath": "HttpParser.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.HttpParser.parseNext(java.nio.ByteBuffer)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}]}], "nameRev": "695b63fc78febf4ab219f74dead29b21ba30937a tags/jetty-9.3.9.v20160517~57", "commitUser": "gregw", "authoredDateTime": "2016-04-27 18:57:15", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 64, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/PostServletTest.java", "insertions": 49, "deletions": 15}, {"lines": 14, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannel.java", "insertions": 13, "deletions": 1}, {"lines": 2, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/HttpParser.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2016-04-27 18:57:15", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #525 fix blockForContent spin\n\nImproved test\n", "commitParents": ["019353274862ddfbd5938963e2ce96f8765aef2f"], "commitHash": "49ec41f60047248b23dac5140ad583c1c1efd7e0", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpChannelOverHttp.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannelOverHttp.headerComplete()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "PostServletTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.PostServletTest.testBadSplitPost()", "DEL": 3, "INS": 0, "UPD": 4, "MOV": 15, "TOT": 22}, {"spoonMethodName": "org.eclipse.jetty.servlet.PostServletTest.testDeferredBadPost()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlet.PostServletTest.BasicReadPostServlet.doPost(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 1, "INS": 8, "UPD": 0, "MOV": 3, "TOT": 12}, {"spoonMethodName": "org.eclipse.jetty.servlet.PostServletTest.startServer()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlet.PostServletTest.testBadFlushedPost()", "DEL": 0, "INS": 0, "UPD": 6, "MOV": 24, "TOT": 30}, {"spoonMethodName": "org.eclipse.jetty.servlet.PostServletTest", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlet.PostServletTest.testGoodPost()", "DEL": 1, "INS": 3, "UPD": 3, "MOV": 18, "TOT": 25}, {"spoonMethodName": "org.eclipse.jetty.servlet.PostServletTest.testBadPost()", "DEL": 1, "INS": 1, "UPD": 4, "MOV": 20, "TOT": 26}]}], "nameRev": "49ec41f60047248b23dac5140ad583c1c1efd7e0 tags/jetty-9.4.0.M0~56", "commitUser": "gregw", "authoredDateTime": "2016-05-18 12:53:44", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 6, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannelOverHttp.java", "insertions": 5, "deletions": 1}, {"lines": 86, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/PostServletTest.java", "insertions": 56, "deletions": 30}], "commitDateTime": "2016-05-18 12:54:27", "spoonStatsSkippedReason": ""}], "title": "Spin in HttpInputOverHttp.blockForContent with malformed HTTP-Request", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 2, "insertions": 2, "gitFilesChange": 2, "deletions": 0}, "closed": "2017-04-28 11:09:19", "statsSkippedReason": "", "body": "Since upgrading to Jetty9 (embedded in equinox framework) I noticed (very rare) spikes in CPU-Usage caused by Jetty pool-threads, the only way to get rid of those threads is to terminate them with (deprecated) Thread.stop. After yet another such spike I now took the time to investigate this further, here are my findings:\n\nThe affected threads appearantly loop in HttpInputOverHttp.blockForContent, there never is any more content and isFinished does not return true .\n\nThe root-cause seems to be a malformed HTTP-Post with chunked transfer-encoding, more specifically an invalid chunk-length. This triggers a NumberFormatException which in combination with a servlet that tries to read from Request.inputStream after said exception causes the read-call to loop. I have tested this with 9.2.13 and 9.3.8. The affected servlet in my application is CXF but I was able to reproduce the issue with a skeleton-servlet as well.\n\nCreate a servlet with a doPost-method like this\n\n<pre>\nprotected void doPost(HttpServletRequest request, HttpServletResponse response)  {\n    try {\n        request.getInputStream().read();\n    } catch (Exception e) {\n        try {\n             // this read-call will block\n            request.getInputStream().read();\n        } catch (IOException e1) {\n            e1.printStackTrace();\n        }\n    }\n}\n</pre>\n\n\nAnd send a post-request like this:\n\n<pre>\nPOST /testservlet HTTP/1.1\nHost: localhost\nTransfer-Encoding: chunked\n\nx\n\n</pre>\n\n\n\"x\" is not a valid hex-digit and therefor not a valid chunk-length.\nYou should get an error like this in the log\n\n<pre>\norg.eclipse.jetty.http.HttpParser  - parse exception: java.lang.NumberFormatException: !hex 120 in CHUNKED_CONTENT for HttpChannelOverHttp@573efd0c{r=1,c=false,a=DISPATCHED,uri=//localhost/testservlet}\n</pre>\n\n\nand see a busy CPU-core and also some heap-churn.\n\nCan you reproduce this as well?\n", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": [], "ttf": 366.0002777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/525"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "janbartel", "filteredCommits": ["210f9a8d7c7d96eafaaa8e03373921b6782f3ba7"], "commits": {"210f9a8d7c7d96eafaaa8e03373921b6782f3ba7": {"commitUser": "joakime", "commitGHEventType": "closed"}}, "created": "2016-04-13 05:30:41", "commitsDetails": [{"commitMessage": "Fixes #510 - Module [depend] property expansion should support eg foo/${bar}/${bar}-xxx\n", "commitParents": ["76476b6d285b006caa419412e2558020be4c6ac8"], "commitHash": "210f9a8d7c7d96eafaaa8e03373921b6782f3ba7", "commitSpoonAstDiffStats": [{"spoonFilePath": "Props.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.start.Props.expand(java.lang.String,java.util.Stack)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}, {"spoonFilePath": "PropsTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.start.PropsTest.testExpandDouble()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "210f9a8d7c7d96eafaaa8e03373921b6782f3ba7 tags/jetty-9.2.16.v20160414~5", "commitUser": "joakime", "authoredDateTime": "2016-04-13 11:50:57", "commitGHEventType": "closed", "commitGitStats": [{"lines": 20, "filePath": "jetty-start/src/test/java/org/eclipse/jetty/start/PropsTest.java", "insertions": 17, "deletions": 3}, {"lines": 8, "filePath": "jetty-start/src/main/java/org/eclipse/jetty/start/Props.java", "insertions": 4, "deletions": 4}], "commitDateTime": "2016-04-13 11:50:57", "spoonStatsSkippedReason": ""}], "title": "Module [depend] property expansion should support eg foo/${bar}/${bar}-xxx", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 8, "insertions": 4, "gitFilesChange": 1, "deletions": 4}, "closed": "2016-04-13 18:53:04", "statsSkippedReason": "", "body": "If a [depend] clause like the following is used in a .mod file:\n\n[depend]\nfoo/${bar}/${bar}-xxx\n\nThen the following exception is thrown:\n\norg.eclipse.jetty.start.PropsException: Property expansion loop detected: session-type -> session-type\n    at org.eclipse.jetty.start.Props.expand(Props.java:227)\n    at org.eclipse.jetty.start.Props.expand(Props.java:189)\n    at org.eclipse.jetty.start.Module.lambda$expandProperties$3(Module.java:151)\n    at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n    at java.util.HashMap$KeySpliterator.forEachRemaining(HashMap.java:1540)\n    at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\n    at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\n    at java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n    at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n    at java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:499)\n    at org.eclipse.jetty.start.Module.expandProperties(Module.java:152)\n    at org.eclipse.jetty.start.Modules.enable(Modules.java:226)\n    at org.eclipse.jetty.start.Modules.select(Modules.java:215)\n    at org.eclipse.jetty.start.BaseBuilder.build(BaseBuilder.java:120)\n    at org.eclipse.jetty.start.Main.start(Main.java:407)\n    at org.eclipse.jetty.start.Main.main(Main.java:73)\n\nSeems like this should be supported.\n", "changesInPackagesGIT": ["jetty-start/src/main/java/org/eclipse/jetty/start"], "changesInPackagesSPOON": ["org.eclipse.jetty.start.Props.expand(java.lang.String,java.util.Stack)"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/510"}, {"labels": ["Bug"], "closed": "2016-04-14 15:40:22", "body": "We are working in a plain old servlet project, and we use embedded jetty (version `9.3.7.v20160115`) as our servlet container, and we use `RequestLogImpl` from `logback-access` to log request log. \n\nHere is some simple example code\n\n``` java\n        Server server = new Server(8081);\n        RequestLogImpl requestLog = new RequestLogImpl();\n        requestLog.setResource(\"logback-access.xml\");\n\n        RequestLogHandler logHandler = new RequestLogHandler();\n        logHandler.setRequestLog(requestLog);\n\n        server.setHandler(logHandler);\n\n        server.start();\n        server.dumpStdErr();\n        server.join();\n```\n\nBut after we restarted the server, and make some requests, we didn't see any access log came out. Then we decided to debug and finally found out the reason is because `RequestLog` doesn't extend `LifeCycle`, so the `start` method of `RequestLogImpl`, which will init and configure the logback, will not be called. \n\nThen we tried `9.2.15.v20160210`, and it worked well.\n\nSo I am wondering why you made this change and if there is some better solution for our case?\n", "commits": {}, "title": "logback-access no longer works with Jetty 9.3+", "created": "2016-04-13 03:23:43", "user": "kevinjom", "url": "https://github.com/eclipse/jetty.project/issues/509", "commitsDetails": [], "ttf": 1.0002777777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "sbordet", "filteredCommits": ["f0a1ccf4d341dabfd63ce62325ba204d610b00f9"], "commits": {"f0a1ccf4d341dabfd63ce62325ba204d610b00f9": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2016-04-11 16:11:04", "commitsDetails": [{"commitMessage": "Fixes #504 - HTTP/2 client transport cannot send request after idle timeout.\n\nMade sure that the idle timeout mechanism notifies the destination\nthat the connection will close.\n\nAlso reviewed the close protocol to be: notify destination, then abort,\nthen close. In this way, HTTP/2 can send RST_STREAM before the\nconnection is closed.\n", "commitParents": ["11242ae1ec8fc8e5c7690bc159695cec3d01f694"], "commitHash": "f0a1ccf4d341dabfd63ce62325ba204d610b00f9", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpConnectionOverFCGI.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.fcgi.client.http.HttpConnectionOverFCGI.close(java.lang.Throwable)", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}]}, {"spoonFilePath": "HttpConnectionOverHTTP.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.http.HttpConnectionOverHTTP.close(java.lang.Throwable)", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}]}, {"spoonFilePath": "HttpClientIdleTimeoutTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.client.HttpClientIdleTimeoutTest.testServerIdleTimeout()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.http.client.HttpClientIdleTimeoutTest.testRequestIdleTimeout()", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 1, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.http.client.HttpClientIdleTimeoutTest.testRequestIdleTimeout().2.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.http.client.HttpClientIdleTimeoutTest.testClientIdleTimeout().1.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.http.client.HttpClientIdleTimeoutTest.testClientIdleTimeout()", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 1, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.http.client.HttpClientIdleTimeoutTest.testIdleClientIdleTimeout()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpConnectionOverHTTP2.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.client.http.HttpConnectionOverHTTP2.onIdleTimeout(long)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.client.http.HttpConnectionOverHTTP2.close(java.lang.Throwable)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 3, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.http2.client.http.HttpConnectionOverHTTP2", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpClientTransportOverHTTP2Test.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.client.http.HttpClientTransportOverHTTP2Test.testRequestIdleTimeoutSendsResetFrame()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.client.http.HttpClientTransportOverHTTP2Test.testConnectionIdleTimeoutSendsResetFrame()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "f0a1ccf4d341dabfd63ce62325ba204d610b00f9 tags/jetty-9.3.9.M1~1", "commitUser": "sbordet", "authoredDateTime": "2016-04-11 19:14:34", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 64, "filePath": "tests/test-http-client-transport/src/test/java/org/eclipse/jetty/http/client/HttpClientIdleTimeoutTest.java", "insertions": 54, "deletions": 10}, {"lines": 7, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/http/HttpConnectionOverHTTP.java", "insertions": 3, "deletions": 4}, {"lines": 25, "filePath": "jetty-http2/http2-http-client-transport/src/main/java/org/eclipse/jetty/http2/client/http/HttpConnectionOverHTTP2.java", "insertions": 20, "deletions": 5}, {"lines": 77, "filePath": "jetty-http2/http2-http-client-transport/src/test/java/org/eclipse/jetty/http2/client/http/HttpClientTransportOverHTTP2Test.java", "insertions": 77, "deletions": 0}, {"lines": 7, "filePath": "jetty-fcgi/fcgi-client/src/main/java/org/eclipse/jetty/fcgi/client/http/HttpConnectionOverFCGI.java", "insertions": 3, "deletions": 4}], "commitDateTime": "2016-04-11 19:15:17", "spoonStatsSkippedReason": ""}], "title": "HTTP/2 client transport cannot send request after idle timeout", "spoonStatsSummary": {"spoonMethodsChanged": 5, "DEL": 0, "INS": 3, "UPD": 0, "MOV": 5, "TOT": 8, "spoonFilesChanged": 3}, "gitStatsSummary": {"lines": 39, "insertions": 26, "gitFilesChange": 3, "deletions": 13}, "closed": "2016-04-11 17:16:21", "statsSkippedReason": "", "body": "When the HTTP/2 client transport idle times out a connection, the destination is not notified that the connection was closed, and a subsequent request being sent would cause a spin loop: the destination thinking that the connection was ok, the actual send finding the connection idle timed out already, causing the destination to re-enqueue the request.\n", "changesInPackagesGIT": ["jetty-client/src/main/java/org/eclipse/jetty/client/http", "jetty-fcgi/fcgi-client/src/main/java/org/eclipse/jetty/fcgi/client", "jetty-http2/http2-http-client-transport/src/main/java/org/eclipse/jetty/http2/client"], "changesInPackagesSPOON": ["org.eclipse.jetty.http2.client.http.HttpConnectionOverHTTP2.onIdleTimeout(long)", "org.eclipse.jetty.client.http.HttpConnectionOverHTTP.close(java.lang.Throwable)", "org.eclipse.jetty.http2.client.http.HttpConnectionOverHTTP2.close(java.lang.Throwable)", "org.eclipse.jetty.http2.client.http.HttpConnectionOverHTTP2", "org.eclipse.jetty.fcgi.client.http.HttpConnectionOverFCGI.close(java.lang.Throwable)"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/504"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "sbordet", "filteredCommits": ["11242ae1ec8fc8e5c7690bc159695cec3d01f694"], "commits": {"11242ae1ec8fc8e5c7690bc159695cec3d01f694": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2016-04-11 11:30:14", "commitsDetails": [{"commitMessage": "Fixes #503 -  Wrong request-per-connection counting in MultiplexHttpDestination in case of failures.\n", "commitParents": ["ac4ee8fec4eb321915091db05d8e806e0d2029f7"], "commitHash": "11242ae1ec8fc8e5c7690bc159695cec3d01f694", "commitSpoonAstDiffStats": [{"spoonFilePath": "MultiplexHttpDestination.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.MultiplexHttpDestination.process(org.eclipse.jetty.client.api.Connection)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}], "nameRev": "11242ae1ec8fc8e5c7690bc159695cec3d01f694 tags/jetty-9.3.9.M1~2", "commitUser": "sbordet", "authoredDateTime": "2016-04-11 13:31:24", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 4, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/MultiplexHttpDestination.java", "insertions": 2, "deletions": 2}], "commitDateTime": "2016-04-11 19:15:17", "spoonStatsSkippedReason": ""}], "title": "Wrong request-per-connection counting in MultiplexHttpDestination in case of failures", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 4, "insertions": 2, "gitFilesChange": 1, "deletions": 2}, "closed": "2016-04-11 17:16:33", "statsSkippedReason": "", "body": "`MultiplexHttpDestination` does not decrease the `requestsPerConnection` field in case a `SendFailure` is returned by a send.\n", "changesInPackagesGIT": ["jetty-client/src/main/java/org/eclipse/jetty/client"], "changesInPackagesSPOON": ["org.eclipse.jetty.client.MultiplexHttpDestination.process(org.eclipse.jetty.client.api.Connection)"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/503"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "laeubi", "filteredCommits": ["f7ffadfc2f69b59b125cd9a97c57548fa74b9d12"], "commits": {"f550fcd57ff77feda53fc8a36fb88cc35acff5a3": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "f7ffadfc2f69b59b125cd9a97c57548fa74b9d12": {"commitUser": "janbartel", "commitGHEventType": "closed"}}, "created": "2016-04-07 12:33:16", "commitsDetails": [{"commitMessage": "Merge pull request #499 from laeubi/is495\n\nFix #495 EventSender might leak service-references or miss them at all", "commitParents": ["522f600281c33dc38fc4dceb4dfd2adf69ed869d", "f7ffadfc2f69b59b125cd9a97c57548fa74b9d12"], "commitHash": "f550fcd57ff77feda53fc8a36fb88cc35acff5a3", "commitSpoonAstDiffStats": [{"spoonFilePath": "EventSender.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.osgi.boot.utils.EventSender", "DEL": 2, "INS": 2, "UPD": 4, "MOV": 4, "TOT": 12}, {"spoonMethodName": "org.eclipse.jetty.osgi.boot.utils.EventSender.send(java.lang.String,org.osgi.framework.Bundle,java.lang.String,java.lang.Exception)", "DEL": 3, "INS": 3, "UPD": 0, "MOV": 4, "TOT": 10}]}], "nameRev": "f550fcd57ff77feda53fc8a36fb88cc35acff5a3 tags/jetty-9.4.0.M0~105", "commitUser": "janbartel", "authoredDateTime": "2016-04-21 09:10:00", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 46, "filePath": "jetty-osgi/jetty-osgi-boot/src/main/java/org/eclipse/jetty/osgi/boot/utils/EventSender.java", "insertions": 23, "deletions": 23}], "commitDateTime": "2016-04-21 09:10:00", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fix #495 EventSender might leak service-references or miss them at all\n\nSigned-off-by: laeubi <laeubi@laeubi-soft.de>", "commitParents": ["2fb9b55da285fbb5d7a65512e0438c640898dc05"], "commitHash": "f7ffadfc2f69b59b125cd9a97c57548fa74b9d12", "commitSpoonAstDiffStats": [{"spoonFilePath": "EventSender.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.osgi.boot.utils.EventSender", "DEL": 2, "INS": 2, "UPD": 4, "MOV": 4, "TOT": 12}, {"spoonMethodName": "org.eclipse.jetty.osgi.boot.utils.EventSender.send(java.lang.String,org.osgi.framework.Bundle,java.lang.String,java.lang.Exception)", "DEL": 3, "INS": 3, "UPD": 0, "MOV": 4, "TOT": 10}]}], "nameRev": "f7ffadfc2f69b59b125cd9a97c57548fa74b9d12 tags/jetty-9.4.0.M0~105^2", "commitUser": "janbartel", "authoredDateTime": "2016-04-08 08:51:05", "commitGHEventType": "closed", "commitGitStats": [{"lines": 46, "filePath": "jetty-osgi/jetty-osgi-boot/src/main/java/org/eclipse/jetty/osgi/boot/utils/EventSender.java", "insertions": 23, "deletions": 23}], "commitDateTime": "2016-04-08 08:51:05", "spoonStatsSkippedReason": ""}], "title": "[jetty-osgi] EventSender might leak service-references or miss them at all", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 5, "INS": 5, "UPD": 4, "MOV": 8, "TOT": 22, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 46, "insertions": 23, "gitFilesChange": 1, "deletions": 23}, "closed": "2016-04-20 23:10:01", "statsSkippedReason": "", "body": "The EventSender currently looks up the EventAdmin once uppon construction. That is bad in two ways:\n- It might miss the EventAdmin service at all if not started on the time of the lookup\n- It will leak the refenrence to the EventAdmin even though it might be uninstalled or updated in the OSGi framework\n\nThe sollution would be to use a Servicetracker instead.\n", "changesInPackagesGIT": ["jetty-osgi/jetty-osgi-boot/src/main/java/org/eclipse/jetty/osgi/boot"], "changesInPackagesSPOON": ["org.eclipse.jetty.osgi.boot.utils.EventSender", "org.eclipse.jetty.osgi.boot.utils.EventSender.send(java.lang.String,org.osgi.framework.Bundle,java.lang.String,java.lang.Exception)"], "ttf": 13.000277777777777, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/495"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "gregw", "filteredCommits": ["4b94aa2c97be7148dfe690be457aa4521ff7fd3a"], "commits": {"4b94aa2c97be7148dfe690be457aa4521ff7fd3a": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2016-04-07 01:36:52", "commitsDetails": [{"commitMessage": "Issue #491 Do not assume gzip acceptable for HTTP/2\n\nRemoved the HTTP/2 specific code for #491\n", "commitParents": ["b047c6332e928d1e5a2d9f30e4a1b6e1e7144203"], "commitHash": "4b94aa2c97be7148dfe690be457aa4521ff7fd3a", "commitSpoonAstDiffStats": [{"spoonFilePath": "GzipHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.gzip.GzipHandler.getDeflater(org.eclipse.jetty.server.Request,long)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 4, "TOT": 5}]}], "nameRev": "4b94aa2c97be7148dfe690be457aa4521ff7fd3a tags/jetty-9.3.9.M1~6", "commitUser": "gregw", "authoredDateTime": "2016-04-07 11:39:34", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 27, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/gzip/GzipHandler.java", "insertions": 12, "deletions": 15}], "commitDateTime": "2016-04-07 11:39:34", "spoonStatsSkippedReason": ""}], "title": "Do not assume gzip acceptable for HTTP/2", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 1, "INS": 0, "UPD": 0, "MOV": 4, "TOT": 5, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 27, "insertions": 12, "gitFilesChange": 1, "deletions": 15}, "closed": "2016-04-07 07:30:06", "statsSkippedReason": "", "body": "The Accept-Encoding header is explicitly not checked by the [GzipHandler](https://github.com/eclipse/jetty.project/blob/jetty-9.3.x/jetty-server/src/main/java/org/eclipse/jetty/server/handler/gzip/GzipHandler.java#L263-L280).  I believe this can be traced back to a SPDY specification issue [coded into the SPDY connection factory](https://github.com/eclipse/jetty.project/blob/d9ada8a1eb3b5b6c65f43885bf557692a8ce94eb/jetty-spdy/spdy-http-server/src/main/java/org/eclipse/jetty/spdy/server/http/HTTPSPDYServerConnectionFactory.java#L100-L107) .\n", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server/handler/gzip"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.handler.gzip.GzipHandler.getDeflater(org.eclipse.jetty.server.Request,long)"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/491"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "annorax", "filteredCommits": ["d9bfc8b8e067484047750eb324793ba4c8fca434"], "commits": {"d9bfc8b8e067484047750eb324793ba4c8fca434": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2016-04-06 17:01:53", "commitsDetails": [{"commitMessage": "Issue #490 serverClasses set from jetty-web.xml\n\nProvided a mode that ignores server classes, but still allows them to be edited.\n", "commitParents": ["4b94aa2c97be7148dfe690be457aa4521ff7fd3a"], "commitHash": "d9bfc8b8e067484047750eb324793ba4c8fca434", "commitSpoonAstDiffStats": [{"spoonFilePath": "WebAppContext.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.WebAppContext.isServerClass(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.webapp.WebAppContext.runWithoutCheckingServerClasses(java.util.concurrent.Callable)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.webapp.WebAppContext", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "JettyWebXmlConfiguration.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.JettyWebXmlConfiguration.configure(org.eclipse.jetty.webapp.WebAppContext)", "DEL": 2, "INS": 3, "UPD": 7, "MOV": 9, "TOT": 21}]}], "nameRev": "d9bfc8b8e067484047750eb324793ba4c8fca434 tags/jetty-9.3.9.M1~5", "commitUser": "gregw", "authoredDateTime": "2016-04-07 17:35:03", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 53, "filePath": "jetty-webapp/src/main/java/org/eclipse/jetty/webapp/JettyWebXmlConfiguration.java", "insertions": 25, "deletions": 28}, {"lines": 27, "filePath": "jetty-webapp/src/main/java/org/eclipse/jetty/webapp/WebAppContext.java", "insertions": 26, "deletions": 1}], "commitDateTime": "2016-04-07 17:35:03", "spoonStatsSkippedReason": ""}], "title": "WebAppContext serverClasses list cannot be modified from within xml config", "spoonStatsSummary": {"spoonMethodsChanged": 4, "DEL": 2, "INS": 6, "UPD": 7, "MOV": 9, "TOT": 24, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 80, "insertions": 51, "gitFilesChange": 2, "deletions": 29}, "closed": "2016-04-08 23:02:03", "statsSkippedReason": "", "body": "I tried using `addServerClass()`, `prependServerClass()` and `setServerClasses()` to manipulate the server class list from within jetty-web.xml but it wouldn't budge. Almost as though it's immutable.\n\nThe docs, however, [clearly state](http://www.eclipse.org/jetty/documentation/current/jetty-classloading.html) that this list _can_ be manipulated, and indeed why else would these methods exist.\n\nI then went to the code and saw that this is intentional - a comment in the implementation of JettyWebXmlConfiguration says:\n\n```\nNo server classes while configuring\n```\n\n... this class saves a snapshot of the list before applying the xml config and then restores it later, overriding any changes that the xml config makes.\n\nBut why? And how / when else would I change the server class list? By the time I have programmatic access to the WebAppContext, my app has been loaded, and it's too late - the NoClassDefFoundError has already been thrown.\n\nI really need this in order to let one of my dependencies \"see\" the package `org.eclipse.jetty.ssl`, which is hidden by default due to the default server class pattern `org.eclipse.jetty.`.\n", "changesInPackagesGIT": ["jetty-webapp/src/main/java/org/eclipse/jetty/webapp"], "changesInPackagesSPOON": ["org.eclipse.jetty.webapp.JettyWebXmlConfiguration.configure(org.eclipse.jetty.webapp.WebAppContext)", "org.eclipse.jetty.webapp.WebAppContext.isServerClass(java.lang.String)", "org.eclipse.jetty.webapp.WebAppContext.runWithoutCheckingServerClasses(java.util.concurrent.Callable)", "org.eclipse.jetty.webapp.WebAppContext"], "ttf": 2.000277777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/490"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "sbordet", "filteredCommits": ["aac9f70243bebe7115c71c359e23531907be7236", "3fb06cca21406b3645247b690eee19123db88362"], "commits": {"aac9f70243bebe7115c71c359e23531907be7236": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "3fb06cca21406b3645247b690eee19123db88362": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2016-04-01 15:30:27", "commitsDetails": [{"commitMessage": "Fixes #476 - HttpClient should not send absolute-form target with non HttpProxy.\n\nNow only sending absolute-form in case of HttpProxy.\n", "commitParents": ["ce04cadb795c1ce31f2037cb33e93b714bfadc69"], "commitHash": "aac9f70243bebe7115c71c359e23531907be7236", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpConnection.normalizeRequest(org.eclipse.jetty.client.api.Request)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "Socks4ProxyTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.Socks4ProxyTest.testSocks4ProxyWithSplitResponse().2.onComplete(org.eclipse.jetty.client.api.Result)", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.Socks4ProxyTest.testSocks4ProxyWithSplitResponse()", "DEL": 4, "INS": 6, "UPD": 1, "MOV": 1, "TOT": 12}, {"spoonMethodName": "org.eclipse.jetty.client.Socks4ProxyTest.testSocks4Proxy().1.onComplete(org.eclipse.jetty.client.api.Result)", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.Socks4ProxyTest.testSocks4Proxy()", "DEL": 4, "INS": 7, "UPD": 1, "MOV": 1, "TOT": 13}]}], "nameRev": "aac9f70243bebe7115c71c359e23531907be7236 tags/jetty-9.3.9.M0~6^2~5", "commitUser": "sbordet", "authoredDateTime": "2016-04-01 17:46:22", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 45, "filePath": "jetty-client/src/test/java/org/eclipse/jetty/client/Socks4ProxyTest.java", "insertions": 20, "deletions": 25}, {"lines": 2, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpConnection.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2016-04-01 17:46:22", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #476 - HttpClient should not send absolute-form target with non HttpProxy.\n\nFixed test case.\n", "commitParents": ["4f68d44a5001b579cffb0f17940791767aaed71f"], "commitHash": "3fb06cca21406b3645247b690eee19123db88362", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpClientCustomProxyTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpClientCustomProxyTest.testCustomProxy().1.handle(java.lang.String,org.eclipse.jetty.server.Request,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}]}], "nameRev": "3fb06cca21406b3645247b690eee19123db88362 tags/jetty-9.3.9.M0~6^2~3", "commitUser": "sbordet", "authoredDateTime": "2016-04-01 22:04:15", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 5, "filePath": "jetty-client/src/test/java/org/eclipse/jetty/client/HttpClientCustomProxyTest.java", "insertions": 1, "deletions": 4}], "commitDateTime": "2016-04-01 22:04:15", "spoonStatsSkippedReason": ""}], "title": "HttpClient should not send absolute-form target with non HttpProxy", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 2, "insertions": 1, "gitFilesChange": 1, "deletions": 1}, "closed": "2016-04-01 17:18:23", "statsSkippedReason": "", "body": "In case `HttpClient` is configured with `Socks4Proxy` or other proxies that are not those defined by the HTTP specification, it should not send the request target using the _absolute-form_ (as required by the HTTP specification).\n", "changesInPackagesGIT": ["jetty-client/src/main/java/org/eclipse/jetty/client"], "changesInPackagesSPOON": ["org.eclipse.jetty.client.HttpConnection.normalizeRequest(org.eclipse.jetty.client.api.Request)"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/476"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "vrotaru-hpe", "filteredCommits": ["86f3947378a38d8086822043c53de0fccf91f435"], "commits": {"86f3947378a38d8086822043c53de0fccf91f435": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2016-03-25 11:02:25", "commitsDetails": [{"commitMessage": "Issue #454 - DoSFilter does not send an error status code when closing a connection, because of timeout.\n\nIntroduced onRequestTimeout() to deprecate closeConnection() since\nthe method was wrongly named.\nNow onRequestTimeout() performs a sendError(503) to signal that the\nrequest timed out, rather than responding with 200 OK.\n\nCleaned up tests.\n", "commitParents": ["c768828703ac25b8bcba08c74658d6c1775d03a2"], "commitHash": "86f3947378a38d8086822043c53de0fccf91f435", "commitSpoonAstDiffStats": [{"spoonFilePath": "CloseableDoSFilterTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlets.CloseableDoSFilterTest.setUp()", "DEL": 1, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlets.CloseableDoSFilterTest.CloseableDoSFilter2", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlets.CloseableDoSFilterTest.testUnresponsiveClient()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlets.CloseableDoSFilterTest", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "DoSFilterTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlets.DoSFilterTest.testRateIsRateExceeded()", "DEL": 0, "INS": 0, "UPD": 7, "MOV": 5, "TOT": 12}, {"spoonMethodName": "org.eclipse.jetty.servlets.DoSFilterTest.setUp()", "DEL": 1, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlets.DoSFilterTest.testWhitelist()", "DEL": 5, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.servlets.DoSFilterTest.DoSFilter2", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlets.DoSFilterTest", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlets.DoSFilterTest.DoSFilter2.closeConnection(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse,java.lang.Thread)", "DEL": 0, "INS": 0, "UPD": 4, "MOV": 5, "TOT": 9}]}, {"spoonFilePath": "CloseableDoSFilter.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlets.CloseableDoSFilter.closeConnection(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse,java.lang.Thread)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "DoSFilter.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlets.DoSFilter.closeConnection(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse,java.lang.Thread)", "DEL": 0, "INS": 1, "UPD": 8, "MOV": 7, "TOT": 16}]}, {"spoonFilePath": "AbstractDoSFilterTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlets.AbstractDoSFilterTest.testEvenLowRateIP()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 2, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.servlets.AbstractDoSFilterTest", "DEL": 6, "INS": 0, "UPD": 4, "MOV": 0, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.servlets.AbstractDoSFilterTest.testBurstLowRateIP()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 2, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.servlets.AbstractDoSFilterTest.testUnavailableIP().2.run()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlets.AbstractDoSFilterTest.testThrottledIP()", "DEL": 0, "INS": 0, "UPD": 4, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.servlets.AbstractDoSFilterTest.testUnavailableIP()", "DEL": 0, "INS": 0, "UPD": 5, "MOV": 0, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.servlets.AbstractDoSFilterTest.testDelayedIP()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.servlets.AbstractDoSFilterTest.startServer(java.lang.Class)", "DEL": 18, "INS": 26, "UPD": 0, "MOV": 8, "TOT": 52}, {"spoonMethodName": "org.eclipse.jetty.servlets.AbstractDoSFilterTest.doRequests(java.lang.String,int,long,long,java.lang.String)", "DEL": 2, "INS": 3, "UPD": 1, "MOV": 1, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.servlets.AbstractDoSFilterTest.startFilters()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlets.AbstractDoSFilterTest.stopServer()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlets.AbstractDoSFilterTest.testUnresponsiveClient()", "DEL": 1, "INS": 0, "UPD": 3, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.servlets.AbstractDoSFilterTest.testMultipleSessionTracking()", "DEL": 1, "INS": 0, "UPD": 4, "MOV": 4, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.servlets.AbstractDoSFilterTest.testThrottledIP().1.run()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlets.AbstractDoSFilterTest.testSessionTracking()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.servlets.AbstractDoSFilterTest.stopFilters()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}]}], "nameRev": "86f3947378a38d8086822043c53de0fccf91f435 tags/jetty-9.3.9.M0~10", "commitUser": "sbordet", "authoredDateTime": "2016-03-30 16:34:10", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 9, "filePath": "jetty-servlets/src/main/java/org/eclipse/jetty/servlets/CloseableDoSFilter.java", "insertions": 4, "deletions": 5}, {"lines": 60, "filePath": "jetty-servlets/src/main/java/org/eclipse/jetty/servlets/DoSFilter.java", "insertions": 30, "deletions": 30}, {"lines": 40, "filePath": "jetty-servlets/src/test/java/org/eclipse/jetty/servlets/CloseableDoSFilterTest.java", "insertions": 4, "deletions": 36}, {"lines": 56, "filePath": "jetty-servlets/src/test/java/org/eclipse/jetty/servlets/DoSFilterTest.java", "insertions": 15, "deletions": 41}, {"lines": 144, "filePath": "jetty-servlets/src/test/java/org/eclipse/jetty/servlets/AbstractDoSFilterTest.java", "insertions": 57, "deletions": 87}], "commitDateTime": "2016-03-30 19:08:32", "spoonStatsSkippedReason": ""}], "title": "DoSFilter does not send an error status code when closing a connection, because of timeout", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 0, "INS": 1, "UPD": 10, "MOV": 7, "TOT": 18, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 69, "insertions": 34, "gitFilesChange": 2, "deletions": 35}, "closed": "2016-03-30 17:10:28", "statsSkippedReason": "", "body": "Hi, guys, we are using Jetty and we have this issue, that the Jetty returns a 200 OK status code on a login form when the login fails after an unusually long timeout (30 seconds).\n\nThis was quite unexpected. `DoSFilter` just adds a header \"Connection: Close\" and shutdowns the connection. A 503 **Service Unavailable** seems a better option.\n\n> The 503 (Service Unavailable) status code indicates that the server\n>    is currently unable to handle the request due to a temporary overload\n>    or scheduled maintenance, which will likely be alleviated after some\n>    delay.\n\nI've put up a small project [dos-filter-example](https://github.com/vrotaru-hpe/dos-filter-example) demonstrating this behavior. If this is indeed a bug, it would be quite easy to contribute a fix.\n\nBut first, and foremost, I need to know that this is bug, and not expected behavior\n", "changesInPackagesGIT": ["jetty-servlets/src/main/java/org/eclipse/jetty/servlets"], "changesInPackagesSPOON": ["org.eclipse.jetty.servlets.CloseableDoSFilter.closeConnection(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse,java.lang.Thread)", "org.eclipse.jetty.servlets.DoSFilter.closeConnection(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse,java.lang.Thread)"], "ttf": 5.000277777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/454"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "TuomasKiviaho", "filteredCommits": ["c8fea46e8f3a81bba2a98abc00a34f30d97c5e46"], "commits": {"c8fea46e8f3a81bba2a98abc00a34f30d97c5e46": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2016-03-22 09:45:05", "commitsDetails": [{"commitMessage": "Issue #450 - Client AuthenticationProtocolHandler sends request failures to response failure listener.\n\nFixed by properly forwarding response success in case only the\nrequest failed.\n", "commitParents": ["a97d29f54b5ee410a8115a791af1bf9233e6746e"], "commitHash": "c8fea46e8f3a81bba2a98abc00a34f30d97c5e46", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpClientAuthenticationTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpClientAuthenticationTest.test_RequestFailsAfterResponse()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AuthenticationProtocolHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.AuthenticationProtocolHandler.AuthenticationListener.onComplete(org.eclipse.jetty.client.api.Result)", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.client.AuthenticationProtocolHandler.AuthenticationListener.forwardFailureComplete(org.eclipse.jetty.client.HttpRequest,java.lang.Throwable,org.eclipse.jetty.client.api.Response,java.lang.Throwable)", "DEL": 0, "INS": 2, "UPD": 1, "MOV": 2, "TOT": 5}]}], "nameRev": "c8fea46e8f3a81bba2a98abc00a34f30d97c5e46 tags/jetty-9.3.9.M0~6^2~8", "commitUser": "sbordet", "authoredDateTime": "2016-04-01 12:46:04", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 41, "filePath": "jetty-client/src/test/java/org/eclipse/jetty/client/HttpClientAuthenticationTest.java", "insertions": 41, "deletions": 0}, {"lines": 10, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/AuthenticationProtocolHandler.java", "insertions": 7, "deletions": 3}], "commitDateTime": "2016-04-01 12:46:12", "spoonStatsSkippedReason": ""}], "title": "Client AuthenticationProtocolHandler sends request failures to response failure listener", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 2, "INS": 2, "UPD": 1, "MOV": 3, "TOT": 8, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 10, "insertions": 7, "gitFilesChange": 1, "deletions": 3}, "closed": "2016-04-01 10:50:16", "statsSkippedReason": "", "body": "I was getting an NPE from missing exception at my failure listener although I knew there should've been an exception present.\n\nThe reason was that for some reason `AuthenticationProtocolHandler` treats both request and response failures to response failure listener and the request failure exception is lost because of this in the stacktrace following steps (jetty 9.3.8)\n\n```\nResponseNotifier.notifyFailure(Response$FailureListener, Response, Throwable) line: 170 \nResponseNotifier.notifyFailure(List<ResponseListener>, Response, Throwable) line: 162   \nResponseNotifier.forwardFailure(List<ResponseListener>, Response, Throwable) line: 236  \nResponseNotifier.forwardFailureComplete(List<ResponseListener>, Request, Throwable, Response, Throwable) line: 241  \nAuthenticationProtocolHandler$AuthenticationListener.forwardFailureComplete(HttpRequest, Throwable, Response, Throwable) line: 209  \nAuthenticationProtocolHandler$AuthenticationListener.onComplete(Result) line: 94    \n```\n\nI think that `AuthenticationProtocolHandler` should have also a `RequestNotifier` to which request failures should be sent insetad of the `ResponseNotifier`.\n", "changesInPackagesGIT": ["jetty-client/src/main/java/org/eclipse/jetty/client"], "changesInPackagesSPOON": ["org.eclipse.jetty.client.AuthenticationProtocolHandler.AuthenticationListener.onComplete(org.eclipse.jetty.client.api.Result)", "org.eclipse.jetty.client.AuthenticationProtocolHandler.AuthenticationListener.forwardFailureComplete(org.eclipse.jetty.client.HttpRequest,java.lang.Throwable,org.eclipse.jetty.client.api.Response,java.lang.Throwable)"], "ttf": 10.000277777777777, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/450"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["36f559b483763c1d8886eab00027f0f698902118"], "commits": {"36f559b483763c1d8886eab00027f0f698902118": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2016-03-21 19:23:06", "commitsDetails": [{"commitMessage": "Issue #446 - jetty-quickstart path normalization uses improper paths on Windows\n\nUsing URI syntax everywhere in AttributeNormalizer\n", "commitParents": ["4f777a060ffdb7f04726dd71bd11258fa6b0b438"], "commitHash": "36f559b483763c1d8886eab00027f0f698902118", "commitSpoonAstDiffStats": [{"spoonFilePath": "AttributeNormalizerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.quickstart.AttributeNormalizerTest.testWindowsTLD()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AttributeNormalizerPathTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.quickstart.AttributeNormalizerPathTest", "DEL": 3, "INS": 5, "UPD": 0, "MOV": 0, "TOT": 8}]}, {"spoonFilePath": "AttributeNormalizer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.quickstart.AttributeNormalizer.normalize(java.lang.Object)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.quickstart.AttributeNormalizer.normalizePath(java.nio.file.Path)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 2, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.quickstart.AttributeNormalizer.getString(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.quickstart.AttributeNormalizer.uriSeparators(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "36f559b483763c1d8886eab00027f0f698902118 tags/jetty-9.3.9.M0~24", "commitUser": "joakime", "authoredDateTime": "2016-03-21 15:40:42", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 10, "filePath": "tests/test-quickstart/src/test/java/org/eclipse/jetty/quickstart/AttributeNormalizerPathTest.java", "insertions": 5, "deletions": 5}, {"lines": 25, "filePath": "jetty-quickstart/src/main/java/org/eclipse/jetty/quickstart/AttributeNormalizer.java", "insertions": 21, "deletions": 4}, {"lines": 21, "filePath": "tests/test-quickstart/src/test/java/org/eclipse/jetty/quickstart/AttributeNormalizerTest.java", "insertions": 20, "deletions": 1}], "commitDateTime": "2016-03-21 15:40:42", "spoonStatsSkippedReason": ""}], "title": "jetty-quickstart path normalization uses improper paths on Windows", "spoonStatsSummary": {"spoonMethodsChanged": 4, "DEL": 0, "INS": 4, "UPD": 2, "MOV": 3, "TOT": 9, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 25, "insertions": 21, "gitFilesChange": 1, "deletions": 4}, "closed": "2016-03-21 22:41:37", "statsSkippedReason": "", "body": "When normalizing a path on windows, the following occurs ...\n\n```\njar:file:c:/users/joakim/.m2/repository/something/somejar.jar!/META-INF/some.tld\n```\n\nAfter normalizing it becomes (with wrong slashes)\n\n```\njar:file:${user.home}\\.m2\\repository\\something\\somejar.jar!/META-INF/some.tld\n```\n\nThen, after forked process starts and expands variable (with mixed slashes):\n\n```\njar:file:c:\\users\\joakim\\.m2\\repository\\something\\somejar.jar!/META-INF/some.tld\n```\n", "changesInPackagesGIT": ["jetty-quickstart/src/main/java/org/eclipse/jetty/quickstart"], "changesInPackagesSPOON": ["org.eclipse.jetty.quickstart.AttributeNormalizer.uriSeparators(java.lang.String)", "org.eclipse.jetty.quickstart.AttributeNormalizer.normalizePath(java.nio.file.Path)", "org.eclipse.jetty.quickstart.AttributeNormalizer.getString(java.lang.String)", "org.eclipse.jetty.quickstart.AttributeNormalizer.normalize(java.lang.Object)"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/446"}, {"labels": ["Bug"], "closed": "2017-04-21 10:17:02", "body": "When reloading any JSP several times very quickly using HTTP/2 the exception below is fired.  Since reloading a page is normal behavior this exception should not be fired (or should be catched).\n\n```\norg.apache.jasper.JasperException: org.eclipse.jetty.io.RuntimeIOException: org.eclipse.jetty.io.EofException: reset\n        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:478)\n        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:396)\n        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:340)\n        at org.eclipse.jetty.jsp.JettyJspServlet.service(JettyJspServlet.java:108)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)\n        at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:845)\n        at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:583)\n        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)\n        at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:566)\n        at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226)\n        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)\n        at org.eclipse.jetty.server.handler.RequestLogHandler.handle(RequestLogHandler.java:56)\n        at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1162)\n        at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:511)\n        at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185)\n        at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1092)\n        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\n        at org.eclipse.jetty.server.Dispatcher.forward(Dispatcher.java:199)\n        at org.eclipse.jetty.server.Dispatcher.forward(Dispatcher.java:74)\n        ...\n        ...\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:687)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)\n        at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:845)\n        at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:583)\n        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)\n        at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:566)\n        at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226)\n        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)\n        at org.eclipse.jetty.server.handler.RequestLogHandler.handle(RequestLogHandler.java:56)\n        at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1162)\n        at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:511)\n        at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185)\n        at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1092)\n        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\n        at org.eclipse.jetty.server.Dispatcher.forward(Dispatcher.java:199)\n        at org.eclipse.jetty.server.Dispatcher.forward(Dispatcher.java:74)\n        ...\n        at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1676)\n        ...\n        at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1676)\n        ....\n        at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1668)\n        at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:581)\n        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)\n        at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:548)\n        at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226)\n        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)\n        at org.eclipse.jetty.server.handler.RequestLogHandler.handle(RequestLogHandler.java:56)\n        at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1162)\n        at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:511)\n        at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185)\n        at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1092)\n        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\n        at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:213)\n        at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:119)\n        at org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(GzipHandler.java:462)\n        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:134)\n        at org.eclipse.jetty.server.Server.handle(Server.java:518)\n        at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:308)\n        at org.eclipse.jetty.server.HttpChannel.run(HttpChannel.java:262)\n        at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceAndRun(ExecuteProduceConsume.java:246)\n        at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.execute(ExecuteProduceConsume.java:102)\n        at org.eclipse.jetty.http2.HTTP2Connection.onFillable(HTTP2Connection.java:97)\n        at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:273)\n        at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)\n        at org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:93)\n        at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceAndRun(ExecuteProduceConsume.java:246)\n        at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:156)\n        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:654)\n        at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n        at java.lang.Thread.run(Thread.java:745)\nCaused by: org.eclipse.jetty.io.RuntimeIOException: org.eclipse.jetty.io.EofException: reset\n        at org.eclipse.jetty.server.ResponseWriter.isOpen(ResponseWriter.java:133)\n        at org.eclipse.jetty.server.ResponseWriter.write(ResponseWriter.java:202)\n        at org.apache.jasper.runtime.JspWriterImpl.flushBuffer(JspWriterImpl.java:109)\n        at org.apache.jasper.runtime.PageContextImpl.release(PageContextImpl.java:184)\n        at org.apache.jasper.runtime.JspFactoryImpl.internalReleasePageContext(JspFactoryImpl.java:120)\n        at org.apache.jasper.runtime.JspFactoryImpl.releasePageContext(JspFactoryImpl.java:75)\n        at org.apache.jsp.WEB_002dINF.jsp.hotel_005fdetail_jsp._jspService(hotel_005fdetail_jsp.java:1612)\n        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)\n        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:438)\n        ... 71 more\nCaused by: org.eclipse.jetty.io.EofException: reset\n        at org.eclipse.jetty.http2.HTTP2Flusher$Entry.reset(HTTP2Flusher.java:340)\n        at org.eclipse.jetty.http2.HTTP2Flusher.process(HTTP2Flusher.java:221)\n        at org.eclipse.jetty.util.IteratingCallback.processing(IteratingCallback.java:241)\n        at org.eclipse.jetty.util.IteratingCallback.iterate(IteratingCallback.java:224)\n        at org.eclipse.jetty.http2.HTTP2Session.frame(HTTP2Session.java:622)\n        at org.eclipse.jetty.http2.HTTP2Session.data(HTTP2Session.java:612)\n        at org.eclipse.jetty.http2.HTTP2Stream.data(HTTP2Stream.java:101)\n        at org.eclipse.jetty.http2.server.HttpTransportOverHTTP2.send(HttpTransportOverHTTP2.java:187)\n        at org.eclipse.jetty.http2.server.HttpTransportOverHTTP2.send(HttpTransportOverHTTP2.java:105)\n        at org.eclipse.jetty.server.HttpChannel.sendResponse(HttpChannel.java:668)\n        at org.eclipse.jetty.server.HttpChannel.write(HttpChannel.java:722)\n        at org.eclipse.jetty.server.handler.gzip.GzipHttpOutputInterceptor$GzipBufferCB.process(GzipHttpOutputInterceptor.java:369)\n        at org.eclipse.jetty.util.IteratingCallback.processing(IteratingCallback.java:241)\n        at org.eclipse.jetty.util.IteratingCallback.iterate(IteratingCallback.java:224)\n        at org.eclipse.jetty.server.handler.gzip.GzipHttpOutputInterceptor.gzip(GzipHttpOutputInterceptor.java:146)\n        at org.eclipse.jetty.server.handler.gzip.GzipHttpOutputInterceptor.commit(GzipHttpOutputInterceptor.java:228)\n        at org.eclipse.jetty.server.handler.gzip.GzipHttpOutputInterceptor.write(GzipHttpOutputInterceptor.java:103)\n        at org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:179)\n        at org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:163)\n        at org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:415)\n        at java.io.ByteArrayOutputStream.writeTo(ByteArrayOutputStream.java:167)\n        at org.eclipse.jetty.server.Utf8HttpWriter.write(Utf8HttpWriter.java:183)\n        at org.eclipse.jetty.server.ResponseWriter.write(ResponseWriter.java:203)\n        at org.apache.jasper.runtime.JspWriterImpl.flushBuffer(JspWriterImpl.java:109)\n        at org.apache.jasper.runtime.JspWriterImpl.write(JspWriterImpl.java:326)\n        at java.io.Writer.write(Writer.java:157)\n        at org.apache.jasper.runtime.JspWriterImpl.print(JspWriterImpl.java:461)\n        at org.apache.taglibs.standard.tag.common.fmt.BundleSupport.doEndTag(BundleSupport.java:102)\n        at org.apache.jsp.WEB_002dINF.jsp.hotel_005fdetail_jsp._jspService(hotel_005fdetail_jsp.java:1592)\n        ... 74 more\n```\n\nWe are using Jetty 9.3.8.\n", "commits": {}, "title": "Noisy EofException when page reloads under HTTP/2 conditions", "created": "2016-03-18 15:04:58", "user": "ofrias", "url": "https://github.com/eclipse/jetty.project/issues/443", "commitsDetails": [], "ttf": 398.0002777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "sbordet", "filteredCommits": ["0e0edbb6db0d3576467f9e37c31387cec0ceda59"], "commits": {"0e0edbb6db0d3576467f9e37c31387cec0ceda59": {"commitUser": "sbordet", "commitGHEventType": "closed"}}, "created": "2016-03-18 09:47:27", "commitsDetails": [{"commitMessage": "Fixes #441 (Simplify direct HTTP/2 over TLS HttpClient usage)\n\nAdded useALPN property to HttpClientTransportOverHTTP2 to disable\nusage of ALPN and therefore allow direct HTTP/2 over TLS.\n", "commitParents": ["df9de50f96b7c21270ef2e173a89ca29abdea087"], "commitHash": "0e0edbb6db0d3576467f9e37c31387cec0ceda59", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpClientTransportOverHTTP2.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.client.http.HttpClientTransportOverHTTP2.SessionListenerPromise.promise()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.client.http.HttpClientTransportOverHTTP2.isUseALPN()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.client.http.HttpClientTransportOverHTTP2.newConnection(org.eclipse.jetty.io.EndPoint,java.util.Map)", "DEL": 0, "INS": 2, "UPD": 5, "MOV": 0, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.http2.client.http.HttpClientTransportOverHTTP2", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.client.http.HttpClientTransportOverHTTP2.SessionListenerPromise.destination()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.client.http.HttpClientTransportOverHTTP2.SessionListenerPromise.succeeded(org.eclipse.jetty.http2.api.Session)", "DEL": 2, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.http2.client.http.HttpClientTransportOverHTTP2.SessionListenerPromise.onSettings(org.eclipse.jetty.http2.api.Session,org.eclipse.jetty.http2.frames.SettingsFrame)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.http2.client.http.HttpClientTransportOverHTTP2.SessionListenerPromise", "DEL": 3, "INS": 0, "UPD": 7, "MOV": 0, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.http2.client.http.HttpClientTransportOverHTTP2.connect(java.net.InetSocketAddress,java.util.Map)", "DEL": 1, "INS": 0, "UPD": 2, "MOV": 2, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.http2.client.http.HttpClientTransportOverHTTP2.setUseALPN(boolean)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.client.http.HttpClientTransportOverHTTP2.SessionListenerPromise.failed(java.lang.Throwable)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "DirectHTTP2OverTLSTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.client.http.DirectHTTP2OverTLSTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "0e0edbb6db0d3576467f9e37c31387cec0ceda59 tags/jetty-9.3.9.M0~26", "commitUser": "sbordet", "authoredDateTime": "2016-03-18 10:49:03", "commitGHEventType": "closed", "commitGitStats": [{"lines": 132, "filePath": "jetty-http2/http2-http-client-transport/src/test/java/org/eclipse/jetty/http2/client/http/DirectHTTP2OverTLSTest.java", "insertions": 132, "deletions": 0}, {"lines": 0, "filePath": "jetty-http2/http2-http-client-transport/src/test/resources/keystore.jks", "insertions": 0, "deletions": 0}, {"lines": 53, "filePath": "jetty-http2/http2-http-client-transport/src/main/java/org/eclipse/jetty/http2/client/http/HttpClientTransportOverHTTP2.java", "insertions": 36, "deletions": 17}], "commitDateTime": "2016-03-18 10:49:03", "spoonStatsSkippedReason": ""}], "title": "Simplify direct HTTP/2 over TLS HttpClient usage", "spoonStatsSummary": {"spoonMethodsChanged": 11, "DEL": 8, "INS": 11, "UPD": 14, "MOV": 2, "TOT": 35, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 53, "insertions": 36, "gitFilesChange": 1, "deletions": 17}, "closed": "2016-03-18 09:50:38", "statsSkippedReason": "", "body": "Trying to use `HttpClient` with the HTTP/2 transport to connect to a known HTTP/2 server without ALPN is too cumbersome, and needs to be simplified.\n\n@CodingFabian, this is the workaround for Jetty 9.3.8:\n\n``` java\nHttpClientTransport transport = new HttpClientTransportOverHTTP2(new HTTP2Client()) {\n    @Override\n    public org.eclipse.jetty.io.Connection newConnection(EndPoint endPoint, Map<String, Object> context) throws IOException {\n        return new HTTP2ClientConnectionFactory().newConnection(endPoint, context);\n    }\n};\n```\n", "changesInPackagesGIT": ["jetty-http2/http2-http-client-transport/src/main/java/org/eclipse/jetty/http2/client"], "changesInPackagesSPOON": ["org.eclipse.jetty.http2.client.http.HttpClientTransportOverHTTP2.SessionListenerPromise.promise()", "org.eclipse.jetty.http2.client.http.HttpClientTransportOverHTTP2.isUseALPN()", "org.eclipse.jetty.http2.client.http.HttpClientTransportOverHTTP2.newConnection(org.eclipse.jetty.io.EndPoint,java.util.Map)", "org.eclipse.jetty.http2.client.http.HttpClientTransportOverHTTP2", "org.eclipse.jetty.http2.client.http.HttpClientTransportOverHTTP2.SessionListenerPromise", "org.eclipse.jetty.http2.client.http.HttpClientTransportOverHTTP2.SessionListenerPromise.destination()", "org.eclipse.jetty.http2.client.http.HttpClientTransportOverHTTP2.SessionListenerPromise.onSettings(org.eclipse.jetty.http2.api.Session,org.eclipse.jetty.http2.frames.SettingsFrame)", "org.eclipse.jetty.http2.client.http.HttpClientTransportOverHTTP2.SessionListenerPromise.succeeded(org.eclipse.jetty.http2.api.Session)", "org.eclipse.jetty.http2.client.http.HttpClientTransportOverHTTP2.connect(java.net.InetSocketAddress,java.util.Map)", "org.eclipse.jetty.http2.client.http.HttpClientTransportOverHTTP2.setUseALPN(boolean)", "org.eclipse.jetty.http2.client.http.HttpClientTransportOverHTTP2.SessionListenerPromise.failed(java.lang.Throwable)"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/441"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 5, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["4822bea0b189ae157082504521c507d86c5861d9"], "commits": {"1cc09338f7d6210b558aa65189697be924951c7b": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "7aed3536c61711af5451d0aa0fe3cc80dc89e5bb": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "4822bea0b189ae157082504521c507d86c5861d9": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "d132356e86b10c1e395462cbe60e3f515040d668": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "b797926aeaf2a5c2a421412382ad40b8e9654cf6": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "292f7abc564025cda2baabcfd33cf33f156142fa": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "05691e16463e02b8376d05c8416722e437e86470": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2016-03-17 18:55:05", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "1cc09338f7d6210b558aa65189697be924951c7b", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "7aed3536c61711af5451d0aa0fe3cc80dc89e5bb", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #438 - File and Path Resources with control characters should be rejected\n\n+ Removing regex\n+ Adding StringUtil.indexOfControlChars()\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["05691e16463e02b8376d05c8416722e437e86470"], "commitHash": "4822bea0b189ae157082504521c507d86c5861d9", "commitSpoonAstDiffStats": [{"spoonFilePath": "PathResource.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.PathResource", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.PathResource.assertValidPath(java.nio.file.Path)", "DEL": 3, "INS": 4, "UPD": 3, "MOV": 1, "TOT": 11}]}, {"spoonFilePath": "StringUtilTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.StringUtilTest.testHasControlCharacter()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "StringUtil.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.StringUtil.indexOfControlChars(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "FileResource.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.FileResource", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.FileResource.assertValidPath(java.lang.String)", "DEL": 2, "INS": 2, "UPD": 3, "MOV": 0, "TOT": 7}]}], "nameRev": "4822bea0b189ae157082504521c507d86c5861d9 tags/jetty-9.3.9.M0~6^2^2~2^2", "commitUser": "joakime", "authoredDateTime": "2016-03-18 11:51:32", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 31, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/StringUtilTest.java", "insertions": 25, "deletions": 6}, {"lines": 10, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/resource/FileResource.java", "insertions": 4, "deletions": 6}, {"lines": 47, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/StringUtil.java", "insertions": 47, "deletions": 0}, {"lines": 11, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/resource/PathResource.java", "insertions": 5, "deletions": 6}], "commitDateTime": "2016-03-18 11:51:32", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #440 from eclipse/bugs/438\n\nIssue #438 - File and Path Resources with control characters should be rejected", "commitParents": ["14052742d0d9818744d8e6afd7a7fd214e15260e", "4822bea0b189ae157082504521c507d86c5861d9"], "commitHash": "d132356e86b10c1e395462cbe60e3f515040d668", "commitSpoonAstDiffStats": [{"spoonFilePath": "PathResource.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.PathResource", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.PathResource.assertValidPath(java.nio.file.Path)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "StringUtilTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.StringUtilTest.testHasControlCharacter()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "FileResourceTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.FileResourceTest.testExist_BadNullX()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.FileResourceTest.testExist_BadNull()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "StringUtil.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.StringUtil.indexOfControlChars(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "FileResource.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.FileResource.addPath(java.lang.String)", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.util.resource.FileResource", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.util.resource.FileResource.addPath(java.lang.String).1", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.FileResource.assertValidPath(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AbstractFSResourceTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.AbstractFSResourceTest.testExist_BadControlChars_Decoded()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.AbstractFSResourceTest.testExist_AddPath_BadControlChars_Decoded()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.AbstractFSResourceTest.testExist_AddPath_BadControlChars_Encoded()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.AbstractFSResourceTest.testExist_BadControlChars_Encoded()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.AbstractFSResourceTest.testUtf8Dir()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}], "nameRev": "d132356e86b10c1e395462cbe60e3f515040d668 tags/jetty-9.3.9.M0~6^2^2~2", "commitUser": "gregw", "authoredDateTime": "2016-03-23 12:41:55", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 31, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/StringUtilTest.java", "insertions": 25, "deletions": 6}, {"lines": 20, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/resource/FileResource.java", "insertions": 17, "deletions": 3}, {"lines": 47, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/StringUtil.java", "insertions": 47, "deletions": 0}, {"lines": 12, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/resource/PathResource.java", "insertions": 12, "deletions": 0}, {"lines": 15, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/resource/FileResourceTest.java", "insertions": 0, "deletions": 15}, {"lines": 95, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/resource/AbstractFSResourceTest.java", "insertions": 91, "deletions": 4}], "commitDateTime": "2016-03-23 12:41:55", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "b797926aeaf2a5c2a421412382ad40b8e9654cf6", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #438 - File and Path Resources with control characters should be rejected\n\n+ Adding testcases\n+ Cleaning up unit tests, adding more\n+ Fixing one testcase related to FileResource.addPath()\n+ Adding validation of filesystem paths\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>\n", "commitParents": ["f8626ecb3dd5910c7d32dadb04df2b38e9d2d89d"], "commitHash": "05691e16463e02b8376d05c8416722e437e86470", "commitSpoonAstDiffStats": [{"spoonFilePath": "PathResource.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.PathResource", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.util.resource.PathResource.assertValidPath(java.nio.file.Path)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "FileResourceTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.FileResourceTest.testExist_BadNullX()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.FileResourceTest.testExist_BadNull()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "FileResource.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.FileResource.addPath(java.lang.String)", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.util.resource.FileResource", "DEL": 0, "INS": 4, "UPD": 0, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.util.resource.FileResource.addPath(java.lang.String).1", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.FileResource.assertValidPath(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AbstractFSResourceTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.resource.AbstractFSResourceTest.testExist_BadControlChars_Decoded()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.AbstractFSResourceTest.testExist_AddPath_BadControlChars_Decoded()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.AbstractFSResourceTest.testExist_AddPath_BadControlChars_Encoded()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.AbstractFSResourceTest.testExist_BadControlChars_Encoded()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.util.resource.AbstractFSResourceTest.testUtf8Dir()", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}], "nameRev": "05691e16463e02b8376d05c8416722e437e86470 tags/jetty-9.3.9.M0~6^2^2~2^2~1", "commitUser": "joakime", "authoredDateTime": "2016-03-17 12:00:18", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 22, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/resource/FileResource.java", "insertions": 19, "deletions": 3}, {"lines": 13, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/resource/PathResource.java", "insertions": 13, "deletions": 0}, {"lines": 95, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/resource/AbstractFSResourceTest.java", "insertions": 91, "deletions": 4}, {"lines": 15, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/resource/FileResourceTest.java", "insertions": 0, "deletions": 15}], "commitDateTime": "2016-03-17 16:13:07", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "292f7abc564025cda2baabcfd33cf33f156142fa", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "joakime", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "File and Path Resources with control characters should be rejected", "spoonStatsSummary": {"spoonMethodsChanged": 5, "DEL": 7.0, "INS": 7.0, "UPD": 6.0, "MOV": 1.0, "TOT": 21.0, "spoonFilesChanged": 3}, "gitStatsSummary": {"lines": 68.0, "insertions": 56.0, "gitFilesChange": 3, "deletions": 12.0}, "closed": "2017-07-19 17:27:54", "statsSkippedReason": "", "body": "When a FileResource or PathResource is created, a path with control characters should be rejected, resulting in a InvalidPathException from the implementations.\n", "changesInPackagesGIT": ["jetty-util/src/main/java/org/eclipse/jetty/util", "jetty-util/src/main/java/org/eclipse/jetty/util/resource"], "changesInPackagesSPOON": ["org.eclipse.jetty.util.resource.PathResource", "org.eclipse.jetty.util.resource.FileResource", "org.eclipse.jetty.util.resource.PathResource.assertValidPath(java.nio.file.Path)", "org.eclipse.jetty.util.StringUtil.indexOfControlChars(java.lang.String)", "org.eclipse.jetty.util.resource.FileResource.assertValidPath(java.lang.String)"], "ttf": 488.0002777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/438"}, {"labels": ["Bug"], "closed": "2018-09-11 18:15:56", "body": "There is something wrong with the handling of charsets as parameters in Multipart filter.\n\nThis has been wrong for some time, but the unit test was not checking the response code and the assert failure exception from the unit test has been ignored because of all the other exceptions there that are ignored (see #431 for the fix for that).  Work on #431 has cleaned up the unit test to at least pass with the current behaviour, but I am not sure it is the correct behaviour.\n\nFrom 9.3.8 (prior to #431 commits) the unit test [testWithCharSet](https://github.com/eclipse/jetty.project/blob/jetty-9.3.8.v20160314/jetty-servlets/src/test/java/org/eclipse/jetty/servlets/MultipartFilterTest.java#L868) send a POST with a part encoded in UTF-8\n\nThe [servlet asserted](https://github.com/eclipse/jetty.project/blob/jetty-9.3.8.v20160314/jetty-servlets/src/test/java/org/eclipse/jetty/servlets/MultipartFilterTest.java#L854) that the value of the \"ttt\" request parameter was the decoded string - which it is not!!   \n\nThe assert failed and was logged, and a 500 response returned.  But the unit test did [not check the response code](https://github.com/eclipse/jetty.project/blob/jetty-9.3.8.v20160314/jetty-servlets/src/test/java/org/eclipse/jetty/servlets/MultipartFilterTest.java#L895)!\n\nThe commit with #431 to 9.3.x has updated the [servlet asserts](https://github.com/eclipse/jetty.project/blob/jetty-9.3.x/jetty-servlets/src/test/java/org/eclipse/jetty/servlets/MultipartFilterTest.java#L871) to check for the expected behaviour and the response code is now tested.\n\nHowever, I think the original assert should still be applicable!  The problem I think is in the handling of parts without a filename.\n\nFor a part that is not buffered in a File, it's bytes are [stored as a byte array](https://github.com/eclipse/jetty.project/blob/jetty-9.3.x/jetty-servlets/src/main/java/org/eclipse/jetty/servlets/MultiPartFilter.java#L197) in the param map and then the request wrapper is used to [convert them to a string](https://github.com/eclipse/jetty.project/blob/jetty-9.3.x/jetty-servlets/src/main/java/org/eclipse/jetty/servlets/MultiPartFilter.java#L278), potentially using any charset\n\nHowever, if due to configuration, the part is [buffered in a File, but does not have a filename](https://github.com/eclipse/jetty.project/blob/jetty-9.3.x/jetty-servlets/src/main/java/org/eclipse/jetty/servlets/MultiPartFilter.java#L183) (#431 added the filename), then the File is stored as a request attribute, but the parameter is not set and the content type is not communicated to the application!\n\nIdeally the request wrapper should also deal with this case.  The content type needs to be stored and the content retrieved from the File and converted to a string (more or less how the new unit test does) IF somebody attempts to access such parts via parameters.\n", "commits": {}, "title": "MultipartFilter charset handling", "created": "2016-03-16 07:40:52", "user": "gregw", "url": "https://github.com/eclipse/jetty.project/issues/433", "commitsDetails": [], "ttf": 909.0002777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "brettwooldridge", "filteredCommits": ["bcc57d161a25e7c38d5e59d457603b144f3c1757"], "commits": {"bcc57d161a25e7c38d5e59d457603b144f3c1757": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2016-03-14 05:38:10", "commitsDetails": [{"commitMessage": "Fixes #425 - Removing duplicate Decoder affecting lifecycle\n\n+ Duplicate Decoder was created and used in OnMessageCallable.\n  Now using DecoderFactory to obtain already instantiated\n  Decoder instead.\n", "commitParents": ["02144e0a976e6e59fe6f7ddeb5228bbd7f2251ca"], "commitHash": "bcc57d161a25e7c38d5e59d457603b144f3c1757", "commitSpoonAstDiffStats": [{"spoonFilePath": "JsrParamIdBinary.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.annotations.JsrParamIdBinary.process(org.eclipse.jetty.websocket.jsr356.annotations.Param,org.eclipse.jetty.websocket.jsr356.annotations.JsrCallable)", "DEL": 0, "INS": 0, "UPD": 6, "MOV": 0, "TOT": 6}]}, {"spoonFilePath": "OnMessageBinaryCallable.java", "spoonMethods": []}, {"spoonFilePath": "OnErrorCallable.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.annotations.OnErrorCallable.setDecoderClass(java.lang.Class)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "ConfiguratorTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.ConfiguratorTest.startServer()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.ConfiguratorTest.TimeDecoderSocket", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.ConfiguratorTest.GmtTimeDecoder", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.ConfiguratorTest.SelectedProtocolConfigurator", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.ConfiguratorTest.testDecoderWithProtocol()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "JsrCallable.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.annotations.JsrCallable.setDecoderClass(java.lang.Class)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "JsrParamIdDecoder.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.annotations.JsrParamIdDecoder.process(org.eclipse.jetty.websocket.jsr356.annotations.Param,org.eclipse.jetty.websocket.jsr356.annotations.JsrCallable)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "OnCloseCallable.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.annotations.OnCloseCallable.setDecoderClass(java.lang.Class)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "OnOpenCallable.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.annotations.OnOpenCallable.setDecoderClass(java.lang.Class)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "JsrParamIdPong.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.annotations.JsrParamIdPong.process(org.eclipse.jetty.websocket.jsr356.annotations.Param,org.eclipse.jetty.websocket.jsr356.annotations.JsrCallable)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "TimeDecoder.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.decoders.TimeDecoder.init(javax.websocket.EndpointConfig)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "JsrParamIdText.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.annotations.JsrParamIdText.process(org.eclipse.jetty.websocket.jsr356.annotations.Param,org.eclipse.jetty.websocket.jsr356.annotations.JsrCallable)", "DEL": 0, "INS": 0, "UPD": 22, "MOV": 0, "TOT": 22}]}, {"spoonFilePath": "OnMessageTextCallable.java", "spoonMethods": []}, {"spoonFilePath": "OnMessageCallable.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.annotations.OnMessageCallable", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.annotations.OnMessageCallable.getDecoderClass()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.annotations.OnMessageCallable.setDecoderClass(java.lang.Class)", "DEL": 0, "INS": 0, "UPD": 4, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.annotations.OnMessageCallable.init(org.eclipse.jetty.websocket.jsr356.JsrSession)", "DEL": 1, "INS": 1, "UPD": 3, "MOV": 2, "TOT": 7}]}], "nameRev": "bcc57d161a25e7c38d5e59d457603b144f3c1757 tags/jetty-9.3.11.M0~2^2^2~2", "commitUser": "joakime", "authoredDateTime": "2016-06-20 17:47:29", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 3, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/annotations/OnErrorCallable.java", "insertions": 1, "deletions": 2}, {"lines": 199, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/ConfiguratorTest.java", "insertions": 159, "deletions": 40}, {"lines": 5, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/annotations/JsrParamIdDecoder.java", "insertions": 3, "deletions": 2}, {"lines": 25, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/annotations/OnMessageCallable.java", "insertions": 6, "deletions": 19}, {"lines": 6, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/annotations/JsrCallable.java", "insertions": 5, "deletions": 1}, {"lines": 3, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/annotations/JsrParamIdPong.java", "insertions": 1, "deletions": 2}, {"lines": 34, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/annotations/JsrParamIdText.java", "insertions": 12, "deletions": 22}, {"lines": 6, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/annotations/OnMessageTextCallable.java", "insertions": 3, "deletions": 3}, {"lines": 5, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/annotations/OnCloseCallable.java", "insertions": 2, "deletions": 3}, {"lines": 6, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/annotations/OnMessageBinaryCallable.java", "insertions": 3, "deletions": 3}, {"lines": 11, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/annotations/JsrParamIdBinary.java", "insertions": 4, "deletions": 7}, {"lines": 1, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/decoders/TimeDecoder.java", "insertions": 1, "deletions": 0}, {"lines": 5, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/annotations/OnOpenCallable.java", "insertions": 2, "deletions": 3}], "commitDateTime": "2016-06-20 17:47:29", "spoonStatsSkippedReason": ""}], "title": "Incorrect @ServerEndpoint Encoder/Decoder lifecycle", "spoonStatsSummary": {"spoonMethodsChanged": 13, "DEL": 2, "INS": 2, "UPD": 50, "MOV": 2, "TOT": 56, "spoonFilesChanged": 10}, "gitStatsSummary": {"lines": 109, "insertions": 42, "gitFilesChange": 11, "deletions": 67}, "closed": "2016-06-21 00:50:19", "statsSkippedReason": "", "body": "I have a server endpoint defined as follows:\n\n``` java\n@ServerEndpoint(value = \"/some/path/{token}\",\n                subprotocols = { \"fst\", \"netty\" },\n                configurator = ServerEventConfigurator.class,\n                decoders = SubprotoDecoderDelegator.class,\n                encoders = SubprotoEncoderDelegator.class)\npublic class ServerEventEndpoint {\n   ...\n   @OnMessage\n   public void onMessage(Session session, Event event) {\n      eventBroker.dispatch(event);\n   }\n}\n```\n\nThe `ServerEventConfigurator` configurator sets the negotiated protocol as a user property (hackish because of #424):\n\n``` java\npublic class ServerEventConfigurator extends Configurator {\n   @Override\n   public void modifyHandshake(ServerEndpointConfig config, HandshakeRequest request, HandshakeResponse response) {\n      List<String> requested = ((JsrHandshakeRequest) request).getHeaders().get(HandshakeRequest.SEC_WEBSOCKET_PROTOCOL);\n\n      String subprotocol = super.getNegotiatedSubprotocol(config.getSubprotocols(), requested);\n      config.getUserProperties().put(\"subprotocol\", subprotocol);\n   }\n}\n```\n\nFinally, the decoder (`SubprotoDecoderDelegator`) with line numbers for commentary below:\n\n``` java\n01 public class SubprotoDecoderDelegator implements Binary<Event> {\n02    private Binary<Event> delegate;\n03 \n04    public SubprotoDecoderDelegator() {\n05       System.out.println(\"Constructed\");\n06    }\n07 \n08    @Override public void init(EndpointConfig config) {\n09       String subprotocol = config.getUserProperties().get(\"subprotocol\").toString();\n10       switch (subprotocol) {\n11          case \"fst\":\n12             delegate = new FstEventDecoder();\n13             break;\n14          ...\n15       }\n16    }\n17\n18    @Override public Event decode(ByteBuffer bytes) throws DecodeException {\n19       return delegate.decode(bytes);\n20    }\n21 }\n```\n\nWhen a client connects with sub-protocol \"fst\", we see that the configurator is hit, and correctly sets \"fst\" as a \"subprotocol\" property on the user properties.\n\nSubsequently, a breakpoint on line 5 shows that the decoder is constructed from [DecoderFactory](https://github.com/eclipse/jetty.project/blob/ac24196b0d341534793308d585161381d5bca4ac/jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/DecoderFactory.java#L188), and that `init(EndpointConfig)` is called whereby the subprotocol is obtained (fst) and a delegate decoder is constructed (line 12).  Everything appears fine at this point.\n\nHowever, next the breakpoint on line 5 is hit again, this time from [OnMessageCallable](https://github.com/eclipse/jetty.project/blob/ac24196b0d341534793308d585161381d5bca4ac/jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/annotations/OnMessageCallable.java#L145).  For this new instance `init(EndpointConfig)` is never called.  Subsequently, our breakpoint at line 19 is hit, invoked against this new instance that has no _delegate_ set, resulting in an NPE.\n\nThe JavaDoc for `javax.websocket.Decoder` states:\n\n```\n/* The websocket implementation creates a new instance of the decoder per endpoint instance\n * per connection.  The lifecycle of the Decoder instance is governed by the container calls to\n * the Decoder.init(javax.websocket.EndpointConfig) and Decoder.destroy() methods.\n```\n\nJetty _does_ appear to be constructing a new instance \"per endpoint instance\" and \"per connection\", however, this instance is never used AFAICT.  Instead, a new instance is being constructed, and its lifecycle methods never called, resulting in an NPE.\n\nIt seems clear that because the `init()` method accepts an `EndpointConfig`, from which user properties are available, the intention is that each En/Decoder instance should share the same \"session\" as was available in the `Configurator.modifyHandshake(ServerEndpointConfig config)` invocation.\n", "changesInPackagesGIT": ["jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356"], "changesInPackagesSPOON": ["org.eclipse.jetty.websocket.jsr356.annotations.OnMessageCallable.getDecoderClass()", "org.eclipse.jetty.websocket.jsr356.decoders.TimeDecoder.init(javax.websocket.EndpointConfig)", "org.eclipse.jetty.websocket.jsr356.annotations.OnCloseCallable.setDecoderClass(java.lang.Class)", "org.eclipse.jetty.websocket.jsr356.annotations.JsrParamIdPong.process(org.eclipse.jetty.websocket.jsr356.annotations.Param,org.eclipse.jetty.websocket.jsr356.annotations.JsrCallable)", "org.eclipse.jetty.websocket.jsr356.annotations.OnMessageCallable", "org.eclipse.jetty.websocket.jsr356.annotations.OnMessageCallable.setDecoderClass(java.lang.Class)", "org.eclipse.jetty.websocket.jsr356.annotations.OnOpenCallable.setDecoderClass(java.lang.Class)", "org.eclipse.jetty.websocket.jsr356.annotations.JsrCallable.setDecoderClass(java.lang.Class)", "org.eclipse.jetty.websocket.jsr356.annotations.JsrParamIdText.process(org.eclipse.jetty.websocket.jsr356.annotations.Param,org.eclipse.jetty.websocket.jsr356.annotations.JsrCallable)", "org.eclipse.jetty.websocket.jsr356.annotations.OnErrorCallable.setDecoderClass(java.lang.Class)", "org.eclipse.jetty.websocket.jsr356.annotations.JsrParamIdDecoder.process(org.eclipse.jetty.websocket.jsr356.annotations.Param,org.eclipse.jetty.websocket.jsr356.annotations.JsrCallable)", "org.eclipse.jetty.websocket.jsr356.annotations.OnMessageCallable.init(org.eclipse.jetty.websocket.jsr356.JsrSession)", "org.eclipse.jetty.websocket.jsr356.annotations.JsrParamIdBinary.process(org.eclipse.jetty.websocket.jsr356.annotations.Param,org.eclipse.jetty.websocket.jsr356.annotations.JsrCallable)"], "ttf": 98.00027777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/425"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "brettwooldridge", "filteredCommits": ["032e984674ed0293ff627f2fae6d38e0c071b113"], "commits": {"032e984674ed0293ff627f2fae6d38e0c071b113": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2016-03-14 04:58:48", "commitsDetails": [{"commitMessage": "Issue #424 - Jetty impl. of Websocket ServerEndpointConfig.Configurator lifecycle out of spec\n", "commitParents": ["8eb240c2bee6ade3a580f4837542c63d7bab7d74"], "commitHash": "032e984674ed0293ff627f2fae6d38e0c071b113", "commitSpoonAstDiffStats": [{"spoonFilePath": "JsrCreator.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.JsrCreator.createWebSocket(org.eclipse.jetty.websocket.servlet.ServletUpgradeRequest,org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse)", "DEL": 2, "INS": 2, "UPD": 8, "MOV": 1, "TOT": 13}]}], "nameRev": "032e984674ed0293ff627f2fae6d38e0c071b113 tags/jetty-9.3.9.M0~25^2~2", "commitUser": "joakime", "authoredDateTime": "2016-03-15 07:44:46", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 48, "filePath": "jetty-websocket/javax-websocket-server-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/server/JsrCreator.java", "insertions": 25, "deletions": 23}], "commitDateTime": "2016-03-15 07:44:46", "spoonStatsSkippedReason": ""}], "title": "Jetty impl. of Websocket ServerEndpointConfig.Configurator lifecycle out of spec.", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 2, "INS": 2, "UPD": 8, "MOV": 1, "TOT": 13, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 48, "insertions": 25, "gitFilesChange": 1, "deletions": 23}, "closed": "2016-03-15 14:51:13", "statsSkippedReason": "", "body": "The JavaDoc for the `javax.websocket.server.ServerEndpointConfig.Configurator` method `modifyHandshake()` states:\n\n```\n/**\n * Called by the container after it has formulated a handshake response resulting from\n * a well-formed handshake request. The container has already \n * checked that this configuration has a matching URI, determined the \n * validity of the origin using the checkOrigin method, and filled\n * out the negotiated subprotocols and extensions based on this configuration.\n * Custom configurations may override this method in order to inspect\n * the request parameters and modify the handshake response that the server has formulated.\n * and the URI checking also.\n```\n\nHowever, the [Jetty implementation](https://github.com/eclipse/jetty.project/blob/ac24196b0d341534793308d585161381d5bca4ac/jetty-websocket/javax-websocket-server-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/server/JsrCreator.java#L89) is calling `modifyHandshake()` before `checkOrigin()`, before determining the negotiated subprotocols, and before determining negotiated extensions.\n\nThis requires the following hack in order to get the negotiated protocols:\n\n``` java\n@Override\npublic void modifyHandshake(ServerEndpointConfig config, HandshakeRequest request, HandshakeResponse response) {\n   List<String> requested = ((JsrHandshakeRequest) request).getHeaders().get(HandshakeRequest.SEC_WEBSOCKET_PROTOCOL);\n\n   String subprotocol = super.getNegotiatedSubprotocol(config.getSubprotocols(), requested);\n   config.getUserProperties().put(\"subprotocol\", subprotocol);\n}\n```\n", "changesInPackagesGIT": ["jetty-websocket/javax-websocket-server-impl/src/main/java/org/eclipse/jetty/websocket/jsr356"], "changesInPackagesSPOON": ["org.eclipse.jetty.websocket.jsr356.server.JsrCreator.createWebSocket(org.eclipse.jetty.websocket.servlet.ServletUpgradeRequest,org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse)"], "ttf": 1.0002777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/424"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "sbordet", "filteredCommits": ["5f2e2820f4595b22801906a5d5f1abacaff440dd"], "commits": {"5f2e2820f4595b22801906a5d5f1abacaff440dd": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "0b82129cd83bbee69ae5d2d34de4830145f9c396": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2016-03-11 21:47:44", "commitsDetails": [{"commitMessage": "Issue #423 (Duplicate Content-Length header not handled correctly)\n\nFixed as required by the spec, rejecting the request.\n", "commitParents": ["01aded0eaaf12863a780ba8b7e46b7e19f7561b1"], "commitHash": "5f2e2820f4595b22801906a5d5f1abacaff440dd", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpParser.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.HttpParser.convertContentLength(java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.HttpParser.parsedHeader()", "DEL": 1, "INS": 4, "UPD": 1, "MOV": 7, "TOT": 13}]}, {"spoonFilePath": "ContentLengthTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ContentLengthTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "5f2e2820f4595b22801906a5d5f1abacaff440dd tags/jetty-9.3.8.v20160314~4", "commitUser": "sbordet", "authoredDateTime": "2016-03-11 22:49:12", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 51, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/HttpParser.java", "insertions": 30, "deletions": 21}, {"lines": 158, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ContentLengthTest.java", "insertions": 158, "deletions": 0}], "commitDateTime": "2016-03-11 22:49:24", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #423 (Duplicate Content-Length header not handled correctly)\n\nRefactored tests into existing test class.\n", "commitParents": ["5f2e2820f4595b22801906a5d5f1abacaff440dd"], "commitHash": "0b82129cd83bbee69ae5d2d34de4830145f9c396", "commitSpoonAstDiffStats": [], "nameRev": "0b82129cd83bbee69ae5d2d34de4830145f9c396 tags/jetty-9.3.8.v20160314~3", "commitUser": "sbordet", "authoredDateTime": "2016-03-12 00:27:48", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 286, "filePath": "jetty-http/src/test/java/org/eclipse/jetty/http/HttpParserTest.java", "insertions": 183, "deletions": 103}, {"lines": 158, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ContentLengthTest.java", "insertions": 0, "deletions": 158}], "commitDateTime": "2016-03-12 00:27:48", "spoonStatsSkippedReason": "tooManyChanges"}], "title": "Duplicate Content-Length header not handled correctly", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 1.0, "INS": 5.0, "UPD": 1.0, "MOV": 7.0, "TOT": 14.0, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 51, "insertions": 30, "gitFilesChange": 1, "deletions": 21}, "closed": "2019-03-06 20:17:52", "statsSkippedReason": "", "body": "The relevant section of the specification is: https://tools.ietf.org/html/rfc7230#section-3.3.2.\n\n```\nPOST / HTTP/1.1\nHost: localhost\nContent-Length: 1\nContent-Length: 2\n```\n\nThe request should be rejected.\n", "changesInPackagesGIT": ["jetty-http/src/main/java/org/eclipse/jetty/http"], "changesInPackagesSPOON": ["org.eclipse.jetty.http.HttpParser.convertContentLength(java.lang.String)", "org.eclipse.jetty.http.HttpParser.parsedHeader()"], "ttf": 1089.0002777777777, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/423"}, {"labels": ["Bug"], "closed": "2016-04-20 23:05:03", "body": "Currently, as of Spring Boot version `1.3.3` it is not possible to use Jetty with JSPs in embedded mode with Spring Boot. \n\nRelevant Issues: https://github.com/spring-projects/spring-boot/issues/367\n\nSome of the issues, I have seen, can be worked around but a major issue seems the loading of the JSP Tag libraries. I got it to work inside the IDE (STS) but once you run the application using just the \u00fcber-jar, things fail:\n\n```\norg.apache.jasper.JasperException: /welcome.jsp(3,68) PWC6132: Unable to read TLD \"META-INF/spring.tld\" from JAR file \"jar:file:/Users/hillert/dev/git/spring-boot-jsp-demo/target/jsp-demo-0.0.1-SNAPSHOT.jar!/BOOT-INF/lib/spring-webmvc-4.3.0.BUILD-SNAPSHOT.jar\": java.io.IOException: Unable to open root Jar file 'jar:file:/Users/hillert/dev/git/spring-boot-jsp-demo/target/jsp-demo-0.0.1-SNAPSHOT.jar'\n```\n\nJust for reference, there is also a PR for executable wars - https://github.com/spring-projects/spring-boot/pull/5290\n\nJust FYI, there might be also other improvements that could be made - e.g. it looks like Jetty by default does not handle Servlet 3.0 external resources. Customization as described here was necessary:\n\nhttps://www.totaalsoftware.com/blog/104-jetty-with-servlet-3-0-external-resources\n\nLastly, Tomcat is not perfect by any means in regards to serving JSP via \u00fcber-Jars, but it works by either creating an executable war-file or by adding your JSPs to `META-INF/resource` when using executable uber-jars:\n\nhttps://github.com/ghillert/spring-boot-jsp-demo\n", "commits": {}, "title": "Using Embedded Jetty with JSPs and Spring Boot", "created": "2016-03-10 18:12:05", "user": "ghillert", "url": "https://github.com/eclipse/jetty.project/issues/420", "commitsDetails": [], "ttf": 41.000277777777775}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 2}, "labels": ["Bug"], "user": "janbartel", "filteredCommits": [], "commits": {"ead37b1b57d9e5a01e300f0bebc3a0a3c6e31754": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "8a24798fa46d8c6f8861be554f482b276bfc31b4": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2016-03-10 04:58:04", "commitsDetails": [{"commitMessage": "Issue #411 MongoSessionManager does not save maxInactiveInterval and expiry correctly\nIssue #415 Setting big session-timeout can overflow MAXINT\n", "commitParents": ["fa8b1c92208b3dbd373c8b888c3c6c408011208c"], "commitHash": "ead37b1b57d9e5a01e300f0bebc3a0a3c6e31754", "commitSpoonAstDiffStats": [{"spoonFilePath": "AbstractSession.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.session.AbstractSession", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.session.AbstractSession.setMaxInactiveInterval(int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "MongoSessionManager.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.MongoSessionManager.loadSession(java.lang.String)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.MongoSessionManager.save(org.eclipse.jetty.nosql.NoSqlSession,java.lang.Object,boolean)", "DEL": 6, "INS": 8, "UPD": 3, "MOV": 7, "TOT": 24}, {"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.MongoSessionManager.refresh(org.eclipse.jetty.nosql.NoSqlSession,java.lang.Object)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "StandardDescriptorProcessor.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.StandardDescriptorProcessor.visitSessionConfig(org.eclipse.jetty.webapp.WebAppContext,org.eclipse.jetty.webapp.Descriptor,org.eclipse.jetty.xml.XmlParser$Node)", "DEL": 2, "INS": 3, "UPD": 2, "MOV": 3, "TOT": 10}]}, {"spoonFilePath": "SessionExpiryTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.SessionExpiryTest.getSessionExpiry(com.mongodb.DBCollection,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.SessionExpiryTest.ChangeTimeoutServlet", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.SessionExpiryTest.getSessionMaxInactiveInterval(com.mongodb.DBCollection,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.SessionExpiryTest.verifySessionTimeout(com.mongodb.DBCollection,java.lang.String,int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.SessionExpiryTest.debugPrint(com.mongodb.DBCollection,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.SessionExpiryTest.getSessionAccessed(com.mongodb.DBCollection,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.SessionExpiryTest.changeSessionTimeout()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.SessionExpiryTest.testBigSessionExpiry()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "MongoTestServer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.MongoTestServer.newSessionManager()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AbstractSessionManager.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.session.AbstractSessionManager", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.session.AbstractSessionManager.setMaxInactiveInterval(int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "ead37b1b57d9e5a01e300f0bebc3a0a3c6e31754 tags/jetty-9.3.8.v20160311~11", "commitUser": "janbartel", "authoredDateTime": "2016-03-10 18:51:23", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 47, "filePath": "jetty-nosql/src/main/java/org/eclipse/jetty/nosql/mongodb/MongoSessionManager.java", "insertions": 30, "deletions": 17}, {"lines": 10, "filePath": "jetty-webapp/src/main/java/org/eclipse/jetty/webapp/StandardDescriptorProcessor.java", "insertions": 6, "deletions": 4}, {"lines": 227, "filePath": "tests/test-sessions/test-mongodb-sessions/src/test/java/org/eclipse/jetty/nosql/mongodb/SessionExpiryTest.java", "insertions": 227, "deletions": 0}, {"lines": 10, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/session/AbstractSessionManager.java", "insertions": 10, "deletions": 0}, {"lines": 6, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/session/AbstractSession.java", "insertions": 4, "deletions": 2}, {"lines": 2, "filePath": "tests/test-sessions/test-mongodb-sessions/src/test/java/org/eclipse/jetty/nosql/mongodb/MongoTestServer.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2016-03-10 18:52:34", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #411 ensure MongoSessionManager saves maxInactiveInterval and expiry correctly\nIssue #415 ensure setting > MAX_INT session-timeout is detected\n", "commitParents": ["14c985802e790b21df7a35f63a5f6bab4f6efd19"], "commitHash": "8a24798fa46d8c6f8861be554f482b276bfc31b4", "commitSpoonAstDiffStats": [{"spoonFilePath": "MongoSessionDataStore.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.MongoSessionDataStore.doStore(java.lang.String,org.eclipse.jetty.server.session.SessionData,long)", "DEL": 3, "INS": 5, "UPD": 5, "MOV": 12, "TOT": 25}]}, {"spoonFilePath": "SessionManager.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.session.SessionManager", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.session.SessionManager.setMaxInactiveInterval(int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "Session.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.session.Session.setMaxInactiveInterval(int)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}]}, {"spoonFilePath": "StandardDescriptorProcessor.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.StandardDescriptorProcessor.visitSessionConfig(org.eclipse.jetty.webapp.WebAppContext,org.eclipse.jetty.webapp.Descriptor,org.eclipse.jetty.xml.XmlParser$Node)", "DEL": 2, "INS": 3, "UPD": 2, "MOV": 3, "TOT": 10}]}, {"spoonFilePath": "SessionExpiryTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.SessionExpiryTest.getSessionExpiry(com.mongodb.DBCollection,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.SessionExpiryTest.ChangeTimeoutServlet", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.SessionExpiryTest.getSessionMaxInactiveInterval(com.mongodb.DBCollection,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.SessionExpiryTest.verifySessionTimeout(com.mongodb.DBCollection,java.lang.String,int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.SessionExpiryTest.debugPrint(com.mongodb.DBCollection,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.SessionExpiryTest.getSessionAccessed(com.mongodb.DBCollection,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.SessionExpiryTest.changeSessionTimeout()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.SessionExpiryTest.testBigSessionExpiry()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "8a24798fa46d8c6f8861be554f482b276bfc31b4 tags/jetty-9.4.0.M0~180", "commitUser": "janbartel", "authoredDateTime": "2016-03-11 10:47:34", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 12, "filePath": "jetty-nosql/src/main/java/org/eclipse/jetty/nosql/mongodb/MongoSessionDataStore.java", "insertions": 8, "deletions": 4}, {"lines": 242, "filePath": "tests/test-sessions/test-mongodb-sessions/src/test/java/org/eclipse/jetty/nosql/mongodb/SessionExpiryTest.java", "insertions": 242, "deletions": 0}, {"lines": 10, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/session/SessionManager.java", "insertions": 10, "deletions": 0}, {"lines": 4, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/session/Session.java", "insertions": 3, "deletions": 1}, {"lines": 9, "filePath": "jetty-webapp/src/main/java/org/eclipse/jetty/webapp/StandardDescriptorProcessor.java", "insertions": 6, "deletions": 3}], "commitDateTime": "2016-03-11 10:47:34", "spoonStatsSkippedReason": ""}], "title": "Setting big session-timeout can overflow MAXINT", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0, "insertions": 0, "gitFilesChange": 0, "deletions": 0}, "closed": "2016-04-30 00:06:59", "statsSkippedReason": "", "body": "The <session-timeout> in web.xml is in minutes, yet the same setting on HttpSession is setMaxInactiveInterval(int sec). So by setting a large value for minutes, you can overflow MAXINT when converting it into seconds.\n", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 50.000277777777775, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/415"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 2}, "labels": ["Bug"], "user": "janbartel", "filteredCommits": ["d82b5ad65a62ccd49266c0a9dc20342478068c53"], "commits": {"ead37b1b57d9e5a01e300f0bebc3a0a3c6e31754": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "d82b5ad65a62ccd49266c0a9dc20342478068c53": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "8a24798fa46d8c6f8861be554f482b276bfc31b4": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2016-03-09 23:16:30", "commitsDetails": [{"commitMessage": "Issue #411 MongoSessionManager does not save maxInactiveInterval and expiry correctly\nIssue #415 Setting big session-timeout can overflow MAXINT\n", "commitParents": ["fa8b1c92208b3dbd373c8b888c3c6c408011208c"], "commitHash": "ead37b1b57d9e5a01e300f0bebc3a0a3c6e31754", "commitSpoonAstDiffStats": [{"spoonFilePath": "AbstractSession.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.session.AbstractSession", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.server.session.AbstractSession.setMaxInactiveInterval(int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "MongoSessionManager.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.MongoSessionManager.loadSession(java.lang.String)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.MongoSessionManager.save(org.eclipse.jetty.nosql.NoSqlSession,java.lang.Object,boolean)", "DEL": 6, "INS": 8, "UPD": 3, "MOV": 7, "TOT": 24}, {"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.MongoSessionManager.refresh(org.eclipse.jetty.nosql.NoSqlSession,java.lang.Object)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "StandardDescriptorProcessor.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.StandardDescriptorProcessor.visitSessionConfig(org.eclipse.jetty.webapp.WebAppContext,org.eclipse.jetty.webapp.Descriptor,org.eclipse.jetty.xml.XmlParser$Node)", "DEL": 2, "INS": 3, "UPD": 2, "MOV": 3, "TOT": 10}]}, {"spoonFilePath": "SessionExpiryTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.SessionExpiryTest.getSessionExpiry(com.mongodb.DBCollection,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.SessionExpiryTest.ChangeTimeoutServlet", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.SessionExpiryTest.getSessionMaxInactiveInterval(com.mongodb.DBCollection,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.SessionExpiryTest.verifySessionTimeout(com.mongodb.DBCollection,java.lang.String,int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.SessionExpiryTest.debugPrint(com.mongodb.DBCollection,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.SessionExpiryTest.getSessionAccessed(com.mongodb.DBCollection,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.SessionExpiryTest.changeSessionTimeout()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.SessionExpiryTest.testBigSessionExpiry()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "MongoTestServer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.MongoTestServer.newSessionManager()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AbstractSessionManager.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.session.AbstractSessionManager", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.session.AbstractSessionManager.setMaxInactiveInterval(int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "ead37b1b57d9e5a01e300f0bebc3a0a3c6e31754 tags/jetty-9.3.8.v20160311~11", "commitUser": "janbartel", "authoredDateTime": "2016-03-10 18:51:23", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 47, "filePath": "jetty-nosql/src/main/java/org/eclipse/jetty/nosql/mongodb/MongoSessionManager.java", "insertions": 30, "deletions": 17}, {"lines": 10, "filePath": "jetty-webapp/src/main/java/org/eclipse/jetty/webapp/StandardDescriptorProcessor.java", "insertions": 6, "deletions": 4}, {"lines": 227, "filePath": "tests/test-sessions/test-mongodb-sessions/src/test/java/org/eclipse/jetty/nosql/mongodb/SessionExpiryTest.java", "insertions": 227, "deletions": 0}, {"lines": 10, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/session/AbstractSessionManager.java", "insertions": 10, "deletions": 0}, {"lines": 6, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/session/AbstractSession.java", "insertions": 4, "deletions": 2}, {"lines": 2, "filePath": "tests/test-sessions/test-mongodb-sessions/src/test/java/org/eclipse/jetty/nosql/mongodb/MongoTestServer.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2016-03-10 18:52:34", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #411 Add more debug log for mongosessionmanager and remove debug printlns\n", "commitParents": ["2af81781cd8c96bfe49503a563c404d6276bda07"], "commitHash": "d82b5ad65a62ccd49266c0a9dc20342478068c53", "commitSpoonAstDiffStats": [{"spoonFilePath": "AbstractSessionManager.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.session.AbstractSessionManager.setMaxInactiveInterval(int)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "IdleSessionTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.IdleSessionTest.testIdleSession()", "DEL": 4, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 4}]}, {"spoonFilePath": "AbstractSession.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.session.AbstractSession.setMaxInactiveInterval(int)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "SessionExpiryTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.SessionExpiryTest.testChangeNewSessionTimeout()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.SessionExpiryTest.ImmediateChangeTimeoutServlet", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "d82b5ad65a62ccd49266c0a9dc20342478068c53 tags/jetty-9.3.8.v20160311~4", "commitUser": "janbartel", "authoredDateTime": "2016-03-11 15:11:23", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 75, "filePath": "tests/test-sessions/test-mongodb-sessions/src/test/java/org/eclipse/jetty/nosql/mongodb/SessionExpiryTest.java", "insertions": 75, "deletions": 0}, {"lines": 7, "filePath": "tests/test-sessions/test-mongodb-sessions/src/test/java/org/eclipse/jetty/nosql/mongodb/IdleSessionTest.java", "insertions": 2, "deletions": 5}, {"lines": 4, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/session/AbstractSessionManager.java", "insertions": 3, "deletions": 1}, {"lines": 4, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/session/AbstractSession.java", "insertions": 3, "deletions": 1}], "commitDateTime": "2016-03-11 15:12:07", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #411 ensure MongoSessionManager saves maxInactiveInterval and expiry correctly\nIssue #415 ensure setting > MAX_INT session-timeout is detected\n", "commitParents": ["14c985802e790b21df7a35f63a5f6bab4f6efd19"], "commitHash": "8a24798fa46d8c6f8861be554f482b276bfc31b4", "commitSpoonAstDiffStats": [{"spoonFilePath": "MongoSessionDataStore.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.MongoSessionDataStore.doStore(java.lang.String,org.eclipse.jetty.server.session.SessionData,long)", "DEL": 3, "INS": 5, "UPD": 5, "MOV": 12, "TOT": 25}]}, {"spoonFilePath": "SessionManager.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.session.SessionManager", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.session.SessionManager.setMaxInactiveInterval(int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "Session.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.session.Session.setMaxInactiveInterval(int)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}]}, {"spoonFilePath": "StandardDescriptorProcessor.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.StandardDescriptorProcessor.visitSessionConfig(org.eclipse.jetty.webapp.WebAppContext,org.eclipse.jetty.webapp.Descriptor,org.eclipse.jetty.xml.XmlParser$Node)", "DEL": 2, "INS": 3, "UPD": 2, "MOV": 3, "TOT": 10}]}, {"spoonFilePath": "SessionExpiryTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.SessionExpiryTest.getSessionExpiry(com.mongodb.DBCollection,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.SessionExpiryTest.ChangeTimeoutServlet", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.SessionExpiryTest.getSessionMaxInactiveInterval(com.mongodb.DBCollection,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.SessionExpiryTest.verifySessionTimeout(com.mongodb.DBCollection,java.lang.String,int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.SessionExpiryTest.debugPrint(com.mongodb.DBCollection,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.SessionExpiryTest.getSessionAccessed(com.mongodb.DBCollection,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.SessionExpiryTest.changeSessionTimeout()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.nosql.mongodb.SessionExpiryTest.testBigSessionExpiry()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "8a24798fa46d8c6f8861be554f482b276bfc31b4 tags/jetty-9.4.0.M0~180", "commitUser": "janbartel", "authoredDateTime": "2016-03-11 10:47:34", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 12, "filePath": "jetty-nosql/src/main/java/org/eclipse/jetty/nosql/mongodb/MongoSessionDataStore.java", "insertions": 8, "deletions": 4}, {"lines": 242, "filePath": "tests/test-sessions/test-mongodb-sessions/src/test/java/org/eclipse/jetty/nosql/mongodb/SessionExpiryTest.java", "insertions": 242, "deletions": 0}, {"lines": 10, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/session/SessionManager.java", "insertions": 10, "deletions": 0}, {"lines": 4, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/session/Session.java", "insertions": 3, "deletions": 1}, {"lines": 9, "filePath": "jetty-webapp/src/main/java/org/eclipse/jetty/webapp/StandardDescriptorProcessor.java", "insertions": 6, "deletions": 3}], "commitDateTime": "2016-03-11 10:47:34", "spoonStatsSkippedReason": ""}], "title": "MongoSessionManager does not save maxInactiveInterval and expiry correctly", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 0, "INS": 2, "UPD": 2, "MOV": 0, "TOT": 4, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 8, "insertions": 6, "gitFilesChange": 2, "deletions": 2}, "closed": "2016-04-30 00:07:21", "statsSkippedReason": "", "body": "Reported against jetty-9.2.10 and 9.3.8.RC0.\n\nThe code for checking if the maxInactiveInterval has changed during saves checks if the sessionmanager's default value has changed, but not the value for the actual session.\n\nAdditionally, the calculation of the expiry time is also based on the sessionmanager's default maxInactiveInterval instead of that of the session.\n", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server/session"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.session.AbstractSessionManager.setMaxInactiveInterval(int)", "org.eclipse.jetty.server.session.AbstractSession.setMaxInactiveInterval(int)"], "ttf": 51.000277777777775, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/411"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "smatei", "filteredCommits": ["4039f00bdaccd15a7ef180f7fb50d90f15802e72"], "commits": {"4039f00bdaccd15a7ef180f7fb50d90f15802e72": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "f3675dbad7b273256634b2b1d8aac12b169d8623": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2016-03-09 09:46:17", "commitsDetails": [{"commitMessage": "Issue #408 (Http client does not work on https with proxy)\n\nFixed by not considering authority-form targets to be URIs, so that\nthe request is correctly copied after a 407.\n", "commitParents": ["e6c2c81beaabcb455ee74c93a7353076b7430144"], "commitHash": "4039f00bdaccd15a7ef180f7fb50d90f15802e72", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpConnection.normalizeRequest(org.eclipse.jetty.client.api.Request)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 4}]}, {"spoonFilePath": "AuthenticationProtocolHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.AuthenticationProtocolHandler.AuthenticationListener.onComplete(org.eclipse.jetty.client.api.Result)", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 2, "TOT": 5}]}, {"spoonFilePath": "HttpProxy.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpProxy.HttpProxyClientConnectionFactory.ProxyPromise.tunnel(org.eclipse.jetty.client.HttpDestination,org.eclipse.jetty.client.api.Connection)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ForwardProxyTLSServerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.proxy.ForwardProxyTLSServerTest.testProxyAuthentication()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpRequest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpRequest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.HttpRequest.buildURI(boolean)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 2, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.client.HttpRequest.newURI(java.lang.String)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.client.HttpRequest.path(java.lang.String)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "4039f00bdaccd15a7ef180f7fb50d90f15802e72 tags/jetty-9.3.8.v20160311~6", "commitUser": "sbordet", "authoredDateTime": "2016-03-10 10:08:50", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 50, "filePath": "jetty-proxy/src/test/java/org/eclipse/jetty/proxy/ForwardProxyTLSServerTest.java", "insertions": 50, "deletions": 0}, {"lines": 8, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpRequest.java", "insertions": 4, "deletions": 4}, {"lines": 7, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpProxy.java", "insertions": 7, "deletions": 0}, {"lines": 10, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/AuthenticationProtocolHandler.java", "insertions": 8, "deletions": 2}, {"lines": 3, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpConnection.java", "insertions": 1, "deletions": 2}], "commitDateTime": "2016-03-10 16:10:45", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #560 - Jetty Client Proxy Authentication does not work with HTTP Proxy tunneling.\n\nThe issue was related to the fact that the proxy responded 407 with a\nConnection: close header.\n\nBecause the endPoint underlying the original connection was closed,\nit should not have been used as a tunnel.\nRather, the endPoint of the new CONNECT attempt (with the proxy\ncredentials) must be used for the tunnel.\n\nAlso partially backported the fix for #408.\n", "commitParents": ["2d3d71ea2381d84f368846dfb77e49792f392bd5"], "commitHash": "f3675dbad7b273256634b2b1d8aac12b169d8623", "commitSpoonAstDiffStats": [], "nameRev": "f3675dbad7b273256634b2b1d8aac12b169d8623 tags/jetty-9.2.17.v20160517~4", "commitUser": "sbordet", "authoredDateTime": "2016-05-12 17:19:04", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 7, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/http/HttpConnectionOverHTTP.java", "insertions": 7, "deletions": 0}, {"lines": 157, "filePath": "jetty-proxy/src/test/java/org/eclipse/jetty/proxy/ProxyTunnellingTest.java", "insertions": 89, "deletions": 68}, {"lines": 12, "filePath": "jetty-fcgi/fcgi-client/src/main/java/org/eclipse/jetty/fcgi/client/http/HttpConnectionOverFCGI.java", "insertions": 12, "deletions": 0}, {"lines": 6, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/api/Connection.java", "insertions": 6, "deletions": 0}, {"lines": 287, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpProxy.java", "insertions": 191, "deletions": 96}, {"lines": 21, "filePath": "jetty-spdy/spdy-http-client-transport/src/main/java/org/eclipse/jetty/spdy/client/http/HttpConnectionOverSPDY.java", "insertions": 16, "deletions": 5}, {"lines": 33, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/AuthenticationProtocolHandler.java", "insertions": 28, "deletions": 5}, {"lines": 4, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/PoolingHttpDestination.java", "insertions": 2, "deletions": 2}], "commitDateTime": "2016-05-12 17:19:04", "spoonStatsSkippedReason": "tooManyChanges"}], "title": "Http client does not work on https with proxy", "spoonStatsSummary": {"spoonMethodsChanged": 7, "DEL": 4.0, "INS": 7.0, "UPD": 0.0, "MOV": 7.0, "TOT": 18.0, "spoonFilesChanged": 4}, "gitStatsSummary": {"lines": 28, "insertions": 20, "gitFilesChange": 4, "deletions": 8}, "closed": "2016-03-10 15:10:18", "statsSkippedReason": "", "body": "Hi,\n\nI try to connect to a https page (\"https://www.google.com\" in my example), using a squid proxy. \n\n``` java\nSslContextFactory sslContextFactory = new SslContextFactory();\nHttpClient client = new HttpClient(sslContextFactory);\nProxyConfiguration proxyConfig = client.getProxyConfiguration();\nHttpProxy proxy = new HttpProxy(new Origin.Address(proxyHost, proxyPort), true);\nclient.getAuthenticationStore().addAuthentication(new BasicAuthentication(new URI(\"https://\" + proxyHost), \"Proxy\", user, password));\nproxyConfig.getProxies().add(proxy);\nclient.start();\nContentResponse res = client.GET(\"https://www.google.com\");\nSystem.out.println(res.getStatus());\nSystem.out.println(res.getContentAsString());\nclient.stop(); `      \n```\n\nI get the following exception:\n\n```\n`2016-03-09` 11:35:54.980:INFO:oejc.ResponseNotifier:HttpClient@1555009629-11: Exception while notifying listener org.eclipse.jetty.client.AuthenticationProtocolHandler$AuthenticationListener@340e1cca\njava.lang.IllegalArgumentException: Invalid protocol www.google.com\n    at org.eclipse.jetty.client.HttpClient.send(HttpClient.java:536)\n    at org.eclipse.jetty.client.HttpRequest.send(HttpRequest.java:704)\n    at org.eclipse.jetty.client.HttpRequest.send(HttpRequest.java:688)\n    at org.eclipse.jetty.client.AuthenticationProtocolHandler$AuthenticationListener.onComplete(AuthenticationProtocolHandler.java:158)\n    at org.eclipse.jetty.client.ResponseNotifier.notifyComplete(ResponseNotifier.java:193)\n    at org.eclipse.jetty.client.ResponseNotifier.notifyComplete(ResponseNotifier.java:185)\n    at org.eclipse.jetty.client.HttpReceiver.terminateResponse(HttpReceiver.java:447)\n    at org.eclipse.jetty.client.HttpReceiver.responseSuccess(HttpReceiver.java:394)\n    at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.messageComplete(HttpReceiverOverHTTP.java:264)\n    at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:1199)\n    at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.parse(HttpReceiverOverHTTP.java:158)\n    at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.process(HttpReceiverOverHTTP.java:119)\n    at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.receive(HttpReceiverOverHTTP.java:69)\n    at org.eclipse.jetty.client.http.HttpChannelOverHTTP.receive(HttpChannelOverHTTP.java:90)\n    at org.eclipse.jetty.client.http.HttpConnectionOverHTTP.onFillable(HttpConnectionOverHTTP.java:112)\n    at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:261)\n    at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)\n    at org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:75)\n    at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceAndRun(ExecuteProduceConsume.java:213)\n    at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:147)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:654)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool$1.run(QueuedThreadPool.java:572)\n    at java.lang.Thread.run(Thread.java:745)`\n```\n\nIt seems that in HttpRequest.BuildURI, an URI is created from \"www.google.com:443\", that has no protocol. \n", "changesInPackagesGIT": ["jetty-client/src/main/java/org/eclipse/jetty/client"], "changesInPackagesSPOON": ["org.eclipse.jetty.client.HttpRequest", "org.eclipse.jetty.client.HttpRequest.buildURI(boolean)", "org.eclipse.jetty.client.HttpProxy.HttpProxyClientConnectionFactory.ProxyPromise.tunnel(org.eclipse.jetty.client.HttpDestination,org.eclipse.jetty.client.api.Connection)", "org.eclipse.jetty.client.AuthenticationProtocolHandler.AuthenticationListener.onComplete(org.eclipse.jetty.client.api.Result)", "org.eclipse.jetty.client.HttpRequest.path(java.lang.String)", "org.eclipse.jetty.client.HttpRequest.newURI(java.lang.String)", "org.eclipse.jetty.client.HttpConnection.normalizeRequest(org.eclipse.jetty.client.api.Request)"], "ttf": 1.0002777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/408"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "tsachev", "filteredCommits": ["db4b920ae4d2227b9bc73b90d8c973256c334dab"], "commits": {"db4b920ae4d2227b9bc73b90d8c973256c334dab": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2016-03-08 20:39:05", "commitsDetails": [{"commitMessage": "Issue #407 - JSR356 Server WebSocket Sessions no longer being tracked\n", "commitParents": ["98448262eac41178d39624e61aca0c3e4c2492a4"], "commitHash": "db4b920ae4d2227b9bc73b90d8c973256c334dab", "commitSpoonAstDiffStats": [{"spoonFilePath": "ServerContainer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.ServerContainer.onSessionOpened(org.eclipse.jetty.websocket.common.WebSocketSession)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.ServerContainer.onSessionClosed(org.eclipse.jetty.websocket.common.WebSocketSession)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "JsrBrowserSocket.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.browser.JsrBrowserSocket.onMessage(java.lang.String)", "DEL": 0, "INS": 4, "UPD": 0, "MOV": 0, "TOT": 4}]}], "nameRev": "db4b920ae4d2227b9bc73b90d8c973256c334dab tags/jetty-9.3.8.v20160311~16", "commitUser": "joakime", "authoredDateTime": "2016-03-08 15:15:21", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-websocket/javax-websocket-server-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/server/ServerContainer.java", "insertions": 2, "deletions": 0}, {"lines": 9, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/browser/JsrBrowserSocket.java", "insertions": 9, "deletions": 0}], "commitDateTime": "2016-03-08 15:15:21", "spoonStatsSkippedReason": ""}], "title": "JSR356 WebSocket Server Sessions no longer being tracked", "spoonStatsSummary": {"spoonMethodsChanged": 3, "DEL": 0, "INS": 6, "UPD": 0, "MOV": 0, "TOT": 6, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 2, "insertions": 2, "gitFilesChange": 1, "deletions": 0}, "closed": "2016-03-08 22:17:33", "statsSkippedReason": "", "body": "Hi I am trying out the example here\n\nhttps://github.com/jetty-project/embedded-websocket-echo-examples/blob/master/src/main/java/org/eclipse/jetty/demo/jsr/endpoint\n\nBut it does not works as expected with `9.3.7`. (No messages are sent from the server to the client.)\n\nIt seems that \n\n`javax.websocket.Session#getOpenSessions()` now always returns empty set, because the opened sessions are no longer tracked.\nIt works with all versions before `9.3.7.RC0` and does not work with all versions after `9.3.7.RC1`.\n\nI believe the regression was introduced here 57224ec3ca3b07e3fc0689857994c7749173de33,\nprobably the fix is as simple as \n`ServerContainer#onSessionClosed()` and `ServerContainer#onSessionOpened()` to call `super`.\n", "changesInPackagesGIT": ["jetty-websocket/javax-websocket-server-impl/src/main/java/org/eclipse/jetty/websocket/jsr356"], "changesInPackagesSPOON": ["org.eclipse.jetty.websocket.jsr356.server.ServerContainer.onSessionOpened(org.eclipse.jetty.websocket.common.WebSocketSession)", "org.eclipse.jetty.websocket.jsr356.server.ServerContainer.onSessionClosed(org.eclipse.jetty.websocket.common.WebSocketSession)", "org.eclipse.jetty.websocket.jsr356.server.browser.JsrBrowserSocket.onMessage(java.lang.String)"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/407"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["cf6c15d8bc9da5e00a37cf57ff7ff41ab8b41575", "07d54224c74b6e9784e2bd9a7bca723d4d5c4426"], "commits": {"07d54224c74b6e9784e2bd9a7bca723d4d5c4426": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "cf6c15d8bc9da5e00a37cf57ff7ff41ab8b41575": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2016-03-07 23:54:03", "commitsDetails": [{"commitMessage": "Issue #405 - adding testcase for problematic HttpURI parsing of path params\n", "commitParents": ["cc9a19775b4afe2eb7cb2927098e8c5ab08a2bb4"], "commitHash": "07d54224c74b6e9784e2bd9a7bca723d4d5c4426", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpURIParseTest.java", "spoonMethods": []}], "nameRev": "07d54224c74b6e9784e2bd9a7bca723d4d5c4426 tags/jetty-9.3.8.v20160311~20", "commitUser": "joakime", "authoredDateTime": "2016-03-07 17:12:05", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 19, "filePath": "jetty-http/src/test/java/org/eclipse/jetty/http/HttpURIParseTest.java", "insertions": 11, "deletions": 8}], "commitDateTime": "2016-03-07 17:12:05", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #405\n\nEnabled test\n", "commitParents": ["4d4ecfd5cf5b66e443693653ecb436b1ebb2b0e5"], "commitHash": "cf6c15d8bc9da5e00a37cf57ff7ff41ab8b41575", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpURIParseTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.HttpURIParseTest.data()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "cf6c15d8bc9da5e00a37cf57ff7ff41ab8b41575 tags/jetty-9.4.0.M0~73", "commitUser": "gregw", "authoredDateTime": "2016-05-04 22:11:28", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-http/src/test/java/org/eclipse/jetty/http/HttpURIParseTest.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2016-05-04 22:21:33", "spoonStatsSkippedReason": ""}], "title": "HttpURI parsing of path params is bad", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0, "insertions": 0, "gitFilesChange": 0, "deletions": 0}, "closed": "2017-04-28 11:35:04", "statsSkippedReason": "", "body": "These flaws were identified at the HttpServletRequest side in Issue #222\n\nHttpURI parsing of an input like this ...\n\n```\n/path/info;a=b/foo;c=d\n```\n\nWill not find both params, only `c=d` is returned from `HttpURI.getParam()`.\n\nShould `getParam()` return `a=b,c=d` ?  (This result seems just as bad, as you have no way to know which path segment each param appeared in.\n\nAlso, there appears to be no method to obtain the parameter-less path, such that the result of such a method would return `/path/info/foo` for the above example,\n", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 416.0002777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/405"}, {"labels": ["Bug"], "closed": "2016-03-08 21:36:15", "body": "If a Header is received (while in RFC2616 compliance mode) that has a name, but no value, does the header exist or not?\n\n> Note: in RFC7230 mode, the header seems to be outright rejected, sometimes even resulting in an error 400 (needs more testing)\n\nIf the header is deemed to \"exist\", then it should never return null, but perhaps an empty string?\n", "commits": {}, "title": "HttpServletRequest.getHeader(String) returns null for Headers with no value", "created": "2016-03-07 23:18:04", "user": "joakime", "url": "https://github.com/eclipse/jetty.project/issues/404", "commitsDetails": [], "ttf": 0.0002777777777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "sbordet", "filteredCommits": ["87f011d98ba6c5671981cd1b63e7e5088f2ca34f"], "commits": {"87f011d98ba6c5671981cd1b63e7e5088f2ca34f": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2016-03-07 20:53:43", "commitsDetails": [{"commitMessage": "Issue #402 (Don't use Thread.isAlive() in ShutdownMonitor).\n\nRefactored completely ShutdownMonitor, fixing synchronization, race\nconditions, cleaning up code, deleting unnecessary code, etc.\n", "commitParents": ["6ac2c4a7011e9aedd3bb34b48670c9b5aa705070"], "commitHash": "87f011d98ba6c5671981cd1b63e7e5088f2ca34f", "commitSpoonAstDiffStats": [], "nameRev": "87f011d98ba6c5671981cd1b63e7e5088f2ca34f tags/jetty-9.3.8.v20160311~18^2~1", "commitUser": "sbordet", "authoredDateTime": "2016-03-08 14:29:49", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 613, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/ShutdownMonitor.java", "insertions": 272, "deletions": 341}, {"lines": 206, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ShutdownMonitorTest.java", "insertions": 94, "deletions": 112}], "commitDateTime": "2016-03-08 14:29:49", "spoonStatsSkippedReason": "tooManyChanges"}], "title": "Don't use Thread.isAlive() in ShutdownMonitor", "spoonStatsSummary": {}, "gitStatsSummary": {"lines": 613, "insertions": 272, "gitFilesChange": 1, "deletions": 341}, "closed": "2016-03-08 13:31:57", "statsSkippedReason": "", "body": "`Thread.isAlive()` is ill-defined and should not be used as an indication of whether application logic is running or not.\n\n`Thread.isAlive()` can be true before `run()` is called and after it is finished, so it can return bogus values: it's alive before it actually is, and it's still alive when in fact is dead already.\n\nUsing a simple boolean flag set at the proper places solves the issue and it's more reliable.\n", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/402"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "sbordet", "filteredCommits": ["311c7466b064af4c905c81851c6c5287bc48cc3f"], "commits": {"311c7466b064af4c905c81851c6c5287bc48cc3f": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2016-03-03 07:19:11", "commitsDetails": [{"commitMessage": "Issue #386 (Explicit Authorization header is dropped when handling 407s)\n\nFixed by copying explicitly set authorization headers.\n", "commitParents": ["8f8fcd1b1adf7e50728d268421ab9292641d6b80"], "commitHash": "311c7466b064af4c905c81851c6c5287bc48cc3f", "commitSpoonAstDiffStats": [{"spoonFilePath": "AuthenticationProtocolHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.AuthenticationProtocolHandler.AuthenticationListener.copyIfAbsent(org.eclipse.jetty.client.HttpRequest,org.eclipse.jetty.client.api.Request,org.eclipse.jetty.http.HttpHeader)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.AuthenticationProtocolHandler.AuthenticationListener.onComplete(org.eclipse.jetty.client.api.Result)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "HttpClientProxyTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpClientProxyTest.testProxyAuthenticationWithExplicitAuthorizationHeader()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "311c7466b064af4c905c81851c6c5287bc48cc3f tags/jetty-9.3.8.v20160311~35", "commitUser": "sbordet", "authoredDateTime": "2016-03-03 08:20:38", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 72, "filePath": "jetty-client/src/test/java/org/eclipse/jetty/client/HttpClientProxyTest.java", "insertions": 72, "deletions": 0}, {"lines": 12, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/AuthenticationProtocolHandler.java", "insertions": 12, "deletions": 0}], "commitDateTime": "2016-03-03 08:20:55", "spoonStatsSkippedReason": ""}], "title": "Explicit Authorization header is dropped when handling 407s", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 12, "insertions": 12, "gitFilesChange": 1, "deletions": 0}, "closed": "2016-03-03 07:22:24", "statsSkippedReason": "", "body": "If an application sets an explicit `Authorization` header, and performs a request via an authenticating proxy, the `Authorization` header is dropped when the 407 response from the proxy is received and the request retried with the `Proxy-Authorization` header.\n", "changesInPackagesGIT": ["jetty-client/src/main/java/org/eclipse/jetty/client"], "changesInPackagesSPOON": ["org.eclipse.jetty.client.AuthenticationProtocolHandler.AuthenticationListener.copyIfAbsent(org.eclipse.jetty.client.HttpRequest,org.eclipse.jetty.client.api.Request,org.eclipse.jetty.http.HttpHeader)", "org.eclipse.jetty.client.AuthenticationProtocolHandler.AuthenticationListener.onComplete(org.eclipse.jetty.client.api.Result)"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/386"}, {"labels": ["Bug"], "closed": "2016-03-09 18:44:05", "body": "Under some conditions, the `Vary` header seems to be added twice to the response header.\n", "commits": {}, "title": "GzipHandler seems to be capable of adding duplicate Vary headers", "created": "2016-03-02 18:44:52", "user": "joakime", "url": "https://github.com/eclipse/jetty.project/issues/383", "commitsDetails": [], "ttf": 6.000277777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "sbordet", "filteredCommits": ["6d9b36c8a4e3000d7241348fc32aaca9a7d4ebac"], "commits": {"6d9b36c8a4e3000d7241348fc32aaca9a7d4ebac": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2016-03-02 16:56:34", "commitsDetails": [{"commitMessage": "Issue #381 (HttpClient does not send the Authorization header with authenticating proxy)\n\nFixed by tracking correctly the conversation attributes for\nauthentication, and by applying both proxy authentication results and\nserver authentication results.\n", "commitParents": ["4e426e9be375f30bd216a6603526094fb896a68b"], "commitHash": "6d9b36c8a4e3000d7241348fc32aaca9a7d4ebac", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpConnection.applyAuthentication(org.eclipse.jetty.client.api.Request,java.net.URI)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.HttpConnection.normalizeRequest(org.eclipse.jetty.client.api.Request)", "DEL": 2, "INS": 3, "UPD": 2, "MOV": 4, "TOT": 11}]}, {"spoonFilePath": "HttpClientProxyTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpClientProxyTest.testAuthenticatedProxiedRequestWithRedirect()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.HttpClientProxyTest.testAuthenticatedProxiedRequest()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.HttpClientProxyTest.testProxyAuthenticationWithServerAuthentication()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "WWWAuthenticationProtocolHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.WWWAuthenticationProtocolHandler", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.WWWAuthenticationProtocolHandler.getAuthenticationAttribute()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ProxyAuthenticationProtocolHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.ProxyAuthenticationProtocolHandler", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.ProxyAuthenticationProtocolHandler.getAuthenticationAttribute()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AuthenticationProtocolHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.AuthenticationProtocolHandler.AuthenticationListener.onComplete(org.eclipse.jetty.client.api.Result)", "DEL": 3, "INS": 5, "UPD": 0, "MOV": 0, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.client.AuthenticationProtocolHandler.getAuthenticationAttribute()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.AuthenticationProtocolHandler.AuthenticationListener.onComplete(org.eclipse.jetty.client.api.Result).1.onSuccess(org.eclipse.jetty.client.api.Response)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 2, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.client.AuthenticationProtocolHandler", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "6d9b36c8a4e3000d7241348fc32aaca9a7d4ebac tags/jetty-9.3.8.v20160311~36^2", "commitUser": "sbordet", "authoredDateTime": "2016-03-02 18:01:32", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 7, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/ProxyAuthenticationProtocolHandler.java", "insertions": 7, "deletions": 0}, {"lines": 7, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/WWWAuthenticationProtocolHandler.java", "insertions": 7, "deletions": 0}, {"lines": 76, "filePath": "jetty-client/src/test/java/org/eclipse/jetty/client/HttpClientProxyTest.java", "insertions": 74, "deletions": 2}, {"lines": 18, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/AuthenticationProtocolHandler.java", "insertions": 7, "deletions": 11}, {"lines": 21, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpConnection.java", "insertions": 13, "deletions": 8}], "commitDateTime": "2016-03-02 18:02:20", "spoonStatsSkippedReason": ""}], "title": "HttpClient does not send the Authorization header with authenticating proxy", "spoonStatsSummary": {"spoonMethodsChanged": 10, "DEL": 7, "INS": 14, "UPD": 2, "MOV": 6, "TOT": 29, "spoonFilesChanged": 4}, "gitStatsSummary": {"lines": 53, "insertions": 34, "gitFilesChange": 4, "deletions": 19}, "closed": "2016-03-02 17:03:06", "statsSkippedReason": "", "body": "In case both the proxy _and_ the server require authentication, HttpClient does not send the `Authorization` header necessary for server authentication.\n\nThe sequence is:\n\n```\nrequest -> 407 + Proxy-Authenticate\nrequest + Proxy-Authorization -> 401 + WWW-Authenticate\nrequest + Proxy-Authorization\n```\n\nThe last step should be:\n\n```\nrequest + Proxy-Authorization + Authorization\n```\n", "changesInPackagesGIT": ["jetty-client/src/main/java/org/eclipse/jetty/client"], "changesInPackagesSPOON": ["org.eclipse.jetty.client.WWWAuthenticationProtocolHandler", "org.eclipse.jetty.client.AuthenticationProtocolHandler.AuthenticationListener.onComplete(org.eclipse.jetty.client.api.Result)", "org.eclipse.jetty.client.AuthenticationProtocolHandler", "org.eclipse.jetty.client.AuthenticationProtocolHandler.getAuthenticationAttribute()", "org.eclipse.jetty.client.WWWAuthenticationProtocolHandler.getAuthenticationAttribute()", "org.eclipse.jetty.client.ProxyAuthenticationProtocolHandler.getAuthenticationAttribute()", "org.eclipse.jetty.client.AuthenticationProtocolHandler.AuthenticationListener.onComplete(org.eclipse.jetty.client.api.Result).1.onSuccess(org.eclipse.jetty.client.api.Response)", "org.eclipse.jetty.client.HttpConnection.applyAuthentication(org.eclipse.jetty.client.api.Request,java.net.URI)", "org.eclipse.jetty.client.HttpConnection.normalizeRequest(org.eclipse.jetty.client.api.Request)", "org.eclipse.jetty.client.ProxyAuthenticationProtocolHandler"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/381"}, {"labels": ["Bug"], "closed": "2016-03-09 18:56:54", "body": "Some servers like AWS S3 allow non-RFC 2616 characters in headers, e.g., `\\x04`.  I would like Jetty to optionally allow these characters to enable other servers like [S3Proxy](https://github.com/andrewgaul/s3proxy) to emulate this behavior.  Currently Jetty rejects these with:\n\n```\nW 07-24 11:08:02.144 S3Proxy-14 o.e.jetty.http.HttpParser:1719 |::] Illegal character 0x4 in state=HEADER_IN_VALUE for buffer HeapByteBuffer@3d6811d8[p=279,l=410,c=16384,r=131]={PUT /gaul-33o3yv7...-meta-meta1: h\\x04<<<w\\r\\nAuthorization:...-57-generic\\r\\n\\r\\n>>>\\r\\n\\r\\n-generic\\r\\n\\r\\n\\n...\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00}\nW 07-24 11:08:02.144 S3Proxy-14 o.e.jetty.http.HttpParser:1344 |::] badMessage: 400 Illegal character 0x4 for HttpChannelOverHttp@4b0947c6{r=1,c=false,a=IDLE,uri=-}\n```\n\nReferences andrewgaul/s3proxy#75.\n", "commits": {}, "title": "Allow non-RFC 2616 characters in headers", "created": "2016-03-01 06:23:42", "user": "gaul", "url": "https://github.com/eclipse/jetty.project/issues/373", "commitsDetails": [], "ttf": 8.000277777777777}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "sbordet", "filteredCommits": ["aa6de825b7fb28384c58ff959a4d2703cf7a1cd0"], "commits": {"aa6de825b7fb28384c58ff959a4d2703cf7a1cd0": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "b8fcc5112fcc3ef315e53ddf67931a7fb2764870": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2016-02-29 12:40:40", "commitsDetails": [{"commitMessage": "Issue #372 (Data race in HttpReceiverOverHTTP2)\n\nFixed by copying the buffer passed to onData().\n", "commitParents": ["aadfae936c5fb3b668af219ef57ae43fd33545e2"], "commitHash": "aa6de825b7fb28384c58ff959a4d2703cf7a1cd0", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpReceiverOverHTTP2.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.client.http.HttpReceiverOverHTTP2.onData(org.eclipse.jetty.http2.api.Stream,org.eclipse.jetty.http2.frames.DataFrame,org.eclipse.jetty.util.Callback)", "DEL": 0, "INS": 8, "UPD": 1, "MOV": 1, "TOT": 10}]}, {"spoonFilePath": "HttpChannelOverHTTP2.java", "spoonMethods": []}], "nameRev": "aa6de825b7fb28384c58ff959a4d2703cf7a1cd0 tags/jetty-9.3.8.v20160311~38^2~9", "commitUser": "sbordet", "authoredDateTime": "2016-02-29 14:02:17", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 7, "filePath": "jetty-http2/http2-server/src/main/java/org/eclipse/jetty/http2/server/HttpChannelOverHTTP2.java", "insertions": 4, "deletions": 3}, {"lines": 39, "filePath": "jetty-http2/http2-http-client-transport/src/main/java/org/eclipse/jetty/http2/client/http/HttpReceiverOverHTTP2.java", "insertions": 38, "deletions": 1}], "commitDateTime": "2016-02-29 14:02:17", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #372 (Data race in HttpReceiverOverHTTP2)\n\nFixed implementations of onData() to properly complete the callback\nand to copy the data if they use it asynchronously.\n", "commitParents": ["aa6de825b7fb28384c58ff959a4d2703cf7a1cd0"], "commitHash": "b8fcc5112fcc3ef315e53ddf67931a7fb2764870", "commitSpoonAstDiffStats": [{"spoonFilePath": "StreamCloseTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.client.StreamCloseTest.testRequestDataClosedResponseDataClosedClosesStream().5.onData(org.eclipse.jetty.http2.api.Stream,org.eclipse.jetty.http2.frames.DataFrame,org.eclipse.jetty.util.Callback)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.client.StreamCloseTest.testRequestDataClosedResponseDataClosedClosesStream().4.onNewStream(org.eclipse.jetty.http2.api.Stream,org.eclipse.jetty.http2.frames.HeadersFrame).1.onData(org.eclipse.jetty.http2.api.Stream,org.eclipse.jetty.http2.frames.DataFrame,org.eclipse.jetty.util.Callback)", "DEL": 0, "INS": 4, "UPD": 0, "MOV": 1, "TOT": 5}]}, {"spoonFilePath": "IdleTimeoutTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.client.IdleTimeoutTest.testClientEnforcingStreamIdleTimeout().13.onData(org.eclipse.jetty.http2.api.Stream,org.eclipse.jetty.http2.frames.DataFrame,org.eclipse.jetty.util.Callback)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "StreamResetTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.client.StreamResetTest.testStreamResetDoesNotCloseConnection().3.onData(org.eclipse.jetty.http2.api.Stream,org.eclipse.jetty.http2.frames.DataFrame,org.eclipse.jetty.util.Callback)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.client.StreamResetTest.testStreamResetDoesNotCloseConnection().4.onData(org.eclipse.jetty.http2.api.Stream,org.eclipse.jetty.http2.frames.DataFrame,org.eclipse.jetty.util.Callback)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "PushCacheFilterTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.client.PushCacheFilterTest.testPushIsReset().9.onPush(org.eclipse.jetty.http2.api.Stream,org.eclipse.jetty.http2.frames.PushPromiseFrame).1.onData(org.eclipse.jetty.http2.api.Stream,org.eclipse.jetty.http2.frames.DataFrame,org.eclipse.jetty.util.Callback)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.client.PushCacheFilterTest.testPushReferrerNoPath().5.onData(org.eclipse.jetty.http2.api.Stream,org.eclipse.jetty.http2.frames.DataFrame,org.eclipse.jetty.util.Callback).1.onData(org.eclipse.jetty.http2.api.Stream,org.eclipse.jetty.http2.frames.DataFrame,org.eclipse.jetty.util.Callback)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.client.PushCacheFilterTest.testPushWithoutPrimaryResponseContent().12.onHeaders(org.eclipse.jetty.http2.api.Stream,org.eclipse.jetty.http2.frames.HeadersFrame).1.onData(org.eclipse.jetty.http2.api.Stream,org.eclipse.jetty.http2.frames.DataFrame,org.eclipse.jetty.util.Callback)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.client.PushCacheFilterTest.testSelfPush().19.onHeaders(org.eclipse.jetty.http2.api.Stream,org.eclipse.jetty.http2.frames.HeadersFrame).1.onData(org.eclipse.jetty.http2.api.Stream,org.eclipse.jetty.http2.frames.DataFrame,org.eclipse.jetty.util.Callback)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.client.PushCacheFilterTest.testPushIsReset().10.onData(org.eclipse.jetty.http2.api.Stream,org.eclipse.jetty.http2.frames.DataFrame,org.eclipse.jetty.util.Callback)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.client.PushCacheFilterTest.testPushIsReset().8.onData(org.eclipse.jetty.http2.api.Stream,org.eclipse.jetty.http2.frames.DataFrame,org.eclipse.jetty.util.Callback).1.onData(org.eclipse.jetty.http2.api.Stream,org.eclipse.jetty.http2.frames.DataFrame,org.eclipse.jetty.util.Callback)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.client.PushCacheFilterTest.testSelfPush().20.onData(org.eclipse.jetty.http2.api.Stream,org.eclipse.jetty.http2.frames.DataFrame,org.eclipse.jetty.util.Callback)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.client.PushCacheFilterTest.testPush().2.onData(org.eclipse.jetty.http2.api.Stream,org.eclipse.jetty.http2.frames.DataFrame,org.eclipse.jetty.util.Callback).1.onData(org.eclipse.jetty.http2.api.Stream,org.eclipse.jetty.http2.frames.DataFrame,org.eclipse.jetty.util.Callback)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "StreamCountTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.client.StreamCountTest.testServerAllowsOneStreamEnforcedByServer().4.onNewStream(org.eclipse.jetty.http2.api.Stream,org.eclipse.jetty.http2.frames.HeadersFrame).1.onData(org.eclipse.jetty.http2.api.Stream,org.eclipse.jetty.http2.frames.DataFrame,org.eclipse.jetty.util.Callback)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.client.StreamCountTest.testServerAllowsOneStreamEnforcedByClient().1.onNewStream(org.eclipse.jetty.http2.api.Stream,org.eclipse.jetty.http2.frames.HeadersFrame).1.onData(org.eclipse.jetty.http2.api.Stream,org.eclipse.jetty.http2.frames.DataFrame,org.eclipse.jetty.util.Callback)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "b8fcc5112fcc3ef315e53ddf67931a7fb2764870 tags/jetty-9.3.8.v20160311~38^2~8", "commitUser": "sbordet", "authoredDateTime": "2016-02-29 14:39:27", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 1, "filePath": "jetty-http2/http2-client/src/test/java/org/eclipse/jetty/http2/client/IdleTimeoutTest.java", "insertions": 1, "deletions": 0}, {"lines": 8, "filePath": "jetty-http2/http2-client/src/test/java/org/eclipse/jetty/http2/client/StreamCloseTest.java", "insertions": 7, "deletions": 1}, {"lines": 8, "filePath": "jetty-http2/http2-client/src/test/java/org/eclipse/jetty/http2/client/StreamCountTest.java", "insertions": 8, "deletions": 0}, {"lines": 2, "filePath": "jetty-http2/http2-client/src/test/java/org/eclipse/jetty/http2/client/StreamResetTest.java", "insertions": 2, "deletions": 0}, {"lines": 8, "filePath": "jetty-http2/http2-client/src/test/java/org/eclipse/jetty/http2/client/PushCacheFilterTest.java", "insertions": 8, "deletions": 0}], "commitDateTime": "2016-02-29 14:39:27", "spoonStatsSkippedReason": ""}], "title": "Data race in HttpReceiverOverHTTP2", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0, "INS": 8, "UPD": 1, "MOV": 1, "TOT": 10, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 46, "insertions": 42, "gitFilesChange": 2, "deletions": 4}, "closed": "2016-02-29 17:27:11", "statsSkippedReason": "", "body": "`HttpReceiverOverHTTP2.onData()` does not copy the buffer received from the HTTP/2 machinery, and this could result in corruption of the buffer (that may be reused to read more data). \n", "changesInPackagesGIT": ["jetty-http2/http2-server/src/main/java/org/eclipse/jetty/http2/server", "jetty-http2/http2-http-client-transport/src/main/java/org/eclipse/jetty/http2/client"], "changesInPackagesSPOON": ["org.eclipse.jetty.http2.client.http.HttpReceiverOverHTTP2.onData(org.eclipse.jetty.http2.api.Stream,org.eclipse.jetty.http2.frames.DataFrame,org.eclipse.jetty.util.Callback)"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/372"}, {"labels": ["Bug"], "closed": "2016-03-01 22:46:46", "body": "Hello,\n\nFollowing @sbordet reply here [http://stackoverflow.com/questions/35162252/how-to-do-server-push-with-standalone-jetty](http://stackoverflow.com/questions/35162252/how-to-do-server-push-with-standalone-jetty), I tried to implement a very simple custom filter, to have a control on what files gets pushed:\n\n```\n\npublic final class MyPushFilter implements Filter {\n\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\n\n\n        // if http/1.1 then return. HTTP/2 is running only on secure ports.\n        if (request.isSecure()==false)\n        {\n            chain.doFilter(request, response);\n            return;\n        }\n        HttpServletRequest httpRequest = (HttpServletRequest) request;\n        //System.out.println(\"HttpRequest is\" + httpRequest );\n        String uri = httpRequest.getRequestURI();\n        //System.out.println(\"Switch uri is is\" + uri );\n        switch(uri)\n        {\n            case \"/my-gallery/index.css\":\n                PushBuilder pushBuilder = Request.getBaseRequest(request).getPushBuilder();\n                pushBuilder.path(\"/my-gallery/index.js\").push();\n                pushBuilder.path(\"/my-gallery/data.js\").push();\n                break;\n            default:\n                break;\n\n        }\n        // pass the request along the filter chain\n        chain.doFilter(request, response);\n    }\n\n}\n```\n\nI then copied the generated `MyPushFilter.class`  to `/my-gallery/WEB-INF/classes` and declared it in `/my-gallery/WEB-INF/web.xml`.\n\n```\n <filter>\n        <filter-name>MyPushFilter</filter-name>\n        <filter-class>MyPushFilter</filter-class>\n        <async-supported>true</async-supported>\n        <init-param>\n            <param-name>ports</param-name>\n            <param-value>8443</param-value>\n        </init-param>\n</filter>\n    <filter-mapping>\n        <filter-name>MyPushFilter</filter-name>\n        <url-pattern>*.css</url-pattern>\n    </filter-mapping>\n\n```\n\nhowever the file on which push is defined in `MyPushFilter.java` in this case `index.css` does not get downloaded from the server. Also, no push takes place. Also, if I try to directly browser to the url  `index.css` it gives me `java.lang.NoClassDefFoundError` on `Request.getBaseRequest(request).getPushBuilder();`. Adding the required jars to lib folder leads to NullPointerException.\n\nAfter studying more through the documentation, I added a deplyment descriptor in `/jetty-base/webapps/jetty-context.xml` to set the `parentLoaderProperty`\n\n```\n<Configure class=\"org.eclipse.jetty.webapp.WebAppContext\">\n<Set name=\"contextPath\">/my-gallery/</Set>\n  <Set name=\"parentLoaderPriority\">true</Set>\n</Configure>\n```\n\nHowever the issue still stands :(\n", "commits": {}, "title": "Custom PushBuilder unable to push resources + NullPointerException", "created": "2016-02-27 02:56:18", "user": "s0j0urn", "url": "https://github.com/eclipse/jetty.project/issues/369", "commitsDetails": [], "ttf": 3.000277777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 3, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "sbordet", "filteredCommits": ["b08f177d47d08950ef814f8a6a08450ced7f3c53"], "commits": {"b08f177d47d08950ef814f8a6a08450ced7f3c53": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "ce5a3b11d65f718ab12491b241e427e47641f438": {"commitUser": "jmcc0nn3ll", "commitGHEventType": "referenced"}, "76b34fe79a3c1c870e5696948292d5a012227b2d": {"commitUser": "jmcc0nn3ll", "commitGHEventType": "referenced"}, "c74b0c23e951a8a48b5caa73b2e9743331fd353c": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2016-02-26 10:58:33", "commitsDetails": [{"commitMessage": "Issue #367 Resolve remaining git.eclipse.org build references\n", "commitParents": ["931f67baab5f8eee5a5f1efecc22541414ad6c66"], "commitHash": "b08f177d47d08950ef814f8a6a08450ced7f3c53", "commitSpoonAstDiffStats": [], "nameRev": "b08f177d47d08950ef814f8a6a08450ced7f3c53 tags/jetty-9.3.8.v20160311~19^2~7", "commitUser": "joakime", "authoredDateTime": "2016-02-26 07:51:05", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 4, "filePath": "jetty-server/src/main/config/modules/ssl.mod", "insertions": 4, "deletions": 0}, {"lines": 4, "filePath": "jetty-start/src/test/resources/dist-home/modules/ssl.mod", "insertions": 4, "deletions": 0}], "commitDateTime": "2016-02-26 08:09:12", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #367 Resolve remaining git.eclipse.org build references\n", "commitParents": ["50422a1a1ffe3aa9b96e79ec98c85eab2349ae49"], "commitHash": "ce5a3b11d65f718ab12491b241e427e47641f438", "commitSpoonAstDiffStats": [{"spoonFilePath": "FileServerXml.java", "spoonMethods": []}, {"spoonFilePath": "ExampleServerXml.java", "spoonMethods": []}], "nameRev": "ce5a3b11d65f718ab12491b241e427e47641f438 tags/jetty-9.3.8.v20160311~42", "commitUser": "jmcc0nn3ll", "authoredDateTime": "2016-02-26 08:03:33", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 6, "filePath": "tests/test-webapps/test-jetty-webapp/src/main/webapp/index.html", "insertions": 3, "deletions": 3}, {"lines": 2, "filePath": "examples/embedded/src/main/java/org/eclipse/jetty/embedded/FileServerXml.java", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "tests/test-webapps/test-servlet-spec/test-spec-webapp/src/main/webapp/index.html", "insertions": 1, "deletions": 1}, {"lines": 3, "filePath": "jetty-server/src/main/config/modules/ssl.mod", "insertions": 1, "deletions": 2}, {"lines": 7, "filePath": "CONTRIBUTING.md", "insertions": 3, "deletions": 4}, {"lines": 2, "filePath": "tests/test-webapps/test-jaas-webapp/src/main/webapp/index.html", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-start/src/test/resources/jetty-version.properties", "insertions": 1, "deletions": 1}, {"lines": 3, "filePath": "jetty-start/src/test/resources/dist-home/modules/ssl.mod", "insertions": 1, "deletions": 2}, {"lines": 2, "filePath": "jetty-start/src/test/resources/assert-home-with-http2.txt", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "aggregates/jetty-websocket-all/pom.xml", "insertions": 1, "deletions": 1}, {"lines": 4, "filePath": "tests/test-webapps/test-jndi-webapp/src/main/webapp/index.html", "insertions": 2, "deletions": 2}, {"lines": 2, "filePath": "jetty-start/src/test/resources/usecases/http2.assert.txt", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "aggregates/jetty-all-compact3/pom.xml", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "examples/embedded/src/main/java/org/eclipse/jetty/embedded/ExampleServerXml.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2016-02-26 08:03:33", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #367 Resolve remaining git.eclipse.org build references\n", "commitParents": ["881edcb6406d9f14a6125abadd58640449e41c79"], "commitHash": "76b34fe79a3c1c870e5696948292d5a012227b2d", "commitSpoonAstDiffStats": [], "nameRev": "76b34fe79a3c1c870e5696948292d5a012227b2d tags/jetty-9.4.0.M0~221", "commitUser": "jmcc0nn3ll", "authoredDateTime": "2016-02-26 07:51:05", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-server/src/main/config/modules/ssl.mod", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-start/src/test/resources/dist-home/modules/ssl.mod", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-start/src/test/resources/assert-home-with-http2.txt", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-start/src/test/resources/usecases/http2.assert.txt", "insertions": 1, "deletions": 1}], "commitDateTime": "2016-02-26 07:51:05", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #367 Resolve remaining git.eclipse.org build references\n", "commitParents": ["b08f177d47d08950ef814f8a6a08450ced7f3c53"], "commitHash": "c74b0c23e951a8a48b5caa73b2e9743331fd353c", "commitSpoonAstDiffStats": [], "nameRev": "c74b0c23e951a8a48b5caa73b2e9743331fd353c tags/jetty-9.3.8.v20160311~19^2~6", "commitUser": "joakime", "authoredDateTime": "2016-02-26 08:03:33", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 4, "filePath": "jetty-server/src/main/config/modules/ssl.mod", "insertions": 0, "deletions": 4}, {"lines": 4, "filePath": "jetty-start/src/test/resources/dist-home/modules/ssl.mod", "insertions": 0, "deletions": 4}, {"lines": 4, "filePath": "tests/test-webapps/test-jndi-webapp/src/main/webapp/index.html", "insertions": 2, "deletions": 2}, {"lines": 4, "filePath": "tests/test-webapps/test-jetty-webapp/src/main/webapp/index.html", "insertions": 2, "deletions": 2}, {"lines": 2, "filePath": "aggregates/jetty-websocket-all/pom.xml", "insertions": 1, "deletions": 1}], "commitDateTime": "2016-02-26 08:11:27", "spoonStatsSkippedReason": ""}], "title": "Build downloads from git.eclipse.org", "spoonStatsSummary": {}, "gitStatsSummary": {"lines": 4, "insertions": 4, "gitFilesChange": 1, "deletions": 0}, "closed": "2016-02-26 14:14:51", "statsSkippedReason": "", "body": "The `jetty-distribution` module appears to download stuff from `git.eclipse.org`, for example:\n\n```\n[INFO] --- exec-maven-plugin:1.2:java (setup demo-base-startd) @ jetty-distribution ---\nINFO: http            initialised in ${jetty.base}/start.d/http.ini\nINFO: ssl             initialised (transitively) in ${jetty.base}/start.d/ssl.ini\nINFO: https           initialised in ${jetty.base}/start.d/https.ini\nINFO: jsp             initialised in ${jetty.base}/start.d/jsp.ini\nINFO: jstl            initialised in ${jetty.base}/start.d/jstl.ini\nDOWNLOAD: http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/plain/jetty-server/src/test/config/etc/keystore?id=master to ${jetty.base}/etc/keystore\nINFO: Base directory was modified\n```\n\nPlease review any `git.eclipse.org` reference and remove it from the build.\n", "changesInPackagesGIT": ["jetty-server/src/main/config/modules/ssl.mod"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/367"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "vaandr", "filteredCommits": ["d53766f6fe0cfa03579c7e0053c9d72e0037df2d"], "commits": {"d53766f6fe0cfa03579c7e0053c9d72e0037df2d": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2016-02-25 10:55:41", "commitsDetails": [{"commitMessage": "Issue #365 (Potential connection leakage in case of aborted request)\n\nFixed by releasing the connection that will not be used to the pool.\n", "commitParents": ["1a1a8dd806a7ea585b1bfd4230c39eec1528de42"], "commitHash": "d53766f6fe0cfa03579c7e0053c9d72e0037df2d", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpRequestAbortTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpRequestAbortTest.testAbortBeforeQueued()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "PoolingHttpDestination.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.PoolingHttpDestination.process(org.eclipse.jetty.client.api.Connection,boolean)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 3, "TOT": 5}]}], "nameRev": "d53766f6fe0cfa03579c7e0053c9d72e0037df2d tags/jetty-9.3.8.v20160311~19^2~4", "commitUser": "sbordet", "authoredDateTime": "2016-03-01 15:18:28", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 28, "filePath": "jetty-client/src/test/java/org/eclipse/jetty/client/HttpRequestAbortTest.java", "insertions": 28, "deletions": 0}, {"lines": 3, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/PoolingHttpDestination.java", "insertions": 3, "deletions": 0}], "commitDateTime": "2016-03-01 15:19:02", "spoonStatsSkippedReason": ""}], "title": "Potential connection leakage in case of aborted request", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0, "INS": 2, "UPD": 0, "MOV": 3, "TOT": 5, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 3, "insertions": 3, "gitFilesChange": 1, "deletions": 0}, "closed": "2016-03-01 14:36:14", "statsSkippedReason": "", "body": "In PoolingHttpDestination:process(final C connection, boolean dispatch) a check is performed to ensure the request was not aborted before being associated with a connection and if it was then the connection is neither released or closed. Might be useful to move the connection release code below in a separate method and use it for both cases - i.e. when there's no exchange or the request was aborted prior to creation of the exchange.\n\n```\npublic void process(final C connection, boolean dispatch)\n    {\n        HttpClient client = getHttpClient();\n        final HttpExchange exchange = getHttpExchanges().poll();\n        if (LOG.isDebugEnabled())\n            LOG.debug(\"Processing exchange {} on {} of {}\", exchange, connection, this);\n        if (exchange == null)\n        {\n            if (!connectionPool.release(connection))\n                connection.close();\n\n            if (!client.isRunning())\n            {\n                if (LOG.isDebugEnabled())\n                    LOG.debug(\"{} is stopping\", client);\n                connection.close();\n            }\n        }\n        else\n        {\n            final Request request = exchange.getRequest();\n            Throwable cause = request.getAbortCause();\n            if (cause != null)\n            {\n                if (LOG.isDebugEnabled())\n                    LOG.debug(\"Aborted before processing {}: {}\", exchange, cause);\n                // It may happen that the request is aborted before the exchange\n                // is created. Aborting the exchange a second time will result in\n                // a no-operation, so we just abort here to cover that edge case.\n                exchange.abort(cause);\n            }\n            else\n            {\n                if (dispatch)\n                {\n                    client.getExecutor().execute(new Runnable()\n                    {\n                        @Override\n                        public void run()\n                        {\n                            send(connection, exchange);\n                        }\n                    });\n                }\n                else\n                {\n                    send(connection, exchange);\n                }\n            }\n        }\n    }\n```\n", "changesInPackagesGIT": ["jetty-client/src/main/java/org/eclipse/jetty/client"], "changesInPackagesSPOON": ["org.eclipse.jetty.client.PoolingHttpDestination.process(org.eclipse.jetty.client.api.Connection,boolean)"], "ttf": 5.000277777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/365"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "ofrias", "filteredCommits": ["7e7b126847dd09804b5d042d582e97ad692163b7"], "commits": {"7e7b126847dd09804b5d042d582e97ad692163b7": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2016-02-24 19:06:18", "commitsDetails": [{"commitMessage": "Issue #362 (Very slow page load and missing resources when using HTTP/2 with Jetty 9.3.7)\n\nThe issue happened when the selector was both read ready and write\nready. In that case fillable() was called before completeWrite(),\ncausing the reader thread to read, parse, call the application which\nperformed a blocking write, thus never returning to call\ncompleteWrite().\n\nInverting the calls (first completeWrite() then fillable()) solves\nthe issue because completeWrite() never calls application code.\n", "commitParents": ["a8bbe8749f44f0e561947d64f7ee42281371d9ac"], "commitHash": "7e7b126847dd09804b5d042d582e97ad692163b7", "commitSpoonAstDiffStats": [{"spoonFilePath": "SelectChannelEndPoint.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.io.SelectChannelEndPoint.4.run()", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}]}], "nameRev": "7e7b126847dd09804b5d042d582e97ad692163b7 tags/jetty-9.3.8.v20160311~38^2~2", "commitUser": "sbordet", "authoredDateTime": "2016-03-01 22:08:02", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 10, "filePath": "jetty-io/src/main/java/org/eclipse/jetty/io/SelectChannelEndPoint.java", "insertions": 5, "deletions": 5}], "commitDateTime": "2016-03-01 22:08:02", "spoonStatsSkippedReason": ""}], "title": "Very slow page load and missing resources when using HTTP/2 with Jetty 9.3.7", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 10, "insertions": 5, "gitFilesChange": 1, "deletions": 5}, "closed": "2016-03-01 21:14:42", "statsSkippedReason": "", "body": "We have found an issue when remotely loading pages using HTTP/2 in Jetty.  The page takes tens of seconds to load, and when it finishes it usually is missing resources (CSS and/or images).\n\nThe issue is quite frequent, you can reproduce it by opening a new window to the test page which is just plain HTML with several img tags.  It happens after just a few tries, usually less than 10.  It looks like it is more frequent in pages with many images.\n\nYou can reproduce the issue with 2 remote computers with this setup:\n\nServer running:\n- Jetty 9.3.7\n- JDK 1.8.0_66\n\nRemote client:\n- Firefox 44.0.2 for example (also happens with Chrome)\n\nIt is very important to run the client remotely, not from the same computer.  The issue is not present when the client is local.  We have reproduced it through different networks and with different computers, but not locally.\n\nWe assume that Jetty is installed in /usr/local/jetty/ and Java in /usr/local/java8/\n\nSteps to reproduce:\n\n1) Prepare the server computer:\n\n```\nmkdir ~/jettytest/\ncd ~/jettytest/\nmkdir webapps\ncp -a /usr/local/jetty/demo-base/webapps/ROOT webapps/mytest\nemacs webapps/mytest/index.html\n```\n\nEdit the file adding these lines after `<h1>Welcome to Jetty 9</h1>`  :\n\n```\n    <img src=\"images/jetty-header2.jpg\"/>\n    <img src=\"images/jetty-header3.jpg\"/>\n    <img src=\"images/jetty-header4.jpg\"/>\n    <img src=\"images/jetty-header5.jpg\"/>\n    <img src=\"images/jetty-header6.jpg\"/>\n    <img src=\"images/jetty-header7.jpg\"/>\n    <img src=\"images/jetty-header8.jpg\"/>\n    <img src=\"images/jetty-header9.jpg\"/>\n    <img src=\"images/jetty-header10.jpg\"/>\n    <img src=\"images/jetty-header11.jpg\"/>\n    <img src=\"images/jetty-header12.jpg\"/>\n```\n\nCopy all the new images:\n\n```\ncp webapps/mytest/images/jetty-header.jpg webapps/mytest/images/jetty-header2.jpg\ncp webapps/mytest/images/jetty-header.jpg webapps/mytest/images/jetty-header3.jpg\ncp webapps/mytest/images/jetty-header.jpg webapps/mytest/images/jetty-header4.jpg\ncp webapps/mytest/images/jetty-header.jpg webapps/mytest/images/jetty-header5.jpg\ncp webapps/mytest/images/jetty-header.jpg webapps/mytest/images/jetty-header6.jpg\ncp webapps/mytest/images/jetty-header.jpg webapps/mytest/images/jetty-header7.jpg\ncp webapps/mytest/images/jetty-header.jpg webapps/mytest/images/jetty-header8.jpg\ncp webapps/mytest/images/jetty-header.jpg webapps/mytest/images/jetty-header9.jpg\ncp webapps/mytest/images/jetty-header.jpg webapps/mytest/images/jetty-header10.jpg\ncp webapps/mytest/images/jetty-header.jpg webapps/mytest/images/jetty-header11.jpg\ncp webapps/mytest/images/jetty-header.jpg webapps/mytest/images/jetty-header12.jpg\n\n```\n\nPrepare Jetty:\n\n`/usr/local/java8/bin/java -jar /usr/local/jetty/start.jar --module=server --module=deploy --module=http2 --create-files`\n\nExecute Jetty:\n\n`/usr/local/java8/bin/java -jar /usr/local/jetty/start.jar --module=server --module=deploy --module=http2`\n\n2) Now, from the client computer:\n\n2.1) Open Firefox.\n\n2.2) Open a \"Private Window\" pointing to: `https://<SERVER_IP>:8443/mytest/`\n\n2.3) If page loads normally, close the Private Window and go to 2.2.  It is very important to close the previous Private Window to force the HTTP/2 connection close.\n\nYou should be able to reproduce the issue in just a few tries.\n\nIn the server this Exception is logged several times (pointing to the CSS and/or to the images):\n\n```\n2016-02-24 19:21:24.133:WARN:oejs.HttpChannel:qtp1896277646-16: https://<SERVER_IP>:8443/mytest/images/jetty-header6.jpg\njava.nio.channels.ClosedChannelException\n    at org.eclipse.jetty.util.IteratingCallback.close(IteratingCallback.java:427)\n    at org.eclipse.jetty.http2.HTTP2Session.terminate(HTTP2Session.java:910)\n    at org.eclipse.jetty.http2.HTTP2Session.abort(HTTP2Session.java:929)\n    at org.eclipse.jetty.http2.HTTP2Session.onIdleTimeout(HTTP2Session.java:874)\n    at org.eclipse.jetty.http2.HTTP2Connection.onIdleExpired(HTTP2Connection.java:118)\n    at org.eclipse.jetty.io.ssl.SslConnection.onIdleExpired(SslConnection.java:176)\n    at org.eclipse.jetty.io.AbstractEndPoint.onIdleExpired(AbstractEndPoint.java:162)\n    at org.eclipse.jetty.io.IdleTimeout.checkIdleTimeout(IdleTimeout.java:166)\n    at org.eclipse.jetty.io.IdleTimeout$1.run(IdleTimeout.java:50)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n2016-02-24 19:21:24.134:WARN:oejs.HttpChannel:qtp1896277646-29: https://<SERVER_IP>:8443/mytest/jetty.css\njava.nio.channels.ClosedChannelException\n    at org.eclipse.jetty.util.IteratingCallback.close(IteratingCallback.java:427)\n    at org.eclipse.jetty.http2.HTTP2Session.terminate(HTTP2Session.java:910)\n    at org.eclipse.jetty.http2.HTTP2Session.abort(HTTP2Session.java:929)\n    at org.eclipse.jetty.http2.HTTP2Session.onIdleTimeout(HTTP2Session.java:874)\n    at org.eclipse.jetty.http2.HTTP2Connection.onIdleExpired(HTTP2Connection.java:118)\n    at org.eclipse.jetty.io.ssl.SslConnection.onIdleExpired(SslConnection.java:176)\n    at org.eclipse.jetty.io.AbstractEndPoint.onIdleExpired(AbstractEndPoint.java:162)\n    at org.eclipse.jetty.io.IdleTimeout.checkIdleTimeout(IdleTimeout.java:166)\n    at org.eclipse.jetty.io.IdleTimeout$1.run(IdleTimeout.java:50)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n\n\n```\n\nI add more information in case it could help to find the route cause of the issue...  We initially detected the issue in a [Jetty setup with HAProxy](http://www.eclipse.org/jetty/documentation/current/http2-configuring-haproxy.html).  In our setup we have 2 servers, one with HAProxy + Jetty, and the other one just with Jetty.  The ping between them is just about 0.2 ms.  We detected the issue in the HTTP/2 requests sent by HAProxy to the other server.  The requests that were served in the same server did not experience the issue.  We tried moving HAProxy to the other server and then the Jetty with the issue was the other one.  So the issue only arises when there is a network involved.  Although in this setup the only network causing the problem was the one between HAProxy and Jetty.  If the connection between HAProxy and Jetty was local there was no problem, even if the browser was remote.\n", "changesInPackagesGIT": ["jetty-io/src/main/java/org/eclipse/jetty/io"], "changesInPackagesSPOON": ["org.eclipse.jetty.io.SelectChannelEndPoint.4.run()"], "ttf": 6.000277777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/362"}, {"labels": ["Bug"], "closed": "2017-03-01 14:56:05", "body": "Running org.eclipse.jetty.websocket.client.SessionTest\nTests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.076 sec <<< FAILURE! - in org.eclipse.jetty.websocket.client.SessionTest\ntestBasicEcho_FromClient(org.eclipse.jetty.websocket.client.SessionTest)  Time elapsed: 0.075 sec  <<< FAILURE!\njava.lang.AssertionError: (After Close) Open Sessions.size\nExpected: is <0>\n     but: was <1>\n    at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\n    at org.junit.Assert.assertThat(Assert.java:956)\n    at org.eclipse.jetty.websocket.client.SessionTest.testBasicEcho_FromClient(SessionTest.java:107)\n", "commits": {}, "title": "Websocket Client test failure in 9.3.x", "created": "2016-02-24 08:49:08", "user": "gregw", "url": "https://github.com/eclipse/jetty.project/issues/358", "commitsDetails": [], "ttf": 371.0002777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug", "Help Wanted"], "user": "sbordet", "filteredCommits": ["3e1082e122acdbc7258bc6111f8e87982433f4f6"], "commits": {"9e75fa1fb94b14db19d505e60ca2d7a59ad0f27f": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "3e1082e122acdbc7258bc6111f8e87982433f4f6": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2016-02-23 15:31:25", "commitsDetails": [{"commitMessage": "Merge pull request #394 from mehtabsinghmann/master\n\nIssue #356 (Element error-page/location must start with a '/')", "commitParents": ["bede684cacf16615cc34f95faeb04bd6c4fb9853", "23bbbaf8c1d7f524f7a3b1084fbc58d22937a7cc"], "commitHash": "9e75fa1fb94b14db19d505e60ca2d7a59ad0f27f", "commitSpoonAstDiffStats": [{"spoonFilePath": "StandardDescriptorProcessor.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.StandardDescriptorProcessor.visitErrorPage(org.eclipse.jetty.webapp.WebAppContext,org.eclipse.jetty.webapp.Descriptor,org.eclipse.jetty.xml.XmlParser$Node)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "9e75fa1fb94b14db19d505e60ca2d7a59ad0f27f tags/jetty-9.4.0.M0~202", "commitUser": "sbordet", "authoredDateTime": "2016-03-04 15:45:23", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-webapp/src/main/java/org/eclipse/jetty/webapp/StandardDescriptorProcessor.java", "insertions": 2, "deletions": 0}], "commitDateTime": "2016-03-04 15:45:23", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #356 (Element error-page/location must start with a '/')\n\nSigned-off-by: Mehtab Singh Mann <mehtabsinghmann@gmail.com>\n", "commitParents": ["311c7466b064af4c905c81851c6c5287bc48cc3f"], "commitHash": "3e1082e122acdbc7258bc6111f8e87982433f4f6", "commitSpoonAstDiffStats": [{"spoonFilePath": "StandardDescriptorProcessor.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.webapp.StandardDescriptorProcessor.visitErrorPage(org.eclipse.jetty.webapp.WebAppContext,org.eclipse.jetty.webapp.Descriptor,org.eclipse.jetty.xml.XmlParser$Node)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "3e1082e122acdbc7258bc6111f8e87982433f4f6 tags/jetty-9.3.8.v20160311~34", "commitUser": "sbordet", "authoredDateTime": "2016-03-04 19:00:44", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-webapp/src/main/java/org/eclipse/jetty/webapp/StandardDescriptorProcessor.java", "insertions": 2, "deletions": 0}], "commitDateTime": "2016-03-04 15:49:48", "spoonStatsSkippedReason": ""}], "title": "Element error-page/location must start with a '/'", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 2, "insertions": 2, "gitFilesChange": 1, "deletions": 0}, "closed": "2016-03-04 14:53:42", "statsSkippedReason": "", "body": "See the Servlet specification, section 14.4.15.\n\nApparently, we accept an empty string, see `StandardDescriptorProcessor.visitErrorPage()`.\n", "changesInPackagesGIT": ["jetty-webapp/src/main/java/org/eclipse/jetty/webapp"], "changesInPackagesSPOON": ["org.eclipse.jetty.webapp.StandardDescriptorProcessor.visitErrorPage(org.eclipse.jetty.webapp.WebAppContext,org.eclipse.jetty.webapp.Descriptor,org.eclipse.jetty.xml.XmlParser$Node)"], "ttf": 9.000277777777777, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/356"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "sbordet", "filteredCommits": ["1eeecdaee515daf4e4fdf41e80d2b61678ba537d"], "commits": {"1eeecdaee515daf4e4fdf41e80d2b61678ba537d": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2016-02-23 14:02:45", "commitsDetails": [{"commitMessage": "Issue #355 Improve close behaviour\n\nInverted the logic of the handling of exceptions thrown in CommitCallback.\nNow only if a BadMessageException is throw do we attempt to write a 500 response.\nAll other exceptions just abort the connection\n", "commitParents": ["c3a54e9d0bbb5c9d3014abf9d43f348698ed5049"], "commitHash": "1eeecdaee515daf4e4fdf41e80d2b61678ba537d", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpChannel.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannel.CommitCallback.failed(java.lang.Throwable)", "DEL": 3, "INS": 3, "UPD": 2, "MOV": 5, "TOT": 13}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannel.CommitCallback.failed(java.lang.Throwable).1.failed(java.lang.Throwable)", "DEL": 1, "INS": 1, "UPD": 1, "MOV": 1, "TOT": 4}]}, {"spoonFilePath": "HttpGenerator.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.HttpGenerator.generateResponse(org.eclipse.jetty.http.MetaData$Response,boolean,java.nio.ByteBuffer,java.nio.ByteBuffer,java.nio.ByteBuffer,boolean)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.http.HttpGenerator.generateHeaders(org.eclipse.jetty.http.MetaData,java.nio.ByteBuffer,java.nio.ByteBuffer,boolean)", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.http.HttpGenerator.generateRequest(org.eclipse.jetty.http.MetaData$Request,java.nio.ByteBuffer,java.nio.ByteBuffer,java.nio.ByteBuffer,boolean)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "BadMessageException.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.BadMessageException", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "1eeecdaee515daf4e4fdf41e80d2b61678ba537d tags/jetty-9.3.8.RC0~2", "commitUser": "gregw", "authoredDateTime": "2016-02-24 13:36:06", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 14, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/HttpGenerator.java", "insertions": 7, "deletions": 7}, {"lines": 14, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannel.java", "insertions": 7, "deletions": 7}, {"lines": 6, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/BadMessageException.java", "insertions": 6, "deletions": 0}], "commitDateTime": "2016-02-24 13:36:06", "spoonStatsSkippedReason": ""}], "title": "Improve close behavior for failed pending writes", "spoonStatsSummary": {"spoonMethodsChanged": 6, "DEL": 4, "INS": 5, "UPD": 10, "MOV": 6, "TOT": 25, "spoonFilesChanged": 3}, "gitStatsSummary": {"lines": 34, "insertions": 20, "gitFilesChange": 3, "deletions": 14}, "closed": "2018-05-10 22:30:08", "statsSkippedReason": "", "body": "When a write is pending, and the callback is failed, we have this stack trace:\n\n```\n\"qtp1321203216-579\" #579 prio=5 os_prio=0 tid=0x00007ff48c012800 nid=0x635 waiting on condition [0x00007ff2d423e000]\n   java.lang.Thread.State: WAITING (parking)\n    at sun.misc.Unsafe.park(Native Method)\n    - parking to wait for  <0x00000006fd24d518> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\n    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)\n    at org.eclipse.jetty.util.SharedBlockingCallback$Blocker.block(SharedBlockingCallback.java:210)\n    at org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:164)\n    at org.eclipse.jetty.server.HttpOutput.close(HttpOutput.java:211)\n    at org.eclipse.jetty.server.Response.closeOutput(Response.java:987)\n    at org.eclipse.jetty.server.HttpOutput.closed(HttpOutput.java:256)\n    at org.eclipse.jetty.server.HttpChannel$CommitCallback.failed(HttpChannel.java:791)\n    at org.eclipse.jetty.io.AbstractConnection.failedCallback(AbstractConnection.java:91)\n    at org.eclipse.jetty.server.HttpConnection.access$1200(HttpConnection.java:50)\n    at org.eclipse.jetty.server.HttpConnection$SendCallback.onCompleteFailure(HttpConnection.java:799)\n    at org.eclipse.jetty.util.IteratingCallback.failed(IteratingCallback.java:401)\n    at org.eclipse.jetty.io.WriteFlusher$PendingState.fail(WriteFlusher.java:260)\n    at org.eclipse.jetty.io.WriteFlusher.completeWrite(WriteFlusher.java:401)\n    at org.eclipse.jetty.io.SelectChannelEndPoint$3.run(SelectChannelEndPoint.java:89)\n    at org.eclipse.jetty.io.SelectChannelEndPoint.onSelected(SelectChannelEndPoint.java:177)\n    at org.eclipse.jetty.io.ManagedSelector$SelectorProducer.processSelected(ManagedSelector.java:272)\n    at org.eclipse.jetty.io.ManagedSelector$SelectorProducer.produce(ManagedSelector.java:170)\n    at org.eclipse.jetty.util.thread.strategy.ProduceExecuteConsume.execute(ProduceExecuteConsume.java:50)\n    at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:143)\n```\n\nThe stack trace shows that `WriteFlusher$PendingState.fail()` is called, so there was a write which got congested and when the callback fails we should not try to write more via `HttpOutput.closed()` because we know that the previous write was already congested.\n\nWe should just hard close the connection.\n", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server", "jetty-http/src/main/java/org/eclipse/jetty/http"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.HttpChannel.CommitCallback.failed(java.lang.Throwable)", "org.eclipse.jetty.http.HttpGenerator.generateHeaders(org.eclipse.jetty.http.MetaData,java.nio.ByteBuffer,java.nio.ByteBuffer,boolean)", "org.eclipse.jetty.http.HttpGenerator.generateResponse(org.eclipse.jetty.http.MetaData$Response,boolean,java.nio.ByteBuffer,java.nio.ByteBuffer,java.nio.ByteBuffer,boolean)", "org.eclipse.jetty.server.HttpChannel.CommitCallback.failed(java.lang.Throwable).1.failed(java.lang.Throwable)", "org.eclipse.jetty.http.BadMessageException", "org.eclipse.jetty.http.HttpGenerator.generateRequest(org.eclipse.jetty.http.MetaData$Request,java.nio.ByteBuffer,java.nio.ByteBuffer,java.nio.ByteBuffer,boolean)"], "ttf": 807.0002777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/355"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "sbordet", "filteredCommits": ["ff1bfa599fd317d2e3f389564acd4a0ec6630b36"], "commits": {"ff1bfa599fd317d2e3f389564acd4a0ec6630b36": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "76689dd303b67052899fa060f5f7a135139952a3": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2016-02-23 09:55:21", "commitsDetails": [{"commitMessage": "Issue #354 (Spin loop in case of exception thrown during accept()).\n\nImproved the solution by sleeping only if we are still accepting.\nThis avoids the sleep when the connector is stopping, speeding up tests.\n", "commitParents": ["79e5c31029066adcc92d0b27a62fbdf72a517df8"], "commitHash": "ff1bfa599fd317d2e3f389564acd4a0ec6630b36", "commitSpoonAstDiffStats": [{"spoonFilePath": "AbstractConnector.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.AbstractConnector.handleAcceptFailure(java.lang.Throwable,java.lang.Throwable)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}], "nameRev": "ff1bfa599fd317d2e3f389564acd4a0ec6630b36 tags/jetty-9.3.10.M0~28", "commitUser": "sbordet", "authoredDateTime": "2016-05-19 11:48:24", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 24, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/AbstractConnector.java", "insertions": 12, "deletions": 12}], "commitDateTime": "2016-05-19 11:48:51", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #354 (Spin loop in case of exception thrown during accept()).\n\nFixed by introducing an overridable method that performs an arbitrary\nsleep to avoid the spin loop. Subclasses may customize.\n", "commitParents": ["ef6d0194b9d3af44176b6d1488be158d5f9efc3f"], "commitHash": "76689dd303b67052899fa060f5f7a135139952a3", "commitSpoonAstDiffStats": [{"spoonFilePath": "ServerConnectorTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ServerConnectorTest.testExceptionWhileAccepting()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AbstractConnector.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.AbstractConnector.Acceptor.run()", "DEL": 2, "INS": 4, "UPD": 2, "MOV": 2, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.server.AbstractConnector.handleAcceptFailure(java.lang.Throwable,java.lang.Throwable)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "76689dd303b67052899fa060f5f7a135139952a3 tags/jetty-9.3.8.RC0~5", "commitUser": "sbordet", "authoredDateTime": "2016-02-23 11:36:39", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 38, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/AbstractConnector.java", "insertions": 34, "deletions": 4}, {"lines": 30, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ServerConnectorTest.java", "insertions": 30, "deletions": 0}], "commitDateTime": "2016-02-23 11:37:08", "spoonStatsSkippedReason": ""}], "title": "Spin loop in case of exception thrown during accept()", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 24, "insertions": 12, "gitFilesChange": 1, "deletions": 12}, "closed": "2016-02-23 12:36:49", "statsSkippedReason": "", "body": "`ServerConnector.accept(int)` may thrown an exception (typical case could be \"Too many open files\").\n\nIf this happens, the current code catches the exception, logs it and tries to call `accept()` again potentially resulting in a spin loop.\n", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.AbstractConnector.handleAcceptFailure(java.lang.Throwable,java.lang.Throwable)"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/354"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "artur-c", "filteredCommits": ["a8bbe8749f44f0e561947d64f7ee42281371d9ac"], "commits": {"a8bbe8749f44f0e561947d64f7ee42281371d9ac": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "a4686bc6a4364910d250c4ce6b175cfea41a3844": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2016-02-22 15:33:35", "commitsDetails": [{"commitMessage": "Issue #353 (Jetty Client doesn't forward authentication headers with redirects when using proxy)\n\nAdded test case, but code seems already good.\n", "commitParents": ["24a203f9760bdc280814042dace4f4c446db8b13"], "commitHash": "a8bbe8749f44f0e561947d64f7ee42281371d9ac", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpClientProxyTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpClientProxyTest.testAuthenticatedProxiedRequestWithRedirect()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "a8bbe8749f44f0e561947d64f7ee42281371d9ac tags/jetty-9.3.8.v20160311~38^2~3", "commitUser": "sbordet", "authoredDateTime": "2016-03-01 16:31:40", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 97, "filePath": "jetty-client/src/test/java/org/eclipse/jetty/client/HttpClientProxyTest.java", "insertions": 97, "deletions": 0}], "commitDateTime": "2016-03-01 16:31:40", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #353 (Jetty Client doesn't forward authentication headers with redirects when using proxy)\n\nFixed by making sure that URI matches take into account default HTTP\nports.\n", "commitParents": ["d53766f6fe0cfa03579c7e0053c9d72e0037df2d"], "commitHash": "a4686bc6a4364910d250c4ce6b175cfea41a3844", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpAuthenticationStoreTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpAuthenticationStoreTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AbstractAuthentication.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.util.AbstractAuthentication", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpClient.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpClient.destinationFor(java.lang.String,java.lang.String,int)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.HttpClient.normalizePort(java.lang.String,int)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "DigestAuthentication.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.util.DigestAuthentication.DigestResult.getURI()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.client.util.DigestAuthentication", "DEL": 4, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.client.util.DigestAuthentication.authenticate(org.eclipse.jetty.client.api.Request,org.eclipse.jetty.client.api.ContentResponse,org.eclipse.jetty.client.util.HeaderInfo,org.eclipse.jetty.util.Attributes)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.util.DigestAuthentication.DigestResult", "DEL": 3, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.client.util.DigestAuthentication.matches(java.lang.String,java.net.URI,java.lang.String)", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 2, "TOT": 5}]}, {"spoonFilePath": "BasicAuthentication.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.util.BasicAuthentication", "DEL": 4, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.client.util.BasicAuthentication.matches(java.lang.String,java.net.URI,java.lang.String)", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 2, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.client.util.BasicAuthentication.BasicResult.toString()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.client.util.BasicAuthentication.BasicResult", "DEL": 4, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.client.util.BasicAuthentication.BasicResult.getURI()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.client.util.BasicAuthentication.authenticate(org.eclipse.jetty.client.api.Request,org.eclipse.jetty.client.api.ContentResponse,org.eclipse.jetty.client.util.HeaderInfo,org.eclipse.jetty.util.Attributes)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpAuthenticationStore.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpAuthenticationStore.findAuthenticationResult(java.net.URI)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 4}]}, {"spoonFilePath": "HttpRequest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpRequest", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}]}], "nameRev": "a4686bc6a4364910d250c4ce6b175cfea41a3844 tags/jetty-9.3.8.v20160311~19^2~3", "commitUser": "sbordet", "authoredDateTime": "2016-03-05 13:29:31", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpRequest.java", "insertions": 1, "deletions": 1}, {"lines": 100, "filePath": "jetty-client/src/test/java/org/eclipse/jetty/client/HttpAuthenticationStoreTest.java", "insertions": 100, "deletions": 0}, {"lines": 29, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/util/DigestAuthentication.java", "insertions": 9, "deletions": 20}, {"lines": 32, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/util/BasicAuthentication.java", "insertions": 11, "deletions": 21}, {"lines": 3, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpAuthenticationStore.java", "insertions": 2, "deletions": 1}, {"lines": 2, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpClient.java", "insertions": 1, "deletions": 1}, {"lines": 80, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/util/AbstractAuthentication.java", "insertions": 80, "deletions": 0}], "commitDateTime": "2016-03-05 13:29:31", "spoonStatsSkippedReason": ""}], "title": "Jetty Client doesn't forward authentication headers with redirects when using proxy", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0, "insertions": 0, "gitFilesChange": 0, "deletions": 0}, "closed": "2016-03-05 14:00:44", "statsSkippedReason": "", "body": "Jetty Client 9.3.7.v20160115 doesn't send authentication headers when a target site responds with 302 HTTP code. \nTo be precise, the communication scheme is as follows:\n- a jetty client sends http request\n- a proxy responds with authorization required header\n- the jetty client sends the request to the proxy with authorization header\n- proxy sends the request further\n- the target server responds with 302 HTTP code\n- the jetty client understands 302 HTTP code and executes sendRedirect() method, which calls copyRequest(), which removes authentication headers\n\nPS. In Jetty 8.1.17.v20150415 it worked perfectly.\n", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 11.000277777777777, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/353"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 2, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 2}, "labels": ["Bug"], "user": "sbordet", "filteredCommits": ["1d04b9ece0ed15a2249a590f06c79028148c9772"], "commits": {"4606c773b102833b816dfd923c5713cea4b6a4ca": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "1d04b9ece0ed15a2249a590f06c79028148c9772": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "ce4fad3deb283b8cad19f574beae62f19a250c24": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "48c4e08b94856cdf6fe4efc4ca4c45cce42e75c8": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "eaa4c70cfcc68b38faba32b2dd01ceef165bef17": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2016-02-19 10:33:23", "commitsDetails": [{"commitMessage": "Issue #2065 - Backport #347 to Jetty 9.2.x.\n\nFixed the mistake of resetting idleTimeoutStamp rather than\nidleTimeoutGuard.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["2dd970b055b04926a2b5f9e729b4bd9590ff161a"], "commitHash": "4606c773b102833b816dfd923c5713cea4b6a4ca", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpConnectionOverHTTP.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.http.HttpConnectionOverHTTP.onReadTimeout()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "4606c773b102833b816dfd923c5713cea4b6a4ca tags/jetty-9.2.24.v20180105~1", "commitUser": "sbordet", "authoredDateTime": "2018-01-05 10:45:40", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/http/HttpConnectionOverHTTP.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2018-01-05 10:47:39", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #347 (Avoid sending request using a connection that is idle timing out).\n\nCan't make atomic decisions using AtomicInteger _and_ another field.\nNow using synchronized.\n", "commitParents": ["27585d923c6f464dc57df20a1b8ea40fb2ad2707"], "commitHash": "1d04b9ece0ed15a2249a590f06c79028148c9772", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpConnection.send(org.eclipse.jetty.client.HttpChannel,org.eclipse.jetty.client.HttpExchange)", "DEL": 5, "INS": 3, "UPD": 0, "MOV": 4, "TOT": 12}, {"spoonMethodName": "org.eclipse.jetty.client.HttpConnection.onIdleTimeout(long)", "DEL": 1, "INS": 3, "UPD": 0, "MOV": 3, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.client.HttpConnection", "DEL": 2, "INS": 1, "UPD": 1, "MOV": 2, "TOT": 6}]}], "nameRev": "1d04b9ece0ed15a2249a590f06c79028148c9772 tags/jetty-9.3.8.RC0~12", "commitUser": "sbordet", "authoredDateTime": "2016-02-19 12:22:04", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 59, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpConnection.java", "insertions": 32, "deletions": 27}], "commitDateTime": "2016-02-19 12:22:13", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #2065 - Backport #347 to Jetty 9.2.x.\n", "commitParents": ["e449387158f9cb5758e6aa03f290b1c917818e7e"], "commitHash": "ce4fad3deb283b8cad19f574beae62f19a250c24", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpConnectionOverHTTP.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.http.HttpConnectionOverHTTP", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.http.HttpConnectionOverHTTP.Delegate.send(org.eclipse.jetty.client.HttpExchange)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.client.http.HttpConnectionOverHTTP.send(org.eclipse.jetty.client.http.HttpChannelOverHTTP,org.eclipse.jetty.client.HttpExchange)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.http.HttpConnectionOverHTTP.onReadTimeout()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 3, "TOT": 4}]}, {"spoonFilePath": "HttpClientTimeoutTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpClientTimeoutTest.testIdleTimeoutJustBeforeSendingRequest()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.HttpClientTimeoutTest.testTimeoutCancelledWhenSendingThrowsException()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.HttpClientTimeoutTest.TimeoutHandler", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.HttpClientTimeoutTest.assumeConnectTimeout(java.lang.String,int,int)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpDestination.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpDestination.send(org.eclipse.jetty.client.HttpRequest,java.util.List)", "DEL": 0, "INS": 1, "UPD": 2, "MOV": 8, "TOT": 11}, {"spoonMethodName": "org.eclipse.jetty.client.HttpDestination.send(org.eclipse.jetty.client.HttpExchange)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}]}], "nameRev": "ce4fad3deb283b8cad19f574beae62f19a250c24 tags/jetty-9.2.23.v20171218~2", "commitUser": "sbordet", "authoredDateTime": "2017-12-15 17:48:47", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 60, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/http/HttpConnectionOverHTTP.java", "insertions": 52, "deletions": 8}, {"lines": 7, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpDestination.java", "insertions": 5, "deletions": 2}, {"lines": 70, "filePath": "jetty-client/src/test/java/org/eclipse/jetty/client/HttpClientTimeoutTest.java", "insertions": 67, "deletions": 3}], "commitDateTime": "2017-12-15 17:48:47", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #347 (Avoid sending request using a connection that is idle timing out).\n\nFixed by improving the guard with a timestamp, and checking that the\ntime elapsed from the last timestamp is enough to prove it is a real\nidle timeout.\n", "commitParents": ["1cce6fd69f95c4c281540c82a4ec79d3375d221c"], "commitHash": "48c4e08b94856cdf6fe4efc4ca4c45cce42e75c8", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpConnectionOverFCGI.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.fcgi.client.http.HttpConnectionOverFCGI.onIdleExpired()", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 1, "TOT": 4}]}, {"spoonFilePath": "HttpConnectionOverHTTP.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.http.HttpConnectionOverHTTP.onIdleExpired()", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 1, "TOT": 4}]}, {"spoonFilePath": "HttpConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpConnection.send(org.eclipse.jetty.client.HttpChannel,org.eclipse.jetty.client.HttpExchange)", "DEL": 0, "INS": 1, "UPD": 3, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.client.HttpConnection.onIdleTimeout(long)", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.client.HttpConnection.onIdleTimeout()", "DEL": 3, "INS": 0, "UPD": 1, "MOV": 4, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.client.HttpConnection", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "HttpReceiverOverHTTPTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.http.HttpReceiverOverHTTPTest.test_Receive_ResponseContent_IdleTimeout()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpClientTransportOverHTTP2.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.client.http.HttpClientTransportOverHTTP2.SessionListenerPromise.onIdleTimeout(org.eclipse.jetty.http2.api.Session)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "48c4e08b94856cdf6fe4efc4ca4c45cce42e75c8 tags/jetty-9.3.8.RC0~15", "commitUser": "sbordet", "authoredDateTime": "2016-02-19 11:35:39", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 5, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/http/HttpConnectionOverHTTP.java", "insertions": 3, "deletions": 2}, {"lines": 5, "filePath": "jetty-fcgi/fcgi-client/src/main/java/org/eclipse/jetty/fcgi/client/http/HttpConnectionOverFCGI.java", "insertions": 3, "deletions": 2}, {"lines": 3, "filePath": "jetty-http2/http2-http-client-transport/src/main/java/org/eclipse/jetty/http2/client/http/HttpClientTransportOverHTTP2.java", "insertions": 2, "deletions": 1}, {"lines": 4, "filePath": "jetty-client/src/test/java/org/eclipse/jetty/client/http/HttpReceiverOverHTTPTest.java", "insertions": 3, "deletions": 1}, {"lines": 30, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpConnection.java", "insertions": 22, "deletions": 8}], "commitDateTime": "2016-02-19 11:36:06", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #2065 - Backport #347 to Jetty 9.2.x.\n\nImplemented as integer guard + timestamp.\nThe timestamp is not enough to guard against long times spent sending\n(and/or in application callbacks during sends).\n", "commitParents": ["ce4fad3deb283b8cad19f574beae62f19a250c24"], "commitHash": "eaa4c70cfcc68b38faba32b2dd01ceef165bef17", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpConnectionOverHTTP.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.http.HttpConnectionOverHTTP", "DEL": 1, "INS": 1, "UPD": 2, "MOV": 1, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.client.http.HttpConnectionOverHTTP.onReadTimeout()", "DEL": 4, "INS": 5, "UPD": 3, "MOV": 9, "TOT": 21}, {"spoonMethodName": "org.eclipse.jetty.client.http.HttpConnectionOverHTTP.send(org.eclipse.jetty.client.http.HttpChannelOverHTTP,org.eclipse.jetty.client.HttpExchange)", "DEL": 2, "INS": 3, "UPD": 3, "MOV": 6, "TOT": 14}]}, {"spoonFilePath": "HttpClientTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpClientTest.test_QueuedRequest_IsSent_WhenPreviousRequestClosedConnection().15", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.HttpClientTest.test_QueuedRequest_IsSent_WhenPreviousRequestClosedConnection().16", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.client.HttpClientTest.test_QueuedRequest_IsSent_WhenPreviousRequestClosedConnection().16.onBegin(org.eclipse.jetty.client.api.Request)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 4, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.client.HttpClientTest.test_QueuedRequest_IsSent_WhenPreviousRequestClosedConnection()", "DEL": 6, "INS": 4, "UPD": 2, "MOV": 6, "TOT": 18}, {"spoonMethodName": "org.eclipse.jetty.client.HttpClientTest.test_QueuedRequest_IsSent_WhenPreviousRequestClosedConnection().16.onFailure(org.eclipse.jetty.client.api.Request,java.lang.Throwable)", "DEL": 0, "INS": 0, "UPD": 4, "MOV": 3, "TOT": 7}]}], "nameRev": "eaa4c70cfcc68b38faba32b2dd01ceef165bef17 tags/jetty-9.2.23.v20171218~1", "commitUser": "sbordet", "authoredDateTime": "2017-12-16 22:25:59", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 42, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/http/HttpConnectionOverHTTP.java", "insertions": 23, "deletions": 19}, {"lines": 39, "filePath": "jetty-client/src/test/java/org/eclipse/jetty/client/HttpClientTest.java", "insertions": 13, "deletions": 26}], "commitDateTime": "2017-12-16 22:25:59", "spoonStatsSkippedReason": ""}], "title": "Avoid sending request using a connection that is idle timing out", "spoonStatsSummary": {"spoonMethodsChanged": 3, "DEL": 8, "INS": 7, "UPD": 1, "MOV": 9, "TOT": 25, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 59, "insertions": 32, "gitFilesChange": 1, "deletions": 27}, "closed": "2016-02-19 11:23:17", "statsSkippedReason": "", "body": "This is a follow up to BugZilla [484585](https://bugs.eclipse.org/bugs/show_bug.cgi?id=484585).\n\nIt is still possible that a request is sent while the connection is timing out.\nThe reason is that the scheduler thread may decide to call `onIdleExpired()` just before `notIdle()` is called. This race is unavoidable in `IdleTimeout`.\n\nIn `HttpConnection` there is now a guard that \"disables\" the idle timeout if a request is being sent.\nThe guard increments atomically an integer before the send, and decrements it after the send.\nAt the same time, the guard is `cas(0, -1)` by the idle timeout mechanism.\n\nIt could happen that:\n- T1, the idle timeout thread decides to call `onIdleExpired()`\n- T2 increases the guard\n- T2 sends the request\n- T2 calls `notIdle()` but it's too late\n- T2 decreases the guard\n- T1 calls `onIdleExpired()`, finds the guard to be 0, and performs the idle timeout actions\n", "changesInPackagesGIT": ["jetty-client/src/main/java/org/eclipse/jetty/client"], "changesInPackagesSPOON": ["org.eclipse.jetty.client.HttpConnection.send(org.eclipse.jetty.client.HttpChannel,org.eclipse.jetty.client.HttpExchange)", "org.eclipse.jetty.client.HttpConnection.onIdleTimeout(long)", "org.eclipse.jetty.client.HttpConnection"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/347"}, {"labels": ["Bug", "More Info Required"], "closed": "2016-03-22 04:29:25", "body": "Hi,\n\nI just tried upgrading the version of Jetty I use from 9.3.6.v20151106 to 9.3.7.v20160115.  After launching my application, I get NPEs when I try to do Basic auth:\n\n`java.lang.NullPointerException\n        at org.eclipse.jetty.security.MappedLoginService.login(MappedLoginService.java:244)\n        at org.eclipse.jetty.security.authentication.LoginAuthenticator.login(LoginAuthenticator.java:61)\n        at org.eclipse.jetty.security.authentication.BasicAuthenticator.validateRequest(BasicAuthenticator.java:92)\n        at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:483)\n        at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226)\n        at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1158)\n        at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:511)\n        at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185)\n        at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1090)\n        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\n        at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:109)\n        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:119)\n        at org.eclipse.jetty.server.Server.handle(Server.java:517)\n        at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:308)\n        at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:242)\n        at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:273)\n        at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)\n        at org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:75)\n        at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceAndRun(ExecuteProduceConsume.java:213)\n        at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:147)\n        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:654)\n        at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n        at java.lang.Thread.run(Thread.java:745)`\n\nThe previous versions of Jetty work fine for me.  My app is using an embedded Jetty, and sets up Basic auth programmatically, and it looks like there is something there that the new version doesn't like. I used a debugger to inspect MappedLoginService._users and it is an empty list, whereas I would expect it to have the information for the one user I have configured.  Anyway, regardless of any configuration errors, Jetty shouldn't NPE.  I'll double check the programmatic Basic Auth configuraiton.  I don't see anything in the release notes about changes to basic auth...\n", "commits": {}, "title": "NPE in MappedLoginService after upgrade to 9.3.7.v20160115", "created": "2016-02-18 20:16:40", "user": "abes-dabir", "url": "https://github.com/eclipse/jetty.project/issues/345", "commitsDetails": [], "ttf": 32.000277777777775}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "gregw", "filteredCommits": ["cc9a19775b4afe2eb7cb2927098e8c5ab08a2bb4"], "commits": {"cc9a19775b4afe2eb7cb2927098e8c5ab08a2bb4": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2016-02-18 18:01:03", "commitsDetails": [{"commitMessage": "Issue #343 - ensure release deployment of test-jetty-webapp:war and test-proxy-webapp:war\n", "commitParents": ["8af356bc0d4b8fec572311e4cd319270a3ed68da"], "commitHash": "cc9a19775b4afe2eb7cb2927098e8c5ab08a2bb4", "commitSpoonAstDiffStats": [], "nameRev": "cc9a19775b4afe2eb7cb2927098e8c5ab08a2bb4 tags/jetty-9.3.8.v20160311~21", "commitUser": "joakime", "authoredDateTime": "2016-03-07 16:25:54", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 8, "filePath": "tests/test-webapps/test-proxy-webapp/pom.xml", "insertions": 8, "deletions": 0}, {"lines": 8, "filePath": "tests/test-webapps/test-jetty-webapp/pom.xml", "insertions": 8, "deletions": 0}, {"lines": 2, "filePath": "tests/test-webapps/pom.xml", "insertions": 1, "deletions": 1}], "commitDateTime": "2016-03-07 16:25:54", "spoonStatsSkippedReason": ""}], "title": "jetty-distribution depends on test-jetty-webapp:war and test-proxy-webapp:war", "spoonStatsSummary": {}, "gitStatsSummary": {"lines": 0, "insertions": 0, "gitFilesChange": 0, "deletions": 0}, "closed": "2016-03-07 23:26:53", "statsSkippedReason": "", "body": "The jetty distribution pom.xml depends on test-jetty-webapp:war and test-proxy-webapp:war, which are expanded by the dependency plugin into the demo base.\n\nHowever, these artifacts are not actually published to maven-central, at least not since 9.0.0!\n\nSo it is strange that they are not published? why not?\n\nI also think it is wrong that the jetty-distribution lists them and other jetty modules as dependencies.  The jetty-distribution expands its dependencies, so it should not advertise them as transitive dependencies... maybe it should list all dependencies as provided?\n", "changesInPackagesGIT": [], "ttf": 18.00027777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/343"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "joakime", "filteredCommits": ["4a6602d00753375f234f5055799b5a9eed33a1eb", "9eb2cb4c0f5f9131f7f855836817c88519da0cfe"], "commits": {"9eb2cb4c0f5f9131f7f855836817c88519da0cfe": {"commitUser": "bushwakko", "commitGHEventType": "referenced"}, "4a6602d00753375f234f5055799b5a9eed33a1eb": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2016-02-18 17:15:03", "commitsDetails": [{"commitMessage": "Issue #342 - Reintroducing Request to logExtended\n\n+ the old/bad AbstractNCSARequestLog.logExtended is now\n  deprecated\n+ the corrected logExtended is the appropriate one to use\n", "commitParents": ["5ddb176f6bb3ba9367bb3f19e2e05e0a35af3a95"], "commitHash": "4a6602d00753375f234f5055799b5a9eed33a1eb", "commitSpoonAstDiffStats": [{"spoonFilePath": "AbstractNCSARequestLog.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.AbstractNCSARequestLog.log(org.eclipse.jetty.server.Request,org.eclipse.jetty.server.Response)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 4, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.server.AbstractNCSARequestLog.logExtended(org.eclipse.jetty.server.Request,java.lang.StringBuilder)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.AbstractNCSARequestLog.logExtended(java.lang.StringBuilder,org.eclipse.jetty.server.Request,org.eclipse.jetty.server.Response)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "4a6602d00753375f234f5055799b5a9eed33a1eb tags/jetty-9.3.8.RC0~20", "commitUser": "joakime", "authoredDateTime": "2016-02-18 11:31:55", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 37, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/AbstractNCSARequestLog.java", "insertions": 21, "deletions": 16}], "commitDateTime": "2016-02-18 11:31:55", "spoonStatsSkippedReason": ""}, {"commitMessage": "446564 Refactored RequestLog Mechanism\n\nreverted API\n", "commitParents": ["bcd4e5fc450ee65995442aa495597c5cfd5a0771"], "commitHash": "9eb2cb4c0f5f9131f7f855836817c88519da0cfe", "commitSpoonAstDiffStats": [{"spoonFilePath": "RequestLogHandlerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.RequestLogHandlerTest.CaptureLog.log(org.eclipse.jetty.server.Request,int,long)", "DEL": 1, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.server.handler.RequestLogHandlerTest.CaptureLog.log(org.eclipse.jetty.server.Request,org.eclipse.jetty.server.Response)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ServletRequestLogTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.ServletRequestLogTest.CaptureLog.log(org.eclipse.jetty.server.Request,int,long)", "DEL": 1, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.servlet.ServletRequestLogTest.CaptureLog.log(org.eclipse.jetty.server.Request,org.eclipse.jetty.server.Response)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ContinuationTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.continuation.ContinuationTest.Log.log(org.eclipse.jetty.server.Request,int,long)", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.continuation.ContinuationTest.Log.log(org.eclipse.jetty.server.Request,org.eclipse.jetty.server.Response)", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}]}, {"spoonFilePath": "AbstractNCSARequestLog.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.AbstractNCSARequestLog.log(org.eclipse.jetty.server.Request,int,long)", "DEL": 1, "INS": 0, "UPD": 2, "MOV": 2, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.server.AbstractNCSARequestLog.log(org.eclipse.jetty.server.Request,org.eclipse.jetty.server.Response)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "RequestLog.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.log(org.eclipse.jetty.server.Request,int,long)", "DEL": 1, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 3}]}, {"spoonFilePath": "Response.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Response.getHttpChannel()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.Response.getCommittedMetaData()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpChannel.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannel.getBytesWritten()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannel.getCommittedInfo()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.HttpChannel.onCompleted()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 4}]}, {"spoonFilePath": "BadRequestLogHandlerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.BadRequestLogHandlerTest.CaptureLog.log(org.eclipse.jetty.server.Request,org.eclipse.jetty.server.Response)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.handler.BadRequestLogHandlerTest.CaptureLog.log(org.eclipse.jetty.server.Request,int,long)", "DEL": 1, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 3}]}, {"spoonFilePath": "NCSARequestLog.java", "spoonMethods": []}, {"spoonFilePath": "Slf4jRequestLog.java", "spoonMethods": []}, {"spoonFilePath": "AsyncServletTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.AsyncServletTest.Log.log(org.eclipse.jetty.server.Request,org.eclipse.jetty.server.Response)", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.servlet.AsyncServletTest.Log.log(org.eclipse.jetty.server.Request,int,long)", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 2}]}], "nameRev": "9eb2cb4c0f5f9131f7f855836817c88519da0cfe tags/jetty-9.3.0.RC0~2^2~104", "commitUser": "bushwakko", "authoredDateTime": "2015-04-22 10:37:39", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 3, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/ServletRequestLogTest.java", "insertions": 2, "deletions": 1}, {"lines": 5, "filePath": "tests/test-continuation/src/test/java/org/eclipse/jetty/continuation/ContinuationTest.java", "insertions": 4, "deletions": 1}, {"lines": 20, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Response.java", "insertions": 18, "deletions": 2}, {"lines": 5, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/AsyncServletTest.java", "insertions": 4, "deletions": 1}, {"lines": 4, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/handler/BadRequestLogHandlerTest.java", "insertions": 3, "deletions": 1}, {"lines": 2, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Slf4jRequestLog.java", "insertions": 1, "deletions": 1}, {"lines": 5, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/AbstractNCSARequestLog.java", "insertions": 4, "deletions": 1}, {"lines": 10, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannel.java", "insertions": 8, "deletions": 2}, {"lines": 11, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/RequestLog.java", "insertions": 10, "deletions": 1}, {"lines": 3, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/handler/RequestLogHandlerTest.java", "insertions": 2, "deletions": 1}, {"lines": 2, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/NCSARequestLog.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2015-04-22 10:37:39", "spoonStatsSkippedReason": ""}], "title": "Restore Response object in AbstractNCSARequestLog.logExtended", "spoonStatsSummary": {"spoonMethodsChanged": 10, "DEL": 3, "INS": 8, "UPD": 7, "MOV": 8, "TOT": 26, "spoonFilesChanged": 4}, "gitStatsSummary": {"lines": 87, "insertions": 63, "gitFilesChange": 6, "deletions": 24}, "closed": "2016-02-18 18:59:09", "statsSkippedReason": "", "body": "The AbstractNCSARequestLog.logExtended lost its Response object in commit 34a8da2ba26a806413f06ab18fdfad535de45cfa\n\nWe need to restore the Response object in that method for projects that override the AbstractNCSARequestLog\n", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.AbstractNCSARequestLog.log(org.eclipse.jetty.server.Request,int,long)", "org.eclipse.jetty.server.log(org.eclipse.jetty.server.Request,int,long)", "org.eclipse.jetty.server.HttpChannel.onCompleted()", "org.eclipse.jetty.server.AbstractNCSARequestLog.logExtended(java.lang.StringBuilder,org.eclipse.jetty.server.Request,org.eclipse.jetty.server.Response)", "org.eclipse.jetty.server.AbstractNCSARequestLog.logExtended(org.eclipse.jetty.server.Request,java.lang.StringBuilder)", "org.eclipse.jetty.server.AbstractNCSARequestLog.log(org.eclipse.jetty.server.Request,org.eclipse.jetty.server.Response)", "org.eclipse.jetty.server.HttpChannel.getBytesWritten()", "org.eclipse.jetty.server.Response.getHttpChannel()", "org.eclipse.jetty.server.HttpChannel.getCommittedInfo()", "org.eclipse.jetty.server.Response.getCommittedMetaData()"], "ttf": 0.0002777777777777778, "numCommits": 2, "url": "https://github.com/eclipse/jetty.project/issues/342"}, {"labels": ["Bug"], "closed": "2016-02-17 17:12:42", "body": "migrated from Bugzilla [#428870](https://bugs.eclipse.org/bugs/show_bug.cgi?id=428870)\nstatus ASSIGNED severity _trivial_ in component _other_ for _9.1.x_\nReported in version _unspecified_ on platform _PC_\nAssigned to: Jesse McConnell\n\nOn 2014-02-24 03:35:28 -0500, Alexei Mikhailov wrote:\n\n> /subj\n> \n> To reproduce:\n> - Clone/download jetty-toolchain either from Eclipse git repo (http://git.eclipse.org/c/jetty/org.eclipse.jetty.toolchain.git) or github mirror (https://github.com/eclipse/jetty.toolchain)\n> - cd jetty-setuid\n> - mvm clean install\n> \n> Building libsetuid-linux will fail with:\n> [INFO] --- native-maven-plugin:1.0-alpha-8:compile (default-compile) @ libsetuid-linux ---\n> [INFO] /bin/sh -c cd /root/org.eclipse.jetty.toolchain/jetty-setuid/libsetuid-linux && gcc -fPIC -O -I/root/org.eclipse.jetty.toolchain/jetty-setuid/libsetuid-linux/target/generated -I/usr/lib/jvm/jdk1.7.0_45/jre/../include -I/usr/lib/jvm/jdk1.7.0_45/jre/../include/linux -o /root/org.eclipse.jetty.toolchain/jetty-setuid/libsetuid-linux/target/objs/org_eclipse_jetty_setuid_SetUID.o -c /root/org.eclipse.jetty.toolchain/jetty-setuid/libsetuid-linux/target/generated/org_eclipse_jetty_setuid_SetUID.c\n> /root/org.eclipse.jetty.toolchain/jetty-setuid/libsetuid-linux/target/generated/org_eclipse_jetty_setuid_SetUID.c:20:45: fatal error: org_eclipse_jetty_setuid_SetUID.h: No such file or directory\n> compilation terminated.\n> \n> I have locally fixed this by finding a released libsetuid-linux-1.0.2-sources.jar, and placing org_eclipse_jetty_setuid_SetUID.h that it contains to jetty-setuid/jetty-setuid-native/src/main/resources/, which makes build go through.\n> However I suspect that that header file should be in git repos.\n> \n> Thanks!\n", "commits": {}, "title": "org_eclipse_jetty_setuid_SetUID.h is missing from jetty-setuid-native sources, hence building libsetuid-linux fails", "created": "2016-02-17 15:50:23", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/333", "commitsDetails": [], "ttf": 0.0002777777777777778}, {"labels": ["Bug"], "closed": "2019-09-11 07:52:45", "body": "migrated from Bugzilla [#432468](https://bugs.eclipse.org/bugs/show_bug.cgi?id=432468)\nstatus ASSIGNED severity _normal_ in component _other_ for _9.1.x_\nReported in version _9.1.4_ on platform _PC_\nAssigned to: Simone Bordet\n\nOriginal attachment names and IDs:\n- _[CGI-fixes.patch](https://bugs.eclipse.org/bugs//attachment.cgi?id=241799)_ (ID 241799)\n- _[web.xml](https://bugs.eclipse.org/bugs//attachment.cgi?id=241800)_ (ID 241800)\n- _[Fix-scriptName-execCmd.patch](https://bugs.eclipse.org/bugs//attachment.cgi?id=241984)_ (ID 241984)\n\nOn 2014-04-09 16:39:24 -0400, Thomas Meyer wrote:\n\n> Created attachment 241799\n> Patch to CGI servlet\n> \n> 1.) Apply resourceBase to SCRIPT_FILENAME\n> This enables an wordpress install in another directory, e.g. /usr/share/wordpress\n> \n> 2.) Introduce an pathAlwaysValid parameter\n> This enable CGI servlet for cgi programs like cgit.\n\nOn 2014-04-09 16:41:15 -0400, Thomas Meyer wrote:\n\n> Created attachment 241800\n> example web.xml for cgit cgi script\n\nOn 2014-04-10 20:50:45 -0400, Greg Wilkins wrote:\n\n> Thomas,\n> \n> I have pushed a variation of you patch with commit 5a0811b to the master branch for inclusion in 9.2.0.\n> \n> I changed some of the names to be more understandable and also wrote a bit better javadoc.   Can you confirm this still works for you.\n> \n> Also, can you click on the CLA link besides your name in this bugzilla can complete the contributors agreement?\n> \n> Simone,\n> \n> can you review this for compatibility with the fast CGI servlet?\n> \n> thanks\n\nOn 2014-04-14 18:38:20 -0400, Thomas Meyer wrote:\n\n> Created attachment 241984\n> Fix for cgit CGI\n> \n> I'm not sure if this is the right thing to do, but this patch fixes the cgit CGI with attached web.xml.\n", "commits": {}, "title": "CGI: Apply resourceBase to SCRIPT_FILENAME and introduce an pathAlwaysValid parameter", "created": "2016-02-17 15:50:16", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/332", "commitsDetails": [], "ttf": 1301.0002777777777}, {"labels": ["Bug"], "closed": "2017-04-28 11:15:55", "body": "migrated from Bugzilla [#452331](https://bugs.eclipse.org/bugs/show_bug.cgi?id=452331)\nstatus ASSIGNED severity _normal_ in component _other_ for _9.2.x_\nReported in version _9.3.0_ on platform _All_\nAssigned to: Greg Wilkins\n\nOn 2014-11-19 12:38:57 -0500, Joakim Erdfelt wrote:\n\n> Some value conversions do not warn on invalid values.\n> \n> Example from etc/jetty.xml:\n> \n> ```\n> <Set name=\"dumpAfterStart\"><Property name=\"jetty.dump.start\" default=\"false\"/></Set>\n> ```\n> \n> If the start.ini entry reads ...\n> \n> jetty.dump.start=trrrue\n> \n> then this will result in Server.setDumpAfterStart(false); as it doesn't match \"true\".  \n> \n> It would be great if attempts to provided string values to native types did some sort of validation that the provided string values even match the range of possible choices for that native type.\n> \n> This would mean a warning message akin to the following could be displayed.\n> \n> WARN:2014-11-29: XML Value Error [trrrue] is not a valid java.lang.Boolean for <Set> on id=\"Server\" name=\"dumpAfterStart\" in etc/jetty.xml\n\nOn 2014-11-19 23:30:44 -0500, Greg Wilkins wrote:\n\n> The code is currently using new Boolean(String) to parse the values and the issue is that it does not throw an exception for \"trrue\" or any other bad values.\n> \n> We could consider a special case for Boolean?\n\nOn 2014-11-20 06:37:25 -0500, Joakim Erdfelt wrote:\n\n> I would also wonder about conversions to numbers (Integer, Long, Double, etc...)\n> \n> What happens on these input values?\n> \n>    \"100 dogs\"  (likely becomes 100)\n>    \"1.5\"       (likely becomes 1 for Integer, 1.5 for Double)\n>    \"1,234\"     (this would be Locale specific.\n>                 as it could either be \"1234\" Integer in US\n>                 or \"1.234\" Double in some European countries.)\n> \n> If I think of more I'll add them to this bug.\n\nOn 2014-11-20 06:38:20 -0500, Joakim Erdfelt wrote:\n\n> Note: this bug was filed as a more specific response to bug # 441209\n\nOn 2014-11-20 16:51:55 -0500, Greg Wilkins wrote:\n\n> The integer and float constructors appear better at raising errors than new Boolean(String)\n", "commits": {}, "title": "Better XMLConfiguration Validation for values", "created": "2016-02-17 15:49:39", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/328", "commitsDetails": [], "ttf": 435.0002777777778}, {"labels": ["Bug"], "closed": "2017-04-28 11:35:29", "body": "migrated from Bugzilla [#457988](https://bugs.eclipse.org/bugs/show_bug.cgi?id=457988)\nstatus ASSIGNED severity _normal_ in component _spdy_ for _9.2.x_\nReported in version _9.2.6_ on platform _PC_\nAssigned to: Greg Wilkins\n\nOriginal attachment names and IDs:\n- _[file_457988.txt](https://bugs.eclipse.org/bugs//attachment.cgi?id=250113)_ (ID 250113)\n\nOn 2015-01-20 15:22:49 -0500, Thomas Meyer wrote:\n\n> Enabling the spdy modules enables protonego as dependency which enables apln module which has an exec section. That exec section silently enables the exec mode.\n> \n> But it seems that the exec mode doesn't inherit the fd 0 and 1 needed for the System.inheritChannel call in the ServerConnector.\n> \n> I changed the default spdy etc file to set inheritChannel to true.\n\nOn 2015-01-20 16:31:11 -0500, Joakim Erdfelt wrote:\n\n> What do you mean by \"fd 0 and 1\"?\n> \n> We eat our own dogfood with our own websites, and the module system for spdy (and now http2) work as expected on java 8u25, no failures.\n\nOn 2015-01-20 16:31:55 -0500, Joakim Erdfelt wrote:\n\n> changing component to spdy, as its that module's configuration we are talking about.\n\nOn 2015-01-20 16:56:44 -0500, Thomas Meyer wrote:\n\n> I want to use systemd socket activation, also know as xinetd, with the spdy protocol.\n> \n> I want to run jetty as an unprivileged user but still want to be able to connect via IPv6 so therefore above trick.\n> \n> To get socket activation you need to set the attribute inheritChannel of the ServerConnector to true, this is what I did.\n> \n> Sadly the protonego module has an exec section with enables --exec mode. But the process created with the ProcessBuilder doesn't inherit the file descriptors (fd) 0 and 1 which are normally connected to the stdin and stdout.\n> \n> But in the xinetd/systemd socket activation case fd 0 and 1 are used as the stream input and output.\n> \n> So how do you solve IPv6 connectivity on your installation? Do you run your Java process as root?\n> \n> Maybe it is possible to change the file descriptors 0 and 1 in the --exec case to get connected to the original ones of the initial Java process.\n> \n> So I think start was the correct assignment of this bug report.\n\nOn 2015-01-21 10:56:30 -0500, Thomas Meyer wrote:\n\n> Created attachment 250113\n> proposed patch\n", "commits": {}, "title": "Exec mode breaks ServerConnector inheritChannel", "created": "2016-02-17 15:49:38", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/327", "commitsDetails": [], "ttf": 435.0002777777778}, {"labels": ["Bug"], "closed": "2017-04-28 11:32:32", "body": "migrated from Bugzilla [#460647](https://bugs.eclipse.org/bugs/show_bug.cgi?id=460647)\nstatus ASSIGNED severity _normal_ in component _other_ for _9.2.x_\nReported in version _8.1.8_ on platform _PC_\nAssigned to: Greg Wilkins\n\nOn 2015-02-23 19:27:41 -0500, Michael Herstine wrote:\n\n> In or.eclipse.jetty.util.security.CertificateValidator (org/eclipse/jetty/util/security/CertificateValidator.java), we have:\n> \n> ```\n> /** Maximum certification path length (n - number of intermediate certs, -1 for unlimited) */\n> private int _maxCertPathLength = -1;\n> ```\n> \n> I think this is incorrect; while debugging a certificate validation error, I set java.security.debug=certpath, and in the logs found:\n> \n> ```\n> ==> Should have matched this cert in the truststore <==\n> certpath: X509CertSelector.match(SN: c811...\n>   Issuer: CN=...\n>   Subject: ...\n> certpath: X509CertSelector.match: maxPathLen too small (-1 < 0)\n> ================================> ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ <====\n> certpath: ForwardBuilder.getMatchingCACerts: found 0 CA certs\n> ```\n> \n> Overriding the default (and setting it to zero) allowed the check to go through.\n> \n> Thought you might want to know.\n\nOn 2015-03-13 01:50:32 -0400, Greg Wilkins wrote:\n\n> Hmm that value is used only to call void java.security.cert.PKIXBuilderParameters.setMaxPathLength(int maxPathLength)\n> \n> whose javadoc says:\n> \n> A value of 0 implies that the path can only contain a single certificate. A value of -1 implies that the path length is unconstrained (i.e. there is no maximum). The default maximum path length, if not specified, is 5. Setting a value less than -1 will cause an exception to be thrown.\n> \n> So -1 does appear to be a reasonable value?\n> \n> could be an issue with different providers???\n", "commits": {}, "title": "The default value of or.eclipse.jetty.util.security.CertificateValidator._maxCertPathLength is invalid", "created": "2016-02-17 15:49:27", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/325", "commitsDetails": [], "ttf": 435.0002777777778}, {"labels": ["Bug"], "closed": "2016-07-07 06:24:49", "body": "migrated from Bugzilla [#463758](https://bugs.eclipse.org/bugs/show_bug.cgi?id=463758)\nstatus NEW severity _normal_ in component _build_ for _9.3.x_\nReported in version _unspecified_ on platform _PC_\nAssigned to: Jesse McConnell\n\nOn 2015-04-02 04:11:55 -0400, Xavier Coulon wrote:\n\n> I currently use Jetty 9.2.5 and I noticed that \n> http://download.eclipse.org/jetty/updates/jetty-bundles-9.x/9.2.5.v20141112/plugins/ misses the source bundles for org.eclipse.jetty.proxy_9.2.5.v20141112.jar and  org.eclipse.jetty.proxy_9.2.5.v20141112.jar.pack.gz\n> \n> The same problem occurs on the latest version at the time when this bug is opened: http://download.eclipse.org/jetty/updates/jetty-bundles-9.x/9.2.10.v20150310\n> \n> Would it be possible to include the missing source bundles in the next build ?\n> Thanks\n\nOn 2016-01-25 23:39:01 -0500, Wagner Tsuchiya wrote:\n\n> I realized that the sources jar are generated during the build process.\n> \n> Could you explain about how these bundles are generated? So I could fix it.\n> \n> Thanks,\n", "commits": {}, "title": "Missing source bundle for org.eclipse.jetty.proxy", "created": "2016-02-17 15:49:18", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/324", "commitsDetails": [], "ttf": 140.00027777777777}, {"labels": ["Bug"], "closed": "2018-03-13 23:08:07", "body": "migrated from Bugzilla [#464743](https://bugs.eclipse.org/bugs/show_bug.cgi?id=464743)\nstatus ASSIGNED severity _trivial_ in component _build_ for _9.3.x_\nReported in version _9.3.0_ on platform _PC_\nAssigned to: Project Inbox\n\nOn 2015-04-15 16:58:46 -0400, Joakim Erdfelt wrote:\n\n> The features and functiona of jetty-http's HttpURI overlap with the features of jetty-util's URIUtil\n\nOn 2015-04-21 01:27:25 -0400, Greg Wilkins wrote:\n\n> There is not a huge overlap, albeit that the class design is a little bit strange as it was influenced over time by the JVMs changing implementation and URL vs URI schism.\n> \n> URIUtil is applicable to all URIs including file: jar:file: jndi:  schemes.  It is a static method only class and is never instantiated.\n> \n> HttpURI is a parser for http: URIs and does not duplicate any URIUtil functionality.  It actually uses URIUtil for some methods... although it does also use UrlEncoded that does have a bit of overlap with URIUtil\n> \n> So there is probably scope to review these three classes, but if we wait until Jetty goes java-8 only then there are probably a lot more JVM provided libraries that can be used.\n", "commits": {}, "title": "oej.http.HttpURI and oej.util.URIUtil overlap in functionality", "created": "2016-02-17 15:49:11", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/323", "commitsDetails": [], "ttf": 755.0002777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "jmcc0nn3ll", "filteredCommits": [], "commits": {"82264bccb18acf20a91490b16f911b210237cc22": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2016-02-17 15:48:57", "commitsDetails": [{"commitMessage": "Merge pull request #2782 from lachlan-roberts/jetty-9.4.x-321-JaspiAuthenticatorFactory-DeadCode\n\nIssue #321 - jaspi authenticator factory dead code", "commitParents": ["bd38bc905b8bc1782b4b14b1984a9cb35faf4c44", "a75fb6be17e2227f1446442a04f1b771478db4c5"], "commitHash": "82264bccb18acf20a91490b16f911b210237cc22", "commitSpoonAstDiffStats": [{"spoonFilePath": "JaspiAuthenticatorFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.security.jaspi.JaspiAuthenticatorFactory.findServerName(org.eclipse.jetty.server.Server,javax.security.auth.Subject)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.security.jaspi.JaspiAuthenticatorFactory.getAuthenticator(org.eclipse.jetty.server.Server,javax.servlet.ServletContext,org.eclipse.jetty.security.Authenticator.AuthConfiguration,org.eclipse.jetty.security.IdentityService,org.eclipse.jetty.security.LoginService)", "DEL": 2, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.security.jaspi.JaspiAuthenticatorFactory.findServerName(org.eclipse.jetty.server.Server)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "82264bccb18acf20a91490b16f911b210237cc22 tags/jetty-9.4.12.RC2~7", "commitUser": "gregw", "authoredDateTime": "2018-08-10 12:44:07", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 41, "filePath": "jetty-jaspi/src/main/java/org/eclipse/jetty/security/jaspi/JaspiAuthenticatorFactory.java", "insertions": 26, "deletions": 15}], "commitDateTime": "2018-08-10 12:44:07", "spoonStatsSkippedReason": ""}], "title": "Remove JaspiAuthenticatorFactory.findServerName(Server, Subject)", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0, "insertions": 0, "gitFilesChange": 0, "deletions": 0}, "closed": "2018-08-10 02:44:08", "statsSkippedReason": "", "body": "migrated from Bugzilla [#465248](https://bugs.eclipse.org/bugs/show_bug.cgi?id=465248)\nstatus NEW severity _minor_ in component _build_ for _9.3.x_\nReported in version _9.3.0_ on platform _All_\nAssigned to: Jesse McConnell\n\nOn 2015-04-22 20:13:45 -0400, Joakim Erdfelt wrote:\n\n> In jetty-jaspi, \n> \n> the org.eclipse.jetty.security.jaspi.JaspiAuthenticatorFactory class\n> \n> the method protected String findServerName(Server server, Subject subject)\n> \n> the Server parameter is not used\n", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 904.0002777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/321"}, {"labels": ["Bug"], "closed": "2016-02-17 17:24:08", "body": "migrated from Bugzilla [#469786](https://bugs.eclipse.org/bugs/show_bug.cgi?id=469786)\nstatus ASSIGNED severity _normal_ in component _other_ for _9.3.x_\nReported in version _9.3.0_ on platform _All_\nAssigned to: Jan Bartel\n\nOn 2015-06-09 19:50:34 -0400, Joakim Erdfelt wrote:\n\n> Current implementation incorrectly uses Files.walkFileTree() and a customized DepthLimitedFileVisitor to control walk/scan depth.\n> \n> The proper way is to use the maxDepth parameter on Files.walkFileTree()\n\nOn 2015-06-09 21:44:36 -0400, Jan Bartel wrote:\n\n> Joakim,\n> \n> I still have some outstanding changes to this class, so I'll take this issue for now.\n> \n> Jan\n\nOn 2015-06-10 07:18:00 -0400, Joakim Erdfelt wrote:\n\n> This was a reminder issue for myself. :-)\n> \n> Not saying that the DepthLimitedFileVisitor is wrong, just that there's specific way already built-into the Files.walkFileTree() method that seemed more appropriate.\n> \n> Heck, I believe I'm the one that originally created the DepthLimitedFileVisitor.\n", "commits": {}, "title": "PathWatcher scan/recurse depth configuration", "created": "2016-02-17 15:48:48", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/320", "commitsDetails": [], "ttf": 0.0002777777777777778}, {"labels": ["Bug"], "closed": "2017-03-01 14:57:16", "body": "migrated from Bugzilla [#472407](https://bugs.eclipse.org/bugs/show_bug.cgi?id=472407)\nstatus NEW severity _normal_ in component _build_ for _9.3.x_\nReported in version _unspecified_ on platform _PC_\nAssigned to: Jesse McConnell\n\nOriginal attachment names and IDs:\n- _[jetty_install_3.out](https://bugs.eclipse.org/bugs//attachment.cgi?id=255126)_ (ID 255126)\n\nOn 2015-07-10 18:54:45 -0400, Bill Ross wrote:\n\n> Created attachment 255126\n> first saved build output\n> \n> These tests failed in various build attempts on the current tree over the last week. Commenting them out led to a successful build.\n> \n> --- first param = 1\n> \n> WebSocketCloseTest.testFastClose:172\n> EventQueue<WebSocketFrame> frames = client.readFrames(1,1,TimeUnit.SECONDS);\n> \n> WebSocketCloseTest.testFastFail:204 \n> EventQueue<WebSocketFrame> frames = client.readFrames(1,1,TimeUnit.SECONDS);\n> \n> TooFastClientTest.testUpgradeWithLargeFrame:168\n> EventQueue<WebSocketFrame> frames = client.readFrames(1,1,TimeUnit.SECONDS);\n> \n> MisbehavingClassTest.testAnnotatedRuntimeOnConnect:115\n> EventQueue<WebSocketFrame> frames = client.readFrames(1,1,TimeUnit.SECONDS);\n> \n> --- first param = 2\n> \n> TooFastClientTest.testUpgradeWithSmallFrames:110 \n> EventQueue<WebSocketFrame> frames = client.readFrames(2,1,TimeUnit.SECONDS);\n> ---\n> \n> Here is the error log for the last case:\n> \n> Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 1.059 sec <<< FA\n> ILURE! - in org.eclipse.jetty.websocket.server.TooFastClientTest\n> testUpgradeWithSmallFrames(org.eclipse.jetty.websocket.server.TooFastClientTest)\n>   Time elapsed: 1.032 sec  <<< ERROR!\n> java.util.concurrent.TimeoutException: Timeout waiting for 2 events (found 0)\n>         at org.eclipse.jetty.toolchain.test.EventQueue.awaitEventCount(EventQueu\n> e.java:71)\n>         at org.eclipse.jetty.websocket.common.test.BlockheadClient.readFrames(Bl\n> ockheadClient.java:596)\n>         at org.eclipse.jetty.websocket.server.TooFastClientTest.testUpgradeWithS\n> mallFrames(TooFastClientTest.java:110)\n", "commits": {}, "title": "Timeouts in BlockheadClient.readFrames()", "created": "2016-02-17 15:48:40", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/319", "commitsDetails": [], "ttf": 377.0002777777778}, {"labels": ["Bug"], "closed": "2019-09-11 07:52:23", "body": "migrated from Bugzilla [#472676](https://bugs.eclipse.org/bugs/show_bug.cgi?id=472676)\nstatus NEW severity _normal_ in component _other_ for _9.3.x_\nReported in version _unspecified_ on platform _PC_\nAssigned to: Project Inbox\n\nOn 2015-07-14 21:53:53 -0400, Lin Yan wrote:\n\n> When use the {OBF} style password generated using Password util for bindPassword, the LDAPLoginModule simply pass the obfuscated password to LDAP server for authentication.\n", "commits": {}, "title": "LDAPLoginModule does not support obfuscated _bindPassword", "created": "2016-02-17 15:48:31", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/318", "commitsDetails": [], "ttf": 1301.0002777777777}, {"labels": ["Bug"], "closed": "2016-02-17 17:24:50", "body": "migrated from Bugzilla [#475005](https://bugs.eclipse.org/bugs/show_bug.cgi?id=475005)\nstatus ASSIGNED severity _normal_ in component _other_ for _9.3.x_\nReported in version _9.3.2_ on platform _PC_\nAssigned to: Greg Wilkins\n\nOn 2015-08-14 17:50:23 -0400, Poornima Iyer wrote:\n\n> Tried SNI to fetch the appropriate certificate with default keystore as well as the my keystore, it fetches only the first certificate. I have illustrated the steps that I did for each case.\n> \n> Using Jetty 9.3.2 Distribution\n> # Case 1: With my keystore\n> \n> Set up the keystore with 2 certificates.\n> \n> EMAILADDRESS=company@company.com, CN=company.com, OU=Eng, O=company, L=San Francisco, ST=California, C=US\n> \n> EMAILADDRESS=admin@apakau.com, CN=apakau.com, OU=Engineering, O=\"Apakau, Inc.\", L=Santa Clara, ST=CA, C=US\n> \n> Changed the jetty-ssl-context.xml to the following:\n> <Configure id=\"sslContextFactory\" class=\"org.eclipse.jetty.util.ssl.SslContextFactory\">\n>   <Set name=\"KeyStorePath\"><Property name=\"jetty.base\" default=\".\" />/<Property name=\"jetty.sslContext.keyStorePath\" deprecated=\"jetty.keystore\" default=\"etc/mykeystore\" /></Set>\n>   <Set name=\"KeyStorePassword\"><Property name=\"jetty.sslContext.keyStorePassword\" deprecated=\"jetty.keystore.password\" default=\"OBF:<generated password>\"/></Set>\n>   <Set name=\"KeyStoreType\"><Property name=\"jetty.sslContext.keyStoreType\" default=\"JKS\"/></Set>\n>   <Set name=\"KeyStoreProvider\"><Property name=\"jetty.sslContext.keyStoreProvider\"/></Set>\n>   <Set name=\"KeyManagerPassword\"><Property name=\"jetty.sslContext.keyManagerPassword\" deprecated=\"jetty.keymanager.password\" default=\"OBF:<generated password>\"/></Set>\n>   <Set name=\"TrustStorePath\"><Property name=\"jetty.base\" default=\".\" />/<Property name=\"jetty.sslContext.trustStorePath\" deprecated=\"jetty.truststore\" default=\"etc/mykeystore\"/></Set>\n>   <Set name=\"TrustStorePassword\"><Property name=\"jetty.sslContext.trustStorePassword\" deprecated=\"jetty.truststore.password\" default=\"OBF:<generated password>\"/></Set>\n>   <Set name=\"TrustStoreType\"><Property name=\"jetty.sslContext.trustStoreType\" default=\"JKS\"/></Set>\n>   <Set name=\"TrustStoreProvider\"><Property name=\"jetty.sslContext.trustStoreProvider\"/></Set>\n>   <Set name=\"EndpointIdentificationAlgorithm\"></Set>\n>   <Set name=\"NeedClientAuth\"><Property name=\"jetty.sslContext.needClientAuth\" deprecated=\"jetty.ssl.needClientAuth\" default=\"false\"/></Set>\n>   <Set name=\"WantClientAuth\"><Property name=\"jetty.sslContext.wantClientAuth\" deprecated=\"jetty.ssl.wantClientAuth\" default=\"false\"/></Set>\n> <Set name=\"EndpointIdentificationAlgorithm\">HTTPS</Set>\n>   <Set name=\"ExcludeCipherSuites\">\n>    <Array type=\"String\">\n>     <Item>SSL_RSA_WITH_DES_CBC_SHA</Item>\n>     <Item>SSL_DHE_RSA_WITH_DES_CBC_SHA</Item>\n>     <Item>SSL_DHE_DSS_WITH_DES_CBC_SHA</Item>\n>     <Item>SSL_RSA_EXPORT_WITH_RC4_40_MD5</Item>\n>     <Item>SSL_RSA_EXPORT_WITH_DES40_CBC_SHA</Item>\n>     <Item>SSL_DHE_RSA_EXPORT_WITH_DES40_CBC_SHA</Item>\n>     <Item>SSL_DHE_DSS_EXPORT_WITH_DES40_CBC_SHA</Item>\n>    </Array>\n>   </Set>\n>   <Set name=\"useCipherSuitesOrder\"><Property name=\"jetty.sslContext.useCipherSuitesOrder\" default=\"true\"/></Set>\n> </Configure>\n> ---\n> \n> But on testing with the following command :\n> openssl s_client -connect apakau.com:8443 -servername \"apakau.com\"\n> \n> I get only the first certificate \"company.com\".\n> # Case 2: Default Keystore\n> \n> With the default keystore also, when I try the following command :\n> openssl s_client -connect company.com:8443 -servername \"Jetty Server\"\n> \n> I get only the first certificate.\n\nOn 2015-08-20 07:36:12 -0400, Greg Wilkins wrote:\n\n> Can you run with -Dorg.eclipse.jetty.util.ssl.LEVEL=DEBUG as that will tell us a lot more about what is happening.\n> \n> Also note that we do test this with the SniSslConnectionFactoryTest unit test, so it would be great if you could modify that test harness to reproduce your problem.\n\nOn 2015-09-17 22:42:20 -0400, Greg Wilkins wrote:\n\n> more info required\n\nOn 2015-09-24 03:29:06 -0400, Greg Wilkins wrote:\n\n> Reducing priority until information for reproduction provided\n\nOn 2015-09-29 14:40:43 -0400, Poornima Iyer wrote:\n\n> (In reply to Greg Wilkins from comment # 3)\n> \n> > Reducing priority until information for reproduction provided\n> \n> This bug is resolved but there is another related bug. But I have raised another bug for that.\n", "commits": {}, "title": "SNI fetching only the first certificate", "created": "2016-02-17 15:48:26", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/317", "commitsDetails": [], "ttf": 0.0002777777777777778}, {"labels": ["Bug"], "closed": "2017-03-16 14:37:39", "body": "migrated from Bugzilla [#478681](https://bugs.eclipse.org/bugs/show_bug.cgi?id=478681)\nstatus ASSIGNED severity _normal_ in component _other_ for _9.3.x_\nReported in version _9.3.0_ on platform _All_\nAssigned to: Jan Bartel\n\nOn 2015-09-29 23:51:23 -0400, Jan Bartel wrote:\n\n> When finding services via the java.util.ServiceLoader, file handles can be left open when the jar file associated with the class is deleted, even if the ServiceLoader's cache is explicitly emptied.\n> \n> This occurs when jetty looks for ServletContainerInitializers (SCIs) using the ServiceLoader, and an SCI exists in the webapp's WEB-INF/lib, and the webapp is later redeployed.\n> \n> A bug has been raised with Oracle for this and is currently undergoing evaluation. I'll post a link when we have an official bug number or other response from Oracle.\n> \n> Jan\n", "commits": {}, "title": "java.util.ServiceLoader can leave open file handles to deleted jar files", "created": "2016-02-17 15:48:02", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/314", "commitsDetails": [], "ttf": 392.0002777777778}, {"labels": ["Bug"], "closed": "2016-05-04 06:32:08", "body": "migrated from Bugzilla [#481438](https://bugs.eclipse.org/bugs/show_bug.cgi?id=481438)\nstatus ASSIGNED severity _normal_ in component _other_ for _9.3.x_\nReported in version _9.3.5_ on platform _PC_\nAssigned to: Greg Wilkins\n\nOn 2015-11-04 13:00:15 -0500, Ben Tatham wrote:\n\n> This bug was introduced with change in Bug 477278.\n> \n> Previously, we could have static resources in which only the .gz version of the file existed.  There was code in DefaultServlet that explicitly handled this case, but was removed in commit 2d88fdf (for Bug 477278).\n> \n> I'll not that we did have a _bit_ of special handling in a subclass of DefaultServlet to set the headers correctly, that may have allowed us to do this.  Note that ordering the headers are added to the response does seem to matter.\n> \n> ```\n> @Override\n> protected void putHeaders(HttpServletResponse response, HttpContent content, long count)\n> {\n>   if (content == null)\n>   {\n>     super.putHeaders(response, content, count);\n>     return;\n>   }\n>   final String contentType = response.getContentType();\n>   super.putHeaders(response, content, count);\n>   if (content.getContentType() != null)\n>   {\n>     if (content.getContentType().toString().contains(\"gzip\"))\n>     {\n>       response.setHeader(HttpHeaders.CONTENT_TYPE, contentType);\n>     }\n>   }\n>   return;\n> }\n> ```\n\nOn 2015-11-04 15:53:56 -0500, Greg Wilkins wrote:\n\n> I agree that this is a regression.... but I can't yet decide if it is a bug or a feature.\n> \n> The new handling in the DefaultServlet is much more efficient as it avoids multiple cache lookups, as the gz resource is just hung off the normal resource content entry.\n> \n> But the problem being that if there is no normal content, then there is nothing to hang the gz off.\n> \n> So will have to think a bit before we agree to this.\n> \n> For now, I would suggest that you create empty files in place of the normal resources and have a filter that does a 500 response if a request does not accept gzip.\n\nOn 2015-11-05 13:23:12 -0500, Ben Tatham wrote:\n\n> I've created a pull request that adds back the feature.  As I say there, I don't know enough about the overall system to test the performance improvements you've made recently, so if you think it necessary, I can add a new init parameter, like gzipWithoutResource, or something like that, to enable this feature.\n> \n> https://github.com/eclipse/jetty.project/pull/58\n", "commits": {}, "title": "Cannot serve resource files if only gzip file exists", "created": "2016-02-17 15:47:52", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/313", "commitsDetails": [], "ttf": 76.00027777777778}, {"labels": ["Bug"], "closed": "2016-04-30 00:19:50", "body": "migrated from Bugzilla [#483506](https://bugs.eclipse.org/bugs/show_bug.cgi?id=483506)\nstatus ASSIGNED severity _normal_ in component _other_ for _9.3.x_\nReported in version _9.4.0_ on platform _PC_\nAssigned to: Jan Bartel\n\nOn 2015-12-02 13:27:29 -0500, Alex Henrie wrote:\n\n> An operation on an immutable object won't change the object itself.\n> \n> Identified with `pmd -d . -R java-unnecessary`\n> \n> https://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-nosql/src/main/java/org/eclipse/jetty/nosql/mongodb/MongoSessionManager.java?h=jetty-9.3.6.v20151106#n731\n", "commits": {}, "title": "Result of calls to String.replace is discarded without use in MongoSessionManager.createContextId", "created": "2016-02-17 15:47:35", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/311", "commitsDetails": [], "ttf": 72.00027777777778}, {"labels": ["Bug"], "closed": "2016-02-17 16:55:05", "body": "migrated from Bugzilla [#484349](https://bugs.eclipse.org/bugs/show_bug.cgi?id=484349)\nstatus REOPENED severity _normal_ in component _other_ for _9.3.x_\nReported in version _9.4.0_ on platform _All_\nAssigned to: Joakim Erdfelt\n\nOn 2015-12-14 13:15:23 -0500, Joakim Erdfelt wrote:\n\n> The proposed replacement of the venerable PathMap class exist in the WebSocket server classes.\n> \n> This issue is to track the promotion of those classes into /jetty-http/ for eventual use by Bug # 482042\n\nOn 2015-12-14 13:20:36 -0500, Joakim Erdfelt wrote:\n\n> Committed to [master] SHA: dddba5b0043c7f821602b22f5ddab38a6e813309\n\nOn 2016-01-13 22:28:34 -0500, Greg Wilkins wrote:\n\n> Joakim,\n> \n> can you review commit 7925697 which contains the optimisation we discussed.\n", "commits": {}, "title": "Promote WebSocket PathMappings / PathSpec to Jetty Http", "created": "2016-02-17 15:47:24", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/310", "commitsDetails": [], "ttf": 0.0002777777777777778}, {"labels": ["Bug"], "closed": "2016-03-11 09:24:26", "body": "migrated from Bugzilla [#484683](https://bugs.eclipse.org/bugs/show_bug.cgi?id=484683)\nstatus NEW severity _normal_ in component _fastcgi_ for _9.3.x_\nReported in version _9.3.6_ on platform _PC_\nAssigned to: Simone Bordet\n\nOn 2015-12-18 08:17:30 -0500, Simone Bordet wrote:\n\n> FastCGI request idle timeout is controlled by HttpChannelOverFCGI.FCGIIdleTimeout.\n> \n> However, calls to notIdle() are not performed on request/response events, and FCGIIdleTimeout.isOpen() returns information about the connection, not about the request.\n", "commits": {}, "title": "FastCGI request idle timeout is handled incorrectly", "created": "2016-02-17 15:47:10", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/309", "commitsDetails": [], "ttf": 22.00027777777778}, {"labels": ["Bug"], "closed": "2016-03-07 23:35:21", "body": "migrated from Bugzilla [#485907](https://bugs.eclipse.org/bugs/show_bug.cgi?id=485907)\nstatus NEW severity _normal_ in component _other_ for _9.3.x_\nReported in version _unspecified_ on platform _PC_\nAssigned to: Project Inbox\n\nOriginal attachment names and IDs:\n- _[threaddump-1452851733242.tdump](https://bugs.eclipse.org/bugs//attachment.cgi?id=259196)_ (ID 259196)\n\nOn 2016-01-15 05:09:36 -0500, Mauro Molinari wrote:\n\n> Created attachment 259196\n> Thread dump\n> \n> First of all: I'm posting here because I'm having a suspect about Jetty being the cause through Logback, but:\n> - I'm not using Jetty in my Eclipse installation, so it seems like an embedded instance is started automatically I don't know exactly for what purpose\n> - I'm not 100% sure the problem is in Jetty+Logback, but the thread dump seems to reveal that's the only \"activity\" in progress\n> \n> Recently it happens that just leaving my Eclipse instance running, without doing anything (actually, I'm surfing the web, reading e-mails, etc.) at certain point I hear the CPU fan spin a lot. Looking at Task Manager, I see my Eclipse instance eating about 12-14% CPU constantly (which I guess is just a 100% busy thread of my 4-core + Hyperthreading i7 CPU).\n> This goes forever and does not stop until I restart Eclipse.\n> I'm attaching a thread dump, which reveals that nothing is in progress, except for a Jetty instance trying to append to a Logback log.\n> \n> Any suspect?\n> \n> I'm using Eclipse 4.5.1 (M20150904-0015).\n> The list of \"Installed Software\" shows:\n> \n>   Code Recommenders for Java Developers   2.3.0.v20160106-1243    org.eclipse.recommenders.rcp.feature.feature.group  Eclipse Code Recommenders\n>   Code Recommenders Mylyn Integration 2.3.0.v20160106-1243    org.eclipse.recommenders.mylyn.rcp.feature.feature.group    Eclipse Code Recommenders\n>   Dali Java Persistence Tools - EclipseLink JPA Support   3.4.1.v201409111648 org.eclipse.jpt.jpa.eclipselink.feature.feature.group   Eclipse Web Tools Platform\n>   Dali Java Persistence Tools - JPA Diagram Editor    1.2.101.v201501141513   org.eclipse.jpt.jpadiagrameditor.feature.feature.group  Eclipse Web Tools Platform\n>   Dali Java Persistence Tools - JPA Support   3.4.2.v201505291546 org.eclipse.jpt.jpa.feature.feature.group   Eclipse Web Tools Platform\n>   Data Tools Platform Enablement Extender SDK 1.12.0.v201406061321-7IAB-FE9JgeWjZZhMd-z0vb1ifD4   org.eclipse.datatools.enablement.sdk.feature.feature.group  Eclipse Data Tools Platform\n>   Data Tools Platform Extender SDK    1.12.0.v201406061321-7PB21FEpPZQXdcX0z-_yMM0Hfz0w   org.eclipse.datatools.sdk.feature.feature.group Eclipse Data Tools Platform\n>   Eclipse Automated Error Reporting   1.0.1.v20150913-0716    org.eclipse.epp.logging.aeri.feature.feature.group  Eclipse Packaging Project\n>   Eclipse Faceted Project Framework   3.7.0.v201505072140 org.eclipse.wst.common.fproj.feature.group  Eclipse Web Tools Platform\n>   Eclipse Faceted Project Framework JDT Enablement    3.6.3.v201501141810 org.eclipse.jst.common.fproj.enablement.jdt.feature.group   Eclipse Web Tools Platform\n>   Eclipse Java Development Tools  3.11.1.v20150904-0015   org.eclipse.jdt.feature.group   Eclipse.org\n>   Eclipse Java EE Developer Tools 3.7.0.v201505131719 org.eclipse.jst.enterprise_ui.feature.feature.group Eclipse Web Tools Platform\n>   Eclipse Java Web Developer Tools    3.7.1.v201509021802 org.eclipse.jst.web_ui.feature.feature.group    Eclipse Web Tools Platform\n>   Eclipse Platform    4.5.1.M20150904-0015    org.eclipse.platform.ide    Eclipse.org\n>   Eclipse Quicksearch 3.7.2.201511260840-RELEASE  org.springsource.ide.eclipse.commons.quicksearch.feature.feature.group  Pivotal Software, Inc.\n>   Eclipse Web Developer Tools 3.7.1.v201509022125 org.eclipse.wst.web_ui.feature.feature.group    Eclipse Web Tools Platform\n>   Eclipse XML Editors and Tools   3.7.1.v201508271605 org.eclipse.wst.xml_ui.feature.feature.group    Eclipse Web Tools Platform\n>   Gradle IDE  3.7.2.201511260851-RELEASE  org.springsource.ide.eclipse.gradle.feature.feature.group   Pivotal Software, Inc.\n>   Groovy Compiler 2.3 Feature 2.9.2.xx-201601121952-e45   org.codehaus.groovy23.feature.feature.group Codehaus.org\n>   Groovy Compiler 2.4 Feature 2.9.2.xx-201601121952-e45   org.codehaus.groovy24.feature.feature.group Codehaus.org\n>   Groovy-Eclipse Feature  2.9.2.xx-201601121952-e45   org.codehaus.groovy.eclipse.feature.feature.group   Codehaus.org\n>   JavaHL 1.8.14 Win64 Binaries (Optional) 5.0.1.I20151028-1700    org.polarion.eclipse.team.svn.connector.javahl18.win64.feature.group    Polarion Software\n>   JavaScript Development Tools    1.6.201.v201508262249   org.eclipse.wst.jsdt.feature.feature.group  Eclipse Web Tools Platform\n>   JDT Core patch for Groovy-Eclipse plugin on Eclipse 4.5 2.9.2.xx-201601121952-e45   org.codehaus.groovy.jdt.patch.feature.group Codehaus.org\n>   JRebel (required)   6.3.1.RELEASE   org.zeroturnaround.eclipse.feature.feature.group    ZeroTurnaround\n>   JRebel for Java EE  6.3.1.RELEASE   org.zeroturnaround.eclipse.wtp.feature.feature.group    ZeroTurnaround\n>   JSF Tools   3.8.0.v201505112336 org.eclipse.jsf.feature.feature.group   Eclipse Web Tools Platform\n>   JSF Tools - Tag Library Metadata (Apache Trinidad)  2.6.0.v201410101748 org.eclipse.jst.jsf.apache.trinidad.tagsupport.feature.feature.group    Eclipse Web Tools Platform\n>   JSF Tools - Web Page Editor 2.7.1.v201508270443 org.eclipse.jst.webpageeditor.feature.feature.group Eclipse Web Tools Platform\n>   JST Server Adapters 3.2.400.v201503102136   org.eclipse.jst.server_adapters.feature.feature.group   Eclipse Web Tools Platform\n>   JST Server Adapters Extensions  3.3.401.v201508232356   org.eclipse.jst.server_adapters.ext.feature.feature.group   Eclipse Web Tools Platform\n>   JST Server UI   3.4.200.v201503102136   org.eclipse.jst.server_ui.feature.feature.group Eclipse Web Tools Platform\n>   Memory Analyzer 1.5.0.201505271423  org.eclipse.mat.feature.feature.group   Eclipse Memory Analyzer\n>   Memory Analyzer (Charts) [optional] 1.5.0.201505271423  org.eclipse.mat.chart.feature.feature.group Eclipse Memory Analyzer\n>   Mylyn Builds Connector: Hudson/Jenkins  1.9.0.v20150908-1655    org.eclipse.mylyn.hudson.feature.group  Eclipse Mylyn\n>   Mylyn Context Connector: Eclipse IDE    3.17.0.v20150625-2044   org.eclipse.mylyn.ide_feature.feature.group Eclipse Mylyn\n>   Mylyn Context Connector: Java Development   3.17.0.v20150828-2014   org.eclipse.mylyn.java_feature.feature.group    Eclipse Mylyn\n>   Mylyn Context Connector: Team Support   3.17.0.v20150625-2044   org.eclipse.mylyn.team_feature.feature.group    Eclipse Mylyn\n>   Mylyn Task List 3.17.0.v20150909-1822   org.eclipse.mylyn_feature.feature.group Eclipse Mylyn\n>   Mylyn Task-Focused Interface    3.17.0.v20150625-2044   org.eclipse.mylyn.context_feature.feature.group Eclipse Mylyn\n>   Native JavaHL 1.8 Implementation (Optional) 5.0.1.I20151028-1700    org.polarion.eclipse.team.svn.connector.javahl18.feature.group  Polarion Software\n>   Oomph Dynamic Working Sets  1.2.0.v20150915-0926    org.eclipse.oomph.workingsets.feature.group Eclipse Oomph Project\n>   Oomph Preferences Management    1.2.0.v20150915-0926    org.eclipse.oomph.preferences.feature.group Eclipse Oomph Project\n>   Oomph Project Configuration 1.2.0.v20150915-0926    org.eclipse.oomph.projectconfig.feature.group   Eclipse Oomph Project\n>   Optimizer for Eclipse   1.0.9   com.zeroturnaround.eclipse.optimizer.feature.feature.group  ZeroTurnaround\n>   PHP Development Tools (PDT) 3.6.0.201509151953  org.eclipse.php.feature.group   Eclipse PDT\n>   PHP Development Tools (PDT) Mylyn Integration   3.6.0.201509151953  org.eclipse.php.mylyn.feature.group Eclipse PDT\n>   RegexUtil Featch    1.2.4   com.ess.regexutil.feature.group null\n>   Spring IDE Core (required)  3.7.2.201511260958-RELEASE  org.springframework.ide.eclipse.feature.feature.group   Spring IDE Developers\n>   Spring IDE Integration, Flex and Web Services Extension (optional)  3.7.2.201511260958-RELEASE  org.springframework.ide.eclipse.integration.feature.feature.group   Spring IDE Developers\n>   Spring IDE Mylyn Integration (optional) 3.7.2.201511260958-RELEASE  org.springframework.ide.eclipse.mylyn.feature.feature.group Spring IDE Developers\n>   Spring IDE Security Extension (optional)    3.7.2.201511260958-RELEASE  org.springframework.ide.eclipse.security.feature.feature.group  Spring IDE Developers\n>   Spring IDE Spring Data Support  3.7.2.201511260958-RELEASE  org.springframework.ide.eclipse.data.feature.feature.group  Spring IDE Developers\n>   Subversive Revision Graph (Optional)    3.0.0.I20150529-1700    org.eclipse.team.svn.revision.graph.feature.group   Eclipse.org\n>   Subversive SVN Connectors   5.0.2.I20151228-1700    org.polarion.eclipse.team.svn.connector.feature.group   Polarion Software\n>   Subversive SVN Integration for the Mylyn Project (Optional) 3.0.0.I20150529-1700    org.eclipse.team.svn.mylyn.feature.group    Eclipse.org\n>   Subversive SVN JDT Ignore Extensions (Optional) 3.0.0.I20150529-1700    org.eclipse.team.svn.resource.ignore.rules.jdt.feature.group    Eclipse.org\n>   Subversive SVN Team Provider    3.0.1.I20150722-1700    org.eclipse.team.svn.feature.group  Eclipse.org\n>   SVNKit 1.8.11 Implementation (Optional) 5.0.2.I20151228-1700    org.polarion.eclipse.team.svn.connector.svnkit18.feature.group  Polarion Software\n>   Swing Designer  1.8.0.r45x201506110826  org.eclipse.wb.swing.feature.feature.group  Eclipse WindowBuilder\n>   WST Server Adapters 3.2.402.v201505042029   org.eclipse.wst.server_adapters.feature.feature.group   Eclipse Web Tools Platform\n", "commits": {}, "title": "Suspect about embedded Jetty consuming a lot CPU with Logback", "created": "2016-02-17 15:47:02", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/308", "commitsDetails": [], "ttf": 19.00027777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "jmcc0nn3ll", "filteredCommits": ["73fe6715dea99fbed7db976d045b9f1278fb65c8"], "commits": {"73fe6715dea99fbed7db976d045b9f1278fb65c8": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "a8f25b550ffb2eba4fce168e81f3e8e6490972f3": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2016-02-17 15:46:40", "commitsDetails": [{"commitMessage": "Issue #306 - Merge jetty-parent into jetty-project.\n\nMoved more plugin version declarations into jetty.project's pom.\n", "commitParents": ["a8f25b550ffb2eba4fce168e81f3e8e6490972f3"], "commitHash": "73fe6715dea99fbed7db976d045b9f1278fb65c8", "commitSpoonAstDiffStats": [], "nameRev": "73fe6715dea99fbed7db976d045b9f1278fb65c8 tags/jetty-9.4.0.M1~167^2~4", "commitUser": "sbordet", "authoredDateTime": "2016-06-07 10:23:38", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 32, "filePath": "jetty-jspc-maven-plugin/pom.xml", "insertions": 15, "deletions": 17}, {"lines": 45, "filePath": "pom.xml", "insertions": 45, "deletions": 0}, {"lines": 10, "filePath": "jetty-osgi/test-jetty-osgi/pom.xml", "insertions": 0, "deletions": 10}, {"lines": 2, "filePath": "jetty-cdi/test-cdi-it/pom.xml", "insertions": 0, "deletions": 2}, {"lines": 1, "filePath": "jetty-osgi/pom.xml", "insertions": 0, "deletions": 1}, {"lines": 2, "filePath": "tests/test-jmx/jmx-webapp-it/pom.xml", "insertions": 0, "deletions": 2}, {"lines": 5, "filePath": "jetty-start/pom.xml", "insertions": 2, "deletions": 3}, {"lines": 1, "filePath": "tests/test-quickstart/pom.xml", "insertions": 0, "deletions": 1}, {"lines": 3, "filePath": "aggregates/jetty-all/pom.xml", "insertions": 0, "deletions": 3}, {"lines": 23, "filePath": "tests/test-webapps/test-servlet-spec/test-spec-webapp/pom.xml", "insertions": 2, "deletions": 21}, {"lines": 1, "filePath": "jetty-client/pom.xml", "insertions": 0, "deletions": 1}, {"lines": 1, "filePath": "tests/test-webapps/test-jndi-webapp/pom.xml", "insertions": 0, "deletions": 1}, {"lines": 22, "filePath": "jetty-maven-plugin/pom.xml", "insertions": 10, "deletions": 12}, {"lines": 1, "filePath": "jetty-websocket/websocket-client/pom.xml", "insertions": 0, "deletions": 1}, {"lines": 1, "filePath": "jetty-osgi/jetty-osgi-alpn/pom.xml", "insertions": 0, "deletions": 1}, {"lines": 1, "filePath": "jetty-websocket/pom.xml", "insertions": 0, "deletions": 1}], "commitDateTime": "2016-06-07 10:23:38", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #487 - JDK 9 build compatibility.\nFixes #306 - Merge jetty-parent into jetty-project.\n\n- Removed jetty.parent dependency, moving all relevant sections to\njetty.project's pom.xml.\n- Introduced profiles for JDK 8 only modules and configuration, and\nfor JDK 9 only modules and configurations.\n- Major cleanup of pom.xml files.\n- All Maven Plugin now declared in alphabetical order in\npluginManagement section of jetty.project's pom.xml.\n", "commitParents": ["85b3459af546d4ae808c089128bfe22a1bfd4ee4"], "commitHash": "a8f25b550ffb2eba4fce168e81f3e8e6490972f3", "commitSpoonAstDiffStats": [{"spoonFilePath": "TestJettyOSGiBootWebAppAsService.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.osgi.test.TestJettyOSGiBootWebAppAsService.testBundle()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "a8f25b550ffb2eba4fce168e81f3e8e6490972f3 tags/jetty-9.4.0.M1~167^2~5", "commitUser": "sbordet", "authoredDateTime": "2016-06-06 21:28:51", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 27, "filePath": "jetty-osgi/jetty-osgi-boot/pom.xml", "insertions": 2, "deletions": 25}, {"lines": 1, "filePath": "jetty-websocket/websocket-common/pom.xml", "insertions": 0, "deletions": 1}, {"lines": 1, "filePath": "jetty-alpn/jetty-alpn-server/pom.xml", "insertions": 0, "deletions": 1}, {"lines": 1, "filePath": "tests/test-webapps/test-proxy-webapp/pom.xml", "insertions": 0, "deletions": 1}, {"lines": 1040, "filePath": "pom.xml", "insertions": 692, "deletions": 348}, {"lines": 27, "filePath": "apache-jsp/pom.xml", "insertions": 2, "deletions": 25}, {"lines": 2, "filePath": "header-template.txt", "insertions": 1, "deletions": 1}, {"lines": 1, "filePath": "tests/pom.xml", "insertions": 0, "deletions": 1}, {"lines": 74, "filePath": "tests/test-http-client-transport/pom.xml", "insertions": 44, "deletions": 30}, {"lines": 123, "filePath": "jetty-osgi/test-jetty-osgi-context/pom.xml", "insertions": 50, "deletions": 73}, {"lines": 1, "filePath": "jetty-cdi/test-cdi-webapp/pom.xml", "insertions": 0, "deletions": 1}, {"lines": 7, "filePath": "tests/test-continuation/pom.xml", "insertions": 3, "deletions": 4}, {"lines": 23, "filePath": "tests/test-webapps/test-servlet-spec/test-container-initializer/pom.xml", "insertions": 0, "deletions": 23}, {"lines": 9, "filePath": "tests/test-webapps/test-jndi-webapp/pom.xml", "insertions": 1, "deletions": 8}, {"lines": 17, "filePath": "jetty-documentation/pom.xml", "insertions": 0, "deletions": 17}, {"lines": 23, "filePath": "jetty-osgi/jetty-osgi-httpservice/pom.xml", "insertions": 0, "deletions": 23}, {"lines": 75, "filePath": "jetty-http2/http2-alpn-tests/pom.xml", "insertions": 42, "deletions": 33}, {"lines": 51, "filePath": "jetty-websocket/pom.xml", "insertions": 23, "deletions": 28}, {"lines": 16, "filePath": "jetty-osgi/test-jetty-osgi/src/test/java/org/eclipse/jetty/osgi/test/TestJettyOSGiBootWebAppAsService.java", "insertions": 7, "deletions": 9}, {"lines": 3, "filePath": "examples/async-rest/pom.xml", "insertions": 1, "deletions": 2}, {"lines": 1, "filePath": "tests/test-webapps/test-jetty-webapp/pom.xml", "insertions": 0, "deletions": 1}, {"lines": 6, "filePath": "tests/test-jmx/jmx-webapp/pom.xml", "insertions": 0, "deletions": 6}, {"lines": 18, "filePath": "jetty-osgi/test-jetty-osgi/pom.xml", "insertions": 10, "deletions": 8}, {"lines": 28, "filePath": "jetty-osgi/jetty-osgi-boot-warurl/pom.xml", "insertions": 2, "deletions": 26}, {"lines": 3, "filePath": "examples/pom.xml", "insertions": 1, "deletions": 2}, {"lines": 23, "filePath": "jetty-osgi/jetty-osgi-boot-jsp/pom.xml", "insertions": 0, "deletions": 23}, {"lines": 73, "filePath": "jetty-http2/http2-http-client-transport/pom.xml", "insertions": 41, "deletions": 32}, {"lines": 1, "filePath": "tests/test-webapps/pom.xml", "insertions": 0, "deletions": 1}, {"lines": 17, "filePath": "jetty-infinispan/pom.xml", "insertions": 0, "deletions": 17}, {"lines": 1, "filePath": "examples/embedded/pom.xml", "insertions": 0, "deletions": 1}, {"lines": 3, "filePath": "tests/test-quickstart/pom.xml", "insertions": 1, "deletions": 2}, {"lines": 108, "filePath": "jetty-osgi/test-jetty-osgi-webapp/pom.xml", "insertions": 39, "deletions": 69}], "commitDateTime": "2016-06-06 21:28:51", "spoonStatsSkippedReason": ""}], "title": "Merge jetty-parent into jetty-project", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0, "insertions": 0, "gitFilesChange": 0, "deletions": 0}, "closed": "2016-06-06 19:43:32", "statsSkippedReason": "", "body": "migrated from Bugzilla [#487521](https://bugs.eclipse.org/bugs/show_bug.cgi?id=487521)\nstatus NEW severity _trivial_ in component _build_ for _9.3.x_\nReported in version _9.3.5_ on platform _All_\nAssigned to: Jesse McConnell\n\nOn 2016-02-09 11:07:34 -0500, Joakim Erdfelt wrote:\n\n> As part of the effort to move to github.com/eclipse/jetty.project ...\n> \n> Merge the relevant pieces of jetty-parent into jetty-project.\n> \n> Remove the defunct/deprecated parts of jetty-parent in the process.\n", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 110.00027777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/306"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "jmcc0nn3ll", "filteredCommits": ["8af356bc0d4b8fec572311e4cd319270a3ed68da"], "commits": {"8af356bc0d4b8fec572311e4cd319270a3ed68da": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2016-02-17 15:46:26", "commitsDetails": [{"commitMessage": "Issue #305 (NPE when notifying the session listener if the channel is closed before a session has been opened)\n\nAdded guard against NPE. It was needed since the connection may not\nbe present if the connect operation failed.\n", "commitParents": ["3b0f577aed8b41a97b756047875b6f7f0f319e74"], "commitHash": "8af356bc0d4b8fec572311e4cd319270a3ed68da", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpClientTransportOverHTTP2.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.client.http.HttpClientTransportOverHTTP2.SessionListenerPromise.onFailure(org.eclipse.jetty.http2.api.Session,java.lang.Throwable)", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 2, "TOT": 5}]}, {"spoonFilePath": "HttpClientTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.client.HttpClientTest.testClientCannotValidateServerCertificate()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AbstractTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.client.AbstractTest.provideClientTransport(org.eclipse.jetty.http.client.AbstractTest$Transport)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "8af356bc0d4b8fec572311e4cd319270a3ed68da tags/jetty-9.3.8.v20160311~22", "commitUser": "sbordet", "authoredDateTime": "2016-03-07 17:00:52", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 31, "filePath": "tests/test-http-client-transport/src/test/java/org/eclipse/jetty/http/client/HttpClientTest.java", "insertions": 31, "deletions": 0}, {"lines": 2, "filePath": "tests/test-http-client-transport/src/test/java/org/eclipse/jetty/http/client/AbstractTest.java", "insertions": 1, "deletions": 1}, {"lines": 4, "filePath": "jetty-http2/http2-http-client-transport/src/main/java/org/eclipse/jetty/http2/client/http/HttpClientTransportOverHTTP2.java", "insertions": 3, "deletions": 1}], "commitDateTime": "2016-03-07 17:00:52", "spoonStatsSkippedReason": ""}], "title": "NPE when notifying the session listener if the channel is closed before a session has been opened", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 1, "INS": 2, "UPD": 0, "MOV": 2, "TOT": 5, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 4, "insertions": 3, "gitFilesChange": 1, "deletions": 1}, "closed": "2016-03-07 16:03:07", "statsSkippedReason": "", "body": "migrated from Bugzilla [#487926](https://bugs.eclipse.org/bugs/show_bug.cgi?id=487926)\nstatus NEW severity _major_ in component _http2_ for _9.3.x_\nReported in version _9.3.7_ on platform _PC_\nAssigned to: Simone Bordet\n\nOn 2016-02-17 06:00:43 -0500, Jude Pereira wrote:\n\n> Using the HttpClientTransportOverHTTP2, if the channel is closed before a session is opened, an NPE is generated.\n> \n> Using the sources to http2-http-client-transport-9.3.7.v20160115:\n> 1. The connection object declared on line 144 of class HttpClientTransportOverHTTP2 remains null if the method SessionListenerPromise#succeeded is never called.\n> 2. Now, if the connection is closed due to a ChannelClosedException, SessionListenerPromise#onFailure (line 194) is called.\n> 3. Since the connection in the SessionListenerPromise is null (as succeeded was not called), an NPE is generated.\n> \n> Here's a stack trace:\n> [HttpClient@380242442-14] INFO org.eclipse.jetty.http2.HTTP2Session - Failure while notifying listener org.eclipse.jetty.http2.client.http.HttpClientTransportOverHTTP2$SessionListenerPromise@2f02d770\n> java.lang.NullPointerException\n>   at org.eclipse.jetty.http2.client.http.HttpClientTransportOverHTTP2$SessionListenerPromise.onFailure(HttpClientTransportOverHTTP2.java:196)\n>   at org.eclipse.jetty.http2.HTTP2Session.notifyFailure(HTTP2Session.java:1021)\n>   at org.eclipse.jetty.http2.HTTP2Session.abort(HTTP2Session.java:930)\n>   at org.eclipse.jetty.http2.HTTP2Session.onShutdown(HTTP2Session.java:818)\n>   at org.eclipse.jetty.http2.HTTP2Connection$HTTP2Producer.produce(HTTP2Connection.java:191)\n>   at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceAndRun(ExecuteProduceConsume.java:162)\n>   at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.execute(ExecuteProduceConsume.java:101)\n>   at org.eclipse.jetty.http2.HTTP2Connection.onFillable(HTTP2Connection.java:97)\n>   at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:273)\n>   at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)\n>   at org.eclipse.jetty.io.ssl.SslConnection.onFillable(SslConnection.java:197)\n>   at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:273)\n>   at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)\n>   at org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:75)\n>   at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceAndRun(ExecuteProduceConsume.java:213)\n>   at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:147)\n>   at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:654)\n>   at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n>   at java.lang.Thread.run(Thread.java:745)\n", "changesInPackagesGIT": ["jetty-http2/http2-http-client-transport/src/main/java/org/eclipse/jetty/http2/client"], "changesInPackagesSPOON": ["org.eclipse.jetty.http2.client.http.HttpClientTransportOverHTTP2.SessionListenerPromise.onFailure(org.eclipse.jetty.http2.api.Session,java.lang.Throwable)"], "ttf": 19.00027777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/305"}, {"labels": ["Bug"], "closed": "2016-02-21 22:00:29", "body": "migrated from Bugzilla [#487760](https://bugs.eclipse.org/bugs/show_bug.cgi?id=487760)\nstatus ASSIGNED severity _normal_ in component _servlet-3.1_ for _9.3.x_\nReported in version _9.3.7_ on platform _PC_\nAssigned to: Jan Bartel\n\nOn 2016-02-12 13:52:35 -0500, Xiaodong Wang wrote:\n\n> Memory leak when using Servlet async IO, one java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask for each request, which should be cleaned once the request is completed.\n> \n> You can reproduce this issue by sending several thousand requests to the sample servlet from https://github.com/eclipse/jetty.project/blob/master/examples/embedded/src/main/java/org/eclipse/jetty/embedded/AsyncEchoServlet.java\n\nOn 2016-02-15 12:23:47 -0500, Jan Bartel wrote:\n\n> Hi,\n> \n> I haven't been able to reproduce the problem. \n> \n> Can you please describe in detail how you're sending the requests, including what tool you're using to generate the requests, and an example of a generated request.  Please also attach the information you have that leads you to suspect there is one ScheduledFutureTask per request.\n> \n> regards\n> Jan\n", "commits": {}, "title": "Memory leak in Servlet async IO", "created": "2016-02-16 23:48:29", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/299", "commitsDetails": [], "ttf": 4.000277777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "jmcc0nn3ll", "filteredCommits": ["e09396db4ef5800160a77cb0f08388a140e2432a", "5ddb176f6bb3ba9367bb3f19e2e05e0a35af3a95"], "commits": {"e09396db4ef5800160a77cb0f08388a140e2432a": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "5ddb176f6bb3ba9367bb3f19e2e05e0a35af3a95": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2016-02-16 23:48:20", "commitsDetails": [{"commitMessage": "Issue #298 (qtp threads spin-locked in MBeanContainer.beanAdded).\n\nReplaced WeakHashMap with ConcurrentMap.\nThe \"weak\" features of WHM were not used anyway.\n", "commitParents": ["df32714e8d00d3233a3ac28c97d96232a409edc3"], "commitHash": "e09396db4ef5800160a77cb0f08388a140e2432a", "commitSpoonAstDiffStats": [{"spoonFilePath": "MBeanContainer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.jmx.MBeanContainer.findBean(javax.management.ObjectName)", "DEL": 3, "INS": 1, "UPD": 2, "MOV": 5, "TOT": 11}, {"spoonMethodName": "org.eclipse.jetty.jmx.MBeanContainer.destroy()", "DEL": 2, "INS": 1, "UPD": 4, "MOV": 7, "TOT": 14}, {"spoonMethodName": "org.eclipse.jetty.jmx.MBeanContainer.dump(java.lang.Appendable,java.lang.String)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 2, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.jmx.MBeanContainer.findMBean(java.lang.Object)", "DEL": 2, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 4}, {"spoonMethodName": "javax.management.MBeanException", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.jmx.MBeanContainer.beanRemoved(org.eclipse.jetty.util.component.Container,java.lang.Object)", "DEL": 2, "INS": 2, "UPD": 3, "MOV": 5, "TOT": 12}, {"spoonMethodName": "org.eclipse.jetty.jmx.MBeanContainer.unregister(javax.management.ObjectName)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.jmx.MBeanContainer.beanAdded(org.eclipse.jetty.util.component.Container,java.lang.Object)", "DEL": 4, "INS": 6, "UPD": 20, "MOV": 25, "TOT": 55}, {"spoonMethodName": "org.eclipse.jetty.jmx.MBeanContainer.makeName(java.lang.String)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.jmx.MBeanContainer", "DEL": 2, "INS": 0, "UPD": 2, "MOV": 1, "TOT": 5}]}], "nameRev": "e09396db4ef5800160a77cb0f08388a140e2432a tags/jetty-9.3.8.RC0~10", "commitUser": "sbordet", "authoredDateTime": "2016-02-19 16:32:44", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 193, "filePath": "jetty-jmx/src/main/java/org/eclipse/jetty/jmx/MBeanContainer.java", "insertions": 86, "deletions": 107}], "commitDateTime": "2016-02-19 16:32:44", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #298 spin-locked in MBeanContainer\n\nprotected the _beans map with a Lock\n", "commitParents": ["ba132dfb0fbdbcc0fe73bbc27d05491cfc195412"], "commitHash": "5ddb176f6bb3ba9367bb3f19e2e05e0a35af3a95", "commitSpoonAstDiffStats": [{"spoonFilePath": "MBeanContainer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.jmx.MBeanContainer.findBean(javax.management.ObjectName)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.jmx.MBeanContainer.dump(java.lang.Appendable,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.jmx.MBeanContainer.destroy()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.jmx.MBeanContainer.findMBean(java.lang.Object)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.jmx.MBeanContainer.beanRemoved(org.eclipse.jetty.util.component.Container,java.lang.Object)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.jmx.MBeanContainer.beanAdded(org.eclipse.jetty.util.component.Container,java.lang.Object)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 12, "TOT": 14}, {"spoonMethodName": "org.eclipse.jetty.jmx.MBeanContainer", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "5ddb176f6bb3ba9367bb3f19e2e05e0a35af3a95 tags/jetty-9.3.8.RC0~21", "commitUser": "gregw", "authoredDateTime": "2016-02-17 16:05:28", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 124, "filePath": "jetty-jmx/src/main/java/org/eclipse/jetty/jmx/MBeanContainer.java", "insertions": 70, "deletions": 54}], "commitDateTime": "2016-02-17 16:07:31", "spoonStatsSkippedReason": ""}], "title": "qtp threads spin-locked in MBeanContainer.beanAdded", "spoonStatsSummary": {"spoonMethodsChanged": 10, "DEL": 18, "INS": 21, "UPD": 32, "MOV": 66, "TOT": 137, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 317, "insertions": 156, "gitFilesChange": 1, "deletions": 161}, "closed": "2016-02-19 15:36:21", "statsSkippedReason": "", "body": "migrated from Bugzilla [#487745](https://bugs.eclipse.org/bugs/show_bug.cgi?id=487745)\nstatus NEW severity _critical_ in component _websocket_ for _9.3.x_\nReported in version _9.3.7_ on platform _PC_\nAssigned to: Joakim Erdfelt\n\nOn 2016-02-12 10:19:10 -0500, Kristoffer Erlandsson wrote:\n\n> After upgrading Jetty we started running into issues where several of our qtp threads were spin-locked with the stack trace below.\n> \n> We have had similar problems before, with spin-locks in hashmaps and they have always been caused by unsynchronized access to a thread-unsafe Map.\n> \n> From what I can tell, accesses to the WeakHashMap in question (_beans in MBeanContainer) are not synchronized and evidently the map is accessed concurrently by the qtp threads.\n> \n> \"qtp1807837413-2270\" # 2270 prio=5 os_prio=0 tid=0x00007f650772e000 nid=0x75a7 runnable [0x00007f6510d1b000]\n>    java.lang.Thread.State: RUNNABLE\n>         at java.util.WeakHashMap.getEntry(WeakHashMap.java:431)\n>         at java.util.WeakHashMap.containsKey(WeakHashMap.java:417)\n>         at org.eclipse.jetty.jmx.MBeanContainer.beanAdded(MBeanContainer.java:148)\n>         at org.eclipse.jetty.util.component.ContainerLifeCycle.addEventListener(ContainerLifeCycle.java:366)\n>         at org.eclipse.jetty.util.component.ContainerLifeCycle.addBean(ContainerLifeCycle.java:256)\n>         at org.eclipse.jetty.util.component.ContainerLifeCycle.addBean(ContainerLifeCycle.java:244)\n>         at org.eclipse.jetty.util.component.ContainerLifeCycle.manage(ContainerLifeCycle.java:411)\n>         at org.eclipse.jetty.util.component.ContainerLifeCycle.addBean(ContainerLifeCycle.java:274)\n>         at org.eclipse.jetty.util.component.ContainerLifeCycle.addBean(ContainerLifeCycle.java:243)\n>         at org.eclipse.jetty.util.component.ContainerLifeCycle.addManaged(ContainerLifeCycle.java:339)\n>         at org.eclipse.jetty.websocket.server.WebSocketServerFactory.upgrade(WebSocketServerFactory.java:612)\n>         at org.eclipse.jetty.websocket.server.WebSocketServerFactory.acceptWebSocket(WebSocketServerFactory.java:197)\n>         at org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter.doFilter(WebSocketUpgradeFilter.java:207)\n>         at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1668)\n>         at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:581)\n>         at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)\n>         at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:548)\n>         at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226)\n>         at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1158)\n>         at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:511)\n>         at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185)\n>         at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1090)\n>         at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\n>         at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:109)\n>         at org.eclipse.jetty.server.handler.StatisticsHandler.handle(StatisticsHandler.java:169)\n>         at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:119)\n>         at org.eclipse.jetty.server.Server.handle(Server.java:517)\n>         at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:308)\n>         at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:242)\n>         at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:273)\n>         at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)\n>         at org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:75)\n>         at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceAndRun(ExecuteProduceConsume.java:213)\n>         at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:147)\n>         at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:654)\n>         at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n>         at java.lang.Thread.run(Thread.java:745)\n", "changesInPackagesGIT": ["jetty-jmx/src/main/java/org/eclipse/jetty/jmx"], "changesInPackagesSPOON": ["org.eclipse.jetty.jmx.MBeanContainer.findBean(javax.management.ObjectName)", "javax.management.MBeanException", "org.eclipse.jetty.jmx.MBeanContainer.destroy()", "org.eclipse.jetty.jmx.MBeanContainer.findMBean(java.lang.Object)", "org.eclipse.jetty.jmx.MBeanContainer.beanAdded(org.eclipse.jetty.util.component.Container,java.lang.Object)", "org.eclipse.jetty.jmx.MBeanContainer.beanRemoved(org.eclipse.jetty.util.component.Container,java.lang.Object)", "org.eclipse.jetty.jmx.MBeanContainer.unregister(javax.management.ObjectName)", "org.eclipse.jetty.jmx.MBeanContainer.dump(java.lang.Appendable,java.lang.String)", "org.eclipse.jetty.jmx.MBeanContainer.makeName(java.lang.String)", "org.eclipse.jetty.jmx.MBeanContainer"], "ttf": 2.000277777777778, "numCommits": 2, "url": "https://github.com/eclipse/jetty.project/issues/298"}, {"labels": ["Bug"], "closed": "2016-04-01 13:23:14", "body": "migrated from Bugzilla [#487680](https://bugs.eclipse.org/bugs/show_bug.cgi?id=487680)\nstatus NEW severity _normal_ in component _client_ for _9.3.x_\nReported in version _9.3.7_ on platform _PC_\nAssigned to: Simone Bordet\n\nOn 2016-02-11 10:56:39 -0500, Jakub Migas wrote:\n\n> Hi,\n> In scenario server side certificate is expired.\n> `HttpClient` during connection to `https://localhost:8443/hello` TLSv1.2 Jetty 8.1.12 server has random onResponseFailure method failure exception: mostly `SSLHandshakeException` but 1/10 is jetty or java `EofException` or `ClosedChannelException`.\n", "commits": {}, "title": "HttpClient return onResponseFailure random failure - TLS expired cert", "created": "2016-02-16 23:48:11", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/297", "commitsDetails": [], "ttf": 44.000277777777775}, {"labels": ["Bug"], "closed": "2017-03-01 14:57:32", "body": "migrated from Bugzilla [#487398](https://bugs.eclipse.org/bugs/show_bug.cgi?id=487398)\nstatus NEW severity _normal_ in component _websocket_ for _9.3.x_\nReported in version _9.2.14_ on platform _All_\nAssigned to: Joakim Erdfelt\n\nOn 2016-02-07 03:14:41 -0500, Laszlo Valko wrote:\n\n> When a websocket connection times out, AbstractWebSocketConnection sends a \n> SocketTimeoutException exception as a notification to the onWebSocketError handler:\n> \n> session.notifyError(new SocketTimeoutException(\"Timeout on Read\"));\n> \n> According to the documentation, a standard behaviour for this notification handler is to print it as as error:\n> \n> cause.printStackTrace(System.err);\n> \n> http://www.eclipse.org/jetty/documentation/current/jetty-websocket-api-listener.html\n> \n> Socket timeout is definitely not an error in this respect, it is a total standard thing happening relatively often when websockets are used. Printing the exception as an error pollutes logs, and Atmosphere for example is doing exactly that.\n> \n> So there are two possible solutions:\n> - declare that onWebSocketError might receive exceptions that are not errors and should not be logged as such, and update documentation accordingly,\n> - stop calling notifyError for websocket timeouts - use some other notification or omit sending any.\n", "commits": {}, "title": "SocketTimeoutException is sent to onWebSocketError", "created": "2016-02-16 23:47:57", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/296", "commitsDetails": [], "ttf": 378.0002777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "jmcc0nn3ll", "filteredCommits": ["407111a79630b9f79a377c1ee5ef96fc09ddbe46"], "commits": {"f8b2979a8f8202ea3b670a724ca4b0a224d85e43": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "407111a79630b9f79a377c1ee5ef96fc09ddbe46": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2016-02-16 23:47:45", "commitsDetails": [{"commitMessage": "Issue #295 Ensure Jetty Client use of Deflater calls .end() to avoid memory leak (#986)\n\n* Issue #295 Ensure Jetty Client use of Inflater calls .end() to avoid memory leak\r\n\r\nSigned-off-by: Sergiu Prodan <p.sergiu92@gmail.com>", "commitParents": ["fc447fe2a303eb8f7c87e390845f9b09f991d5bc"], "commitHash": "f8b2979a8f8202ea3b670a724ca4b0a224d85e43", "commitSpoonAstDiffStats": [{"spoonFilePath": "GZIPContentDecoder.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.GZIPContentDecoder.destroy()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpReceiver.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpReceiver.dispose()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.HttpReceiver.destroyDecoder(org.eclipse.jetty.client.ContentDecoder)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.HttpReceiver.reset()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "f8b2979a8f8202ea3b670a724ca4b0a224d85e43 tags/jetty-9.4.0.RC1~4^2~2^2~4", "commitUser": "sbordet", "authoredDateTime": "2016-10-06 17:10:37", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 11, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpReceiver.java", "insertions": 11, "deletions": 0}, {"lines": 9, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/GZIPContentDecoder.java", "insertions": 8, "deletions": 1}], "commitDateTime": "2016-10-06 16:10:37", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #295 Ensure Jetty Client use of Inflater calls .end() to avoid memory leak\n\nSigned-off-by: Sergiu Prodan <p.sergiu92@gmail.com>\n", "commitParents": ["863913b64ebfe9041457060f267a5867601e099d"], "commitHash": "407111a79630b9f79a377c1ee5ef96fc09ddbe46", "commitSpoonAstDiffStats": [{"spoonFilePath": "GZIPContentDecoder.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.GZIPContentDecoder.destroy()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpReceiver.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpReceiver.dispose()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.HttpReceiver.destroyDecoder(org.eclipse.jetty.client.ContentDecoder)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.HttpReceiver.reset()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "407111a79630b9f79a377c1ee5ef96fc09ddbe46 tags/jetty-9.3.13.v20161014~9", "commitUser": "sbordet", "authoredDateTime": "2016-10-06 17:10:37", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 11, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpReceiver.java", "insertions": 11, "deletions": 0}, {"lines": 9, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/GZIPContentDecoder.java", "insertions": 8, "deletions": 1}], "commitDateTime": "2016-10-06 16:12:53", "spoonStatsSkippedReason": ""}], "title": "Ensure Jetty Client use of Deflater / Inflater calls .end() to avoid memory leak", "spoonStatsSummary": {"spoonMethodsChanged": 4, "DEL": 0, "INS": 4, "UPD": 0, "MOV": 0, "TOT": 4, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 20, "insertions": 19, "gitFilesChange": 2, "deletions": 1}, "closed": "2016-10-06 14:38:13", "statsSkippedReason": "", "body": "migrated from Bugzilla [#487275](https://bugs.eclipse.org/bugs/show_bug.cgi?id=487275)\nstatus NEW severity _normal_ in component _client_ for _9.3.x_\nReported in version _9.3.7_ on platform _All_\nAssigned to: Simone Bordet\n\nOn 2016-02-04 13:52:00 -0500, Joakim Erdfelt wrote:\n\n> A code review task for jetty-client and its use of Deflater/Inflater.\n> \n> As encountered on the WebSocket side in bug # 487197.\n> \n> If you don't explicitly call Deflater.end() or Inflater.end() you run the risk (a low risk) of having the Deflater/Inflater not be cleaned up by the GC.\n", "changesInPackagesGIT": ["jetty-client/src/main/java/org/eclipse/jetty/client"], "changesInPackagesSPOON": ["org.eclipse.jetty.client.HttpReceiver.destroyDecoder(org.eclipse.jetty.client.ContentDecoder)", "org.eclipse.jetty.client.HttpReceiver.reset()", "org.eclipse.jetty.client.HttpReceiver.dispose()", "org.eclipse.jetty.client.GZIPContentDecoder.destroy()"], "ttf": 232.00027777777777, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/295"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 2, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "jmcc0nn3ll", "filteredCommits": [], "commits": {"fc72e3932f85f4821f637f786574b38edebd19ea": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "4ababf9888e46593f788535a6ece11414f866ed6": {"commitUser": "janbartel", "commitGHEventType": "referenced"}, "ba335e473b689cab751fd3cb97e39b9d5f59bcae": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2016-02-16 23:47:34", "commitsDetails": [{"commitMessage": "", "commitParents": [], "commitHash": "fc72e3932f85f4821f637f786574b38edebd19ea", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "janbartel", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #294 Initial enter scope for DebugListener (#3021)\n\nSigned-off-by: Jan Bartel <janb@webtide.com>", "commitParents": ["8eb21f84a37e08af70c985b56275cec4d19b9bd0"], "commitHash": "4ababf9888e46593f788535a6ece11414f866ed6", "commitSpoonAstDiffStats": [{"spoonFilePath": "ContextHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.addEventListener(java.util.EventListener)", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 3, "TOT": 6}]}], "nameRev": "4ababf9888e46593f788535a6ece11414f866ed6 tags/jetty-9.4.13.v20181111~38", "commitUser": "janbartel", "authoredDateTime": "2018-10-23 17:29:54", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 4, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/ContextHandler.java", "insertions": 4, "deletions": 0}], "commitDateTime": "2018-10-23 17:29:54", "spoonStatsSkippedReason": ""}, {"commitMessage": "", "commitParents": [], "commitHash": "ba335e473b689cab751fd3cb97e39b9d5f59bcae", "commitSpoonAstDiffStats": [], "nameRev": "", "commitUser": "sbordet", "authoredDateTime": "", "commitGHEventType": "referenced", "commitGitStats": [], "commitDateTime": "", "spoonStatsSkippedReason": ""}], "title": "DebugListener can't log enterScope events", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0.0, "INS": 0.0, "UPD": 0.0, "MOV": 0.0, "TOT": 0.0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0.0, "insertions": 0.0, "gitFilesChange": 0, "deletions": 0.0}, "closed": "2018-10-23 06:30:31", "statsSkippedReason": "", "body": "migrated from Bugzilla [#487200](https://bugs.eclipse.org/bugs/show_bug.cgi?id=487200)\nstatus NEW severity _normal_ in component _server_ for _9.3.x_\nReported in version _9.3.7_ on platform _All_\nAssigned to: Project Inbox\n\nOn 2016-02-04 04:55:39 -0500, Jan Bartel wrote:\n\n> As the DebugListener is a ServletContextListener that instantiates and adds a ContextScopeListener when its contextInitialized() method is called, it is too late for it to be able to log scope entry inside ContextHandler.doStart(). This has become apparent after bug https://bugs.eclipse.org/bugs/show_bug.cgi?id=487198 was fixed.\n", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 979.0002777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/294"}, {"labels": ["Bug"], "closed": "2018-07-18 13:16:30", "body": "migrated from Bugzilla [#487197](https://bugs.eclipse.org/bugs/show_bug.cgi?id=487197)\nstatus ASSIGNED severity _major_ in component _websocket_ for _9.3.x_\nReported in version _9.3.7_ on platform _PC_\nAssigned to: Joakim Erdfelt\n\nOriginal attachment names and IDs:\n- _[heap.png](https://bugs.eclipse.org/bugs//attachment.cgi?id=259559)_ (ID 259559)\n\nOn 2016-02-04 04:44:22 -0500, Rafael Campos wrote:\n\n> Created attachment 259559\n> Heap usage during the leak\n> \n> It seems that there is a non-heap memory leak when connection to Websocket is established using the permessage-deflate extension. I've tried connecting and disconnecting 1000 websockets again and again, without sending or receiving anything, and the RSS size of the process grows from 3.8G (I'm using -Xmx3072m -Xms3072m -XX:+UseConcMarkSweepGC) up to all the memory available in the system (I've seen up to 7.3G), but the heap remains at around 1G or 1.5G (see attached file).\n> \n> If I repeat the same test without enabling the compression in the client (not sending the permessage-deflate extension header), there is no such leak and the memory remains stable.\n> \n> With compression enabled, each bunch of 1k sockets will consume around 70/80M extra of memory that is not freed after they are disconnected, even forcing GC with JConsole or calling to the method   System.runFinalization(); to ensure thay the finalize() methods of the deflaters/inflaters are called.\n> \n> I think the offending lines are in the CompressExtension class, as if I replace the following lines in the constructor:\n> \n> ```\n>     deflater = new Deflater(Deflater.DEFAULT_COMPRESSION,NOWRAP);\n>     inflater = new Inflater(NOWRAP);\n> ```\n> \n> By:\n> \n> ```\n>     deflater = null;\n>     inflater = null;\n> ```\n> \n> There is no such leak in the connection but obviously I can't send/receiving anything as I will only get NPEs.\n\nOn 2016-02-04 12:20:48 -0500, Joakim Erdfelt wrote:\n\n> Been analyzing this via jmap, dumped hprofs, and Eclipse MemoryAnalyzer.\n> \n> The WebSocket session, and extensions are being cleaned up.\n> However, it seems the Deflater and Inflater instances are getting hung up in their own java.lang.ref.Finalizer (_boggle_)?\n> \n> Going to try to either be explicit with .end() or possibly introduce Deflater and Inflater object pools (_grumble_)\n\nOn 2016-02-04 12:40:12 -0500, Rafael Campos wrote:\n\n> Thanks Joakim.\n> \n> I am working in a workaround with a pool of Deflaters/Inflaters and the initial tests look promising. At least, the RSS memory is not increasing forever. If you want, I can attach a patch tomorrow so you can test and evaluate it.\n> \n> The only issue that concerns me is that right now I have it \"capped\" so I create as much X instances. That works for us, as we know the number of users of our servers, but I don\u00c2\u00b4t now if it is reasonable as a general solution.\n\nOn 2016-02-04 13:04:18 -0500, Joakim Erdfelt wrote:\n\n> Seems we are getting caught up in 2 JVM bugs.\n> \n> http://bugs.java.com/view_bug.do?bug_id=4797189\n> http://bugs.java.com/view_bug.do?bug_id=6293787\n> \n> The recommendations are to call .end() on each Deflater/Inflater that is instantiated.\n> \n> I've implemented that in [jetty-9.3.x] branch just now.\n\nOn 2016-02-04 13:05:56 -0500, Joakim Erdfelt wrote:\n\n> See commit [jetty-9.3.x cfe823a].\n> \n> Please give it a try.\n\nOn 2016-02-04 13:07:12 -0500, Joakim Erdfelt wrote:\n\n> Link to commit\n> \n> http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/commit/?h=jetty-9.3.x&id=SHA: cfe823a7d6edab044d4a1751dd3dfa2dda89c3e6\n\nOn 2016-02-04 14:16:18 -0500, Rafael Campos wrote:\n\n> I will test that tomorrow ASAP and will report the results, as right now I have no access to the code.\n> \n> BTW, I was debugging and it seems that the garbage collector invokes (at some point in time...) the method finalize() which leads to a call to the end() method, but the leak was still there. Maybe at this point the Deflater/Inflater has lost some internal references and that is causing the leak and calling it \"manually\" instead of waiting for the GC to finalize the object fixes the issue.\n\nOn 2016-02-05 06:43:16 -0500, Rafael Campos wrote:\n\n> I have been testing this but it doesn't seems to work. The leak is not so obvious now as it doesn't start until we start sending/receiving data (I think due to the inflater/deflater instantiation is now delayed) but again I've been able to raise the RSS size of the JVM up to 5G with just 3G of heap.\n> \n> It seems that the JVM itself doesn't know about this extra memory as addint the option -XX:NativeMemoryTracking=detail to the JVM and setting a baseline at some point the increment of the memory is not consistent with the increase in the actual size of the JVM in the system.\n> \n> Also, taking a look to /proc/{pid}/smaps I can see several blocks as the following one:\n> \n> 7f1aa0000000-7f1aa4000000 rw-p 00000000 00:00 0 \n> Size:              65536 kB\n> Rss:               64136 kB\n> Pss:               64136 kB\n> Shared_Clean:          0 kB\n> Shared_Dirty:          0 kB\n> Private_Clean:         0 kB\n> Private_Dirty:     64136 kB\n> Referenced:        64136 kB\n> Anonymous:         64136 kB\n> AnonHugePages:         0 kB\n> Swap:                  0 kB\n> KernelPageSize:        4 kB\n> MMUPageSize:           4 kB\n> Locked:                0 kB\n> \n> And taking a look to the memory in that position (gdb --batch --pid {pid} -ex \"dump memory test 0x7f1aa0000000 0x7f1aa4000000\") I can see the messages that have been sent through websocket with a hexadecimal editor, so I guess this is the memory leaked by the inflaters/deflaters.\n", "commits": {}, "title": "Deflater/Inflater memory leak with WebSocket permessage-deflate extension", "created": "2016-02-16 23:47:32", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/293", "commitsDetails": [], "ttf": 882.0002777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "jmcc0nn3ll", "filteredCommits": ["be93a1ff314780949c316dfd7aad7e670b58126e"], "commits": {"be93a1ff314780949c316dfd7aad7e670b58126e": {"commitUser": "sbordet", "commitGHEventType": "closed"}}, "created": "2016-02-16 23:47:19", "commitsDetails": [{"commitMessage": "Fixes #292 - NPE in SslConnectionFactory newConnection.\n\nConnectionFactories may be added after the connector is started.\nAs such there is always the possibility that creating a new\nconnection fails because there is no available ConnectionFactory for\nthat protocol.\n\nRather than failing with an IllegalStateException instead of a\nNullPointerException, we now check at connector start whether the\nSslConnectionFactory is properly configured.\nThis should catch 99% of the cases, where the connector is\nmisconfigured, reporting the error earlier and explicitly\n(connector does not start) rather later and hidden (connection cannot\n be created).\n", "commitParents": ["ad8bdde4f3f3bfd9458e0bb4de33ba6536f58606"], "commitHash": "be93a1ff314780949c316dfd7aad7e670b58126e", "commitSpoonAstDiffStats": [{"spoonFilePath": "SslConnectionFactoryTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.ssl.SslConnectionFactoryTest.testServerWithoutHttpConnectionFactory()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "SslConnectionFactory.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.SslConnectionFactory.getNextProtocol()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AbstractConnector.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.AbstractConnector.doStart()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}]}], "nameRev": "be93a1ff314780949c316dfd7aad7e670b58126e tags/jetty-9.4.0.RC1~4^2~6", "commitUser": "sbordet", "authoredDateTime": "2016-10-17 19:14:01", "commitGHEventType": "closed", "commitGitStats": [{"lines": 8, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/AbstractConnector.java", "insertions": 8, "deletions": 0}, {"lines": 5, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/SslConnectionFactory.java", "insertions": 5, "deletions": 0}, {"lines": 8, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/ssl/SslConnectionFactoryTest.java", "insertions": 8, "deletions": 0}], "commitDateTime": "2016-10-17 19:14:01", "spoonStatsSkippedReason": ""}], "title": "NPE in SslConnectionFactory newConnection", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 0, "INS": 3, "UPD": 0, "MOV": 0, "TOT": 3, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 13, "insertions": 13, "gitFilesChange": 2, "deletions": 0}, "closed": "2016-10-17 17:14:30", "statsSkippedReason": "", "body": "migrated from Bugzilla [#487184](https://bugs.eclipse.org/bugs/show_bug.cgi?id=487184)\nstatus NEW severity _normal_ in component _server_ for _9.3.x_\nReported in version _9.3.7_ on platform _Macintosh_\nAssigned to: Project Inbox\n\nOriginal attachment names and IDs:\n- _[HelloWorld.java](https://bugs.eclipse.org/bugs//attachment.cgi?id=259555)_ (ID 259555)\n\nOn 2016-02-04 02:23:39 -0500, Ethan Lozano wrote:\n\n> Created attachment 259555\n> HTTPS enabled hello world app which exposes NPE\n> \n> When a user forgets to pass in an HttpConnectionFactory into a ServerConnector, then an NPE happens in SslConnectionFactory:\n> \n> ```\n> @Override\n> public Connection newConnection(Connector connector, EndPoint endPoint)\n> {\n>     ...\n>     //Returns a null value\n>     ConnectionFactory next = connector.getConnectionFactory(_nextProtocol);\n>     ...\n>     //NPE\n>     Connection connection = next.newConnection(connector, decryptedEndPoint);\n>     ...\n> }\n> ```\n> \n> Change that results in an NPE:\n> \n>   ServerConnector sslConnector = new ServerConnector(server,\n> -   new SslConnectionFactory(sslContextFactory, HttpVersion.HTTP_1_1.asString()),\n> -   new HttpConnectionFactory(https_config));\n> -   new SslConnectionFactory(sslContextFactory, HttpVersion.HTTP_1_1.asString()));\n", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.AbstractConnector.doStart()", "org.eclipse.jetty.server.SslConnectionFactory.getNextProtocol()"], "ttf": 243.00027777777777, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/292"}, {"labels": ["Bug"], "closed": "2016-03-07 16:55:46", "body": "migrated from Bugzilla [#487017](https://bugs.eclipse.org/bugs/show_bug.cgi?id=487017)\nstatus ASSIGNED severity _critical_ in component _http2_ for _9.3.x_\nReported in version _9.3.1_ on platform _All_\nAssigned to: Simone Bordet\n\nOriginal attachment names and IDs:\n- _[jetty.pcap](https://bugs.eclipse.org/bugs//attachment.cgi?id=259536)_ (ID 259536)\n\nOn 2016-02-02 09:52:48 -0500, Noam Mazor wrote:\n\n> Hi,\n> \n> We have found a vulnerability in the Jetty\u00e2\u0080\u0099s HTTP2 implementation which can be used by a remote attacker to cause denial of service. The vulnerability was found in versions 9.3.0 and 9.3.1. When a client open a connection, sends SETTINGS_INITIAL_WINDOW_SIZE = 1 and then opens multiple streams with POST requests to the same resource, the server stop responding for 30 seconds. The attacker can keep the server in this state by returning on this action every 30 seconds. \n> \n> Type of issue: Denial of service\n> Reproduction steps:\n> - Open new TCP connection\n> - Send the HTTP/2 preface followed by settings frame for reducing initial window size (\u00e2\u0080\u009cPRI \\* HTTP/2.0\\x0d\\x0a\\x0d\\x0aSM\\x0d\\x0a\\x0d\\x0a\u00e2\u0080\u009d, \u00e2\u0080\u009c\\x00\\x00\\x06\\x04\\x00\\x00\\x00\\x00\\x00\\x00\\x04\\x00\\x00\\x00\\x01\u00e2\u0080\u009d)\n> - Open many streams with POST requests\n> \n> Impact: DoS \u00e2\u0080\u0093 For every request one thread of the server is going to sleep for 30 seconds.\n> \n> Do you want us to open a CVE on this issue?\n> \n> Thanks,\n> Noam Mazor\n> Imperva\n> noam.mazor@imperva.com\n\nOn 2016-02-03 05:10:17 -0500, Greg Wilkins wrote:\n\n> Noam,\n> \n> we will look at the detail of this shortly.   However, I am not sure the impact of such a DOS is actually more than what is commonly possible against most servlet applications.\n> \n> Because most servlet applications currently use blocking IO for reading/writing content, it is frequently possible for a single connection to consume a server thread.  For example, if you send a POST with a header indicating N bytes, but then only send N-1 bytes of content, then a servlet using the normal servlet APIs will block a thread until the client sends that content.   Similar issues can be caused by blocking large written content.\n> \n> This is just a risk of using blocking APIs and for this reason there are now async APIs in servlets.  Jetty attempts to do all operations asynchronously and only go to blocking mode when an application is written against the normal APIs.\n> \n> So if the attack vector you have identified does indeed result in blocking an application that was written against the async API's, then we are very concerned by it.    If however, your POST handler was using the normal blocking API's then this is just normal.\n> \n> Can you post an example of the servlet you have handling the POST request so we can see what APIs it is calling to consume the content?\n\nOn 2016-02-03 05:19:41 -0500, Noam Mazor wrote:\n\n> Hi,\n> \n> We have run jetty-distribution from demo base as described here:\n> https://www.eclipse.org/jetty/documentation/9.2.6.v20141205/quickstart-running-jetty.html\n> \n> Please notice that the attack is used only one connection in order to consume all the server threads.\n> \n> Thanks,\n\nOn 2016-02-03 05:35:02 -0500, Greg Wilkins wrote:\n\n> Noam,\n> \n> what URI are you using as the target of the POST, as that determines what API is used to consume input. I would expect if it is just the demo server, then it will be a blocking API.\n> \n> True, a HTTP/2 connection is multiplexed, so it can send multiple POST request and if each one is incomplete, then each one will consume a server thread.   So in that respect, HTTP/2 has opened up this kind of vulnerability some more.\n> \n> Note that we have the configuration parameter jetty.http2.maxConcurrentStreams, which can limit the number of streams per session, which would reduce the impact of this vulnerability as a limit on the number of threads that can be consumed.\n> \n> Current default is 1024, which is perhaps a bit too high.   Maybe 32 would be more appropriate.\n> \n> But fundamentally HTTP2 is designed to make it easy for a client to send multiple parallel requests.  Each request is entitled to a thread and if blocking APIs are used, then there are many ways a client can cause that thread to block.     This is the problem with protocols designed primarily by browser vendors - they rarely think of the resources impact on the server.\n> \n> In summary, It is a vulnerability, but I think it is one by design rather than by error. I think we are only concerned if the blocking occurs in jetty code rather than application code calling a blocking API.  IE, if an application is well written against the async IO APIs, is a client still able to block it in this way?\n\nOn 2016-02-03 08:45:58 -0500, Noam Mazor wrote:\n\n> Hi,\n> \n> The URI is / (the default page in demo base).\n> So, what are the next steps from your side?\n> Do you want us to open CVE? Do you want us to reproduce the attack on some specific application?\n> \n> We will be happy if you keep us updated.\n> \n> Thanks!\n> Noam\n\nOn 2016-02-03 09:13:20 -0500, Greg Wilkins wrote:\n\n> Well I am not yet convinced this warrants a CVE as I think it is a vulnerability by design (of protocol plus servlet spec).\n> \n> However, I would like to examine more about exactly where Jetty is blocking and why that is triggered by a small window size.       Specifically I want to verify that it is a blocking API that is causing the 30s timeout and not internal jetty.\n> \n> Thus I need to reproduce.   Our main HTTP2 client side developer is on vacation at the moment, so we will be a bit slower creating the reproduction.   If you have a client that generates traffic like you have described, that would be great to share with us.\n> \n> Also, if you can take a thread dump of the server while it is in the 30s wait period, that would help me prioritise this.  \n> \n> cheers\n\nOn 2016-02-03 09:27:13 -0500, Noam Mazor wrote:\n\n> Hi,\n> \n> Thanks again for your response.\n> \n> From what I saw, the servers is enter the 30s wait period in the Jetty-util/SharedBlockingCallBack/acquire function.\n> This function is called by Jetty-server/HttpOutput/sendContent, after the Jetty-HTTP2/HTTP2Flusher/process function returns Action.IDLE:\n> \n> I you need more data, please ask and I will try to get it (It can take a while).\n> \n> Thanks,\n\nOn 2016-02-03 09:36:07 -0500, Greg Wilkins wrote:\n\n> Noam,\n> \n> OK, that does sound not a good place for it to park.   So I would like to reproduce and look more closely.     If you have a client that I can use, that would assist, otherwise I will start working with out client.\n\nOn 2016-02-03 09:42:40 -0500, Greg Wilkins wrote:\n\n> Noam,\n> \n> I've found a unit test that I've modified to reproduce.\n> \n> investigating now....\n\nOn 2016-02-03 10:14:01 -0500, Greg Wilkins wrote:\n\n> Ah - no either I have not reproduced or it is not a problem.\n> \n> The unit test that I'm using set's a low initial window, so the write is correctly fragmented.  Because the test client never sends a window update, the writer correctly blocks waiting for the window update.\n> \n> So it would still be good to see your actual client.\n\nOn 2016-02-03 10:20:11 -0500, Greg Wilkins wrote:\n\n> yep - if I update the unit test client to send window updates, then the small window does not cause a block.\n> \n> So it would be good to see both your client test code and wireshark output to see what messages are being sent and if your client is updating the window, and if so, by how much?\n\nOn 2016-02-03 10:38:05 -0500, Noam Mazor wrote:\n\n> Created attachment 259536\n> tcpdump file\n> \n> Hi,\n> \n> I'm attaching a .pcap file.\n> Not sure I understood why is it not a problem (if one client can denial service from other)\n> \n> Thanks\n\nOn 2016-02-03 10:49:44 -0500, Greg Wilkins wrote:\n\n> Noam,\n> \n> The reason I don't consider this a significant problem is that it is a vulnerability shared by any application server with an application implemented using blocking IO.   A client can always just send 99 of 100 expected bytes and the thread will block in the application (or in this case block writing).\n> \n> Sure HTTP/2 has made this vulnerability worse, because now a single connection can send multiple requests in parallel and each can consume a thread.\n> \n> So it is a problem and at the very least we will reduce the default sessions per connection from 1024 to a much smaller value.\n> \n> But the real solution for any server that does not wish to be vulnerable is to only deploy applications with async IO implementations.  Blocking IO will always be vulnerable to thread starvation.\n> \n> In think case,  we still have to verify it is normal blocking that is taking place and not some bug in jetty (or your client).    Ie, if I replaced the servlet at / with something that writes content asynchronously, would it still consume a thread or not?\n\nOn 2016-02-04 04:36:32 -0500, Simone Bordet wrote:\n\n> I agree with Greg that this is a \"feature\" that every server that supports a blocking API mode to read and/or write exposes.\n> \n> So every servlet container with a non fully async web application deployed to it will suffer from the same problem.\n> \n> The solution is to write fully async applications (now possible with Servlet 3.1), or reduce the server idle timeout to a very short value to limit the blocking time.\n> \n> As for the 1024 max concurrent streams, today's web and how HTTP/2 webapps are deployed (no domain sharding, no image spriting, no file concatenation) will require a high number of concurrent requests to be available.\n> \n> A smaller number will probably bringing us back to HTTP/1.1 \"ziggurat\" request profile (send 6 request, wait, send other 6, wait, etc.), so I am to leave this number unchanged.\n", "commits": {}, "title": "HTTP/2 DoS vulnerability", "created": "2016-02-16 23:47:11", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/291", "commitsDetails": [], "ttf": 19.00027777777778}, {"labels": ["Bug"], "closed": "2016-02-17 13:53:59", "body": "migrated from Bugzilla [#486930](https://bugs.eclipse.org/bugs/show_bug.cgi?id=486930)\nstatus ASSIGNED severity _normal_ in component _server_ for _9.3.x_\nReported in version _9.3.6_ on platform _PC_\nAssigned to: Simone Bordet\n\nOn 2016-02-01 07:07:56 -0500, Greg Wilkins wrote:\n\n> A rejected execution exception can cause the selector thread death.\n\nOn 2016-02-01 11:33:55 -0500, Greg Wilkins wrote:\n\n> I think this is an OK fix for this problem, but I would like review and a 2nd opinion: https://github.com/eclipse/jetty.project/commit/SHA: c81dcfc79059b6e0a3a0bfd22cb5b5633dd3291b\n", "commits": {}, "title": "Selector does not correctly handle rejected execution exception", "created": "2016-02-16 23:47:10", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/290", "commitsDetails": [], "ttf": 0.0002777777777777778}, {"labels": ["Bug"], "closed": "2016-04-13 12:38:30", "body": "migrated from Bugzilla [#486826](https://bugs.eclipse.org/bugs/show_bug.cgi?id=486826)\nstatus ASSIGNED severity _normal_ in component _server_ for _9.3.x_\nReported in version _9.0.4_ on platform _PC_\nAssigned to: Greg Wilkins\n\nOriginal attachment names and IDs:\n- _[ServletEofTest.java](https://bugs.eclipse.org/bugs//attachment.cgi?id=259522)_ (ID 259522)\n- _[BasicJetty.java](https://bugs.eclipse.org/bugs//attachment.cgi?id=259760)_ (ID 259760)\n\nOn 2016-01-29 09:23:22 -0500, Pablo Frias wrote:\n\n> Dear all,\n> \n> We have been facing an issue when a file is being uploaded through Jetty and suddenly transmission is interrupted before completion.\n> The result in this scenario is that CPU gets at 100% and can only be restored by restarting the web server.\n> We are using Jetty version 9.0.4.v20130625 (also tested on 9.3.6.v20151106) embedded in a Spring application. \n> \n> When debugging, we found that Jetty generates an EofException upon acknowledment of the socket being closed. \n> Afterwards it appears that the code gets into a generic exception handling which tries to send a HTTP error response back to the client.\n> In turn this response is attempted to be written to the socket before NIO has properly updated its records that the connection is lost, hence entering a blocking write.\n> \n> With further debugging we could see that there is an exception handler in ServletHandler which attempts to filter out EofException, but it would appear that it is failing to detect it due to the EofException being chained into another Exception.\n> (See https://github.com/eclipse/jetty.project/blob/jetty-9.3.x/jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletHandler.java#L625)\n> \n> As it fails to filter out the Eof, then the default error handling kicks in and an Internal Server Error is attempted to be sent back to the client\n> (see https://github.com/eclipse/jetty.project/blob/jetty-9.3.x/jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletHandler.java#L650)\n> \n> We've attempted a fix for this issue, which would be to look for a chained EofException in line 625, as follows:\n> \n> // remove else if  \n> if (isEofException(th)){\n>    ((org.eclipse.jetty.server.Response) response).getHttpChannel().earlyEOF(); // on Version 9.0.4.v20130625\n>    ((org.eclipse.jetty.server.Response) response).getHttpChannel().abort(th); // on Version 9.3.6.v20151106\n>    throw (EofException)th;\n> }\n> \n> As for isEofException method, it helps to identify if an EofException exists on a nested Exception:\n> \n> private boolean isEofException(Throwable cause) \n> {\n>         while (cause != null && !(cause instanceof EofException))\n>         {\n>                 cause = cause.getCause();\n>         }\n> \n> ```\n>     return cause != null;\n> ```\n> \n> }\n> \n> Also, on Response class we made getHttpChannel() public.\n> \n> This helped to avoid the issue when the transmission is cut.\n> \n> This is the Thread dump for the one which is consuming all CPU:\n> \n> \"qtp529864074-68\" - Thread t@68\n>    java.lang.Thread.State: RUNNABLE\n>         at sun.nio.ch.FileDispatcherImpl.writev0(Native Method)\n>         at sun.nio.ch.SocketDispatcher.writev(SocketDispatcher.java:51)\n>         at sun.nio.ch.IOUtil.write(IOUtil.java:148)\n>         at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:504)\n>         - locked <6ddac168> (a java.lang.Object)\n>         at org.eclipse.jetty.io.ChannelEndPoint.flush(ChannelEndPoint.java:177)\n>         at org.eclipse.jetty.io.WriteFlusher.flush(WriteFlusher.java:419)\n>         at org.eclipse.jetty.io.WriteFlusher.write(WriteFlusher.java:313)\n>         at org.eclipse.jetty.io.AbstractEndPoint.write(AbstractEndPoint.java:141)\n>         at org.eclipse.jetty.server.HttpConnection$SendCallback.process(HttpConnection.java:735)\n>         at org.eclipse.jetty.util.IteratingCallback.processing(IteratingCallback.java:241)\n>         at org.eclipse.jetty.util.IteratingCallback.iterate(IteratingCallback.java:224)\n>         at org.eclipse.jetty.server.HttpConnection.send(HttpConnection.java:509)\n>         at org.eclipse.jetty.server.HttpChannel.sendResponse(HttpChannel.java:668)\n>         at org.eclipse.jetty.server.HttpChannel.write(HttpChannel.java:722)\n>         at org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:177)\n>         at org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:163)\n>         at org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:441)\n>         at org.eclipse.jetty.util.ByteArrayISO8859Writer.writeTo(ByteArrayISO8859Writer.java:109)\n>         at org.eclipse.jetty.server.Response.sendError(Response.java:606)\n>         at org.eclipse.jetty.server.Response.sendError(Response.java:512)\n>         at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:650)\n>         at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)\n>         at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:548)\n>         at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1160)\n>         at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:511)\n>         at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1090)\n>         at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\n>         at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:213)\n>         at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:109)\n>         at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:119)\n>         at org.eclipse.jetty.server.Server.handle(Server.java:517)\n>         at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:308)\n>         at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:242)\n>         at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:261)\n>         at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)\n>         at org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:75)\n>         at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceAndRun(ExecuteProduceConsume.java:213)\n>         at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:147)\n>         at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:654)\n>         at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n>         at java.lang.Thread.run(Thread.java:745)\n> \n> Best regards,\n> Pablo\n\nOn 2016-02-03 06:41:24 -0500, Greg Wilkins wrote:\n\n> Pablo,\n> \n> thanks for the good analysis.\n> \n> Note that in the master branch (for Jetty-9.4.x), we have significantly reworked the exception handling specifically for looping problems like this.\n> \n> Looking at your suggested fixes now...\n\nOn 2016-02-03 07:35:57 -0500, Greg Wilkins wrote:\n\n> Created attachment 259522\n> Test Harness\n> \n> This is an attempt to reproduce the 100%.  I cannot reproduce, so there must be something different about your setup or how the client is closing.  Can you try to reproduce within this test harness?\n\nOn 2016-02-11 08:56:49 -0500, Pablo Frias wrote:\n\n> Thanks Greg, sorry for the delay. I am currently working on a sample that shows the issue. In our system, we have an embedded Jetty server + Spring MVC as a basic configuration.\n> I created a simple single-class sample with this config but so far it works fine. However, in one case, leaving the program running during almost 4-5 days in a row, we could see the issue happen. Still, this is quite weird.\n> I will back when I get the sample running.\n\nOn 2016-02-15 07:39:08 -0500, Pablo Frias wrote:\n\n> Created attachment 259760\n> Basic Scenario\n> \n> This is a (very) basic scenario including features that we are using (embedded Jetty + Spring MVC). To test it, we use the command:\n> \n> curl -i -X POST -H \"Content-Type: multipart/form-data\" -F \"file=@a_big_file\" http://virtual_server:57001/file/send\n> \n> an cut the transmission manually. The strange thing is that we could reproduce it only once under a stressed server (after a few days running).\n", "commits": {}, "title": "Jetty takes 100% CPU when uploading a file and transmission is interrupted before completion", "created": "2016-02-16 23:46:56", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/289", "commitsDetails": [], "ttf": 56.000277777777775}, {"labels": ["Bug"], "closed": "2016-04-30 00:05:19", "body": "migrated from Bugzilla [#486301](https://bugs.eclipse.org/bugs/show_bug.cgi?id=486301)\nstatus ASSIGNED severity _normal_ in component _server_ for _9.3.x_\nReported in version _9.3.6_ on platform _PC_\nAssigned to: Jan Bartel\n\nOn 2016-01-21 14:16:30 -0500, Jesse McConnell wrote:\n\n> There are some methods on here that duplicate concepts from the AbstractSessionManager that are dangerous, namely the setIdlePeriod which duplicates the concept/functionality in setMaxInactiveInterval on the AbstractSessionManager.\n", "commits": {}, "title": "NoSqlSessionManager has bogus methods", "created": "2016-02-16 23:46:33", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/286", "commitsDetails": [], "ttf": 73.00027777777778}, {"labels": ["Bug"], "closed": "2016-02-17 12:57:02", "body": "migrated from Bugzilla [#485867](https://bugs.eclipse.org/bugs/show_bug.cgi?id=485867)\nstatus ASSIGNED severity _normal_ in component _server_ for _9.3.x_\nReported in version _unspecified_ on platform _All_\nAssigned to: Jan Bartel\n\nOn 2016-01-14 12:53:55 -0500, Pether Sorling wrote:\n\n> https://github.com/eclipse/jetty.project/pull/69\n> \n> extractQueryParameters() causes nullpointer.\n> \n> https://github.com/eclipse/jetty.project/pull/69/files\n> \n> and\n> \n>  @Override\n>     public String getContentType()\n>     {\n>         String content_type = _metadata.getFields().get(HttpHeader.CONTENT_TYPE);\n> \n> Also needed null check for _metadata.\n> \n> Versions: 9.3.7.RC0, 9.3.7.RC1, and 9.4.0-SNAPSHOT .\n> \n> Best regards\n> Pether\n\nOn 2016-01-14 18:09:04 -0500, Greg Wilkins wrote:\n\n> Jan,  you were looking at another case that could do with the NPE protection. Can you merge this and add the other cases - not urgent.\n\nOn 2016-02-15 07:03:13 -0500, Jan Bartel wrote:\n\n> This is related to previous bug:  https://bugs.eclipse.org/bugs/show_bug.cgi?id=482290\n> \n> Also the github pull request # 69 has been subsumed by # 71.\n> \n> Jan\n", "commits": {}, "title": "Update Request.java add extra nullcheck for _metadata", "created": "2016-02-16 23:45:36", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/279", "commitsDetails": [], "ttf": 0.0002777777777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "jmcc0nn3ll", "filteredCommits": ["777ed6ad646399a9461749935cc227592549ed94"], "commits": {"777ed6ad646399a9461749935cc227592549ed94": {"commitUser": "sbordet", "commitGHEventType": "closed"}}, "created": "2016-02-16 23:45:18", "commitsDetails": [{"commitMessage": "Fixes #277 - Proxy servlet does not handle HTTP status 100 correctly.\n\nIntroduced overridable ContinueProtocolHandler.onContinue(), and\nmaking sure that proxy servlets use a ContinueProtocolHandler\nsubclass to intercept 100 Continue responses from the server, so that\nthey can relay it properly to the client.\n", "commitParents": ["74b86bad35415dead6d1f291244ec1bdbb8fa85d"], "commitHash": "777ed6ad646399a9461749935cc227592549ed94", "commitSpoonAstDiffStats": [{"spoonFilePath": "AsyncMiddleManServlet.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.proxy.AsyncMiddleManServlet.ProxyResponseListener.onContent(org.eclipse.jetty.client.api.Response,java.nio.ByteBuffer,org.eclipse.jetty.util.Callback)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 2, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.proxy.AsyncMiddleManServlet.cleanup(javax.servlet.http.HttpServletRequest)", "DEL": 0, "INS": 0, "UPD": 2, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.proxy.AsyncMiddleManServlet.ProxyResponseListener.onBegin(org.eclipse.jetty.client.api.Response)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.proxy.AsyncMiddleManServlet.service(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 3, "INS": 4, "UPD": 1, "MOV": 6, "TOT": 14}, {"spoonMethodName": "org.eclipse.jetty.proxy.AsyncMiddleManServlet.ProxyResponseListener.onSuccess(org.eclipse.jetty.client.api.Response)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.proxy.AsyncMiddleManServlet.ProxyResponseListener.onComplete(org.eclipse.jetty.client.api.Result)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.proxy.AsyncMiddleManServlet.ProxyReader.process(java.nio.ByteBuffer,org.eclipse.jetty.util.Callback,boolean)", "DEL": 1, "INS": 1, "UPD": 5, "MOV": 6, "TOT": 13}, {"spoonMethodName": "org.eclipse.jetty.proxy.AsyncMiddleManServlet", "DEL": 0, "INS": 1, "UPD": 4, "MOV": 0, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.proxy.AsyncMiddleManServlet.newProxyContentProvider(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse,org.eclipse.jetty.client.api.Request)", "DEL": 2, "INS": 0, "UPD": 1, "MOV": 3, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.proxy.AsyncMiddleManServlet.onContinue(javax.servlet.http.HttpServletRequest,org.eclipse.jetty.client.api.Request)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.proxy.AsyncMiddleManServlet.ProxyReader", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "ProxyServlet.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.proxy.ProxyServlet.service(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "DEL": 1, "INS": 5, "UPD": 0, "MOV": 3, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.proxy.ProxyServlet.onContinue(javax.servlet.http.HttpServletRequest,org.eclipse.jetty.client.api.Request)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.proxy.ProxyServlet.DelegatingContentProvider", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.proxy.ProxyServlet", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AbstractProxyServlet.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.proxy.AbstractProxyServlet.createHttpClient()", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 1, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.proxy.AbstractProxyServlet.expects100Continue(javax.servlet.http.HttpServletRequest)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.proxy.AbstractProxyServlet.onContinue(javax.servlet.http.HttpServletRequest,org.eclipse.jetty.client.api.Request)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.proxy.AbstractProxyServlet", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.proxy.AbstractProxyServlet.onProxyResponseFailure(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse,org.eclipse.jetty.client.api.Response,java.lang.Throwable)", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.proxy.AbstractProxyServlet.ProxyContinueProtocolHandler", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ContinueProtocolHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.ContinueProtocolHandler.onContinue(org.eclipse.jetty.client.api.Request)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.ContinueProtocolHandler.ContinueListener.onSuccess(org.eclipse.jetty.client.api.Response)", "DEL": 1, "INS": 4, "UPD": 0, "MOV": 1, "TOT": 6}]}, {"spoonFilePath": "ProxyServletTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.proxy.ProxyServletTest.testExpect100ContinueRespond417ExpectationFailed()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.proxy.ProxyServletTest.testExpect100ContinueRespond100ContinueDelayedRequestContent()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.proxy.ProxyServletTest.testExpect100ContinueRespond100Continue()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.proxy.ProxyServletTest.dispose()", "DEL": 0, "INS": 3, "UPD": 0, "MOV": 3, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.proxy.ProxyServletTest.testExpect100ContinueRespond100ContinueSomeRequestContentThenFailure()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "777ed6ad646399a9461749935cc227592549ed94 tags/jetty-9.3.13.v20161014~27", "commitUser": "sbordet", "authoredDateTime": "2016-09-26 12:05:03", "commitGHEventType": "closed", "commitGitStats": [{"lines": 33, "filePath": "jetty-proxy/src/main/java/org/eclipse/jetty/proxy/AbstractProxyServlet.java", "insertions": 31, "deletions": 2}, {"lines": 10, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/ContinueProtocolHandler.java", "insertions": 8, "deletions": 2}, {"lines": 119, "filePath": "jetty-proxy/src/main/java/org/eclipse/jetty/proxy/ProxyServlet.java", "insertions": 118, "deletions": 1}, {"lines": 89, "filePath": "jetty-proxy/src/main/java/org/eclipse/jetty/proxy/AsyncMiddleManServlet.java", "insertions": 62, "deletions": 27}, {"lines": 237, "filePath": "jetty-proxy/src/test/java/org/eclipse/jetty/proxy/ProxyServletTest.java", "insertions": 233, "deletions": 4}], "commitDateTime": "2016-09-26 12:05:03", "spoonStatsSkippedReason": ""}], "title": "Proxy servlet does not handle HTTP status 100 correctly", "spoonStatsSummary": {"spoonMethodsChanged": 23, "DEL": 9, "INS": 32, "UPD": 16, "MOV": 24, "TOT": 81, "spoonFilesChanged": 4}, "gitStatsSummary": {"lines": 251, "insertions": 219, "gitFilesChange": 4, "deletions": 32}, "closed": "2016-09-26 10:06:09", "statsSkippedReason": "", "body": "migrated from Bugzilla [#485601](https://bugs.eclipse.org/bugs/show_bug.cgi?id=485601)\nstatus NEW severity _normal_ in component _proxy_ for _9.3.x_\nReported in version _9.3.6_ on platform _PC_\nAssigned to: Simone Bordet\n\nOn 2016-01-12 03:25:24 -0500, Lukas Krecan wrote:\n\n> Jetty HTTP client handles 100 Continue using ContinueProtocolHandler. AbstractProxyServlet removes all protocol handlers to \"pass everything to the client.\" The problem is that 100 Continue is handled by the servlet container, so it does not make sense to pass 100 response to the client.\n> \n> The flow is following:\n> 1. Client sends request headers without body containing Except: 100-continue\n> 2. Jetty server accepts the request and passes it to the proxy\n> 3. Proxy sends the request to the endpoint\n> 4. Endpoint returns 100\n> 5. Proxy returns 100\n> 6. Servlet container returns 100\n> 7. We have lost all context and can not continue with the request since the request has already been processed (in the servlet container)\n> \n> It's not clear what the correct behavior should be. We can either \n> a) Not forward Except header\n> b) Use ContinueProtocolHandler in the proxy\n", "changesInPackagesGIT": ["jetty-proxy/src/main/java/org/eclipse/jetty/proxy", "jetty-client/src/main/java/org/eclipse/jetty/client"], "changesInPackagesSPOON": ["org.eclipse.jetty.proxy.AsyncMiddleManServlet.ProxyResponseListener.onContent(org.eclipse.jetty.client.api.Response,java.nio.ByteBuffer,org.eclipse.jetty.util.Callback)", "org.eclipse.jetty.proxy.AsyncMiddleManServlet.ProxyReader.process(java.nio.ByteBuffer,org.eclipse.jetty.util.Callback,boolean)", "org.eclipse.jetty.proxy.AbstractProxyServlet.expects100Continue(javax.servlet.http.HttpServletRequest)", "org.eclipse.jetty.proxy.AsyncMiddleManServlet.cleanup(javax.servlet.http.HttpServletRequest)", "org.eclipse.jetty.proxy.AsyncMiddleManServlet.ProxyResponseListener.onBegin(org.eclipse.jetty.client.api.Response)", "org.eclipse.jetty.proxy.ProxyServlet.onContinue(javax.servlet.http.HttpServletRequest,org.eclipse.jetty.client.api.Request)", "org.eclipse.jetty.proxy.AsyncMiddleManServlet.ProxyResponseListener.onComplete(org.eclipse.jetty.client.api.Result)", "org.eclipse.jetty.proxy.AbstractProxyServlet.onContinue(javax.servlet.http.HttpServletRequest,org.eclipse.jetty.client.api.Request)", "org.eclipse.jetty.proxy.ProxyServlet.DelegatingContentProvider", "org.eclipse.jetty.proxy.AbstractProxyServlet", "org.eclipse.jetty.proxy.AsyncMiddleManServlet.onContinue(javax.servlet.http.HttpServletRequest,org.eclipse.jetty.client.api.Request)", "org.eclipse.jetty.proxy.AbstractProxyServlet.ProxyContinueProtocolHandler", "org.eclipse.jetty.client.ContinueProtocolHandler.ContinueListener.onSuccess(org.eclipse.jetty.client.api.Response)", "org.eclipse.jetty.proxy.AsyncMiddleManServlet.service(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "org.eclipse.jetty.proxy.ProxyServlet.service(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)", "org.eclipse.jetty.proxy.AsyncMiddleManServlet", "org.eclipse.jetty.client.ContinueProtocolHandler.onContinue(org.eclipse.jetty.client.api.Request)", "org.eclipse.jetty.proxy.AbstractProxyServlet.createHttpClient()", "org.eclipse.jetty.proxy.AsyncMiddleManServlet.ProxyResponseListener.onSuccess(org.eclipse.jetty.client.api.Response)", "org.eclipse.jetty.proxy.ProxyServlet", "org.eclipse.jetty.proxy.AsyncMiddleManServlet.newProxyContentProvider(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse,org.eclipse.jetty.client.api.Request)", "org.eclipse.jetty.proxy.AbstractProxyServlet.onProxyResponseFailure(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse,org.eclipse.jetty.client.api.Response,java.lang.Throwable)", "org.eclipse.jetty.proxy.AsyncMiddleManServlet.ProxyReader"], "ttf": 222.00027777777777, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/277"}, {"labels": ["Bug"], "closed": "2016-02-17 13:04:57", "body": "migrated from Bugzilla [#485382](https://bugs.eclipse.org/bugs/show_bug.cgi?id=485382)\nstatus NEW severity _minor_ in component _server_ for _9.3.x_\nReported in version _9.4.0_ on platform _Macintosh_\nAssigned to: Project Inbox\n\nOn 2016-01-07 19:41:09 -0500, Landon Alder wrote:\n\n> Jetty fails to parse any url that has two forwardslashes in the URL after the host. It works fine with one or three+, but doesn't parse correctly with two.\n> \n> Example:\n> http://www.test.com//thing1/thing2  -- Won't work\n> http://www.test.com///thing1/thing2  -- Works\n> \n> Both are technically valid URLs, but for two forward slashes doesn't parse correctly and results in a blank page being returned.\n\nOn 2016-01-07 20:43:57 -0500, Eclipse Genie wrote:\n\n> New Gerrit change created: https://git.eclipse.org/r/63811\n", "commits": {}, "title": "Fails to parse double forward slashes in the url after the host (eg example.com//test)", "created": "2016-02-16 23:45:13", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/276", "commitsDetails": [], "ttf": 0.0002777777777777778}, {"labels": ["Bug"], "closed": "2017-03-01 17:46:30", "body": "migrated from Bugzilla [#485226](https://bugs.eclipse.org/bugs/show_bug.cgi?id=485226)\nstatus NEW severity _normal_ in component _servlet-3.1_ for _9.3.x_\nReported in version _9.2.14_ on platform _PC_\nAssigned to: Jan Bartel\n\nOn 2016-01-05 12:10:57 -0500, Rich DiCroce wrote:\n\n> DefaultServlet always uses blocking I/O for ranged requests, even if async is enabled. This can lead to thread starvation in environments with small thread pools. See the stack trace below.\n> \n> I have marked this issue as affecting 9.2.14 because that's what we're currently using, but after looking at the code in 9.3.x and master branches, both of those also appear to be affected (although master has had some refactoring that moved the problematic code from DefaultServlet to ResourceService).\n> \n> 06:57:40,965 WARN  [org.eclipse.jetty.server.HttpChannel](qtp164974746-7598) Could not send response error 500: java.io.IOException: org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException\n> 06:57:40,965 WARN  [org.eclipse.jetty.util.thread.QueuedThreadPool](qtp164974746-7598) java.lang.IllegalStateException: org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException\n>   at org.eclipse.jetty.util.SharedBlockingCallback$Blocker.failed(SharedBlockingCallback.java:184) ~[jetty-util-9.2.14.v20151106.jar:9.2.14.v20151106]\n>   at org.eclipse.jetty.io.AbstractConnection$1.run(AbstractConnection.java:103) ~[jetty-io-9.2.14.v20151106.jar:9.2.14.v20151106]\n>   at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:635) ~[jetty-util-9.2.14.v20151106.jar:9.2.14.v20151106]\n>   at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:555) [jetty-util-9.2.14.v20151106.jar:9.2.14.v20151106]\n>   at java.lang.Thread.run(Thread.java:745) [?:1.8.0_65]\n> Caused by: org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException\n>   at org.eclipse.jetty.util.SharedBlockingCallback$Blocker.block(SharedBlockingCallback.java:216) ~[jetty-util-9.2.14.v20151106.jar:9.2.14.v20151106]\n>   at org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:141) ~[jetty-server-9.2.14.v20151106.jar:9.2.14.v20151106]\n>   at org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:378) ~[jetty-server-9.2.14.v20151106.jar:9.2.14.v20151106]\n>   at org.eclipse.jetty.util.IO.copy(IO.java:152) ~[jetty-util-9.2.14.v20151106.jar:9.2.14.v20151106]\n>   at org.eclipse.jetty.util.resource.Resource.writeTo(Resource.java:634) ~[jetty-util-9.2.14.v20151106.jar:9.2.14.v20151106]\n>   at org.eclipse.jetty.servlet.DefaultServlet.sendData(DefaultServlet.java:992) ~[jetty-servlet-9.2.14.v20151106.jar:9.2.14.v20151106]\n>   at org.eclipse.jetty.servlet.DefaultServlet.doGet(DefaultServlet.java:534) ~[jetty-servlet-9.2.14.v20151106.jar:9.2.14.v20151106]\n>   at javax.servlet.http.HttpServlet.service(HttpServlet.java:687) ~[javax.servlet-api-3.1.0.jar:3.1.0]\n>   at javax.servlet.http.HttpServlet.service(HttpServlet.java:790) ~[javax.servlet-api-3.1.0.jar:3.1.0]\n>   at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:812) ~[jetty-servlet-9.2.14.v20151106.jar:9.2.14.v20151106]\n>   at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1669) ~[jetty-servlet-9.2.14.v20151106.jar:9.2.14.v20151106]\n>   at org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter.doFilter(WebSocketUpgradeFilter.java:224) ~[websocket-server-9.2.14.v20151106.jar:9.2.14.v20151106]\n>   at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1652) ~[jetty-servlet-9.2.14.v20151106.jar:9.2.14.v20151106]\n>   at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:585) ~[jetty-servlet-9.2.14.v20151106.jar:9.2.14.v20151106]\n>   at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143) ~[jetty-server-9.2.14.v20151106.jar:9.2.14.v20151106]\n>   at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:577) ~[jetty-security-9.2.14.v20151106.jar:9.2.14.v20151106]\n>   at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:223) ~[jetty-server-9.2.14.v20151106.jar:9.2.14.v20151106]\n>   at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1127) ~[jetty-server-9.2.14.v20151106.jar:9.2.14.v20151106]\n>   at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:515) ~[jetty-servlet-9.2.14.v20151106.jar:9.2.14.v20151106]\n>   at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185) ~[jetty-server-9.2.14.v20151106.jar:9.2.14.v20151106]\n>   at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1061) ~[jetty-server-9.2.14.v20151106.jar:9.2.14.v20151106]\n>   at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141) ~[jetty-server-9.2.14.v20151106.jar:9.2.14.v20151106]\n>   at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:97) ~[jetty-server-9.2.14.v20151106.jar:9.2.14.v20151106]\n>   at org.eclipse.jetty.server.Server.handle(Server.java:499) ~[jetty-server-9.2.14.v20151106.jar:9.2.14.v20151106]\n>   at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:311) ~[jetty-server-9.2.14.v20151106.jar:9.2.14.v20151106]\n>   at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:257) ~[jetty-server-9.2.14.v20151106.jar:9.2.14.v20151106]\n>   at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:544) ~[jetty-io-9.2.14.v20151106.jar:9.2.14.v20151106]\n>   ... 3 more\n", "commits": {}, "title": "DefaultServlet async-supported is ignored for ranged requests", "created": "2016-02-16 23:45:04", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/275", "commitsDetails": [], "ttf": 378.0002777777778}, {"labels": ["Bug"], "closed": "2016-03-11 09:32:05", "body": "migrated from Bugzilla [#484881](https://bugs.eclipse.org/bugs/show_bug.cgi?id=484881)\nstatus NEW severity _major_ in component _proxy_ for _9.3.x_\nReported in version _9.2.10_ on platform _PC_\nAssigned to: Simone Bordet\n\nOn 2015-12-24 08:16:40 -0500, Felix Basin wrote:\n\n> Had found this case in our application on next case:\n> nginx-based web server answer in headers that resource is gziped and its Content-Length is .... (value was less than unpacked resource), but in reality resource was unpacked.\n> \n> In try of getting this resource in browser through proxy - browser hangs on page loading. As I noticed it happens by next reason\n> \n> public void onContent(...) {\n> ..\n> // this line never been true if contentLength > length\n> boolean finished = contentLength > 0 && length == contentLength;\n> }\n> \n> My suggested fix:\n> ...\n> length += contentBytes;\n> // Begin of inserted code\n> if (length > contentLength) {\n>   contentLength = -1;\n>   proxyResponse.setContentLength(-1);\n> }\n> // End of inserted code\n", "commits": {}, "title": "AsyncMiddleManServlet hangs on response when end-point server answers Content-Length header with value less than actual", "created": "2016-02-16 23:44:56", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/274", "commitsDetails": [], "ttf": 23.00027777777778}, {"labels": ["Bug"], "closed": "2016-06-23 05:12:10", "body": "migrated from Bugzilla [#484625](https://bugs.eclipse.org/bugs/show_bug.cgi?id=484625)\nstatus NEW severity _normal_ in component _server_ for _9.3.x_\nReported in version _9.3.6_ on platform _All_\nAssigned to: Project Inbox\n\nOn 2015-12-17 20:51:33 -0500, Jan Bartel wrote:\n\n> 2015-12-18 12:39:39.944:WARN::RMI TCP Connection(4)-127.0.0.1: test webapp is deployed. DO NOT USE IN PRODUCTION!\n> 2015-12-18 12:39:40.387:WARN:oejw.WebAppContext:RMI TCP Connection(4)-127.0.0.1: Failed startup of context o.e.j.w.WebAppContext@7b227d8d{/test,file:///tmp/jetty-0.0.0.0-8443-test.war-_test-any-6881984275708105224.dir/webapp/,STARTING}{/test.war}\n> java.lang.IllegalStateException: No LoginService for org.eclipse.jetty.security.authentication.FormAuthenticator@5495333e in org.eclipse.jetty.security.ConstraintSecurityHandler@68034211\n>   at org.eclipse.jetty.security.authentication.LoginAuthenticator.setConfiguration(LoginAuthenticator.java:76)\n>   at org.eclipse.jetty.security.authentication.FormAuthenticator.setConfiguration(FormAuthenticator.java:131)\n>   at org.eclipse.jetty.security.SecurityHandler.doStart(SecurityHandler.java:354)\n>   at org.eclipse.jetty.security.ConstraintSecurityHandler.doStart(ConstraintSecurityHandler.java:448)\n>   at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\n>   at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:132)\n>   at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:106)\n>   at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:93)\n>   at org.eclipse.jetty.server.handler.ScopedHandler.doStart(ScopedHandler.java:120)\n>   at org.eclipse.jetty.server.session.SessionHandler.doStart(SessionHandler.java:116)\n>   at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\n>   at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:132)\n>   at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:106)\n>   at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:93)\n>   at org.eclipse.jetty.server.handler.ScopedHandler.doStart(ScopedHandler.java:120)\n>   at org.eclipse.jetty.server.handler.ContextHandler.startContext(ContextHandler.java:801)\n>   at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:346)\n>   at org.eclipse.jetty.webapp.WebAppContext.startWebapp(WebAppContext.java:1380)\n>   at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1342)\n>   at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:772)\n>   at org.eclipse.jetty.servlet.ServletContextHandler.doStart(ServletContextHandler.java:263)\n>   at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:518)\n>   at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\n>   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n>   at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n>   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n>   at java.lang.reflect.Method.invoke(Method.java:497)\n>   at org.eclipse.jetty.jmx.ObjectMBean.invoke(ObjectMBean.java:553)\n>   at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)\n>   at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801)\n>   at javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1471)\n>   at javax.management.remote.rmi.RMIConnectionImpl.access$300(RMIConnectionImpl.java:76)\n>   at javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1312)\n>   at javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1404)\n>   at javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:832)\n>   at sun.reflect.GeneratedMethodAccessor38.invoke(Unknown Source)\n>   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n>   at java.lang.reflect.Method.invoke(Method.java:497)\n>   at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:323)\n>   at sun.rmi.transport.Transport$1.run(Transport.java:200)\n>   at sun.rmi.transport.Transport$1.run(Transport.java:197)\n>   at java.security.AccessController.doPrivileged(Native Method)\n>   at sun.rmi.transport.Transport.serviceCall(Transport.java:196)\n>   at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:568)\n>   at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:826)\n>   at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$95(TCPTransport.java:683)\n>   at java.security.AccessController.doPrivileged(Native Method)\n>   at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:682)\n>   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n>   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n>   at java.lang.Thread.run(Thread.java:745)\n> \n> To reproduce, comment out use of the etc/test-realm.xml in start.ini. Enable jmx. Do normal java -jar start.jar.  Use jconsole to connect to the server and stop and restart the test webapp.\n> \n> Doesn't happen if you restart the webapp via the Deployer.\n", "commits": {}, "title": "Context specific LoginService causes context restart to fail under jmx", "created": "2016-02-16 23:44:17", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/270", "commitsDetails": [], "ttf": 127.00027777777778}, {"labels": ["Bug"], "closed": "2018-07-18 13:14:50", "body": "migrated from Bugzilla [#484624](https://bugs.eclipse.org/bugs/show_bug.cgi?id=484624)\nstatus NEW severity _normal_ in component _server_ for _9.3.x_\nReported in version _9.3.6_ on platform _PC_\nAssigned to: Project Inbox\n\nOn 2015-12-17 20:18:39 -0500, Jan Bartel wrote:\n\n> Restarting the test webapp with CachingWebAppClassLoader enabled throws:\n> \n> 2015-12-18 12:08:02.998:WARN:oejw.StandardDescriptorProcessor:RMI TCP Connection(1)-127.0.0.1: Could not instantiate listener org.eclipse.jetty.servlet.listener.ELContextCleaner\n> java.lang.ClassNotFoundException: org.eclipse.jetty.servlet.listener.ELContextCleaner: in notfound cache\n>   at org.eclipse.jetty.webapp.CachingWebAppClassLoader.loadClass(CachingWebAppClassLoader.java:81)\n>   at org.eclipse.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:428)\n>   at org.eclipse.jetty.server.handler.ContextHandler.loadClass(ContextHandler.java:1659)\n>   at org.eclipse.jetty.webapp.StandardDescriptorProcessor.visitListener(StandardDescriptorProcessor.java:1893)\n>   at sun.reflect.GeneratedMethodAccessor26.invoke(Unknown Source)\n>   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n>   at java.lang.reflect.Method.invoke(Method.java:497)\n>   at org.eclipse.jetty.webapp.IterativeDescriptorProcessor.visit(IterativeDescriptorProcessor.java:83)\n>   at org.eclipse.jetty.webapp.IterativeDescriptorProcessor.process(IterativeDescriptorProcessor.java:70)\n>   at org.eclipse.jetty.webapp.MetaData.resolve(MetaData.java:402)\n>   at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1339)\n>   at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:772)\n>   at org.eclipse.jetty.servlet.ServletContextHandler.doStart(ServletContextHandler.java:263)\n>   at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:517)\n> \n> and\n> \n> 2015-12-18 12:08:03.013:WARN:oejw.StandardDescriptorProcessor:RMI TCP Connection(1)-127.0.0.1: Could not instantiate listener org.eclipse.jetty.servlet.listener.IntrospectorCleaner\n> java.lang.ClassNotFoundException: org.eclipse.jetty.servlet.listener.IntrospectorCleaner: in notfound cache\n>   at org.eclipse.jetty.webapp.CachingWebAppClassLoader.loadClass(CachingWebAppClassLoader.java:81)\n>   at org.eclipse.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:428)\n>   at org.eclipse.jetty.server.handler.ContextHandler.loadClass(ContextHandler.java:1659)\n>   at org.eclipse.jetty.webapp.StandardDescriptorProcessor.visitListener(StandardDescriptorProcessor.java:1893)\n>   at sun.reflect.GeneratedMethodAccessor26.invoke(Unknown Source)\n>   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n>   at java.lang.reflect.Method.invoke(Method.java:497)\n>   at org.eclipse.jetty.webapp.IterativeDescriptorProcessor.visit(IterativeDescriptorProcessor.java:83)\n>   at org.eclipse.jetty.webapp.IterativeDescriptorProcessor.process(IterativeDescriptorProcessor.java:70)\n>   at org.eclipse.jetty.webapp.MetaData.resolve(MetaData.java:402)\n>   at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1339)\n>   at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:772)\n>   at org.eclipse.jetty.servlet.ServletContextHandler.doStart(ServletContextHandler.java:263)\n>   at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:517)\n\nOn 2015-12-17 20:43:34 -0500, Jan Bartel wrote:\n\n> Note that this is only happening in jetty-9.3.x, and apparently only when using jmx to do the stop/start. Doesn't seem to happen if you stop/start via touching webapps/test.xml.\n", "commits": {}, "title": "CachingWebAppClassLoader throws errors when webapp restarted", "created": "2016-02-16 23:44:04", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/269", "commitsDetails": [], "ttf": 882.0002777777778}, {"labels": ["Bug"], "closed": "2016-02-23 12:48:31", "body": "migrated from Bugzilla [#484622](https://bugs.eclipse.org/bugs/show_bug.cgi?id=484622)\nstatus ASSIGNED severity _normal_ in component _server_ for _9.3.x_\nReported in version _9.3.6_ on platform _PC_\nAssigned to: Greg Wilkins\n\nOn 2015-12-17 20:05:22 -0500, Greg Wilkins wrote:\n\n> The max buffer size for non cached content is not being set, thus direct nor indirect buffers are used if there is no cache and only a ByteChannel is used.\n> \n> The ResourceCache also does not account correctly for mapped buffers and direct buffers in the total cached size.\n", "commits": {}, "title": "Improve handling of Direct and Mapped buffers for static content", "created": "2016-02-16 23:43:56", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/268", "commitsDetails": [], "ttf": 6.000277777777778}, {"labels": ["Bug"], "closed": "2016-06-23 05:27:43", "body": "migrated from Bugzilla [#484064](https://bugs.eclipse.org/bugs/show_bug.cgi?id=484064)\nstatus ASSIGNED severity _normal_ in component _server_ for _9.3.x_\nReported in version _9.4.0_ on platform _All_\nAssigned to: Project Inbox\n\nOn 2015-12-10 01:39:12 -0500, Jan Bartel wrote:\n\n> The DoSFilter.RateTracker class implements session binding and passivation listeners. The passivation listener removes the rate tracker matching the session from the list of trackers, and then removes the tracker attribute from the session. The activation listener does nothing.\n> \n> Thus, if a session is ever passivated, its rate tracker is never re-established.\n> \n> The DoSFilter.RateTracker class should be made properly serializable (it has all transient fields), and should only remove itself from the list of trackers upon passivation. Upon activation it should add itself into the list of trackers.  The class will have to be made public scope.\n", "commits": {}, "title": "DoSFilter does not work with session managers that passivate", "created": "2016-02-16 23:43:53", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/267", "commitsDetails": [], "ttf": 127.00027777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "jmcc0nn3ll", "filteredCommits": ["3f828867740d1b9f2c7dadc3df33014d120b666b"], "commits": {"3f828867740d1b9f2c7dadc3df33014d120b666b": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2016-02-16 23:43:49", "commitsDetails": [{"commitMessage": "Issue #266 (jetty-client redirection process is aborted if redirect response have corrupt body)\n\nFixed by disabling content decode, since we are discarding the\ncontent anway.\n", "commitParents": ["d82b5ad65a62ccd49266c0a9dc20342478068c53"], "commitHash": "3f828867740d1b9f2c7dadc3df33014d120b666b", "commitSpoonAstDiffStats": [{"spoonFilePath": "RedirectProtocolHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.RedirectProtocolHandler.onHeader(org.eclipse.jetty.client.api.Response,org.eclipse.jetty.http.HttpField)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpClientRedirectTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpClientRedirectTest.test_303_302_OnDifferentDestinations()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.HttpClientRedirectTest.test_301()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.HttpClientRedirectTest.testHttpRedirector()", "DEL": 1, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.client.HttpClientRedirectTest.prepare()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 2, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.client.HttpClientRedirectTest.testRelativeURIPathWithSpaces()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.HttpClientRedirectTest.testMaxRedirections()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.HttpClientRedirectTest.testAbsoluteURIPathWithSpaces()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.HttpClientRedirectTest.testRedirectWithWrongScheme()", "DEL": 2, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.client.HttpClientRedirectTest.testMethodRedirect(org.eclipse.jetty.http.HttpMethod,org.eclipse.jetty.http.HttpMethod,int)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.HttpClientRedirectTest.test_301_WithWrongMethod()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.HttpClientRedirectTest.testHttpRedirector().3.onComplete(org.eclipse.jetty.client.api.Result)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 6, "TOT": 7}, {"spoonMethodName": "org.eclipse.jetty.client.HttpClientRedirectTest.testRedirectWithWrongScheme().2.onComplete(org.eclipse.jetty.client.api.Result)", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 2, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.client.HttpClientRedirectTest.test_303_WithConnectionClose_WithBigRequest()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.HttpClientRedirectTest.testRedirectFailed()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.HttpClientRedirectTest.testRelativeLocation()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.HttpClientRedirectTest.testDontFollowRedirects()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.HttpClientRedirectTest.testMethodRedirect(org.eclipse.jetty.http.HttpMethod,org.eclipse.jetty.http.HttpMethod,int).4", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.HttpClientRedirectTest.test_303_302()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.client.HttpClientRedirectTest.test_307_WithRequestContent()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "3f828867740d1b9f2c7dadc3df33014d120b666b tags/jetty-9.3.8.v20160311~3", "commitUser": "sbordet", "authoredDateTime": "2016-03-11 11:31:10", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 93, "filePath": "jetty-client/src/test/java/org/eclipse/jetty/client/HttpClientRedirectTest.java", "insertions": 71, "deletions": 22}, {"lines": 10, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/RedirectProtocolHandler.java", "insertions": 10, "deletions": 0}], "commitDateTime": "2016-03-11 11:31:39", "spoonStatsSkippedReason": ""}], "title": "jetty-client redirection process is aborted if redirect response have corrupt body", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 10, "insertions": 10, "gitFilesChange": 1, "deletions": 0}, "closed": "2016-03-11 10:33:35", "statsSkippedReason": "", "body": "migrated from Bugzilla [#484025](https://bugs.eclipse.org/bugs/show_bug.cgi?id=484025)\nstatus NEW severity _major_ in component _client_ for _9.3.x_\nReported in version _9.3.6_ on platform _PC_\nAssigned to: Simone Bordet\n\nOn 2015-12-09 10:09:45 -0500, Konstantin Gribov wrote:\n\n> It seems strange to fail redirection process if resource with status 301/302/307 and correct `Location` header returns some incorrect body (corrupt gzip stream, corrupt chunked stream).\n> \n> Most user agents usually follow such redirect without parsing body at all.\n> \n> To reproduce:\n> // Test client, expected to successfully get response from /ok after redirect and print \"ok\"\n> public class JettyClient {\n>   public static void main(String[] args) throws Exception {\n>     HttpClient httpClient = new HttpClient();\n>     httpClient.start();\n>     try {\n>       System.out.println(httpClient.GET(\"http://localhost:8088/302gz\").getContentAsString());\n>     } catch (Exception e) {\n>       e.printStackTrace();\n>     } finally {\n>       httpClient.stop();\n>     }\n>   }\n> }\n> \n> // Test server, which produce redirect response with \"corrupted gzip\" data and correct page after redirect:\n> public class BogusServer extends AbstractHandler {\n>   public static void main(String[] args) throws Exception {\n>     Server server = new Server(8088);\n>     server.setHandler(new BogusServer());\n>     server.start();\n>     server.join();\n>   }\n> \n>   @Override\n>   public void handle(String target, Request baseRequest, HttpServletRequest request, HttpServletResponse response)\n>       throws IOException, ServletException {\n>     if (\"/302gz\".equals(target)) {\n>       response.setHeader(HttpHeader.LOCATION.asString(), \"http://localhost:8088/ok\");\n>       response.setHeader(HttpHeader.CONTENT_ENCODING.asString(), \"gzip\");\n>       response.setContentType(\"text/plain\");\n>       response.setStatus(HttpServletResponse.SC_FOUND);\n>     } else {\n>       response.setContentType(\"text/plain\");\n>       response.setStatus(HttpServletResponse.SC_OK);\n>     }\n>     response.getWriter().write(\"ok\");\n>     baseRequest.setHandled(true);\n>   }\n> }\n", "changesInPackagesGIT": ["jetty-client/src/main/java/org/eclipse/jetty/client"], "changesInPackagesSPOON": ["org.eclipse.jetty.client.RedirectProtocolHandler.onHeader(org.eclipse.jetty.client.api.Response,org.eclipse.jetty.http.HttpField)"], "ttf": 23.00027777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/266"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "jmcc0nn3ll", "filteredCommits": ["2850f98fb4ed9a8edf1a80c100e77984ec456e75"], "commits": {"2850f98fb4ed9a8edf1a80c100e77984ec456e75": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2016-02-16 23:43:18", "commitsDetails": [{"commitMessage": "Issue #263  jetty-alpn-server Import-Package manifest header should specify version of org.eclipse.jetty.alpn.api\n", "commitParents": ["fbdd5e1da6b69dab1e5a4db390aba20f6eaac07d"], "commitHash": "2850f98fb4ed9a8edf1a80c100e77984ec456e75", "commitSpoonAstDiffStats": [], "nameRev": "2850f98fb4ed9a8edf1a80c100e77984ec456e75 tags/jetty-9.3.9.v20160517~63", "commitUser": "janbartel", "authoredDateTime": "2016-04-25 16:05:46", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 27, "filePath": "jetty-alpn/jetty-alpn-server/pom.xml", "insertions": 27, "deletions": 0}], "commitDateTime": "2016-04-25 16:08:37", "spoonStatsSkippedReason": ""}], "title": "jetty-alpn-server Import-Package manifest header should specify version of org.eclipse.jetty.alpn.api", "spoonStatsSummary": {}, "gitStatsSummary": {"lines": 0, "insertions": 0, "gitFilesChange": 0, "deletions": 0}, "closed": "2016-04-25 06:18:51", "statsSkippedReason": "", "body": "migrated from Bugzilla [#483339](https://bugs.eclipse.org/bugs/show_bug.cgi?id=483339)\nstatus REOPENED severity _normal_ in component _maven_ for _9.3.x_\nReported in version _9.3.6_ on platform _PC_\nAssigned to: Jan Bartel\n\nOn 2015-11-30 20:00:02 -0500, hiep lq wrote:\n\n> bundle alpn.server is required to create ALPNServerConnectionFactory\n> it import org.eclipse.jetty.alpn [9.3.6,9.3.7)\n> i just find out newest version of alpn-api is 1.1.2.v20150522,\n> but it export org.eclipse.jetty.alpn at 1.1.2\n> \n> so, constraint isn't satisfaction.\n> my work-around is edit manifest of jetty.alpn\n\nOn 2016-01-05 22:58:49 -0500, Jan Bartel wrote:\n\n> Hi,\n> \n> I suspect you might not have your osgi environment set up correctly. Here's a link to the alpn doc: http://www.eclipse.org/jetty/documentation/current/alpn-chapter.html\n> \n> For osgi, you need to ensure that the alpn-boot jar is on the -Xbootclasspath for the osgi container. That boot jar will contain the alpn-api.\n> \n> Then, you need to deploy the jetty-osgi-alpn jar into the container. This has a FragmentHost directive in the manifest that makes sure the api is exposed.\n> \n> Finally, you can look at the junit tests for jetty osgi with alpn to get some hints: https://github.com/eclipse/jetty.project/blob/master/jetty-osgi/test-jetty-osgi/src/test/java/org/eclipse/jetty/osgi/test/TestJettyOSGiBootHTTP2.java\n> \n> As I think this is a misconfiguration of your setup, I am going to close this issue. If you can show that there is a problem with jetty, please reopen the issue and include all relevant information, such as how you have configured your osgi container, which jars you have deployed, any stacktraces or logs that show the error etc.\n> \n> regards\n> Jan\n\nOn 2016-01-05 23:36:52 -0500, hiep lq wrote:\n\n> Thanks Jan Bartel for reply.\n> Has a difference from TestJettyOSGiBootHTTP2.java with my environment.\n> TestJettyOSGiBootHTTP2 don't materialize alpn-api bundle, my issue at alpn-api bundle.\n> \n> why need alpn-api? because alpn.server bundle import package org.eclipse.jetty.alpn (9.3.6,9.3.7) you can see in MF file\n> now, i just see alpn-api export this package. but version isn't match.\n> \n> why TestJettyOSGiBootHTTP2 pass? error just fire at runtime, when alpn.server need load class in package org.eclipse.jetty.alpn\n> \n> In eclipse, when i click validate plug-in, it also detect this issue.\n\nOn 2016-01-07 10:19:19 -0500, hiep lq wrote:\n\n> i don't get feedback, so i will reopen it.\n", "changesInPackagesGIT": [], "ttf": 68.00027777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/263"}, {"labels": ["Bug"], "closed": "2017-02-12 13:56:07", "body": "migrated from Bugzilla [#483324](https://bugs.eclipse.org/bugs/show_bug.cgi?id=483324)\nstatus NEW severity _blocker_ in component _http2_ for _9.3.x_\nReported in version _9.3.6_ on platform _PC_\nAssigned to: Simone Bordet\n\nOn 2015-11-30 12:51:47 -0500, hiep lq wrote:\n\n> I setup to use http2 in OSGi project. when i run it, non error message in console.\n> alpn selected correct h2 as protocol, but webpage is blank.\n> after debug i see:\n> line ServiceLoader.load(HttpFieldPreEncoder.class,PreEncodedHttpField.class.getClassLoader())\n> class org.eclipse.jetty.http.PreEncodedHttpField\n> only load Http1FieldPreEncoder, can't load HpackFieldPreEncoder\n> \n> so it make NPE in next step and after that java.nio.channels.ClosedChannelException\n> \n> detail log at:\n> http://0bin.net/paste/pXcVNVcvc1-52MbS#\n> \n> i don't see any error log because this log just a warning, and visible when set log level to debug.\n> \n> my work-around: i merged code of org.eclipse.jetty.http and org.eclipse.jetty.http2.hpack and i get http2 in my server.\n", "commits": {}, "title": "In OSGi + H2 environment java service HpackFieldPreEncoder can't load from org.eclipse.jetty.http", "created": "2016-02-16 23:43:07", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/262", "commitsDetails": [], "ttf": 361.0002777777778}, {"labels": ["Bug"], "closed": "2016-03-02 15:39:10", "body": "migrated from Bugzilla [#483298](https://bugs.eclipse.org/bugs/show_bug.cgi?id=483298)\nstatus NEW severity _normal_ in component _server_ for _9.3.x_\nReported in version _unspecified_ on platform _PC_\nAssigned to: Project Inbox\n\nOriginal attachment names and IDs:\n- _[webapp.zip](https://bugs.eclipse.org/bugs//attachment.cgi?id=258357)_ (ID 258357)\n\nOn 2015-11-30 06:26:23 -0500, Antti Luomi wrote:\n\n> Created attachment 258357\n> minimal webapp to reproduce the problem\n> \n> This was tested with Jetty 9.3.7-20151125.\n> \n> Jetty 9.3.7 does not serve files in symbolically linked directories if the link contains dots. Jetty 9.2.14.v20151106 does.\n> \n> To reproduce:\n> - Initialize the Jetty base directory with modules http, webapp and deploy (--add-to-startd=http,webapp,deploy)\n> - Unzip the zip file attached to this ticket to jetty base directory (will create directory webapps/test).\n> - Start Jetty\n> - Browse to http://localhost:8080/test/\n> - Click link-with-dots\n> - Click test-file.txt\n> - With Jetty 9.3.7 you\u00e2\u0080\u0099ll get HTTP error 404. With Jetty 9.2.14 you'll see contents of the file.\n> - Suprisingly, clicking link-to-test-file.txt instead of test-file.txt shows the file content correctly.\n", "commits": {}, "title": "Cannot serve files in symbolically linked directory if the link contains dots", "created": "2016-02-16 23:42:55", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/261", "commitsDetails": [], "ttf": 14.000277777777777}, {"labels": ["Bug", "Help Wanted"], "closed": "2018-07-18 13:14:14", "body": "migrated from Bugzilla [#483119](https://bugs.eclipse.org/bugs/show_bug.cgi?id=483119)\nstatus ASSIGNED severity _normal_ in component _jsp_ for _9.3.x_\nReported in version _9.4.0_ on platform _PC_\nAssigned to: Project Inbox\n\nOn 2015-11-26 18:37:35 -0500, Greg Wilkins wrote:\n\n> JSPs fail to work with the caching WebAppClassLoader?!?!?\n> which is a pity as it is intended to help with el repeated resource lookups?\n", "commits": {}, "title": "CachingWebAppClassLoader breaks JSP", "created": "2016-02-16 23:42:54", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/260", "commitsDetails": [], "ttf": 882.0002777777778}, {"labels": ["Bug", "High Priority"], "closed": "2016-02-17 14:09:37", "body": "migrated from Bugzilla [#483091](https://bugs.eclipse.org/bugs/show_bug.cgi?id=483091)\nstatus REOPENED severity _critical_ in component _server_ for _9.3.x_\nReported in version _9.3.6_ on platform _PC_\nAssigned to: Project Inbox\n\nOn 2015-11-26 08:36:32 -0500, Heikki Vesalainen wrote:\n\n> When AsyncContext.complete() is called from WriteListener.onWritePossible() right after ServletOutputStream.write(bytes), it fails if the write is still pending.\n> \n> The stack trace is:\n> \n> 2015-11-26 13:24:37.592 [qtp1346018901-83] WARN  org.eclipse.jetty.server.HttpChannel - /\n> java.nio.channels.WritePendingException: null\n>         at org.eclipse.jetty.server.HttpConnection$SendCallback.reset(HttpConnection.java:665) ~[jetty-server-9.3.6.v20151106.jar:9.3.6.v20151106]\n>         at org.eclipse.jetty.server.HttpConnection$SendCallback.access$300(HttpConnection.java:627) ~[jetty-server-9.3.6.v20151106.jar:9.3.6.v20151106]\n>         at org.eclipse.jetty.server.HttpConnection.send(HttpConnection.java:508) [jetty-server-9.3.6.v20151106.jar:9.3.6.v20151106]\n>         at org.eclipse.jetty.server.HttpChannel.sendResponse(HttpChannel.java:673) ~[jetty-server-9.3.6.v20151106.jar:9.3.6.v20151106]\n>         at org.eclipse.jetty.server.HttpChannel.write(HttpChannel.java:722) ~[jetty-server-9.3.6.v20151106.jar:9.3.6.v20151106]\n>         at org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:177) ~[jetty-server-9.3.6.v20151106.jar:9.3.6.v20151106]\n>         at org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:163) ~[jetty-server-9.3.6.v20151106.jar:9.3.6.v20151106]\n>         at org.eclipse.jetty.server.HttpOutput.close(HttpOutput.java:211) ~[jetty-server-9.3.6.v20151106.jar:9.3.6.v20151106]\n>         at org.eclipse.jetty.server.Response.closeOutput(Response.java:987) ~[jetty-server-9.3.6.v20151106.jar:9.3.6.v20151106]\n>         at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:436) ~[jetty-server-9.3.6.v20151106.jar:9.3.6.v20151106]\n>         at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:242) [jetty-server-9.3.6.v20151106.jar:9.3.6.v20151106]\n>         at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:261) [jetty-io-9.3.6.v20151106.jar:9.3.6.v20151106]\n>         at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95) [jetty-io-9.3.6.v20151106.jar:9.3.6.v20151106]\n>         at org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:75) [jetty-io-9.3.6.v20151106.jar:9.3.6.v20151106]\n>         at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceAndRun(ExecuteProduceConsume.java:213) [jetty-util-9.3.6.v20151106.jar:9.3.6.v20151106]\n>         at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:147) [jetty-util-9.3.6.v20151106.jar:9.3.6.v20151106]\n>         at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:654) [jetty-util-9.3.6.v20151106.jar:9.3.6.v20151106]\n>         at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572) [jetty-util-9.3.6.v20151106.jar:9.3.6.v20151106]\n>         at java.lang.Thread.run(Thread.java:745) [na:1.8.0_60]\n> \n> Here is the test code:\n> \n> import org.eclipse.jetty.server.ServerConnector;\n> import org.eclipse.jetty.server.Server;\n> import org.eclipse.jetty.server.HttpConnectionFactory;\n> import org.eclipse.jetty.server.HttpConfiguration;\n> import org.eclipse.jetty.servlet.ServletContextHandler;\n> import org.eclipse.jetty.servlet.ServletHolder;\n> import javax.servlet.http._;\n> import javax.servlet._;\n> import java.io.IOException;\n> \n> public class JettyAsyncTest {\n> \n>   public static byte[] testData = new byte[512_1024_1024];\n> \n>   static {\n>     for (int i = 0; i < testData.length; i++) {\n>       testData[i] = (byte)('0' + (i%10));\n>     }\n>     testData[testData.length - 1] = '-';\n>   }\n> \n>   public static void main(String[] args) throws Exception {\n>     Server s = createServer(5555);\n>     addServlet(s, new TestServlet());\n>     s.start();\n>   }\n> \n>   public static Server createServer(int port) {\n>     ServletContextHandler context = new ServletContextHandler();\n>     HttpConnectionFactory httpConnectionFactory = new HttpConnectionFactory(new HttpConfiguration());\n>     Server server = new Server();\n>     ServerConnector connector = new ServerConnector(server, httpConnectionFactory);\n> \n> ```\n> context.setContextPath(\"/\");\n> server.addConnector(connector);\n> server.setHandler(context);\n> connector.setPort(port);\n> \n> return server;\n> ```\n> \n>   }\n> \n>   public static void addServlet(Server server, Servlet servlet) {\n>     ServletContextHandler c = (ServletContextHandler) server.getHandler();\n>     c.addServlet(new ServletHolder(servlet), \"/\");\n>   }\n> \n>   public static class TestServlet extends HttpServlet {\n>     public void doGet(HttpServletRequest req, HttpServletResponse res) throws IOException {\n>       AsyncContext ac = req.startAsync();\n>       ac.setTimeout(1000L_60_60);\n>       ServletOutputStream out = res.getOutputStream();\n>       out.setWriteListener(new TestWriteListener(out, ac));\n>     }\n>   }\n> \n>   public static class TestWriteListener implements WriteListener {\n>     ServletOutputStream out;\n>     AsyncContext ac;\n> \n> ```\n> public TestWriteListener(ServletOutputStream out, AsyncContext ac) {\n>   this.out = out;\n>   this.ac = ac;\n> }\n> \n> public void onWritePossible() {\n>   if (out.isReady()) {\n>     try {\n>       out.write(JettyAsyncTest.testData);\n>     } catch (IOException e) {\n>       e.printStackTrace();\n>     } finally {\n>       ac.complete();\n>     }\n>   }\n> }\n> \n> public void onError(Throwable t) {\n>   t.printStackTrace();\n> }\n> ```\n> \n>   }\n> }\n> \n> To use the test, use wget/curl/telnet, etc to the port 5555 and GET /. The result is an instant failure (i.e. there is not timeout).\n\nOn 2015-11-26 16:28:51 -0500, Greg Wilkins wrote:\n\n> Heikki,\n> \n> I believe that is by design.   You have done an asynchronous write that is still pending, so you are unable to do a complete() until that write is complete (signalled by isReady() returning true).\n> \n> You need to do something like:\n> \n> ```\n> public void onWritePossible() {\n>   while (out.isReady()) {\n>     try {\n>       if (!written) {\n>         written=true;\n>         out.write(JettyAsyncTest.testData);\n>       } else {\n>         ac.complete();\n>       }   \n>     } catch (IOException e) {\n>       e.printStackTrace();\n>       ac.complete();\n>     }\n>   }\n> }\n> \n> public void onError(Throwable t) {\n>   t.printStackTrace(); \n>   ac.complete();\n> }\n> ```\n\nOn 2015-11-26 17:25:53 -0500, Heikki Vesalainen wrote:\n\n> Greg, are you sure Jetty's interpretation of the specification correct. The specification is not 100% clear on the subject, but it does say: \n> \n> \"It is legal to call this [complete] method anytime after a call to ServletRequest.startAsync() or ServletRequest.startAsync(ServletRequest, ServletResponse) and before a call to one of the dispatch methods.\"\n> \n> The specification doesn't say what happens if you call complete when a write is pending, but at least it doesn't say the already written data would be lost.\n\nOn 2015-11-26 18:09:32 -0500, Greg Wilkins wrote:\n\n> Reopening while we have the discussion.\n> \n> I'm not 100% and yes the spec is very ambiguous... (I have to take some of the blame there).\n> \n> The text about complete being able to be called anytime was written before the async IO API was added to the spec, thus it was written before it was possible to have a write pending... ie before there was state that may need to be resolved before a lifecycle can complete.\n> \n> I will raise this with the servlet EG to see what they think.   However I believe that a complete() is an implicit write (as it may have to send the end chunk) and thus cannot be attempted until the previous write is complete.\n\nOn 2015-11-26 18:17:09 -0500, Greg Wilkins wrote:\n\n> See https://java.net/projects/servlet-spec/lists/jsr369-experts/archive/2015-11/message/0\n", "commits": {}, "title": "AsyncContext.complete fails (WritePendingException) when called right after out.write", "created": "2016-02-16 23:42:44", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/259", "commitsDetails": [], "ttf": 0.0002777777777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "jmcc0nn3ll", "filteredCommits": ["2af81781cd8c96bfe49503a563c404d6276bda07"], "commits": {"2af81781cd8c96bfe49503a563c404d6276bda07": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2016-02-16 23:42:32", "commitsDetails": [{"commitMessage": "Issue #258 (Http request to origin server over https proxy contains absolute URL)\n\nFixed by sending the request target in origin-form (and not in\nabsolute-form) when request is to a https server.\n", "commitParents": ["4039f00bdaccd15a7ef180f7fb50d90f15802e72"], "commitHash": "2af81781cd8c96bfe49503a563c404d6276bda07", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpConnection.normalizeRequest(org.eclipse.jetty.client.api.Request)", "DEL": 2, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 5}]}, {"spoonFilePath": "ForwardProxyServerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.proxy.ForwardProxyServerTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "2af81781cd8c96bfe49503a563c404d6276bda07 tags/jetty-9.3.8.v20160311~5", "commitUser": "sbordet", "authoredDateTime": "2016-03-10 22:01:17", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 221, "filePath": "jetty-proxy/src/test/java/org/eclipse/jetty/proxy/ForwardProxyServerTest.java", "insertions": 221, "deletions": 0}, {"lines": 4, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpConnection.java", "insertions": 2, "deletions": 2}], "commitDateTime": "2016-03-10 22:01:17", "spoonStatsSkippedReason": ""}], "title": "Http request to origin server over https proxy contains absolute URL", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 2, "INS": 1, "UPD": 0, "MOV": 2, "TOT": 5, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 4, "insertions": 2, "gitFilesChange": 1, "deletions": 2}, "closed": "2016-03-10 21:04:36", "statsSkippedReason": "", "body": "migrated from Bugzilla [#482635](https://bugs.eclipse.org/bugs/show_bug.cgi?id=482635)\nstatus ASSIGNED severity _normal_ in component _client_ for _9.3.x_\nReported in version _9.2.10_ on platform _PC_\nAssigned to: Simone Bordet\n\nOriginal attachment names and IDs:\n- _[0001-Send-path-in-request-line-tunneled-through-proxy.patch](https://bugs.eclipse.org/bugs//attachment.cgi?id=258371)_ (ID 258371)\n- _[0001-Send-path-in-request-line-tunneled-through-proxy.patch](https://bugs.eclipse.org/bugs//attachment.cgi?id=258397)_ (ID 258397)\n\nOn 2015-11-19 19:24:28 -0500, Vijay Panghal wrote:\n\n> Jetty Http Client sends absolute URL to Origin Http server when request goes over httpS proxy CONNECT tunnel.\n> \n> e.g. Jetty Http Client to origin server over https proxy looks like this\n> \n> <pre>\n> PUT http://host:port/path/to/resource HTTP/1.1\n> </pre>\n> \n> \n> This behaviour is different from other clients e.g. Curl/Apache Http Client which sends absolute PATH in the request. \n> \n> <pre>\n> PUT /path/to/resource HTTP/1.1\n> HOST: host:port\n> </pre>\n> \n> \n> Jetty http client does not seems to differentiate between http and https proxy. For http proxy, it is required to send absolute URL to know the origin server host and port. \n> \n> But absolute PATH is sufficient for httpS proxy tunnel as proxy is aware of origin server with initial HTTP CONNECT method.\n\nOn 2015-11-30 21:08:45 -0500, Vijay Panghal wrote:\n\n> Created attachment 258371\n> Send path than uri in tunneled https request\n> \n> When https request is tunneled through http proxy, jetty client sends\n> absolute uri than path in the request line. This confuses some\n> implementation of the origin http server.\n> \n> Strictly speaking, jetty client behaviour is http/1.1 compliant.\n> https://tools.ietf.org/html/rfc2616#section-5.1.2\n> \n> But practically some of the http server in wild are not that complaint\n> and require absolute path in request line.\n> \n> See\n> https://bugs.python.org/issue21472\n> https://bugs.launchpad.net/swift/+bug/1517673\n> \n> Also other http client implementations (Apache and Curl) comply to their\n> behaviour.\n> \n> This commit make sure that when jetty client tunnels https request to\n> origin server, it sends path than uri in the request line.\n\nOn 2015-12-01 13:05:56 -0500, Vijay Panghal wrote:\n\n> Created attachment 258397\n> Simplify previous patch\n\nOn 2015-12-02 03:56:04 -0500, Greg Wilkins wrote:\n\n> I think I can see another problem with the current code.  It protects the URI of CONNECT methods from being made absolute (so you can have CONNECTs over CONNECTs?), but it does not protect for other non URI \"URI\"s.  EG. OPTIONS can have a \"URI\" of *\n\nOn 2016-01-20 18:50:30 -0500, Vijay Panghal wrote:\n\n> Sorry, I did not get any email notification.\n> \n> But I think this piece of code is overriding relative URI with absolute URI in http request to send origin server hostname and port to intermediate http proxy.\n> \n> For http proxy, it make sense to send absolute URI. But it is not required for Https proxy as that has been done with CONNECT method request.\n", "changesInPackagesGIT": ["jetty-client/src/main/java/org/eclipse/jetty/client"], "changesInPackagesSPOON": ["org.eclipse.jetty.client.HttpConnection.normalizeRequest(org.eclipse.jetty.client.api.Request)"], "ttf": 22.00027777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/258"}, {"labels": ["Bug"], "closed": "2016-06-10 06:17:25", "body": "migrated from Bugzilla [#482627](https://bugs.eclipse.org/bugs/show_bug.cgi?id=482627)\nstatus ASSIGNED severity _major_ in component _server_ for _9.3.x_\nReported in version _9.2.0_ on platform _All_\nAssigned to: Jan Bartel\n\nOn 2015-11-19 16:53:46 -0500, Greg Wilkins wrote:\n\n> JDBCLoginModule exposes existence of user accounts to timing attacks\n> \n> The paper https://crypto.stanford.edu/~dabo/papers/webtiming.pdf uses \"directly measure[d] response times from a web site to expose private informa- tion such as validity of an username at a secured site \". The class org.eclipse.jetty.jaas.spi.JDBCLoginModule\n>  is exposed to such timing attacks as it eagerly loads user roles in a separate query to the database before the user credentials are checked. This means that without knowing the password an attacker can executed a code path that does an additional trip to the database for a valid username that is not taken for an invalid username. Using the techniques in the above paper this can be exploited to cause a secured website to leak private information about the existence of user accounts.\n\nOn 2015-11-19 18:45:24 -0500, Greg Wilkins wrote:\n\n> Jan says: \n> Simon - also to clarify, the problem you're reporting is that there is a time differential between a response when a user record doesn't exist in the database and when it does, correct? And that the time differential is caused by line 90 of AbstractDatabaseLoginModule returning early after the database call to get the user credential when the user does not exist, before the 2nd query is done to get the roles?\n> \n> If so, then I see that the solution is simply to move the test at line 90 down to after the second call to the database, and before we create the UserInfo object - is this your understanding also?\n\nOn 2015-11-19 18:45:50 -0500, Greg Wilkins wrote:\n\n> Simon says:\n> \n> Agreed that looking at https://github.com/eclipse/jetty.project/blob/SHA: 64ba5a6ef8558c70ae053a7854891273fe4ea5bf/jetty-jaas/src/main/java/org/eclipse/jetty/jaas/spi/AbstractDatabaseLoginModule.java line 90 that shortcut is the main problem. Moving that block down to 109 would ensure that an attacker samples the network latency of a second trip to the DB regardless to whether the user exists or not. Thats the minimum fix and easy to apply to prior versions. \n> \n> Yet I still don\u00e2\u0080\u0099t like the second query happening pre-emptively before the user credential is verified; its a query to a secondary index potentially hitting many rows. Anyone having fun with shared database deployment else things like jdbc over cassandra may get significantly different latencies for queries depending on whether it finds multiple rows or none. I would really want to do a lot of benchmarking of different setups before saying \u00e2\u0080\u009cyes its really not noticeable whether it does or does not find many or zero roles\u00e2\u0080\u009d. So its an open ended question that should really be removed from the picture. My vote is that in the next major version the code it gets a bigger refactored to check the credentials before ever running the query for roles. \n> \n> The first query is for authentication the second is for authorisation; preemptively running the authorisation query is both wasted cycle, io and retains a timing attack question of a multiple row query on a secondary index. The current approach loads all the state then asks it about the outcome of the protocol; thats a classic misapplication of OO. It also means that in trying to implement a JAAS module I am told \u00e2\u0080\u009cits easy, just return all these native Jetty state objects, because those objects are our authentication protocol\u00e2\u0080\u009d :double-thumb-down-emoticon:\n> \n> Fixing that is a bigger refactor than pushing the three lines 90-93 down to 109.\n\nOn 2015-11-19 18:51:26 -0500, Greg Wilkins wrote:\n\n> I agree that having the query for the roles before checking credentials is the fundamental problem.\n> \n> If a DB was slow enough so that timing differences could indicate the number of role rows returned, then additional information about a user could be leaked (eg if that user has lots of roles or few roles, hence identifying which users to attack).\n> \n> Not so sure about your comments about JAAS itself and that is probably a subject for a different issue.  However, we've seen very little demand for JAAS (And even less for JASPI) and hence our implementations do not receive much attention.   So if you do have input of how to improve them then we would benefit from your experience, so perhaps open another bugzilla to expand on your concerns/ideas.\n\nOn 2015-11-19 18:56:54 -0500, Simon Massey wrote:\n\n> Sure it is a different topic I hope to have finished the demo I was working on of integrating SRP6a protocol into Jetty and when that is up on github I will point out the challenges and make some suggestions.\n\nOn 2015-12-15 20:15:24 -0500, Jan Bartel wrote:\n\n> Fixes were applied to jetty-9.3.x and master back on 25th November.\n> \n> Jan\n", "commits": {}, "title": "JDBCLoginModule exposes existence of user accounts to timing attacks", "created": "2016-02-16 23:42:22", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/257", "commitsDetails": [], "ttf": 114.00027777777778}, {"labels": ["Bug"], "closed": "2016-03-02 15:41:17", "body": "migrated from Bugzilla [#482566](https://bugs.eclipse.org/bugs/show_bug.cgi?id=482566)\nstatus NEW severity _normal_ in component _server_ for _9.3.x_\nReported in version _9.3.0_ on platform _PC_\nAssigned to: Project Inbox\n\nOn 2015-11-19 04:30:29 -0500, Jan Tore Boee wrote:\n\n> When posting and the server requires digest authentication the client ignores the 401 and does not resend the post with the credentials if the post request was not completed before the response came from the server. This results in a NoHttpResponseException on the client.\n> \n> Tested with version 9.3.0.RC0 to 9.3.6.v20151106 on the server and client.\n> \n> The client uses org.eclipse.jetty.security.MappedLoginService to handle the authentication.\n> \n> httpclient is version 4.3.6\n> \n> Stacktrace:\n> \n> org.apache.http.NoHttpResponseException: xxxxxxxx:12345 failed to respond\n>   at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:143)\n>   at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:57)\n>   at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:261)\n>   at org.apache.http.impl.DefaultBHttpClientConnection.receiveResponseHeader(DefaultBHttpClientConnection.java:165)\n>   at org.apache.http.impl.conn.CPoolProxy.receiveResponseHeader(CPoolProxy.java:153)\n>   at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:272)\n>   at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:124)\n>   at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:254)\n>   at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:195)\n>   at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:86)\n>   at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:108)\n>   at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:184)\n>   at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)\n>   at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:57)\n\nOn 2015-11-19 06:49:45 -0500, Jan Tore Boee wrote:\n\n> After some investigation, MappedLogonService is ofc used on the server, the client uses httpclient to connect and communicate.\n", "commits": {}, "title": "NoHttpResponseException when using digest from client.", "created": "2016-02-16 23:42:14", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/256", "commitsDetails": [], "ttf": 14.000277777777777}, {"labels": ["Bug"], "closed": "2016-03-22 15:11:25", "body": "migrated from Bugzilla [#481839](https://bugs.eclipse.org/bugs/show_bug.cgi?id=481839)\nstatus NEW severity _major_ in component _server_ for _9.3.x_\nReported in version _9.3.2_ on platform _PC_\nAssigned to: Project Inbox\n\nOn 2015-11-10 08:56:47 -0500, ali baba wrote:\n\n> Hi everyone,\n> \n> Send a get request to jetty(9.3.2) with url = http://localhost:8080/any% causes response code 400, but nothing is shown to the user. User have to use some plugin to know that the response code is 400. if it is bug, the following block of HttpParse class is guilty:  (org.eclipse.jetty.http.HttpParser)\n> \n> catch(Exception|Error e)\n>         {\n>             BufferUtil.clear(buffer);\n> \n> ```\n>         LOG.warn(\"parse exception: \"+e.toString()+\" for \"+_handler,e);\n> \n>         switch(_state)\n>         {\n>             case CLOSED:\n>                 break;\n>             case CLOSE:\n>                 _handler.earlyEOF();\n>                 break;\n>             default:\n>                 setState(State.CLOSE);\n>                 _handler.badMessage(400,null);   <<<<<<<null, but at least e.getMessage()\n>         }\n>     }\n> ```\n", "commits": {}, "title": "No Response page in case of invalid url (IllegalArgumentException)", "created": "2016-02-16 23:41:33", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/252", "commitsDetails": [], "ttf": 34.000277777777775}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "jmcc0nn3ll", "filteredCommits": ["1b310c84b05c43694bfc8a12232596abee689706"], "commits": {"1b310c84b05c43694bfc8a12232596abee689706": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2016-02-16 23:40:48", "commitsDetails": [{"commitMessage": "Issue #247 improving invalid buffer manipulation exception messages\n", "commitParents": ["aed05a1e369c81bf18b3ec135f3a40b5a96ac451"], "commitHash": "1b310c84b05c43694bfc8a12232596abee689706", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpOutput.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpOutput.sendContent(org.eclipse.jetty.http.HttpContent,org.eclipse.jetty.util.Callback)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "Response.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.Response.setBufferSize(int)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.Response.resetBuffer()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.server.Response.sendError(int,java.lang.String)", "DEL": 1, "INS": 1, "UPD": 2, "MOV": 2, "TOT": 6}]}], "nameRev": "1b310c84b05c43694bfc8a12232596abee689706 tags/jetty-9.3.8.v20160311~39", "commitUser": "joakime", "authoredDateTime": "2016-03-02 09:06:21", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpOutput.java", "insertions": 1, "deletions": 1}, {"lines": 7, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/Response.java", "insertions": 3, "deletions": 4}], "commitDateTime": "2016-03-02 09:06:21", "spoonStatsSkippedReason": ""}], "title": "Commit exception should provide more details", "spoonStatsSummary": {"spoonMethodsChanged": 4, "DEL": 1, "INS": 1, "UPD": 5, "MOV": 2, "TOT": 9, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 9, "insertions": 4, "gitFilesChange": 2, "deletions": 5}, "closed": "2016-03-02 16:08:56", "statsSkippedReason": "", "body": "migrated from Bugzilla [#481131](https://bugs.eclipse.org/bugs/show_bug.cgi?id=481131)\nstatus REOPENED severity _trivial_ in component _server_ for _9.3.x_\nReported in version _unspecified_ on platform _All_\nAssigned to: Project Inbox\n\nOn 2015-10-30 12:10:05 -0400, Gray wrote:\n\n> When a request has already been committed (typically by someone calling response.getWriter()), and then someone tries to do a redirect, an exception is thrown in Response.\n> \n> ```\n> public void resetBuffer()\n> {\n>     if (isCommitted())\n>         throw new IllegalStateException(\"Committed\");\n>     _connection.getGenerator().resetBuffer();\n> }\n> ```\n> \n> This exception message is close to worthless.  Please consider changing to to be something like:\n> \n> ```\n> Response has already been committed.  Are you trying to change the status code after sending content?\n> ```\n> \n> Or some such.  Every exception is an opportunity to provide feedback to the developer so one word exceptions should be expanded to provide more information.\n> \n> Thanks much.\n\nOn 2015-11-01 18:20:23 -0500, Greg Wilkins wrote:\n\n> Gray,\n> \n> sorry but the basic policy of Jetty is to avoid chatty long exception messages that are localized to a specific language.   Instead we try to provide all the relevant information in a minimal format that is not too locale specific.\n> \n> I don't agree that the current exception is worthless.   It is telling you that the response object is in an illegal start for a call to resetBuffer.  Moreover it says that the state is committed.\n> \n> Granted it does not say how the response got into a committed state, but there are many ways that can happen and sending content is only one of those (and does not necessarily commit the response either).   Changing status code is only one of many actions that are prohibited once the response is committed, so also can not be called out in the error message.\n\nOn 2015-11-01 22:12:16 -0500, Gray wrote:\n\n> Then we disagree on all fronts.  Exceptions are supposed to be helpful to a developer unless you excepted us to jump to the source every time.  A one word exception that is easy to generate that uses a word that means many things is a big fail.  Every time someone generates an exception using one of my libraries I evaluate whether more information could have helped the developer figure out the problem on their own.  The idea that we don't want to be \"chatty\" or that we are worried about non-localized messages is just misdirection.  If they don't know english then one word or 30 isn't going to be an issue.  And I guess being chatty takes up too many bytes or fills log files?  But I suspect I'm wasting my breath.  Best of luck.\n\nOn 2015-11-01 22:35:54 -0500, Greg Wilkins wrote:\n\n> Gray,\n> \n> you're not wasting your breath as I'm happy to discuss - and plenty of times I have been convinced to change my mind.\n> \n> However, in this case I just don't understand what information is missing from the exception?\n> \n> Your suggested text comes in two parts: \"Response has already been committed.\" and \"Are you trying to change the status code after sending content?\"\n> \n> I maintain that the current implementation conveys all the information in the first part of your suggestion:  The exception is thrown from the response, it is already in an illegal state for the request operation and that state is \"committed\".\n> \n> The second part is just guessing at a potential cause that will often be wrong and is also suggesting that you can't change status after writing content - which with the servlet spec you can (now why that is allowed is an entirely different discussion and out of both of out hands).\n> \n> I'm not expecting the developer to look at the code, as in this case it provides no additional information.  The test that fails is Response.isCommitted, which tells you no more than IllegalStateException(\"Committed\")\n> \n> So assuming we just disagree on the chatty aspects and localization aspects, what exactly is the extra information that you want to see in that exception?\n\nOn 2015-11-01 23:07:32 -0500, Gray wrote:\n\n> Thanks for asking for more info greg.\n> \n> The word \"committed\" is not necessarily going to be know by the developer.  It's a Jetty term.  \"Response has already been committed.\" is better than just one word because then the developer knows that something is wrong with the response as opposed to them maybe having a committed an exception or something?\n> \n> I'm the author of ORMLite a ORM library and I try to add a bit more information to an exception to give the developer more information.  Certainly I never have a one word exception.  For example, when I do reflection on object constructors that fails, I say \"maybe not public or a non-static inner class?\".  I put the question-mark to let them know that it is a guess but it typically covers the standard use cases (i.e. the 60% rule) and even if it is a miss, it gives the developer a bit more information for them to look into the problem.  I'm continually watching SO and my mailing list for people posting exceptions and I try to see the exception from their point of view.  How can it help them better.\n> \n> In terms of committed responses, as I read the code, all you have to do is to call getOutputStream() or getWriter() to switch state on the response.  The typical times I've seen this exception is when someone tries to return downloaded information _and_ then do a redirect.\n> \n> Thanks for listening.\n\nOn 2015-11-01 23:34:40 -0500, Greg Wilkins wrote:\n\n> (In reply to Gray from comment # 4)\n> \n> > Thanks for asking for more info greg.\n> > \n> > The word \"committed\" is not necessarily going to be know by the developer. \n> > It's a Jetty term.  \"Response has already been committed.\" is better than\n> > just one word because then the developer knows that something is wrong with\n> > the response as opposed to them maybe having a committed an exception or\n> > something?\n> \n> Well committed state is actually a servlet specification state and the isCommitted method is part of the standard API.   I don't think it is unreasonable to expect a servlet developer to be familiar with the concept of committing a response.\n> \n> Perhaps I'm guilty of reductio ad absurdum, but to me \"has already been\" is a  verbose way of saying \"is\",  So IllegalStateException(\"Response is Committed\") is perhaps a better way of saying it, but then what other object other than the Response could I be throwing an ISE about?  So if I don't need to specify the object, then I'm just left with saying which state I'm in that is illegal.\n> \n> Maybe IllegalStateException(\"state=Committed\"), but that starts implying that there is actually a state variable called state... which there isn't\n> \n> > In terms of committed responses, as I read the code, all you have to do is\n> > to call getOutputStream() or getWriter() to switch state on the response. \n> > The typical times I've seen this exception is when someone tries to return\n> > downloaded information _and_ then do a redirect.\n> \n> They are many ways of committing a response, but they do not include getOutputStream() or getWriter().   responses can be committed by an explicit flushBuffers(), a sendError(), writing more content than the buffer size, writing exactly the content length set as a header (or setContentLength), or an exception thrown, doing an include in some situations.  Plus the commit action could have happened in a filter or a previous dispatch during an async cycle or perhaps even during a forward/include RequestDispatch \n> \n> The resetBuffer may be called directly or as part of another call (to perhaps sendError), but it is not called to set the the status.\n> \n> There issue may occur because a response was committed when it should not have been OR because a resetBuffers (or related operation) was attempted when it should not have.\n> \n> Put together, there are many combinations of why this exception may occur and I suggesting just one is likely to misdirect as more developers as it potentially helps.\n> \n> If you can't say anything useful, then don't say anything at all.\n> \n> Anyway,  I'll reopen for a while.  If any of the other developers think I'm being too terse, then I'll let them come up with better text.\n\nOn 2015-11-02 00:35:41 -0500, Gray wrote:\n\n> All good points.  How about:\n> \n> \"Response already committed.  Status code and headers written.\"\n\nOn 2015-11-02 09:56:46 -0500, Gray wrote:\n\n> Just some followup.\n> \n> First off, you said that a servlet programmer should know the word committed but I bet fewer than 30% do.  I know at my company, none of our folks except me knew what \"IllegalStateException: Committed\" even meant.  You have to remember that many are dealing with servlets at the lever of public ModelView handler(String someParam) { ... }.\n> \n> It maybe easy to figure out what the exception means when you call response.sendError(...) and get that exception but when you are returning new ModelView(\"...\") from a handler method and get that exception, it is far less obvious.\n", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.Response.setBufferSize(int)", "org.eclipse.jetty.server.Response.resetBuffer()", "org.eclipse.jetty.server.HttpOutput.sendContent(org.eclipse.jetty.http.HttpContent,org.eclipse.jetty.util.Callback)", "org.eclipse.jetty.server.Response.sendError(int,java.lang.String)"], "ttf": 14.000277777777777, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/247"}, {"labels": ["Bug"], "closed": "2016-04-30 00:36:12", "body": "migrated from Bugzilla [#481057](https://bugs.eclipse.org/bugs/show_bug.cgi?id=481057)\nstatus REOPENED severity _normal_ in component _osgi_ for _9.3.x_\nReported in version _9.3.5_ on platform _PC_\nAssigned to: Jan Bartel\n\nOn 2015-10-29 16:37:46 -0400, Achim Nierbeck wrote:\n\n> The import packages for the jetty-alpn-server bundle is wrong concerning the package of org.eclipse.jetty.apln, as it imports this package in version 9.3.5. \n> The only bundle exporting this package is the alpn-api bundle in version 1.1.2.v20150522. The package version inside this bundle is 1.1.2. \n> \n> So either the api bundle or the server bundle needs a correction of either import of export package.\n\nOn 2016-01-05 23:06:51 -0500, Jan Bartel wrote:\n\n> Achim,\n> \n> I think you might not have your osgi container configured correctly.  Here's a link to the alpn doc that mentions the special setup for osgi: http://www.eclipse.org/jetty/documentation/current/alpn-chapter.html\n> \n> Essentially, you have to insure that you have the alpn-boot jar on the -Xbootclasspath of your osgi container. That jar contains the api, however it does not expose those classes to the osgi classloader. To do that, you also need to deploy - as a normal bundle - the jetty-osgi-alpn jar (at the same version as the rest of your jetty bundles) as mentioned in the link above. That jar contains a FragmentHost directive in the manifest that ensures the api is exposed correctly.\n> \n> Finally, you can check the junit tests for the jetty osgi/alpn integration to get some hints: https://github.com/eclipse/jetty.project/blob/master/jetty-osgi/test-jetty-osgi/src/test/java/org/eclipse/jetty/osgi/test/TestJettyOSGiBootHTTP2.java\n> \n> These unit tests work correctly, so please check the differences between them and your setup. \n> \n> If you follow all the advice and configure your environment correctly, and you still have an issue, please reopen this issue and explain exactly how your setup differs from the junit tests and why this is a problem.\n> \n> thanks\n> Jan\n\nOn 2016-01-23 17:20:29 -0500, Achim Nierbeck wrote:\n\n> Could you please take a closer look at \n> the jetty-osgi-alpn bundle, as this one only exports the package \n> org.eclipse.jetty.alpn in version 1.1.2 \n> \n> This is also true for version 9.3.6 of the jetty-osgi-alpn bundle.\n> So either this one needs to export the right version (9.3.6) or\n> the jetty-alpn-server bundle needs to import version 1.1.2 of that package. \n> \n> Please take a look at the excerpt below: \n> \n> Bundle-Name: Jetty OSGi ALPN Fragment\n> Bundle-RequiredExecutionEnvironment: JavaSE-1.8\n> Bundle-SymbolicName: org.eclipse.jetty.osgi.alpn.fragment;singleton:=t\n>  rue\n> Bundle-Vendor: Eclipse Jetty Project\n> Bundle-Version: 9.3.6.v20151106\n> Export-Package: org.eclipse.jetty.alpn;version=\"1.1.2\"\n> Fragment-Host: system.bundle;extension:=framework\n", "commits": {}, "title": "jetty-alpn-server (version 9.3.5) imports non existing org.eclipse.jetty.alpn in version 9.3.5", "created": "2016-02-16 23:40:37", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/246", "commitsDetails": [], "ttf": 73.00027777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "jmcc0nn3ll", "filteredCommits": ["ca882c8deebc354d4de59d9a3ab4ffc4e8c40b79"], "commits": {"ca882c8deebc354d4de59d9a3ab4ffc4e8c40b79": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2016-02-16 23:39:35", "commitsDetails": [{"commitMessage": "Issue #240\n\nNo error if no parts because input stream already consumed.\n", "commitParents": ["206122756f8988cf9e5abf4a4b4da83a3a562e07"], "commitHash": "ca882c8deebc354d4de59d9a3ab4ffc4e8c40b79", "commitSpoonAstDiffStats": [{"spoonFilePath": "MultiPartFilter.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlets.MultiPartFilter.doFilter(javax.servlet.ServletRequest,javax.servlet.ServletResponse,javax.servlet.FilterChain)", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 3}]}, {"spoonFilePath": "MultipartFilterTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlets.MultipartFilterTest.testBodyAlreadyConsumed()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.servlets.MultipartFilterTest.ReadAllFilter", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "MultiPartInputStreamTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.MultiPartInputStreamTest.testBodyAlreadyConsumed()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "MultiPartInputStreamParser.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.MultiPartInputStreamParser", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 1, "TOT": 3}]}], "nameRev": "ca882c8deebc354d4de59d9a3ab4ffc4e8c40b79 tags/jetty-9.4.0.RC2~1^2~31", "commitUser": "janbartel", "authoredDateTime": "2016-11-02 15:40:59", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 72, "filePath": "jetty-servlets/src/test/java/org/eclipse/jetty/servlets/MultipartFilterTest.java", "insertions": 72, "deletions": 0}, {"lines": 46, "filePath": "jetty-util/src/test/java/org/eclipse/jetty/util/MultiPartInputStreamTest.java", "insertions": 46, "deletions": 0}, {"lines": 29, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/MultiPartInputStreamParser.java", "insertions": 21, "deletions": 8}, {"lines": 5, "filePath": "jetty-servlets/src/main/java/org/eclipse/jetty/servlets/MultiPartFilter.java", "insertions": 2, "deletions": 3}], "commitDateTime": "2016-11-02 15:40:59", "spoonStatsSkippedReason": ""}], "title": "Missing content for multipart request after upgrade to Jetty > 9.2.7", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 2, "INS": 2, "UPD": 0, "MOV": 2, "TOT": 6, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 34, "insertions": 23, "gitFilesChange": 2, "deletions": 11}, "closed": "2016-11-02 04:46:15", "statsSkippedReason": "", "body": "migrated from Bugzilla [#480063](https://bugs.eclipse.org/bugs/show_bug.cgi?id=480063)\nstatus ASSIGNED severity _normal_ in component _server_ for _9.3.x_\nReported in version _9.2.7_ on platform _All_\nAssigned to: Project Inbox\n\nOn 2015-10-18 09:30:22 -0400, Yann Biancheri wrote:\n\n> I've upgraded my application server from Jetty 9.2.3 to 9.2.13. Shortly after, it appears that file upload using tomahawk and jsf 2.2 stopped working.\n> Before the upgrade I had this warning \"Missing content for multipart request\". After the Jetty upgrade the warning is promoted to an exception and I have a 500 error page.\n> \n> After some investigations the last working version for my application is Jetty 9.2.6. I believe  the issue is related to the resolution of this bug https://bugs.eclipse.org/bugs/show_bug.cgi?id=455655\n> \n> From my understanding it seems that tomahawk's extension filter has consumed the request stream before the servlet has a chance to do so but I'm no expert.\n> \n> I have produced a minimal test case with instructions to reproduce the issue here https://github.com/yannooo/jetty-tomahawk-issue\n> I've deployed this app to the latest version of Tomcat 7 and 8 and it worked without issue.\n\nOn 2015-10-21 05:24:24 -0400, Jan Bartel wrote:\n\n> Yann,\n> \n> Hmm. The difficulty is that the FacesServlet is annotated with @MultiPartConfig, which means that it is expecting to access the parts. We delay parsing of the content until code calls one of the getParameter methods, or getPart/s. If a filter has already hungrily consumed all of the content beforehand, then that's a problem.\n> \n> We already have an issue open to change the point at which the input is parsed, before a filter could get to it: https://bugs.eclipse.org/bugs/show_bug.cgi?id=458126\n> \n> If you're only using the ExtensionFilter to do the multipart processing, then you can remove it because jetty will parse it for you. If you're using it for some other reason, then that won't work for you.\n> \n> Jan\n\nOn 2015-10-28 16:07:39 -0400, Yann Biancheri wrote:\n\n> Thanks for your answer but my application is using the ExtensionFilter for other purposes. Also if I remove it from my sample app it causes an error when uploading files.\n> \n> In my case, the best seems to disable the scanning of @MultiPartConfig annotation.\n> \n> Our production package embeds jetty and I just removed org.eclipse.jetty.annotations.AnnotationConfiguration and can confirm everything works fine.\n> \n> For development purpose we are using jetty-maven-plugin but I haven't found a way to prevent the scanning of annotation. Do you have any recommendations?\n\nOn 2015-10-28 19:54:37 -0400, Jan Bartel wrote:\n\n> Yann,\n> \n> I am surprised that removing AnnotationConfiguration is working - all modern jsp engines use a ServletContainerInitializer to set themselves up, and AnnotationConfiguration is the class that makes sure they are found and applied.\n> \n> Seems like the easiest thing to do would be to let jetty do the parsing for you by adding a filter as the first one in the chain that just calls one of the getParameter() methods. That way jetty does the parsing, the parts are available to the FacesServlet, or any other code that calls getParts() or getParameter().\n> \n> You could also add a filter that was the last one in the chain and it called getParameter() too, catching a RuntimeException, opening it to check if it is wrapping an IOException with message of \"Missing content for multipart request\" and ignoring it if so.\n> \n> I've tested both of these solutions and they both work, so you pick which you prefer.\n> \n> The best and final solution would be as I mentioned before, an implementation for bug https://bugs.eclipse.org/bugs/show_bug.cgi?id=458126.\n> \n> Jan\n", "changesInPackagesGIT": ["jetty-util/src/main/java/org/eclipse/jetty/util", "jetty-servlets/src/main/java/org/eclipse/jetty/servlets"], "changesInPackagesSPOON": ["org.eclipse.jetty.util.MultiPartInputStreamParser", "org.eclipse.jetty.servlets.MultiPartFilter.doFilter(javax.servlet.ServletRequest,javax.servlet.ServletResponse,javax.servlet.FilterChain)"], "ttf": 259.0002777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/240"}, {"labels": ["Bug"], "closed": "2016-07-01 01:51:54", "body": "migrated from Bugzilla [#479706](https://bugs.eclipse.org/bugs/show_bug.cgi?id=479706)\nstatus NEW severity _normal_ in component _client_ for _9.3.x_\nReported in version _9.3.6_ on platform _PC_\nAssigned to: Project Inbox\n\nOn 2015-10-13 19:40:18 -0400, Zach Swasey wrote:\n\n> The tarball released for distribution doesn't seem to include client libraries for ALPN or HTTP/2.\n> \n> This URL: http://download.eclipse.org/jetty/stable-9/dist/jetty-distribution-9.3.3.v20150827.tar.gz\n> \n> Under libs/http2 only includes http2-common, http2-hpack, and http2-server. No http2-client, or http2-http-client-transport.\n> \n> Same with alpn. The distribution tarball is missing alpn-client.\n> \n> Note: I put this in \"Other\" component, since it's not directly related to HTTP/2, but to the Jetty project's as a whole's distribution. If that's not correct, please re-assign.\n\nOn 2015-10-14 18:38:19 -0400, Zach Swasey wrote:\n\n> Happens in latest 9.3.5 distribution tarball from 2 days ago as well.\n\nOn 2015-11-24 13:36:29 -0500, Zach Swasey wrote:\n\n> 9.3.6 as well. Changing component to client as maybe that applies more.\n", "commits": {}, "title": "HTTP/2 and ALPN clients missing from distribution jar", "created": "2016-02-16 23:39:02", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/237", "commitsDetails": [], "ttf": 135.00027777777777}, {"labels": ["Bug"], "closed": "2017-07-14 16:11:28", "body": "migrated from Bugzilla [#479505](https://bugs.eclipse.org/bugs/show_bug.cgi?id=479505)\nstatus NEW severity _normal_ in component _server_ for _9.3.x_\nReported in version _9.3.3_ on platform _PC_\nAssigned to: Project Inbox\n\nOn 2015-10-11 04:11:04 -0400, Thomas Lussnig wrote:\n\n> Maybe this bug is related to 370532 but here the problem is different.\n> While working and debugging ssl events i found after BUG-473832 another\n> handling error in the ssl engine. If the connection is closed normally jetty\n> would receive an close_notify from the peer (this is also been send correctly).\n> But in the SslConnection of jetty after an close the connection is hard closed\n> without waiting for this event.\n> 1) This cause an unnecessary SSLException\n> 2) On the peer side it can cause an error since he write data that can not delivered.\n> \n> java.lang.Throwable: fatal(80 , Inbound closed before receiving peer's close_notify: possible truncation attack?)\n>   at sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1555)\n>   at sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1533)\n>   at sun.security.ssl.SSLEngineImpl.closeInbound(SSLEngineImpl.java:1463)\n>   at org.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.closeInbound(SslConnection.java:696)\n>   at org.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.fill(SslConnection.java:532)\n>   at org.eclipse.jetty.server.HttpConnection.fillRequestBuffer(HttpConnection.java:315)\n>   at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:223)\n>   at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:245)\n>   at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)\n", "commits": {}, "title": "Invalid: Inbound closed before receiving peer's close_notify", "created": "2016-02-16 23:38:59", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/236", "commitsDetails": [], "ttf": 513.0002777777778}, {"labels": ["Bug"], "closed": "2016-02-23 16:13:57", "body": "migrated from Bugzilla [#479299](https://bugs.eclipse.org/bugs/show_bug.cgi?id=479299)\nstatus NEW severity _normal_ in component _proxy_ for _9.3.x_\nReported in version _9.2.11_ on platform _PC_\nAssigned to: Simone Bordet\n\nOriginal attachment names and IDs:\n- _[broker.log](https://bugs.eclipse.org/bugs//attachment.cgi?id=257139)_ (ID 257139)\n- _[router.log](https://bugs.eclipse.org/bugs//attachment.cgi?id=257140)_ (ID 257140)\n\nOn 2015-10-08 01:17:20 -0400, Nishant Bangarwa wrote:\n\n> Created attachment 257139\n> debug logs and stack trace for the the hanging thread\n> \n> Scenario:  When we upgrade Jetty from 9.2.10 to 9.2.11 in test environment, we are seeing jetty thread hanging on below stack trace waiting for content and eventually timing out after Idle timeout, java.util.concurrent.TimeoutException: Idle timeout expired: 300005/300000 ms. \n> \n> Stack Trace where the thread Hangs - \n> \"qtp1045677229-47@4865\" daemon prio=5 tid=0x2f nid=NA waiting\n>   java.lang.Thread.State: WAITING\n>       at sun.misc.Unsafe.park(Unsafe.java:-1)\n>       at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\n>       at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)\n>       at org.eclipse.jetty.util.SharedBlockingCallback$Blocker.block(SharedBlockingCallback.java:219)\n>       at org.eclipse.jetty.server.HttpInputOverHTTP.blockForContent(HttpInputOverHTTP.java:66)\n>       at org.eclipse.jetty.server.HttpInput$1.waitForContent(HttpInput.java:476)\n>       at org.eclipse.jetty.server.HttpInput.read(HttpInput.java:121)\n>       - locked <0x18d7> (a org.eclipse.jetty.server.HttpInputOverHTTP)\n>       at com.fasterxml.jackson.core.json.ByteSourceJsonBootstrapper.ensureLoaded(ByteSourceJsonBootstrapper.java:489)\n>       at com.fasterxml.jackson.core.json.ByteSourceJsonBootstrapper.detectEncoding(ByteSourceJsonBootstrapper.java:126)\n>       at com.fasterxml.jackson.core.json.ByteSourceJsonBootstrapper.constructParser(ByteSourceJsonBootstrapper.java:215)\n>       at com.fasterxml.jackson.core.JsonFactory._createParser(JsonFactory.java:1191)\n>       at com.fasterxml.jackson.core.JsonFactory.createParser(JsonFactory.java:753)\n>       at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:2207)\n>       at io.druid.server.QueryResource.doPost(QueryResource.java:134)\n>       at sun.reflect.NativeMethodAccessorImpl.invoke0(NativeMethodAccessorImpl.java:-1)\n>       at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n>       at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n>       at java.lang.reflect.Method.invoke(Method.java:497)\n>       at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)\n> \n> More Info on setup - \n> - We use AsyncProxyServlet to proxy requests from a router to other nodes. \n> - the request content contains a JSON object.\n> - Attached the debug jetty logs for the the proxy and the node which hangs with thread dumps for both.\n> - when it happens there is no load on the system and only a single request is being forwarded through the proxy.\n> - It starts to work if i downgrade jetty to v9.2.10\n> \n> Let me know if more info is required.\n\nOn 2015-10-08 01:18:30 -0400, Nishant Bangarwa wrote:\n\n> Created attachment 257140\n> debug logs for the proxy forwarding the request\n\nOn 2015-10-08 01:26:49 -0400, Nishant Bangarwa wrote:\n\n> - Another thing to note is that it only occurs with requests whoose content is beyond a  certain size (havent figured out what that threshold is) the Json content is about 2KB in size, If we remove part of the json object to reduce the size of content it works.\n", "commits": {}, "title": "Jetty 9.2.11 blocks while reading content and throws java.util.concurrent.TimeoutException", "created": "2016-02-16 23:38:47", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/235", "commitsDetails": [], "ttf": 6.000277777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "jmcc0nn3ll", "filteredCommits": ["ce04cadb795c1ce31f2037cb33e93b714bfadc69"], "commits": {"ce04cadb795c1ce31f2037cb33e93b714bfadc69": {"commitUser": "sbordet", "commitGHEventType": "closed"}}, "created": "2016-02-16 23:38:40", "commitsDetails": [{"commitMessage": "Fixes #233 - Add message to idle TimeoutException.\n", "commitParents": ["4aa512e4682ad6521459bd9f23ac697df7d2b70d"], "commitHash": "ce04cadb795c1ce31f2037cb33e93b714bfadc69", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpConnectionOverFCGI.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.fcgi.client.http.HttpConnectionOverFCGI.onIdleExpired()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpConnectionOverHTTP.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.http.HttpConnectionOverHTTP.onIdleExpired()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HTTP2Session.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.HTTP2Session.onIdleTimeout()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "TimeoutCompleteListener.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.TimeoutCompleteListener.run()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "SocketAddressResolver.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.util.Async.resolve(java.lang.String,int,org.eclipse.jetty.util.Promise)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "ce04cadb795c1ce31f2037cb33e93b714bfadc69 tags/jetty-9.3.9.M0~6^2~6", "commitUser": "sbordet", "authoredDateTime": "2016-04-01 14:44:26", "commitGHEventType": "closed", "commitGitStats": [{"lines": 2, "filePath": "jetty-util/src/main/java/org/eclipse/jetty/util/SocketAddressResolver.java", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/http/HttpConnectionOverHTTP.java", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-fcgi/fcgi-client/src/main/java/org/eclipse/jetty/fcgi/client/http/HttpConnectionOverFCGI.java", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-http2/http2-common/src/main/java/org/eclipse/jetty/http2/HTTP2Session.java", "insertions": 1, "deletions": 1}, {"lines": 2, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/TimeoutCompleteListener.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2016-04-01 14:44:26", "spoonStatsSkippedReason": ""}], "title": "Add message to idle TimeoutException", "spoonStatsSummary": {"spoonMethodsChanged": 5, "DEL": 1, "INS": 2, "UPD": 3, "MOV": 0, "TOT": 6, "spoonFilesChanged": 5}, "gitStatsSummary": {"lines": 10, "insertions": 5, "gitFilesChange": 5, "deletions": 5}, "closed": "2016-04-01 12:45:15", "statsSkippedReason": "", "body": "migrated from Bugzilla [#478663](https://bugs.eclipse.org/bugs/show_bug.cgi?id=478663)\nstatus ASSIGNED severity _normal_ in component _client_ for _9.3.x_\nReported in version _9.2.11_ on platform _PC_\nAssigned to: Simone Bordet\n\nOn 2015-09-29 14:48:25 -0400, Dain Sundstrom wrote:\n\n> If possible, it would be helpful if the TimeoutException created in org.eclipse.jetty.client.http.HttpConnectionOverHTTP#onReadTimeout, included the message \"Http client idle timeout\" and the actual timeout period.\n> \n> My application has a lot of different things that can generate TimeoutExceptions, and it is sometimes difficult to see which code timed out.\n\nOn 2015-10-05 09:24:28 -0400, Simone Bordet wrote:\n\n> The idea would be to put in the message EndPoint.toString(), which prints a lot of information about the endPoint, such as interestOps, local and remote address, close status, idleFor/idleTimeout, etc.\n> That would be more of a \"debug\" kind of information.\n> \n> Would that be ok ?\n> \n> Alternatively, if you want something that you can entirely customize, perhaps even parse from the logs, then it's probably better that you override HttpConnectionOverHTTP.onReadTimeout() and pass in your own custom message.\n> \n> Let us know.\n", "changesInPackagesGIT": ["jetty-util/src/main/java/org/eclipse/jetty/util", "jetty-client/src/main/java/org/eclipse/jetty/client/http", "jetty-fcgi/fcgi-client/src/main/java/org/eclipse/jetty/fcgi/client", "jetty-http2/http2-common/src/main/java/org/eclipse/jetty/http2", "jetty-client/src/main/java/org/eclipse/jetty/client"], "changesInPackagesSPOON": ["org.eclipse.jetty.fcgi.client.http.HttpConnectionOverFCGI.onIdleExpired()", "org.eclipse.jetty.util.Async.resolve(java.lang.String,int,org.eclipse.jetty.util.Promise)", "org.eclipse.jetty.client.http.HttpConnectionOverHTTP.onIdleExpired()", "org.eclipse.jetty.http2.HTTP2Session.onIdleTimeout()", "org.eclipse.jetty.client.TimeoutCompleteListener.run()"], "ttf": 44.000277777777775, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/233"}, {"labels": ["Bug"], "closed": "2016-03-11 08:47:44", "body": "migrated from Bugzilla [#477900](https://bugs.eclipse.org/bugs/show_bug.cgi?id=477900)\nstatus ASSIGNED severity _normal_ in component _client_ for _9.3.x_\nReported in version _9.2.11_ on platform _PC_\nAssigned to: Simone Bordet\n\nOn 2015-09-21 02:01:58 -0400, Mark Mielke wrote:\n\n> I am using Jetty HttpClient to access a remote JIRA install, and a remote Crucible install. Some requests are failing with \"Buffering capacity exceeded ...\"\n> \n> This appears to be because the JIRA HTTP 401 response sometimes has long headers and an HTML body that exceeds 4096 bytes by just a few bytes. For the details, it appears that there is a different error for regular HTTP 401 \"not authorized\" to access a REST resource, and HTTP 401 \"session not recognized\" in the case that the session cookie has expired. I believe the latter outputs an HTML response.\n> \n> WWWAuthenticationProtocolHandler calls AuthenticationProtocolHandler with a maxContentLength of AuthenticationProtocolHandler.DEFAULT_MAX_CONTENT_LENGTH which is only 4096.\n> \n> Is there a reason why AuthenticationProtocolHandler.DEFAULT_MAX_CONTENT_LENGTH is so small? Why shouldn't it use the same default as a BufferingResponseListener of 2 MBytes? Since it will accept up to 2 MBytes for a regular response, why wouldn't it accept up to 2 MBytes for an HTTP 401 response?\n> \n> Thanks!\n> \n> P.S. I had a thought that WWWAuthenticationProtocolHandler and most others should only need to buffer the headers, and buffering the content is unnecessary. But, I think this may be tricky to implement as a general case, and allowing buffering up to 2 MBytes for an HTTP 401 response would suffice.\n\nOn 2015-09-24 03:24:19 -0400, Greg Wilkins wrote:\n\n> With commit 1af9b3e I have increased the size the 16KB.\n> Assigned to Simone for comment and perhaps consideration of something more dynamic with a larger limit?\n", "commits": {}, "title": "WWWAuthenticationProtocolHandler fails with \"Buffering capacity exceeded...\" if HTTP 401 response has length greater than 4096", "created": "2016-02-16 23:38:27", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/232", "commitsDetails": [], "ttf": 23.00027777777778}, {"labels": ["Bug"], "closed": "2016-03-22 15:06:03", "body": "migrated from Bugzilla [#477895](https://bugs.eclipse.org/bugs/show_bug.cgi?id=477895)\nstatus REOPENED severity _normal_ in component _server_ for _9.3.x_\nReported in version _9.2.13_ on platform _PC_\nAssigned to: Jan Bartel\n\nOriginal attachment names and IDs:\n- _[Screenshot from 2015-09-21 10:35:48.png](https://bugs.eclipse.org/bugs//attachment.cgi?id=256703)_ (ID 256703)\n- _[Bildschirmfoto 2015-09-21 um 12.56.58.png](https://bugs.eclipse.org/bugs//attachment.cgi?id=256708)_ (ID 256708)\n- _[serviceloader-filehandle-leak.tgz](https://bugs.eclipse.org/bugs//attachment.cgi?id=256862)_ (ID 256862)\n\nOn 2015-09-20 14:23:18 -0400, Robert Huitl wrote:\n\n> I've been troubleshooting class loader leak problems in my webapp. After fixing them, I still see leaks during redeployment of my webapp. I could confirm that the same problems exist with async-rest.war, the example webapp included with Jetty.\n> \n> After removing a war file from webapps directory, Jetty undeploys the application, However, not all resources associated with the webapp are released properly:\n> 1. File handles to JAR files in extracted web archive in /tmp are left open:\n> \n> sudo lsof -p $(pgrep -u jetty java) | grep deleted\n> \n> java    16455 jetty 1915r   REG                8,1  2274768  919595 /tmp/jetty-0.0.0.0-8080-HSWeb.war-_HSWeb-any-4189740456452319332.dir/webapp/WEB-INF/lib/hibernate-3.2.6.ga.jar (deleted)\n> java    16455 jetty 1916r   REG                8,1   282338  919607 /tmp/jetty-0.0.0.0-8080-HSWeb.war-_HSWeb-any-4189740456452319332.dir/webapp/WEB-INF/lib/cglib-2.1_3.jar (deleted)\n> java    16455 jetty 1917r   REG                8,1   608376  919608 /tmp/jetty-0.0.0.0-8080-HSWeb.war-_HSWeb-any-4189740456452319332.dir/webapp/WEB-INF/lib/c3p0-0.9.1.jar (deleted)\n> \n> (and many more, probably all JAR files contained in WAR)\n> \n> So while the /tmp/jetty\\* directory is removed, file handles to the JAR files are left open, which requires the operating system to keep the inodes on disk. Therefore, these JAR files still consume disk space until the Jetty process is restarted.\n> 1. Dumping the Jetty process with jmap (all webapps unloaded) and analyzing the heap in Eclipse Memory Analyzer reveals that there are sun.net.www.protocol.jar.JarFileFactory objects left over, which in turn keep references to sun.net.www.protocol.jar.URLJarFile objects:\n> \n> The class \"sun.net.www.protocol.jar.JarFileFactory\", loaded by \"<system class loader>\", occupies 78.105.920 (87,04%) bytes. The memory is accumulated in class \"sun.net.www.protocol.jar.JarFileFactory\", loaded by \"<system class loader>\".\n> \n> The JarFileFactory objects show a large retained heap size which keeps on growing as the webapp is started and stopped. It seems that there is temporary byte[] data from java.util.zip.Inflater left over. I think that this and  the open file handles to JAR files are caused by the same bug. However, I didn't manage to find the reason why the JarFileFactory objects are not garbage collected. Finding the path to a GC root does not turn up any link and my understanding of Java's GC is not good enough to nail the problem.\n> ## Class Name                                                                                                                                                                                                                                                                                                                  | Ref. Objects | Shallow Heap | Ref. Shallow Heap | Retained Heap\n> \n> class sun.net.www.protocol.jar.JarFileFactory @ 0x7842d51b0 System Class                                                                                                                                                                                                                                                    |        2.907 |           16 |         8.047.912 |     9.580.744\n> |- fileCache java.util.HashMap @ 0x783a33a88                                                                                                                                                                                                                                                                                |        2.302 |           48 |         6.173.744 |        34.784\n> |  '- table java.util.HashMap$Entry[256] @ 0x7d85691b8                                                                                                                                                                                                                                                                      |        2.302 |        1.040 |         6.173.744 |        34.736\n> |     |- [242] java.util.HashMap$Entry @ 0x783a34300                                                                                                                                                                                                                                                                        |          373 |           32 |           815.352 |           240\n> |     |  '- value sun.net.www.protocol.jar.URLJarFile @ 0x784c41078                                                                                                                                                                                                                                                         |          373 |           80 |           815.352 |     1.108.544\n> |     |     |- streams java.util.WeakHashMap @ 0x784c41220                                                                                                                                                                                                                                                                  |          372 |           56 |           815.328 |     1.108.216\n> |     |     |  '- table java.util.WeakHashMap$Entry[1024] @ 0x784eb6fc8                                                                                                                                                                                                                                                     |          372 |        4.112 |           815.328 |     1.108.112\n> |     |     |     |- [636] java.util.WeakHashMap$Entry @ 0x784df8c18                                                                                                                                                                                                                                                        |            2 |           40 |            13.272 |        14.824\n> |     |     |     |  |- value java.util.zip.Inflater @ 0x784db6d10                                                                                                                                                                                                                                                          |            1 |           48 |             9.168 |            72\n> |     |     |     |  |  '- buf byte[9146] @ 0x784db8110  .X.xT.u..h4o4<6.....b!!.b6.... |            1 |        9.168 |             9.168 |         9.168\n> |     |     |     |  |- next java.util.WeakHashMap$Entry @ 0x784eb29e8                                                                                                                                                                                                                                                      |            1 |           40 |             4.104 |         4.880\n> |     |     |     |  '- Total: 2 entries                                                                                                                                                                                                                                                                                    |              |              |                   |  \n> |     |     |     |- [33] java.util.WeakHashMap$Entry @ 0x7842f0748                                                                                                                                                                                                                                                         |            3 |           40 |            13.136 |        15.464\n> |     |     |     |- [893] java.util.WeakHashMap$Entry @ 0x784df83f8                                                                                                                                                                                                                                                        |            2 |           40 |            12.080 |        13.632\n> |     |     |     |- [458] java.util.WeakHashMap$Entry @ 0x784df9028                                                                                                                                                                                                                                                        |            2 |           40 |            12.000 |        13.552\n> |     |     |     |- [557] java.util.WeakHashMap$Entry @ 0x7842e9130                                                                                                                                                                                                                                                        |            2 |           40 |            11.232 |        12.784\n> |     |     |     |- [698] java.util.WeakHashMap$Entry @ 0x784df8a38                                                                                                                                                                                                                                                        |            2 |           40 |            10.176 |        11.728\n> |     |     |     |- [870] java.util.WeakHashMap$Entry @ 0x784df84e8                                                                                                                                                                                                                                                        |            4 |           40 |             9.696 |        12.800\n> |     |     |     |- [112] java.util.WeakHashMap$Entry @ 0x784eb85c8                                                                                                                                                                                                                                                        |            1 |           40 |             9.168 |         9.944\n> |     |     |     |- [422] java.util.WeakHashMap$Entry @ 0x784df9140                                                                                                                                                                                                                                                        |            2 |           40 |             9.128 |        10.680\n> |     |     |     |- [216] java.util.WeakHashMap$Entry @ 0x784df9910                                                                                                                                                                                                                                                        |            3 |           40 |             8.808 |        11.136\n> |     |     |     |- [982] java.util.WeakHashMap$Entry @ 0x784e95890                                                                                                                                                                                                                                                        |            1 |           40 |             8.128 |         8.904\n> |     |     |     |- [695] java.util.WeakHashMap$Entry @ 0x784df8a88                                                                                                                                                                                                                                                        |            1 |           40 |             8.128 |         8.904\n> |     |     |     |- [781] java.util.WeakHashMap$Entry @ 0x784df8790                                                                                                                                                                                                                                                        |            2 |           40 |             7.960 |         9.512\n> |     |     |     |- [589] java.util.WeakHashMap$Entry @ 0x784e960b0                                                                                                                                                                                                                                                        |            1 |           40 |             7.696 |         8.472\n> |     |     |     |- [35] java.util.WeakHashMap$Entry @ 0x7842eeb08                                                                                                                                                                                                                                                         |            1 |           40 |             7.696 |         8.472\n> |     |     |     |- [250] java.util.WeakHashMap$Entry @ 0x784eb8398                                                                                                                                                                                                                                                        |            1 |           40 |             7.696 |         8.472\n> |     |     |     |- [736] java.util.WeakHashMap$Entry @ 0x784df8948                                                                                                                                                                                                                                                        |            3 |           40 |             7.664 |         9.992\n> |     |     |     |- [343] java.util.WeakHashMap$Entry @ 0x784df9488                                                                                                                                                                                                                                                        |            2 |           40 |             7.072 |         8.624\n> |     |     |     |- [279] java.util.WeakHashMap$Entry @ 0x784eb82f8                                                                                                                                                                                                                                                        |            2 |           40 |             7.016 |         8.568\n> |     |     |     |- [911] java.util.WeakHashMap$Entry @ 0x784df8380                                                                                                                                                                                                                                                        |            2 |           40 |             6.896 |         8.448\n> |     |     |     |- [761] java.util.WeakHashMap$Entry @ 0x784e95e30                                                                                                                                                                                                                                                        |            1 |           40 |             6.888 |         7.664\n> |     |     |     |- [872] java.util.WeakHashMap$Entry @ 0x784df84c0                                                                                                                                                                                                                                                        |            1 |           40 |             6.864 |         7.640\n> |     |     |     |- [201] java.util.WeakHashMap$Entry @ 0x784eb84b0                                                                                                                                                                                                                                                        |            1 |           40 |             6.864 |         7.640\n> |     |     |     |- [226] java.util.WeakHashMap$Entry @ 0x784df9848                                                                                                                                                                                                                                                        |            1 |           40 |             6.864 |         7.640\n> |     |     |     |- [245] java.util.WeakHashMap$Entry @ 0x784df97a8                                                                                                                                                                                                                                                        |            2 |           40 |             6.848 |         8.400\n> |     |     |     '- Total: 25 of 313 entries; 288 more                                                                                                                                                                                                                                                                     |              |              |                   |  \n> |     |     |- zc java.util.zip.ZipCoder @ 0x784c41190                                                                                                                                                                                                                                                                      |            1 |           32 |                24 |           144\n> |     |     '- Total: 2 entries                                                                                                                                                                                                                                                                                             |              |              |                   |  \n> |     |- [231] java.util.HashMap$Entry @ 0x783d05a48                                                                                                                                                                                                                                                                        |          187 |           32 |           628.648 |           688\n> |     |- [19] java.util.HashMap$Entry @ 0x783d06958                                                                                                                                                                                                                                                                         |          187 |           32 |           628.648 |           344\n> |     |- [31] java.util.HashMap$Entry @ 0x783d05ed0                                                                                                                                                                                                                                                                         |          171 |           32 |           482.480 |           696\n> |     |- [250] java.util.HashMap$Entry @ 0x783a33f68                                                                                                                                                                                                                                                                        |          171 |           32 |           482.480 |           352\n> |     |- [50] java.util.HashMap$Entry @ 0x7843e6088                                                                                                                                                                                                                                                                         |          127 |           32 |           403.448 |           688\n> |     |- [69] java.util.HashMap$Entry @ 0x783a35938                                                                                                                                                                                                                                                                         |          277 |           32 |           390.552 |           160\n> |     |- [193] java.util.HashMap$Entry @ 0x784555818                                                                                                                                                                                                                                                                        |          107 |           32 |           296.608 |           352\n> |     |- [13] java.util.HashMap$Entry @ 0x783a354e0                                                                                                                                                                                                                                                                         |           77 |           32 |           207.880 |           688\n> |     |- [239] java.util.HashMap$Entry @ 0x7844aee28                                                                                                                                                                                                                                                                        |           77 |           32 |           207.880 |           344\n> |     |- [208] java.util.HashMap$Entry @ 0x783a34e88                                                                                                                                                                                                                                                                        |           77 |           32 |           207.880 |           688\n> |     |- [212] java.util.HashMap$Entry @ 0x7844dc500                                                                                                                                                                                                                                                                        |           50 |           32 |           195.568 |           688\n> |     |- [92] java.util.HashMap$Entry @ 0x783d06360                                                                                                                                                                                                                                                                         |           50 |           32 |           195.568 |           344\n> |     |- [60] java.util.HashMap$Entry @ 0x783a33bc8                                                                                                                                                                                                                                                                         |           50 |           32 |           195.568 |           344\n> |     |- [148] java.util.HashMap$Entry @ 0x783a34b00                                                                                                                                                                                                                                                                        |           50 |           32 |           195.568 |           344\n> |     |- [130] java.util.HashMap$Entry @ 0x78545e278                                                                                                                                                                                                                                                                        |           58 |           32 |           188.368 |           352\n> |     |- [178] java.util.HashMap$Entry @ 0x78438cca0                                                                                                                                                                                                                                                                        |           33 |           32 |           124.344 |           344\n> |     |- [125] java.util.HashMap$Entry @ 0x785411d50                                                                                                                                                                                                                                                                        |           25 |           32 |            66.128 |           360\n> |     |- [113] java.util.HashMap$Entry @ 0x78447e6f8                                                                                                                                                                                                                                                                        |           25 |           32 |            66.128 |           360\n> |     |- [15] java.util.HashMap$Entry @ 0x783a35008                                                                                                                                                                                                                                                                         |           25 |           32 |            66.128 |           544\n> |     |- [20] java.util.HashMap$Entry @ 0x783d067e8                                                                                                                                                                                                                                                                         |            7 |           32 |            19.784 |           568\n> |     |- [110] java.util.HashMap$Entry @ 0x783a34548                                                                                                                                                                                                                                                                        |            7 |           32 |            19.784 |           368\n> |     |- [28] java.util.HashMap$Entry @ 0x783a34990                                                                                                                                                                                                                                                                         |            7 |           32 |            19.784 |           736\n> |     |- [89] java.util.HashMap$Entry @ 0x7844d1570                                                                                                                                                                                                                                                                         |            7 |           32 |            19.784 |           368\n> |     |- [145] java.util.HashMap$Entry @ 0x783a34d20                                                                                                                                                                                                                                                                        |           12 |           32 |            16.712 |           360\n> |     '- Total: 25 of 80 entries; 55 more                                                                                                                                                                                                                                                                                   |              |              |                   |  \n> |- urlCache java.util.HashMap @ 0x783fa5d00                                                                                                                                                                                                                                                                                 |          605 |           48 |         1.874.168 |        15.488\n> ## '- Total: 2 entries                                                                                                                                                                                                                                                                                                         |              |              |                   |              \n> 1. Stress-testing redeployment leads to out of memory killing by OS\n> \n> This bash command redeploys the example webapp async-rest.war:\n> \n> while true; do sudo rm -f async-rest.war ; while curl http://localhost:8080/async-rest/ -fs >/dev/null ; do sleep 1; done; echo \"Starting\"; sudo ln -s ../demo-base/webapps/async-rest.war . ; while ! curl http://localhost:8080/async-rest/ -fs >/dev/null ; do sleep 1; done; done;\n> \n> Jetty's native memory RSS size keeps on growing, even though the total Java heap size is much lower. If you run this test on a WAR file with bigger JAR files, Jetty will quickly run out of native memory and the OS eventually has to kill the process. This problem could be caused by extra native memory for the file handles and NIO operations, or by a fragmented memory space, so maybe it goes away when the JarFileFactory objects are GC'ed.\n> # System & Java versions:\n> \n> Ubuntu 14.04.3 LTS\n> Jetty 9.2.13\n> java version \"1.7.0_79\"\n> OpenJDK Runtime Environment (IcedTea 2.5.6) (7u79-2.5.6-0ubuntu1.14.04.1)\n> OpenJDK 64-Bit Server VM (build 24.79-b02, mixed mode)\n\nOn 2015-09-20 20:00:52 -0400, Jan Bartel wrote:\n\n> Robert,\n> \n> Can you please paste your jetty command line. Also please include any details of environment variables/args that are passed to the jvm at runtime.\n> \n> Also, can you try doing some manual tests: use jvisualvm or jconsole, and do a manual redeploy of the async-rest.war (just touch the war file), see if the memory increases after a redeploy, then do a manual garbage collect and see what happens to the memory.Rinse and repeat and see if you can capture a leak and post your results here.\n> \n> Meanwhile I'll try the same here, but using the Oracle jvm instead (ubuntu 14.04 LTS).\n> \n> Jan\n\nOn 2015-09-20 20:42:41 -0400, Jan Bartel wrote:\n\n> Created attachment 256703\n> jvisualvm screenshot after 6 redeploys and gcs\n\nOn 2015-09-20 20:44:40 -0400, Jan Bartel wrote:\n\n> Robert,\n> \n> I've attached a screenshot showing jvisualvm after 6 redeploys and gcs. I don't see any notable growth in heap use. The jvm was Oracle Java(TM) SE Runtime Environment (build 1.7.0_71-b14). A fresh jetty-9.2.13 distro, with standard runline of \"java -jar start.jar\", no changes to the out-of-the-box setup, other than to remove all webapps except for the async-rest.war.\n> \n> Jan\n\nOn 2015-09-21 07:05:48 -0400, Robert Huitl wrote:\n\n> Jan,\n> \n> I changed to\n> \n> java version \"1.7.0_80\"\n> Java(TM) SE Runtime Environment (build 1.7.0_80-b15)\n> Java HotSpot(TM) 64-Bit Server VM (build 24.80-b11, mixed mode)\n> \n> and see the same problem. I also grabbed a fresh Jetty 9.2.13 distribution, unpacked it, and run it using \"java -jar start.jar\". I still see open file handles to deleted files after redeploying. Then I added the JMX options to start.ini, did another test run and used VisualVM (see screenshot). I don't think it really shows the problem, at least not with that small webapp.\n> \n> Can you please try this:\n> \n> robert@ubuntu:/tmp/jetty-distribution-9.2.13.v20150730/webapps$ sudo lsof -p 15066 |grep deleted|wc -l\n> 60\n> robert@ubuntu:/tmp/jetty-distribution-9.2.13.v20150730/webapps$ touch async-rest.war \n> robert@ubuntu:/tmp/jetty-distribution-9.2.13.v20150730/webapps$ sudo lsof -p 15066 |grep deleted|wc -l\n> 66\n> robert@ubuntu:/tmp/jetty-distribution-9.2.13.v20150730/webapps$ touch async-rest.war \n> robert@ubuntu:/tmp/jetty-distribution-9.2.13.v20150730/webapps$ sudo lsof -p 15066 |grep deleted|wc -l\n> 66\n> robert@ubuntu:/tmp/jetty-distribution-9.2.13.v20150730/webapps$ sudo lsof -p 15066 |grep deleted|wc -l\n> 72\n> robert@ubuntu:/tmp/jetty-distribution-9.2.13.v20150730/webapps$ touch async-rest.war \n> robert@ubuntu:/tmp/jetty-distribution-9.2.13.v20150730/webapps$ sudo lsof -p 15066 |grep deleted|wc -l\n> 78\n> robert@ubuntu:/tmp/jetty-distribution-9.2.13.v20150730/webapps$ touch async-rest.war \n> robert@ubuntu:/tmp/jetty-distribution-9.2.13.v20150730/webapps$ sudo lsof -p 15066 |grep deleted|wc -l\n> 84\n> robert@ubuntu:/tmp/jetty-distribution-9.2.13.v20150730/webapps$ touch async-rest.war \n> robert@ubuntu:/tmp/jetty-distribution-9.2.13.v20150730/webapps$ sudo lsof -p 15066 |grep deleted|wc -l\n> 90\n> \n> As you can see, the number of deleted yet open files is steadily increasing.\n> \n> This is the environment of the Java process running Jetty:\n> \n> CLUTTER_IM_MODULE=xim\n> COLORTERM=gnome-terminal\n> COMPIZ_BIN_PATH=/usr/bin/\n> COMPIZ_CONFIG_PROFILE=ubuntu\n> DBUS_SESSION_BUS_ADDRESS=unix:abstract=/tmp/dbus-hHCbuvhsvI\n> DEFAULTS_PATH=/usr/share/gconf/ubuntu.default.path\n> DESKTOP_SESSION=ubuntu\n> DISPLAY=:0\n> GDM_LANG=en_US\n> GDMSESSION=ubuntu\n> GNOME_DESKTOP_SESSION_ID=this-is-deprecated\n> GNOME_KEYRING_CONTROL=/run/user/1000/keyring-ILL2dv\n> GNOME_KEYRING_PID=2287\n> GPG_AGENT_INFO=/run/user/1000/keyring-ILL2dv/gpg:0:1\n> GTK_IM_MODULE=ibus\n> GTK_MODULES=overlay-scrollbar:unity-gtk-module\n> HOME=/home/robert\n> IM_CONFIG_PHASE=1\n> INSTANCE=\n> JOB=dbus\n> LANG=en_US.UTF-8\n> LANGUAGE=en_US\n> LESSCLOSE=/usr/bin/lesspipe %s %s\n> LESSOPEN=| /usr/bin/lesspipe %s\n> LOGNAME=robert\n> LS_COLORS=rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:_.tar=01;31:_.tgz=01;31:_.arj=01;31:_.taz=01;31:_.lzh=01;31:_.lzma=01;31:_.tlz=01;31:_.txz=01;31:_.zip=01;31:_.z=01;31:_.Z=01;31:_.dz=01;31:_.gz=01;31:_.lz=01;31:_.xz=01;31:_.bz2=01;31:_.bz=01;31:_.tbz=01;31:_.tbz2=01;31:_.tz=01;31:_.deb=01;31:_.rpm=01;31:_.jar=01;31:_.war=01;31:_.ear=01;31:_.sar=01;31:_.rar=01;31:_.ace=01;31:_.zoo=01;31:_.cpio=01;31:_.7z=01;31:_.rz=01;31:_.jpg=01;35:_.jpeg=01;35:_.gif=01;35:_.bmp=01;35:_.pbm=01;35:_.pgm=01;35:_.ppm=01;35:_.tga=01;35:_.xbm=01;35:_.xpm=01;35:_.tif=01;35:_.tiff=01;35:_.png=01;35:_.svg=01;35:_.svgz=01;35:_.mng=01;35:_.pcx=01;35:_.mov=01;35:_.mpg=01;35:_.mpeg=01;35:_.m2v=01;35:_.mkv=01;35:_.webm=01;35:_.ogm=01;35:_.mp4=01;35:_.m4v=01;35:_.mp4v=01;35:_.vob=01;35:_.qt=01;35:_.nuv=01;35:_.wmv=01;35:_.asf=01;35:_.rm=01;35:_.rmvb=01;35:_.flc=01;35:_.avi=01;35:_.fli=01;35:_.flv=01;35:_.gl=01;35:_.dl=01;35:_.xcf=01;35:_.xwd=01;35:_.yuv=01;35:_.cgm=01;35:_.emf=01;35:_.axv=01;35:_.anx=01;35:_.ogv=01;35:_.ogx=01;35:_.aac=00;36:_.au=00;36:_.flac=00;36:_.mid=00;36:_.midi=00;36:_.mka=00;36:_.mp3=00;36:_.mpc=00;36:_.ogg=00;36:_.ra=00;36:_.wav=00;36:_.axa=00;36:_.oga=00;36:_.spx=00;36:_.xspf=00;36:\n> MANDATORY_PATH=/usr/share/gconf/ubuntu.mandatory.path\n> OLDPWD=/tmp\n> PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games\n> PrlCompizSessionClose=0x7fd13a7ff9f0\n> PWD=/tmp/jetty-distribution-9.2.13.v20150730\n> QT4_IM_MODULE=xim\n> QT_IM_MODULE=ibus\n> QT_QPA_PLATFORMTHEME=appmenu-qt5\n> SELINUX_INIT=YES\n> SESSION_MANAGER=local/ubuntu:@/tmp/.ICE-unix/2481,unix/ubuntu:/tmp/.ICE-unix/2481\n> SESSIONTYPE=gnome-session\n> SESSION=ubuntu\n> SHELL=/bin/bash\n> SHLVL=1\n> SSH_AUTH_SOCK=/run/user/1000/keyring-ILL2dv/ssh\n> TERM=xterm\n> TEXTDOMAINDIR=/usr/share/locale/\n> TEXTDOMAIN=im-config\n> UPSTART_SESSION=unix:abstract=/com/ubuntu/upstart-session/1000/2295\n> USER=robert\n> _=/usr/bin/java\n> VTE_VERSION=3409\n> WINDOWID=26541410\n> XAUTHORITY=/home/robert/.Xauthority\n> XDG_CONFIG_DIRS=/etc/xdg/xdg-ubuntu:/usr/share/upstart/xdg:/etc/xdg\n> XDG_CURRENT_DESKTOP=Unity\n> XDG_DATA_DIRS=/usr/share/ubuntu:/usr/share/gnome:/usr/local/share/:/usr/share/\n> XDG_GREETER_DATA_DIR=/var/lib/lightdm-data/robert\n> XDG_MENU_PREFIX=gnome-\n> XDG_RUNTIME_DIR=/run/user/1000\n> XDG_SEAT_PATH=/org/freedesktop/DisplayManager/Seat0\n> XDG_SEAT=seat0\n> XDG_SESSION_ID=c2\n> XDG_SESSION_PATH=/org/freedesktop/DisplayManager/Session0\n> XDG_VTNR=7\n> XMODIFIERS=@im=ibus\n\nOn 2015-09-21 07:06:35 -0400, Robert Huitl wrote:\n\n> Created attachment 256708\n> jvisualvm after redeploying many times including a few GC's\n\nOn 2015-09-24 18:44:57 -0400, Jan Bartel wrote:\n\n> Hi Robert,\n> \n> Just to let you know, I'm still investigating this issue. I can see these deleted file handles on my setup too.  Interestingly, they are only in native memory space, as after a garbage collect, there's no trace left in java of these files. \n> \n> I'm experimenting to see exactly what section of code contributes to this situation, but as you can image, its rather difficult once things disappear into native code :(\n> \n> I'll let you know as soon as I have something tangible to report.\n> \n> cheers\n> Jan\n\nOn 2015-09-25 07:09:46 -0400, Robert Huitl wrote:\n\n> Hi Jan,\n> \n> yes I can imagine, this is really tough to debug :(\n> \n> On my machine I always had some traces on the Java heap (the class sun.net.www.protocol.jar.JarFileFactory instances). This class has static members (fileCache, urlCache) which keep references to the jar files. It seems like the map entries in these fields should be removed once the respective jar file is closed:\n> \n> See http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/sun/net/www/protocol/jar/JarFileFactory.java it has a method \"close\", part of interface URLJarFileCloseController, which in our case is probably not called. So either nobody is closing the JAR files, or the mechanism that calls JarFileFactory.close(JarFile) does not work.\n\nOn 2015-09-25 19:04:10 -0400, Jan Bartel wrote:\n\n> (In reply to Robert Huitl from comment # 7)\n> Hi Robert,\n> \n> Yes, I see the references to JarFile in jvisualvm too, however, when I do a garbage collect, they disappear as there are no GC roots to them, and I am left with the open (deleted) file handles. \n> \n> So I've been proceeding via code inspection and I've now made a few tweaks here and there and I have managed to get rid of almost all of the open file handles.\n> \n> There is one case remaining, which will not show up with the async war. You have to use the test-spec.war instead, which uses a ServletContainerInitializer. My testing shows that if a webapp's WEB-INF/lib contains a jar that has an SCI, then that jar file handle will be leaked via the java.util.ServiceLoader mechanism when the webapp is redeployed.\n> \n> I've stripped that out down to a small test case that has no dependency on servlets at all, just the ServiceLoader mechanism and it reproduces the problem. I've raised this as a bug with Oracle, lets see if they respond. If you're interested, I'll attach the reproduction test case to this issue.\n> \n> I'll be committing my little fixes to the other file handle problems soon, so stand by to do some testing :)\n> \n> regards\n> Jan\n\nOn 2015-09-25 19:04:59 -0400, Jan Bartel wrote:\n\n> Created attachment 256862\n> Small test harness to repro ServiceLoader file handle leak\n\nOn 2015-09-29 23:42:08 -0400, Jan Bartel wrote:\n\n> Robert,\n> \n> I've pushed the changes I made. They will be in 9.3.4.  I'm going to close this issue and open another one for the jvm leak of file handles for jar files from the ServiceLoader, as I think it is going to be rather a long time before Oracle get around to evaluating my bug report.  I'll cross link this issue to the new one.\n> \n> Jan\n\nOn 2015-09-29 23:54:44 -0400, Jan Bartel wrote:\n\n> https://bugs.eclipse.org/bugs/show_bug.cgi?id=478681\n> \n> Link to new bug.\n> \n> Jan\n\nOn 2015-09-30 07:45:45 -0400, Robert Huitl wrote:\n\n> Hi Jan,\n> \n> > I've pushed the changes I made. They will be in 9.3.4.\n> \n> Very nice, I'm going to test them soon and report back. At this time I'm actually not sure whether an SCI is used in my case.\n> \n> Is there any chance to have these changes included in a 9.2.14 release, if there's ever going to be one?\n\nOn 2015-10-21 00:49:14 -0400, Jan Bartel wrote:\n\n> Robert,\n> \n> I've had to rollback part of the changes for preventing the leaked deleted file descriptors because it was severely harming startup times: the effect of the rolled-back changes was to cause the jvm to close and then re-unpack a jar multiple times.\n> \n> We'll have to look for an alternate solution, but this probably won't happen until jetty-9.4.\n> \n> regards\n> Jan\n", "commits": {}, "title": "Jetty leaks memory and disk space after undeploying webapp", "created": "2016-02-16 23:38:11", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/231", "commitsDetails": [], "ttf": 34.000277777777775}, {"labels": ["Bug"], "closed": "2016-07-08 06:27:43", "body": "migrated from Bugzilla [#477121](https://bugs.eclipse.org/bugs/show_bug.cgi?id=477121)\nstatus ASSIGNED severity _normal_ in component _server_ for _9.3.x_\nReported in version _9.2.9_ on platform _PC_\nAssigned to: Jan Bartel\n\nOn 2015-09-10 19:48:16 -0400, D. P. wrote:\n\n> Stack: Jetty 9/Spring MVC.\n> The following behavior was observed.\n> Prerequisites: HTTP session established and authenticated.\n> The client works within the same session in 2 threads.\n> ThreadA (caused by HTTP requestA)-> ends/invalidates the session by calling session.ivalidate()\n> ThreadB (caused by HTTP requestB)-> performs some operations (within session)\n> Sequence:\n> 1. ThreadA: starts processing, user is authenticated (since in security context is filled from still valid session).\n> 2. ThreadB: starts processing, user is authenticated (since in security context is filled from still valid session).\n> 3. ThreadA: executing the session invalidation operation -> session deleted\n> 4. ThreadB (still in the processing): new session is created for already auth. user. This session is authenticated.\n>    As a result, we have the new authenticated session created while in such scenario I would expect the session to be terminated and no new session created.\n\nOn 2015-09-10 20:09:14 -0400, Jan Bartel wrote:\n\n> The actual session object will be the same between ThreadA and ThreadB. Can you confirm if the session object that ThreadB is working with is set to invalid (either look at the session data if it has been persisted, or try calling a method that throws IllegalStateException if the session is invalidated such as getLastAccessedTime()).\n> \n> FWIW the servlet spec does not provide any transactionality for session/request management so all kinds of race conditions are possible.\n\nOn 2015-09-11 15:24:16 -0400, D. P. wrote:\n\n> First, this is intermittent problem we've found during one of the runs of our client, thus I can  not reproduce the test mentioned: try calling a method that throws IllegalStateException if the session is invalidated such as getLastAccessedTime().\n> What we have in logs:\n> the Id of session is the same in both threads (qtp1427015498-325 and qtp1427015498-264):\n> 07/23/2015 12:48:43.718 TRACE [XX...X] [] [XX...X] [qtp1427015498-325]    x.x.x.XX...X Setting [session] to [xL5Pjefv2SOvnbywqU4uQApk4jezzwulc71v7bywhaanuqv] \n> vs\n> 07/23/2015 12:48:43.877 TRACE [XX...X] [] [XX...X] [qtp1427015498-264] x.x.x.XX...X Setting [session] to [xL5Pjefv2SOvnbywqU4uQApk4jezzwulc71v7bywhaanuqv]\n> \n> The session was destroyed:\n> 07/23/2015 12:48:43.895 DEBUG [XX...X] [xL5Pjefv2SOvnbywqU4uQApk4jezzwulc71v7bywhaanuqv] [XX...X] [qtp1427015498-325]  x.x.x.HttpSessionMonitor x.x.x.HttpSessionMonitor@56094be5: destroying session [xL5Pjefv2SOvnbywqU4uQApk4jezzwulc71v7bywhaanuqv]\n> \n> The HTTPSessionMonitor implements org.springframework.context.ApplicationListener and logs the mentioned line on receiving of org.springframework.security.web.session.HttpSessionDestroyedEvent.\n> \n> Right after session was destroyed in thread qtp1427015498-325, the in the second thread qtp1427015498-264 the creation of new session was reported: \n> 07/23/2015 12:48:43.896 TRACE [XX...X] [xL5Pjefv2SOvnbywqU4uQApk4jezzwulc71v7bywhaanuqv] [XX...X] [qtp1427015498-264]   x.x.x.HttpSessionMonitor x.x.x.HttpSessionMonitor@56094be5: processing session created\n> \n> 07/23/2015 12:48:43.896 TRACE [XX...X] [xL5Pjefv2SOvnbywqU4uQApk4jezzwulc71v7bywhaanuqv] [XX...X] [qtp1427015498-264]   x.x.x.HttpSessionMonitor x.x.x.HttpSessionMonitor@56094be5: registering session [xL5Pjefv2SOvnbywqU4uQA108c58wjxednp17sfrxbxbzv93]\n\nOn 2015-09-29 23:57:46 -0400, Jan Bartel wrote:\n\n> Please report which session manager you are using.\n> \n> thanks\n> Jan\n\nOn 2015-10-20 15:34:46 -0400, D. P. wrote:\n\n> (In reply to Jan Bartel from comment # 3)\n> \n> > Please report which session manager you are using.\n> > \n> > thanks\n> > Jan\n> \n> org.eclipse.jetty.server.session.HashSessionManager\n> and \n> org.eclipse.jetty.server.session.HashSessionIdManager\n", "commits": {}, "title": "HTTP session can be automatically (re)created after session invalidation under race conditions", "created": "2016-02-16 23:37:47", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/228", "commitsDetails": [], "ttf": 142.00027777777777}, {"labels": ["Bug"], "closed": "2016-03-02 16:14:21", "body": "migrated from Bugzilla [#476462](https://bugs.eclipse.org/bugs/show_bug.cgi?id=476462)\nstatus ASSIGNED severity _normal_ in component _server_ for _9.3.x_\nReported in version _9.3.2_ on platform _PC_\nAssigned to: Greg Wilkins\n\nOriginal attachment names and IDs:\n- _[accept-gzip.pcapng](https://bugs.eclipse.org/bugs//attachment.cgi?id=257004)_ (ID 257004)\n\nOn 2015-09-02 14:23:47 -0400, Jayadevan VK wrote:\n\n> This is on version 9.3.3 where issue # 474358 is marked as fixed. But I can still see the issue in effect. To repeat, if I make a request for app.js and there is already a pre-compressed app.js.gz available, the content-type of response is set to application/gzip instead of application/javascript.\n> \n> If it is any help, I tracked down this issue as due to copying of headers from HttpContent object into response in line 1107 com.ubiquiti.servlets.DefaultServlet.putHeaders(HttpServletResponse, HttpContent, long)\n> \n> which is eventually called from line 533 com.ubiquiti.servlets.DefaultServlet.doGet(HttpServletRequest, HttpServletResponse)\n> \n> where the content object is looked up from _cache using app.js.gz path and therefore has application/gzip as content type.\n\nOn 2015-09-03 20:39:30 -0400, Joakim Erdfelt wrote:\n\n> What's \"com.ubiquiti.\" ?\n\nOn 2015-09-03 20:54:43 -0400, Jayadevan VK wrote:\n\n> I am so sorry about the package name. I was trying some workarounds in my own pet project and copied FQN blindly.\n> \n> I meant line 1107 org.eclipse.jetty.servlet.DefaultServlet.putHeaders(HttpServletResponse, HttpContent, long)\n> \n> called from line 533 org.eclipse.jetty.servlet.DefaultServlet.doGet(HttpServletRequest, HttpServletResponse)\n\nOn 2015-09-30 17:24:08 -0400, Greg Wilkins wrote:\n\n> Can you try https://oss.sonatype.org/content/repositories/jetty-with-staging/org/eclipse/jetty/jetty-distribution/9.3.4-SNAPSHOT/jetty-distribution-9.3.4-20150930.035527-19.tar.gz\n\nOn 2015-10-02 09:32:19 -0400, Jayadevan VK wrote:\n\n> The issue remains. I have a .js file that is pre-gzipped. The content-type is application/gzip. I looked at the debug logs:\n> \n> 2015-10-02 09:16:22,520 [qtp20191344-19] DEBUG o.e.jetty.servlet.DefaultServlet - uri=xyz.js, resource=file://xyz.js.gz, content=CachedContent@a32f08{r=file://xyz.js.gz,e=true,lm=Last-Modified: Mon, 01 Sep 2014 23:00:02 GMT,ct=Content-Type: application/gzip}\n> \n> Looks like it is using CachedHttpContent; but I think it should be using CachedGzipHttpContent. I have not yet traced the call hierarchy.\n\nOn 2015-10-02 11:58:55 -0400, Joakim Erdfelt wrote:\n\n> Tested on jetty-distribution-9.3.3.v20150827\n> \n> Modifications to distribution ...\n>   Edit ${jetty.home}/etc/webdefault.xml to enable DefaultServlet gzip=true\n>   (its defaulted to false)\n> \n> Run\n>   $ cd jetty-distribution-9.3.3.v20150827\n>   $ cd demo-base\n>   $ java -jar ../start.jar\n> \n> Tests\n> # No GZIP Accept\n> \n> $ curl -I http://localhost:8080/test/da.txt\n> HTTP/1.1 200 OK\n> Set-Cookie: visited=yes\n> Expires: Thu, 01 Jan 1970 00:00:00 GMT\n> Vary: Accept-Encoding\n> Last-Modified: Thu, 27 Aug 2015 17:36:08 GMT\n> Content-Type: text/plain\n> Accept-Ranges: bytes\n> Content-Length: 61000\n> Server: Jetty(9.3.3.v20150827)\n> # With GZIP Accept\n> \n> $ curl -H \"Accept-Encoding: gzip\" -I http://localhost:8080/test/da.txt\n> HTTP/1.1 200 OK\n> Set-Cookie: visited=yes\n> Expires: Thu, 01 Jan 1970 00:00:00 GMT\n> Vary: Accept-Encoding\n> Content-Encoding: gzip\n> Content-Type: text/plain\n> Last-Modified: Thu, 27 Aug 2015 17:36:08 GMT\n> Accept-Ranges: bytes\n> Content-Length: 2565\n> Server: Jetty(9.3.3.v20150827)\n> # With GZIP Accept (and bigger file)\n> \n> $ curl -H \"Accept-Encoding: gzip\" -I http://localhost:8080/test/dat.txt\n> HTTP/1.1 200 OK\n> Set-Cookie: visited=yes\n> Expires: Thu, 01 Jan 1970 00:00:00 GMT\n> Last-Modified: Thu, 27 Aug 2015 17:36:08 GMT\n> Content-Type: text/plain\n> Accept-Ranges: bytes\n> Content-Length: 244000\n> Server: Jetty(9.3.3.v20150827)\n> # With GZIP Accept (requesting smaller file again)\n> \n> $ curl -H \"Accept-Encoding: gzip\" -I http://localhost:8080/test/da.txt\n> HTTP/1.1 200 OK\n> Set-Cookie: visited=yes\n> Expires: Thu, 01 Jan 1970 00:00:00 GMT\n> Vary: Accept-Encoding\n> Content-Encoding: gzip\n> Content-Type: text/plain\n> Last-Modified: Thu, 27 Aug 2015 17:36:08 GMT\n> Accept-Ranges: bytes\n> Content-Length: 2565\n> Server: Jetty(9.3.3.v20150827)\n> \n> Not able to reproduce.\n> Do you have a testcase showing this not working?\n\nOn 2015-10-02 12:11:48 -0400, Joakim Erdfelt wrote:\n\n> Fetching the request, as opposed to using HEAD (which \"curl -I\" does), causes the failure.\n> \n> $ curl --compressed -# --dump-header - \\\n>        -o /dev/null http://localhost:8080/test/da.txt\n> HTTP/1.1 200 OK\n> Set-Cookie: visited=yes\n> Expires: Thu, 01 Jan 1970 00:00:00 GMT\n> Vary: Accept-Encoding\n> Content-Encoding: gzip\n> Content-Type: application/gzip\n> Last-Modified: Thu, 27 Aug 2015 17:36:08 GMT\n> Accept-Ranges: bytes\n> Content-Length: 2565\n> Server: Jetty(9.3.3.v20150827)\n> \n> THIS is a bad Content-Type\n\nOn 2015-10-02 12:22:25 -0400, Joakim Erdfelt wrote:\n\n> Some truly bizarre behavior here.\n> (Attaching captured wireshark pcapng too)\n> \n> $ curl -# --dump-header - -o /dev/null http://localhost:8080/test/da.txt\n> \n> GET /test/da.txt HTTP/1.1\n> User-Agent: curl/7.32.0\n> Host: localhost:8080\n> Accept: _/_\n> \n> HTTP/1.1 200 OK\n> Set-Cookie: visited=yes\n> Expires: Thu, 01 Jan 1970 00:00:00 GMT\n> Vary: Accept-Encoding\n> Last-Modified: Thu, 27 Aug 2015 17:36:08 GMT\n> Content-Type: text/plain\n> Accept-Ranges: bytes\n> Content-Length: 61000\n> Server: Jetty(9.3.3.v20150827)\n> \n> $ curl --compressed -# --dump-header - -o /dev/null http://localhost:8080/test/da.txt\n> \n> GET /test/da.txt HTTP/1.1\n> User-Agent: curl/7.32.0\n> Host: localhost:8080\n> Accept: _/_\n> Accept-Encoding: deflate, gzip\n> \n> HTTP/1.1 200 OK\n> Set-Cookie: visited=yes\n> Expires: Thu, 01 Jan 1970 00:00:00 GMT\n> Vary: Accept-Encoding\n> Content-Encoding: gzip\n> Content-Type: application/gzip\n> Last-Modified: Thu, 27 Aug 2015 17:36:08 GMT\n> Accept-Ranges: bytes\n> Content-Length: 2565\n> Server: Jetty(9.3.3.v20150827)\n> \n> $ curl -H \"Accept-Encoding: gzip\" -# --dump-header - -o /dev/null http://localhost:8080/test/dat.txt\n> \n> GET /test/dat.txt HTTP/1.1\n> User-Agent: curl/7.32.0\n> Host: localhost:8080\n> Accept: _/_\n> Accept-Encoding: gzip\n> \n> HTTP/1.1 200 OK\n> Set-Cookie: visited=yes\n> Expires: Thu, 01 Jan 1970 00:00:00 GMT\n> Last-Modified: Thu, 27 Aug 2015 17:36:08 GMT\n> Content-Type: text/plain\n> Accept-Ranges: bytes\n> Vary: Accept-Encoding, User-Agent\n> Content-Encoding: gzip\n> Transfer-Encoding: chunked\n> Server: Jetty(9.3.3.v20150827)\n> \n> $ curl -H \"Accept-Encoding: deflate, gzip\" -# --dump-header - -o /dev/null http://localhost:8080/test/dat.txt\n> \n> GET /test/dat.txt HTTP/1.1\n> User-Agent: curl/7.32.0\n> Host: localhost:8080\n> Accept: _/_\n> Accept-Encoding: deflate, gzip\n> \n> HTTP/1.1 200 OK\n> Set-Cookie: visited=yes\n> Expires: Thu, 01 Jan 1970 00:00:00 GMT\n> Last-Modified: Thu, 27 Aug 2015 17:36:08 GMT\n> Content-Type: text/plain\n> Accept-Ranges: bytes\n> Vary: Accept-Encoding, User-Agent\n> Content-Encoding: gzip\n> Transfer-Encoding: chunked\n> Server: Jetty(9.3.3.v20150827)\n\nOn 2015-10-02 12:23:59 -0400, Joakim Erdfelt wrote:\n\n> Created attachment 257004\n> accept-gzip.pcapng\n> \n> There are 4 requests on the attached pcapng\n> \n> The CURL order is ...\n> \n> [0]$ curl -# --dump-header - -o /dev/null http://localhost:8080/test/da.txt\n> \n> [1]$ curl --compressed -# --dump-header - -o /dev/null http://localhost:8080/test/da.txt\n> \n> [2]$ curl -H \"Accept-Encoding: gzip\" -# --dump-header - -o /dev/null http://localhost:8080/test/dat.txt\n> \n> [3]$ curl -H \"Accept-Encoding: deflate, gzip\" -# --dump-header - -o /dev/null http://localhost:8080/test/dat.txt\n\nOn 2015-10-02 12:30:14 -0400, Joakim Erdfelt wrote:\n\n> So the size of the gzip'd content seems to have a role in triggering this bug.\n> If the size is small, then the Content-Type is correct.\n> If the size is large (like the dat.txt on the test webapp on demo-base) then the Content-Type is incorrect\n", "commits": {}, "title": "bad content-type on compressed content (like issue#474358)", "created": "2016-02-16 23:37:34", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/227", "commitsDetails": [], "ttf": 14.000277777777777}, {"labels": ["Bug"], "closed": "2016-03-02 16:15:03", "body": "migrated from Bugzilla [#475409](https://bugs.eclipse.org/bugs/show_bug.cgi?id=475409)\nstatus ASSIGNED severity _normal_ in component _start_ for _9.3.x_\nReported in version _9.3.2_ on platform _All_\nAssigned to: Greg Wilkins\n\nOriginal attachment names and IDs:\n- _[patch.txt](https://bugs.eclipse.org/bugs//attachment.cgi?id=255961)_ (ID 255961)\n\nOn 2015-08-19 13:18:08 -0400, Michael Domingues wrote:\n\n> Created attachment 255961\n> Proposed Patch\n> ## Overview\n> \n> When files that are specified in module [files] directives are missing (or located at alternative locations), Jetty warnings that the files are missing, erroneously logs an info message that the base directory has been modified, and exits.\n> \n> This is a regression (introduced on the 9.3.X branch) of Bug ID: 427204, where it was decided that module directives for [files] should only trigger warnings, not lead to startup failure.\n> ## Steps to reproduce\n> \n> 1) Configure Jetty to use a module which includes a [files] directive (ssl, for example)\n> 2) Do not place the required file (for ssl, etc/keystore) at the location that the .mod file specifies\n> 3) Start Jetty from $JETTY_BASE using java -jar $JETTY_HOME/start.jar\n> ## Actual Result\n> \n> Jetty logs the following warnings, followed by an info message, and fails to start:\n> \n> WARNING: Missing Required File: ${jetty.base}\\etc\\keystore\n> WARNING:   Can be downloaded From: http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/plain/jetty-server/src/test/config/etc/keystore?id=master\n> WARNING:   Run start.jar --create-files to download\n> INFO: Base directory was modified\n> ## Expected Result\n> \n> Jetty logs the following warnings, without the info message, and starts properly:\n> \n> WARNING: Missing Required File: ${jetty.base}\\etc\\keystore\n> WARNING:   Can be downloaded From: http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/plain/jetty-server/src/test/config/etc/keystore?id=master\n> WARNING:   Run start.jar --create-files to download\n> ## Additional Information\n> \n> According to the method documentation on org.eclipse.jetty.start.BaseBuilder.processFileResource(), the return boolean indicates:\n> - @return true if change was made as a result of the file, false if no change made.\n> \n> Since no changes are made in the two particular conditions that could lead to these messages, they ought to return false, rather than true.\n\nOn 2015-08-19 18:07:02 -0400, Greg Wilkins wrote:\n\n> Michael,\n> \n> you can use the --skip-file-validation=  option to list files that need not be checked for.\n> \n> I have already noted the incorrect warning about directory modification.  I have started working on a major refactor of this mechanism in the branch jetty-9.3-Feature2    I will look at bringing that impl to 9.3.x rather than 9.4.x as intended.\n", "commits": {}, "title": "Jetty 9.3.X fails to start when module-required files are not at their default locations or are missing", "created": "2016-02-16 23:37:17", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/225", "commitsDetails": [], "ttf": 14.000277777777777}, {"labels": ["Bug"], "closed": "2016-07-06 04:42:08", "body": "migrated from Bugzilla [#474716](https://bugs.eclipse.org/bugs/show_bug.cgi?id=474716)\nstatus ASSIGNED severity _normal_ in component _osgi_ for _9.3.x_\nReported in version _9.2.9_ on platform _Macintosh_\nAssigned to: Jan Bartel\n\nOriginal attachment names and IDs:\n- _[de.tecthnology.tests.jetty.sessions.zip](https://bugs.eclipse.org/bugs//attachment.cgi?id=255790)_ (ID 255790)\n\nOn 2015-08-11 10:58:50 -0400, Todor Dimitrov wrote:\n\n> Created attachment 255790\n> Test OSGi bundle project\n> \n> Since upgrading to the Mars release of Equinox (Jetty 9.2.9), our web authentication logic no longer works. It seems that setting a session attribute in one servlet and then performing a redirect to the next somehow resets the session or clears the session attributes. The session id is maintained between requests and the sessions cookie is properly set. The same code, without any modifications, works perfectly fine on the Luna release of Equinox (Jetty 8.1.14).\n> \n> A rudimentary OSGi bundle project is attached, which registers two HTTP servlets using the OSGi HttpService. The first servlet sets an attribute and redirects to the second one. The second servlet reads the attribute and outputs it to the browser. The test can be invoked by calling the following URL: \n> \n> http://127.0.0.1/set (port may need to be appended).\n> \n> After the redirect occurs the URL changes to http://127.0.0.1/read and the following text should be output when working properly:\n> \n> test = 1\n> \n> On Jetty 9 and Equinox Mars the output is:\n> \n> test = null\n> \n> Is there any configuration for the HttpService or Jetty, which is new to the Jetty 9 and which we might be missing?\n> \n> Thanks in advance,\n> Todor\n\nOn 2015-08-12 05:20:14 -0400, Todor Dimitrov wrote:\n\n> It seems that the session attributes are scoped using the identifier of the HttpContext. When registering the two servlets in the example, no HttpContext instance is provided such that two default contexts with different ids will be used. Thus the attributes set by the first servlet are not visible in the second one. This also implies that servlets, which are registered by different OSGi bundles, cannot share HTTP session attributes*. Is this the indented behaviour?\n> \n> Regards,\n> Todor\n> - well, this could be accomplished by using some weird global HttpContext singleton(s)\n\nOn 2015-09-30 04:19:30 -0400, Jan Bartel wrote:\n\n> Todor,\n> \n> This link: https://osgi.org/javadoc/r4v42/org/osgi/service/http/HttpService.html says that if you want 2 servlets to share a single ServletContext, then they must have a common HttpContext passed into registerServlet method call. \n> \n> Also, I think this issue may be better addressed by the eclipse folks that maintain the org.eclipse.equinox.http.servlet.HttpServiceServlet that implements the HttpService.\n> \n> Jan\n", "commits": {}, "title": "HTTP session setAttribute does not work across servlets on Jetty/OSGi", "created": "2016-02-16 23:37:08", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/224", "commitsDetails": [], "ttf": 140.00027777777777}, {"labels": ["Bug"], "closed": "2017-04-28 11:17:18", "body": "migrated from Bugzilla [#474025](https://bugs.eclipse.org/bugs/show_bug.cgi?id=474025)\nstatus ASSIGNED severity _normal_ in component _server_ for _9.3.x_\nReported in version _9.3.1_ on platform _All_\nAssigned to: Greg Wilkins\n\nOn 2015-07-31 08:08:19 -0400, Kartik Mehta wrote:\n\n> JCEKS format keystore may contain SecretKeyEntries representing symmetric keys, along with PrivateKeyEntries and certificates.\n> SSLContextFactory code that looks for X.509 certificates fails to account for this fact.\n> Line # 373\n> Certificate certificate = keyStore.getCertificate(alias);\n> certificate is null in case of SecretKeyEntry, due to which the next line # 374 throws a NullPointerException\n> \n> This basically renders our keystore unusable as the store of both symmetric key and certificates, defeating the purpose of using JCEKS in the first place.\n> \n> Please rectify this. It is a very small fix.\n> \n> regards,\n> Kartik\n\nOn 2015-08-02 22:23:45 -0400, Greg Wilkins wrote:\n\n> Doh! we just missed the release train for 9.3.2.  This will be fixed in master/SNAPSHOT very soon and 9.3.3 is probably a month away.\n\nOn 2015-08-03 01:38:47 -0400, Kartik Mehta wrote:\n\n> ok, so while we are at it, the certificate validation code needs fixing as well. If no alias is specified, we pick the first alias in the keystore and assume it has a certificate. It will cause \"No certificate exception\" to be thrown if the first entry in the JCEKS keystore happens to be a SecretKeyEntry\n> \n> if (_certAlias == null)\n> {\n>     List<String> aliases = Collections.list(keyStore.aliases());\n>     _certAlias = aliases.size() == 1 ? aliases.get(0) : null;\n>     // kartik : get(0) may be a SecretKey\n> }\n> \n> Certificate cert = _certAlias == null ? null:keyStore.getCertificate(_certAlias);\n> \n> if (cert == null) //kartik :  it WILL be null for a SecretKey\n> {\n>      throw new Exception(\"No certificate found in the keystore\" + (_certAlias==null ? \"\":\" for alias \" + _certAlias));\n> }\n> \n> There may be more places in the code, where a similar assumption exists about a certificate being attached to every alias in the keystore. This needs to be checked and corrected throughout.\n> \n> regards,\n> Kartik\n\nOn 2015-08-04 22:04:45 -0400, Greg Wilkins wrote:\n\n> With commit SHA: a0a2c64f6aa61d7cbd70c9ea465f89546c20bbe4 we now check all calls to getCertificate for being non null and type == \"X.509\".\n> \n> However, I will leave this open as we really need to add a better unit test for this kind of thing.\n", "commits": {}, "title": "SslContextFactory does not work with JCEKS keystore if it contains a SecretKeyEntry", "created": "2016-02-16 23:36:24", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/220", "commitsDetails": [], "ttf": 436.0002777777778}, {"labels": ["Bug"], "closed": "2016-03-02 16:13:09", "body": "migrated from Bugzilla [#471577](https://bugs.eclipse.org/bugs/show_bug.cgi?id=471577)\nstatus ASSIGNED severity _normal_ in component _server_ for _9.3.x_\nReported in version _9.3.0_ on platform _All_\nAssigned to: Greg Wilkins\n\nOn 2015-07-01 08:38:06 -0400, Joakim Erdfelt wrote:\n\n> Our deprecation of GzipFilter (in favor of GzipHandler) has broken other projects integration with us.\n> \n> Namely Dropwizard extended our GzipFilter to add handling for Gzip compressed request payloads.\n> \n> Should we add Gzip compressed request payload processing to GzipHandler?\n> \n> https://github.com/dropwizard/dropwizard/blob/master/dropwizard-jetty/src/main/java/io/dropwizard/jetty/BiDiGzipFilter.java\n\nOn 2015-07-01 08:43:18 -0400, Joakim Erdfelt wrote:\n\n> Filed related bug at Dropwizard side.\n> \n> https://github.com/dropwizard/dropwizard/issues/1147\n\nOn 2015-07-01 17:43:42 -0400, Greg Wilkins wrote:\n\n> Gzip handling has been moved to a new interceptor architecture so that it works correctly with all async IO modes.\n> \n> There is no similar interceptor yet on the input side.\n> \n> I'll look at making this interception point in the near future, but it would be good to have somebody from the dropwizard team to collaborate with when creating a gzip input handler\n", "commits": {}, "title": "Deprecated GzipFilter broke Gzip Request processing in other projects", "created": "2016-02-16 23:35:53", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/217", "commitsDetails": [], "ttf": 14.000277777777777}, {"labels": ["Bug"], "closed": "2016-12-14 20:46:33", "body": "migrated from Bugzilla [#470360](https://bugs.eclipse.org/bugs/show_bug.cgi?id=470360)\nstatus ASSIGNED severity _normal_ in component _server_ for _9.3.x_\nReported in version _9.2.11_ on platform _Other_\nAssigned to: Project Inbox\n\nOriginal attachment names and IDs:\n- _[96k-success.log](https://bugs.eclipse.org/bugs//attachment.cgi?id=254501)_ (ID 254501)\n- _[96k-failure.log](https://bugs.eclipse.org/bugs//attachment.cgi?id=254502)_ (ID 254502)\n\nOn 2015-06-17 06:57:28 -0400, Jack Patwork wrote:\n\n> Created attachment 254501\n> 96k success debug log\n> \n> I am getting intermittent incomplete responses that are timing out when serving static resources from jetty. There appears to be a filesize threshold and I can see it more consistently for files > 96k\n> \n> See the attached response for two identical local requests.\n\nOn 2015-06-17 06:58:24 -0400, Jack Patwork wrote:\n\n> Created attachment 254502\n> 96k failure debug log\n\nOn 2015-06-17 07:08:36 -0400, Jack Patwork wrote:\n\n> In both requests you can see there two exceptions logged:\n> \n> java.io.IOException: Stream closed\n>   at java.util.zip.InflaterInputStream.ensureOpen(InflaterInputStream.java:67)\n>   at java.util.zip.InflaterInputStream.read(InflaterInputStream.java:142)\n>   at java.io.FilterInputStream.read(FilterInputStream.java:133)\n>   at java.io.FilterInputStream.read(FilterInputStream.java:133)\n>   at org.eclipse.jetty.server.HttpOutput$InputStreamWritingCB.process(HttpOutput.java:1036)\n> ...\n> and subsequently:\n> \n> java.lang.Throwable\n>   at org.eclipse.jetty.util.SharedBlockingCallback$Blocker.block(SharedBlockingCallback.java:202)\n>   at org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:136)\n> ...\n> \n> The key difference in the logs from these two requests seems to be in the SelectorManager log lines. In the successful response the Selector loop wakes up and apppears to complete the response. In the failure case this never happens and instead an idle timeout kicks in and closes the connection after 30 seconds.\n> \n> It feels like a race condition, could it be related to Bug 468714 - Race in selectorManager updateKey?\n\nOn 2015-06-17 20:10:04 -0400, Greg Wilkins wrote:\n\n> Jack,\n> \n> the size threshhold is probably just related to how the DefaultServlet chooses to serve your content.  In this can it appears to be using the InputStreamWritingCB, which is used for large content that does not fit into the resource cache (or can't be direct mapped).\n> \n> But I need to understand your situation some more.   What is the situation immediately before the exception?  Is the client stalled? was content recently written? \n> \n> More over, it is very strange that the inputstream is seen as closed?  Is the static content being deleted while it is being served (is this windows or unix filesystem?)\n> \n> Can you give me the steps necessary to reproduce?\n\nOn 2015-06-18 06:28:44 -0400, Jack Patwork wrote:\n\n> This is a unix filesystem (Centos 5.4). Content was indeed recently written, from the clients perspective (a local curl request) it gets part of the response but will stop before the content is completely written and then hang until the timeout closes the connection. The content is actually coming from a classpath resource from inside the same jar file. \n> \n> It does seem strange that the inputstream is closed, I'll try and create a reproducable test case for you.\n\nOn 2015-06-18 06:53:23 -0400, Jack Patwork wrote:\n\n> Could this be related to this old bug 364936? \n> \n> Although my application does already have the work around suggested:\n> Resource.setDefaultUseCaches(false);\n\nOn 2015-06-18 18:50:09 -0400, Greg Wilkins wrote:\n\n> Jack,\n> \n> it could perhaps be related to the zip cache, as that is indeed a strange bit of JVM code.  But I can't really say until I know more about how to reproduce this.\n", "commits": {}, "title": "Incomplete response & idle timeouts on larger files", "created": "2016-02-16 23:35:21", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/214", "commitsDetails": [], "ttf": 301.0002777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "jmcc0nn3ll", "filteredCommits": ["37fa778ea03aba953712348426393136e2314658"], "commits": {"37fa778ea03aba953712348426393136e2314658": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2016-02-16 23:35:09", "commitsDetails": [{"commitMessage": "Issue #213\n", "commitParents": ["2f1d2dac729d1d08258fe67ecc7a8af22be221ec"], "commitHash": "37fa778ea03aba953712348426393136e2314658", "commitSpoonAstDiffStats": [], "nameRev": "37fa778ea03aba953712348426393136e2314658 tags/jetty-9.4.0.M1~43", "commitUser": "janbartel", "authoredDateTime": "2016-07-27 20:12:10", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 39, "filePath": "jetty-osgi/test-jetty-osgi-webapp/src/main/java/com/acme/osgi/Activator.java", "insertions": 20, "deletions": 19}, {"lines": 66, "filePath": "jetty-osgi/jetty-osgi-boot/src/main/java/org/eclipse/jetty/osgi/boot/ServiceContextProvider.java", "insertions": 66, "deletions": 0}, {"lines": 49, "filePath": "jetty-osgi/jetty-osgi-boot/src/main/java/org/eclipse/jetty/osgi/boot/JettyBootstrapActivator.java", "insertions": 8, "deletions": 41}, {"lines": 32, "filePath": "jetty-osgi/jetty-osgi-boot/src/main/java/org/eclipse/jetty/osgi/boot/utils/Util.java", "insertions": 31, "deletions": 1}, {"lines": 66, "filePath": "jetty-osgi/jetty-osgi-boot/src/main/java/org/eclipse/jetty/osgi/boot/ServiceWebAppProvider.java", "insertions": 66, "deletions": 0}, {"lines": 6, "filePath": "jetty-osgi/test-jetty-osgi-webapp/src/main/resources/webappA/index.html", "insertions": 6, "deletions": 0}, {"lines": 7, "filePath": "jetty-osgi/test-jetty-osgi/pom.xml", "insertions": 6, "deletions": 1}, {"lines": 223, "filePath": "jetty-osgi/jetty-osgi-boot/src/main/java/org/eclipse/jetty/osgi/boot/internal/webapp/ServiceWatcher.java", "insertions": 0, "deletions": 223}, {"lines": 66, "filePath": "jetty-osgi/jetty-osgi-boot/src/main/java/org/eclipse/jetty/osgi/boot/BundleContextProvider.java", "insertions": 66, "deletions": 0}, {"lines": 1, "filePath": "jetty-osgi/pom.xml", "insertions": 1, "deletions": 0}, {"lines": 144, "filePath": "jetty-osgi/jetty-osgi-boot/src/main/java/org/eclipse/jetty/osgi/boot/internal/serverfactory/JettyServerServiceTracker.java", "insertions": 48, "deletions": 96}, {"lines": 307, "filePath": "jetty-osgi/jetty-osgi-boot/src/main/java/org/eclipse/jetty/osgi/boot/internal/webapp/BundleWatcher.java", "insertions": 0, "deletions": 307}, {"lines": 84, "filePath": "jetty-osgi/test-jetty-osgi-server/pom.xml", "insertions": 84, "deletions": 0}, {"lines": 68, "filePath": "jetty-osgi/test-jetty-osgi-server/src/main/java/com/acme/osgi/Activator.java", "insertions": 68, "deletions": 0}, {"lines": 6, "filePath": "jetty-osgi/test-jetty-osgi-webapp/src/main/resources/webappB/index.html", "insertions": 6, "deletions": 0}, {"lines": 9, "filePath": "jetty-osgi/test-jetty-osgi-context/src/main/java/com/acme/osgi/Activator.java", "insertions": 6, "deletions": 3}, {"lines": 6, "filePath": "jetty-osgi/test-jetty-osgi-server/src/main/resources/index.html", "insertions": 6, "deletions": 0}, {"lines": 35, "filePath": "jetty-osgi/test-jetty-osgi/src/test/java/org/eclipse/jetty/osgi/test/TestJettyOSGiBootWebAppAsService.java", "insertions": 25, "deletions": 10}, {"lines": 64, "filePath": "jetty-osgi/jetty-osgi-boot/src/main/java/org/eclipse/jetty/osgi/boot/BundleWebAppProvider.java", "insertions": 64, "deletions": 0}, {"lines": 6, "filePath": "jetty-osgi/test-jetty-osgi-webapp/pom.xml", "insertions": 6, "deletions": 0}], "commitDateTime": "2016-07-27 20:13:24", "spoonStatsSkippedReason": "tooManyChanges"}], "title": "jetty.osgi.boot requires Server services registered before ContextHandler services", "spoonStatsSummary": {}, "gitStatsSummary": {"lines": 1151, "insertions": 461, "gitFilesChange": 15, "deletions": 690}, "closed": "2016-07-28 01:23:02", "statsSkippedReason": "", "body": "migrated from Bugzilla [#470116](https://bugs.eclipse.org/bugs/show_bug.cgi?id=470116)\nstatus ASSIGNED severity _normal_ in component _osgi_ for _9.3.x_\nReported in version _9.2.9_ on platform _Other_\nAssigned to: Jan Bartel\n\nOn 2015-06-12 17:51:00 -0400, Magnus Jungsbluth wrote:\n\n> I really like the service based ContextHandler approach to deploying web apps with jetty.osgi.boot. I stumbled on some oddity and found that in ServiceWatcher#addService if no Server is registered with a matching name no deployment will ever happen. If the Server was registered later the ContextHandler should still be deployed.\n> \n> The really bad corollary of this is that ports are open before content is deployed. This means that for fractions of a second 404 status codes can be received which is especially bad for rest style services booting up under high load.\n> \n> As a possible workaround we can register a root handler that returns 5XX status codes if no child handler handles the request\n\nOn 2015-06-19 02:07:47 -0400, Jan Bartel wrote:\n\n> Magnus,\n> \n> Hmmm .... tricky ...\n> \n> As regards the startup scenario where the server starts before any contexts are deployed to it, certainly the simplest thing to do is to modify the jetty.xml file that configures the default server instance and have the DefaultHandler return a page of your choice.  \n> \n> There are a couple of ways that I can think of to implement preventing a server from opening its connectors before any contexts are deployed to it but they're mostly ugly solutions. Nor do they prevent the need for the DefaultHandler as the handler-of-last-resort and an informative error page. Consider these scenarios:\n> -  there are contexts deployed to the server instance on startup, but none of them are started. In non-osgi jetty the connectors would still open, but the DefaultHandler will handle requests.\n> - after the server instance has started, all of the deployed contexts have been stopped, thus requests will fall through to the DefaultHandler.\n> \n> Having the server look for bundles  & services to deploy after it has started is also problematic ... I think the solution would entail each of the 4 flavours of deployer (BundleContextProvider, BundleWebAppProvider, ServiceContextProvider, ServiceWebAppProvider) each iterating over all the bundles or services at startup time to see which could be deployed. In the case of the services, its not too inefficient, as they can be filtered by the class type (ContextHandler or WebAppContext). But in the case of the Bundle providers, they have no choice but to each iterate over all of the Bundles installed in the system, which could be very very many.\n> \n> Jan\n\nOn 2015-06-25 06:37:42 -0400, Magnus Jungsbluth wrote:\n\n> I neither use a jetty.xml not the DefaultHandler, since I configure the Server directly in code. \n> \n> Maybe let's just split the two concerns (correctness w.r.t start order and open ports).\n> \n> Concerning correctness (In OSGi it should not matter when a service is registered) and looking for existing services bundles I would propose the following (I am not sitting in front of the Jetty code atm so I might be off at some point):\n> - You are already using ServiceTrackerS as far as I remember so you already have all existing services right there and locally cached (no need to query again). The culprit is that they are opened when the Activator starts and events are only processed if the Server service already exist\n> - If you open the required ServiceTrackerS at the time of Server discovery you get both for free (events are fired for existing ContextHandler/WebApp services and events for services that come later). The only really difference would by that a more specific OSGi filter would be required (i.e. (&(objectClass=ContextHandler)(managedServer=mySuperServer)) )\n> - I am not sure about the case where no \"managedServer\" property is used (i.e. default). Maybe for this case you still need to open a ServiceTracker with a filter like (!(managedServer=*))\n> - I would not handle the BundleTracking part specifically and leave it as is since as far as I remember the osgi.boot bundle registers approbate ContextHandler WebApp... services respectively so this would be solved automatically if the above changes are applied\n> \n> I wouldn't expect the inner code to change much but changes around the Activator and the methods where ServerS added/removed events are processed. \n> \n> Does this sound like a viable approach?\n\nOn 2015-08-25 15:21:49 -0400, Wei Yan wrote:\n\n> Have the same issue here, server won't deploy the context handler created before server starting.\n", "changesInPackagesGIT": ["jetty-osgi/test-jetty-osgi-server/src/main/java/com/acme/osgi", "jetty-osgi/test-jetty-osgi-webapp/src/main/java/com/acme/osgi", "jetty-osgi/test-jetty-osgi-webapp/src/main/resources/webappB/index.html", "jetty-osgi/test-jetty-osgi-webapp/src/main/resources/webappA/index.html", "jetty-osgi/test-jetty-osgi-server/src/main/resources/index.html", "jetty-osgi/test-jetty-osgi-context/src/main/java/com/acme/osgi", "jetty-osgi/jetty-osgi-boot/src/main/java/org/eclipse/jetty/osgi/boot"], "ttf": 162.00027777777777, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/213"}, {"labels": ["Bug"], "closed": "2016-02-17 14:13:53", "body": "migrated from Bugzilla [#468747](https://bugs.eclipse.org/bugs/show_bug.cgi?id=468747)\nstatus ASSIGNED severity _normal_ in component _server_ for _9.3.x_\nReported in version _9.2.9_ on platform _PC_\nAssigned to: Jesse McConnell\n\nOriginal attachment names and IDs:\n- _[Veracode_HttpSpiContextHandler_XSS.png](https://bugs.eclipse.org/bugs//attachment.cgi?id=253919)_ (ID 253919)\n\nOn 2015-05-29 04:20:59 -0400, Pascal Floeschel wrote:\n\n> Created attachment 253919\n> Screenshot of the Veracode report\n> \n> Veracode static code scanning reports a XSS vulnerability in HttpSpiContextHandler in line 95.\n> \n> The reported line \n>     writer.println(\"<p>RequestURI=\" + req.getRequestURI() + \"</p>\");\n> does not escape the request URI before it gets added in the response body.\n\nOn 2015-05-29 07:08:11 -0400, Greg Wilkins wrote:\n\n> Jesse,\n> \n> I've committed a fix for this to 9.2 branch and merged it to 9.3.   But it was a bit of a hurried job.... so can you double check what I've done?\n", "commits": {}, "title": "XSS vulnerability in HttpSpiContextHandler", "created": "2016-02-16 23:34:56", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/210", "commitsDetails": [], "ttf": 0.0002777777777777778}, {"labels": ["Bug"], "closed": "2017-04-28 11:17:32", "body": "migrated from Bugzilla [#467929](https://bugs.eclipse.org/bugs/show_bug.cgi?id=467929)\nstatus ASSIGNED severity _normal_ in component _server_ for _9.3.x_\nReported in version _9.2.10_ on platform _PC_\nAssigned to: Project Inbox\n\nOn 2015-05-21 17:28:09 -0400, Eric Anderson wrote:\n\n> Jetty supports ALPN as a server using alpn-boot (which is added to the bootclasspath, and thereby the bootstrap class loader). However, if an application wants to make outgoing calls as a client with a application-included library, alpn-api is not exposed to the application and ALPN cannot be configured.\n> \n> org.eclipse.jetty.alpn. should be added to the system classes whitelist[1], or alpn-api should add the appropriate Jetty-specific configuration to auto-configure Jetty.\n> 1. https://github.com/eclipse/jetty.project/blob/jetty-9.2.10.v20150310/jetty-webapp/src/main/java/org/eclipse/jetty/webapp/WebAppContext.java#L105-L149\n\nOn 2015-05-21 18:38:22 -0400, Greg Wilkins wrote:\n\n> @Eric,\n> \n> We would like to move away from hard coding optional features in the WebAppContext server and system classes.      We have come to the conclusion that it is a bad solution.\n> \n> Instead we are looking at adding something, perhaps built on the service loader mechanism that will support simple configuration and a good automatic default of classpath configuration.     Thus our intent is to remove the hard coded system/server paths in future releases.\n> \n> Have to ponder if we double down by adding more before we do this....\n\nOn 2015-05-22 06:01:21 -0400, Greg Wilkins wrote:\n\n> There is a discussion on github https://github.com/jetty-project/jetty-alpn/issues/8 which gives some background for this.\n", "commits": {}, "title": "alpn-api classes should be white-listed as system classes", "created": "2016-02-16 23:34:50", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/209", "commitsDetails": [], "ttf": 436.0002777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug", "High Priority"], "user": "jmcc0nn3ll", "filteredCommits": [], "commits": {"9199ec8843bcfa25d841bc3a183d92b184cbc3bf": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "a57500e727ee0a226f66dd52cb27f193896622b7": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "3931336633bfd8c1478c88df227365ae59d62871": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "38e0976513b99672c0870a143b4dae8052bc6483": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "2ee819c2c6e64a3668fb80e1991241b173c0d8b5": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "c8ffaec032599bbe669fc31cc14d4c3d4cd35d6e": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "70d4850ed1e91a6ff2a2b8d528b671abb864d5c4": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "0c8d4dec9f4fb73cb9b1675344da6f9346d99be4": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "ae51344582aa0ac4f590d445c3533de47b7e9d50": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "8e889287fa4484ddc4cdb9bd8a1ebb5f8c478435": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "8fce2727ca4c410c004c54f3d931614a721c6582": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "be139001f447fd0d29e186ced6e95a39f6e6da3b": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "92f8f594d1727075d973530a3401969fc8457cfc": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "63e01d00f35fb3a1f12e82dddb9a3c4b45c8cbf1": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "9fd70d3d6f0e3f1470b388e3797023b129a3de96": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "239f88c1585e99afcc169e7924ff3ea867136c0d": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "3ee2e4ab7bac20e48c6d4e17e3c33d5a6631ddd9": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "94ea9f5b050c985a04c70038b7f583e851786398": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "c0727348d63b49efdee6d4f4ee56460c35a8e642": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "590aa59c37519ad2c571c00b69097fe22e7099bd": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "985e6015d71fab7716e2a7a5fd69521163fbd03c": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "df584babc0c2117d93366992e28a559e670a0aa3": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "2ed56d4142fb63b1bd6e49529cd82633cf57e06e": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "3c790ab64eb8f55d811222df565db73745773248": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "89f76e0037bcec6e662d77e220d026110636a95f": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "9345bc3d5adb914ef9a6ac218980ce2d91751f25": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "4e2f6265eb8ae315ed645142f62e4a3b7992d1f5": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "55fd25416122d30e104eb337bfc599ec47f97f52": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "fb6f538d920fe1d923883d0a09193363c8f3e6f5": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "f1a8bafabed70e2048226a1cae1502811ddfa447": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "546ccf5814485935b374368a94e607654e460ab3": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "daf79bf4a905ba195adb4d74a79867c99daefaa1": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "f2c09d53882543f9f43a09a932fc40d91b6e06ed": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "57bbf6773523e81c4b7dd8df08018e8afe3b1f2e": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "0a99c20a734185ab551aa56f208d848570f62353": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "aeb57bc04fe469ce764725110d26b914c62e2262": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "fc9adbb391f55f5e63048fae6bb7552d1a86c697": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "b079fba84212073d34fde6f6547a2f5a0af9b328": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "795246c7850423dbd09edee7aef46ff835f2d112": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "e200f66ded801a91d499113e6b72c2f856d9e731": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "cd15a57a5e02dd4d37a6ba9f947c64ab8674396f": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "570efc9d6645e6b5b65df1f919bc1c19e6b29641": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "53c9435183d6094d62afb39ffa59fe7edcccb7bb": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "27f03dbc25ba203385ae659d25a9d2bf4763e692": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "38fefa64718cf3697f026258f351b0a69c108db5": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "0e2656b93836e16e50d8eb81118097bbdf968806": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "262781b732a8f5e35845e2e6a02334cdab541ced": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "a8503a29326679030d7e254a5a26786dcba2c2be": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "f920c65bcc244afe5e47c7f0c63eedaab0f24d91": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "d1281565ff029dbe0436af2904f6fb4645ef82c3": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "21756255374f6c09e9f689570f57e81193154810": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "016cbfa5f479549c64c51b471b6829d0e6e675f0": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "6fa7310009ccf569458f4c4903648e82c578f9d6": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "c4f7d03138fe7d4b4aa9ef6640343769bcb5c8ac": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "94182b7134d0bce7a3218786e491850f6cd25bbf": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "3b31ecc2b1dff2f3b6df9e8bc425239d662dffa2": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "affda23876879a5e5cbe4de77408823f93228ccb": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "f6b4b7b3e3605dbf1c5c2732e877ecaa2657318e": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "e84e875e14ee38ab983daf8693a1c04c94750c5e": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "a4f3ef3483ca91b1ec71de7692dd01628a1ad2f4": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "66f424cfafbcba891c239f4788d934ac3e280fa2": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "641d051e978efe8cb8ff1bada29fc03b2ab1e801": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "8c1d7ed8d5c2e0ae46e88c5cd081185985a25fe4": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "1aa06666ab9ae724036ed269ca1cbbdb3597ce80": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "2fac7f07aadf3e4253aa3d835981b40ec7a791e7": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "0a6fd16b5260caaf71b3267ad8bd4559e5501212": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "73ca33601433306e7408df1d70794e05ee8d41a9": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "a0b7bc462357cf2fddd7ce8bf04c6697360e0e43": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "ee6d495af4759266bc00a90820f217da9e02a705": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "0672f621e5567ed79684e93743a6683b90177f0b": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "081663e522cd5d62922c264c8f6e44d413c8c326": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "1d18522a99847617cf67ab153e9cad5174fd0be3": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "135e452509ae05e5d248d612c02b8c3df4d64359": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "9a6644ec7bd82e93a767739db86f45696ae2326d": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "d34f126ecb3e4135b3f6b6c36bcb78cf57be205c": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "88b2c47904e1bece0b0bfb2cac502cb8672d94bf": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "3198d1212757952b9a7b5a43a00e791e61d68ff9": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "38e8202b9e45810cd29c56a3bacf05cbcbe198f2": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "de7c7ca7afa223e35754827bbcfb5937ebd1b054": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "55e435c741c1d8d947f5823d3b97c9775ebff50e": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "1bb25adbdc3b907657fc14002c45ab6e86313573": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "9ffb266ccb7fe096dc11233e7970e1ea70c6fce5": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "d43c8e77763e47850e25a08068db79ad974e3010": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "8c0d9179cd01ad1b71df169509d0a349da713a13": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "b93925e03e267350e0bd6ab5ac984dcdc70f8453": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "bfe0584356f0eb278e6e6e469808d315abff3fc0": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "893b153cb396de02632a3b8907dc7ffe778fac4b": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "92573f1f30001848ebabfe87045f0d7b1a628268": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "644c14253da1c5ed2e9499b773a0c41870decc3b": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "92741b2116e94371914540f70491fa83918e594d": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "1f196f527695071509452e9784a996593198f612": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "c3bb6ae53539b5da47dca79f08e1ce5cb015257e": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "9c1ac5fedd02bea31c8e775d1fca1e5bc64a4a86": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "56abb626a4d85f3899264aedf84b5f0ba5f091d6": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "1a8e79c9bb4b24ad96224281b04d45702bb27276": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "1ba61e8e0c3452e662b1f6bed77f65a061b2eb79": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "8784a1f850cd81ec9a8fa23239afa27223f0218c": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "3888cd53471d23e408e9ad021f185f262997c705": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "d216206fcd6c7f16326f91a8c2503dca8171caff": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "89f45830bc048a551bd865e18dee411ade2ca13a": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "e36ffe1f863d65d9a1ba2ac565e8e7a1c2843d4b": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "5f6cf96fa5d94e8838319c5af040bb24bfbe53da": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "e2767059481db6d668c7209c197a319aa25c9c0c": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "e4790fea723452a1f5c9fa8fb404d5a99102eb5e": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "7a1560be7266795a546078b723562d0b9bdc6ea8": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "36f657165ff86da968443aa02a6e82c92cf83650": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "dddf066e90770b16d6c329b350dc53c3571adfdd": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "a2a2aac6adae5b330ee50818fdcfee49088b1910": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "1cf61d6df7dae04e5270a6e921e01e11bbc5d3b5": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "06f204f794e8eead3e0769b6e7e1ccfc62395129": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "4ec0d9d7330659be202da2006fba2935504681a7": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "091a7f6ffaf3e3626065824f6f4ac54bc7d76617": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "92a1cce4ca4542dd0ab473a498fa3a8bd7ba0e36": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "4cea9f307aaed9858942a2ae5eac984c44c68256": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "56fac5fdb17aaa94b4569a6a9c6d8dd9bcc7845e": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "f1a89ce3b2f6f86c743b7964095296562c309c00": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "0c39c5d658daed825635b524893e16394890c635": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "22704e657f1b4fbe43d388aa78852e532534e6c3": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "d2d5c0e4a4f8452d6847352dbd69c821b48192f8": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "c2626cf1f2bf26c420c7a748bbb36339d6e4bed9": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "2043a923cfd703ac3d4d1f46472b9fd17f7b3a93": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "4202a98ec50f243fdae53738b19bdf61429c46cd": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "7f345fc2d40bca2e8e3917c2287d014b7211c258": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "2c7964d9c908bc62981493b90ef943dd9da7a688": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "6b203f518743316287499a791db66990bca9bbf9": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "fcb8693c52af63fe410ed4b2d63e1ca45bf07079": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "9620d5c5e811c49e4a602a5110fb5d048ca8ab22": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "512e0ec07696366753f7be037cdc0503b72e73a0": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "b1f8f492b9a564eaf6992083849e5c4923a4378e": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "c065f7d1257d2162357cc3ed11c2d009d88cef64": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "3966dce6dfc3863550e802c528309d880dc5f68a": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "4a4069d0c25e26d7c725e3093d454cb4b99adbd6": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "b3edcce8e75781f4c47575c2c8f626e20c271d68": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "c270bd141d2bea854951b1feccd3eccf48040517": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "357fae18aea8b410d7032dcf9d60d8636c9def90": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "0316e18f915f478e875b8670fea40483840f84e9": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "5e8a7078eb5eba6662f6b6975d4c3ad0663a6cb6": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "4c01fd96c84a9aed3c06bced64681451d3632378": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "99fbc30f928885c2defbb9c06c8c49ac2d8bff17": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "a8d4c68bdc7a3a3822a84bb7d4a3f879da9726f8": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "c79e6996869f21867da3adbbf1afce0cf40f90d8": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "2d01d1431a0131056685631406a5d22e9bed192f": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "31174ba434c900728ae704dcc15dc8aef8fa4e99": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "527e5f8e4cd8be5fa3a2e261f7f4101ec2be636f": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "52a8101cd254c34404986f3db6f135eeb7cea631": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "1d5ce4c56296857c6bce943a8ff0edd4659e55f2": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "aae4a24726bacc87265df492b4b3ebf440275d8d": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "36f40689cc337cae801914d75770a7d9dfcf3336": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "acf743fa6b311c0555d1182b875fa34109a5d9c9": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "31328b8f66e7e92e0c5433edfbdead2e40f24716": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "9acd03f0d945e0c5af5a4a0e5ea39d1e8d2f432d": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "43ef087efdaac7f4b75973875be5ab5d8997b6cc": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "d10de87e09fe3dcdec315d667e736522cda86bda": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "d5151ddc90b7fad14261d669d2a61f1e759e9b1a": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "390c6924dd5d5e5f8eac101ad6c89c38fb0642a5": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "1c4d658be2883b4f411419803f8a62b742c632f0": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "ce9cd8d168db8cdbee5d499e429d6b55af95cc3e": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "30595ccdaaf9d8983f30a861dafc56de95095ce1": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "ea0ae27233dc651599b6ad63520173acae5ff3a2": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "3d6263aafbcb1cd8f1df581e2080646d0a7b2908": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "fa635f5ecd3053a1207a8844ed43849094e31623": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "b73b531d6239d1499854d128444737e1c4866879": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "5701de4fd82bfdd12c45e63e693c1d8116846c22": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "a1333786a9daa797a62516849f8a67ae48de5d0e": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "aaa2bdff7b98988bbcd8c53a3c4550e236a3be53": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "32f478c1cd98be3ff80fb249b4416850464be114": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "f790bf75d80bfea8d0eac5402d6bfcbd913cd9c6": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "04afed133816104d4064046a56d36db9d5e7ba85": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "51363668ed0caeb304bc7382193e22ae4680cc32": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "d0c7f822f74d8189b10ff34587afe1fbe36ea650": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "ad29d65229aaae97f4400ed29915f5deb7764ae2": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "39f2ba3b5607f69fcb429f7d2057b269f258fa7a": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "c59afd70f05af8c3e02a12fc313e3d1f0b8bce4e": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "e50cabf305a678384a9d7ddd0466dab6590b37a0": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "0e9841a3ccef2885acdd700cd62c47b80a5b3ea5": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "ceaa60eff67312e1cea4bcbcf062fe8a19fdac1a": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "500ae6940957528de124f0b2cd087b859542c27d": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "6cfcbeffad957285ac2690be069dccc4742b838d": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "6e797f5e7d09b8438c272960154aeb4d5d72e156": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "79f30041a130791b69918e1138b5c7fd746d9f62": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "5ab7bf37b21d2105f83f10e8548fe7f8e4bf6a6e": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "9adbf2b361f1745d3799e2aacf8cf18885f4f39e": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "b8e10ce9ef8b0690b250baf40decf51213f71a28": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "869ccf44217e7a4e9ab2cfd1a54c757734e2bd95": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "1dda552bbd6316997b3895ead77755f3d5c0f927": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "7e2e64e8561a3f10c4106fd05eb13478c7b3828a": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "2bab817c6b8cb5b2ddf10f75470082fbb91af523": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "683509be601e269828b8c3a58b4bd56793a9bd89": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "e091701bcd087aa2e405d8aba3b2c21d398b773d": {"commitUser": "WalkerWatch", "commitGHEventType": "referenced"}, "fa10576bc6ae3984415683f1e47e15710a4632c0": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "beff48c69cf6a81b15f696b69ce7e937f86bae04": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "75c5793f38f115e41252e92d49fc34fcdbd91cc0": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "be747c44e1a50c808368909361279414cc2b08a2": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "3a37386ae95ebcf188f88f50e526b7ce718fb59b": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "4bae04b62393c02180a114cfe25f0fda0844a3ce": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "b2fa9cd23ad6fe104c3475219e824b8b6949d3dd": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "f23d921ae3c33d2595f421a1d22d6b8371f669e9": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2016-02-16 23:34:35", "commitsDetails": [], "title": "Support javax.websocket version 1.1", "spoonStatsSummary": {}, "closed": "2017-07-13 17:40:03", "statsSkippedReason": "", "body": "migrated from Bugzilla [#467246](https://bugs.eclipse.org/bugs/show_bug.cgi?id=467246)\nstatus ASSIGNED severity _normal_ in component _websocket_ for _9.4.x_\nReported in version _9.4.0_ on platform _All_\nAssigned to: Joakim Erdfelt\n\nOn 2015-05-13 11:23:43 -0400, Joakim Erdfelt wrote:\n\n> Add support for the changes introduced in javax.websocket version 1.1\n\nOn 2016-01-22 08:10:59 -0500, Sergii Kabashniuk wrote:\n\n> Hello\n> I'm trying to add support of javax.websocket version 1.1\n> And I need some advice.\n> \n> This is my prototype of JsrSession.\n> \n> ```\n> @Override\n> public <T> void addMessageHandler(Class<T> clazz, MessageHandler.Whole<T> handler) {\n>     doAddMessageHandler(clazz, handler);\n> }\n> \n> @Override\n> public <T> void addMessageHandler(Class<T> clazz, MessageHandler.Partial<T> handler) {\n>     doAddMessageHandler(clazz, handler);\n> }\n> \n> @Override\n> public void addMessageHandler(MessageHandler handler) throws IllegalStateException\n> {\n>     doAddMessageHandler(ReflectUtils.findGenericClassFor(MessageHandler.class, handler.getClass()), handler);\n> }\n> private <T> void doAddMessageHandler(Class<T> clazz, MessageHandler handler) {\n>     Objects.requireNonNull(handler, \"MessageHandler cannot be null\");\n> \n>     synchronized (wrappers)\n>     {\n>         for (MessageHandlerMetadata metadata : messageHandlerFactory.getMetadata(clazz))\n>         {\n>             DecoderFactory.Wrapper wrapper = decoderFactory.getWrapperFor(metadata.getMessageClass());\n>             if (wrapper == null)\n>             {\n>                 StringBuilder err = new StringBuilder();\n>                 err.append(\"Unable to find decoder for type <\");\n>                 err.append(metadata.getMessageClass().getName());\n> ```\n> \n> The part where I have problems is here messageHandlerFactory.getMetadata(clazz).\n> Joakim can you help me? Is there any simple utility method that can allow to move forward.\n> Or this code need more complex refactorings.\n> Can you help me with some inputs?\n\nOn 2016-02-08 09:45:59 -0500, Joakim Erdfelt wrote:\n\n> @Sergii\n> \n> What are you trying to do?\n\nOn 2016-02-08 09:58:45 -0500, Sergii Kabashniuk wrote:\n\n> I'm trying to implement two methods  ( addMessageHandler) what was added in websocket 1.1 API\n> See more\n> https://jcp.org/aboutJava/communityprocess/maintenance/jsr356/websocket-1.1-changes.txt\n> \n> To do that I've added fourth method \n> \n> private <T> void doAddMessageHandler(Class<T> clazz, MessageHandler handler)\n> \n> And trying to call it from original one.\n> My question is around             \n> \n> for (MessageHandlerMetadata metadata : messageHandlerFactory.getMetadata(clazz))\n> \n> I don't know how to handle it.\n\nOn 2016-02-08 13:33:45 -0500, Joakim Erdfelt wrote:\n\n> (In reply to Sergii Kabashniuk from comment # 3)\n> \n> > I'm trying to implement two methods  ( addMessageHandler) what was added in\n> > websocket 1.1 API\n> > See more\n> > https://jcp.org/aboutJava/communityprocess/maintenance/jsr356/websocket-1.1-\n> > changes.txt\n> > \n> > To do that I've added fourth method \n> > \n> > private <T> void doAddMessageHandler(Class<T> clazz, MessageHandler handler)\n> > \n> > And trying to call it from original one.\n> > My question is around             \n> > \n> > for (MessageHandlerMetadata metadata :\n> > messageHandlerFactory.getMetadata(clazz))\n> > \n> > I don't know how to handle it.\n> \n> This is especially tricky to implement.\n> \n> The existing tracking is based on classes.\n> The MessageHandlerFactory tracks based on MessageHandler classes, and each one of those can be 1 or 2 MessageHandler implementations. (one for TEXT and one for BINARY is supported)\n> \n> So that if you had something like ...\n> \n> public class FooHandler implements Whole<String>, Whole<ByteBuffer> {\n> }\n> \n> then you could use the same FooHandler for either TEXT or BINARY.\n> \n> With lamda expressions, this relationship is no longer true.\n> There's no class with any sanity, the tracking of class to message handler is irrelevant.\n> There's no need really with lamdas, but the MessageHandlerFactory is integral to how this functions, and with lamdas we have to somehow bypass this step entirely.  This is going to be potentially awful for performance, as it essentially tosses out any intelligence useful for caching or object reuse (adding to the time to establish an endpoint, and increasing GC churn)\n\nOn 2016-02-09 09:14:52 -0500, Joakim Erdfelt wrote:\n\n> Bumping to Jetty 9.4.0, as the changes to support this are turning out to be far too dramatic.\n", "ttf": 512.0002777777778, "url": "https://github.com/eclipse/jetty.project/issues/207"}, {"labels": ["Bug"], "closed": "2019-09-11 07:52:03", "body": "migrated from Bugzilla [#465864](https://bugs.eclipse.org/bugs/show_bug.cgi?id=465864)\nstatus ASSIGNED severity _normal_ in component _server_ for _9.3.x_\nReported in version _9.2.10_ on platform _All_\nAssigned to: Project Inbox\n\nOn 2015-04-29 18:32:58 -0400, Jan Bartel wrote:\n\n> Eg URL ContextHandler.getResource(String) creates a resource but does not use it any further, so perhaps Resource.close() could be called. Of course, whether any urlconnections inside the resource get closed will depend on the setting of useCaches.\n\nOn 2015-07-08 02:47:44 -0400, Greg Wilkins wrote:\n\n> Better yet, let's remove the need to close resources by making them immutable\n", "commits": {}, "title": "Evaluate if there are more places where Resource.close() could be called", "created": "2016-02-16 23:34:32", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/206", "commitsDetails": [], "ttf": 1302.0002777777777}, {"labels": ["Bug"], "closed": "2016-04-30 00:26:30", "body": "migrated from Bugzilla [#465162](https://bugs.eclipse.org/bugs/show_bug.cgi?id=465162)\nstatus ASSIGNED severity _normal_ in component _server_ for _9.3.x_\nReported in version _9.2.5_ on platform _PC_\nAssigned to: Jan Bartel\n\nOn 2015-04-22 02:37:55 -0400, yang kun wrote:\n\n> The _cookieSet field's getter/setter method is:\n> \n> // is not synchronized\n> public void setCookieSet(long ms) {\n>   _cookieSet = ms;\n> }\n> \n> public synchronized long getCookieSet() {\n>   return _cookieSet;\n> }\n> \n>   Others, these fields can use volatile, then remove getter/setter's synchronized.\n", "commits": {}, "title": "JDBCSessionManager.Session#setCookieSet() is not synchronized", "created": "2016-02-16 23:34:21", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/205", "commitsDetails": [], "ttf": 73.00027777777778}, {"labels": ["Bug"], "closed": "2016-02-17 14:16:37", "body": "migrated from Bugzilla [#464797](https://bugs.eclipse.org/bugs/show_bug.cgi?id=464797)\nstatus ASSIGNED severity _normal_ in component _server_ for _9.3.x_\nReported in version _9.3.0_ on platform _PC_\nAssigned to: Greg Wilkins\n\nOriginal attachment names and IDs:\n- _[error.pcapng](https://bugs.eclipse.org/bugs//attachment.cgi?id=252583)_ (ID 252583)\n- _[myfix.pcapng](https://bugs.eclipse.org/bugs//attachment.cgi?id=252584)_ (ID 252584)\n\nOn 2015-04-16 09:27:33 -0400, Dmitry Shmyglev wrote:\n\n> Cause:\n> New apache v2.4.10 used 'HTTP-100 continue' to ping accessibility of application server. It add header 'Expect: 100-continue', send request to jetty (in my case) and wait 'HTTP/1.1 100 Continue' reply.\n> \n> Reproduce:\n> Send POST-request with some body and header 'Expect: 100-continue'.\n> \n> Error's source:\n> \n> When I call Request.getInputStream, it's allways call method HttpChannelOverHttp.continue100(int available). But 'avaiable' value in this time > 0.\n> Method continue100 reseted internal variable '_expect100Continue' and does nothing.\n> \n> It is necessary to swap lines '_expect100Continue = false' and 'if (available == 0)' and call this method in a second time from HttpInputOverHTTP.close();\n> \n> P.S. Sorry, cant pull git sources.\n\nOn 2015-04-19 21:01:03 -0400, Greg Wilkins wrote:\n\n> Dmitry,\n> \n> if there are available bytes to be read, then the client must have already sent the POST body.  In that case, Jetty should not send the 100 continues.\n> \n> Specifically RFC 7231 says:\n> \n>    o  A server MAY omit sending a 100 (Continue) response if it has\n>       already received some or all of the message body for the\n>       corresponding request, or if the framing indicates that there is\n>       no message body.\n\nOn 2015-04-20 03:54:00 -0400, Dmitry Shmyglev wrote:\n\n> Hi, Greg!\n> \n> Yes, I understand.\n> However it's necessary to send 100-continue when all body data was read (i.e. InputStream was closed).\n> \n> Now server does not send 100-continue at all when body data is submited.\n> \n> For this reason there are problems during the work with apache mod_proxy_http (v 2.4.10): It waits for the answer 100-continue during a small timeout and answers to client 'Server not avaiable now'.\n\nOn 2015-04-21 01:06:26 -0400, Greg Wilkins wrote:\n\n> (In reply to Dmitry Shmyglev from comment # 2)\n> \n> > However it's necessary to send 100-continue when all body data was read\n> > (i.e. InputStream was closed).\n> \n> I don't understand?  Why is it necessary? The RFC says that the server MAY omit sending 100-continue.\n> \n> > Now server does not send 100-continue at all when body data is submited.\n> \n> Correct. That is allowed by the RFC.\n> \n> > For this reason there are problems during the work with apache\n> > mod_proxy_http (v 2.4.10): It waits for the answer 100-continue during a\n> > small timeout and answers to client 'Server not avaiable now'.\n> \n> Either I am not understanding your example correctly or this is a bug with apache mod_proxy_http\n> \n> Can you confirm that the client is sending the POST body EVEN IF the 100-continues is not sent?\n\nOn 2015-04-21 10:51:05 -0400, Dmitry Shmyglev wrote:\n\n> Created attachment 252583\n> tcpdump showing an error\n\nOn 2015-04-21 10:51:24 -0400, Dmitry Shmyglev wrote:\n\n> Created attachment 252584\n> tcpdump with my fix\n\nOn 2015-04-21 10:53:44 -0400, Dmitry Shmyglev wrote:\n\n> Client sent request with body and 'Expect: 100-continue' header.\n> Ok, thanks, I understand that you can (not must) send this reply by RFC.\n> \n> Let's me describe my live configuration.\n> \n> I have 2 application servers on jetty (9.3.0.M2) and apache (as load balancer).\n> After installing last security updates I saw 'server not avaiable' reply on client when request is processing by application server too long (10-15 sec.).\n> \n> My client sent request to apache.\n> Apache includes header 'Expect: 100-continue' in request and forward it to jetty.\n> Jetty processed request and return answer (after 10-15 sec).\n> But apache expects the 100-continue response during 1-2 sec and 'server not awaiable' answers.\n> When I overrided some jetty classes and started answering 100-continue immediately after the body was read, everything started working perfectly.\n> \n> As I understand, apache uses this technology for definition of that, live or not now application server.\n> \n> I reproduced this error locally and attached some tcpdumps, please, look at it.\n> 1. error.pcapng:\n>    packet# 4: client sent request.\n>    packat# 13: apache added header 'Excpect: 100-continue' and resended it to jetty.\n>    packet# 16: apache returned error to client: 'timeout awaiting 100-continue'\n>    packet# 22: jetty returned HTTP-200 OK\n> 2. myfix.pcapng:\n>    packet# 4: client sent request.\n>    packat# 13: apache added header 'Excpect: 100-continue' and resended it to jetty.\n>    packet# 15: after I read body, I sent '100-continue' to apache. \n>    Apache understands that the server lives, and waits for the answer so much, how many it is necessary\n>    packet# 17: jetty returned HTTP-200 OK\n>    packet# 19: apache returned jetty's reply to client.\n\nOn 2015-04-21 18:42:50 -0400, Greg Wilkins wrote:\n\n> Dmitry,\n> \n> thanks for the tcpdump.\n> \n> This is definitely a bug with apache.  Your trace clearly shows a single frame that contains both expect:100 and the message body.   In that situation, the server is not required to send the 100 continue response.\n> \n> Can you raise this with apache and link the bug report here.   Hopefully they will undertake to fix it.   If not, then we can consider adding a configuration option to HttpConfiguration to force a 100 continue response even if content is available.\n\nOn 2015-04-24 04:16:23 -0400, Dmitry Shmyglev wrote:\n\n> Hi, Greg.\n> \n> I submited bugreport to apache team.\n> \n> https://bz.apache.org/bugzilla/show_bug.cgi?id=57853\n", "commits": {}, "title": "Jetty does not send 100-continue when body of POST-request is submited", "created": "2016-02-16 23:34:10", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/204", "commitsDetails": [], "ttf": 0.0002777777777777778}, {"labels": ["Bug"], "closed": "2018-09-11 18:13:43", "body": "migrated from Bugzilla [#464331](https://bugs.eclipse.org/bugs/show_bug.cgi?id=464331)\nstatus ASSIGNED severity _normal_ in component _cdi_ for _9.3.x_\nReported in version _9.3.0_ on platform _All_\nAssigned to: Greg Wilkins\n\nOn 2015-04-09 16:47:11 -0400, Joakim Erdfelt wrote:\n\n> For a successful implementation of our Server Enabled CDI, we will need a means to disable webapp instantiated / included CDI implementations and use the one from the Server instead.\n> \n> This means that the weld ServletContainerInitializer and Listeners should not execute.\n> \n> See classes in weld-servlet-core.jar ...\n> \n> org.jboss.weld.environment.servlet.EnhancedListener (this is the declared CDI entry point)\n> \n> org.jboss.weld.environment.servlet.Listener (this is the recommended servlet listener added to the webapp's WEB-INF/web.xml)\n", "commits": {}, "title": "When using Server Enabled CDI, webapp included impls should not run", "created": "2016-02-16 23:33:33", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/200", "commitsDetails": [], "ttf": 937.0002777777778}, {"labels": ["Bug"], "closed": "2017-04-28 11:33:01", "body": "migrated from Bugzilla [#463506](https://bugs.eclipse.org/bugs/show_bug.cgi?id=463506)\nstatus ASSIGNED severity _normal_ in component _server_ for _9.3.x_\nReported in version _9.2.5_ on platform _All_\nAssigned to: Greg Wilkins\n\nOn 2015-03-30 13:34:31 -0400, Nicolas Bielza wrote:\n\n> In the access logs, asynchronous requests are stripped off their parameters.\n> \n> I tracked this to org.eclipse.jetty.server.Server.handleAsync(HttpChannel<?> connection) where the uri for the base request is replaced by the truncated version (at line 535).\n", "commits": {}, "title": "RequestLogHandler does not log query parameters for async requests", "created": "2016-02-16 23:32:34", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/194", "commitsDetails": [], "ttf": 436.0002777777778}, {"labels": ["Bug"], "closed": "2016-03-22 14:59:16", "body": "migrated from Bugzilla [#463244](https://bugs.eclipse.org/bugs/show_bug.cgi?id=463244)\nstatus ASSIGNED severity _normal_ in component _server_ for _9.2.x_\nReported in version _9.2.9_ on platform _PC_\nAssigned to: Greg Wilkins\n\nOriginal attachment names and IDs:\n- _[jetty_using_2_full_processors.png](https://bugs.eclipse.org/bugs//attachment.cgi?id=251941)_ (ID 251941)\n- _[jetty_high_cpu.png](https://bugs.eclipse.org/bugs//attachment.cgi?id=253470)_ (ID 253470)\n\nOn 2015-03-26 20:17:20 -0400, Fabio Zadrozny wrote:\n\n> Created attachment 251941\n> Jetty 9.2.9.v20150224 using lots of CPU (windows 8.1 / Java jre1.8.0_25)\n> \n> Note that there was a previous \"closed invalid\" report (https://bugs.eclipse.org/bugs/show_bug.cgi?id=460242) which seems to be the same thing, yet, I can still reproduce this on 9.2.9 when running on Eclipse.\n> \n> The information I have is the following:\n> \n> JDT starts Jetty to show somethings using the Eclipse help infrastructure which in turn starts Jetty.\n> \n> Jetty then does nothing for quite a while behaving well (on Windows 8.1 / Java 1.8.25).\n> \n> Then, after being in idle mode for some time (i.e.: I just leave Eclipse open in the computer for say 1 hour) it suddenly decides to use a lot of CPU, so, when I come back it's using 50% of the computer power in the Jetty idle loop (in my case that's 2 full CPUs) -- as the profile measurement shows -- at that point, no matter what I do it doesn't come back to normal (restarting Eclipse is the only solution).\n> \n> It's as if Java is suddenly optimizing something in the Jetty idle loop which makes it run too fast... I'm having this issue since Jetty 8.x, so, I'm inclined to think that the problem is the approach being used on Jetty on a Java 8 jre (polling can definitely lead to a high cpu usage and the profiler clearly shows this is happening in its idle loop).\n> \n> Ideas? Anything else I can add to this to help to have this fixed?\n\nOn 2015-03-26 21:16:52 -0400, David Williams wrote:\n\n> (In reply to Fabio Zadrozny from comment # 0)\n> \n> > Ideas? Anything else I can add to this to help to have this fixed?\n> \n> I suggest you try with \"JIT turned off\" ... as you said, \"It's as if Java is suddenly optimizing something  ...\" and JIT is a common example of that. (VMs often do not \"JIT a method\" until it's been called, like 40,000 times, or similar). \n> \n> And ... you're using the Oracle VM? If so, their \"JIT option specs for WIndows Java 8' is here: \n> \n> http://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html#BABDDFII\n> \n> and there it says to run in \"interpreted mode only\" (i.e. no JIT) is to use this option on command line. \n> \n> -Xint\n> \n> If JIT is suspected, as I've debugged in the past, it's convenient to first demonstrate \"no problem\" by first demonstrating there is no problem with \"no JIT at all\" ... but, that changes so much, it is not very definitive. So subsequent steps would be to exclude, ideally, just exactly one method from \"being JITed\" and then that's pretty narrow. There's other things you can play with, such as have that method JITed aggressively, etc., so you don't have to wait an hour :) [But, again, there's no guarantee, having it JITed aggressively might change the way something else is JITed, and then maybe the bug would no longer occur, and on and on ...]\n> \n> Good luck, JIT problems are notoriously hard to debug.\n\nOn 2015-03-27 12:29:53 -0400, David Williams wrote:\n\n> For the record, I did try to reproduce using Eclipse SDK, and could not. I used milestone 6 \"plain\" SDK, with fresh workspace, and just one Java class ... enough to bring up a \"tool tip\" on the Java. Have let it idle, after that, with no change in \"CPU consumption\" (according to Windows \"resource manager\"). \n> \n> I am running it on Windows 7 (there's one difference). And, using Oracle's JDK 1.8 _31 (another small difference?) The -version says HotSpot is running in \"mixed mode\" (not exactly sure what that means ... but, just providing to compare notes) and says \"hot spot\" is \"64-Bit Server VM (build 25.31-b07). \n> \n> I also used no other \"vm args\" other than defaults. \n> \n> Fabio, do you use any other VM arguments? Aggressive GC or anything specified?\n\nOn 2015-03-27 13:23:32 -0400, Fabio Zadrozny wrote:\n\n> I have no custom vmargs (Eclipse just passes some -Xms/-Xmx to raise the memory, but that's all).\n> \n> I'll try upgrading to 1.8.0_31 to see if that makes a difference here...\n\nOn 2015-05-13 19:08:49 -0400, Fabio Zadrozny wrote:\n\n> Created attachment 253470\n> Jetty still using lots of CPU on Java 7\n> \n> As a note, I still have the same issue, even going to other java versions (I just went back to Java 7 -- 1.7.0_55 -- and still got the high cpu usage issue -- in Windows 8.1).\n> \n> -- as a second note, all the java versions I'm using were x64 versions (i.e.: Java HotSpot(TM) 64-Bit Server VM).\n> \n> Adding a new sampling snapshot (which shows all the time on the jetty SelectorManager)... \n> \n> As a note, I'm currently having to restart Eclipse at least 2-3 times a day because of this issue. Do you think there's something which could be customized to give some hint to jetty to be less performant? (I don't really need much speed on Jetty when using it inside Eclipse).\n", "commits": {}, "title": "Eclipse consumes 100% CPU on Jetty 9.2.9 idle loop", "created": "2016-02-16 23:32:16", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/191", "commitsDetails": [], "ttf": 34.000277777777775}, {"labels": ["Bug"], "closed": "2016-06-22 12:46:04", "body": "migrated from Bugzilla [#462840](https://bugs.eclipse.org/bugs/show_bug.cgi?id=462840)\nstatus ASSIGNED severity _minor_ in component _server_ for _9.2.x_\nReported in version _unspecified_ on platform _All_\nAssigned to: Greg Wilkins\n\nOriginal attachment names and IDs:\n- _[Jetty9CleanStartLogs](https://bugs.eclipse.org/bugs//attachment.cgi?id=251950)_ (ID 251950)\n- _[Jetty9IBM javaStartError1.txt](https://bugs.eclipse.org/bugs//attachment.cgi?id=251951)_ (ID 251951)\n- _[WebAppAndjettyConfiguration.txt](https://bugs.eclipse.org/bugs//attachment.cgi?id=251952)_ (ID 251952)\n\nOn 2015-03-23 08:05:46 -0400, Ravi Kini wrote:\n\n> Sometimes jetty does not launche the webapp if java configured is IBM java.\n> \n> Jetty Configuration: Deploy a test app in custom path which is only accessible on https. All http request is redirected to https.\n> \n> After deploying an application with the above configuration, sometimes, the Jetty server starts gracefully and we are able to launch the application in the web-browser.  But sometimes, we see a error message when starting Jetty Server and the web-application does not get launched.  Also, sometimes there are no error messages seen at the Jetty server console, but still the web-app does not launch.  The solution is to restart the Jetty server and try to launch the application again.\n> \n> Versions:\n> Jetty Version: Jetty 8 or 9\n> Java Version: IBM 7\n> \n> Other Information:\n> This issue is seen only when using IBM Java.  No issue is seen when using Open Java.\n\nOn 2015-03-23 09:48:24 -0400, Jesse McConnell wrote:\n\n> You will need to track down some additional information for us to track this sort of intermittent start up issue, there is simply not enough to go on here.\n> \n> I would enable debug logging for everything and see about restarting it over and over until you trigger the error.\n\nOn 2015-03-27 07:04:32 -0400, Ravi Kini wrote:\n\n> We have enabled the debug log and captured the logs.  Attaching the logs and the sample web-app files.\n> 1. File \"WebAppAndjettyConfiguration\": This file has Web app details and jetty 9 configuration to deploy the web app.\n> 2. File \"Jetty9CleanStartLogs\": This file has jetty 9 start logs. Till Line # 725 indicates that jetty start has no error. But when UI was accessed in browser, error was seen in logs, refer line # 1534. The UI did not launch.\n> 3. File \"Jetty9IBM javaStartError1\": This file has jetty 9 logs. With same configuration, jetty start gave an error. Again, the UI did not launch.\n> 4. Many time with clean start jetty logs, webapp was accessible using browser without an error.\n> \n> Note that the problem is seen only when IBM Java is used.  Also, the issue is intermittent, so jetty restart has to be done multiple times to reproduce the issue and at every restart, the UI needs to be launched.\n\nOn 2015-03-27 07:07:27 -0400, Ravi Kini wrote:\n\n> Created attachment 251950\n> Jetty logs when the jetty server start did not show any error\n\nOn 2015-03-27 07:08:33 -0400, Ravi Kini wrote:\n\n> Created attachment 251951\n> Jetty server start gave an error message\n\nOn 2015-03-27 07:09:00 -0400, Ravi Kini wrote:\n\n> Created attachment 251952\n> Sample web-app files merged in one file\n", "commits": {}, "title": "Sometimes jetty does not launche webapp if java configured is IBM java", "created": "2016-02-16 23:32:10", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/190", "commitsDetails": [], "ttf": 126.00027777777778}, {"labels": ["Bug"], "closed": "2016-03-16 10:00:48", "body": "migrated from Bugzilla [#462653](https://bugs.eclipse.org/bugs/show_bug.cgi?id=462653)\nstatus ASSIGNED severity _normal_ in component _server_ for _9.2.x_\nReported in version _9.2.9_ on platform _PC_\nAssigned to: Simone Bordet\n\nOn 2015-03-20 06:38:52 -0400, Simon Oberhammer wrote:\n\n> Defaulting allowCredentials=true is dangerous because it allows foreign scripts to access the cookie values. It's not just that the client can send the cookies (as was discussed in # 355103) but it also allows JavaScript from a foreign domain to read the cookie values (they can read the whole response).\n> \n> I would have expected it to default to false and only allow cookie requests from foreign origins if the server maintainer decides to explictly allow it.\n> ---\n> \n> Defaulting to true was discused in https://bugs.eclipse.org/bugs/show_bug.cgi?id=355103 and is currently implemented (although the javadoc says the default is false) https://github.com/eclipse/jetty.project/blob/master/jetty-servlets/src/main/java/org/eclipse/jetty/servlets/CrossOriginFilter.java#L186\n\nOn 2015-03-25 05:21:28 -0400, Simone Bordet wrote:\n\n> There are 2 domains, a.com and b.com.\n> You control CORS on b.com.\n> \n> A script downloaded from a.com now makes a XHR request to b.com.\n> If you don't want to accept requests from scripts downloaded from a.com, then in the CORS configuration for b.com you don't allow the a.com domain.\n> Currently all domains are allowed, so your reasoning about the \"openness\" of allowCredentials would apply even more to allowedOrigins.\n> \n> Same goes for methods, headers, etc.: they all have relaxed settings to allow easier interoperability of scripts, as opposed to negate everything and require a more complicated setup.\n> \n> If b.com is sending cookies that are security sensitive it can mark them as HttpOnly, and they won't be available from JavaScript.\n> If the cookie is meant to be read, but only from trusted scripts, then it's probably better to tune allowedOrigins.\n> \n> The relaxed settings proved to be less confusing for people (that in general are not aware of CORS, even after many years), while security aware people have the mean to strengthen the configuration.\n> \n> If we strengthen the default CORS configuration to allow nothing, forcing people to manually configure what they want, we are going to break lots of apps.\n> \n> I'm inclined to leave things as is.\n> \n> Another solution could be to deprecate CrossOriginFilter, and make it extend a new class CORSFilter which has all settings strict (no domain, no methods, no credentials, etc.). \n> \n> However, the chances that this deprecation gets noticed are only true for people using CrossOriginFilter in Jetty embedded; people that just declares it in web.xml won't be typically aware of the deprecation warning.\n> \n> Assigning to Greg for review.\n\nOn 2015-03-25 16:41:32 -0400, Simon Oberhammer wrote:\n\n> I understand your reasoning for keeping things working out of the box, and i wouldn't want to change that.\n> \n> My surprise was that allowedOrigins=\\* together with credentials flag true work. And that is only because Jetty always returns the literal request Origin (and never \"*\").\n> \n> CORS wouldn't allow those two defaults but jetty weakens the constraint and that felt dangerous to me. Of course, as you explained, httponly cookie would also help in this situation.\n> \n> I don't use any complex Origin matchers and can't say how much sense it would make to have a special case and respond with \"_\" (and not the request origin) if \"_\" is the value of allowedOrigins.\n> \n> This would be a breaking change but users will quickly find google help \"star origin not working with credentials\".\n\nOn 2015-03-25 19:40:24 -0400, Greg Wilkins wrote:\n\n> I've not got my head into this issue entirely and would need to find a few hours spare to really understand it all again.....  but I'll comment with partial understanding anyway:\n> \n> The CrossOriginFilter is not installed by default, so for this to be a problem it needs to be found, installed and configured by somebody.      So I don't think this is a huge problem either way.\n> \n> If we default to false, somebody can just change it to true and create the problem (if there is one).\n> \n> Thus I think the solution is probably documentation rather than defaults.   The javadoc and other documentation should make it clear that there are some dangerous configurations possible and using the filter has to be done with careful consideration.\n> \n> Specifically we should warn that the default is to allow all domains and that is not advised in production.   Perhaps we can do a runtime warning to that effect and if they really want all domains they have to explicitly configure that to turn off the warning???\n> \n> back to you Simone....  unless Simon wants to contribute a patch for our javadoc to this effect????\n\nOn 2015-03-26 16:07:25 -0400, Simon Oberhammer wrote:\n\n> I changed the bug title to better reflect the actual problem.\n> \n> I can prepare a documentation patch. \n> \n> My original confusion stemmed from this: CORS per spec 6.1.3 does not allow the following combination of headers as a security measure:\n> \n> ```\n> Access-Control-Allow-Origin: *\n> Access-Control-Allow-Credentials: true\n> ```\n> \n> Jetty behaves spec compliant and never never sends this combination even if allowedOrigins=\"*\". But this seems against the spirit of the spec but I can't spell out a security problem.\n> \n> 6.1.3 http://www.w3.org/TR/cors/#resource-requests\n", "commits": {}, "title": "CrossOriginFilter does not return \"*\" even if allowedOrigins=\"*\"", "created": "2016-02-16 23:32:03", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/189", "commitsDetails": [], "ttf": 28.00027777777778}, {"labels": ["Bug"], "closed": "2016-03-22 15:03:16", "body": "migrated from Bugzilla [#462071](https://bugs.eclipse.org/bugs/show_bug.cgi?id=462071)\nstatus ASSIGNED severity _normal_ in component _client_ for _9.2.x_\nReported in version _9.2.9_ on platform _PC_\nAssigned to: Simone Bordet\n\nOn 2015-03-13 09:53:09 -0400, Yuffie Chow wrote:\n\n> when the request cross the jetty9 from camel-2.15.0, it has two same key of some attributes in request header like the follows:\n> --------------this one has two User-Agent,Accept-Encoding\n> Accept-Encoding: gzip\n> User-Agent: Jetty/9.2.9.v20150224\n> Accept: _/_\n> Accept-Encoding: gzip, deflate, sdch\n> Accept-Language: zh-CN,zh;q=0.8\n> Cookie: ASP.NET_SessionId=jc412f45qx2mqw55ivfuhljm\n> dnt: 1\n> Referer: http://localhost:8080/MobileService/\n> User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2272.89 Safari/537.36\n> ## x-requested-with: XMLHttpRequest\n> \n> -------------------with two SAME cookie\n> Accept-Encoding: gzip\n> Content-Type: application/json\n> Accept: _/_\n> Accept-Encoding: gzip, deflate\n> Accept-Language: zh-CN,zh;q=0.8\n> Cookie: ASP.NET_SessionId=hv5tiq55muv1ki55esc2hi45\n> DNT: 1\n> Origin: chrome-extension://hgmloofddffdnphfgcellkdfbfbjeloo\n> User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2272.89 Safari/537.36\n> ## Cookie: ASP.NET_SessionId=hv5tiq55muv1ki55esc2hi45\n\nOn 2015-03-13 11:18:38 -0400, Simone Bordet wrote:\n\n> More information is needed, since as explained this could well be a Camel issue, not a Jetty issue.\n> \n> Do you have a reproducible test case ?\n\nOn 2015-03-13 14:07:29 -0400, Joakim Erdfelt wrote:\n\n> downgrading importance to normal (as this is not yet reproducible in normal operation of jetty-client)\n", "commits": {}, "title": "when the request cross the jetty9, it has two same key of some attributes in request header", "created": "2016-02-16 23:31:43", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/186", "commitsDetails": [], "ttf": 34.000277777777775}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "jmcc0nn3ll", "filteredCommits": ["4aa512e4682ad6521459bd9f23ac697df7d2b70d"], "commits": {"4aa512e4682ad6521459bd9f23ac697df7d2b70d": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2016-02-16 23:31:24", "commitsDetails": [{"commitMessage": "Issue #184 - Empty Realm for BasicAuthentication.\n\nFixed by allowing empty realms.\n", "commitParents": ["c8fea46e8f3a81bba2a98abc00a34f30d97c5e46"], "commitHash": "4aa512e4682ad6521459bd9f23ac697df7d2b70d", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpClientAuthenticationTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpClientAuthenticationTest.test_BasicEmptyRealm()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "AuthenticationProtocolHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.AuthenticationProtocolHandler", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "4aa512e4682ad6521459bd9f23ac697df7d2b70d tags/jetty-9.3.9.M0~6^2~7", "commitUser": "sbordet", "authoredDateTime": "2016-04-01 14:29:11", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 9, "filePath": "jetty-client/src/test/java/org/eclipse/jetty/client/HttpClientAuthenticationTest.java", "insertions": 9, "deletions": 0}, {"lines": 2, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/AuthenticationProtocolHandler.java", "insertions": 1, "deletions": 1}], "commitDateTime": "2016-04-01 14:29:11", "spoonStatsSkippedReason": ""}], "title": "Empty Realm for BasicAuthentication", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 2, "insertions": 1, "gitFilesChange": 1, "deletions": 1}, "closed": "2016-04-01 12:30:06", "statsSkippedReason": "", "body": "migrated from Bugzilla [#458258](https://bugs.eclipse.org/bugs/show_bug.cgi?id=458258)\nstatus ASSIGNED severity _normal_ in component _client_ for _9.2.x_\nReported in version _9.2.6_ on platform _PC_\nAssigned to: Simone Bordet\n\nOn 2015-01-23 09:17:25 -0500, Meno Abels wrote:\n\n> The Http Specs says the the realm is not manatory, for basicauthentication.\n> But the source in\n> \n> org.eclipse.jetty.client.AuthenticationProtocolHandler\n> ...\n> private static final Pattern WWW_AUTHENTICATE_PATTERN = Pattern.compile(\"([^\\s]+)\\s+realm=\\\"([^\\\"]+)\\\".*\", Pattern.CASE_INSENSITIVE);\n> 41  \n> ...\n> \n> is like this.\n> \n> If i send a request to a server that answers:\n> \n> HTTP/1.1 401 Unauthorized\n> Content-Type: text/plain\n> WWW-Authenticate: Basic realm=\"\"\n> Content-Length: 0\n> \n> these exception is thrown\n> \n> Exception in thread \"main\" java.util.concurrent.ExecutionException: org.eclipse.jetty.client.HttpResponseException: HTTP protocol violation: Authentication challenge without WWW-Authenticate header\n> \n> is there any chance to chance these to a http conform way?\n> \n> thx in advance\n> \n> meno\n\nOn 2015-06-08 18:47:32 -0400, Zhenyu Yang wrote:\n\n> want this fix too.\n", "changesInPackagesGIT": ["jetty-client/src/main/java/org/eclipse/jetty/client"], "changesInPackagesSPOON": ["org.eclipse.jetty.client.AuthenticationProtocolHandler"], "ttf": 44.000277777777775, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/184"}, {"labels": ["Bug"], "closed": "2016-11-02 04:47:53", "body": "migrated from Bugzilla [#458126](https://bugs.eclipse.org/bugs/show_bug.cgi?id=458126)\nstatus ASSIGNED severity _normal_ in component _server_ for _9.2.x_\nReported in version _9.3.0_ on platform _All_\nAssigned to: Jan Bartel\n\nOn 2015-01-22 07:18:16 -0500, Jan Bartel wrote:\n\n> As reported in https://bugs.eclipse.org/bugs/show_bug.cgi?id=455655 there is a problem reporting parsing errors of multipart/form-data to the servlet. Jetty-9.2 was modified to throw runtime exceptions when the servlet attempts to retrieve the parts with any of the getPart/Parts methods. \n> \n> The solution for jetty-9.3 may be to throw any exception much earlier in the request processing, so that servlet is not even entered if there is a serious formatting error in the multipart data.\n\nOn 2015-01-22 09:39:13 -0500, Bill Mair wrote:\n\n> It should be possible to register a factory to create parser instances that parse \"multipart/form-data\" (e.g. MultiPartInputStreamParser and MultiPartInputStreamParserFactory).\n> \n> The current implementation should be changed to implement the interface and if no Factory has been registered by the servlet then the default implementation should be used.\n> \n> This would allow servlets to parse and verify the data and compensate for erroneous input.\n> \n> Maybe some kind of Content-Type based request processor registration already exists?\n", "commits": {}, "title": "Parse multipart/form-data before it enters the servlet", "created": "2016-02-16 23:31:14", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/182", "commitsDetails": [], "ttf": 259.0002777777778}, {"labels": ["Bug"], "closed": "2016-03-22 15:00:09", "body": "migrated from Bugzilla [#456741](https://bugs.eclipse.org/bugs/show_bug.cgi?id=456741)\nstatus REOPENED severity _normal_ in component _server_ for _9.2.x_\nReported in version _8.1.16_ on platform _PC_\nAssigned to: Greg Wilkins\n\nOriginal attachment names and IDs:\n- _[jetty-issue-demo.zip](https://bugs.eclipse.org/bugs//attachment.cgi?id=249728)_ (ID 249728)\n- _[httpd-fuse.conf](https://bugs.eclipse.org/bugs//attachment.cgi?id=249729)_ (ID 249729)\n\nOn 2015-01-06 01:05:02 -0500, Xiaohui Wu wrote:\n\n> My scenario is below:\n> I have a long response time CXF restful web service and I am using camel to expose this CXF endpoint. The response time is 2 mins. \n> At the same time I have the httpd as the front proxy while it has the setting timeout=60\n> <VirtualHost *:443>\n> ...\n>       <Proxy balancer://cxfrs>\n>            BalancerMember https://localhost:9292/demo/aaa retry=10 timeout=60\n>       </Proxy>\n>       ProxyPass /demo/aaa balancer://cxfrs\n> ...\n> </VirtualHost>\n> \n> When I visit the service through the below command several times(3~5 times):\n> \n> curl -k --user admin:admin https://localhost:443/demo/aaa\n> \n> after several mins, I can see the high cpu in the jetty through \"top\" command and the jetty code is running in an infinite loop.\n\nOn 2015-01-06 01:13:27 -0500, Xiaohui Wu wrote:\n\n> Reproduce steps:\n> 1. \n> unzip the attachment jetty-issue-demo.zip \n> mvn clean package\n> mvn camel:run\n> \n> then you will see the port 9292 is listening.\n> 1. Install Apache HTTPD (tested with version 2.2.15)\n>    Install Apache mod_ssl module\n>    Copy the following configuration(attached) to a new file in conf.d.\n> 2. restart the httpd server, after visiting the service through the below command several times:\n>    curl -k --user admin:admin https://localhost:443/demo/aaa\n> \n> then I can see the high cpu in the jetty.\n\nOn 2015-01-06 01:15:18 -0500, Xiaohui Wu wrote:\n\n> From the stacktrace:\n> \"qtp680330057-225\" prio=10 tid=0x00007f42dc732000 nid=0x33f3 runnable [0x00007f42a8e40000]\n>    java.lang.Thread.State: RUNNABLE\n>   at org.eclipse.jetty.io.nio.SelectChannelEndPoint.fill(SelectChannelEndPoint.java:365)\n>   at org.eclipse.jetty.io.nio.SslConnection.process(SslConnection.java:333)\n> - locked <0x00000000e24efdf8> (a org.eclipse.jetty.io.nio.SslConnection)\n>   at org.eclipse.jetty.io.nio.SslConnection.access$900(SslConnection.java:48)\n>   at org.eclipse.jetty.io.nio.SslConnection$SslEndPoint.flush(SslConnection.java:690)\n>   at org.eclipse.jetty.io.nio.SslConnection$SslEndPoint.flush(SslConnection.java:697)\n>   at org.eclipse.jetty.http.HttpGenerator.flushBuffer(HttpGenerator.java:838)\n>   at org.eclipse.jetty.http.AbstractGenerator.flush(AbstractGenerator.java:443)\n>   at org.eclipse.jetty.server.HttpOutput.flush(HttpOutput.java:100)\n>   at org.eclipse.jetty.server.AbstractHttpConnection$Output.flush(AbstractHttpConnection.java:1123)\n>   at org.eclipse.jetty.server.AbstractHttpConnection$Output.sendContent(AbstractHttpConnection.java:1237)\n>   at org.apache.cxf.transport.http_jetty.JettyHTTPDestination$JettyOutputStream.copyFrom(JettyHTTPDestination.java:414)\n>   at org.apache.cxf.helpers.IOUtils.copy(IOUtils.java:105)\n>   at org.apache.cxf.transport.http.AbstractHTTPDestination$WrappedOutputStream.copyFrom(AbstractHTTPDestination.java:706)\n>   at org.apache.cxf.helpers.IOUtils.copy(IOUtils.java:105)\n>   at org.apache.cxf.helpers.IOUtils.copyAndCloseInput(IOUtils.java:113)\n>   at org.apache.cxf.jaxrs.provider.BinaryDataProvider.copyInputToOutput(BinaryDataProvider.java:136)\n>   at org.apache.cxf.jaxrs.provider.BinaryDataProvider.writeTo(BinaryDataProvider.java:105)\n>   at org.apache.cxf.jaxrs.utils.JAXRSUtils.writeMessageBody(JAXRSUtils.java:1317)\n>   at org.apache.cxf.jaxrs.interceptor.JAXRSOutInterceptor.serializeMessage(JAXRSOutInterceptor.java:284)\n>   at org.apache.cxf.jaxrs.interceptor.JAXRSOutInterceptor.processResponse(JAXRSOutInterceptor.java:157)\n>   at org.apache.cxf.jaxrs.interceptor.JAXRSOutInterceptor.handleMessage(JAXRSOutInterceptor.java:86)\n>   at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:272)\n> - locked <0x00000000e2517f10> (a org.apache.cxf.phase.PhaseInterceptorChain)\n>   at org.apache.cxf.interceptor.OutgoingChainInterceptor.handleMessage(OutgoingChainInterceptor.java:81)\n>   at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:272)\n> - locked <0x00000000e2511e48> (a org.apache.cxf.phase.PhaseInterceptorChain)\n>   at org.apache.cxf.phase.PhaseInterceptorChain.resume(PhaseInterceptorChain.java:242)\n> - locked <0x00000000e2511e48> (a org.apache.cxf.phase.PhaseInterceptorChain)\n>   at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:78)\n> - locked <0x00000000e2511e48> (a org.apache.cxf.phase.PhaseInterceptorChain)\n>   at org.apache.cxf.transport.http_jetty.JettyHTTPDestination.serviceRequest(JettyHTTPDestination.java:355)\n>   at org.apache.cxf.transport.http_jetty.JettyHTTPDestination.doService(JettyHTTPDestination.java:319)\n>   at org.apache.cxf.transport.http_jetty.JettyHTTPHandler.handle(JettyHTTPHandler.java:72)\n>   at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1088)\n>   at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1024)\n>   at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)\n>   at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:193)\n>   at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)\n>   at org.eclipse.jetty.server.Server.handleAsync(Server.java:410)\n>   at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:519)\n>   at org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:971)\n>   at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:1033)\n>   at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:644)\n>   at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)\n>   at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:82)\n>   at org.eclipse.jetty.io.nio.SslConnection.handle(SslConnection.java:196)\n>   at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:667)\n>   at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:52)\n>   at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)\n>   at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)\n>   at java.lang.Thread.run(Thread.java:744)\n>   After debuging the code, when the issue occurs, here it goes to a infinite loop, while the len==0 since the flush is not successful.  \n>   AbstractHttpConnection.sendContent(Object content)\n>                while (len>=0)\n>                   {\n>                       super._generator.completeUncheckedAddContent();\n>                       _out.flush();\n>   \n>   ```\n>                   max = super._generator.prepareUncheckedAddContent();\n>                   buffer = super._generator.getUncheckedBuffer();\n>                   len=buffer.readFrom(in,max);\n>               }\n>   ```\n> \n> In the AbstractGenerator.flush(long maxIdleTime) seems here there should be an exception thrown out.\n> It has an condition _endp.isOpen()&& !_endp.isOutputShutdown() actually here in customer's scenario, the endpoint is closed due to the timeout in the http side.\n> \n> ```\n>         while (now<end && (content!=null && content.length()>0 ||buffer!=null && buffer.length()>0) && _endp.isOpen()&& !_endp.isOutputShutdown())\n>         {\n>             blockForOutput(end-now);\n>             now=System.currentTimeMillis();\n>         }\n> ```\n\nOn 2015-01-06 01:18:42 -0500, Xiaohui Wu wrote:\n\n> I setup a testcase using the camel:run can reproduce the issue even with the latest community version camel 2.14.1 + CXF3.0.3 + jetty 8.1.15V20140411.\n> This issue still exist. \n> \n> while the code stack and analyze in comment# 2 are in jetty8.1.14V20131031.\n\nOn 2015-01-06 02:18:02 -0500, Xiaohui Wu wrote:\n\n> Created attachment 249728\n> project\n\nOn 2015-01-06 02:18:45 -0500, Xiaohui Wu wrote:\n\n> Created attachment 249729\n> httpd config\n\nOn 2015-01-06 05:24:41 -0500, Xiaohui Wu wrote:\n\n> I just hacked the default dependency of cxf on jetty, \n> and adding the dependency of the latest jetty 8.1.16.v20140903. \n> This issue still exist.\n> \n> So I think the code fix should check the endpoint's inputstream too \n> and if the endpoint's inputstream  is closed by httpd due to timeout, then an exception should be thrown out.\n> I added a claus to throw out the exception in the while condition then the issue disappear. But I guess there should be a more proper way to fix.\n> \n> <jetty-version>8.1.16.v20140903</jetty-version>\n> \n> ```\n> <dependency>\n>     <groupId>org.eclipse.jetty</groupId>\n>     <artifactId>jetty-continuation</artifactId>\n>     <version>${jetty-version}</version>\n>   </dependency>\n>   <dependency>\n>     <groupId>org.eclipse.jetty</groupId>\n>     <artifactId>jetty-http</artifactId>\n>     <version>${jetty-version}</version>\n>   </dependency>\n>   <dependency>\n>     <groupId>org.eclipse.jetty</groupId>\n>     <artifactId>jetty-io</artifactId>\n>     <version>${jetty-version}</version>\n>   </dependency>\n>   <dependency>\n>     <groupId>org.eclipse.jetty</groupId>\n>     <artifactId>jetty-security</artifactId>\n>     <version>${jetty-version}</version>\n>   </dependency>\n>   <dependency>\n>     <groupId>org.eclipse.jetty</groupId>\n>     <artifactId>jetty-server</artifactId>\n>     <version>${jetty-version}</version>\n>   </dependency>\n>   <dependency>\n>     <groupId>org.eclipse.jetty</groupId>\n>     <artifactId>jetty-util</artifactId>\n>     <version>${jetty-version}</version>\n>   </dependency>\n> ```\n\nOn 2015-02-05 00:43:47 -0500, Xiaohui Wu wrote:\n\n> I did a test using the latest jetty 9.2.6.v20141205 and cxf 3.1.0-SNAPSHOT, this issue does not occur!\n> the below log being printed on the server side. Seems jetty is using com.ctc.wstx.sw.BaseStreamWriter now and  improved a lot.\n> {code}\n> 254471 [qtp110138755-17] ERROR org.apache.cxf.jaxrs.utils.JAXRSUtils  - Problem with writing the data, class [B, ContentType: application/json\n> 254485 [qtp110138755-17] WARN  org.apache.cxf.phase.PhaseInterceptorChain  - Interceptor for {http://jetty.esb/}IssueDemo has thrown exception, unwinding now\n> org.apache.cxf.interceptor.Fault\n>   at org.apache.cxf.jaxrs.interceptor.JAXRSOutInterceptor.handleWriteException(JAXRSOutInterceptor.java:363)\n>   at org.apache.cxf.jaxrs.interceptor.JAXRSOutInterceptor.serializeMessage(JAXRSOutInterceptor.java:266)\n>   at org.apache.cxf.jaxrs.interceptor.JAXRSOutInterceptor.processResponse(JAXRSOutInterceptor.java:117)\n>   at org.apache.cxf.jaxrs.interceptor.JAXRSOutInterceptor.handleMessage(JAXRSOutInterceptor.java:80)\n>   at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:307)\n>   at org.apache.cxf.interceptor.OutgoingChainInterceptor.handleMessage(OutgoingChainInterceptor.java:83)\n>   at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:307)\n>   at org.apache.cxf.phase.PhaseInterceptorChain.resume(PhaseInterceptorChain.java:277)\n>   at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:78)\n>   at org.apache.cxf.transport.http.AbstractHTTPDestination.invoke(AbstractHTTPDestination.java:251)\n>   at org.apache.cxf.transport.http_jetty.JettyHTTPDestination.doService(JettyHTTPDestination.java:234)\n>   at org.apache.cxf.transport.http_jetty.JettyHTTPHandler.handle(JettyHTTPHandler.java:70)\n>   at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1127)\n>   at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1063)\n>   at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\n>   at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:189)\n>   at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:97)\n>   at org.eclipse.jetty.server.Server.handleAsync(Server.java:553)\n>   at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:320)\n>   at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:248)\n>   at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540)\n>   at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:626)\n>   at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:546)\n>   at java.lang.Thread.run(Thread.java:744)\n> Caused by: org.eclipse.jetty.io.EofException\n>   at org.eclipse.jetty.io.ChannelEndPoint.flush(ChannelEndPoint.java:192)\n>   at org.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.flush(SslConnection.java:791)\n>   at org.eclipse.jetty.io.WriteFlusher.flush(WriteFlusher.java:408)\n>   at org.eclipse.jetty.io.WriteFlusher.write(WriteFlusher.java:302)\n>   at org.eclipse.jetty.io.AbstractEndPoint.write(AbstractEndPoint.java:128)\n>   at org.eclipse.jetty.server.HttpConnection$SendCallback.process(HttpConnection.java:664)\n>   at org.eclipse.jetty.util.IteratingCallback.processing(IteratingCallback.java:246)\n>   at org.eclipse.jetty.util.IteratingCallback.iterate(IteratingCallback.java:208)\n>   at org.eclipse.jetty.server.HttpConnection.send(HttpConnection.java:465)\n>   at org.eclipse.jetty.server.HttpChannel.sendResponse(HttpChannel.java:766)\n>   at org.eclipse.jetty.server.HttpChannel.write(HttpChannel.java:804)\n>   at org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:142)\n>   at org.eclipse.jetty.server.HttpOutput$InputStreamWritingCB.process(HttpOutput.java:1046)\n>   at org.eclipse.jetty.util.IteratingCallback.processing(IteratingCallback.java:246)\n>   at org.eclipse.jetty.util.IteratingCallback.iterate(IteratingCallback.java:208)\n>   at org.eclipse.jetty.server.HttpOutput.sendContent(HttpOutput.java:542)\n>   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n>   at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n>   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n>   at java.lang.reflect.Method.invoke(Method.java:606)\n>   at org.apache.cxf.transport.http_jetty.JettyHTTPDestination$JettyOutputStream.sendContent(JettyHTTPDestination.java:285)\n>   at org.apache.cxf.transport.http_jetty.JettyHTTPDestination$JettyOutputStream.copyFrom(JettyHTTPDestination.java:302)\n>   at org.apache.cxf.helpers.IOUtils.copy(IOUtils.java:139)\n>   at org.apache.cxf.transport.http.AbstractHTTPDestination$WrappedOutputStream.copyFrom(AbstractHTTPDestination.java:763)\n>   at org.apache.cxf.helpers.IOUtils.copy(IOUtils.java:139)\n>   at org.apache.cxf.helpers.IOUtils.copyAndCloseInput(IOUtils.java:147)\n>   at org.apache.cxf.jaxrs.provider.BinaryDataProvider.copyInputToOutput(BinaryDataProvider.java:186)\n>   at org.apache.cxf.jaxrs.provider.BinaryDataProvider.writeTo(BinaryDataProvider.java:151)\n>   at org.apache.cxf.jaxrs.utils.JAXRSUtils.writeMessageBody(JAXRSUtils.java:1360)\n>   at org.apache.cxf.jaxrs.interceptor.JAXRSOutInterceptor.serializeMessage(JAXRSOutInterceptor.java:244)\n>   ... 22 more\n> Caused by: java.io.IOException: Broken pipe\n>   at sun.nio.ch.FileDispatcherImpl.write0(Native Method)\n>   at sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:47)\n>   at sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:93)\n>   at sun.nio.ch.IOUtil.write(IOUtil.java:65)\n>   at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:487)\n>   at org.eclipse.jetty.io.ChannelEndPoint.flush(ChannelEndPoint.java:170)\n>   ... 51 more\n> 254509 [qtp110138755-17] WARN  org.apache.cxf.phase.PhaseInterceptorChain  - Interceptor for {http://jetty.esb/}IssueDemo has thrown exception, unwinding now\n> org.apache.cxf.interceptor.Fault: XML_WRITE_EXC\n>   at org.apache.cxf.jaxrs.interceptor.JAXRSDefaultFaultOutInterceptor.handleMessage(JAXRSDefaultFaultOutInterceptor.java:102)\n>   at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:307)\n>   at org.apache.cxf.interceptor.AbstractFaultChainInitiatorObserver.onMessage(AbstractFaultChainInitiatorObserver.java:113)\n>   at org.apache.cxf.phase.PhaseInterceptorChain.wrapExceptionAsFault(PhaseInterceptorChain.java:365)\n>   at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:323)\n>   at org.apache.cxf.interceptor.OutgoingChainInterceptor.handleMessage(OutgoingChainInterceptor.java:83)\n>   at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:307)\n>   at org.apache.cxf.phase.PhaseInterceptorChain.resume(PhaseInterceptorChain.java:277)\n>   at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:78)\n>   at org.apache.cxf.transport.http.AbstractHTTPDestination.invoke(AbstractHTTPDestination.java:251)\n>   at org.apache.cxf.transport.http_jetty.JettyHTTPDestination.doService(JettyHTTPDestination.java:234)\n>   at org.apache.cxf.transport.http_jetty.JettyHTTPHandler.handle(JettyHTTPHandler.java:70)\n>   at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1127)\n>   at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1063)\n>   at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\n>   at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:189)\n>   at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:97)\n>   at org.eclipse.jetty.server.Server.handleAsync(Server.java:553)\n>   at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:320)\n>   at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:248)\n>   at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540)\n>   at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:626)\n>   at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:546)\n>   at java.lang.Thread.run(Thread.java:744)\n> Caused by: com.ctc.wstx.exc.WstxIOException: Closed\n>   at com.ctc.wstx.sw.BaseStreamWriter.flush(BaseStreamWriter.java:261)\n>   at org.apache.cxf.jaxrs.interceptor.JAXRSDefaultFaultOutInterceptor.handleMessage(JAXRSDefaultFaultOutInterceptor.java:100)\n>   ... 23 more\n> Caused by: org.eclipse.jetty.io.EofException: Closed\n>   at org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:320)\n>   at org.apache.cxf.transport.http_jetty.JettyHTTPDestination$JettyOutputStream.write(JettyHTTPDestination.java:314)\n>   at org.apache.cxf.io.AbstractWrappedOutputStream.write(AbstractWrappedOutputStream.java:51)\n>   at com.ctc.wstx.io.UTF8Writer.flush(UTF8Writer.java:100)\n>   at com.ctc.wstx.sw.BufferingXmlWriter.flush(BufferingXmlWriter.java:241)\n>   at com.ctc.wstx.sw.BaseStreamWriter.flush(BaseStreamWriter.java:259)\n>   ... 24 more\n> {code}\n\nOn 2015-03-10 10:48:28 -0400, Joakim Erdfelt wrote:\n\n> Jetty 8 is EOL (End of Life), no further work will be done on that version of Jetty.\n> \n> Tested a configuration similar to attached.\n> \n> Updated to use :\n> - Apache httpd 2.4.10 on Fedora 20\n> - Jetty 9.2.9.v20150224\n> - Java 1.7.0_75\n> \n> Changes to pom in example project\n> - Removed all of the fusesource repos, as they always seem to produce problems in peoples builds\n> - Eliminated all of the OSGi goop (pax, felix, fabric8)\n> - Used released Camel 2.14.1\n> - Used recommended CXF 3.0.2 (recommended by Camel 2.14.1) \n> \n> This works, no long response times seen.\n> \n> Considering this WORKSFORME on Jetty 9.\n\nOn 2015-03-10 21:40:18 -0400, Xiaohui Wu wrote:\n\n> Joakim,\n> Thanks for the confirming it is fixed on jetty 9.X.\n\nOn 2015-03-31 21:03:36 -0400, Greg Wilkins wrote:\n\n> we'll have a look at this one.\n\nOn 2015-03-31 23:35:30 -0400, Greg Wilkins wrote:\n\n> I'm not that familiar with camel... particularly the mvn camel:run command.\n> Any chance you can give me a modification to that demo project that includes a main that I can run from a debugger?\n\nOn 2015-04-01 01:19:19 -0400, Greg Wilkins wrote:\n\n> It appears I can reproduce this at will directly to your test project.\n> If I do the curl operation directly to 9292 and then control-C it, 2 minutes later the server goes 100%.\n> \n> The problem is definitely with sendContent as you have identified.\n> \n> I have tried to reproduce on the current jetty-8 head, but not there is some more EoF protection.  I'm now trying to reproduce with 8.1.14\n\nOn 2015-04-01 01:49:12 -0400, Xiaohui Wu wrote:\n\n> Greg,\n> Thanks a lot for looking into this. \n> The fix for this bug looks fine to me. I think it resolved this issue.\n> https://bugs.eclipse.org/bugs/show_bug.cgi?id=445953\n> \n> Best Regards,\n> Vicky\n\nOn 2015-04-01 01:55:25 -0400, Greg Wilkins wrote:\n\n> I can't reproduce it in the same way with 8.1.14 directly with my own test harness, so your app is doing something I'm not fully understanding yet.\n> \n> However, when I took the latest 8.1.17-SNAPSHOT and deployed in your application, I could not reproduce with a stopped curl.\n> \n> Any chance you could test a recent build to see if it is also fixed in the full proxy environment?\n> \n> Tomorrow I'll see if I can deploy an instrumented snap-shot in your app to see if I can understand more what is going on.\n", "commits": {}, "title": "long response time lead to high CPU in jetty when using httpd server in front and a short timeout setting", "created": "2016-02-16 23:31:02", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/181", "commitsDetails": [], "ttf": 34.000277777777775}, {"labels": ["Bug"], "closed": "2016-03-07 23:56:57", "body": "migrated from Bugzilla [#456736](https://bugs.eclipse.org/bugs/show_bug.cgi?id=456736)\nstatus ASSIGNED severity _normal_ in component _server_ for _9.2.x_\nReported in version _9.2.6_ on platform _Other_\nAssigned to: Greg Wilkins\n\nOn 2015-01-05 20:37:00 -0500, Gregory Grillo wrote:\n\n> I'm in the beginning stages of debugging a Jetty CPU spiking problem where the CPU usage continues to increase and ultimately ends up locking Jetty to the point where new connections cannot be made.  I've seen many posts about this issue but they were several years ago (https://jira.codehaus.org/browse/JETTY-937 - for example).  \n> \n> However, as I understand it, Jetty 9 no longer uses the SelectChannelConnector so although my issue is similar, it doesn't appear to be related.  Via the \"jvmtop\" tool, I can see what thread is using the CPU and basically Jetty cannot recover once the issue begins.  I have a very small user base so its not like 1,000 of users are making requests, maybe 20 simultaneous users at the most.  The \"jvmtop\" output that illustrates the problem thread looks like this:\n> \n> ./jvmtop.sh [java process id]\n> \n>  ARGS: \n>  VMARGS: -Xms512m -Xmx2g -XX:MaxPermSize=1g -XX:+HeapDumpOnOutOfMemoryErro[...]\n>  VM: Oracle Corporation Java HotSpot(TM) 64-Bit Server VM 1.7.0_25\n>  UP:  4:24m  #THR: 138  #THRPEAK: 149  #THRCREATED: 2049 USER: *********\\*  \n>  GC-Time:  0: 1m   #GC-Runs: 2104      #TotalLoadedClasses: 23734  \n>  CPU: 50.04% GC:  0.00% HEAP: 512m /1820m NONHEAP: 167m /1072m\n> \n>   TID   NAME                                    STATE    CPU  TOTALCPU BLOCKEDBY\n>      36 qtp2146135443-36-selector-Serv       RUNNABLE 88.80%    93.69%  \n>    2044 RMI TCP Connection(708)-10.240       RUNNABLE 10.46%     0.09%  \n>    1870 RMI TCP Connection(712)-10.240       RUNNABLE  0.39%     0.00%  \n>    2045 JMX server connection timeout   TIMED_WAITING  0.18%     0.00%  \n>    1922 RMI TCP Connection(711)-10.240       RUNNABLE  0.05%     0.00%  \n>       9 RMI TCP Accept-0                     RUNNABLE  0.02%     0.00%  \n>      10 RMI TCP Accept-6969                  RUNNABLE  0.01%     0.00%  \n>      21 DefaultQuartzScheduler_Worker-  TIMED_WAITING  0.00%     0.00%  \n>      22 DefaultQuartzScheduler_Worker-  TIMED_WAITING  0.00%     0.00%  \n>      19 DefaultQuartzScheduler_Worker-  TIMED_WAITING  0.00%     0.00%  \n> \n> It is the qtp thread that causes the problem.  It usually spikes up to well over 100% for a few minutes before Jetty becomes unresponsive.   I have a Java/Vaadin app that uses RPC between server and client for dynamic UI updates (if that matters).  The server notifies the browser at times, when updated UI data is available.  Given this output and problem description, can you point me in any direction as to the root cause?  \n> \n> Thanks very much.\n\nOn 2015-04-01 18:31:12 -0400, Greg Wilkins wrote:\n\n> Sorry been slow to respond on this one.\n> \n> Are you still seeing this? Have you tried a more recent version of 9.2.x?\n", "commits": {}, "title": "Jetty CPU Usage Spikes", "created": "2016-02-16 23:30:53", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/180", "commitsDetails": [], "ttf": 20.00027777777778}, {"labels": ["Bug"], "closed": "2016-03-22 15:02:06", "body": "migrated from Bugzilla [#452673](https://bugs.eclipse.org/bugs/show_bug.cgi?id=452673)\nstatus ASSIGNED severity _normal_ in component _server_ for _9.2.x_\nReported in version _9.2.3_ on platform _PC_\nAssigned to: Greg Wilkins\n\nOn 2014-11-21 11:01:15 -0500, Gili wrote:\n\n> I'm getting the following exception:\n> \n> 10:30:39.025 [qtp119636033-496] WARN  org.eclipse.jetty.server.HttpChannel$CommitCallback.failed() - Commit failed\n> java.lang.IllegalStateException: Closed with pending callback org.eclipse.jetty.server.HttpConnection$SendCallback@2e98eb2e[CLOSED][i=ResponseInfo{HTTP/1.1 204 No Content,-1,false},cb=org.eclipse.jetty.server.HttpChannel$CommitCallback@1736e96f]\n>   at org.eclipse.jetty.util.IteratingCallback.close(IteratingCallback.java:397)\n>   at org.eclipse.jetty.server.HttpConnection.onClose(HttpConnection.java:429)\n>   at org.eclipse.jetty.io.SelectorManager.connectionClosed(SelectorManager.java:330)\n>   at org.eclipse.jetty.io.SelectorManager$ManagedSelector.destroyEndPoint(SelectorManager.java:749)\n>   at org.eclipse.jetty.io.SelectChannelEndPoint.close(SelectChannelEndPoint.java:169)\n>   at org.eclipse.jetty.io.AbstractConnection.close(AbstractConnection.java:225)\n>   at org.eclipse.jetty.io.SelectorManager$ManagedSelector.closeNoExceptions(SelectorManager.java:713)\n>   at org.eclipse.jetty.io.SelectorManager$ManagedSelector.access$1100(SelectorManager.java:406)\n>   at org.eclipse.jetty.io.SelectorManager$ManagedSelector$EndPointCloser.run(SelectorManager.java:1020)\n>   at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:610)\n>   at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:539)\n>   at java.lang.Thread.run(Thread.java:745)\n> \n> I believe that the server is being shut down while another thread is closing a connection. I don't believe I am doing anything wrong from an end-user point of view. I expect the server to detect this race condition and shut down gracefully.\n\nOn 2014-11-26 22:20:48 -0500, Greg Wilkins wrote:\n\n> Gill,\n> \n> are you still seeing this on the latest release? 9.2.5?\n\nOn 2014-11-26 23:48:52 -0500, Gili wrote:\n\n> Greg,\n> \n> I'll switch over to 9.2.5 and we'll see if I run into this over the next week.\n\nOn 2014-12-02 23:31:41 -0500, Gili wrote:\n\n> Greg,\n> \n> I don't see the original exception but I just got this exception which I believe is related (in 9.2.5):\n> \n> 23:27:53.300 [qtp1753415235-190] WARN  org.glassfish.jersey.server.ServerRuntime$Responder.release() - Attempt to release request processing resources has failed for a request.\n> org.glassfish.jersey.server.ContainerException: I/O exception occurred while sending \"415/Unsupported Media Type\" error response.\n>   at org.glassfish.jersey.servlet.internal.ResponseWriter.commit(ResponseWriter.java:202)\n>   at org.glassfish.jersey.server.ContainerResponse.close(ContainerResponse.java:413)\n>   at org.glassfish.jersey.server.ServerRuntime$Responder.release(ServerRuntime.java:717)\n>   at org.glassfish.jersey.server.ServerRuntime$Responder.process(ServerRuntime.java:445)\n>   at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:277)\n>   at org.glassfish.jersey.internal.Errors$1.call(Errors.java:271)\n>   at org.glassfish.jersey.internal.Errors$1.call(Errors.java:267)\n>   at org.glassfish.jersey.internal.Errors.process(Errors.java:315)\n>   at org.glassfish.jersey.internal.Errors.process(Errors.java:297)\n>   at org.glassfish.jersey.internal.Errors.process(Errors.java:267)\n>   at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:297)\n>   at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:254)\n>   at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:1030)\n>   at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:373)\n>   at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:381)\n>   at org.glassfish.jersey.servlet.ServletContainer.doFilter(ServletContainer.java:534)\n>   at org.glassfish.jersey.servlet.ServletContainer.doFilter(ServletContainer.java:482)\n>   at org.glassfish.jersey.servlet.ServletContainer.doFilter(ServletContainer.java:419)\n>   at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1652)\n>   at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:585)\n>   at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)\n>   at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:577)\n>   at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:223)\n>   at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1125)\n>   at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:515)\n>   at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185)\n>   at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1059)\n>   at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\n>   at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:97)\n>   at org.eclipse.jetty.server.Server.handle(Server.java:497)\n>   at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:310)\n>   at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:248)\n>   at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540)\n>   at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:620)\n>   at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:540)\n>   at java.lang.Thread.run(Thread.java:745)\n> Caused by: java.nio.channels.ClosedChannelException: null\n>   at org.eclipse.jetty.util.IteratingCallback.close(IteratingCallback.java:459)\n>   at org.eclipse.jetty.server.HttpConnection.onClose(HttpConnection.java:429)\n>   at org.eclipse.jetty.io.SelectorManager.connectionClosed(SelectorManager.java:330)\n>   at org.eclipse.jetty.io.SelectorManager$ManagedSelector.destroyEndPoint(SelectorManager.java:749)\n>   at org.eclipse.jetty.io.SelectChannelEndPoint.close(SelectChannelEndPoint.java:169)\n>   at org.eclipse.jetty.io.AbstractConnection.close(AbstractConnection.java:225)\n>   at org.eclipse.jetty.io.SelectorManager$ManagedSelector.closeNoExceptions(SelectorManager.java:713)\n>   at org.eclipse.jetty.io.SelectorManager$ManagedSelector.access$1100(SelectorManager.java:406)\n>   at org.eclipse.jetty.io.SelectorManager$ManagedSelector$EndPointCloser.run(SelectorManager.java:1020)\n>   ... 3 common frames omitted\n> \n> Does this help you understand what is going on? I'm guessing the server is being shut down while attempting to flush its output.\n", "commits": {}, "title": "IllegalStateException: Closed with pending callback", "created": "2016-02-16 23:30:25", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/177", "commitsDetails": [], "ttf": 34.000277777777775}, {"labels": ["Bug"], "closed": "2018-03-16 16:38:55", "body": "migrated from Bugzilla [#448390](https://bugs.eclipse.org/bugs/show_bug.cgi?id=448390)\nstatus ASSIGNED severity _normal_ in component _server_ for _9.2.x_\nReported in version _9.1.0_ on platform _All_\nAssigned to: Jan Bartel\n\nOn 2014-10-22 10:52:55 -0400, Ingo Haase wrote:\n\n> We have discovered that integrating Jetty in a dynamic environment like OSGi causes problems due to the incorrect handling of multiple parallel initialization requests.\n> In OSGi jetty automatically recognizes and processes war files in the OSGi framework.\n> When a new webapp is to be instantiated (e.g. during a restart of the OSGiframework), the current state of the context handlers structure in jetty is taken, some initializations are done, a new handler is added and the reference in jetty is updated.\n> \n> However, in the OSGi case the start event for every webapp bundle is added in a separate thread.\n> These threads work in parallel and it can happen that they both get a copy of the initial state of the structure, which is empty. Then they both add their handlers in parallel and set the reference in jetty. Obviously, whoever updates it second replaces the first one and causes the first webapp to malfunction.\n> \n> We fixed this problem by adding sync blocks in several places in the jetty code, in order to be sure that the adding of the handlers is done sequentially:\n> \n> package org.eclipse.jetty.server.handler;\n> \n> ContextHandlerCollection.mapContexts - this method is not protected, if it is used by several threads at the same time. It updates the following structure:\n> private volatile Trie<ContextHandler[]> _contexts;\n> which is used later for handling requests.\n> \n> this method is called by HandlerCollection - where there is another structure:\n>  private volatile Handler[] _handlers;\n> \n> we have added synchronizations where set/get of these _handlers is called.\n> \n> We are using:\n> JVM: ejre 1.7.0_51\n> OSGi: ProSyst mBeddedServer SH 7.5.1\n> jetty version 9.1.0.v20131115\n> \n> The described problem could occur also in setups without OSGi - anywhere where several installations/initializations of webapps could be triggered in parallel.\n\nOn 2014-10-22 18:19:21 -0400, Jan Bartel wrote:\n\n> Ingo,\n> \n> FYI we also fixed this osgi-related issue with webapp deployment in jetty-9.2: https://bugs.eclipse.org/bugs/show_bug.cgi?id=427951\n> \n> If you were able to run jetty-9.2.3 and produce a patch set based on that code then that may be helpful. \n> \n> Jan\n", "commits": {}, "title": "ContextHandlerCollection.mapContexts missing synchronization", "created": "2016-02-16 23:28:56", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/169", "commitsDetails": [], "ttf": 758.0002777777778}, {"labels": ["Bug"], "closed": "2016-07-14 06:58:52", "body": "migrated from Bugzilla [#447790](https://bugs.eclipse.org/bugs/show_bug.cgi?id=447790)\nstatus ASSIGNED severity _normal_ in component _server_ for _9.2.x_\nReported in version _9.0.6_ on platform _PC_\nAssigned to: Jan Bartel\n\nOn 2014-10-18 18:01:49 -0400, Karl M. Davis wrote:\n\n> I was attempting to use Maven Surefire/Failsafe to run some integration tests using that start up an embedded Jetty server and ran into problems today. Given this configuration, Jetty would fail to launch correctly and my tests would all fail:\n> \n> <plugin>\n>   <groupId>org.apache.maven.plugins</groupId>\n>   <artifactId>maven-failsafe-plugin</artifactId>\n>   <configuration>\n>       <!-- This is actually the default setting. -->\n>       <useManifestOnlyJar>true</useManifestOnlyJar>\n>   </configuration>\n> </plugin>\n> \n> With things set that way, I'd end up with messages like this in my log:\n> \n> [main] INFO  / - No Spring WebApplicationInitializer types detected on classpath\n> \n> After a lot of debugging and cursing, it turns out that Spring MVC relies on Jetty to have correctly scanned the classpath and found all of the JARs/class directories in use. However, when Surefire's \"manifest\" JAR feature is enabled, the JVM's base classpath just contains a JAR with a manifest that points to all of the project's dependencies. This is apparently done by Surefire to work around command line length limitations on Windows, which makes sense.\n> \n> Unfortunately, Jetty doesn't check the manifests of the JARs on its classpath for \"transitive\" dependency JARs, and so misses all of the project's dependencies. I've kinda-sorta tracked this down to the org.eclipse.jetty.webapp.WebInfConfiguration.preConfigure(WebAppContext) method. In the scenario I'm describing here, containerUris ends up with the following value that Jetty doesn't handle correctly:\n> \n> [file:/home/karl/workspaces/rps-tourney/rps-tourney.git/rps-tourney-service-app/target/surefire/surefirebooter7082852056793464207.jar, file:/home/karl/.m2/repository/org/jacoco/org.jacoco.agent/0.6.5.201403032054/org.jacoco.agent-0.6.5.201403032054-runtime.jar]\n> \n> All that surefirebooter7082852056793464207.jar contains is a MANIFEST.MF with the actual classpath:\n> \n> Manifest-Version: 1.0\n> Class-Path: file:/home/karl/.m2/repository/org/apache/maven/surefire/s\n>  urefire-booter/2.16/surefire-booter-2.16.jar file:/home/karl/.m2/repo\n>  sitory/org/apache/maven/surefire/surefire-api/2.16/surefire-api-2.16.\n>  jar file:/home/karl/workspaces/rps-tourney/rps-tourney.git/rps-tourne\n>  y-service-app/target/test-classes/ file:/home/karl/workspaces/rps-tou\n>  rney/rps-tourney.git/rps-tourney-service-app/target/classes/ file:/ho\n>  ...\n> Main-Class: org.apache.maven.surefire.booter.ForkedBooter\n> \n> In order to properly run in such a scenario, Jetty would have to evaluate the Class-Path manifest attribute of each JAR on its classpath.\n\nOn 2014-10-18 18:03:22 -0400, Karl M. Davis wrote:\n\n> Some Googling led me to mentions of the following related troubles that other folks have had with this problem:\n> 1. http://stackoverflow.com/questions/19469292/cant-load-jstl-in-multi-module-maven-project-with-embedded-jetty\n> 2. http://dev.eclipse.org/mhonarc/lists/jetty-users/msg01653.html\n\nOn 2014-11-06 23:11:27 -0500, Jan Bartel wrote:\n\n> Karl,\n> \n> Are you sure you have the jetty-annotations.jar on the classpath and that you are applying the appropriate set of XXXConfigurations to the WebAppContext? The XXXConfig classes should be set to the following (if you're doing an embedded jetty startup, otherwise check the etc/jetty-annotations.xml and etc/jetty-plus.xml files in the distro for the xml):\n> \n> org.eclipse.jetty.webapp.Configuration.ClassList classlist = org.eclipse.jetty.webapp.Configuration.ClassList.setServerDefault(server);\n> classlist.addAfter(\"org.eclipse.jetty.webapp.FragmentConfiguration\", \"org.eclipse.jetty.plus.webapp.EnvConfiguration\", \"org.eclipse.jetty.plus.webapp.PlusConfiguration\");\n> classlist.addBefore(\"org.eclipse.jetty.webapp.JettyWebXmlConfiguration\", \"org.eclipse.jetty.annotations.AnnotationConfiguration\");\n> \n> Also, the way I read the failsafe doco, their booter mechanism is responsible for extracting the classpath and setting that up in a new classloader. I would expect that synthetic classloader to be the parent for the WebAppClassLoader that we create.  If that's true, then the java.util.ServiceLoader mechanism should be able to find the SpringServletContainerInitializer, which has an @HandlesTypes=WebApplicationInitializer.class. If Jetty finds an @HandlesTypes annotation then we do a full scan of the classloader hierarchy to find type hierarchy.\n> \n> You should enable full debug for jetty (-Dorg.eclipse.jetty.LEVEL=DEBUG) and check the output from the AnnotationConfiguration which will let you know which jars and classes are being scanned.\n> \n> regards\n> Jan\n> \n> (In reply to Karl M. Davis from comment # 1)\n> \n> > Some Googling led me to mentions of the following related troubles that\n> > other folks have had with this problem:\n> > \n> > 1.\n> > http://stackoverflow.com/questions/19469292/cant-load-jstl-in-multi-module-\n> > maven-project-with-embedded-jetty\n> > 2. http://dev.eclipse.org/mhonarc/lists/jetty-users/msg01653.html\n\nOn 2015-01-09 10:04:32 -0500, Jan Bartel wrote:\n\n> Karl,\n> \n> Are you able to attach a small demonstration project for this please?\n> \n> thanks\n> jan\n\nOn 2015-02-04 00:56:40 -0500, Jan Bartel wrote:\n\n> Karl? Any responses to my questions, or a test harness?\n> thanks\n> Jan\n", "commits": {}, "title": "Embedded Jetty server's classpath parsing/scanning broken with Maven Surefire's useManifestOnlyJar feature", "created": "2016-02-16 23:28:40", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/168", "commitsDetails": [], "ttf": 148.00027777777777}, {"labels": ["Bug"], "closed": "2016-07-14 04:22:05", "body": "migrated from Bugzilla [#447462](https://bugs.eclipse.org/bugs/show_bug.cgi?id=447462)\nstatus ASSIGNED severity _normal_ in component _server_ for _9.2.x_\nReported in version _9.2.3_ on platform _PC_\nAssigned to: Jan Bartel\n\nOn 2014-10-15 21:57:32 -0400, Jan Bartel wrote:\n\n> Currently BaseHolder.doStart() method will use the java.util.Loader.loadClass() method to load the servlet class. This method will fall back to other loaders if the TCCL fails to load the class. Probably the BaseHolder should simply use the TCCL, so we can be sure to respect its system/server class settings.\n\nOn 2015-07-10 10:01:22 -0400, Michael Fahy wrote:\n\n> Any update on this bug ? \n> \n> It doesn't look like it was fixed in 9.3.0.\n> \n> Basically, I am embedding an application which uses Jersey. And because of the auto-discovery stuff Jersey does, it discovers classes that are in my container and which should not be present in the embedded application.\n\nOn 2015-07-15 19:52:14 -0400, Greg Wilkins wrote:\n\n> @Michael,\n> \n> I'm not understanding how this bug can affect Jersey discovery?  This bug is just that once discovered/configured, a Servlet/Filter may be loaded from the server or system classloader even if it is hidden by the context loader.\n> \n> This should not affect Jersey discovery at all - as that should use other mechanisms.  Ie this is a load issue, not a discovery issue.\n> \n> So can you explain your situation some more? Perhaps create a small example and attach to a new bug.\n\nOn 2015-07-16 01:56:31 -0400, Greg Wilkins wrote:\n\n> I've committed a fix for this into the Jetty-9.3-Feature2 branch, as it requires a change to the way we expose server classes.  Thus it is a bit too much of a change to sneak into a dot release, but it will be in 9.4 or 10.0, which ever is next.\n", "commits": {}, "title": "Servlet classes should be loaded using TCCL", "created": "2016-02-16 23:28:26", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/167", "commitsDetails": [], "ttf": 148.00027777777777}, {"labels": ["Bug"], "closed": "2016-07-14 04:32:11", "body": "migrated from Bugzilla [#447461](https://bugs.eclipse.org/bugs/show_bug.cgi?id=447461)\nstatus ASSIGNED severity _normal_ in component _server_ for _9.2.x_\nReported in version _9.2.3_ on platform _PC_\nAssigned to: Jan Bartel\n\nOn 2014-10-15 21:51:58 -0400, Jan Bartel wrote:\n\n> If a class that is designated a system class does not exist in the container's classloader parent hierarchy, but is inside the webapp's classloader, the WebAppClassLoader.loadClass method falls back to calling findClass, which results in it being loaded from the webapp's classloader.\n\nOn 2014-11-13 21:49:20 -0500, Jan Bartel wrote:\n\n> **\\* Bug 447187 has been marked as a duplicate of this bug. ***\n", "commits": {}, "title": "System class can be loaded from webapp loader", "created": "2016-02-16 23:28:18", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/166", "commitsDetails": [], "ttf": 148.00027777777777}, {"labels": ["Bug"], "closed": "2016-03-22 14:52:53", "body": "migrated from Bugzilla [#445822](https://bugs.eclipse.org/bugs/show_bug.cgi?id=445822)\nstatus ASSIGNED severity _normal_ in component _servlet-3.1_ for _---_\nReported in version _9.2.3_ on platform _All_\nAssigned to: Greg Wilkins\n\nOn 2014-10-02 16:25:48 -0400, Joakim Erdfelt wrote:\n\n> Example:\n> \n> ```\n> public class AsyncOnStartIOExceptionHandler extends AbstractTestHandler implements AsyncListener\n> {\n>     @Override\n>     public void handle(String target, Request baseRequest, HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException\n>     {\n>         AsyncContext ac = request.startAsync();\n>         ac.setTimeout(1000);\n>         ac.addListener(this);\n>         baseRequest.setHandled(true);\n>     }\n> \n>     @Override\n>     public void onTimeout(AsyncEvent event) throws IOException\n>     {\n>     }\n> \n>     @Override\n>     public void onStartAsync(AsyncEvent event) throws IOException\n>     {\n>         throw new IOException(\"Whoops\");\n>     }\n> \n>     @Override\n>     public void onError(AsyncEvent event) throws IOException\n>     {\n>         LOG.warn(\"onError() -> {}\",event);\n>     }\n> \n>     @Override\n>     public void onComplete(AsyncEvent event) throws IOException\n>     {\n>     }\n> }\n> ```\n> \n> This would result in an exception being logged, and then the timeout occurs, and the handle() happens again (just created a loop)\n> The onError also never gets called.\n\nOn 2014-10-02 16:56:34 -0400, Joakim Erdfelt wrote:\n\n> Newly added RequestLogHandlerTest has a demonstration of this behavior.\n> \n> The only way to work around the specific onAsyncStart use case is to set the asyncContext.complete() before throwing the exception (like the testcase does).\n> \n> (other use cases of exceptions from other listeners methods not covered yet by a test case)\n\nOn 2014-10-02 16:56:56 -0400, Joakim Erdfelt wrote:\n\n> See branch [jetty-9.2.x] for testcase\n", "commits": {}, "title": "Clarify behavior for Exception thrown from AsyncListener callbacks", "created": "2016-02-16 23:28:01", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/162", "commitsDetails": [], "ttf": 34.000277777777775}, {"labels": ["Bug"], "closed": "2017-09-13 07:06:35", "body": "migrated from Bugzilla [#444701](https://bugs.eclipse.org/bugs/show_bug.cgi?id=444701)\nstatus ASSIGNED severity _normal_ in component _server_ for _9.2.x_\nReported in version _9.2.3_ on platform _All_\nAssigned to: Greg Wilkins\n\nOn 2014-09-21 22:11:40 -0400, Jan Bartel wrote nothing.\n", "commits": {}, "title": "Create alias checker to accept paths containing // as alias", "created": "2016-02-16 23:27:38", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/159", "commitsDetails": [], "ttf": 574.0002777777778}, {"labels": ["Bug"], "closed": "2017-04-28 11:22:51", "body": "migrated from Bugzilla [#444485](https://bugs.eclipse.org/bugs/show_bug.cgi?id=444485)\nstatus ASSIGNED severity _normal_ in component _http2_ for _9.2.x_\nReported in version _9.3.0_ on platform _PC_\nAssigned to: Greg Wilkins\n\nOn 2014-09-18 10:17:46 -0400, Simone Bordet wrote:\n\n> When a client resets a stream while the server is sending data, then frames queued by the server are failed and discarded.\n> \n> Currently, when a frame is discarded for this reason, it may trigger the call of a blocking API such as AsyncContext.complete(), which tries to call ServletOutputStream.close(), also a blocking API.\n> When this happens, we may hang with this stack:\n> \n> HTTP2Flusher.process()\n>   DataFrameEntry.reset()\n>     Callback.failed()\n>       AsyncContext.complete()\n>         HttpOutput.close()\n>           HTTP2Flusher.append()\n>           HTTP2Flusher.iterate()\n>           block\n> \n> Since close() is blocking, process() cannot proceed and dequeue the frame that has just been appended to call its callback, and thus the hang.\n\nOn 2014-09-18 10:35:51 -0400, Simone Bordet wrote:\n\n> Commit SHA: bfda3620f3a7500f7999eccaf2bb384d3605a7b6.\n> \n> Fixed by ensuring that when a failure happens, either by catching an exception or by failing a callback, we always call completed() and abort the channel (via new method terminate()).\n> \n> Greg, this needs review for the following cases: an application calls write(), a frame is queued, the stream is reset, then the application calls one of HttpOutput.sendXXX() methods.\n> Other blocking methods such as close(), flush(), write() have a state machine that is checked and, for example, if the stream is closed they throw an exception.\n> I think a similar state machine should be implemented for sendXXX() methods as well.\n", "commits": {}, "title": "Client resets stream, pending server data is failed, write hangs", "created": "2016-02-16 23:27:35", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/158", "commitsDetails": [], "ttf": 436.0002777777778}, {"labels": ["Bug"], "closed": "2017-03-01 17:44:01", "body": "migrated from Bugzilla [#444308](https://bugs.eclipse.org/bugs/show_bug.cgi?id=444308)\nstatus ASSIGNED severity _normal_ in component _websocket_ for _9.2.x_\nReported in version _9.2.3_ on platform _All_\nAssigned to: Joakim Erdfelt\n\nOn 2014-09-16 16:55:51 -0400, Joakim Erdfelt wrote:\n\n> The exception message for duplicate encoder says \"decoder\", this is a typo that should be fixed.\n", "commits": {}, "title": "JSR356 Encoder duplicate results in exception stating \"Duplicate decoder for type:\"", "created": "2016-02-16 23:27:28", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/157", "commitsDetails": [], "ttf": 378.0002777777778}, {"labels": ["Bug"], "closed": "2017-04-28 11:36:28", "body": "migrated from Bugzilla [#443729](https://bugs.eclipse.org/bugs/show_bug.cgi?id=443729)\nstatus ASSIGNED severity _normal_ in component _server_ for _9.2.x_\nReported in version _9.1.5_ on platform _PC_\nAssigned to: Greg Wilkins\n\nOn 2014-09-10 11:48:30 -0400, Jessica Viles wrote:\n\n> Using Jersey Restful Web Service library to create web service application servlet that is deployed on Jetty server.\n> \n> Every time a restful client abruptly disconnects open SSE stream (by closing browser, curl command window, java application rest client, etc).  Jetty server prints stack trace and attempts to re-open the SSE stream connection for the client.  We substituted servers from Jetty to the Jersey Grizzly web server and the issue went away.\n> \n> Do you know of a work around which will help us to prevent Jetty server from outputting stack trace on abrupt client disconnect, and prevent it from automatically reconnecting on client's behalf (which when the browser is closed, etc, is unnecessary and causes unnecessary traffic to our web servlet). \n> \n> Stack trace:\n> \n> Sep 10, 2014 8:40:42 AM org.glassfish.jersey.server.ServerRuntime$Responder writeResponse\n> SEVERE: Error while committing the output stream.\n> org.eclipse.jetty.io.EofException\n>   at org.eclipse.jetty.io.ChannelEndPoint.flush(ChannelEndPoint.java:188)\n>   at org.eclipse.jetty.io.WriteFlusher.write(WriteFlusher.java:335)\n>   at org.eclipse.jetty.io.AbstractEndPoint.write(AbstractEndPoint.java:125)\n>   at org.eclipse.jetty.server.HttpConnection$ContentCallback.process(HttpConnection.java:682)\n>   at org.eclipse.jetty.util.IteratingCallback.processIterations(IteratingCallback.java:166)\n>   at org.eclipse.jetty.util.IteratingCallback.iterate(IteratingCallback.java:126)\n>   at org.eclipse.jetty.server.HttpConnection.send(HttpConnection.java:303)\n>   at org.eclipse.jetty.server.HttpChannel.sendResponse(HttpChannel.java:720)\n>   at org.eclipse.jetty.server.HttpChannel.write(HttpChannel.java:751)\n>   at org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:128)\n>   at org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:122)\n>   at org.eclipse.jetty.server.HttpOutput.flush(HttpOutput.java:201)\n>   at org.glassfish.jersey.message.internal.CommittingOutputStream.flush(CommittingOutputStream.java:292)\n>   at org.glassfish.jersey.message.internal.OutboundMessageContext.commitStream(OutboundMessageContext.java:813)\n>   at org.glassfish.jersey.server.ContainerResponse.commitStream(ContainerResponse.java:393)\n>   at org.glassfish.jersey.server.ServerRuntime$Responder.writeResponse(ServerRuntime.java:612)\n>   at org.glassfish.jersey.server.ServerRuntime$Responder.processResponse(ServerRuntime.java:378)\n>   at org.glassfish.jersey.server.ServerRuntime$Responder.process(ServerRuntime.java:368)\n>   at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:262)\n>   at org.glassfish.jersey.internal.Errors$1.call(Errors.java:271)\n>   at org.glassfish.jersey.internal.Errors$1.call(Errors.java:267)\n>   at org.glassfish.jersey.internal.Errors.process(Errors.java:315)\n>   at org.glassfish.jersey.internal.Errors.process(Errors.java:297)\n>   at org.glassfish.jersey.internal.Errors.process(Errors.java:267)\n>   at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:320)\n>   at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:236)\n>   at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:1028)\n>   at org.glassfish.jersey.jetty.JettyHttpContainer.handle(JettyHttpContainer.java:192)\n>   at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:97)\n>   at org.eclipse.jetty.server.Server.handleAsync(Server.java:516)\n>   at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:288)\n>   at org.eclipse.jetty.server.HttpChannel.run(HttpChannel.java:237)\n>   at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:607)\n>   at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:536)\n>   at java.lang.Thread.run(Thread.java:722)\n> Caused by: java.nio.channels.ClosedChannelException\n>   at sun.nio.ch.SocketChannelImpl.ensureWriteOpen(SocketChannelImpl.java:251)\n>   at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:440)\n>   at org.eclipse.jetty.io.ChannelEndPoint.flush(ChannelEndPoint.java:167)\n>   ... 34 more\n\nOn 2014-10-30 14:14:49 -0400, Jessica Viles wrote:\n\n> Only seems to happen when running out of Eclipse IDE, not when running in JVM.  \n> \n> Using Eclipse IDE version:  Version: Kepler Service Release 2\n> Build id: 20140224-0627\n", "commits": {}, "title": "SSE client disconnect causes automatic reconnection on clients behalf by server after org.eclipse.jetty.io.EofException", "created": "2016-02-16 23:27:27", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/156", "commitsDetails": [], "ttf": 436.0002777777778}, {"labels": ["Bug"], "closed": "2016-05-04 06:28:03", "body": "migrated from Bugzilla [#441475](https://bugs.eclipse.org/bugs/show_bug.cgi?id=441475)\nstatus ASSIGNED severity _normal_ in component _server_ for _9.3.x_\nReported in version _9.2.2_ on platform _PC_\nAssigned to: Greg Wilkins\n\nOriginal attachment names and IDs:\n- _[log.txt](https://bugs.eclipse.org/bugs//attachment.cgi?id=245981)_ (ID 245981)\n- _[poc.tar.gz](https://bugs.eclipse.org/bugs//attachment.cgi?id=246046)_ (ID 246046)\n- _[poc-0.0.1-SNAPSHOT.war](https://bugs.eclipse.org/bugs//attachment.cgi?id=246047)_ (ID 246047)\n- _[logs.tar.gz](https://bugs.eclipse.org/bugs//attachment.cgi?id=246048)_ (ID 246048)\n\nOn 2014-08-11 01:17:39 -0400, Laszlo Hornyak wrote:\n\n> When high traffic is generated against a resource served from a webjar, the ResourceCache generates some InvalidArgumentExceptions\n> \n> Most frequently this is the exception:\n> \n> 2014-08-10 22:39:14.502:WARN:oejs.ResourceCache:qtp1875061501-46: \n> java.lang.IllegalArgumentException: invalid resource: jar:file:/home/kocka/.m2/repository/org/webjars/angularjs/1.2.22-SNAPSHOT/angularjs-1.2.22-SNAPSHOT.jar!/META-INF/resources/webjars/angularjs/1.2.21/angular.min.js len=-1\n>   at org.eclipse.jetty.util.BufferUtil.toBuffer(BufferUtil.java:874)\n>   at org.eclipse.jetty.server.ResourceCache.getIndirectBuffer(ResourceCache.java:286)\n>   at org.eclipse.jetty.server.ResourceCache$Content.getIndirectBuffer(ResourceCache.java:441)\n>   at org.eclipse.jetty.server.ResourceCache$Content.getInputStream(ResourceCache.java:488)\n>   at org.eclipse.jetty.server.HttpOutput.sendContent(HttpOutput.java:658)\n>   at org.eclipse.jetty.server.HttpOutput.sendContent(HttpOutput.java:560)\n>   at org.eclipse.jetty.servlet.DefaultServlet.sendData(DefaultServlet.java:943)\n>   at org.eclipse.jetty.servlet.DefaultServlet.doGet(DefaultServlet.java:531)\n>   at javax.servlet.http.HttpServlet.service(HttpServlet.java:687)\n>   at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)\n>   at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:769)\n>   at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:585)\n>   at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)\n>   at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:577)\n>   at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:223)\n>   at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1125)\n>   at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:515)\n>   at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185)\n>   at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1059)\n>   at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\n>   at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:215)\n>   at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:110)\n>   at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:97)\n>   at org.eclipse.jetty.server.Server.handle(Server.java:485)\n>   at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:290)\n>   at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:248)\n>   at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540)\n>   at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:606)\n>   at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:535)\n>   at java.lang.Thread.run(Thread.java:744)\n> \n> Another, less frequent exception:\n> \n> 2014-08-10 22:39:14.626:WARN:oejs.ResourceCache:qtp1875061501-73: Could not load jar:file:/home/kocka/.m2/repository/org/webjars/angularjs/1.2.22-SNAPSHOT/angularjs-1.2.22-SNAPSHOT.jar!/META-INF/resources/webjars/angularjs/1.2.21/angular.min.js true 1407696317000 java.nio.HeapByteBuffer[pos=0 lim=22 cap=22] java.nio.HeapByteBuffer[pos=0 lim=29 cap=29]\n> 2014-08-10 22:39:14.831:WARN:oejs.ResourceCache:qtp1875061501-49: \n> java.io.IOException: Stream closed\n>   at java.util.zip.InflaterInputStream.ensureOpen(InflaterInputStream.java:67)\n>   at java.util.zip.InflaterInputStream.read(InflaterInputStream.java:142)\n>   at java.io.FilterInputStream.read(FilterInputStream.java:133)\n>   at java.io.FilterInputStream.read(FilterInputStream.java:133)\n>   at org.eclipse.jetty.util.BufferUtil.readFrom(BufferUtil.java:454)\n>   at org.eclipse.jetty.util.BufferUtil.toBuffer(BufferUtil.java:885)\n>   at org.eclipse.jetty.server.ResourceCache.getDirectBuffer(ResourceCache.java:303)\n>   at org.eclipse.jetty.server.ResourceCache$Content.getDirectBuffer(ResourceCache.java:463)\n>   at org.eclipse.jetty.server.HttpOutput.sendContent(HttpOutput.java:640)\n>   at org.eclipse.jetty.server.HttpOutput.sendContent(HttpOutput.java:560)\n>   at org.eclipse.jetty.servlet.DefaultServlet.sendData(DefaultServlet.java:943)\n>   at org.eclipse.jetty.servlet.DefaultServlet.doGet(DefaultServlet.java:531)\n>   at javax.servlet.http.HttpServlet.service(HttpServlet.java:687)\n>   at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)\n>   at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:769)\n>   at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:585)\n>   at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)\n>   at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:577)\n>   at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:223)\n>   at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1125)\n>   at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:515)\n>   at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185)\n>   at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1059)\n>   at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\n>   at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:215)\n>   at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:110)\n>   at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:97)\n>   at org.eclipse.jetty.server.Server.handle(Server.java:485)\n>   at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:290)\n>   at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:248)\n>   at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540)\n>   at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:606)\n>   at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:535)\n>   at java.lang.Thread.run(Thread.java:744)\n\nOn 2014-08-13 18:42:18 -0400, Jan Bartel wrote:\n\n> Laszlo,\n> \n> What kind of load are we talking about?\n> \n> Does one of these exceptions always precede the other?\n> \n> Is maven likely to be updating the repository as jetty is running?\n> \n> What is the configuration of your webapp?\n> \n> Finally, can you provide a small test harness that reproduces the problem?\n\nOn 2014-08-14 01:23:02 -0400, Laszlo Hornyak wrote:\n\n> Hi Jan,\n> \n> (In reply to Jan Bartel from comment # 1)\n> \n> > Laszlo,\n> > \n> > What kind of load are we talking about?\n> \n> I have generated load with apache benchmark. The exceptions only appear in the log if the requested resource is from a jar file (META-INF/resources) and I run multiple threads. For example 'ab -n 10000 -c 4 http://127.0.0.1:8080/webjars/angularjs/1.2.21/angular.min.js' in this case it generated some 10+ exceptions. \n> \n> > Does one of these exceptions always precede the other?\n> \n> I do not see a clear pattern for the exceptions though, I only noticed that the first comes more often and the second comes sometimes.\n> \n> > Is maven likely to be updating the repository as jetty is running?\n> \n> No, the resource is downloaded and no other maven process running.\n> \n> > What is the configuration of your webapp?\n> > \n> > Finally, can you provide a small test harness that reproduces the problem?\n> \n> I will try to isolate the problem and attach a war file. (TODO)\n\nOn 2014-08-14 01:26:17 -0400, Laszlo Hornyak wrote:\n\n> Created attachment 245981\n> log file\n\nOn 2014-08-15 12:00:56 -0400, Laszlo Hornyak wrote:\n\n> Created attachment 246046\n> maven project that produces the demonstration war file\n\nOn 2014-08-15 12:03:02 -0400, Laszlo Hornyak wrote:\n\n> Created attachment 246047\n> built war file\n\nOn 2014-08-15 12:04:09 -0400, Laszlo Hornyak wrote:\n\n> Created attachment 246048\n> jetty log files\n\nOn 2014-08-15 12:07:52 -0400, Laszlo Hornyak wrote:\n\n> Server Software:        Jetty(9.2.2.v20140723)\n> Server Hostname:        localhost\n> Server Port:            8080\n> \n> Document Path:          /poc/webjars/angular-ui-bootstrap/0.11.0/ui-bootstrap-tpls.min.js\n> Document Length:        64353 bytes\n> \n> Concurrency Level:      4\n> Time taken for tests:   14.068 seconds\n> Complete requests:      2000\n> Failed requests:        1\n>    (Connect: 0, Receive: 0, Length: 1, Exceptions: 0)\n> Non-2xx responses:      1\n> Total transferred:      129004131 bytes\n> HTML transferred:       128644114 bytes\n> Requests per second:    142.17 [#/sec](mean)\n> Time per request:       28.136 [ms](mean)\n> Time per request:       7.034 [ms](mean, across all concurrent requests)\n> Transfer rate:          8955.02 [Kbytes/sec] received\n> \n> Connection Times (ms)\n>               min  mean[+/-sd] median   max\n> Connect:        0    0   0.3      0       9\n> Processing:     5   28  27.5     21     375\n> Waiting:        4   24  25.1     18     370\n> Total:          5   28  27.5     21     375\n> \n> Percentage of the requests served within a certain time (ms)\n>   50%     21\n>   66%     28\n>   75%     34\n>   80%     38\n>   90%     51\n>   95%     66\n>   98%    103\n>   99%    127\n>  100%    375 (longest request)\n> \n> I suspect that something is worng with the caching, otherwise the response time should be about ten times lower. Also it may be a concurrency issue as the exceptions do not come when running ab with single thread.\n\nOn 2014-08-26 03:54:57 -0400, Laszlo Hornyak wrote:\n\n> One possible reason is that JarResource always gets invalidated in the resource cache on each request, the next request will need to replace the resource created. This causes the low performance.\n\nOn 2014-08-26 04:20:55 -0400, Jan Bartel wrote:\n\n> Hi Laszlo,\n> \n> Yep, its because of the URLResource.getInputStream() method that nulls out the connection each time, which causes the JarFileResource to null out its fields, so getLength() will then return -1 because the _entry field is null, and thus the ResourceCache decides the JarFileResource is invalid.\n> \n> I am still looking into this. I will try to come up with a bandaid solution for jetty-9.2.3, but I think the real solution is to re-architect the xxResource classes for jetty-9.3.x.\n> \n> I am still testing my solution for jetty-9.2.3 - I want to make sure that it doesn't just look like its working and hasn't in fact broken somewhere else. Should have something for you in the next few days.\n> \n> regards\n> Jan\n\nOn 2014-08-26 07:45:49 -0400, Laszlo Hornyak wrote:\n\n> Thank you, Jan!\n\nOn 2014-08-27 00:45:51 -0400, Jan Bartel wrote:\n\n> Hi Lazslo,\n> \n> Fixed checked in for jetty-9.2.3.\n> \n> I'll leave this issue open for now until we also do the reimplementation for jetty-9.3.\n> \n> cheers\n> Jan\n\nOn 2015-11-13 09:44:06 -0500, Olaf Willuhn wrote:\n\n> I think, this change (https://github.com/eclipse/jetty.project/commit/SHA: 8ce96cdd2ea5af38300b8147457e84c3eee2f48d) is the reason for a \"zip file closed\", i'm now getting sometimes. Once, the problem occurs, it cannot be solved using a browser refresh. I have to restart my server.\n> \n> java.lang.IllegalStateException: zip file closed\n>         at java.util.zip.ZipFile.ensureOpen(ZipFile.java:669)\n>         at java.util.zip.ZipFile.getInputStream(ZipFile.java:351)\n>         at java.util.jar.JarFile.getInputStream(JarFile.java:447)\n>         at sun.net.www.protocol.jar.JarURLConnection.getInputStream(JarURLConnection.java:162)\n>         at org.eclipse.jetty.util.resource.URLResource.getInputStream(URLResource.java:241)\n>         at org.eclipse.jetty.util.resource.JarResource.getInputStream(JarResource.java:122)\n>         at org.eclipse.jetty.util.BufferUtil.toBuffer(BufferUtil.java:924)\n>         at org.eclipse.jetty.server.ResourceCache.getDirectBuffer(ResourceCache.java:367)\n>         at org.eclipse.jetty.server.ResourceCache$CachedHttpContent.getDirectBuffer(ResourceCache.java:589)\n>         at org.eclipse.jetty.server.HttpOutput.sendContent(HttpOutput.java:769)\n>         at org.eclipse.jetty.server.HttpOutput.sendContent(HttpOutput.java:654)\n>         at org.eclipse.jetty.servlet.DefaultServlet.sendData(DefaultServlet.java:964)\n>         at org.eclipse.jetty.servlet.DefaultServlet.doGet(DefaultServlet.java:520)\n>         at javax.servlet.http.HttpServlet.service(HttpServlet.java:687)\n>         at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)\n>         at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:821)\n>         at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:583)\n>         at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)\n>         at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:548)\n>         at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226)\n>         at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1158)\n>         at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:511)\n>         at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185)\n>         at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1090)\n>         at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\n>         at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:213)\n>         at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:119)\n>         at org.eclipse.jetty.server.Server.handle(Server.java:517)\n>         at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:306)\n>         at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:242)\n>         at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:261)\n>         at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)\n>         at org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:75)\n>         at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceAndRun(ExecuteProduceConsume.java:213)\n>         at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:147)\n>         at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:654)\n>         at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n>         at java.lang.Thread.run(Thread.java:745)\n> \n> Before Jetty 9.2.3, \"URLResource\" dropped the \"_connection\" after each use.\n> Now it's kept until \"close()\" is called explicitly.\n> \n> IF this \"JarURLConnection\" becomes unusable (i.e. when the underlying zip file was closed for whatever reason), the \"JarResource\" remains in a broken state. This is because \"checkConnection()\" only checks, if \"_connection\" is not null.\n> \n> My dirty fix in JarResource looks like this - it tries to \"auto-repair\" the connection when calling \"getInputStream\".\n> \n> private int retry = 0;\n> \n> public InputStream getInputStream() throws java.io.IOException\n> {  \n>   try\n>   {\n>     checkConnection();\n>     [...]\n>   }\n>   catch (IllegalStateException ie)\n>   {\n>     // zip file closed\n>     if (retry++ > 3)\n>       throw ie; // unable to reopen jar\n> \n> ```\n> LOG.warn(\"jar file seems to be closed, try to re-open. message was: {}\",ie.getMessage());\n> close();\n> \n> InputStream is = this.getInputStream();\n> retry = 0; // reset error count\n> return is;\n> ```\n> \n>   }\n> }\n", "commits": {}, "title": "org.eclipse.jetty.server.ResourceCache exceptions under high load", "created": "2016-02-16 23:26:48", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/153", "commitsDetails": [], "ttf": 77.00027777777778}, {"labels": ["Bug"], "closed": "2016-11-07 15:32:21", "body": "migrated from Bugzilla [#434583](https://bugs.eclipse.org/bugs/show_bug.cgi?id=434583)\nstatus ASSIGNED severity _normal_ in component _server_ for _9.2.x_\nReported in version _9.1.4_ on platform _PC_\nAssigned to: Project Inbox\n\nOn 2014-05-10 17:27:01 -0400, Thomas Meyer wrote:\n\n> Using the IPAccessHandler gives this result, when accessing jetty from IPv6 network:\n> \n> <html>\n> <head>\n> <meta http-equiv=\"Content-Type\" content=\"text/html;charset=ISO-8859-1\"/>\n> <title>Error 500 </title>\n> </head>\n> <body>\n> \n> <h2>HTTP ERROR: 500</h2>\n> \n> <p>Problem accessing /index.html. Reason:\n> <pre>    Invalid IP address: 2a01:4f8:d15:1944:0:0:0:2</pre></p>\n> \n> <hr /><i><small>Powered by Jetty://</small></i>\n> </body>\n> </html>\n> \n> The problem is that the class\n> jetty-server/src/main/java/org/eclipse/jetty/server/handler/IPAccessHandler.java\n> uses the \n> jetty-util/src/main/java/org/eclipse/jetty/util/IPAddressMap.java\n> (static class IPAddrPattern which seems only to support IPv4).\n\nOn 2014-05-13 05:06:59 -0400, Greg Wilkins wrote:\n\n> Thomas,\n> \n> we definitely want to support IPv6 completely.   However we currently don't have a good IPv6 testing environment, so it may take us a little while to get around to looking at this issue.\n> \n> So if you do have a good IPv6 test environment and if you were ever interested in contributing to the Jetty project, then this is a perfect opportunity!  It would be great to get a contribution to upgrade IPAddressMap to also handle IPv6!\n\nOn 2014-05-19 14:48:46 -0400, Thomas Meyer wrote:\n\n> > So if you do have a good IPv6 test environment and if you were ever\n> > interested in contributing to the Jetty project, then this is a perfect\n> > opportunity!  It would be great to get a contribution to upgrade\n> > IPAddressMap to also handle IPv6!\n> \n> Hi, I could implement this. But this is just a hobby project, and I have currently really little free time, so this could take a while...\n\nOn 2014-05-19 15:58:34 -0400, Greg Wilkins wrote:\n\n> Thomas,\n> \n> Jetty started out as a hobby project - 20 YEARS AGO!!! so from little things big things grow.\n> \n> We certainly don't have time to look into this at the moment, so a slow contribution would be better than no contribution!\n> \n> cheers\n", "commits": {}, "title": "IPAccessHandler doesn't work for IPv6", "created": "2016-02-16 23:26:03", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/148", "commitsDetails": [], "ttf": 264.0002777777778}, {"labels": ["Bug"], "closed": "2016-04-01 13:21:53", "body": "migrated from Bugzilla [#432943](https://bugs.eclipse.org/bugs/show_bug.cgi?id=432943)\nstatus ASSIGNED severity _normal_ in component _client_ for _9.1.x_\nReported in version _unspecified_ on platform _PC_\nAssigned to: Simone Bordet\n\nOn 2014-04-16 11:28:25 -0400, Mark Mielke wrote:\n\n> By default, Jetty Client will try the request without basic auth. Then, upon authorization failure, it will try the request with basic auth. If basic auth succeeds, it \"remembers\" this for future via an AuthenticationResult that gets cached.\n> \n> For my scenario, which is actually \"login to a JIRA backed by LDAP authentication\", when I issue HTTP basic auth requests with username and password, the requests complete in around 250 milliseconds. Once authenticated, the user's session (identified using a cookie), the request can complete in 7 milliseconds or less.\n> \n> When I use Jetty Client to authenticate, all requests are completing in the 250 millisecond range. This is because all future requests continue to include the username and password.\n> \n> I added a listener using httpClient.getRequestListeners.add() that has \"onQueued\" defined as:\n> \n> httpClient.getAuthenticationStore().clearAuthenticationResults();\n> \n> This forces the authentication results cache to always be reset before every request. After this, only the first request takes 250 milliseconds, and all future requests (until the cookie expires) complete in 7 milliseconds or less.\n> \n> This also has the added \"security\" feature that the password is not being sent with every request.\n> \n> I don't know how much of a \"special case\" this scenario is. I think Apache HttpClient may behave the same way. I'm trying to upgrade from Jersey Client 1.x / Apache HttpClient 2.2.x and my custom Jersey 1.x method of authentication handling is now broken. Getting Jersey Client 2.x to work \"properly\" has been painful. I finally threw out Jersey and went direct to Jetty Client as I have enjoyed working with your product so far.\n> \n> The above work-around \"works\". I may go production with it. But, I'm concerned about the long-term behaviour of the function, and the inherent race condition. That is, there is a race between when the Jetty Client authentication protocol handler stores the authentication results, and where the onQueued method clears it, so any concurrent queries run at the same time may re-use the authentication results. Also, I would like to know that the behaviour of the authenticator won't change in a future release that would cause the above work-around to fail. If there was a specific feature to provide this capability, then I wouldn't have to be concerned about either of these?\n> \n> In terms of implementation, I think I am asking for a documented interface to disable the newRequest.onResponseSuccess() code described below:\n> \n> AuthenticationProtocolHandler.AuthenticationListener.onComplete():\n> \n> ```\n>         newRequest.onResponseSuccess(new Response.SuccessListener()\n>         {\n>             @Override\n>             public void onSuccess(Response response)\n>             {\n>                 client.getAuthenticationStore().addAuthenticationResult(authnResult);\n>             }\n>         }).send(null);\n> ```\n> \n> Thanks!\n", "commits": {}, "title": "Jetty Client should allow preemptive basic auth to be completely disabled", "created": "2016-02-16 23:26:00", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/147", "commitsDetails": [], "ttf": 44.000277777777775}, {"labels": ["Bug"], "closed": "2016-07-14 04:31:45", "body": "migrated from Bugzilla [#430691](https://bugs.eclipse.org/bugs/show_bug.cgi?id=430691)\nstatus ASSIGNED severity _normal_ in component _jsp_ for _9.1.x_\nReported in version _9.1.2_ on platform _PC_\nAssigned to: Jesse McConnell\n\nOn 2014-03-19 08:59:41 -0400, Eirik Bj\u00c3\u00b8rsn\u00c3\u00b8s wrote:\n\n> I was testing Jetty on Java8 today, and noticed that the JDT Java compiler used by jetty-jsp does not support Java 8.\n> \n> Because of https://java.net/jira/browse/JSP-38, I was initially not able to reproduce this on Jetty 9.\n> \n> Instead, I tried it on Jetty 8.1.14 which have me the following compilation exception for some JSPs:\n> \n> org.apache.jasper.JasperException: PWC6033: Error in Javac compilation for JSP||PWC6199: Generated servlet error:|The type java.util.Map$Entry cannot be resolved. It is indirectly referenced from required .class files||\n>   at org.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:129)\n>   at org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:299)\n>   at org.apache.jasper.compiler.Compiler.generateClass(Compiler.java:392)\n>   at org.apache.jasper.compiler.Compiler.compile(Compiler.java:453)\n> \n> I then found a more recent version of jdt-core in this P2 repository:\n> \n> http://build.eclipse.org/eclipse/builds/4P/siteDir/updates/4.3-P-builds/P20140317-1600/plugins/\n> \n> by way of this wiki: http://wiki.eclipse.org/JDT/Eclipse_Java_8_Support_%28BETA%29\n> \n> Upgrading JDT to the GA release seems to fix my issues using Java 8.\n> \n> I guess this issue is blocked by either JSP-38 or switching to Apache JSP.\n> \n> Is there any legal work required for an upgrade to JDT Core 3.9.50.v20140317 ?\n\nOn 2014-03-19 09:04:35 -0400, Eirik Bj\u00c3\u00b8rsn\u00c3\u00b8s wrote:\n\n> Let me add that I've also tested the combination of JDT Core 3.9.50.v20140317 with Jetty 9.2.3 and Glasshfish JSP 2.3.3-SNAPSHOT with my patch of JSP-38 resurrecting the JDTCompiler. Seems to work fine.\n\nOn 2014-03-21 11:47:43 -0400, Jesse McConnell wrote:\n\n> eirik,\n> \n> do you have an eclipse p2 repository that contains both a binary and src artifact that solve this issue?\n\nOn 2014-03-21 11:50:06 -0400, Jesse McConnell wrote:\n\n> does this represent the stuff that works?\n> \n> http://download.eclipse.org/eclipse/downloads/drops4/R-4.3.2-201402211700/#JDTCORE\n> \n> they are different named and sized artifacts but I seem to remember ecj was just what was needed originally\n\nOn 2014-03-22 06:23:39 -0400, Eirik Bj\u00c3\u00b8rsn\u00c3\u00b8s wrote:\n\n> Jesse,\n> \n> I'm not at all familiar with P2 repositories or the Eclipse release process to say what's the right jar. \n> \n> But I've updated my test to use ecj-4.3.2.jar from your link and that works fine on both Java 8 and Java 7.\n> \n> But I guess we need to see this copies to Maven Central, right?\n\nOn 2014-03-23 23:23:13 -0400, Jan Bartel wrote:\n\n> Assigning to Jesse to handle the process for the IP clearance and availability in maven central for latest ecj compiler. Assign back to me to do the support inside the tomcat-based version of jasper\n> \n> Jan\n", "commits": {}, "title": "Support JDTJavaCompiler on Java 8", "created": "2016-02-16 23:25:44", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/146", "commitsDetails": [], "ttf": 148.00027777777777}, {"labels": ["Bug"], "closed": "2017-05-09 15:49:50", "body": "migrated from Bugzilla [#430088](https://bugs.eclipse.org/bugs/show_bug.cgi?id=430088)\nstatus ASSIGNED severity _normal_ in component _websocket_ for _9.1.x_\nReported in version _9.1.2_ on platform _PC_\nAssigned to: Joakim Erdfelt\n\nOn 2014-03-11 07:15:33 -0400, Mark Thornton wrote:\n\n> This method in org.eclipse.jetty.websocket.jsr356.annotations.OnMessageTextStreamCallable\n> \n> ```\n> public Object call(Object endpoint, Reader reader) throws DecodeException, IOException\n> {\n>     super.args[idxMessageObject] = textDecoder.decode(reader);\n>     return super.call(endpoint,super.args);\n> }\n> ```\n> \n> can be called from multiple threads. The effect is that some messages are delivered twice while others are not delivered at all!\n> \n> Simplest fix would be to clone the array before using it.\n\nOn 2014-03-14 14:17:18 -0400, Joakim Erdfelt wrote:\n\n> Can you describe the following in your scenario?\n> \n> What is the full / complete signature of your @OnMessage annotated method?\n> What is the signature of your Decoders?\n> \n> I ask this, as the behavior is rather nuanced for Streams.\n> \n> Some examples:\n> \n> If the Decoder accepts a TextStream but the object it produces is _NOT_ a Reader itself, then the decoder receives the Reader on the first frame parsed (in a dispatched scenario) and should process the reader in its entirety before the @OnMessage is called.\n> \n> But if the Decoder accepts a TextStream _AND_ the object it produces is a Reader as well, then the Decoded object is created on first frame, notified (via a dispatched call) to the @OnMessage on first frame, and subsequent frames are pushed to the internal buffer of the original Reader that the decoder received.\n> \n> This is complicated for sure, and there's no test cases (currently) for them.\n> I'll be adding a few to test out these behaviors.  Meanwhile it would be useful to know what your signatures look like.\n\nOn 2014-03-14 15:32:58 -0400, Mark Thornton wrote:\n\n> public class AbstractJaxbDecoder<T> implements Decoder.TextStream<T>\n> {\n> public synchronized T decode(Reader reader) throws DecodeException, IOException\n> {\n> // use JAXB Unmarshaller to parse the stream\n> }\n> }\n> \n> @OnMessage public void onMessage(NetworkRequest request)\n> \n> where NetworkRequest is decoded by the decoder above.\n> \n> However the problem in this case is the array super.args which is common to all threads using the instance. This is vulnerable between the point that the element [idxMessageObject] is set and when it is used by the reflection in super.call(...). Although this window is short, it does happen more frequently than I might have expected. Unfortunately it is also a classic heisenbug in that trivial modifications to the environment affect the result.\n\nOn 2014-03-14 16:28:33 -0400, Joakim Erdfelt wrote:\n\n> In your case, there's a problem with your report.\n> \n> The reading thread is single threaded, \n> it parses raw network bytes, \n> on a completed frame it notifies the upstream,\n> the upstream calling of Decoder and @OnMessage is never multi-threaded.\n> \n> The OnMessageTextStreamCallable is created per instance of the Endpoint, so there's not even any shared instances between Endpoints.\n> \n> Still fleshing out a decent test case for this, but the multi-threaded concern is bothersome.\n> \n> Are you doing something strange with regards to the Configurator where you are managing your own .getEndpointInstance() perchance?\n\nOn 2014-03-14 16:43:15 -0400, Mark Thornton wrote:\n\n> Each message is decoded on a different thread (in general) when using Stream decoders. It is how you handle pushing data to a stream decoder. When the decoder is completed the message is passed to onMessage on that same thread.\n\nOn 2014-03-14 16:48:39 -0400, Joakim Erdfelt wrote:\n\n> Added a JSR Client side test for Decode.TextStream behavior to commit [master e141786]\n\nOn 2014-03-14 16:49:39 -0400, Joakim Erdfelt wrote:\n\n> Why are you spawning a thread to perform the decoding?\n> Implementations of JSR-356 should be dispatching to a new thread for you when working with Streams.\n\nOn 2014-03-14 16:53:52 -0400, Joakim Erdfelt wrote:\n\n> Are you using any sort of custom websocket extension that is doing message interleaving?\n\nOn 2014-03-14 17:02:58 -0400, Mark Thornton wrote:\n\n> I'm not spawning the thread, Jetty provides it.\n> \n> This is some trace from within the onMessage method:\n> \n> Received request 1, class=uk.co.optrak.roadmap.services.types.ConnectedLinksRequest, thread=qtp138741741-31\n> concurrent onMessage\n> Received request 0, class=uk.co.optrak.roadmap.services.types.SetVehicleDescription, thread=qtp138741741-35\n> \n> The requests were sent with incrementing message ids. The trace is showing the id as received, the class of message (subclasses of NetworkRequest) and the thread name on which it is received (at the server). The fact that the messages are out of order, and the the handler for message 1 had not completed before it was called with message 0, is the subject of a separate report. The issue here is that because separate threads are in use, the sharing across threads of the array used to construct the call is unsafe.\n> \n> I am not using any extensions or custom configuration.\n\nOn 2014-03-14 17:40:21 -0400, Joakim Erdfelt wrote:\n\n> Working on validating this on the server side as well, but ...\n> \n> That's the order of creation for a OnMessageTextStreamCallable.\n> \n> Each endpoint instance gets its own.\n> The args[] array is created / copied for each instance of OnMessageTextStreamCallable already.\n> \n>   OnMessageTextStreamCallable.<init>(OnMessageCallable) line: 53  \n>   JsrEvents<T,C>.<init>(AnnotatedEndpointMetadata<T,C>) line: 99  \n>   JsrClientEndpointImpl.create(Object, WebSocketPolicy) line: 49  \n>   JsrEventDriverFactory(EventDriverFactory).wrap(Object) line: 118  \n>   WebSocketClient.connect(Object, URI, ClientUpgradeRequest, UpgradeListener) line: 194  \n>   ClientContainer.connect(EndpointInstance, URI) line: 135  \n>   ClientContainer.connectToServer(Object, URI) line: 186  \n> \n> So that means ...\n> \n> https://github.com/eclipse/jetty.project/blob/master/jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/annotations/OnMessageTextStreamCallable.java#L50\n> \n> which is the copy constructor ...\n> \n> https://github.com/eclipse/jetty.project/blob/master/jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/annotations/OnMessageCallable.java#L51\n> \n> which creates the array ...\n> \n> https://github.com/eclipse/jetty.project/blob/master/jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/annotations/JsrCallable.java#L61-L68\n> \n> which then copies the values of the array ...\n> \n> https://github.com/eclipse/jetty.project/blob/master/jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/annotations/JsrCallable.java#L61-L68\n\nOn 2014-03-14 17:54:25 -0400, Mark Thornton wrote:\n\n> Right, but if you now send two messages from a single client to the same endpoint, the thread decoding the first message is suspended for some reason immediately after assigning the result into that array, then the second message has a chance to 'overtake' it and replace that value in the same array. Now the calls take place and what we see is the second message being delivered twice  while the first is lost.\n> \n> The decode method on my decoder is synchronized which seems to raise the probability of this unfortunate sequence of events. My test environment involves lots of very short messages that are quick decode and are sent with no significant gap. Why do I use a stream decoder: at least some of the real messages would be rather bigger than my test cases.\n> \n> So to get this problem requires the use of stream decoders and a rapid sequence of small messages from a client to an endpoint instance. The client and server probably have to be on the same machine, otherwise network delays would make the event very unlikely.\n\nOn 2014-03-14 18:07:48 -0400, Joakim Erdfelt wrote:\n\n> I can set up a test case for that easily enough.\n> But it still shouldn't be possible, as the parse/decode/notify is still single threaded.\n> The first decode would need to finish + notification would have to complete before the second message even starts being parsed or read from the network.\n\nOn 2014-03-14 18:09:49 -0400, Joakim Erdfelt wrote:\n\n> Also, \"big messages\" in a websocket sense are messages over your memory capacity.\n> We have load tests that utilize 40MB messages as single delivery \"whole\" messages without streaming or compression just fine.\n\nOn 2014-03-14 18:12:10 -0400, Joakim Erdfelt wrote:\n\n> (In reply to Mark Thornton from comment # 10)\n> \n> > Right, but if you now send two messages from a single client to the same\n> > endpoint, the thread decoding the first message is suspended for some reason\n> > immediately after assigning the result into that array, then the second\n> > message has a chance to 'overtake' it and replace that value in the same\n> > array. Now the calls take place and what we see is the second message being\n> > delivered twice  while the first is lost.\n> \n> Again, if that first message is suspended, then the delivery to @OnMessage for that first message is also suspended.\n> If that is suspended, then the second message isn't even parsed.\n> No overtake possible here.\n\nOn 2014-03-14 18:40:25 -0400, Joakim Erdfelt wrote:\n\n> Commit [master 81c5ca7]\n> \n> ```\n> + Adding testcase for Decoder.TextStream and lots of short messages with\n>   order indicator (for the order in which they were sent)\n>   Test case validates that all of the messages were received, not that\n>   they were in any particular order (as the use of Streaming prevents\n>   reliable ordering)\n> + Adding defensive copy of callable array in order to prevent any\n>   possibility of concurrency issues with streams and dispatched\n>   calls.\n> ```\n\nOn 2014-03-14 18:46:00 -0400, Joakim Erdfelt wrote:\n\n> Feel free to test this defensive change out.\n> The new test case does not fail on Linux w/JDK 7u51, Windows 7 w/JDK 7u45, or OSX 10.9.2 w/ JDK 7u45. (even without the defensive change)\n> \n> Added the defensive copy anyway.\n> \n> Know this, your use case for websocket streaming is really abusing the API.\n> Unless your messages are consistently over 1MB then you should really be using whole message delivery.  It uses less memory, less threads, message order delivery is guaranteed, produces less GC churn, faster throughput, can handle more connections, etc ...\n> \n> Streaming websocket was really not designed for a scenario where the majority of messages received are small.\n\nOn 2014-04-09 10:27:08 -0400, Mark Thornton wrote:\n\n> I changed to whole message delivery, however despite calling this on opening a session (inside the @OnOpen method):\n> \n> ```\n>   session.setMaxTextMessageBufferSize(500000);\n> ```\n> \n> I get this\n> \n> org.eclipse.jetty.websocket.api.MessageTooLargeException: Text message size [321106] exceeds maximum size [65536]\n>   at org.eclipse.jetty.websocket.api.WebSocketPolicy.assertValidTextMessageSize(WebSocketPolicy.java:140)\n>   at org.eclipse.jetty.websocket.common.Parser.assertSanePayloadLength(Parser.java:126)\n>   at org.eclipse.jetty.websocket.common.Parser.parseFrame(Parser.java:476)\n>   at org.eclipse.jetty.websocket.common.Parser.parse(Parser.java:253)\n>   at org.eclipse.jetty.websocket.common.io.AbstractWebSocketConnection.read(AbstractWebSocketConnection.java:500)\n>   at org.eclipse.jetty.websocket.common.io.AbstractWebSocketConnection.onFillable(AbstractWebSocketConnection.java:409)\n> \n> How are you permitting larger messages?\n\nOn 2014-04-09 10:40:37 -0400, Mark Thornton wrote:\n\n> The instance of WebSocketPolicy associated with the frame parser is not the same as the instance associated with the session, so my bigger limits have no effect.\n\nOn 2014-05-06 15:35:00 -0400, Joakim Erdfelt wrote:\n\n> Interesting, that technique for JSR endpoints is not tested.\n> \n> Here's the thing, if you use an annotated @OnMessage, then you have an @OnMessage(maxMessageSize = 111222) technique.\n> \n> If you use Session.addMessageHandler(myHandler), then the Session.setMaxTextMessageBufferSize(int) takes effect.\n> \n> Otherwise the @OnMessage use without parameters _should_ indicate a -1 (or no max messages size) limit.\n\nOn 2015-12-17 06:56:55 -0500, Haresh Moradiya wrote:\n\n> This issue comes while sender message size is greater than server side setMaxBinaryMessageBufferSize /setMaxTextMessageBufferSize.\n", "commits": {}, "title": "OnMessage*Callable decoding of streaming binary or text is not thread safe", "created": "2016-02-16 23:25:32", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/145", "commitsDetails": [], "ttf": 447.0002777777778}, {"labels": ["Bug"], "closed": "2016-06-10 06:26:10", "body": "migrated from Bugzilla [#429519](https://bugs.eclipse.org/bugs/show_bug.cgi?id=429519)\nstatus ASSIGNED severity _normal_ in component _server_ for _9.1.x_\nReported in version _9.1.0_ on platform _PC_\nAssigned to: Jan Bartel\n\nOn 2014-03-03 17:50:24 -0500, Nathan Robinson wrote:\n\n> The checkValid() method (in AbstractSession.java) has access to '_invalid' in an unsynchronzied block, whereas all other access to that field is wrapped in a synchronized block.\n> \n> I suspect this is not intended.\n\nOn 2014-03-13 01:28:19 -0400, Jan Bartel wrote:\n\n> Hi Nathan,\n> \n> The checkValid() method is mostly called from within synchronized blocks, so does not necessarily need to be synchronized itself.\n> \n> I say \"mostly\" because there are a couple of cases where it is not called from sync blocks:\n> - getCreationTime()\n> - getLastAccessedTime()\n> - isNew()\n> - invalidate()\n> \n> Of these, the first 2 are probably oversights, and could probably be changed to use sync blocks. However, the last 2 I don't want to change because of unexpected effects - invalidate() could potentially involve deadlocks. \n> \n> This is not as dire as it sounds, as it is relatively rare that the same session is accessed from different threads concurrently.\n> \n> The better plan would be to rewrite the session management code, for which there is already an issue open: https://bugs.eclipse.org/bugs/show_bug.cgi?id=429359\n> \n> So, in summary, unless you've got a case where the missing synchronization for these calls of checkValid() is a demonstrable problem, then I'd rather address the rewrite.\n> \n> regards\n> Jan\n\nOn 2014-03-13 12:31:16 -0400, Nathan Robinson wrote:\n\n> Hi Jan,\n> \n> I don't think it's as rare as you may think. Most web browsers, by default, have 2 open connections to a webserver and some have 10, not including websockets (or other transport protocols) that may be in use.\n> \n> I noticed this because I have multiple threads that could call invalidate() at the same time -- which resulted in exceptions getting thrown. My investigation lead to this \"not every access is synchronized\" issue, and so I synchronized my own calls to alleviate this issue -- and I suspect there are similar workarounds in other concurrent projects.\n> \n> As you said, a better plan would be to rewrite session management and I agree that introducing potential deadlocks requires a very careful evaluation of what to do. \n> \n> Until sessions are rewritten, at least others have something to go on, as I suspect that others have said \"wtf is going on here\" when looking at their logs and noticing that a session's invalid state isn't always correct.\n> \n> Thank you for your time,\n> -nathan\n", "commits": {}, "title": "session checkValid not synchronized", "created": "2016-02-16 23:25:25", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/144", "commitsDetails": [], "ttf": 114.00027777777778}, {"labels": ["Bug"], "closed": "2018-03-13 20:32:58", "body": "migrated from Bugzilla [#428114](https://bugs.eclipse.org/bugs/show_bug.cgi?id=428114)\nstatus ASSIGNED severity _normal_ in component _server_ for _9.1.x_\nReported in version _9.1.1_ on platform _PC_\nAssigned to: Greg Wilkins\n\nOriginal attachment names and IDs:\n- _[FileNoticeLifeCycleListener.java](https://bugs.eclipse.org/bugs//attachment.cgi?id=241081)_ (ID 241081)\n\nOn 2014-02-13 10:53:31 -0500, Brian Crockett wrote:\n\n> I am attempting to monitor the jetty.state file for the status of my webapps. It appears that the file is created on the filesystem with permissions of the user that started jetty. I am using the setuid plugin to run jetty as 'nobody'. The file gets created, but then jetty complains in stderror.log file that jetty.state can't be written to. I suspect because it created the file before it dropped privileges.\n> \n> drwxrwxr-x. 12 nobody nobody 4.0K Feb 13 15:22 .\n> drwxrwxr-x.  7 nobody nobody 4.0K Jan 17 19:48 ..\n> drwxrwxr-x.  3 nobody nobody 4.0K Jan 17 19:46 bin\n> drwxrwxr-x.  8 nobody nobody 4.0K Jan 17 19:46 demo-base\n> drwxrwxr-x.  3 nobody nobody 4.0K Feb 12 20:54 etc\n> -rw-rw-r--.  1 bcrockett          bcrockett            99 Feb 13 15:22 jetty.state\n> drwxrwxr-x. 13 nobody nobody 4.0K Jan 17 19:46 lib\n> -rw-rw-r--.  1 nobody nobody  30K Jan 17 19:46 license-eplv10-aslv20.html\n> drwxrwxr-x.  3 nobody nobody 4.0K Feb 13 15:22 logs\n> drwxrwxr-x.  4 nobody nobody 4.0K Jan 17 19:46 modules\n> -rw-rw-r--.  1 nobody nobody 6.2K Jan 17 19:46 notice.html\n> -rw-rw-r--.  1 nobody nobody 1.2K Jan 17 19:46 README.TXT\n> drwxrwxr-x.  3 nobody nobody 4.0K Jan 17 19:46 resources\n> drwxrwxr-x.  4 nobody nobody 4.0K Jan 17 19:46 start.d\n> -rw-rw-r--.  1 nobody nobody 2.1K Jan 17 19:46 start.ini\n> -rw-rw-r--.  1 nobody nobody  81K Jan 17 19:46 start.jar\n> drwxrwxr-x.  6 nobody nobody 4.0K Jan 17 19:58 .svn\n> -rw-rw-r--.  1 nobody nobody 344K Jan 17 19:46 VERSION.txt\n> drwxrwxr-x.  3 nobody nobody 4.0K Jan 17 19:58 webapps\n> \n> 2014-02-13 15:00:50.694:WARN:oejuc.FileNoticeLifeCycleListener:Thread-1:\n> java.io.FileNotFoundException: /home/bcrockett/jetty-9.1.1/jetty.state (Permission denied)\n>         at java.io.FileOutputStream.open(Native Method)\n>         at java.io.FileOutputStream.<init>(FileOutputStream.java:221)\n>         at java.io.FileOutputStream.<init>(FileOutputStream.java:142)\n>         at java.io.FileWriter.<init>(FileWriter.java:78)\n>         at org.eclipse.jetty.util.component.FileNoticeLifeCycleListener.writeState(FileNoticeLifeCycleListener.java:45)\n>         at org.eclipse.jetty.util.component.FileNoticeLifeCycleListener.lifeCycleStopping(FileNoticeLifeCycleListener.java:72)\n>         at org.eclipse.jetty.util.component.AbstractLifeCycle.setStopping(AbstractLifeCycle.java:195)\n>         at org.eclipse.jetty.util.component.AbstractLifeCycle.stop(AbstractLifeCycle.java:89)\n>         at org.eclipse.jetty.util.thread.ShutdownThread.run(ShutdownThread.java:132)\n\nOn 2014-03-20 23:28:05 -0400, Greg Wilkins wrote:\n\n> **\\* Bug 428900 has been marked as a duplicate of this bug. ***\n\nOn 2014-03-20 23:29:03 -0400, Greg Wilkins wrote:\n\n> I've tried to reproduce, and while the state file is owned by root, I am not getting that exception?\n> \n> can you do an ls -l of the jetty.state file?  perhaps it has to do with the umask?\n\nOn 2014-03-20 23:35:55 -0400, Greg Wilkins wrote:\n\n> Created attachment 241081\n> Alternate implementation\n> \n> Perhaps try with this impl of the lifecyclelistener.\n> \n> This opens the file when it is constructed and keeps it open, so it should survive through setuid.\n> \n> Still a mystery why it works for me?   So would like to see your umasks and full ls -l of the file and directory as well.\n\nOn 2014-03-24 11:05:13 -0400, Brian Crockett wrote:\n\n> (In reply to Greg Wilkins from comment # 3)\n> \n> > Created attachment 241081 [details]\n> > Alternate implementation\n> > \n> > Perhaps try with this impl of the lifecyclelistener.\n> > \n> > This opens the file when it is constructed and keeps it open, so it should\n> > survive through setuid.\n> > \n> > Still a mystery why it works for me?   So would like to see your umasks and\n> > full ls -l of the file and directory as well.\n> \n> umask for the directory is:\n> \n> [bcrockett@config-1 jetty-latest]$ umask\n> 0002\n> \n> I've provided the full 'ls -l' when I opened the ticket - could you be more clear? I'm happy to provide it. \n> \n> I'm spinning up a node to see if I can test your lifecyclelistener, but admittedly I'm not a developer so we'll see how that goes.\n\nOn 2014-03-24 11:15:22 -0400, Brian Crockett wrote:\n\n> I believe this is due to a previous assumption of my predecesor.\n> \n> It seems that the environment variable had been set:\n> \n> UMASK=\"002\"\n> \n> However, in the start.d directory there was a (commented) line for:\n> jetty.umask=002\n> \n> After uncommenting that line, my error seems to have been resolved. \n> \n> Side note - I don't know that it's appropriate for me to change the STATE on the ticket.\n\nOn 2014-03-24 11:41:43 -0400, Brian Crockett wrote:\n\n> Something I hadn't noticed before (I was testing the before/after)\n> \n> It it seems that the error reveals itself on jetty stop.\n> \n> While I think my jetty setuid changes are more 'technically correct', they don't seem to be at the root of the issue.\n\nOn 2014-04-10 21:03:40 -0400, Greg Wilkins wrote:\n\n> thanks for the update.  I'll keep this open and look at your alternate implementation in due course.\n\nOn 2014-12-16 16:43:45 -0500, Brian Crockett wrote:\n\n> It tooks some doing, but I've recompiled jetty with your change. It seems that the jetty.state file is still owned by root. While the error in the logfile is now gone, I suspect the core issue (file creation before permissions drop) still exists. \n> \n> [bcrockett@tc-testjetty-1 webapps]$ ls -alh /var/ryl/runtime/j2ee/jetty-latest/logs/\n> total 72K\n> drwxr-xr-x.  3 nobody        nobody        4.0K Dec 16 21:38 .\n> drwxr-xr-x. 11 bcrockett bcrockett 4.0K Dec 16 21:38 ..\n> -rw-rw-r--.  1 root          root           17K Dec 16 21:39 2014_12_16.request.log\n> -rw-r--r--.  1 root          root          2.5K Dec 16 21:39 2014_12_16.stderrout.log\n> -rw-r--r--.  1 root          root          2.6K Dec 16 19:51 2014_12_16.stderrout.log.195202096\n> -rw-r--r--.  1 root          root          5.1K Dec 16 21:26 2014_12_16.stderrout.log.212645886\n> -rw-r--r--.  1 root          root           17K Dec 16 21:31 2014_12_16.stderrout.log.213202690\n> -rw-r--r--.  1 root          root          3.0K Dec 16 21:37 2014_12_16.stderrout.log.213803083\n> -rw-r--r--.  1 bcrockett bcrockett    0 Dec 16 19:49 .donotdelete\n> drwxr-xr-x.  6 bcrockett bcrockett 4.0K Dec 16 19:50 .svn\n> [bcrockett@tc-testjetty-1 webapps]$ ls -alh /var/ryl/runtime/j2ee/jetty-latest/logs/^C\n> [bcrockett@tc-testjetty-1 webapps]$ ls -alh /var/ryl/runtime/j2ee/jetty-latest/jetty.state \n> -rw-r--r--. 1 root root 99 Dec 16 21:38 /var/ryl/runtime/j2ee/jetty-latest/jetty.state\n\nOn 2014-12-31 10:08:14 -0500, Greg Wilkins wrote:\n\n> **\\* Bug 453416 has been marked as a duplicate of this bug. ***\n", "commits": {}, "title": "jetty.state file permissions with setuid enabled", "created": "2016-02-16 23:24:40", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/140", "commitsDetails": [], "ttf": 755.0002777777778}, {"labels": ["Bug"], "closed": "2016-03-10 08:48:25", "body": "migrated from Bugzilla [#427878](https://bugs.eclipse.org/bugs/show_bug.cgi?id=427878)\nstatus ASSIGNED severity _normal_ in component _client_ for _9.1.x_\nReported in version _9.1.1_ on platform _PC_\nAssigned to: Simone Bordet\n\nOn 2014-02-11 05:31:06 -0500, Simone Bordet wrote:\n\n> If a proxy requires authentication, and the destination is a HTTPS server, then the CONNECT request to the proxy lacks the Proxy-Authenticate header, which leads to failure to authenticate with the proxy and ultimately to fail to send requests to the target server.\n", "commits": {}, "title": "Proxy authentication to HTTPS servers does not work", "created": "2016-02-16 23:24:16", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/138", "commitsDetails": [], "ttf": 22.00027777777778}, {"labels": ["Bug"], "closed": "2016-02-23 12:43:25", "body": "migrated from Bugzilla [#420234](https://bugs.eclipse.org/bugs/show_bug.cgi?id=420234)\nstatus ASSIGNED severity _normal_ in component _server_ for _9.1.x_\nReported in version _9.1.0_ on platform _All_\nAssigned to: Project Inbox\n\nOn 2013-10-24 01:10:56 -0400, Greg Wilkins wrote nothing.\nOn 2014-06-25 13:02:28 -0400, Mikhail Mazursky wrote:\n\n> As a quick improvement of the current situation I think it is possible to remove finalize() method from Resource class and only add it to classes where close() is not empty. This could decrease the number of objects that need to be finalized and hence help GC.\n", "commits": {}, "title": "Remove Resource finalizers", "created": "2016-02-16 23:23:15", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/130", "commitsDetails": [], "ttf": 6.000277777777778}, {"labels": ["Bug"], "closed": "2017-10-06 13:33:56", "body": "migrated from Bugzilla [#419191](https://bugs.eclipse.org/bugs/show_bug.cgi?id=419191)\nstatus ASSIGNED severity _normal_ in component _server_ for _9.1.x_\nReported in version _8.1.13_ on platform _All_\nAssigned to: Greg Wilkins\n\nOn 2013-10-10 22:00:15 -0400, xzer lr wrote:\n\n> At first, the background is that we using a shell to login into the\n> remote server and restart the jetty service on the remote server by\n> ssh, it works well until the version 8.1.8.\n> \n> Then, we decided to upgrade our jetty distributions to the newest\n> 8.1.13, as a test result, we found that the startJetty.sh will hang up\n> the remote ssh session.\n> \n> I dug the new startJetty.sh and found that it will not use\n> start-stop-daemon to start jetty process when the current user is not\n> root. I tried to study the commit logs, then I found the commit\n>  (commit id:SHA: 38d701753c3105600ac189d97c2f5a8b2ea44371)\n> for bug[403281]: \"jetty.sh waits for started before OK\". \n> \n>  ##################################################\n>  # Setup JAVA if unset\n> @@ -407,23 +428,15 @@ case \"$ACTION\" in\n>        exit\n>      fi\n> -    if type start-stop-daemon > /dev/null 2>&1 \n> -    if [ $UID -eq 0 ] && type start-stop-daemon > /dev/null 2>&1 \n>    then\n>      unset CH_USER\n>      if [ -n \"$JETTY_USER\" ]\n>      then\n>        CH_USER=\"-c$JETTY_USER\"\n>      fi\n> -      if start-stop-daemon -S -p\"$JETTY_PID\" $CH_USER -d\"$JETTY_HOME\" -b -m -a \"$JAVA\" -- \"${RUN_ARGS[@]}\" --daemon\n> -      then\n> -        sleep 1\n> -        if running \"$JETTY_PID\"\n> -        then\n> -          echo \"OK\"\n> -        else\n> -          echo \"FAILED\"\n> -        fi\n> -      fi\n>   +\n> -      start-stop-daemon -S -p\"$JETTY_PID\" $CH_USER -d\"$JETTY_HOME\" -b -m -a \"$JAVA\" -- \"${RUN_ARGS[@]}\" --daemon\n> \n> Then I checked the bug ticket too: https://bugs.eclipse.org/bugs/show_bug.cgi?id=403281, \n> but there seems be nothing about the root user check.\n\nOn 2013-10-13 22:54:25 -0400, Greg Wilkins wrote:\n\n> start-stop-daemon is intended for system processes, hence we added that test.\n> \n> Can you explain what you mean by \"hang up the remote ssh session\"?\n> \n> The alternative to start-stop-daemon does a disown of the process, so it should be running correctly in the background.\n\nOn 2013-10-14 21:36:04 -0400, xzer lr wrote:\n\n> sorry, it seems that I missed typing some words in my description.\n> \n> we are using a shell script to login into the remote server automatically and restart the jetty server on the remote server by the following command:\n> \n> ssh someuser@xxx.xx.x.xx 'jetty.sh restart'\n> \n> since the 'someuser' is not root, your new jetty.sh will not start jetty by start-stop-daemon, hence the ssh session will catch the sysout and syserr from jetty process then hang up to wait the jetty process to finish.\n", "commits": {}, "title": "unnecessary root user check in jetty.sh", "created": "2016-02-16 23:23:01", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/128", "commitsDetails": [], "ttf": 597.0002777777778}, {"labels": ["Bug"], "closed": "2016-05-04 06:26:54", "body": "migrated from Bugzilla [#417223](https://bugs.eclipse.org/bugs/show_bug.cgi?id=417223)\nstatus REOPENED severity _normal_ in component _server_ for _9.0.x_\nReported in version _9.1.0_ on platform _All_\nAssigned to: Greg Wilkins\n\nOn 2013-09-13 16:01:22 -0400, Joakim Erdfelt wrote:\n\n> Since most of our code has been switched to use java.util.concurrent.Executor (such as the ServerConnector and whatnot).\n> \n> Is it time now to eliminate the org.eclipse.jetty.util.thread.ThreadPool interface and class?\n\nOn 2013-09-15 20:58:18 -0400, Greg Wilkins wrote:\n\n> No.\n> \n> Executor is the API for a consumer of execution services.\n> \n> ThreadPool is-a Executor, but with some extra management method on it which are used in features such as resource monitoring.\n> \n> We should reduce the usage of the ThreadPool API and only use Executor in places that only need to dispatch something to be executed, but at the Server layer at least we need to insist that our Executor impl is-a ThreadPool, so we can access the management methods.\n\nOn 2013-09-15 21:00:12 -0400, Joakim Erdfelt wrote:\n\n> Fair enough, it only came up as people in the process of migrating were confused that there seemed to be no way to setup or control threadpool in the connectors anymore.\n> \n> Once we pointed out that the connectors are using executors and that QTP is an executor, it clicked, but it was still confusing in the javadoc and documentation.\n\nOn 2013-09-15 21:14:44 -0400, Greg Wilkins wrote:\n\n> Reopened to improve the javadoc\n", "commits": {}, "title": "Improve javadoc surrounding Executors and org.eclipse.jetty.util.thread.ThreadPool", "created": "2016-02-16 23:22:57", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/127", "commitsDetails": [], "ttf": 77.00027777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "jmcc0nn3ll", "filteredCommits": ["8e0725db1c6f0da90e4611e97be43e9ab6c2b536"], "commits": {"8e0725db1c6f0da90e4611e97be43e9ab6c2b536": {"commitUser": "janbartel", "commitGHEventType": "referenced"}}, "created": "2016-02-16 23:22:40", "commitsDetails": [{"commitMessage": "Issue #123\n\nMake sync on id generation more tightly scoped.\n", "commitParents": ["be3085d5f7a37c3ab8f98071be409d6851438c03"], "commitHash": "8e0725db1c6f0da90e4611e97be43e9ab6c2b536", "commitSpoonAstDiffStats": [{"spoonFilePath": "DefaultSessionIdManager.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.session.DefaultSessionIdManager.newSessionId(javax.servlet.http.HttpServletRequest,long)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 8, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.server.session.DefaultSessionIdManager.newSessionId(long)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}], "nameRev": "8e0725db1c6f0da90e4611e97be43e9ab6c2b536 tags/jetty-9.4.0.v20161208~2^2~5", "commitUser": "janbartel", "authoredDateTime": "2016-12-08 11:29:13", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 118, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/session/DefaultSessionIdManager.java", "insertions": 60, "deletions": 58}], "commitDateTime": "2016-12-08 11:29:13", "spoonStatsSkippedReason": ""}], "title": "AbstractSessionIdManager can't atomically check for uniqueness of new session ID", "spoonStatsSummary": {"spoonMethodsChanged": 2, "DEL": 1, "INS": 1, "UPD": 0, "MOV": 9, "TOT": 11, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 118, "insertions": 60, "gitFilesChange": 1, "deletions": 58}, "closed": "2016-12-08 00:32:56", "statsSkippedReason": "", "body": "migrated from Bugzilla [#414348](https://bugs.eclipse.org/bugs/show_bug.cgi?id=414348)\nstatus ASSIGNED severity _normal_ in component _server_ for _9.0.x_\nReported in version _9.0.4_ on platform _PC_\nAssigned to: Greg Wilkins\n\nOn 2013-08-02 21:49:16 -0400, Eli Bishop wrote:\n\n> This is a race condition so unlikely that I can't think how you could go about reproducing the problem, but I think the code is pretty obviously flawed.\n> \n> In AbstractSessionIdManager.newSessionId(HttpServletRequest, long), there is a while loop with the condition \"id==null||id.length()==0||idInUse(id)\"; it continues generating new random session IDs until \"idInUse\" returns false; then at some point later, it saves the new session using the last ID generated.\n> \n> However, that doesn't actually ensure that the session ID is unique-- just that it was unique at the top of the loop. If another thread/process happens to generate the same ID at roughly the same time, they will both end up trying to use it.\n> \n> What is really needed there is an atomic test-and-set - check whether the session ID exists and, if it didn't exist, store some data indicating that it's now in use even though there isn't yet a corresponding session. Unfortunately, the SessionIdManager interface has no method with those semantics, and it wouldn't be safe to redefine idInUse() to work that way because idInUse() is also used elsewhere in a context where you do _not_ want to create that ID. So this would probably have to be a backward-incompatible interface change.\n\nOn 2013-08-02 22:34:27 -0400, Eli Bishop wrote:\n\n> Note that an attempt by the developer of \"jetty-nosql-memcached\" to work around this issue - by overriding idInUse() to do what I described in my last paragraph - caused a much more blatant bug (https://github.com/yyuu/jetty-nosql-memcached/issues/18). I don't think there is any valid workaround for this issue in the current Jetty architecture.\n", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server/session"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.session.DefaultSessionIdManager.newSessionId(javax.servlet.http.HttpServletRequest,long)", "org.eclipse.jetty.server.session.DefaultSessionIdManager.newSessionId(long)"], "ttf": 295.0002777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/123"}, {"labels": ["Bug"], "closed": "2017-09-14 09:11:02", "body": "migrated from Bugzilla [#412983](https://bugs.eclipse.org/bugs/show_bug.cgi?id=412983)\nstatus ASSIGNED severity _major_ in component _server_ for _9.0.x_\nReported in version _9.0.3_ on platform _PC_\nAssigned to: Simone Bordet\n\nOriginal attachment names and IDs:\n- _[__Test_Jetty9ClientAuthBug.java](https://bugs.eclipse.org/bugs//attachment.cgi?id=233480)_ (ID 233480)\n- _[ssl_cneeded_debug.txt](https://bugs.eclipse.org/bugs//attachment.cgi?id=233481)_ (ID 233481)\n- _[jetty9_bugtrace.pcap](https://bugs.eclipse.org/bugs//attachment.cgi?id=233482)_ (ID 233482)\n- _[ssl_jetty9.1.x.txt](https://bugs.eclipse.org/bugs//attachment.cgi?id=233692)_ (ID 233692)\n\nOn 2013-07-15 10:50:44 -0400, Lothar Kimmeringer wrote:\n\n> Created attachment 233480\n> JUnit-Testcase to reproduce the problem\n> \n> Before finding the register-button for Bugzilla I already described the problem in http://dev.eclipse.org/mhonarc/lists/jetty-users/msg03542.html\n> \n> Here is the mail again:\n> \n> I'm currenty doing a migration from Jetty 7 to Jetty 9 and\n> run into problems when setting up an SSL-server with and without\n> needed client certificates. The problems are similar to the\n> mail at http://dev.eclipse.org/mhonarc/lists/jetty-users/msg03102.html\n> but it goes farther.\n> \n> [...]\n> \n> The problem is that the server doesn't generate SSL-Alerts leaving\n> the client in a socket.read() until that client is running into a\n> timeout (which might be never in dependence on how the socket is\n> created). The closing of the endpoint in oej.io.ssl.SslConnection\n> doesn't seem to have any effect. Until there is a garbage collector\n> run the socket stays open. Sooner or later (on low-traffic systems\n> expect it to be the latter) the sockets are closed, so at least\n> you shouldn't be able to construct a DoS-attack with this.\n> \n> To reproduce the problem I created a JUnit-testcase that allows\n> an easy reproduction of the problem. As well you can see another\n> problem occuring if you comment out lines 249-252 leading to the\n> effect that the server get no server-certificates for the connection.\n> In that case testSslStandardConnection will also end in a read\n> timeout (in that case after two minutes).\n> \n> In addition to that I added the Wireshark-trace of the second\n> test showing that no SSL-Alert is sent to the client and that\n> the connection is only closed after the client ran into the timeout.\n> Don't get confused by the IPs being involved. I ran a TCP-gateway\n> on a second computer to be able to capture the packets, since\n> this doesn't work here on the loopback device.\n> \n> If this bug-report is better sent to jetty-dev, just tell me \n> JVM being used for the test is JDK 1.7.0_21 on Windows 32 Bit.\n> The testcase uses BouncyCastle for the creation of the certificates\n> the server should use. The testcase sets its own KeyStore,\n> KeyManager and TrustManager, so you don't need to create\n> file-based KeyStores before starting the test.\n> \n> This bug stopped our migration, so a fix is highly appreciated \n> \n> Best regards,\n> \n> Lothar Kimmeringer\n\nOn 2013-07-15 10:51:38 -0400, Lothar Kimmeringer wrote:\n\n> Created attachment 233481\n> Debug-Output when running the testcase\n\nOn 2013-07-15 10:52:47 -0400, Lothar Kimmeringer wrote:\n\n> Created attachment 233482\n> Wireshark-Trace showing the ssl-handshake with needClientAuth==true\n\nOn 2013-07-18 23:45:34 -0400, Greg Wilkins wrote:\n\n> Lothar,\n> \n> I've made some SSL changes in the 9.1 branch and am wondering if these may have fixed it already.\n> \n> If you get a chance to try 9.1 before I get a chance to try your unit test, that would be great!\n> \n> cheers\n\nOn 2013-07-19 04:43:16 -0400, Lothar Kimmeringer wrote:\n\n> If you have a jar, containing the jetty-classes I can do it. Setting it up with direct access to the repository would take too much time here at the moment.\n\nOn 2013-07-22 09:40:13 -0400, Greg Wilkins wrote:\n\n> Lothar,\n> \n> try this distro:\n> \n> https://oss.sonatype.org/content/groups/jetty-with-staging/org/eclipse/jetty/jetty-distribution/9.1.0-SNAPSHOT/\n\nOn 2013-07-23 03:48:48 -0400, Lothar Kimmeringer wrote:\n\n> (In reply to comment # 5)\n> \n> > try this distro:\n> > [...]\n> \n> I tried and have the same effect as with 9.0.3. I will attach the debug-output of my test.\n\nOn 2013-07-23 03:50:05 -0400, Lothar Kimmeringer wrote:\n\n> Created attachment 233692\n> Debug-Output when running the testcase with Jetty jetty-9.1.0-SNAPSHOT\n\nOn 2013-07-29 10:46:19 -0400, Lothar Kimmeringer wrote:\n\n> When replacing the catch-blocks in SslConnection (line 632ff) to the following:\n> \n> ```\n> catch (Exception e)\n> {\n>     EndPoint ep = getEndPoint();\n>     try{\n>         if (e instanceof SSLHandshakeException){\n>             byte[] data = new byte[]{\n>                     0x15, 0x03, 0x01, 0x00, 0x02, 0x02, 40\n>             };\n>             ep.flush(ByteBuffer.wrap(data));\n>         }\n>         if (e instanceof SSLException){\n>             throw new EofException(e);\n>         }\n>     }\n>     finally{\n>         ep.close();\n>     }\n>     throw e;\n> }\n> ```\n> \n> the client gets an SSLHandshakeException as expected and is no longer running into a timeout. But I see that more as a hack than a fix so I don't add this as a patch, more as a base for discussion ;-)\n\nOn 2015-01-03 09:04:47 -0500, Thomas Lu\u00c3\u009fnig wrote:\n\n> Hi,\n> \n> while i try to get an A+ rating at SSL Labs with TLS_FALLBACK_SCSV.\n> (https://fweimer.fedorapeople.org/openjdk/tls-fallback-scsv/jdk.patch)\n> This patch can also be used with JDK8 :-)\n> I found that jetty missed to transmit the ssl alert message. \n> The correct fix is not to send and fixed alert message but to check the handshakeStatus and send (flush)\n> the rest protocol data to the socket.\n> \n> Package: org.eclipse.jetty.io.ssl\n> Class SslConnection\n> Method: int fill(final ByteBuffer buffer);\n> \n> Change the catch block ad the method end to:\n> \n> } catch (final Throwable e) {\n>   SslConnection.this._encryptedInput.clear();\n>   if(SslConnection.this._sslEngine.getHandshakeStatus()==HandshakeStatus.NEED_WRAP) { flush(__FILL_CALLED_FLUSH); }\n>   getEndPoint().close();\n>   throw e;\n> } finally {\n", "commits": {}, "title": "SSL-Handshake-problems don't lead to an SSLHandshakeException on client-side and server doesn't close the socket", "created": "2016-02-16 23:22:21", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/120", "commitsDetails": [], "ttf": 575.0002777777778}, {"labels": ["Bug"], "closed": "2016-02-23 12:41:49", "body": "migrated from Bugzilla [#411104](https://bugs.eclipse.org/bugs/show_bug.cgi?id=411104)\nstatus ASSIGNED severity _major_ in component _server_ for _9.0.x_\nReported in version _9.0.2_ on platform _PC_\nAssigned to: Greg Wilkins\n\nOn 2013-06-19 06:41:22 -0400, Samuel Fung wrote:\n\n> I have a keystore containing many key-pairs. I set the following in jetty-ssl.xml (choosing 1 key-pair):\n> \n> <Configure id=\"sslContextFactory\" class=\"org.eclipse.jetty.util.ssl.SslContextFactory\">\n>   <Set name=\"KeyStorePath\">..</Set>\n>   <Set name=\"KeyStorePassword\">...</Set>\n>   <Set name=\"CertAlias\">...</Set>\n>   <Set name=\"KeyManagerPassword\">...</Set>\n> \n> I've verified several times that the settings are correct, but Jetty keeps throwing this exception:\n> \n> java.security.UnrecoverableKeyException: Cannot recover key\n>     at sun.security.provider.KeyProtector.recover(KeyProtector.java:328)\n>     at sun.security.provider.JavaKeyStore.engineGetKey(JavaKeyStore.java:138)\n>     at sun.security.provider.JavaKeyStore$JKS.engineGetKey(JavaKeyStore.java:55)\n>     at java.security.KeyStore.getKey(KeyStore.java:792)\n>     at sun.security.ssl.SunX509KeyManagerImpl.<init>(SunX509KeyManagerImpl.java:131)\n>     at sun.security.ssl.KeyManagerFactoryImpl$SunX509.engineInit(KeyManagerFactoryImpl.java:68)\n>     at javax.net.ssl.KeyManagerFactory.init(KeyManagerFactory.java:259)\n>     at org.eclipse.jetty.util.ssl.SslContextFactory.getKeyManagers(SslContextFactory.java:903)\n>     at org.eclipse.jetty.util.ssl.SslContextFactory.doStart(SslContextFactory.java:296)\n> ...\n> \n> I trace to SslContextFactory.java:903\n> keyManagerFactory.init(keyStore,_keyManagerPassword == null?(_keyStorePassword == null?null:_keyStorePassword.toString().toCharArray()):_keyManagerPassword.toString().toCharArray());\n> \n> _keyManagerPassword (corresponds to keytool genkeypair -keypass option)\n> and\n> _keyStorePassword (corresponds to keytool genkeypair -storepass option)\n> are 2 different passwords, they must not be used interchangeably like the above statement.\n", "commits": {}, "title": "UnrecoverableKeyException", "created": "2016-02-16 23:22:03", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/118", "commitsDetails": [], "ttf": 6.000277777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 1, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "jmcc0nn3ll", "filteredCommits": ["e329e386f08552f55025f57f6c432c1562559dec", "b70101b93f239c249919777088652ec65b671f97", "a4884f0c2d8cf028ab286d894e7bbf5ff23c674b", "4b5e5566e8c8c98ec85836da5e2a1f366185c532", "4b82f54ad370943d9da57cf3bf383ba9cb53b159"], "commits": {"a4884f0c2d8cf028ab286d894e7bbf5ff23c674b": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "b70101b93f239c249919777088652ec65b671f97": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "4b82f54ad370943d9da57cf3bf383ba9cb53b159": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "d7aa07936504be728d847609f924f363cd4dca3e": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "4b5e5566e8c8c98ec85836da5e2a1f366185c532": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "e329e386f08552f55025f57f6c432c1562559dec": {"commitUser": "joakime", "commitGHEventType": "referenced"}}, "created": "2016-02-16 23:21:50", "commitsDetails": [{"commitMessage": "Issue #117\n\nFixed Upgrade Response to make a distinction between when headers are available from a response and when they are copied to and copied from the real response.\nThis exposed the fact that the extension header was being set twice. Fixed that and now test webapp works again.\n", "commitParents": ["936fd09a184338f46bcae6cf1c714a526566f618"], "commitHash": "a4884f0c2d8cf028ab286d894e7bbf5ff23c674b", "commitSpoonAstDiffStats": [{"spoonFilePath": "ServletUpgradeResponse.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse.applyHeaders()", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 3, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse.getHeaders(java.lang.String)", "DEL": 2, "INS": 5, "UPD": 0, "MOV": 2, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse.setHeader(java.lang.String,java.lang.String)", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 4, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse.getHeaderNames()", "DEL": 2, "INS": 5, "UPD": 0, "MOV": 2, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse.getStatusCode()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 1, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse.commitHeaders()", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse.complete()", "DEL": 2, "INS": 5, "UPD": 1, "MOV": 1, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse.getHeader(java.lang.String)", "DEL": 1, "INS": 4, "UPD": 0, "MOV": 1, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse.sendError(int,java.lang.String)", "DEL": 0, "INS": 3, "UPD": 1, "MOV": 6, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse.setStatus(int)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 2, "TOT": 3}, {"spoonMethodName": "org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse.sendForbidden(java.lang.String)", "DEL": 1, "INS": 3, "UPD": 1, "MOV": 5, "TOT": 10}, {"spoonMethodName": "org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse", "DEL": 1, "INS": 2, "UPD": 3, "MOV": 9, "TOT": 15}, {"spoonMethodName": "org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse.setStatusCode(int)", "DEL": 1, "INS": 0, "UPD": 0, "MOV": 3, "TOT": 4}, {"spoonMethodName": "org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse.addHeader(java.lang.String,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 5, "TOT": 7}]}, {"spoonFilePath": "HandshakeRFC6455.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.server.HandshakeRFC6455.doHandshakeResponse(org.eclipse.jetty.websocket.servlet.ServletUpgradeRequest,org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse)", "DEL": 1, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 2}]}], "nameRev": "a4884f0c2d8cf028ab286d894e7bbf5ff23c674b tags/jetty-9.4.0.RC3~2", "commitUser": "gregw", "authoredDateTime": "2016-12-05 17:43:47", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 141, "filePath": "jetty-websocket/websocket-servlet/src/main/java/org/eclipse/jetty/websocket/servlet/ServletUpgradeResponse.java", "insertions": 94, "deletions": 47}, {"lines": 12, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/HandshakeRFC6455.java", "insertions": 1, "deletions": 11}], "commitDateTime": "2016-12-05 17:43:47", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #117 - working build of WebSocketClient with HttpClient\n\n+ Proxy support exists now\n", "commitParents": ["646a411746f9829633438dc8ba226bbaed61a489"], "commitHash": "b70101b93f239c249919777088652ec65b671f97", "commitSpoonAstDiffStats": [], "nameRev": "b70101b93f239c249919777088652ec65b671f97 tags/jetty-9.4.0.RC3~14", "commitUser": "joakime", "authoredDateTime": "2016-12-01 15:00:41", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 7, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/misbehaving/EndpointRuntimeOnOpen.java", "insertions": 1, "deletions": 6}, {"lines": 1, "filePath": "jetty-websocket/websocket-servlet/src/main/java/org/eclipse/jetty/websocket/servlet/ServletUpgradeRequest.java", "insertions": 1, "deletions": 0}, {"lines": 2, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/events/AbstractEventDriver.java", "insertions": 1, "deletions": 1}, {"lines": 4, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/io/UpgradeListener.java", "insertions": 2, "deletions": 2}, {"lines": 2, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/scopes/SimpleContainerScope.java", "insertions": 1, "deletions": 1}, {"lines": 5, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/annotations/AnnotatedEndpointScanner.java", "insertions": 5, "deletions": 0}, {"lines": 9, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/CookiesTest.java", "insertions": 7, "deletions": 2}, {"lines": 38, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/misbehaving/MisbehavingClassTest.java", "insertions": 23, "deletions": 15}, {"lines": 13, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/WebSocketSession.java", "insertions": 6, "deletions": 7}, {"lines": 15, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/PerMessageDeflateExtensionTest.java", "insertions": 5, "deletions": 10}, {"lines": 26, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/annotations/AnnotatedEndpointMetadata.java", "insertions": 25, "deletions": 1}, {"lines": 2, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/ClientContainer.java", "insertions": 1, "deletions": 1}, {"lines": 24, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/client/JsrClientEndpointImpl.java", "insertions": 5, "deletions": 19}, {"lines": 8, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/endpoints/JsrAnnotatedEventDriver.java", "insertions": 8, "deletions": 0}, {"lines": 2, "filePath": "jetty-websocket/javax-websocket-server-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/server/AnnotatedServerEndpointMetadata.java", "insertions": 1, "deletions": 1}, {"lines": 12, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/metadata/EndpointMetadata.java", "insertions": 8, "deletions": 4}, {"lines": 2, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/WebSocketCloseTest.java", "insertions": 2, "deletions": 0}, {"lines": 17, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/JsrUpgradeListener.java", "insertions": 1, "deletions": 16}, {"lines": 7, "filePath": "jetty-websocket/javax-websocket-client-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/misbehaving/AnnotatedRuntimeOnOpen.java", "insertions": 1, "deletions": 6}, {"lines": 10, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/WebSocketUpgradeRequest.java", "insertions": 5, "deletions": 5}, {"lines": 2, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/ConfiguratorTest.java", "insertions": 1, "deletions": 1}, {"lines": 9, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/WebSocketClient.java", "insertions": 6, "deletions": 3}], "commitDateTime": "2016-12-01 15:00:41", "spoonStatsSkippedReason": "tooManyFiles"}, {"commitMessage": "Issue #117 fixed javadoc errors\n", "commitParents": ["73ee8f29bd585de2dbeafce15d805ab746f2ff9f"], "commitHash": "4b82f54ad370943d9da57cf3bf383ba9cb53b159", "commitSpoonAstDiffStats": [{"spoonFilePath": "Session.java", "spoonMethods": []}, {"spoonFilePath": "UpgradeRequest.java", "spoonMethods": []}], "nameRev": "4b82f54ad370943d9da57cf3bf383ba9cb53b159 tags/jetty-9.4.0.RC3~7", "commitUser": "gregw", "authoredDateTime": "2016-12-02 14:34:37", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/Session.java", "insertions": 2, "deletions": 0}, {"lines": 6, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/UpgradeRequest.java", "insertions": 1, "deletions": 5}], "commitDateTime": "2016-12-02 14:34:37", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #117 fixed javadoc errors\n", "commitParents": ["4b82f54ad370943d9da57cf3bf383ba9cb53b159"], "commitHash": "d7aa07936504be728d847609f924f363cd4dca3e", "commitSpoonAstDiffStats": [{"spoonFilePath": "UpgradeResponseAdapter.java", "spoonMethods": []}], "nameRev": "d7aa07936504be728d847609f924f363cd4dca3e tags/jetty-9.4.0.RC3~6", "commitUser": "gregw", "authoredDateTime": "2016-12-02 15:33:30", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 1, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/UpgradeResponseAdapter.java", "insertions": 1, "deletions": 0}], "commitDateTime": "2016-12-02 15:33:30", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #117 - minor code review changes\n", "commitParents": ["e329e386f08552f55025f57f6c432c1562559dec"], "commitHash": "4b5e5566e8c8c98ec85836da5e2a1f366185c532", "commitSpoonAstDiffStats": [{"spoonFilePath": "WebSocketClient.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.client.WebSocketClient", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}]}], "nameRev": "4b5e5566e8c8c98ec85836da5e2a1f366185c532 tags/jetty-9.4.0.RC3~18^2", "commitUser": "joakime", "authoredDateTime": "2016-11-30 10:49:40", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 4, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/WebSocketClient.java", "insertions": 2, "deletions": 2}], "commitDateTime": "2016-11-30 10:50:05", "spoonStatsSkippedReason": ""}, {"commitMessage": "Issue #117 - Carrying over the work from features/wsclient-httpclient\n", "commitParents": ["5b5a2e845b51f380951ceff399c7976a8fd725b2"], "commitHash": "e329e386f08552f55025f57f6c432c1562559dec", "commitSpoonAstDiffStats": [], "nameRev": "e329e386f08552f55025f57f6c432c1562559dec tags/jetty-9.4.0.RC3~18^2~1", "commitUser": "joakime", "authoredDateTime": "2016-11-28 15:45:38", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 11, "filePath": "jetty-websocket/websocket-client/src/test/java/org/eclipse/jetty/websocket/client/WebSocketClientTest.java", "insertions": 9, "deletions": 2}, {"lines": 181, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/ClientUpgradeRequest.java", "insertions": 50, "deletions": 131}, {"lines": 9, "filePath": "jetty-websocket/websocket-client/src/test/resources/jetty-logging.properties", "insertions": 3, "deletions": 6}, {"lines": 34, "filePath": "jetty-websocket/websocket-client/src/test/java/org/eclipse/jetty/websocket/client/CookieTest.java", "insertions": 29, "deletions": 5}, {"lines": 364, "filePath": "jetty-websocket/websocket-servlet/src/main/java/org/eclipse/jetty/websocket/servlet/ServletUpgradeRequest.java", "insertions": 289, "deletions": 75}, {"lines": 3, "filePath": "jetty-websocket/websocket-common/src/test/java/org/eclipse/jetty/websocket/common/test/BlockheadServerConnection.java", "insertions": 2, "deletions": 1}, {"lines": 2, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/Session.java", "insertions": 0, "deletions": 2}, {"lines": 151, "filePath": "jetty-websocket/websocket-servlet/src/main/java/org/eclipse/jetty/websocket/servlet/ServletUpgradeResponse.java", "insertions": 128, "deletions": 23}, {"lines": 23, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/extensions/WebSocketExtensionFactory.java", "insertions": 19, "deletions": 4}, {"lines": 111, "filePath": "jetty-websocket/websocket-client/src/test/java/org/eclipse/jetty/websocket/client/WebSocketClientInitTest.java", "insertions": 111, "deletions": 0}, {"lines": 391, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/io/UpgradeConnection.java", "insertions": 0, "deletions": 391}, {"lines": 51, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/ClientUpgradeResponse.java", "insertions": 30, "deletions": 21}, {"lines": 62, "filePath": "jetty-websocket/websocket-client/src/test/java/org/eclipse/jetty/websocket/client/ClientCloseTest.java", "insertions": 24, "deletions": 38}, {"lines": 5, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/WebSocketServerFactory.java", "insertions": 4, "deletions": 1}, {"lines": 4, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/scopes/SimpleContainerScope.java", "insertions": 3, "deletions": 1}, {"lines": 28, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/io/WebSocketClientConnection.java", "insertions": 8, "deletions": 20}, {"lines": 2, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/events/JettyListenerEventDriver.java", "insertions": 1, "deletions": 1}, {"lines": 583, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/UpgradeRequest.java", "insertions": 274, "deletions": 309}, {"lines": 17, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/WebSocketSession.java", "insertions": 15, "deletions": 2}, {"lines": 2, "filePath": "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server/WebSocketHandler.java", "insertions": 1, "deletions": 1}, {"lines": 162, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/io/WebSocketClientSelectorManager.java", "insertions": 0, "deletions": 162}, {"lines": 397, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/UpgradeRequestAdapter.java", "insertions": 397, "deletions": 0}, {"lines": 29, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/NoOpEndpoint.java", "insertions": 29, "deletions": 0}, {"lines": 23, "filePath": "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356/ClientContainer.java", "insertions": 16, "deletions": 7}, {"lines": 27, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/WebSocketConstants.java", "insertions": 27, "deletions": 0}, {"lines": 5, "filePath": "jetty-websocket/websocket-client/pom.xml", "insertions": 5, "deletions": 0}, {"lines": 1, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/RequestHeadersTest.java", "insertions": 1, "deletions": 0}, {"lines": 50, "filePath": "jetty-websocket/websocket-client/src/test/java/org/eclipse/jetty/websocket/client/ClientConnectTest.java", "insertions": 44, "deletions": 6}, {"lines": 2, "filePath": "jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/WebSocketOverSSLTest.java", "insertions": 2, "deletions": 0}, {"lines": 94, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/io/ConnectPromise.java", "insertions": 4, "deletions": 90}, {"lines": 10, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/extensions/AbstractExtension.java", "insertions": 8, "deletions": 2}, {"lines": 227, "filePath": "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common/UpgradeResponseAdapter.java", "insertions": 227, "deletions": 0}, {"lines": 7, "filePath": "jetty-websocket/websocket-servlet/src/main/java/org/eclipse/jetty/websocket/servlet/WebSocketServlet.java", "insertions": 2, "deletions": 5}, {"lines": 253, "filePath": "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api/UpgradeResponse.java", "insertions": 114, "deletions": 139}, {"lines": 634, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/WebSocketUpgradeRequest.java", "insertions": 634, "deletions": 0}, {"lines": 113, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/io/ConnectionManager.java", "insertions": 5, "deletions": 108}, {"lines": 5, "filePath": "jetty-websocket/websocket-client/src/test/java/org/eclipse/jetty/websocket/client/JettyTrackingSocket.java", "insertions": 4, "deletions": 1}, {"lines": 424, "filePath": "jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client/WebSocketClient.java", "insertions": 252, "deletions": 172}], "commitDateTime": "2016-11-28 15:45:38", "spoonStatsSkippedReason": "tooManyFiles"}], "title": "Support proxies with WebSocketClient", "spoonStatsSummary": {"spoonMethodsChanged": 16, "DEL": 13.0, "INS": 30.0, "UPD": 13.0, "MOV": 45.0, "TOT": 101.0, "spoonFilesChanged": 3}, "gitStatsSummary": {"lines": 4506, "insertions": 2713, "gitFilesChange": 37, "deletions": 1793}, "closed": "2017-05-09 15:50:08", "statsSkippedReason": "", "body": "migrated from Bugzilla [#409516](https://bugs.eclipse.org/bugs/show_bug.cgi?id=409516)\nstatus ASSIGNED severity _normal_ in component _websocket_ for _9.3.x_\nReported in version _9.0.3_ on platform _All_\nAssigned to: Joakim Erdfelt\n\nOriginal attachment names and IDs:\n- _[0001-Add-proxy-support-to-websocket-client.patch](https://bugs.eclipse.org/bugs//attachment.cgi?id=233681)_ (ID 233681)\n\nOn 2013-05-30 12:21:45 -0400, Joakim Erdfelt wrote:\n\n> Need to add support to configure a proxy for WebSocketClient.\n\nOn 2013-06-26 09:40:32 -0400, Missing name wrote:\n\n> Any plans when it will be implemented?\n\nOn 2013-07-22 16:10:29 -0400, Gustavo Gir\u00c3\u00a1ldez wrote:\n\n> Created attachment 233681\n> Proposed patch for websocket proxy support\n> \n> Here's a proposed patch to add proxy support to WebSocket client. It'll only work properly with HTTP/1.1 proxy servers and currently supports basic and digest authentication.\n> \n> The ProxyConnection class is based heavily on UpgradeConnection (et al) and DigestAuthentication was taken and adapted from jetty-client.\n> \n> From what I've read in Eclipse site pages a patch is the preferred way of sending a contribution but we can make a pull request from https://github.com/manastech/jetty.project/tree/websocket-proxy if that's convenient. Also, we need this functionality and would like for it to be included in a future version of Jetty. Please let me know what changes are required to make this happen. Thanks!\n\nOn 2013-07-22 16:20:45 -0400, Jesse McConnell wrote:\n\n> First stop is here: \n> \n> http://www.eclipse.org/jetty/documentation/current/contributing-patches.html#contributing-cla\n> \n> thanks for the patch!\n\nOn 2013-09-23 16:50:18 -0400, Jesse McConnell wrote:\n\n> Gustavo, can you complete the CLA paperwork so we can consider your patch?\n\nOn 2013-09-24 10:56:01 -0400, Gustavo Gir\u00c3\u00a1ldez wrote:\n\n> I'm confused about what are the next steps. I already signed the CLA. Is there anything else I should do? Thanks!\n\nOn 2013-09-24 10:56:44 -0400, Jesse McConnell wrote:\n\n> hm...I'll ping wayne about it, there should be a little check mark by your name now :)\n\nOn 2013-09-24 11:38:35 -0400, Wayne Beaton wrote:\n\n> (In reply to Jesse McConnell from comment # 6)\n> \n> > hm...I'll ping wayne about it, there should be a little check mark by your\n> > name now :)\n> \n> The CLA system is based on the email address. \n> \n> The database shows that Gustavo has a CQ, but under a gmail address.\n\nOn 2013-09-24 12:11:11 -0400, Gustavo Gir\u00c3\u00a1ldez wrote:\n\n> Hmm, I remember creating my account with my personal email address (gustavo.giraldez@gmail.com) but then I changed it to my work email ggiraldez@manas.com.ar. I signed the CLA after this change IIRC. Is there anything I can do?\n\nOn 2013-09-25 07:26:45 -0400, Wayne Beaton wrote:\n\n> (In reply to Gustavo Gir\u00c3\u00a1ldez from comment # 8)\n> \n> > Hmm, I remember creating my account with my personal email address\n> > (gustavo.giraldez@gmail.com) but then I changed it to my work email\n> > ggiraldez@manas.com.ar. I signed the CLA after this change IIRC. Is there\n> > anything I can do?\n> \n> According to my records, you signed the CLA using your gmail account.\n> \n> Did you create a second account, or change the email address on the first account?\n\nOn 2013-09-25 09:33:51 -0400, Gustavo Gir\u00c3\u00a1ldez wrote:\n\n> No, I only have one account. I just invalidated my CLA and signed a new one. I can now see the tick next to my name, as well as next to Joakim's and Jesse's, which for some reason I didn't get before. So, it looks like it's fixed now :)\n\nOn 2013-11-28 10:00:13 -0500, Axel Uhl wrote:\n\n> The patch proposed by Gustavo looks good. Now that the IP / CLA issues have been solved, what is keeping the patch from getting merged? Do you already have a target release in mind?\n\nOn 2013-11-28 10:04:00 -0500, Joakim Erdfelt wrote:\n\n> We'll see about merging this patch back into master (aka Jetty 9.1.0) after the holiday.\n\nOn 2014-03-07 07:19:15 -0500, Vlad Lucian Ginju wrote:\n\n> Any news on adding the proxy support for websocket client?\n\nOn 2014-05-08 23:18:39 -0400, Arthur Naseef wrote:\n\n> Any update?\n\nOn 2015-02-12 00:36:32 -0500, Thrilochana Rajappa wrote:\n\n> Does the latest jetty libraries(9.1.1) support proxy server?\n\nOn 2015-02-12 11:56:58 -0500, Joakim Erdfelt wrote:\n\n> (In reply to Thrilochana Rajappa from comment # 15)\n> \n> > Does the latest jetty libraries(9.1.1) support proxy server?\n> \n> Latest Jetty is 9.2.7.v20150116\n> \n> See: http://download.eclipse.org/jetty/\n\nOn 2015-02-13 03:18:02 -0500, Thrilochana Rajappa wrote:\n\n> Thanks. Does these libraries(9.2.7) support proxy server?\n\nOn 2015-03-04 05:03:52 -0500, Steffen Koehler wrote:\n\n> It would be a huge help also in our project to have Jetty websockets with proxy support, 'cause other ways I would have to search for another solution for my proxy problem and mix that then with the Jetty webserver somehow, which will be a pain, I guess..\n> \n> I would really appreciate to have Gustavos patch (or something simular) been implemented. Unfortunately I'm not enough of an expert to support :-|\n> \n> Thanks for your great work on Jetty\n> \n> regards\n> Steffen\n\nOn 2015-04-16 14:30:26 -0400, Adam Foxman wrote:\n\n> Hi all,\n> \n> Seems like this issue has stalled.  I'd like to help kick-start it and get the original patch into the mainline distribution.\n> \n> What is the next step?  Is the patch suitable, or does it need work?  I'm happy to provide dev support to help this along, if necessary.\n\nOn 2015-04-16 16:27:05 -0400, Gustavo Gir\u00c3\u00a1ldez wrote:\n\n> Just a quick comment to let you know that we continued to add some functionality and fixes over the proposed patch. You can find the most current version (what we use in production) at https://github.com/manastech/jetty.project/commits/websocket-proxy. We added NTLM support and authentication over non-persistent connections. There are also a couple of bug fixes.\n> \n> OTOH, it probably won't merge cleanly with the current version of Jetty and we added jCIFS as an extra dependency for the NTLM support.\n\nOn 2015-10-15 18:04:47 -0400, Joakim Erdfelt wrote:\n\n> Now that HttpClient has the beginnings of HTTP/1.1 upgrade support, we can start this work for proxy support.\n> \n> Initial commit to [feature/wsclient-httpclient 3f1d566]\n\nOn 2016-01-26 03:26:54 -0500, Amir Karo wrote:\n\n> Hi Joakim,\n> This is good news that you started working on it as we have a lot of customers waiting for it.\n> \n> Can you estimate when we can have a jetty version with this support?\n> \n> Thanks!\n> Amir\n", "changesInPackagesGIT": ["jetty-websocket/websocket-client/src/main/java/org/eclipse/jetty/websocket/client", "jetty-websocket/websocket-api/src/main/java/org/eclipse/jetty/websocket/api", "jetty-websocket/javax-websocket-client-impl/src/main/java/org/eclipse/jetty/websocket/jsr356", "jetty-websocket/javax-websocket-server-impl/src/main/java/org/eclipse/jetty/websocket/jsr356", "jetty-websocket/websocket-servlet/src/main/java/org/eclipse/jetty/websocket/servlet", "jetty-websocket/websocket-server/src/main/java/org/eclipse/jetty/websocket/server", "jetty-websocket/websocket-common/src/main/java/org/eclipse/jetty/websocket/common"], "changesInPackagesSPOON": ["org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse.getHeader(java.lang.String)", "org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse.getHeaders(java.lang.String)", "org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse.setStatusCode(int)", "org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse.getHeaderNames()", "org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse.commitHeaders()", "org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse.getStatusCode()", "org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse.applyHeaders()", "org.eclipse.jetty.websocket.server.HandshakeRFC6455.doHandshakeResponse(org.eclipse.jetty.websocket.servlet.ServletUpgradeRequest,org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse)", "org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse.complete()", "org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse.setHeader(java.lang.String,java.lang.String)", "org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse.sendError(int,java.lang.String)", "org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse.setStatus(int)", "org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse.sendForbidden(java.lang.String)", "org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse", "org.eclipse.jetty.websocket.client.WebSocketClient", "org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse.addHeader(java.lang.String,java.lang.String)"], "ttf": 447.0002777777778, "numCommits": 5, "url": "https://github.com/eclipse/jetty.project/issues/117"}, {"labels": ["Bug"], "closed": "2016-03-22 14:48:24", "body": "migrated from Bugzilla [#404278](https://bugs.eclipse.org/bugs/show_bug.cgi?id=404278)\nstatus ASSIGNED severity _normal_ in component _server_ for _9.0.x_\nReported in version _8.1.8_ on platform _PC_\nAssigned to: Project Inbox\n\nOn 2013-03-25 11:46:11 -0400, Joe Fago wrote:\n\n> In our production environment, even under moderate load, there are system cpu spikes that generally last 1-5 minutes. Running an strace shows the following:\n> \n> [pid 27153] write(171, \"\\1\", 1)         = 1\n> [pid 27153] read(170, \"\\1\", 128)        = 1\n> [pid 27153] write(171, \"\\1\", 1)         = 1\n> [pid 27153] read(170, \"\\1\", 128)        = 1\n> [pid 27153] write(171, \"\\1\", 1)         = 1\n> [pid 27153] read(170, \"\\1\", 128)        = 1\n> [pid 27153] write(171, \"\\1\", 1)         = 1\n> [pid 27153] read(170, \"\\1\", 128)        = 1\n> \n> read/write pattern repeats 11,000+ times in 10s. File descriptors 170/171 are the read/write ends of a pipe, not a socket.\n> \n> lr-x------ 1 root root 64 Mar 23 03:40 170 -> pipe:[15520976]\n> l-wx------ 1 root root 64 Mar 23 03:40 171 -> pipe:[15520976]\n> \n> Note that the same thread is continuously writing and reading a single byte (value = 1). The jstack output shows this for thread 27153:\n> \n> Thread 27153: (state = IN_NATIVE)\n> - sun.nio.ch.EPollArrayWrapper.interrupt(int) @bci=0 (Compiled frame; information may be imprecise)\n> - sun.nio.ch.EPollArrayWrapper.interrupt() @bci=4, line=256 (Compiled frame)\n> - sun.nio.ch.EPollSelectorImpl.wakeup() @bci=18, line=175 (Compiled frame)\n> - org.eclipse.jetty.io.nio.SelectorManager$SelectSet.wakeup() @bci=10, line=822 (Compiled frame)\n> - org.eclipse.jetty.io.nio.SelectChannelEndPoint.updateKey() @bci=215, line=539 (Compiled frame)\n> - org.eclipse.jetty.io.nio.SelectChannelEndPoint.schedule() @bci=117, line=173 (Compiled frame)\n> - org.eclipse.jetty.io.nio.SelectorManager$SelectSet.doSelect() @bci=739, line=619 (Compiled frame)\n> - org.eclipse.jetty.io.nio.SelectorManager$1.run() @bci=181, line=290 (Compiled frame)\n> - org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(java.lang.Runnable) @bci=1, line=608 (Interpreted frame)\n> - org.eclipse.jetty.util.thread.QueuedThreadPool$3.run() @bci=47, line=543 (Interpreted frame)\n> - java.lang.Thread.run() @bci=11, line=662 (Interpreted frame)\n> \n> I also see evidence of thread SEGfaults in the strace output - usually after several thousand read/write single-byte repetitions. The thread gets respawned and continues this read/write behaviour. \n> \n> [pid 27153] --- SIGSEGV (Segmentation fault) @ 0 (0) ---\n> [pid 27153] --- SIGSEGV (Segmentation fault) @ 0 (0) ---\n> \n> We are running the 1.6 Oracle jvm on Redhat.\n> OS/JVM/Jetty versions:\n> \n> Red Hat Enterprise Linux Server release 5.8 (Tikanga)\n> \n> java version \"1.6.0_37\"\n> Java(TM) SE Runtime Environment (build 1.6.0_37-b06)\n> Java HotSpot(TM) 64-Bit Server VM (build 20.12-b01, mixed mode)\n> \n> jetty-8.1.8.v20121106 - 06 November 2012\n> \n> Let me know if there is any more information I can provide. Still digging through logs for more info, but hoping this looks like a known issue.\n\nOn 2013-03-25 17:31:22 -0400, Greg Wilkins wrote:\n\n> My first guess is that this looks like a JVM bug or at least weirdness.  Jetty does not use pipes, so I assume this is part of the implementation of the NIO selector?  Hence the EPollXxxx in the stack trace.  Also SEGV's imply a JVM problem rather than a Jetty problem.\n> \n> It would be interesting to know how far out of that stack the thread gets.  Is it repeatedly calling updateKey, or is it looping within there or is it looping within EPoll etc?\n> \n> Your JVM looks recent-ish, although there is a _41 out I think.  You could also try java 7\n> \n> So unfortunately this is not a known issue.\n", "commits": {}, "title": "System CPU time spins on pipe read/write", "created": "2016-02-16 23:20:57", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/112", "commitsDetails": [], "ttf": 34.000277777777775}, {"labels": ["Bug"], "closed": "2017-03-02 14:18:52", "body": "migrated from Bugzilla [#402626](https://bugs.eclipse.org/bugs/show_bug.cgi?id=402626)\nstatus REOPENED severity _normal_ in component _server_ for _9.0.1_\nReported in version _9.0.0.RC2_ on platform _PC_\nAssigned to: Simone Bordet\n\nOriginal attachment names and IDs:\n- _[jetty9-client-cert-bug.tar](https://bugs.eclipse.org/bugs//attachment.cgi?id=228050)_ (ID 228050)\n\nOn 2013-03-07 05:11:37 -0500, Ben Summers wrote:\n\n> Created attachment 228050\n> tar archive containing keystore & client cert generation scripts and modified example config\n> \n> I am porting my application to Jetty 9, and while everything else works perfectly and the API is much improved, I cannot get SSL client certificates to work.\n> \n> In the attached archive, there is a script which generates a Java keystore containing:\n> - A self-signed server certificate\n> - A CA for client certificates\n> \n> It also generates an example client certificate, client.pkcs12, for you to use to test.\n> \n> The supplied configuration files are the examples from the distribution, except:\n> - Change keystore passwords to 'password'\n> - Add <Set name=\"NeedClientAuth\">true</Set>\n> \n> To test:\n> - Run ./makekeystore.sh\n> - Start the Jetty 9 server using the configuration files, eg using ./run.sh after setting CLASSPATH\n> - Import the client.pkcs12 file on your computer (password is 'password')\n> - Attempt to connect to the server https://HOSTNAME:8443 with the appropriate hostname.\n> \n> You will get a certificate warning following by a \"choose client certificate\" prompt. (I'm using Safari on a Mac). But after that, the connection fails.\n> \n> Removing NeedClientAuth shows the rest of the SSL server config is OK, but obviously it doesn't ask for a client cert.\n> \n> I have tried a similar configuration on Jetty 7. Client certs work with this version, so I believe the keystore generation and configuration is correct. (use same makekeystore.sh script, copy example configs, change password and add NeedClientAuth, run server, import client cert, connect to server.)\n\nOn 2013-03-07 16:39:14 -0500, Ben Summers wrote:\n\n> I have confirmed that the current testing version, jetty-9.0.0.v20130306, also has this problem.\n\nOn 2013-03-07 17:00:42 -0500, Greg Wilkins wrote:\n\n> Ben,\n> \n> thanks for the report and test harnesses required to replicate.\n> \n> I will look today and see if we can get a fix into the 9.0.0 branch, but currently I'm expecting that we'll miss that train and this will be fixed in 9.0.1.\n> \n> I'll see if we can use your tests to create a unit test for client certificate processing.\n> \n> Note that jetty 9 has an entirely new SSL connection, so I'm guessing we just forgot to turn on need client cert or similar.\n> \n> cheers\n\nOn 2013-03-07 17:02:51 -0500, Ben Summers wrote:\n\n> Thanks for looking at it, very much appreciated. It'd be great to have a fix in 9.0.0 if at all possible.\n\nOn 2013-03-07 20:12:32 -0500, Greg Wilkins wrote:\n\n> This is the core exception that is causing the handshake failure:\n> \n> javax.net.ssl.SSLHandshakeException: General SSLEngine problem\n>   at sun.security.ssl.Handshaker.checkThrown(Handshaker.java:1364)\n>   at sun.security.ssl.SSLEngineImpl.checkTaskThrown(SSLEngineImpl.java:513)\n>   at sun.security.ssl.SSLEngineImpl.readNetRecord(SSLEngineImpl.java:790)\n>   at sun.security.ssl.SSLEngineImpl.unwrap(SSLEngineImpl.java:758)\n>   at javax.net.ssl.SSLEngine.unwrap(SSLEngine.java:624)\n>   at org.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.fill(SslConnection.java:488)\n>   at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:216)\n>   at org.eclipse.jetty.io.AbstractConnection$ReadCallback.run(AbstractConnection.java:240)\n>   at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:589)\n>   at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:520)\n>   at java.lang.Thread.run(Thread.java:722)\n> Caused by: javax.net.ssl.SSLHandshakeException: General SSLEngine problem\n>   at sun.security.ssl.Alerts.getSSLException(Alerts.java:192)\n>   at sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1703)\n>   at sun.security.ssl.Handshaker.fatalSE(Handshaker.java:278)\n>   at sun.security.ssl.Handshaker.fatalSE(Handshaker.java:270)\n>   at sun.security.ssl.ServerHandshaker.clientCertificate(ServerHandshaker.java:1673)\n>   at sun.security.ssl.ServerHandshaker.processMessage(ServerHandshaker.java:176)\n>   at sun.security.ssl.Handshaker.processLoop(Handshaker.java:868)\n>   at sun.security.ssl.Handshaker$1.run(Handshaker.java:808)\n>   at sun.security.ssl.Handshaker$1.run(Handshaker.java:806)\n>   at java.security.AccessController.doPrivileged(Native Method)\n>   at sun.security.ssl.Handshaker$DelegatedTask.run(Handshaker.java:1301)\n>   at org.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.fill(SslConnection.java:547)\n>   ... 5 more\n> Caused by: java.security.cert.CertificateException: No name matching localhost found\n>   at sun.security.util.HostnameChecker.matchDNS(HostnameChecker.java:208)\n>   at sun.security.util.HostnameChecker.match(HostnameChecker.java:93)\n>   at sun.security.ssl.X509TrustManagerImpl.checkIdentity(X509TrustManagerImpl.java:347)\n>   at sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:255)\n>   at sun.security.ssl.X509TrustManagerImpl.checkClientTrusted(X509TrustManagerImpl.java:132)\n>   at sun.security.ssl.ServerHandshaker.clientCertificate(ServerHandshaker.java:1660)\n>   ... 12 more\n\nOn 2013-03-07 20:37:57 -0500, Greg Wilkins wrote:\n\n> I can't yet find a way to get the trustmanager used by the ssl context to trust localhost.   I can see reports of setting a hostnamechecker, but can't find the right magic juice to do this for SSLEngine.\n> \n> Can you configure jetty logging to printout ignored exceptions, so you should be able to verify that you get the same exception.\n> \n> We then have to work out how to make it trust localhost, which will either make it work, or reveal the next problem.\n\nOn 2013-03-08 04:31:26 -0500, Ben Summers wrote:\n\n> I'm afraid I couldn't check the error as I can't seem to get it to display the ignored errors. However, the exception and a quick look at the OpenJDK sources have enabled me to work out the problem.\n> \n> It's not that client certs don't work, it's that Jetty 9 has a surprising default configuration which is different to that in Jetty 7: it's performing hostname verification of the client on the server side!\n> \n> Client certificates won't generally use hostnames as common names, as they're generally identifying people not hosts, and just rely on the signing CA having their root certificate in the keystore. Verifying the hostname of the client is probably a rather unusual configuration.\n> \n> I resolved the issue in my application by calling setEndpointIdentificationAlgorithm(null) on the SslContextFactory.\n> \n> If you would like to restore the Jetty 7 behaviour, which probably makes sense, then, if and only if the SslContextFactory is ONLY used on the server, you just need to change\n> \n> ```\n> /** EndpointIdentificationAlgorithm - when set to \"HTTPS\" hostname verification will be enabled */\n> private String _endpointIdentificationAlgorithm = \"HTTPS\";\n> ```\n> \n> to\n> \n> ```\n> /** EndpointIdentificationAlgorithm - when set to \"HTTPS\" hostname verification of the client certificate will be enabled */\n> private String _endpointIdentificationAlgorithm = null;\n> ```\n> \n> If this code _is_ shared with Jetty client, then this would be a very bad change, for obvious reasons.\n> \n> I suspect the setEndpointIdentificationAlgorithm() Java API is confusingly named. I would have called it setEndpointCommonNameMatchingRules(). If you look in the JDK sources, you can see that the certificate is verified regardless of this option.\n> \n> Thanks for your help in tracking this down.\n> \n> Incidentally, I couldn't work out how to set null in the XML configuration. My reading of the docs meant I thought this would do the job:\n> \n> ```\n>   <Set name=\"EndpointIdentificationAlgorithm\"></Set>\n> ```\n> \n> But it doesn't seem to.\n> \n> (For showing ignored errors, I tried this command line:\n> \n> java -Dorg.eclipse.jetty.util.log.IGNORED=true -Dorg.eclipse.jetty.util.log.stderr.LONG=true -Dorg.eclipse.jetty.util.log.class=org.eclipse.jetty.util.log.StdErrLog org.eclipse.jetty.xml.XmlConfiguration jetty.xml jetty-https.xml\n> \n> which I thought should have worked according to the docs, but didn't.)\n\nOn 2013-03-08 08:13:46 -0500, Jesse McConnell wrote:\n\n> given the migration of docs from the wiki to the docbook setup can you point out the bad docs?\n> \n> (jetty-9 docs) \n> \n> http://www.eclipse.org/jetty/documentation/current/\n\nOn 2013-03-08 08:16:52 -0500, Ben Summers wrote:\n\n> http://www.eclipse.org/jetty/documentation/current/reference-section.html#jetty-xml-arg\n> \n> (referred to by the <Set> section.)\n> \n> In the example, it gives:\n> \n> <Arg></Arg> <!-- null value -->\n> \n> Which I tried, but it didn't work.\n> \n> It's possible the docs are correct and I didn't read them properly. Does it use the signature of the setter function to determine type automatically?\n\nOn 2013-03-11 02:44:42 -0400, Greg Wilkins wrote:\n\n> Ben,\n> \n> thanks for progressing this.\n> \n> The best logging documentation is currently at http://wiki.eclipse.org/Jetty/Feature/Jetty_Logging\n> \n> and all you need to see the exception is \n> \n> -Dorg.eclipse.jetty.server.HttpConnection.LEVEL=debug\n> \n> or just\n> \n> -Dorg.eclipse.jetty.LEVEL=debug\n> \n> (sorry was miss information about the IGNORED)\n> \n> We will add a logging section to Jetty-9 doco soon.\n> \n> Looking at other aspects now\n\nOn 2013-03-11 03:01:59 -0400, Greg Wilkins wrote:\n\n> (In reply to comment # 8)\n> \n> > http://www.eclipse.org/jetty/documentation/current/reference-section.\n> > html#jetty-xml-arg\n> > \n> > (referred to by the <Set> section.)\n> > \n> > In the example, it gives:\n> > \n> > <Arg></Arg> <!-- null value -->\n> > \n> > Which I tried, but it didn't work.\n> > \n> > It's possible the docs are correct and I didn't read them properly. Does it\n> > use the signature of the setter function to determine type automatically?\n> \n> I added   \n> \n>   <Set name=\"EndpointIdentificationAlgorithm\"></Set>\n> \n> to the section in jetty-https.xml that starts with\n>   <New id=\"sslContextFactory\" class=\"org.eclipse.jetty.util.ssl.SslContextFactory\">\n> \n> and that worked fine!\n\nOn 2013-03-13 18:26:32 -0400, Greg Wilkins wrote:\n\n> Changed the default so that host identity is not done by default.\n\nOn 2013-03-13 18:28:05 -0400, Greg Wilkins wrote:\n\n> Simone,\n> \n> can you update the client code/examples so that SslContextFactory.setEndpointIdentificationAlgorithm(\"HTTPS\") is done.\n\nOn 2013-06-12 04:29:37 -0400, Prasad BLV wrote:\n\n> Are there any updates on the above mentioned issue. I am also facing same problems in 9.0.3.v20130506 version.\n\nOn 2013-06-12 04:55:21 -0400, Ben Summers wrote:\n\n> Prasad -- read comment 6 and following comments for the solution.\n\nOn 2013-06-12 05:38:23 -0400, Prasad BLV wrote:\n\n> Thank you for your quick reply. I tried the configuration mentioned after comment 6 but I am getting the below given exception : \n> \n> javax.net.ssl.SSLPeerUnverifiedException: peer not authenticated\n>         at sun.security.ssl.SSLSessionImpl.getPeerCertificateChain(SSLSessionImpl.java:446)\n>       at org.eclipse.jetty.util.ssl.SslContextFactory.getCertChain(SslContextFactory.java:1354)\n>         at org.eclipse.jetty.server.SecureRequestCustomizer.customize(SecureRequestCustomizer.java:104)\n>         at org.eclipse.jetty.server.SecureRequestCustomizer.customize(SecureRequestCustomizer.java:54)\n>         at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:259)\n>         at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:225)\n>         at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:225)\n>         at org.eclipse.jetty.io.AbstractConnection$ReadCallback.run(AbstractConnection.java:358)\n>         at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:596)\n>         at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:527)\n>         at java.lang.Thread.run(Thread.java:722)\n> \n> Below given is my configuration for SSLContext Factory :\n> <Configure id=\"sslContextFactory\" class=\"org.eclipse.jetty.util.ssl.SslContextFactory\">\n>   <Set name=\"KeyStorePath\"><Property name=\"jetty.home\" default=\".\" />/<Property name=\"jetty.keystore\" default=\"etc/keystore\"/></Set>\n>   <Set name=\"KeyStorePassword\"><Property name=\"jetty.keystore.password\" default=\"password\"/></Set>\n>   <Set name=\"KeyManagerPassword\"><Property name=\"jetty.keymanager.password\" default=\"password\"/></Set>\n>   <Set name=\"TrustStorePath\"><Property name=\"jetty.home\" default=\".\" />/<Property name=\"jetty.truststore\" default=\"etc/keystore\"/></Set>\n>   <Set name=\"TrustStorePassword\"><Property name=\"jetty.truststore.password\" default=\"password\"/></Set>\n>   <Set name=\"EndpointIdentificationAlgorithm\"></Set>\n>   <New id=\"sslHttpConfig\" class=\"org.eclipse.jetty.server.HttpConfiguration\">\n>     <Arg><Ref refid=\"httpConfig\"/></Arg>\n>   <Call name=\"addCustomizer\">\n>       <Arg><New class=\"org.eclipse.jetty.server.SecureRequestCustomizer\"/></Arg>\n>     </Call>\n>   </New>\n> </Configure>\n> \n> Please let me know if missing anything...\n", "commits": {}, "title": "SSL client certificates do not work in Jetty 9.0.0.RC2", "created": "2016-02-16 23:20:45", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/109", "commitsDetails": [], "ttf": 379.0002777777778}, {"labels": ["Bug"], "closed": "2016-06-10 06:35:48", "body": "migrated from Bugzilla [#393363](https://bugs.eclipse.org/bugs/show_bug.cgi?id=393363)\nstatus ASSIGNED severity _major_ in component _server_ for _7.6.x_\nReported in version _unspecified_ on platform _All_\nAssigned to: Greg Wilkins\n\nOriginal attachment names and IDs:\n- _[0001-The-use-of-toUpperCase-must-be-Locale-insensitive.-O.patch](https://bugs.eclipse.org/bugs//attachment.cgi?id=223085)_ (ID 223085)\n\nOn 2012-11-01 14:58:16 -0400, Mike Christianson wrote:\n\n> Created attachment 223085\n> Locale insensitive patch\n> \n> The use of toUpperCase() must be Locale insensitive. Otherwise, setTarget() will throw a NoSuchMethodException when the rules of the default Locale produce an unexpected result. For example, if user.language=tr, then the following would produce \"set\u00c4\u00b0nitialSize\" rather than the expected \"setInitialSize\":\n> \n> ```\n> String target = \"initialSize\";\n> String setter = \"set\"+target.substring(0,1).toUpperCase()+target.substring(1);\n> ```\n> \n> This applies to current and past versions of Jetty.\n\nOn 2012-11-01 20:56:10 -0400, Greg Wilkins wrote:\n\n> This needed a wider solution as we do lots of toUpperCase and toLowerCase calls assuming the default local will work.\n> \n> I have patched jetty-7 ( 65202e9 ) and these changes will soon be merged to 8 and 9.\n> \n> I've not yet done a test harness for this.\n", "commits": {}, "title": "Injection.setTarget() fails when default Locale causes String.toUpperCase() to produce unexpected results", "created": "2016-02-16 23:19:53", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/103", "commitsDetails": [], "ttf": 114.00027777777778}, {"labels": ["Bug"], "closed": "2019-04-04 04:33:50", "body": "migrated from Bugzilla [#382032](https://bugs.eclipse.org/bugs/show_bug.cgi?id=382032)\nstatus ASSIGNED severity _normal_ in component _osgi_ for _7.6.x_\nReported in version _unspecified_ on platform _PC_\nAssigned to: Jan Bartel\n\nOn 2012-06-07 13:20:10 -0400, Dan Gravell wrote:\n\n> Build Identifier: \n> \n> This is Jetty 7.6.1.\n> \n> I have followed the instructions (http://wiki.eclipse.org/Jetty/Feature/Jetty_OSGi) to create an OSGI bundle that, when started, both registers a Server and WebAppContext Service. Here's my code for the latter:\n> \n> WebAppContext blissUiContextHandler = new WebAppContext();\n> Dictionary blissUiProps = new Hashtable();\n> blissUiProps.put(OSGiWebappConstants.SERVICE_PROP_WAR,\"target/classes\");\n> blissUiProps.put(OSGiServerConstants.MANAGED_JETTY_SERVER_NAME, serverName);\n> context.registerService(ContextHandler.class.getName(),blissUiContextHandler,blissUiProps);\n> \n> Notice that the 'target/classes' folder is specified as the location for the WAR structure inside my bundle.\n> \n> At development time, running in the Eclipse OSGi runner, this works fine. All the code for the web app goes into target/classes and it all works nicely.\n> \n> At runtime, within Felix, it doesn't work. Here's what I get in way of output:\n> \n> 2012-06-07 18:02:32.700:WARN:oejobis.DefaultJettyAtJettyHomeHelper:No default jetty started.\n> 2012-06-07 18:02:32.784:INFO:oejs.Server:jetty-7.6.1.v20120215\n> 2012-06-07 18:02:32.802:INFO:oejdp.ScanningAppProvider:Deployment monitor /home/gravelld/eclipse-workspaces/bliss/com.elsten.bliss.installer/release/xyz at interval 10\n> 2012-06-07 18:02:32.815:INFO:oejs.AbstractConnector:Started SelectChannelConnector@0.0.0.0:3220\n> 2012-06-07 18:02:59.687:INFO:oejd.DeploymentManager:Deployable added: com.elsten.bliss.ui-1.0.0.0/target/classes\n> 2012-06-07 18:02:59.694:INFO:oejw.WebInfConfiguration:Extract bundle://10.0:0/target/classes/ to /tmp/jetty-0.0.0.0-3220-classes-_-any-/webapp\n> 2012-06-07 18:02:59.733:INFO:oejw.StandardDescriptorProcessor:NO JSP Support for /, did not find org.apache.jasper.servlet.JspServlet\n> 2012-06-07 18:02:59.745:INFO:oejsh.ContextHandler:started o.e.j.w.WebAppContext{/,file:/tmp/jetty-0.0.0.0-3220-classes-_-any-/webapp/},bundle://10.0:0/target/classes/\n> \n> If I attempt to access the server I get a blank directory listing.\n> \n> Note that /tmp/jetty-0.0.0.0-3220-classes-_-any-/webapp is empty.\n> \n> I stepped through this with a debugger particularly looking at WebBundleDeployerHelper. This returns the location of the web app as bundle://10.0:0/target/classes/, whereas at runtime this is a file:// url which can be seen to exist (I don't know how the resolution of felix bundle:// URLs work although I note you have some code for this.\n> \n> I inspected the bundle JAR by hand. The target/classes folder is there, fully populated, and is including in Bundle-Classpath.\n> \n> Are there any workarounds? Am I initialising the WebAppContext in the wrong way?\n> \n> Reproducible: Always\n\nOn 2012-06-07 21:49:49 -0400, Hugues Malphettes wrote:\n\n> Hi Dan,\n> It looks like the support for locating java.io.File in Felix is lagging.\n> You can provide your own implementation of org.eclipse.jetty.osgi.boot.utils.BundleFileLocatorHelper:\n> \n> ```\n> org.eclipse.jetty.osgi.boot.utils.BundleFileLocatorHelper.DEFAULT = felixAbleBundleFileLocatorHelper;\n> ```\n> \n> If you would consider contributing it back we would be interested.\n> Let us know how it goes.\n\nOn 2012-06-07 21:53:52 -0400, Hugues Malphettes wrote:\n\n> Hum, it looks like it was already solved by Caspar here: bug 372656.\n\nOn 2012-06-08 04:11:57 -0400, Dan Gravell wrote:\n\n> Thanks, I'll try that out.\n\nOn 2012-06-11 15:34:09 -0400, Dan Gravell wrote:\n\n> I took a look at this today. It took a little more work than expected to get it working, I suspect because that code was for a version of Felix before v3. Felix is ATM at 4.0.2.\n> \n> I installed Casper's code (with his change in BundleLocationFilter.accept) but for me the first line in FileLocatorHelperImpl worked every time:\n> \n> File retVal = DEFAULT.getBundleInstallLocation(bundle);\n> \n> retVal always returned a file:// URL to the original location of the bundle (not the cache). And I assume this was still incorrect.\n> \n> I disabled this line to force Casper's code to run. But the cache was never found because it relies on a bundle.location being present. It seems that since v3 of Felix the bundle data has been consolidated in \"bundle.info\". So I changed that to check bundle.info (I just do a readLine twice... this is probably slow / prone to error).\n> \n> Put another way, http://felix.apache.org/site/apache-felix-framework-bundle-cache.html seems to be waaaaay out of date.\n> \n> That wasn't all though. Initially I had the SERVICE_PROP_WAR set to a sub directory of the bundle JAR (\"target/classes\"). This was correctly built into the bundle JAR file but I remembered that I had this working previously with a built JAR/WAR embedded within the bundle JAR. So I changed the build to that (I'm using PDE build in Eclipse) and that worked.\n> \n> Maybe you should consider this Felix versioning issue before accepting this code? Or at least adding some comments/documentation, because I don't think this will work for Felix 3+.\n> \n> Here's my revised version of Casper's code. I'd welcome your comments as to improvements, because it would also be great if we could incorporate _this_ into Jetty.\n> # \n> \n> package org.eclipse.jetty.osgi.boot.utils;\n> \n> import static org.osgi.framework.Constants.FRAMEWORK_STORAGE;\n> \n> import java.io.File;\n> import java.io.FileFilter;\n> import java.net.URL;\n> import java.util.Enumeration;\n> \n> import org.osgi.framework.Bundle;\n> \n> public class FileLocatorHelperImpl implements BundleFileLocatorHelper {\n> \n> ```\n> private static final String FELIX_BUNDLE_IMP_CLASS =\n> ```\n> \n> \"org.apache.felix.framework.BundleImpl\";\n> \n> ```\n> @Override\n> public File getBundleInstallLocation(Bundle bundle) throws Exception\n> {\n>     File retVal = DEFAULT.getBundleInstallLocation(bundle);\n> \n>     if(FELIX_BUNDLE_IMP_CLASS.equals(bundle.getClass().getCanonicalName())) {\n>         File cacheDir = new\n> ```\n> \n> File(bundle.getBundleContext().getProperty(FRAMEWORK_STORAGE));\n>             retVal = findBundleCacheDir(bundle, cacheDir);\n>         }\n>         return retVal;\n>     }\n> \n> ```\n> private File findBundleCacheDir(final Bundle bundle, File cacheDir)\n> {\n>     File[] files = cacheDir.listFiles(new BundleLocationFilter(bundle));\n> \n>     if(files == null || files.length != 1) {\n>         return null;\n>     }\n> \n>     File[] subdirs = files[0].listFiles(new FileFilter() {\n>         @Override\n>         public boolean accept(File file)\n>         {\n>             return file.isDirectory() &&\n> ```\n> \n> file.getName().startsWith(\"version\");\n>             }\n>         });\n> \n> ```\n>     if(subdirs == null || subdirs.length != 1) {\n>         return null;\n>     }\n>     return new File(subdirs[0] + File.separator + \"bundle.jar\");\n> }\n> \n> \n> @Override\n> public File getFileInBundle(Bundle bundle, String path) throws Exception\n> {\n>     return DEFAULT.getFileInBundle(bundle, path);\n> }\n> \n> \n> @Override\n> public File[] locateJarsInsideBundle(Bundle bundle) throws Exception\n> {\n>     return DEFAULT.locateJarsInsideBundle(bundle);\n> }\n> \n> \n> @Override\n> public Enumeration<URL> findEntries(Bundle bundle, String entryPath)\n> {\n>     return DEFAULT.findEntries(bundle, entryPath);\n> }\n> ```\n> \n> }\n> # \n> \n> package org.eclipse.jetty.osgi.boot.utils;\n> \n> import java.io.BufferedReader;\n> import java.io.File;\n> import java.io.FileFilter;\n> import java.io.FileInputStream;\n> import java.io.IOException;\n> import java.io.InputStreamReader;\n> \n> import org.osgi.framework.Bundle;\n> \n> public class BundleLocationFilter implements FileFilter {\n> \n> ```\n> private static final String BUNDLE_LOCATION_FILENAME = \"bundle.info\";\n> private Bundle bundle;\n> \n> BundleLocationFilter(Bundle bundle)\n> {\n>     this.bundle = bundle;\n> }\n> \n> @Override\n> public boolean accept(File file)\n> {\n>     if(file.isDirectory()) {\n>         File originalLocation = new File(file.getAbsolutePath() +\n> ```\n> \n> File.separator + BUNDLE_LOCATION_FILENAME);\n>             if(originalLocation.isFile()) {\n>                 BufferedReader reader = null;\n>                 try {\n>                     reader = new BufferedReader(new InputStreamReader(new\n> FileInputStream(originalLocation)));\n>                     String id = reader.readLine();\n>                     String location = reader.readLine();\n>                     if(bundle.getLocation().equals(location.trim())) {\n>                         return true;\n>                     }\n>                 } catch (IOException e) {\n>                     return false;\n>                 } finally {\n>                     if(reader != null) {\n>                         try {\n>                             reader.close();\n>                         } catch (IOException e) {}\n>                     }\n>                 }\n>             }\n>         }\n>         return false;\n>     }\n> }\n> \n> Obvious issues:\n> - That code does a DEFAULT.getBundleInstallLocation(bundle) and that then gets ignored\n> - 2x readLines may not be optimal\n> - We're still reliant on an unpublished standard\n\nOn 2012-06-12 05:30:53 -0400, Dan Gravell wrote:\n\n> Additionally, I just found out that I don't even need Caspar's patch if I use an embedded JAR. So I suppose this bug is just about finding folder level resources (which are a valid WAR structure) in a bundle.\n\nOn 2012-06-12 20:40:54 -0400, Hugues Malphettes wrote:\n\n> (In reply to comment # 5)\n> \n> > Additionally, I just found out that I don't even need Caspar's patch if I use\n> > an embedded JAR. So I suppose this bug is just about finding folder level\n> > resources (which are a valid WAR structure) in a bundle.\n> \n> That sounds like a good workaround.\n> Keep us updated.\n\nOn 2012-06-13 05:30:12 -0400, Dan Gravell wrote:\n\n> Everything appears to work fine with the embedded JAR. As far as my own application is concerned I am happy with that, although I think it's still an issue that needs to be addressed in the Jetty/Felix interaction, no?\n> \n> Better still, shouldn't this be spec'd in the OSGi spec so you don't have to do the horrible URL introspection?\n\nOn 2012-06-15 03:03:33 -0400, Hugues Malphettes wrote:\n\n> (In reply to comment # 7)\n> \n> > Everything appears to work fine with the embedded JAR. As far as my own\n> > application is concerned I am happy with that, although I think it's still an\n> > issue that needs to be addressed in the Jetty/Felix interaction, no?\n> > Yes it remains an issue.\n> > \n> > Better still, shouldn't this be spec'd in the OSGi spec so you don't have to do\n> > the horrible URL introspection?\n> > Yes it is most horrible. There is no standard API to access the file system in OSGi as far as I know. Unless the OSGi spec was updated in this regard in the last year.\n> > My naive understanding is that OSGi does not map the bundles resources to a filesystem; in order to support transparent distributed services or very small or very constrained installations.\n> \n> Let us know if there is now a none proprietary API in OSGi to access the filesystem.\n\nOn 2012-06-15 05:15:05 -0400, Dan Gravell wrote:\n\n> Yeah, you're right, I wasn't thinking. By specifying a _folder_ as the web app path I'm implying a file system. Instead, if I specify a URL to a resource with WAR structure which is in the Bundle-Classpath I guess everything just works by virtue of the OSGi classloading.\n> \n> If this is true, in many ways you could see an argument for _completely withdrawing_ support for folder locations as it's not 'OSGi' enough. However, I hope you don't because it would make development time work extremely cumbersome.\n\nOn 2012-06-15 05:56:30 -0400, Hugues Malphettes wrote:\n\n> (In reply to comment # 9)\n> \n> > Yeah, you're right, I wasn't thinking. By specifying a _folder_ as the web app\n> > path I'm implying a file system. Instead, if I specify a URL to a resource with\n> > WAR structure which is in the Bundle-Classpath I guess everything just works by\n> > virtue of the OSGi classloading.\n> > \n> > If this is true, in many ways you could see an argument for _completely\n> > withdrawing_ support for folder locations as it's not 'OSGi' enough. However, I\n> > hope you don't because it would make development time work extremely\n> > cumbersome.\n> > All my projects do want a file system returned and do many web frameworks that just won't work if the webapp is not unzipped: not anywhere near removing it.\n> \n> It is here:\n> javax.servlet.ServletContext#getRealPath(java.lang.String)\n> And it won't return null in OSGi thanks to this ugly introspection.\n> Virgo uses a fragment specific to equinox or felix if I remember well.\n\nOn 2012-06-15 07:47:26 -0400, Dan Gravell wrote:\n\n> Cool, well thanks for your insights. I suppose, then, this remains open until Felix is supported.\n\nOn 2013-10-23 20:26:03 -0400, Jan Bartel wrote:\n\n> Hi Dan,\n> \n> Sorry this issue has been open a while. \n> \n> Do you know if this has actually been fixed? Our unit tests use felix 3.2.2 and 4.0.2 and it seems to work ... however, as its actually running inside eclipse I'm not confident that it would be the same as running in a standalone osgi container.\n> \n> Could you possibly test this with the most recent version of jetty (something like 9.1.0.RC0) and report if this is still a problem or not?\n> \n> thanks,\n> Jan\n\nOn 2013-10-24 03:40:11 -0400, Dan Gravell wrote:\n\n> I can try... I'm pretty sure you need to run it standalone though. If you run it in Eclipse then the Equinox URL handling for bundles will take over, which will mean it will work.\n\nOn 2014-09-19 03:14:51 -0400, Jan Bartel wrote:\n\n> Hi Dan,\n> \n> Well its been a while ... where are we at with this bug? The jetty osgi code has undergone some major revisions in the interim. I've also tested jetty-2.4-SNAPSHOT with felix 4.4.1 and webapps deployed as bundles are working fine.\n> \n> After all the back-and-forth on this issue, can we restate the original actual problem? Is it that you can't deploy a webapp as a packed bundle where the webapp base directory is expressed as a location relative to the root of the bundle itself?\n> \n> thanks\n> Jan\n> \n> (In reply to Dan Gravell from comment # 13)\n> \n> > I can try... I'm pretty sure you need to run it standalone though. If you\n> > run it in Eclipse then the Equinox URL handling for bundles will take over,\n> > which will mean it will work.\n\nOn 2014-11-05 14:46:56 -0500, Dan Gravell wrote:\n\n> Yes, that's right. My bundle activator was starting a Jetty instance, but the path I was specifying as OSGiWebappConstants.SERVICE_PROP_WAR, which contained a bunch of files in the standard WAR structure, was not being found.\n> \n> It appeared that the OOTB behaviour just did not cater for Felix. Maybe it does now?\n> \n> Personally, I continue to use the workaround detailed above.\n\nOn 2014-11-06 00:12:51 -0500, Jan Bartel wrote:\n\n> Hi Dan,\n> \n> (In reply to Dan Gravell from comment # 15)\n> \n> > Yes, that's right. My bundle activator was starting a Jetty instance, but\n> > the path I was specifying as OSGiWebappConstants.SERVICE_PROP_WAR, which\n> > contained a bunch of files in the standard WAR structure, was not being\n> > found.\n> \n> Thanks for the confirmation of the situation.\n> \n> > It appeared that the OOTB behaviour just did not cater for Felix. Maybe it\n> > does now?\n> \n> Nope, your particular use-case (webapp as directory inside bundle) does not work. \n> \n> > Personally, I continue to use the workaround detailed above.\n> \n> The workaround of using a webapp as a packed war embedded into the bundle I can confirm is working, so if its working for you, I suggest you keep using it for a while.\n> \n> It seems to be problematic to obtain the location of the cached felix bundle, rather than the location of the bundle that was deployed.\n> \n> Bundle.getLocation() on felix returns the original location of the bundle that was deployed, not the cached location. Reading your previous postings of your and Caspar's efforts to obtain the cached location, and consulting the felix source, plus observing the cache when deploying different configurations of bundles, my conclusion is that this will be difficult and messy!\n> \n> For example, if I have a bundle that contains a webapp as a subdirectory (ie your case), like so:\n> \n> example-bundle.jar:\n>   META-INF/MANIFEST.MF\n>   target/\n>   target/classes/\n>   target/classes/index.html\n>   target/classes/com/\n>   target/classes/com/acme/\n>   target/classes/com/acme/osgi/\n>   target/classes/com/acme/osgi/Activator.class\n> \n> then felix puts it into the cache like this:\n> bundle38\n> \u00e2\u0094\u009c\u00e2\u0094\u0080\u00e2\u0094\u0080 bundle.info\n> \u00e2\u0094\u0094\u00e2\u0094\u0080\u00e2\u0094\u0080 version0.0\n>     \u00e2\u0094\u009c\u00e2\u0094\u0080\u00e2\u0094\u0080 bundle.jar\n>     \u00e2\u0094\u009c\u00e2\u0094\u0080\u00e2\u0094\u0080 bundle.jar-embedded\n>     \u00e2\u0094\u0082\u00c2\u00a0\u00c2\u00a0 \u00e2\u0094\u0094\u00e2\u0094\u0080\u00e2\u0094\u0080 target\n>     \u00e2\u0094\u0082\u00c2\u00a0\u00c2\u00a0     \u00e2\u0094\u0094\u00e2\u0094\u0080\u00e2\u0094\u0080 classes\n>     \u00e2\u0094\u0094\u00e2\u0094\u0080\u00e2\u0094\u0080 revision.location\n> \n> If instead I have an embedded packed war like so:\n> \n> example-bundle-embedded.jar:\n>     META-INF/MANIFEST.MF\n>     com/\n>     com/acme/\n>     com/acme/osgi/\n>     com/acme/osgi/Activator.class\n>     embedded.war\n> \n> then felix puts it into the cache like this:\n> bundle38\n> \u00e2\u0094\u009c\u00e2\u0094\u0080\u00e2\u0094\u0080 bundle.info\n> \u00e2\u0094\u0094\u00e2\u0094\u0080\u00e2\u0094\u0080 version0.4\n>     \u00e2\u0094\u009c\u00e2\u0094\u0080\u00e2\u0094\u0080 bundle.jar\n>     \u00e2\u0094\u0094\u00e2\u0094\u0080\u00e2\u0094\u0080 revision.location\n> \n> I think the way forward is to use a lot of reflection to try and obtain the cached file location (rather than to hard-code an expectation of the above directory layout). However, this work will have a low priority as there is an effective workaround (using an embedded war rather than a directory).\n> \n> thanks\n> Jan\n\nOn 2014-11-10 14:41:40 -0500, Dan Gravell wrote:\n\n> Sounds sensible.\n", "commits": {}, "title": "Can't deploy web app as an unpacked directory inside a bundle JAR on Felix", "created": "2016-02-16 23:19:34", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/100", "commitsDetails": [], "ttf": 1142.0002777777777}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "jmcc0nn3ll", "filteredCommits": ["ae0ab46066117284fdcffff6daf26c629307f1a7", "d48c258deb54af200636311240a513cf1665354c"], "commits": {"d48c258deb54af200636311240a513cf1665354c": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "39c230f294a3cfd43cedd988f5261d20203bd015": {"commitUser": "joakime", "commitGHEventType": "referenced"}, "ae0ab46066117284fdcffff6daf26c629307f1a7": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2016-02-16 23:18:57", "commitsDetails": [{"commitMessage": "Issue #97 ServletHolder unavailable handling\n\nTook the opportunity to do a major cleanup of the Holders.\nServletHolder now uses wrapping to achieve optional behaviour rather than lots of if statements.\n\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\n", "commitParents": ["37f96bdf2b3c654a92289617ccba1509a663d130"], "commitHash": "d48c258deb54af200636311240a513cf1665354c", "commitSpoonAstDiffStats": [], "nameRev": "d48c258deb54af200636311240a513cf1665354c tags/jetty-9.4.21.v20190926~16^2~1", "commitUser": "gregw", "authoredDateTime": "2019-09-12 17:56:09", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 115, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/ErrorPageTest.java", "insertions": 93, "deletions": 22}, {"lines": 23, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/Holder.java", "insertions": 15, "deletions": 8}, {"lines": 57, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/ServletHolderTest.java", "insertions": 35, "deletions": 22}, {"lines": 57, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/FilterHolder.java", "insertions": 24, "deletions": 33}, {"lines": 15, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletContextHandler.java", "insertions": 15, "deletions": 0}, {"lines": 7, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletHandler.java", "insertions": 7, "deletions": 0}, {"lines": 64, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ListenerHolder.java", "insertions": 39, "deletions": 25}, {"lines": 80, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/HolderTest.java", "insertions": 0, "deletions": 80}, {"lines": 30, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/BaseHolder.java", "insertions": 22, "deletions": 8}, {"lines": 501, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletHolder.java", "insertions": 300, "deletions": 201}], "commitDateTime": "2019-09-12 17:56:09", "spoonStatsSkippedReason": "tooManyChanges"}, {"commitMessage": "Merge pull request #4083 from eclipse/jetty-9.4.x-97-Unavailable\n\nIssue #97 ServletHolder unavailable handling", "commitParents": ["2d6e9b0efcfd4e9c4e02108f846c2de83f053e7f", "ae0ab46066117284fdcffff6daf26c629307f1a7"], "commitHash": "39c230f294a3cfd43cedd988f5261d20203bd015", "commitSpoonAstDiffStats": [], "nameRev": "39c230f294a3cfd43cedd988f5261d20203bd015 tags/jetty-9.4.21.v20190926~16", "commitUser": "joakime", "authoredDateTime": "2019-09-13 09:58:09", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 23, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/Holder.java", "insertions": 15, "deletions": 8}, {"lines": 64, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ListenerHolder.java", "insertions": 39, "deletions": 25}, {"lines": 14, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/ContextHandler.java", "insertions": 11, "deletions": 3}, {"lines": 80, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/HolderTest.java", "insertions": 0, "deletions": 80}, {"lines": 30, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/BaseHolder.java", "insertions": 22, "deletions": 8}, {"lines": 501, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletHolder.java", "insertions": 300, "deletions": 201}, {"lines": 115, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/ErrorPageTest.java", "insertions": 93, "deletions": 22}, {"lines": 15, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletContextHandler.java", "insertions": 15, "deletions": 0}, {"lines": 225, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/ServletLifeCycleTest.java", "insertions": 225, "deletions": 0}, {"lines": 57, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/FilterHolder.java", "insertions": 24, "deletions": 33}, {"lines": 7, "filePath": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletHandler.java", "insertions": 7, "deletions": 0}, {"lines": 57, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/ServletHolderTest.java", "insertions": 35, "deletions": 22}], "commitDateTime": "2019-09-13 09:58:09", "spoonStatsSkippedReason": "tooManyChanges"}, {"commitMessage": "Issue #97 Unavailable handling\n\nAdded test for servlet component lifecycle\nFixed bug where we were destroying listeners before calling them.\n\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\n", "commitParents": ["d48c258deb54af200636311240a513cf1665354c"], "commitHash": "ae0ab46066117284fdcffff6daf26c629307f1a7", "commitSpoonAstDiffStats": [{"spoonFilePath": "ServletLifeCycleTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.servlet.ServletLifeCycleTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "ContextHandler.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.ContextHandler.stopContext()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 1, "TOT": 2}]}], "nameRev": "ae0ab46066117284fdcffff6daf26c629307f1a7 tags/jetty-9.4.21.v20190926~16^2", "commitUser": "gregw", "authoredDateTime": "2019-09-13 11:40:11", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 14, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/handler/ContextHandler.java", "insertions": 11, "deletions": 3}, {"lines": 225, "filePath": "jetty-servlet/src/test/java/org/eclipse/jetty/servlet/ServletLifeCycleTest.java", "insertions": 225, "deletions": 0}], "commitDateTime": "2019-09-13 11:40:11", "spoonStatsSkippedReason": ""}], "title": "Permanent UnavailableException thrown during servlet request handling should cause servlet destroy", "spoonStatsSummary": {"spoonMethodsChanged": 1, "DEL": 0.0, "INS": 1.0, "UPD": 0.0, "MOV": 1.0, "TOT": 2.0, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 711, "insertions": 433, "gitFilesChange": 8, "deletions": 278}, "closed": "2019-11-14 05:22:36", "statsSkippedReason": "", "body": "migrated from Bugzilla [#375013](https://bugs.eclipse.org/bugs/show_bug.cgi?id=375013)\nstatus ASSIGNED severity _normal_ in component _server_ for _9.0.0.RC0_\nReported in version _7.6.2_ on platform _All_\nAssigned to: Jan Bartel\n\nOn 2012-03-21 22:48:36 -0400, Jan Bartel wrote:\n\n> Servlet spec 3.0, sec. 2.3.3.2, pg 10:\n> \n> If a permanent unavailability is indicated by the UnavailableException, the servlet\n> container must remove the servlet from service, call its destroy method, and release\n> the servlet instance. Any requests refused by the container by that cause must be\n> returned with a SC_NOT_FOUND (404) response.\n> \n> ...\n> \n> The container may choose to ignore the distinction between a permanent and\n> temporary unavailability and treat all UnavailableExceptions as permanent,\n> thereby removing a servlet that throws any UnavailableException from service.\n", "changesInPackagesGIT": ["jetty-servlet/src/main/java/org/eclipse/jetty/servlet", "jetty-server/src/main/java/org/eclipse/jetty/server/handler"], "changesInPackagesSPOON": ["org.eclipse.jetty.server.handler.ContextHandler.stopContext()"], "ttf": 1366.0002777777777, "numCommits": 2, "url": "https://github.com/eclipse/jetty.project/issues/97"}, {"labels": ["Bug", "Invalid"], "closed": "2018-03-13 20:06:11", "body": "migrated from Bugzilla [#372656](https://bugs.eclipse.org/bugs/show_bug.cgi?id=372656)\nstatus ASSIGNED severity _normal_ in component _osgi_ for _7.5.x_\nReported in version _8.1.1_ on platform _PC_\nAssigned to: Jan Bartel\n\nOriginal attachment names and IDs:\n- _[bugzilla_372656.tgz](https://bugs.eclipse.org/bugs//attachment.cgi?id=211832)_ (ID 211832)\n\nOn 2012-02-27 11:06:56 -0500, Caspar MacRae wrote:\n\n> Hi,\n> \n> I can see the work needed to unwrap Bundle original location into something that Jetty can inspect the contents of (ie. the cached copy).  The workaround here doesn't work with Karaf/Felix and bundles deployed via the mvn url handler (from PaxUrl).\n> \n> I'm using Karaf (2.2.4) where it seems the behaviour of the mvn URL handler differs between Equinox and Felix (from what I can see the bundle original location is set to the cached file for Equinox so gets bundle:file: protocol whereas for Felix it's the genuine original URl of mvn://).\n> \n> The following classes, walk the known path of the Felix cache, using documented behaviour (http://felix.apache.org/site/apache-felix-framework-bundle-cache.html) to find the locally cached version of the bundle.\n> \n> This is working fine for me when packaged inside a fragment of \"org.eclipse.jetty.osgi.boot\" - may be this could be merged into \n> org.eclipse.jetty.osgi.boot.utils.internal.DefaultFileLocatorHelper as there's no dependencies and it's a tiny addition?\n> \n> Apologies for inline code, but just two classes:\n> ---\n> \n> package org.eclipse.jetty.osgi.boot.utils;\n> \n> import static org.osgi.framework.Constants.FRAMEWORK_STORAGE;\n> \n> import java.io.File;\n> import java.io.FileFilter;\n> import java.net.URL;\n> import java.util.Enumeration;\n> \n> import org.osgi.framework.Bundle;\n> \n> public class FileLocatorHelperImpl implements BundleFileLocatorHelper {\n> \n>   private static final String FELIX_BUNDLE_IMP_CLASS = \"org.apache.felix.framework.BundleImpl\";\n> \n>   @Override\n>   public File getBundleInstallLocation(Bundle bundle) throws Exception\n>   {\n>       File retVal = DEFAULT.getBundleInstallLocation(bundle);\n> \n> ```\n>   if(retVal == null && FELIX_BUNDLE_IMP_CLASS.equals(bundle.getClass().getCanonicalName())) {\n>       File cacheDir = new File(bundle.getBundleContext().getProperty(FRAMEWORK_STORAGE));\n>       retVal = findBundleCacheDir(bundle, cacheDir);\n>   }\n>   return retVal;\n> ```\n> \n>   }\n> \n>   private File findBundleCacheDir(final Bundle bundle, File cacheDir)\n>   {\n>       File[] files = cacheDir.listFiles(new BundleLocationFilter(bundle));\n> \n> ```\n>   if(files == null || files.length != 1) {\n>       return null;\n>   }\n> \n>   File[] subdirs = files[0].listFiles(new FileFilter() {\n>       @Override\n>       public boolean accept(File file)\n>       {\n>           return file.isDirectory() && file.getName().startsWith(\"version\");\n>       }\n>   });\n> \n>   if(subdirs == null || subdirs.length != 1) {\n>       return null;\n>   }\n>   return new File(subdirs[0] + File.separator + \"bundle.jar\");\n> ```\n> \n>   }\n> \n>   @Override\n>   public File getFileInBundle(Bundle bundle, String path) throws Exception\n>   {\n>       return DEFAULT.getFileInBundle(bundle, path);\n>   }\n> \n>   @Override\n>   public File[] locateJarsInsideBundle(Bundle bundle) throws Exception\n>   {\n>       return DEFAULT.locateJarsInsideBundle(bundle);\n>   }\n> \n>   @Override\n>   public Enumeration<URL> findEntries(Bundle bundle, String entryPath)\n>   {\n>       return DEFAULT.findEntries(bundle, entryPath);\n>   }\n> \n> }\n> ---\n> \n> package org.eclipse.jetty.osgi.boot.utils;\n> \n> import java.io.BufferedReader;\n> import java.io.File;\n> import java.io.FileFilter;\n> import java.io.FileInputStream;\n> import java.io.IOException;\n> import java.io.InputStreamReader;\n> \n> import org.osgi.framework.Bundle;\n> \n> public class BundleLocationFilter implements FileFilter {\n> \n>   private static final String BUNDLE_LOCATION_FILENAME = \"bundle.location\";\n>   private Bundle bundle;\n> \n>   BundleLocationFilter(Bundle bundle)\n>   {\n>       this.bundle = bundle;\n>   }\n> \n>   @Override\n>   public boolean accept(File file)\n>   {\n>       if(file.isDirectory()) {\n>           File originalLocation = new File(file.getAbsolutePath() + File.separator + BUNDLE_LOCATION_FILENAME);\n>           if(originalLocation.isFile()) {\n>               try {\n>                   BufferedReader reader = new BufferedReader(new InputStreamReader(new FileInputStream(originalLocation)));\n>                   String location = reader.readLine();\n>                   if(bundle.getLocation().equals(location.trim())) {\n>                       return true;\n>                   }\n>               } catch (IOException e) {\n>                   return false;\n>               }\n>           }\n>       }\n>       return false;\n>   }\n> }\n> ---\n> \n> thanks,\n> Caspar\n\nOn 2012-02-27 20:53:16 -0500, Hugues Malphettes wrote:\n\n> Hi there, thanks for filing this and writing the addition.\n> \n> It is tempting to provide the functionality out of the box although I don't think we have the resources to actively test and maintain it.\n> As it is documented it should remain quite stable.\n> \n> Let me review with the rest of the team.\n> \n> One question: is not the method BundleLocationFilter.accept leaking file handles?\n\nOn 2012-02-28 04:40:41 -0500, Caspar MacRae wrote:\n\n> Hi Hugues,\n> \n> RE: leaked handles - yes and potentially quite a few (cue redface), my only defense is it was hastily written to explore the problem (fixed below).\n> \n> On one hand I think there's probably a sizable Felix & maven population, that have never deployed a bundle from a file:// url.  But I quite understand your position wrt resource/maintenance/testing, especially given that this not the targeted runtime and there's already solutions such as PaxWeb.\n> \n> thanks\n> \n>   @Override\n>   public boolean accept(File file)\n>   {\n>       if(file.isDirectory()) {\n>           File originalLocation = new File(file.getAbsolutePath() + File.separator + BUNDLE_LOCATION_FILENAME);\n>           if(originalLocation.isFile()) {\n>               BufferedReader reader = null;\n>               try {\n>                   reader = new BufferedReader(new InputStreamReader(new FileInputStream(originalLocation)));\n>                   String location = reader.readLine();\n>                   if(bundle.getLocation().equals(location.trim())) {\n>                       return true;\n>                   }\n>               } catch (IOException e) {\n>                   return false;\n>               } finally {\n>                   if(reader != null) {\n>                       try {\n>                           reader.close();\n>                       } catch (IOException e) {}\n>                   }\n>               }\n>           }\n>       }\n>       return false;\n>   }\n\nOn 2012-02-28 05:21:43 -0500, Hugues Malphettes wrote:\n\n> (In reply to comment # 2)\n> \n> > Hi Hugues,\n> > \n> > RE: leaked handles - yes and potentially quite a few (cue redface), my only\n> > defense is it was hastily written to explore the problem (fixed below).\n> > :) I did not mean to insist on that: It definitely looked like you know what you are doing.\n> > \n> > On one hand I think there's probably a sizable Felix & maven population, that\n> > have never deployed a bundle from a file:// url.  But I quite understand your\n> > position wrt resource/maintenance/testing, especially given that this not the\n> > targeted runtime and there's already solutions such as PaxWeb.\n> > OK writing a short email to the jetty-dev then.\n> > Always happy to have more adopters anyways.\n> > Cheers,\n> > Hugues\n> > \n> > thanks\n\nOn 2012-02-28 06:22:33 -0500, Caspar MacRae wrote:\n\n> Hi Hugues,\n> \n> That's great thanks.\n> \n> Still woefully embarrassed re: handle leaks =) \n> \n> cheers,\n> Caspar\n\nOn 2012-02-29 03:13:42 -0500, Hugues Malphettes wrote:\n\n> Hi Caspar,\n> \n> We got the nods from the team to commit this with jetty [1].\n> \n> To support the IP process tools at eclipse, would you mind packaging the stages as an attachment and add a comment that you are the author of those attachments and are licensing them with EPL+ASL20?\n> \n> Cheers.\n> Hugues\n> [1] http://dev.eclipse.org/mhonarc/lists/jetty-dev/msg01253.html\n\nOn 2012-02-29 14:08:17 -0500, Caspar MacRae wrote:\n\n> Created attachment 211832\n> Two classes with EPL license headers\n\nOn 2012-02-29 14:09:58 -0500, Caspar MacRae wrote:\n\n> Hi Hugues,\n> \n> Wasn't sure of the correct header to add, losely followed some git/gerrit notes on Al Blue's blog.  Attached as a tarball and added the following header to both classes:\n> \n> /**\n> - http://www.eclipse.org/legal/epl-v10.html\n> - http://www.apache.org/licenses/LICENSE-2.0.html\n>   *\n> - I hereby assert that I authored 100% the content that I am contributing\n> - I hereby assert that I have the rights to donate the content to EPL / ASL20\n> - I hereby assert that I contribute the content under the EPL / ASL20\n> - \n> - @see https://bugs.eclipse.org/bugs/show_bug.cgi?id=372656\n> - @author Caspar MacRae\n>   */\n> \n> If it's not ok, please point me to some documentation and I'll correct it.\n> \n> cheers,\n> Caspar\n\nOn 2012-05-01 05:21:20 -0400, Jan Bartel wrote:\n\n> Caspar,\n> \n> The headers on contributed files should follow this format:\n> http://eclipse.org/legal/copyrightandlicensenotice.php\n> \n> Could you resubmit your attachments (with appropriate headers) as a patch to the jetty codebase (integrating the code from your FileLocatorHelperImpl with DefaultFileLocatorHelper IIUC) so we can apply it?\n> \n> thanks,\n> Jan\n\nOn 2012-05-01 11:01:27 -0400, Jesse McConnell wrote:\n\n> also best to make a statement that you authored 100% of the code and you are free to contribute it, just to make sure the lawyers are happy :)\n\nOn 2012-05-02 04:34:47 -0400, Caspar MacRae wrote:\n\n> Hi Jan/Jesse,\n> \n> The git links on http://wiki.eclipse.org/Jetty/Contributor/Building seem to be stale, specifically http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git - so took it from source of github mirror git://git.eclipse.org/gitroot/jetty/org.eclipse.jetty.project.git   \n> \n> I'll get this done tonight.\n> \n> One thing to note with this approach; the zip file closed error https://bugs.eclipse.org/bugs/show_bug.cgi?id=364936 occurs, but the documented fix works perfectly <Set class=\"org.eclipse.jetty.util.resource.Resource\" name=\"defaultUseCaches\">false</Set>\n> \n> cheers,\n> Caspar\n\nOn 2012-05-06 12:43:44 -0400, Caspar MacRae wrote:\n\n> Hi Jan/Jesse,\n> \n> Apologies for not get this done yet, I'm now in Cuba for two weeks, I thought I'd be able to squeeze this in before I left - but got distracted writing a paxexam 1 test to demonstrate before/after patch.\n> \n> I will absolutely get this submitted on my return - apologies again for the delay.\n> \n> Best regards,\n> Caspar\n\nOn 2012-06-11 15:35:13 -0400, Dan Gravell wrote:\n\n> This is great work but I've noticed that it didn't work for me on Felix 4.0.2 (and I suspect on versions 3 and later). Please see https://bugs.eclipse.org/bugs/show_bug.cgi?id=382032 .\n\nOn 2012-06-12 09:41:07 -0400, Caspar MacRae wrote:\n\n> @Jan/@Huges - apologies for the poor time management on this - I _will_ get this sorted this weekend.\n> \n> @Dan, you are right, the documented cache behaviour was changed at some point in the 3.x line - this is an easy fix to accommodate both formats, but I don't like the fact that's it's undocumented.\n> \n> I will attached an updated patch this weekend and chase this up on the Felix mailing list.\n\nOn 2012-06-18 07:20:19 -0400, Caspar MacRae wrote:\n\n> Hi,\n> \n> I did some work on this yesterday, making changes to PaxExam tests to verify the cache access, but I also discovered a classloading issue using Jetty with Felix 4.x.\n> \n> PaxExam:\n> \n> The version of pax exam used (1.2.0) doesn't support later frameworks (the range for Felix ends at 2.0.1), version 2.x of PaxExam is more configurable allowing the framework(s) to be provided as a dependency.\n> \n> I changed the two tests TestJettyOSGiBootCore and TestJettyOSGiBootWithJsp (marked @Ingore), and have the TestJettyOSGiBootCore working in PaxExam 2.4.0 with Equinox (3.6.0.v20100517, existing dependency version) and Felix (checked 2.0.1 and most of the 3.x line and 4.x).\n> \n> Felix Cache:\n> \n> The cache behaviour in Felix 3.x is consistent with the documentation (last release 3.2.2), AFAIK this only changed in 4.x, there's now a ticket raising the out-of-date documentation at https://issues.apache.org/jira/browse/FELIX-3561).\n> \n> Felix 4.x classloading:\n> \n> The current Jetty classloading for Felix is also affected for versions 4.x\n> \n> org.eclipse.jetty.osgi.boot.utils.internal.DefaultBundleClassLoaderHelper#internalGetFelixBundleClassLoader(Bundle)\n> line 142 tries to get the field \"m_modules\" from org.apache.felix.framework.BundleImpl but throws an exception.\n> \n> The field \"m_modules\" referred to a list of org.apache.felix.framework.resolver.Module - a class that no longer exists in Felix 4.0.x with the advent of org.osgi.framework.wiring.BundleRevision in OSGi 4.3\n> \n> Should I include the fix for the DefaultBundleClassLoaderHelper#internalGetFelixBundleClassLoader(Bundle) in this patch or create a separate ticket? (I have an additional PaxExam test for this which ensures it works in Felix 3.x/4.x)\n> \n> Jan/Huges/Jesse, I'm a little worried about scope creep here - though I've only touched two modules jetty-osgi-boot and test-jetty-osgi (I have separate branches for paxexam-2.4.0, this ticket and the Felix 4.x classloading issue).  How would you like this to proceed?\n> \n> thanks,\n> Caspar\n\nOn 2012-06-20 06:29:28 -0400, Dan Gravell wrote:\n\n> I've more bad news, and something that might want to be considered. When using the OBR project within Felix we get another different location URL String from the bundle again: \"obr\". Example url string:\n> \n> obr://my.bundle/-1340186518508\n> \n> Obviously this doesn't work either. I get:\n> \n> java.lang.IllegalArgumentException: Unable to locate [jar file] inside unlocated bundle '[bundle name]'\n> \n> I'm looking for ways of getting around this now... maybe providing my own file locator, so long as OBR provides some way of finding the filesystem location of the bundle.\n", "commits": {}, "title": "DefaultFileLocatorHelper doesn't work with mvn:// protocol in Felix", "created": "2016-02-16 23:18:43", "user": "jmcc0nn3ll", "url": "https://github.com/eclipse/jetty.project/issues/96", "commitsDetails": [], "ttf": 755.0002777777778}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "gregw", "filteredCommits": ["496be5e05f086b2ad1eb880dae5b61cdf459e42a"], "commits": {"496be5e05f086b2ad1eb880dae5b61cdf459e42a": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2016-02-16 15:39:11", "commitsDetails": [{"commitMessage": "Issue #84 Ignored test\n", "commitParents": ["1585dc1c20b9ae9e61c1ae6e265af9a07ab13641"], "commitHash": "496be5e05f086b2ad1eb880dae5b61cdf459e42a", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpChannelAssociationTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.client.HttpChannelAssociationTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "496be5e05f086b2ad1eb880dae5b61cdf459e42a tags/jetty-9.3.8.RC0~27", "commitUser": "gregw", "authoredDateTime": "2016-02-16 17:08:10", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "tests/test-http-client-transport/src/test/java/org/eclipse/jetty/http/client/HttpChannelAssociationTest.java", "insertions": 2, "deletions": 0}], "commitDateTime": "2016-02-16 17:08:10", "spoonStatsSkippedReason": ""}], "title": "Jetty client test failure", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0, "insertions": 0, "gitFilesChange": 0, "deletions": 0}, "closed": "2016-03-08 11:40:19", "statsSkippedReason": "", "body": "Frequently when running full builds in 9.3.x I get:\n\n```\nRunning org.eclipse.jetty.http.client.HttpChannelAssociationTest.testIdleTimeoutJustBeforeAssociation[transport: FCGI]()\n2016-02-16 16:32:35.291:INFO:oejs.Server:main: jetty-9.3.8-SNAPSHOT\n2016-02-16 16:32:35.291:INFO:oejs.ServerConnector:main: Started \nServerConnector@1f010bf0{fcgi/1.0,[fcgi/1.0]}{0.0.0.0:33332}\n2016-02-16 16:32:35.291:INFO:oejs.Server:main: Started @51615ms\n2016-02-16 16:32:35.292:INFO:oejus.SslContextFactory:main: x509=X509@1921ad94(mykey,h=[],w=[]) for SslContextFactory@ee86bcb(file:///home/gregw/src/jetty-9.3.x/tests/test-http-client-transport/src/test/resources/keystore.jks,file:///home/gregw/src/jetty-9.3.x/tests/test-http-client-transport/src/test/resources/truststore.jks)\n2016-02-16 16:32:37.296:INFO:oejs.ServerConnector:main: Stopped ServerConnector@1f010bf0{fcgi/1.0,[fcgi/1.0]}{0.0.0.0:0}\nTests run: 10, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 13.134 sec <<< FAILURE! - in org.eclipse.jetty.http.client.HttpChannelAssociationTest\ntestIdleTimeoutJustBeforeAssociation[transport: H2](org.eclipse.jetty.http.client.HttpChannelAssociationTest)  Time elapsed: 5.009 sec  <<< FAILURE!\njava.lang.AssertionError: null\n    at org.junit.Assert.fail(Assert.java:86)\n    at org.junit.Assert.assertTrue(Assert.java:41)\n    at org.junit.Assert.assertTrue(Assert.java:52)\n    at org.eclipse.jetty.http.client.HttpChannelAssociationTest.testIdleTimeoutJustBeforeAssociation(HttpChannelAssociationTest.java:124)\n```\n", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 20.00027777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/84"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Bug"], "user": "gregw", "filteredCommits": ["1585dc1c20b9ae9e61c1ae6e265af9a07ab13641"], "commits": {"1585dc1c20b9ae9e61c1ae6e265af9a07ab13641": {"commitUser": "gregw", "commitGHEventType": "referenced"}, "19e80ff788867aff40bc762ba9571374ddb6c3be": {"commitUser": "lachlan-roberts", "commitGHEventType": "referenced"}}, "created": "2016-02-16 15:00:14", "commitsDetails": [{"commitMessage": "Issue #83 Ignored\n", "commitParents": ["f10f32c0808b13f14f81a99d83dc9daff5737e46"], "commitHash": "1585dc1c20b9ae9e61c1ae6e265af9a07ab13641", "commitSpoonAstDiffStats": [{"spoonFilePath": "SessionTrackingTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.jsr356.server.SessionTrackingTest.testAddRemoveSessions()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "1585dc1c20b9ae9e61c1ae6e265af9a07ab13641 tags/jetty-9.3.8.RC0~28", "commitUser": "gregw", "authoredDateTime": "2016-02-16 16:00:51", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 2, "filePath": "jetty-websocket/javax-websocket-server-impl/src/test/java/org/eclipse/jetty/websocket/jsr356/server/SessionTrackingTest.java", "insertions": 2, "deletions": 0}], "commitDateTime": "2016-02-16 16:00:51", "spoonStatsSkippedReason": ""}, {"commitMessage": "Merge pull request #3685 from lachlan-roberts/jetty-10.0.x-83-sessiontrackingtest-failures\n\nIssue #83 - reworked SessionTrackingTest to fix intermittent failures", "commitParents": ["d377db5d26efef11a1b29a47bb6c7a145b21b14a", "52cc4f6c22ef0861e8a14a631d014054b3dce6af"], "commitHash": "19e80ff788867aff40bc762ba9571374ddb6c3be", "commitSpoonAstDiffStats": [{"spoonFilePath": "LocalServer.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.javax.tests.LocalServer.createRootHandler(org.eclipse.jetty.server.Server)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.javax.tests.LocalServer.TrackingListener", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.javax.tests.LocalServer.getTrackingListener()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.javax.tests.LocalServer", "DEL": 0, "INS": 1, "UPD": 1, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "SessionTrackingTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.javax.tests.server.SessionTrackingTest.stopServer()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.javax.tests.server.SessionTrackingTest.startServer()", "DEL": 0, "INS": 2, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.websocket.javax.tests.server.SessionTrackingTest.sendTextFrameToAll(java.lang.String,javax.websocket.Session[])", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.javax.tests.server.SessionTrackingTest.testAddRemoveSessions()", "DEL": 18, "INS": 17, "UPD": 52, "MOV": 37, "TOT": 124}, {"spoonMethodName": "org.eclipse.jetty.websocket.javax.tests.server.SessionTrackingTest", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.websocket.javax.tests.server.SessionTrackingTest.sendTextFrameToAll(java.lang.String,org.eclipse.jetty.websocket.javax.tests.Fuzzer[])", "DEL": 0, "INS": 0, "UPD": 3, "MOV": 2, "TOT": 5}]}, {"spoonFilePath": "EventSocket.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.websocket.javax.tests.EventSocket", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "19e80ff788867aff40bc762ba9571374ddb6c3be tags/jetty-10.0.0.alpha1~74^2~1", "commitUser": "lachlan-roberts", "authoredDateTime": "2019-05-23 16:10:30", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 40, "filePath": "jetty-websocket/javax-websocket-tests/src/main/java/org/eclipse/jetty/websocket/javax/tests/LocalServer.java", "insertions": 39, "deletions": 1}, {"lines": 80, "filePath": "jetty-websocket/javax-websocket-tests/src/main/java/org/eclipse/jetty/websocket/javax/tests/EventSocket.java", "insertions": 80, "deletions": 0}, {"lines": 93, "filePath": "jetty-websocket/javax-websocket-tests/src/test/java/org/eclipse/jetty/websocket/javax/tests/server/SessionTrackingTest.java", "insertions": 52, "deletions": 41}], "commitDateTime": "2019-05-23 16:10:30", "spoonStatsSkippedReason": ""}], "title": "SessionTrackingTest intermittant failure", "spoonStatsSummary": {"spoonMethodsChanged": 0, "DEL": 0, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 0, "spoonFilesChanged": 0}, "gitStatsSummary": {"lines": 0, "insertions": 0, "gitFilesChange": 0, "deletions": 0}, "closed": "2017-09-14 08:51:47", "statsSkippedReason": "", "body": "I think it could be a race between client seeing the close and the server completing the close.\nTest ignored for now.\n\nFailed tests: \n  SessionTrackingTest.testAddRemoveSessions:164->assertServerOpenConnectionCount:178 Session.isopen: WebSocketSession[websocket=JsrAnnotatedEventDriver[websocket=org.eclipse.jetty.websocket.jsr356.server.SessionTrackingTest$EchoSocket@1b4b1ad3],behavior=SERVER,connection=WebSocketServerConnection@E01395AF{endp=SelectChannelEndPoint@5f21eed1{/127.0.0.1:34636<->40254,CLOSED,ISHUT,OSHUT,-,-,7/300000,WebSocketServerConnection}{io=0/0,kio=-1,kro=-1},ios=IOState@158cf7ca[CLOSED,!in,!out,finalClose=CloseInfo[code=1000,reason=null],clean=true,closeSource=REMOTE],f=Flusher[queueSize=0,aggregateSize=0,failure=null],g=Generator[SERVER,validating],p=Parser@11b371a3[ExtensionStack,s=START,c=0,len=2,f=CLOSE[len=2,fin=true,rsv=...,masked=true]]},remote=WebSocketRemoteEndpoint@17efe836[batching=true],incoming=JsrAnnotatedEventDriver[websocket=org.eclipse.jetty.websocket.jsr356.server.SessionTrackingTest$EchoSocket@1b4b1ad3],outgoing=ExtensionStack[queueSize=0,extensions=[],incoming=org.eclipse.jetty.websocket.jsr356.JsrSession,outgoing=org.eclipse.jetty.websocket.server.WebSocketServerConnection]]\nExpected: is <true>\n     but: was <false>\n", "changesInPackagesGIT": [], "changesInPackagesSPOON": [], "ttf": 575.0002777777778, "numCommits": 0, "url": "https://github.com/eclipse/jetty.project/issues/83"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "sbordet", "filteredCommits": ["26b6c848f38d82c3ba1db8a944bf013332167008"], "commits": {"26b6c848f38d82c3ba1db8a944bf013332167008": {"commitUser": "sbordet", "commitGHEventType": "referenced"}}, "created": "2016-02-15 18:03:30", "commitsDetails": [{"commitMessage": "Issue #80 (Spin loop in case of HTTP/2 prefaces without H2C).\n\nFixed by changing the state of the parser before calling the parser\nhandler callbacks, and by closing the parser if the upgrade to HTTP/2\nis not successful.\n", "commitParents": ["6a9002991ae32e8eaf084013716bff4aef00e707"], "commitHash": "26b6c848f38d82c3ba1db8a944bf013332167008", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpChannelOverHttp.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannelOverHttp.headerComplete()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpConnection.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpConnection.onFillable()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}]}, {"spoonFilePath": "HttpParser.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.HttpParser.parseHeaders(java.nio.ByteBuffer)", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 1, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.HttpParser.parseLine(java.nio.ByteBuffer)", "DEL": 0, "INS": 0, "UPD": 0, "MOV": 2, "TOT": 2}]}, {"spoonFilePath": "HTTP2CServerTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http2.server.HTTP2CServerTest", "DEL": 2, "INS": 0, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.http2.server.HTTP2CServerTest.before()", "DEL": 1, "INS": 1, "UPD": 4, "MOV": 2, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.http2.server.HTTP2CServerTest.after()", "DEL": 0, "INS": 0, "UPD": 1, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.server.HTTP2CServerTest.testHTTP_2_0_DirectWithoutH2C()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http2.server.HTTP2CServerTest.testHTTP_1_0_Simple()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}, {"spoonMethodName": "org.eclipse.jetty.http2.server.HTTP2CServerTest.testHTTP_1_1_Upgrade()", "DEL": 2, "INS": 2, "UPD": 1, "MOV": 0, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.http2.server.HTTP2CServerTest.testHTTP_2_0_Direct()", "DEL": 2, "INS": 2, "UPD": 1, "MOV": 0, "TOT": 5}, {"spoonMethodName": "org.eclipse.jetty.http2.server.HTTP2CServerTest.testHTTP_1_1_Simple()", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 2}]}], "nameRev": "26b6c848f38d82c3ba1db8a944bf013332167008 tags/jetty-9.3.8.RC0~31", "commitUser": "sbordet", "authoredDateTime": "2016-02-15 20:48:52", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 94, "filePath": "jetty-http2/http2-server/src/test/java/org/eclipse/jetty/http2/server/HTTP2CServerTest.java", "insertions": 80, "deletions": 14}, {"lines": 22, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpConnection.java", "insertions": 12, "deletions": 10}, {"lines": 7, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/HttpParser.java", "insertions": 3, "deletions": 4}, {"lines": 1, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannelOverHttp.java", "insertions": 1, "deletions": 0}], "commitDateTime": "2016-02-15 20:50:22", "spoonStatsSkippedReason": ""}], "title": "Spin loop in case of HTTP/2 prefaces without H2C", "spoonStatsSummary": {"spoonMethodsChanged": 4, "DEL": 1, "INS": 2, "UPD": 0, "MOV": 3, "TOT": 6, "spoonFilesChanged": 3}, "gitStatsSummary": {"lines": 30, "insertions": 16, "gitFilesChange": 3, "deletions": 14}, "closed": "2016-02-15 19:50:58", "statsSkippedReason": "", "body": "A HTTP/2 preface may arrive at the server and end up being processed by the `HttpConnection` because the default protocol is `http/1.1`.\n\nHowever, if the `HTTP2CServerConnectionFactory` is not configured for that server (this may happen for a TLS server, in case the client does not negotiate HTTP/2 via ALPN, but sends the HTTP/2 preface anyway), then Jetty enters a spin loop in `HttpConnection`: enter `onFillable()`, read, parse the HTTP/2 preface, upgrade fails, parser returns false, try to read more, buffer is not consumed, set fill interested, and `onFillable()` will be called again.\n", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server", "jetty-http/src/main/java/org/eclipse/jetty/http"], "changesInPackagesSPOON": ["org.eclipse.jetty.http.HttpParser.parseHeaders(java.nio.ByteBuffer)", "org.eclipse.jetty.server.HttpConnection.onFillable()", "org.eclipse.jetty.http.HttpParser.parseLine(java.nio.ByteBuffer)", "org.eclipse.jetty.server.HttpChannelOverHttp.headerComplete()"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/80"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 0}, "labels": ["Bug"], "user": "gregw", "filteredCommits": ["6a9002991ae32e8eaf084013716bff4aef00e707"], "commits": {"6a9002991ae32e8eaf084013716bff4aef00e707": {"commitUser": "gregw", "commitGHEventType": "referenced"}}, "created": "2016-02-15 17:05:55", "commitsDetails": [{"commitMessage": "Issue #79 Parse HTTP request target starting with //\n\nAdded a new parseRequestTarget method\n", "commitParents": ["98607e2abfeee8a3c5a79f4977eff4429185ef8e"], "commitHash": "6a9002991ae32e8eaf084013716bff4aef00e707", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpChannelOverHttp.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.HttpChannelOverHttp.startRequest(java.lang.String,java.lang.String,org.eclipse.jetty.http.HttpVersion)", "DEL": 1, "INS": 1, "UPD": 0, "MOV": 3, "TOT": 5}]}, {"spoonFilePath": "HttpURI.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.HttpURI.parseConnect(java.lang.String)", "DEL": 0, "INS": 5, "UPD": 0, "MOV": 4, "TOT": 9}, {"spoonMethodName": "org.eclipse.jetty.http.HttpURI.parseRequestTarget(java.lang.String,java.lang.String)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "RequestLogTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.server.handler.RequestLogTest.testRequestLine()", "DEL": 3, "INS": 0, "UPD": 2, "MOV": 1, "TOT": 6}]}, {"spoonFilePath": "HttpURITest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.HttpURITest.testParseRequestTarget()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}, {"spoonMethodName": "org.eclipse.jetty.http.HttpURITest.testParse()", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}], "nameRev": "6a9002991ae32e8eaf084013716bff4aef00e707 tags/jetty-9.3.8.RC0~32", "commitUser": "gregw", "authoredDateTime": "2016-02-15 19:40:10", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 49, "filePath": "jetty-http/src/test/java/org/eclipse/jetty/http/HttpURITest.java", "insertions": 48, "deletions": 1}, {"lines": 12, "filePath": "jetty-server/src/test/java/org/eclipse/jetty/server/handler/RequestLogTest.java", "insertions": 3, "deletions": 9}, {"lines": 17, "filePath": "jetty-http/src/main/java/org/eclipse/jetty/http/HttpURI.java", "insertions": 17, "deletions": 0}, {"lines": 5, "filePath": "jetty-server/src/main/java/org/eclipse/jetty/server/HttpChannelOverHttp.java", "insertions": 1, "deletions": 4}], "commitDateTime": "2016-02-15 19:40:10", "spoonStatsSkippedReason": ""}], "title": "Parse HTTP target starting with //", "spoonStatsSummary": {"spoonMethodsChanged": 3, "DEL": 1, "INS": 7, "UPD": 0, "MOV": 7, "TOT": 15, "spoonFilesChanged": 2}, "gitStatsSummary": {"lines": 22, "insertions": 18, "gitFilesChange": 2, "deletions": 4}, "closed": "2016-02-16 07:58:28", "statsSkippedReason": "", "body": "The [HTTP specification rfc7230 5.3](https://tools.ietf.org/html/rfc7230#section-5.3) says that a request line has a target that is either: \n\n```\nrequest-target = origin-form\n                    / absolute-form\n                    / authority-form\n                    / asterisk-form\norigin-form    = absolute-path [ \"?\" query ]\n```\n\nso essentially it is either an absolute URI, a URI path, an authority or an asterisk.\n\nHowever, HttpURI class treats a URI like //foo/bar as host=foo path=/bar, which is correct for URIs generally not not specifically for a HTTP target.\n", "changesInPackagesGIT": ["jetty-server/src/main/java/org/eclipse/jetty/server", "jetty-http/src/main/java/org/eclipse/jetty/http"], "changesInPackagesSPOON": ["org.eclipse.jetty.http.HttpURI.parseConnect(java.lang.String)", "org.eclipse.jetty.http.HttpURI.parseRequestTarget(java.lang.String,java.lang.String)", "org.eclipse.jetty.server.HttpChannelOverHttp.startRequest(java.lang.String,java.lang.String,org.eclipse.jetty.http.HttpVersion)"], "ttf": 0.0002777777777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/79"}, {"filteredCommitsReason": {"alsoFixesPhrase": 0, "duplicated": 0, "mergeCommitUsed": 0, "moreThanOneParent": 0, "unavailable": 0, "multipleIssueFixes": 1}, "labels": ["Http Client Bug"], "user": "IndiscriminateCoding", "filteredCommits": ["a83c297a11814bc7b4a5623278e422b33143f05d"], "commits": {"4825832a539efdb848e479d1ace4f234da7460e0": {"commitUser": "sbordet", "commitGHEventType": "referenced"}, "a83c297a11814bc7b4a5623278e422b33143f05d": {"commitUser": "sbordet", "commitGHEventType": "closed"}}, "created": "2019-11-06 16:01:34", "commitsDetails": [{"commitMessage": "Merge pull request #4286 from eclipse/jetty-9.4.x-4277-httpclient_async_gzip\n\nFixes #4277 - Reading streamed gzipped body never terminates.", "commitParents": ["d22f5b1d9d1f27119710247a86591ee1b8da4bb6", "a83c297a11814bc7b4a5623278e422b33143f05d"], "commitHash": "4825832a539efdb848e479d1ace4f234da7460e0", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpClientDemandTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.client.HttpClientDemandTest.testGZippedResponseContentWithAsyncDemand(org.eclipse.jetty.http.client.Transport)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpReceiver.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpReceiver.responseContent(org.eclipse.jetty.client.HttpExchange,java.nio.ByteBuffer,org.eclipse.jetty.util.Callback)", "DEL": 3, "INS": 7, "UPD": 0, "MOV": 7, "TOT": 17}, {"spoonMethodName": "org.eclipse.jetty.client.HttpReceiver.Decoder.decode()", "DEL": 0, "INS": 8, "UPD": 0, "MOV": 0, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.client.HttpReceiver.Decoder.resume()", "DEL": 5, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.client.HttpReceiver.Decoder.decode(java.nio.ByteBuffer,org.eclipse.jetty.util.Callback)", "DEL": 7, "INS": 1, "UPD": 0, "MOV": 14, "TOT": 22}]}], "nameRev": "4825832a539efdb848e479d1ace4f234da7460e0 tags/jetty-9.4.23.v20191118~30", "commitUser": "sbordet", "authoredDateTime": "2019-11-12 19:04:05", "commitGHEventType": "referenced", "commitGitStats": [{"lines": 134, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpReceiver.java", "insertions": 78, "deletions": 56}, {"lines": 54, "filePath": "tests/test-http-client-transport/src/test/java/org/eclipse/jetty/http/client/HttpClientDemandTest.java", "insertions": 54, "deletions": 0}], "commitDateTime": "2019-11-12 19:04:05", "spoonStatsSkippedReason": ""}, {"commitMessage": "Fixes #4277 - Reading streamed gzipped body never terminates.\n\nFixed handling of demand in case of gzipped response content.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\n", "commitParents": ["18e7ee594003e27bd4f453389a4d0a2b2e902050"], "commitHash": "a83c297a11814bc7b4a5623278e422b33143f05d", "commitSpoonAstDiffStats": [{"spoonFilePath": "HttpClientDemandTest.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.http.client.HttpClientDemandTest.testGZippedResponseContentWithAsyncDemand(org.eclipse.jetty.http.client.Transport)", "DEL": 0, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 1}]}, {"spoonFilePath": "HttpReceiver.java", "spoonMethods": [{"spoonMethodName": "org.eclipse.jetty.client.HttpReceiver.responseContent(org.eclipse.jetty.client.HttpExchange,java.nio.ByteBuffer,org.eclipse.jetty.util.Callback)", "DEL": 3, "INS": 7, "UPD": 0, "MOV": 7, "TOT": 17}, {"spoonMethodName": "org.eclipse.jetty.client.HttpReceiver.Decoder.decode()", "DEL": 0, "INS": 8, "UPD": 0, "MOV": 0, "TOT": 8}, {"spoonMethodName": "org.eclipse.jetty.client.HttpReceiver.Decoder.resume()", "DEL": 5, "INS": 1, "UPD": 0, "MOV": 0, "TOT": 6}, {"spoonMethodName": "org.eclipse.jetty.client.HttpReceiver.Decoder.decode(java.nio.ByteBuffer,org.eclipse.jetty.util.Callback)", "DEL": 7, "INS": 1, "UPD": 0, "MOV": 14, "TOT": 22}]}], "nameRev": "a83c297a11814bc7b4a5623278e422b33143f05d tags/jetty-9.4.23.v20191118~30^2", "commitUser": "sbordet", "authoredDateTime": "2019-11-07 22:32:11", "commitGHEventType": "closed", "commitGitStats": [{"lines": 134, "filePath": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpReceiver.java", "insertions": 78, "deletions": 56}, {"lines": 54, "filePath": "tests/test-http-client-transport/src/test/java/org/eclipse/jetty/http/client/HttpClientDemandTest.java", "insertions": 54, "deletions": 0}], "commitDateTime": "2019-11-07 22:32:11", "spoonStatsSkippedReason": ""}], "title": "Reading streamed gzipped body never terminates", "spoonStatsSummary": {"spoonMethodsChanged": 4, "DEL": 15, "INS": 17, "UPD": 0, "MOV": 21, "TOT": 53, "spoonFilesChanged": 1}, "gitStatsSummary": {"lines": 134, "insertions": 78, "gitFilesChange": 1, "deletions": 56}, "closed": "2019-11-12 16:04:07", "statsSkippedReason": "", "body": "When using jetty client and `Response.Listener.Adapter`, some requests are never terminated (i.e. neither of `onSuccess`, `onFailure` or `onComplete` are called).\r\nUnfortunately I can't say how to reproduce it, but it happens pretty often. Maybe it only happens when there are multiple chunks in a response.\r\nProblem only happens with **9.4.22.v20191022** (while **9.4.21.v20190926** works fine).", "changesInPackagesGIT": ["jetty-client/src/main/java/org/eclipse/jetty/client"], "changesInPackagesSPOON": ["org.eclipse.jetty.client.HttpReceiver.responseContent(org.eclipse.jetty.client.HttpExchange,java.nio.ByteBuffer,org.eclipse.jetty.util.Callback)", "org.eclipse.jetty.client.HttpReceiver.Decoder.decode()", "org.eclipse.jetty.client.HttpReceiver.Decoder.resume()", "org.eclipse.jetty.client.HttpReceiver.Decoder.decode(java.nio.ByteBuffer,org.eclipse.jetty.util.Callback)"], "ttf": 6.000277777777778, "numCommits": 1, "url": "https://github.com/eclipse/jetty.project/issues/4277"}, {"labels": ["Http Client Bug", "Not a bug"], "closed": "2019-04-18 19:40:07", "body": "`Version: 9.4.14.v20181114`\r\n\r\nWhy the HeapByteBuffer seems changed unexpected, Just during invoke before all reading. \r\nAnd why the buffer remain `r=8192` but nothing inside buffer, actually I didn't send any body that long. \r\nThank u for any advice.\r\n\r\nAssociate with issue [HttpInput Early EOF](https://github.com/eclipse/jetty.project/issues/3538)\r\n\r\n  ![image](https://user-images.githubusercontent.com/7974622/56341775-afb9b100-61e8-11e9-9a8b-54785ff6bf74.png)\r\n\r\nJetty Source Code:\r\n![image](https://user-images.githubusercontent.com/7974622/56342490-bc3f0900-61ea-11e9-9fc4-b8aa25baf812.png)\r\n\r\n![image](https://user-images.githubusercontent.com/7974622/56342527-d678e700-61ea-11e9-95ad-73bccb0f6ea7.png)", "commits": {}, "title": "Strange HeapByteBuffer changes during parse. ", "created": "2019-04-18 07:02:34", "user": "santihong", "url": "https://github.com/eclipse/jetty.project/issues/3570", "commitsDetails": [], "ttf": 0.0002777777777777778}, {"labels": ["Http Client Bug", "Invalid", "Performance", "Stale"], "closed": "2020-05-30 22:16:55", "body": "Hi,\r\nI am make a performance test for a http2 server.\r\nit can accept about 500,000 connection at a 64g ,16cpu server.\r\nnow i meet a situation.\r\nif some connection disconnect ,i found it will can't accept new connection.\r\nI use jstack,it show this:\r\n\r\n\"qtp45822040-493\" #493 prio=5 os_prio=0 tid=0x0000000004818800 nid=0x1d1a71 waiting on condition [0x00007fbeb87fe000]\r\njava.lang.Thread.State: TIMED_WAITING (parking)\r\nat sun.misc.Unsafe.park(Native Method)\r\n- parking to wait for <0x00007fc35eab62b0> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\nat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\r\nat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2163)\r\nat org.eclipse.jetty.util.SharedBlockingCallback$Blocker.block(SharedBlockingCallback.java:210)\r\nat org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:216)\r\nat org.eclipse.jetty.server.HttpOutput.close(HttpOutput.java:297)\r\nat org.eclipse.jetty.server.Response.closeOutput(Response.java:1044)\r\nat org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:505)\r\nat org.eclipse.jetty.server.HttpChannel.run(HttpChannel.java:305)\r\nat org.eclipse.jetty.server.handler.ContextHandler.handle(ContextHandler.java:1431)\r\nat org.eclipse.jetty.server.HttpChannelState.runInContext(HttpChannelState.java:1116)\r\nat org.eclipse.jetty.server.HttpChannelState.asyncError(HttpChannelState.java:381)\r\nat org.eclipse.jetty.http2.server.HttpChannelOverHTTP2$FailureTask.run(HttpChannelOverHTTP2.java:406)\r\nat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:765)\r\nat org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:683)\r\nat java.lang.Thread.run(Thread.java:748)\r\n\r\n\"qtp45822040-492\" #492 prio=5 os_prio=0 tid=0x0000000004752800 nid=0x1d1a70 waiting on condition [0x00007fbeb883f000]\r\njava.lang.Thread.State: TIMED_WAITING (parking)\r\nat sun.misc.Unsafe.park(Native Method)\r\n- parking to wait for <0x00007fc425339068> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\nat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\r\nat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2163)\r\nat org.eclipse.jetty.util.SharedBlockingCallback$Blocker.block(SharedBlockingCallback.java:210)\r\nat org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:216)\r\nat org.eclipse.jetty.server.HttpOutput.close(HttpOutput.java:297)\r\nat org.eclipse.jetty.server.Response.closeOutput(Response.java:1044)\r\nat org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:505)\r\nat org.eclipse.jetty.server.HttpChannel.run(HttpChannel.java:305)\r\nat org.eclipse.jetty.server.handler.ContextHandler.handle(ContextHandler.java:1431)\r\nat org.eclipse.jetty.server.HttpChannelState.runInContext(HttpChannelState.java:1116)\r\nat org.eclipse.jetty.server.HttpChannelState.asyncError(HttpChannelState.java:381)\r\nat org.eclipse.jetty.http2.server.HttpChannelOverHTTP2$FailureTask.run(HttpChannelOverHTTP2.java:406)\r\nat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:765)\r\nat org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:683)\r\nat java.lang.Thread.run(Thread.java:748)\r\n\r\n\"qtp45822040-491\" #491 prio=5 os_prio=0 tid=0x0000000006813000 nid=0x1d1a6f waiting on condition [0x00007fbeb8880000]\r\njava.lang.Thread.State: TIMED_WAITING (parking)\r\nat sun.misc.Unsafe.park(Native Method)\r\n- parking to wait for <0x00007fc3a8580048> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\nat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\r\nat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2163)\r\nat org.eclipse.jetty.util.SharedBlockingCallback$Blocker.block(SharedBlockingCallback.java:210)\r\nat org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:216)\r\nat org.eclipse.jetty.server.HttpOutput.close(HttpOutput.java:297)\r\nat org.eclipse.jetty.server.Response.closeOutput(Response.java:1044)\r\nat org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:505)\r\nat org.eclipse.jetty.server.HttpChannel.run(HttpChannel.java:305)\r\nat org.eclipse.jetty.server.handler.ContextHandler.handle(ContextHandler.java:1431)\r\nat org.eclipse.jetty.server.HttpChannelState.runInContext(HttpChannelState.java:1116)\r\nat org.eclipse.jetty.server.HttpChannelState.asyncError(HttpChannelState.java:381)\r\nat org.eclipse.jetty.http2.server.HttpChannelOverHTTP2$FailureTask.run(HttpChannelOverHTTP2.java:406)\r\nat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:765)\r\nat org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:683)\r\nat java.lang.Thread.run(Thread.java:748)\r\n\r\n\"qtp45822040-490\" #490 prio=5 os_prio=0 tid=0x000000000698d800 nid=0x1d1a6e waiting on condition [0x00007fbeb88c1000]\r\njava.lang.Thread.State: TIMED_WAITING (parking)\r\nat sun.misc.Unsafe.park(Native Method)\r\n- parking to wait for <0x00007fc369dce9e0> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\nat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\r\nat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2163)\r\nat org.eclipse.jetty.util.SharedBlockingCallback$Blocker.block(SharedBlockingCallback.java:210)\r\nat org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:216)\r\nat org.eclipse.jetty.server.HttpOutput.close(HttpOutput.java:297)\r\nat org.eclipse.jetty.server.Response.closeOutput(Response.java:1044)\r\nat org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:505)\r\nat org.eclipse.jetty.server.HttpChannel.run(HttpChannel.java:305)\r\nat org.eclipse.jetty.server.handler.ContextHandler.handle(ContextHandler.java:1431)\r\nat org.eclipse.jetty.server.HttpChannelState.runInContext(HttpChannelState.java:1116)\r\nat org.eclipse.jetty.server.HttpChannelState.asyncError(HttpChannelState.java:381)\r\nat org.eclipse.jetty.http2.server.HttpChannelOverHTTP2$FailureTask.run(HttpChannelOverHTTP2.java:406)\r\nat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:765)\r\nat org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:683)\r\nat java.lang.Thread.run(Thread.java:748)\r\n\r\n\"qtp45822040-489\" #489 prio=5 os_prio=0 tid=0x00000000062be800 nid=0x1d1a6d waiting on condition [0x00007fbeb8902000]\r\njava.lang.Thread.State: TIMED_WAITING (parking)\r\nat sun.misc.Unsafe.park(Native Method)\r\n- parking to wait for <0x00007fc4bda20658> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\nat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\r\nat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2163)\r\nat org.eclipse.jetty.util.SharedBlockingCallback$Blocker.block(SharedBlockingCallback.java:210)\r\nat org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:216)\r\nat org.eclipse.jetty.server.HttpOutput.close(HttpOutput.java:297)\r\nat org.eclipse.jetty.server.Response.closeOutput(Response.java:1044)\r\nat org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:505)\r\nat org.eclipse.jetty.server.HttpChannel.run(HttpChannel.java:305)\r\nat org.eclipse.jetty.server.handler.ContextHandler.handle(ContextHandler.java:1431)\r\nat org.eclipse.jetty.server.HttpChannelState.runInContext(HttpChannelState.java:1116)\r\nat org.eclipse.jetty.server.HttpChannelState.asyncError(HttpChannelState.java:381)\r\nat org.eclipse.jetty.http2.server.HttpChannelOverHTTP2$FailureTask.run(HttpChannelOverHTTP2.java:406)\r\nat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:765)\r\nat org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:683)\r\nat java.lang.Thread.run(Thread.java:748)\r\n\r\n\"qtp45822040-488\" #488 prio=5 os_prio=0 tid=0x000000000680e000 nid=0x1d1a6c waiting on condition [0x00007fbeb8943000]\r\njava.lang.Thread.State: TIMED_WAITING (parking)\r\nat sun.misc.Unsafe.park(Native Method)\r\n- parking to wait for <0x00007fcc76da8c00> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\nat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\r\nat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2163)\r\nat org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.reservedWait(ReservedThreadExecutor.java:292)\r\nat org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:357)\r\nat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:765)\r\nat org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:683)\r\nat java.lang.Thread.run(Thread.java:748)\r\n\r\n\"qtp45822040-487\" #487 prio=5 os_prio=0 tid=0x0000000007221000 nid=0x1d1a6b waiting on condition [0x00007fbeb8984000]\r\njava.lang.Thread.State: TIMED_WAITING (parking)\r\nat sun.misc.Unsafe.park(Native Method)\r\n- parking to wait for <0x00007fc47d1601a0> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\nat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\r\nat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2163)\r\nat org.eclipse.jetty.util.SharedBlockingCallback$Blocker.block(SharedBlockingCallback.java:210)\r\nat org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:216)\r\nat org.eclipse.jetty.server.HttpOutput.close(HttpOutput.java:297)\r\nat org.eclipse.jetty.server.Response.closeOutput(Response.java:1044)\r\nat org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:505)\r\nat org.eclipse.jetty.server.HttpChannel.run(HttpChannel.java:305)\r\nat org.eclipse.jetty.server.handler.ContextHandler.handle(ContextHandler.java:1431)\r\nat org.eclipse.jetty.server.HttpChannelState.runInContext(HttpChannelState.java:1116)\r\nat org.eclipse.jetty.server.HttpChannelState.asyncError(HttpChannelState.java:381)\r\nat org.eclipse.jetty.http2.server.HttpChannelOverHTTP2$FailureTask.run(HttpChannelOverHTTP2.java:406)\r\nat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:765)\r\nat org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:683)\r\nat java.lang.Thread.run(Thread.java:748)\r\n\r\n\"qtp45822040-486\" #486 prio=5 os_prio=0 tid=0x0000000005d67800 nid=0x1d1a6a waiting on condition [0x00007fbeb89c5000]\r\njava.lang.Thread.State: TIMED_WAITING (parking)\r\nat sun.misc.Unsafe.park(Native Method)\r\n- parking to wait for <0x00007fc41cf40e08> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\nat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\r\nat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2163)\r\nat org.eclipse.jetty.util.SharedBlockingCallback$Blocker.block(SharedBlockingCallback.java:210)\r\nat org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:216)\r\nat org.eclipse.jetty.server.HttpOutput.close(HttpOutput.java:297)\r\nat org.eclipse.jetty.server.Response.closeOutput(Response.java:1044)\r\nat org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:505)\r\nat org.eclipse.jetty.server.HttpChannel.run(HttpChannel.java:305)\r\nat org.eclipse.jetty.server.handler.ContextHandler.handle(ContextHandler.java:1431)\r\nat org.eclipse.jetty.server.HttpChannelState.runInContext(HttpChannelState.java:1116)\r\nat org.eclipse.jetty.server.HttpChannelState.asyncError(HttpChannelState.java:381)\r\nat org.eclipse.jetty.http2.server.HttpChannelOverHTTP2$FailureTask.run(HttpChannelOverHTTP2.java:406)\r\nat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:765)\r\nat org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:683)\r\nat java.lang.Thread.run(Thread.java:748)\r\n\r\nBut , after a while,it can accept up to 500,000 connections again.\r\nMay you help me ?\r\nThanks.", "commits": {}, "title": "Server can't accept new connection when many http2 connection close same time", "created": "2018-12-30 09:24:13", "user": "ligzy", "url": "https://github.com/eclipse/jetty.project/issues/3231", "commitsDetails": [], "ttf": 517.0002777777778}, {"labels": ["Http Client Bug"], "closed": "2017-10-03 16:33:07", "body": "Hello,\r\n   I met a problem with jetty almost like this, i uploaded a file to my server (depends on jetty 9.4.7), when getting the request, if i sent a 413 error,  i couldn't get any response at client side. i was confused.\r\n\r\nHowever, i did same thing on jetty 8.1.16, it worked. I got the 413 error page i want as the response just like below:\r\n`\r\n    HTTP ERROR: 413\r\n    Problem accessing /upload. Reason:\r\n        File: 16 MB. Refused the file.\r\n    Powered by Jetty://\r\n`\r\n\r\nwith my codes, quite simple:\r\n\r\n    import org.eclipse.jetty.server.Server;\r\n    import org.eclipse.jetty.servlet.DefaultServlet;\r\n    import org.eclipse.jetty.servlet.ServletContextHandler;\r\n    import org.eclipse.jetty.servlet.ServletHolder;\r\n\r\n    import javax.servlet.ServletException;\r\n    import javax.servlet.http.HttpServlet;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    import java.io.*;\r\n\r\n    public class JettyService {\r\n\r\n        public static void main(String[] args) throws Exception {\r\n\r\n            Server server = new Server(8090);  // http://127.0.0.1:8090/\r\n            ServletContextHandler context = new ServletContextHandler(ServletContextHandler.SESSIONS);\r\n            context.setResourceBase(\"webapps\");\r\n            server.setHandler(context);\r\n            context.addServlet(new ServletHolder(new HelloWorld()), \"/upload\");\r\n            context.addServlet(new ServletHolder(new DefaultServlet()), \"/\");\r\n            server.start();\r\n            server.join();\r\n        }\r\n\r\n        public static class HelloWorld extends HttpServlet {\r\n\r\n            @Override\r\n            protected void doGet(HttpServletRequest req, HttpServletResponse resp)\r\n                    throws ServletException, IOException {\r\n                doPost(req, resp);\r\n            }\r\n\r\n            @Override\r\n            protected void doPost(HttpServletRequest req, HttpServletResponse resp)\r\n                    throws ServletException, IOException {\r\n\r\n                resp.sendError(413, \"File: \" + req.getContentLength() / 1024 / 1024 + \" MB. Refused the file.\");\r\n            }\r\n        }\r\n    }\r\n\r\nbelow is my web page , i'm not sure whether u need or not:\r\n `\r\n    <body>\r\n        <form action=\"/upload\" method=\"post\" enctype=\"multipart/form-data\">\r\n            <input type=\"file\" name=\"fileUpload\" />\r\n            <input type=\"submit\" value=\"upload\" />\r\n        </form>\r\n     </body>\r\n`", "commits": {}, "title": "No response getting from server while uploading file with Jetty 9.x", "created": "2017-10-03 04:56:52", "user": "mangtsang", "url": "https://github.com/eclipse/jetty.project/issues/1864", "commitsDetails": [], "ttf": 0.0002777777777777778}, {"labels": ["Not a bug"], "closed": "2020-05-06 08:58:59", "body": "Jetty (9.4.28.v20200408) on Java 11\r\n\r\nJetty seems to be emitting an warning at startup:\r\nWARN AnnotationParser: Unrecognized ASM version, assuming ASM7\r\n\r\nWe have ASM version 8.0.1 in our project classpath.\r\nWhen downgrading to version 7.0 the warning dissapears.\r\nIs this behaviour intended?\r\n", "commits": {}, "title": "Unexpected message - WARN AnnotationParser: Unrecognized ASM version, assuming ASM7", "created": "2020-05-05 13:15:36", "user": "mrsladek", "url": "https://github.com/eclipse/jetty.project/issues/4846", "commitsDetails": [], "ttf": 0.0002777777777777778}, {"labels": ["Not a bug"], "closed": "2020-03-04 11:29:56", "body": "**Jetty version**\r\n9.4.27.v20200227\r\n\r\n**Java version**\r\n1.8.0_201\r\n\r\n**OS type/version**\r\nRed hat enterprise server linux 6.1 (Santiago)\r\n\r\n**Description**\r\n@sbordet - when a http resource is requested i get the below error and 500 server error. \r\nCan you please check and help here ? Let me know if you need any further information.\r\n<img width=\"1062\" alt=\"Screenshot 2020-03-04 at 10 59 03\" src=\"https://user-images.githubusercontent.com/954768/75874988-bfdf7c80-5e0a-11ea-9571-cc153e8ce81e.png\">\r\n\r\n\r\n\r\n\r\n", "commits": {}, "title": "NoSuchMethodError: javax.servlet.ServletContext.createServlet(Ljava/lang/Class;)Ljavax/servlet/Servlet;", "created": "2020-03-04 11:25:03", "user": "kvopencode", "url": "https://github.com/eclipse/jetty.project/issues/4635", "commitsDetails": [], "ttf": 0.0002777777777777778}, {"labels": ["Not a bug"], "closed": "2019-12-04 20:16:57", "body": "**Jetty version**\r\n9.4.20\r\n**Java version**\r\n1.8.202\r\n**OS type/version**\r\nwindow 10\r\n**Description**\r\nI Embedding jetty as a server, code like this:\r\n\r\n``` java\r\npublic class myServer {\r\n... ...\r\nString myBaseResource=\"file:/C:/Program Files/rptServer\";\r\nserver = new Server(9011);\r\nSystem.setProperty(\"org.eclipse.jetty.util.UrlEncoding.charset\", \"GBK\");\r\nServletContextHandler contextHandler = new ServletContextHandler(ServletContextHandler.SESSIONS);\r\ncontextHandler .setContextPath(\"/\");\r\ncontextHandler .setResourceBase(myBaseResource);\r\ncontextHandler .addServlet(new ServletHolder(new myServlet()), \"/myServlet\");\r\n\r\nResourceHandler resourceHandler = new ResourceHandler();\r\nresourceHandler.setResourceBase(myBaseResource)\r\nHandlerCollection handlers = new HandlerCollection();\r\nhandlers.addHandler(resourceHandler);\r\nhandlers.addHandler(contextHandler );\r\n\r\nserver.setHandler(handlers);\r\nserver.start();\r\n... ...\r\n}\r\n```\r\n\r\nI start the myServer , post a quest to the server, it do not work!\r\nbut, if i use version 6.1.23 of jetty, it work fine.\r\n\r\nthen, I change the follow statement\r\nString myBaseResource=\"file:/C:/Program Files/rptServer\";\r\nto:\r\nString myBaseResource=\"file:/C:/rptServer\";\r\nit work fine in version 9.4.20.\r\n\r\nSo, I think if the BaseResource contain blank space, the jetty will not work, maybe this is a bug?\r\n", "commits": {}, "title": "If the BaseResource contain blank space, the Handler don't work?", "created": "2019-12-04 14:41:26", "user": "beibm", "url": "https://github.com/eclipse/jetty.project/issues/4399", "commitsDetails": [], "ttf": 0.0002777777777777778}, {"labels": ["Invalid", "Not a bug"], "closed": "2019-12-03 05:59:24", "body": "", "commits": {}, "title": "\u8bbf\u95ee/job/qqq/descriptorByName/hudson.model.FreeStyleProject/checkCustomWorkspace\u65f6\u51fa\u73b0\u95ee\u9898\u3002\u539f\u56e0\uff1a      \u7981\u6b62\u7684", "created": "2019-12-03 05:31:26", "user": "Boundw", "url": "https://github.com/eclipse/jetty.project/issues/4389", "commitsDetails": [], "ttf": 0.0002777777777777778}, {"labels": ["Not a bug"], "closed": "2019-11-25 17:52:18", "body": "**Jetty version** 9.4.24.v20191120\r\n\r\n**Java version** OpenJDK 13\r\n\r\n**OS type/version** Linux/Ubuntu 18.04.3 LTS\r\n\r\n**Description**\r\n\r\nWhen jetty performs a TLS handshake, it includes the root/anchor certificate. This is unnecessary, because the browser will have that root certificate in its trust store already, so it doesn't need the server to send it. (See SSL/TLS standard, section 7.4.2, as documented here: https://security.stackexchange.com/q/24561)\r\n\r\nThe ssllabs.com test highlights this as an issue by displaying the \"Chain issues - Contains anchor\" warning, indicating that the root certificate is unnecessarily present.\r\n\r\nNot only does including the root certificate result in a larger handshake, but there is apparently an outsized performance impact.\r\n\r\n> Because of TCP Slow Start, the first bytes on a connection are the most expensive (slowest). Hence it makes sense to minimize the size of the handshake, so that HTTP bytes can start flowing as soon as possible. (see https://discussions.qualys.com/thread/11234#comment-21129)\r\n\r\nPlease could you consider preventing jetty from unnecessarily sending the anchor certificate in order to improve handshake latency.", "commits": {}, "title": "TLS handshake bloated due to unnecessary anchor certificate inclusion", "created": "2019-11-23 16:57:22", "user": "andrepa", "url": "https://github.com/eclipse/jetty.project/issues/4353", "commitsDetails": [], "ttf": 2.000277777777778}, {"labels": ["Not a bug"], "closed": "2019-11-22 04:13:37", "body": "**Jetty version** 9.4.20\r\n**Description**\r\nIn documents and examples\r\n`int port = ExampleUtil.getPort(args, \"jetty.http.port\", 8080);\r\n int securePort = ExampleUtil.getPort(args, \"jetty.https.port\", 8443);\r\n Server server = createServer(port, securePort, true);\r\n// Start the server\r\n server.start();\r\n server.join();\r\n`\r\nbut\uff0cin version 9.4.20, the org.eclipse.jetty.server.Server's Method is \r\n`protected void start(LifeCycle l) throws Exception{}`\r\n\r\n\r\n\r\n", "commits": {}, "title": "All the documents and examples need to be updated", "created": "2019-11-22 03:56:01", "user": "beibm", "url": "https://github.com/eclipse/jetty.project/issues/4345", "commitsDetails": [], "ttf": 0.0002777777777777778}, {"labels": ["Not a bug", "Question"], "closed": "2019-12-13 17:35:25", "body": "I detected the following -- IMHO wrong -- behavior change between releases 9.4.20 and 9.4.21.\r\n\r\nGiven this trivial servlet:\r\n```java\r\npackage org.cstamas.jetty.bug;\r\n\r\nimport java.io.IOException;\r\n\r\nimport javax.servlet.http.HttpServlet;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpServletResponse;\r\n\r\npublic class BugServlet\r\n    extends HttpServlet\r\n{\r\n  @Override\r\n  protected void doGet(final HttpServletRequest req, final HttpServletResponse resp)\r\n      throws IOException\r\n  {\r\n    resp.setHeader(\"Content-Range\", \"*/100\");\r\n    resp.sendError(416, \"bug\");\r\n  }\r\n}\r\n```\r\n\r\nThe two versions produce different response, **9.4.21 makes the added header and some other to disappear**.\r\n\r\nExpected output (produced by 9.4.20) -- as expected OK:\r\n```\r\ncstamas@Urnebes ~/tmp/jetty-bug $ curl -v http://localhost:8080/\r\n*   Trying 127.0.0.1:8080...\r\n* TCP_NODELAY set\r\n* Connected to localhost (127.0.0.1) port 8080 (#0)\r\n> GET / HTTP/1.1\r\n> Host: localhost:8080\r\n> User-Agent: curl/7.66.0\r\n> Accept: */*\r\n> \r\n* Mark bundle as not supporting multiuse\r\n< HTTP/1.1 416 bug\r\n< Date: Fri, 04 Oct 2019 08:00:36 GMT\r\n< Content-Range: */100\r\n< Cache-Control: must-revalidate,no-cache,no-store\r\n< Content-Type: text/html;charset=iso-8859-1\r\n< Content-Length: 305\r\n< Server: Jetty(9.4.20.v20190813)\r\n< \r\n<html>\r\n<head>\r\n<meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\"/>\r\n<title>Error 416 bug</title>\r\n</head>\r\n<body><h2>HTTP ERROR 416</h2>\r\n<p>Problem accessing /. Reason:\r\n<pre>    bug</pre></p><hr><a href=\"http://eclipse.org/jetty\">Powered by Jetty:// 9.4.20.v20190813</a><hr/>\r\n\r\n</body>\r\n</html>\r\n* Connection #0 to host localhost left intact\r\ncstamas@Urnebes ~/tmp/jetty-bug $ \r\n```\r\n\r\nProduced output by 9.4.21 -- unexpected:\r\n```\r\ncstamas@Urnebes ~/tmp/jetty-bug $ curl -v http://localhost:8080/\r\n*   Trying 127.0.0.1:8080...\r\n* TCP_NODELAY set\r\n* Connected to localhost (127.0.0.1) port 8080 (#0)\r\n> GET / HTTP/1.1\r\n> Host: localhost:8080\r\n> User-Agent: curl/7.66.0\r\n> Accept: */*\r\n> \r\n* Mark bundle as not supporting multiuse\r\n< HTTP/1.1 416 Range Not Satisfiable\r\n< Cache-Control: must-revalidate,no-cache,no-store\r\n< Content-Type: text/html;charset=iso-8859-1\r\n< Content-Length: 421\r\n< Server: Jetty(9.4.21.v20190926)\r\n< \r\n<html>\r\n<head>\r\n<meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\"/>\r\n<title>Error 416 bug</title>\r\n</head>\r\n<body><h2>HTTP ERROR 416 bug</h2>\r\n<table>\r\n<tr><th>URI:</th><td>/</td></tr>\r\n<tr><th>STATUS:</th><td>416</td></tr>\r\n<tr><th>MESSAGE:</th><td>bug</td></tr>\r\n<tr><th>SERVLET:</th><td>bug</td></tr>\r\n</table>\r\n<hr><a href=\"http://eclipse.org/jetty\">Powered by Jetty:// 9.4.21.v20190926</a><hr/>\r\n\r\n</body>\r\n</html>\r\n* Connection #0 to host localhost left intact\r\ncstamas@Urnebes ~/tmp/jetty-bug $ \r\n```\r\n\r\nProblems:\r\n* response message not set\r\n* the set `Content-Range` header is gone\r\n* the `Date` is gone", "commits": {}, "title": "sendError(int, String) behavior change between 9.4.20 and 9.4.21", "created": "2019-10-04 08:05:44", "user": "cstamas", "url": "https://github.com/eclipse/jetty.project/issues/4154", "commitsDetails": [], "ttf": 70.00027777777778}, {"labels": ["Not a bug"], "closed": "2019-09-24 15:04:45", "body": "# Short version\r\n\r\nJetty 9.4.x via Spring boot 2.x (repro project has more details), tested on JDK 11 and 8.\r\n\r\nJetty server unexpectedly closes connections due to \"unconsumed input\" causing the client to abort. But configuring a servlet filter to check the request inputstream just returns -1.\r\n\r\nSee [treetip/jetty_test](https://github.com/treetip/jetty_test) for reproduction.\r\n\r\n# Long version\r\n\r\nOur project has multiple micro'ish services running a combination of Jersey and Jetty via Spring Boot 2.x.\r\n\r\nIf a service calls another service it's via a Jersey Client configured with `PoolingHttpClientConnectionManager` for Apache HttpClient.\r\n\r\nRecently we ran into a problem where\r\n\r\n* A timed job splits work into batches and calls Service A with the batches\r\n* Service A in turn calls Services B, C, D ... etc to enrich the data\r\n* Service B in the chain suddenly started failing when called closing the pooled connection after a\r\n  few requests, resulting the caller raising an exception on \"Broken Pipe (Write failed)\"\r\n\r\nEven though the services dependencies are carbon copies of each other, only one of the services is failing.\r\n\r\nReproduction project with instructions at: [treetip/jetty_test](https://github.com/treetip/jetty_test)\r\n\r\nChecking with wireshark a single tcp connection seems to handle a few http 1.1 requests, until Jetty closes the connection due to uncosumed input. The client then receives a RST when it tries to reuse the connection that was forcibly closed.\r\n\r\n[Issue 2867](https://github.com/eclipse/jetty.project/issues/2867) seemed to have similar issues, so I tested the filter solution mentioned there, and it works. Though the InputStream seems to always only return -1 after control is returned to the filter (so what's actually unconsumed here?).\r\n\r\nChanging the Spring dependency in the example project from `spring-boot-starter-jetty` to `spring-boot-starter-undertow` also fixes the problem.\r\n\r\nAlso if service A sends an empty json array, the problem goes away, which seems weird since it's still input.\r\n\r\nSo the actual question here is what should we do? Is this a bug that can be fixed? Configuring a filter that does nothing in all our services seems pointless.\r\n\r\nI just need to understand what is happening and why, as this might reappear in other services if this is about some specific circumstances.", "commits": {}, "title": "Open connections closed due to unconsumed input", "created": "2019-09-24 11:25:55", "user": "treetip", "url": "https://github.com/eclipse/jetty.project/issues/4117", "commitsDetails": [], "ttf": 0.0002777777777777778}, {"labels": ["Not a bug", "Third Party"], "closed": "2019-09-25 22:01:36", "body": "\r\nI have a `ServletContextListener` that is annotated with `@WebListener`.\r\n\r\nIn its `contextInitialized()` method, I try to add a servlet to the `ServletContext` via a call to\r\n\r\n`servletContext.addServlet(\"myServlet\", new MyServlet())`\r\n\r\nbut this throws an `UnsupportedOperationException`.\r\n\r\nReading the documentation of [ServletContext.addServlet()](https://javaee.github.io/javaee-spec/javadocs/javax/servlet/ServletContext.html#addServlet-java.lang.String-javax.servlet.Servlet-), it seems to me like the operation should succeed, since I have annotated my `ServletContextListener `with the `WebListener `annotation:\r\n\r\n>  **addServlet**\r\n> \r\n> Registers the given servlet instance with this ServletContext under the given servletName. \r\n> ...\r\n> throws UnsupportedOperationException - if this ServletContext was passed to the \r\n> ServletContextListener.contextInitialized(javax.servlet.ServletContextEvent) method \r\n> of a ServletContextListener that was neither declared in web.xml or web-fragment.xml, \r\n> _**nor annotated with WebListener**_\r\n\r\nHere is an example class that can demonstrate the problem: \r\n\r\n```java\r\npackage com.example;\r\n\r\nimport javax.servlet.*;\r\nimport javax.servlet.annotation.WebListener;\r\nimport java.io.IOException;\r\n\r\n@WebListener\r\npublic class MyServletContextListener implements ServletContextListener {\r\n\r\n    @Override\r\n    public void contextInitialized(ServletContextEvent servletContextEvent) {\r\n        ServletContext servletContext = servletContextEvent.getServletContext();\r\n        // uncomment this line to get method to succeed...\r\n        //((WebAppContext.Context) servletContext).setEnabled(true);\r\n        ServletRegistration.Dynamic serviceServlet = servletContext.addServlet(\r\n                \"MyServlet\", new Servlet() {\r\n                    @Override\r\n                    public void init(ServletConfig config) throws ServletException { }\r\n\r\n                    @Override\r\n                    public ServletConfig getServletConfig() { return null; }\r\n\r\n                    @Override\r\n                    public void service(ServletRequest req, ServletResponse res) throws ServletException, IOException { }\r\n\r\n                    @Override\r\n                    public String getServletInfo() { return null; }\r\n\r\n                    @Override\r\n                    public void destroy() { }\r\n                });\r\n        serviceServlet.addMapping(\"/myservlet/*\");\r\n        serviceServlet.setLoadOnStartup(1);\r\n    }\r\n}\r\n```\r\n\r\nPlease let me know if I have misunderstood anything.\r\n\r\nThanks,\r\nSteve\r\n", "commits": {}, "title": "UnsupportedOperationException when adding servlet to ServletContext from @WebListener-annotated ServletContextListener", "created": "2019-09-19 02:39:44", "user": "swingfield", "url": "https://github.com/eclipse/jetty.project/issues/4103", "commitsDetails": [], "ttf": 6.000277777777778}, {"labels": ["Not a bug"], "closed": "2019-08-16 09:05:47", "body": "This is a question, regarding a requirement we have in our project, to send a request body with a DELETE HTTP request. Various sources cite that the Jetty server rejects the request body for a DELETE/GET request. Could the developers please explain in depth how the jetty server handles the request body in these cases, as this would be most helpful for us. ", "commits": {}, "title": "How does the Jetty server treat the request body (if sent) for DELETE HTTP requests ?", "created": "2019-08-16 06:56:34", "user": "SonaliDasgupta", "url": "https://github.com/eclipse/jetty.project/issues/3992", "commitsDetails": [], "ttf": 0.0002777777777777778}, {"labels": ["Not a bug", "Unable To Replicate"], "closed": "2019-08-27 21:22:15", "body": "Hi,\r\nafter upgrading jetty9 to 9.4.15-1~18.04.1ubuntu1 my previously running .war archive is not working anymore. Starting up fails due to \r\n\r\n```\r\nApr 20 01:14:17 busy-ubuntu jetty9[17707]: 20 Apr 2019 01:14:17,107 INFO com.sismics.util.filter.RequestContextFilter.init(RequestContextFilter.java:42) Using base data directory: /var/docs\r\nApr 20 01:14:17 busy-ubuntu jetty9[17707]: log4j:ERROR setFile(null,true) call failed.\r\nApr 20 01:14:17 busy-ubuntu jetty9[17707]: java.io.FileNotFoundException: /var/docs/log/docs.log (Read-only file system)\r\n```\r\n\r\nI did not change anything else in filesystem. Do you have an idea what could cause \"Read-only file system\"? Please note that i tried this procedure on two different systems (Ubuntu 18) with same results. If you search on the net for this error it will lead to confusing messages about erroneoues hard drives or file systems. This IS NOT the case. I already used fsck and other tools. Its definitely some ACL or general permission problem belonging to Java or Jetty\r\n\r\nI am running openjdk 11 and i already tried to adjust default.policy of java. Made no difference\r\n\r\nkind regards, Mario", "commits": {}, "title": "Upgrade to 9.4.15-1~18.04.1ubuntu1 fails due to read-only filesystem", "created": "2019-04-19 23:22:10", "user": "vmario89", "url": "https://github.com/eclipse/jetty.project/issues/3579", "commitsDetails": [], "ttf": 129.00027777777777}, {"labels": ["Http Client Bug", "Not a bug"], "closed": "2019-04-18 19:40:07", "body": "`Version: 9.4.14.v20181114`\r\n\r\nWhy the HeapByteBuffer seems changed unexpected, Just during invoke before all reading. \r\nAnd why the buffer remain `r=8192` but nothing inside buffer, actually I didn't send any body that long. \r\nThank u for any advice.\r\n\r\nAssociate with issue [HttpInput Early EOF](https://github.com/eclipse/jetty.project/issues/3538)\r\n\r\n  ![image](https://user-images.githubusercontent.com/7974622/56341775-afb9b100-61e8-11e9-9a8b-54785ff6bf74.png)\r\n\r\nJetty Source Code:\r\n![image](https://user-images.githubusercontent.com/7974622/56342490-bc3f0900-61ea-11e9-9fc4-b8aa25baf812.png)\r\n\r\n![image](https://user-images.githubusercontent.com/7974622/56342527-d678e700-61ea-11e9-95ad-73bccb0f6ea7.png)", "commits": {}, "title": "Strange HeapByteBuffer changes during parse. ", "created": "2019-04-18 07:02:34", "user": "santihong", "url": "https://github.com/eclipse/jetty.project/issues/3570", "commitsDetails": [], "ttf": 0.0002777777777777778}, {"labels": ["More Info Required", "Not a bug"], "closed": "2019-02-08 02:32:49", "body": "Hi \r\n\r\nI used below command line to start an web application, however, I met this stack trace, \r\nMy project is [here](https://github.com/temmyg/SpringMvcFormExample3).\r\n\r\nTo produce:\r\n\r\n1. clone to local folder\r\n\r\n2. run `java -classpath C:\\Users\\someone\\Desktop\\Admin\\OnlineLab\\SpringMvcFormExample3\\WEB-INF\\classes1 -jar C:\\Users\\someone\\Desktop\\Admin\\OnlineLab\\jetty-runner-9.4.12.v20180830.jar C:\\Users\\someone\\Desktop\\Admin\\OnlineLab\\SpringMvcFormExample3 --lib C:\\Users\\someone\\Desktop\\Admin\\OnlineLab\\SpringMvcFormExample3\\WEB-INF\\lib --classes C:\\Users\\someone\\Desktop\\Admin\\OnlineLab\\SpringMvcFormExample3\\WEB-INF\\classes1`\r\n\r\nAlso let you know, if you change > WEB-INF\\classes1 to > WEB-INF\\classes\r\n\r\n and run \r\n\r\n`java -jar C:\\Users\\someone\\Desktop\\Admin\\OnlineLab\\jetty-runner-9.4.12.v20180830.jar C:\\Users\\someone\\Desktop\\Admin\\OnlineLab\\SpringMvcFormExample3`\r\n\r\nAll is working fine.\r\n\r\n> Failed startup of context o.e.j.w.WebAppContext@1a052a00{SpringMvcFormExample,/,file:///C:/Users/someone/Desktop/Admin/OnlineLab/SpringMvcFormExample3/,UNAVAILABLE}{file:///C:/Users/someone/Desktop/Admin/OnlineLab/SpringMvcFormExample3/}\r\n> javax.servlet.ServletException: SpringDispatcher@3fafd0b4==org.springframework.web.servlet.DispatcherServlet,jsp=null,order=1,inst=false\r\n>         at org.eclipse.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:691)\r\n>         at org.eclipse.jetty.servlet.ServletHolder.initialize(ServletHolder.java:427)\r\n>         at org.eclipse.jetty.servlet.ServletHandler.initialize(ServletHandler.java:760)\r\n>         at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:374)\r\n>         at org.eclipse.jetty.webapp.WebAppContext.startWebapp(WebAppContext.java:1497)\r\n>         at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1459)\r\n>         at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:847)\r\n>         at org.eclipse.jetty.servlet.ServletContextHandler.doStart(ServletContextHandler.java:287)\r\n>         at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:545)\r\n>         at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n>         at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:138)\r\n>         at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:117)\r\n>         at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113)\r\n>         at org.eclipse.jetty.server.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:168)\r\n>         at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n>         at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:138)\r\n>         at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:117)\r\n>         at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113)\r\n>         at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n>         at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:138)\r\n>         at org.eclipse.jetty.server.Server.start(Server.java:416)\r\n>         at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:108)\r\n>         at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113)\r\n>         at org.eclipse.jetty.server.Server.doStart(Server.java:383)\r\n>         at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n>         at org.eclipse.jetty.runner.Runner.run(Runner.java:532)\r\n>         at org.eclipse.jetty.runner.Runner.main(Runner.java:577)\r\n> Caused by:\r\n> java.lang.IllegalStateException: Cannot load configuration class: net.codejava.spring.config.MvcConfiguration\r\n>         at org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:366)\r\n>         at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanFactory(ConfigurationClassPostProcessor.java:242)\r\n>         at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:694)\r\n>         at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:633)\r\n>         at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:461)\r\n>         at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:651)\r\n>         at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:599)\r\n>         at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:665)\r\n>         at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:518)\r\n>         at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:459)\r\n>         at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:136)\r\n>         at javax.servlet.GenericServlet.init(GenericServlet.java:244)\r\n>         at org.eclipse.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:670)\r\n>         at org.eclipse.jetty.servlet.ServletHolder.initialize(ServletHolder.java:427)\r\n>         at org.eclipse.jetty.servlet.ServletHandler.initialize(ServletHandler.java:760)\r\n>         at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:374)\r\n>         at org.eclipse.jetty.webapp.WebAppContext.startWebapp(WebAppContext.java:1497)\r\n>         at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1459)\r\n>         at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:847)\r\n>         at org.eclipse.jetty.servlet.ServletContextHandler.doStart(ServletContextHandler.java:287)\r\n>         at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:545)\r\n>         at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n>         at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:138)\r\n>         at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:117)\r\n>         at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113)\r\n>         at org.eclipse.jetty.server.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:168)\r\n>         at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n>         at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:138)\r\n>         at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:117)\r\n>         at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113)\r\n>         at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n>         at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:138)\r\n>         at org.eclipse.jetty.server.Server.start(Server.java:416)\r\n>         at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:108)\r\n>         at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113)\r\n>         at org.eclipse.jetty.server.Server.doStart(Server.java:383)\r\n>         at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n>         at org.eclipse.jetty.runner.Runner.run(Runner.java:532)\r\n>         at org.eclipse.jetty.runner.Runner.main(Runner.java:577)\r\n> Caused by:\r\n> java.lang.IllegalArgumentException: class net.codejava.spring.config.MvcConfiguration$$EnhancerByCGLIB$$8199e631 is not an enhanced class\r\n>         at org.springframework.cglib.proxy.Enhancer.setCallbacksHelper(Enhancer.java:621)\r\n>         at org.springframework.cglib.proxy.Enhancer.registerStaticCallbacks(Enhancer.java:594)\r\n>         at org.springframework.context.annotation.ConfigurationClassEnhancer.createClass(ConfigurationClassEnhancer.java:120)\r\n>         at org.springframework.context.annotation.ConfigurationClassEnhancer.enhance(ConfigurationClassEnhancer.java:92)\r\n>         at org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:356)\r\n>         at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanFactory(ConfigurationClassPostProcessor.java:242)\r\n>         at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:694)\r\n>         at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:633)\r\n>         at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:461)\r\n>         at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:651)\r\n>         at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:599)\r\n>         at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:665)\r\n>         at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:518)\r\n>         at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:459)\r\n>         at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:136)\r\n>         at javax.servlet.GenericServlet.init(GenericServlet.java:244)\r\n>         at org.eclipse.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:670)\r\n>         at org.eclipse.jetty.servlet.ServletHolder.initialize(ServletHolder.java:427)\r\n>         at org.eclipse.jetty.servlet.ServletHandler.initialize(ServletHandler.java:760)\r\n>         at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:374)\r\n>         at org.eclipse.jetty.webapp.WebAppContext.startWebapp(WebAppContext.java:1497)\r\n>         at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1459)\r\n>         at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:847)\r\n>         at org.eclipse.jetty.servlet.ServletContextHandler.doStart(ServletContextHandler.java:287)\r\n>         at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:545)\r\n>         at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n>         at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:138)\r\n>         at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:117)\r\n>         at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113)\r\n>         at org.eclipse.jetty.server.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:168)\r\n>         at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n>         at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:138)\r\n>         at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:117)\r\n>         at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113)\r\n>         at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n>         at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:138)\r\n>         at org.eclipse.jetty.server.Server.start(Server.java:416)\r\n>         at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:108)\r\n>         at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113)\r\n>         at org.eclipse.jetty.server.Server.doStart(Server.java:383)\r\n>         at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n>         at org.eclipse.jetty.runner.Runner.run(Runner.java:532)\r\n>         at org.eclipse.jetty.runner.Runner.main(Runner.java:577)\r\n> \r\n> ", "commits": {}, "title": "Caused by: java.lang.IllegalArgumentException: ....MvcConfiguration$$EnhancerByCGLIB$$8199e631 is not an enhanced class", "created": "2019-01-23 07:43:23", "user": "temmyg", "url": "https://github.com/eclipse/jetty.project/issues/3285", "commitsDetails": [], "ttf": 15.000277777777777}, {"labels": ["Documentation", "Not a bug"], "closed": "2019-01-22 04:15:20", "body": "When trying to upgrade jetty from 9.4.12, I get serialization issues such as : \r\n\r\n```\r\ncom.hazelcast.nio.serialization.HazelcastSerializationException: java.io.IOException: Not ClassLoadingObjectInputStream\r\nat com.hazelcast.internal.serialization.impl.SerializationUtil.handleException(SerializationUtil.java:63)\r\nat com.hazelcast.internal.serialization.impl.AbstractSerializationService.toObject(AbstractSerializationService.java:193)\r\nat com.hazelcast.map.impl.proxy.MapProxySupport.toObject(MapProxySupport.java:1245)\r\nat com.hazelcast.map.impl.proxy.MapProxyImpl.remove(MapProxyImpl.java:268)\r\nat org.eclipse.jetty.hazelcast.session.HazelcastSessionDataStore.delete(HazelcastSessionDataStore.java:77)\r\nat org.eclipse.jetty.server.session.AbstractSessionCache.loadSession(AbstractSessionCache.java:476)\r\nat org.eclipse.jetty.server.session.AbstractSessionCache.get(AbstractSessionCache.java:364)\r\nat org.eclipse.jetty.server.session.SessionHandler.getSession(SessionHandler.java:933)\r\nat org.eclipse.jetty.server.session.SessionHandler.getHttpSession(SessionHandler.java:538)\r\n```\r\n\r\nI suspect there is something wrong since https://github.com/eclipse/jetty.project/pull/2964 has been merged ;-)\r\n\r\nI'm staying in 9.4.12 in the meantime :)", "commits": {}, "title": "HazelcastSessionDataStore not working in 9.4.13 and 9.4.14", "created": "2018-12-02 08:57:55", "user": "blop", "url": "https://github.com/eclipse/jetty.project/issues/3175", "commitsDetails": [], "ttf": 50.000277777777775}], "bugLabels": ["Bug", "Http Client Bug", "Not a bug"], "projectName": "eclipse/jetty.project", "captureTime": "Sat Jul  4 14:20:44 2020"}